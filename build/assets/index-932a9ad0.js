import{e as f,bE as m}from"./index-0bc9ae90.js";import{D as y}from"./constants-2af8fd66.js";const c={data:null,ids:[],loading:!1,total:0,filters:{is_muted:!1,sortBy:y,page:0,pageSize:50}};let s=null;const S=f((a,n)=>({...c,setTopics:async()=>{a({loading:!0}),s&&s.abort();const t=new AbortController,{signal:p}=t;s=t;const{data:d,ids:g,filters:e}=n(),u=T(e);e.page===0&&a({data:null,ids:[],total:0});try{const o=await m(u,p),i=e.page===0?{}:{...d||{}},l=e.page===0?[]:[...g];o.data.forEach(r=>{i[r.ref_id]=r,l.push(r.ref_id)}),a({data:i,ids:l,total:o.totalCount}),a({loading:!1})}catch(o){console.error(o)}},setFilters:t=>a({filters:{...n().filters,page:0,...t}}),terminate:()=>a(c)})),T=a=>({muted:a.is_muted?"True":"False",skip:String(a.page*a.pageSize),limit:String(a.pageSize),sort_by:a.sortBy,...a.search?{search:a.search}:{node_type:"Topic"}});export{S as u};
