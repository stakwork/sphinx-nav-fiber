import{r as b,a1 as gu,x as Se,j as P,R as pp,a8 as V_,J as N,a9 as U_,c as mp,s as ye,a as oe,F as Me,B as gp,u as Jt,b as _u,k as bo,n as B_,T as _p,d as Hn,aa as yu,l as W_,e as Ai,D as yp,ab as q_,ac as H_,i as Y_,A as Fr,ad as G_,C as X_,ae as Z_,af as jh}from"./index-ed830d07.js";import{u as Ye,a as qt,m as lc,b as uc,e as vu,L as bu,c as K_,d as Q_,q as J_,g as ey,h as vp,T as xu,f as wu,t as _a,H as xo,P as ty,i as ny,j as sy,k as bp,C as zh,l as Vh,n as ry}from"./index-ac392b04.js";import{P as Ee}from"./index-c98e960a.js";import{m as Uh,H as iy,E as oy,n as As,h as Ue,o as xp,N as Vi,I as hc,p as ay,q as Bh,D as cy,r as ly,R as uy,g as hy,s as wp,P as dy,t as kp,v as fy,O as py}from"./index-a295d989.js";import{T as my}from"./TextareaAutosize-6058cdc1.js";import{a as zo,b as gy,V as _e,c as _y,d as yy,M as fr,e as Te,f as vy,B as by,S as Tp,P as Bc,g as xy,h as ua,i as Ms,T as dc,j as ya,k as wy,l as Wh,G as ky,C as va,m as Ty,n as wo,Q as Ey,o as Ep,p as Cy,q as Sy,r as Oy,E as Ay,s as Ry,t as fc,u as qh,v as Cp,w as Sp}from"./three.module-ba6167ce.js";import{T as Dy}from"./index-07fb4cdb.js";import{u as Py}from"./index-13f3b529.js";import{C as My}from"./ClipLoader-ce2e517a.js";const Ny=["top","right","bottom","left"],ys=Math.min,Lt=Math.max,ba=Math.round,Vo=Math.floor,vs=n=>({x:n,y:n}),Iy={left:"right",right:"left",bottom:"top",top:"bottom"},$y={start:"end",end:"start"};function xl(n,e,t){return Lt(n,ys(e,t))}function Yn(n,e){return typeof n=="function"?n(e):n}function Gn(n){return n.split("-")[0]}function Jr(n){return n.split("-")[1]}function ku(n){return n==="x"?"y":"x"}function Tu(n){return n==="y"?"height":"width"}function ei(n){return["top","bottom"].includes(Gn(n))?"y":"x"}function Eu(n){return ku(ei(n))}function Fy(n,e,t){t===void 0&&(t=!1);const s=Jr(n),r=Eu(n),i=Tu(r);let o=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=xa(o)),[o,xa(o)]}function Ly(n){const e=xa(n);return[wl(n),e,wl(e)]}function wl(n){return n.replace(/start|end/g,e=>$y[e])}function jy(n,e,t){const s=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?i:o;default:return[]}}function zy(n,e,t,s){const r=Jr(n);let i=jy(Gn(n),t==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(wl)))),i}function xa(n){return n.replace(/left|right|bottom|top/g,e=>Iy[e])}function Vy(n){return{top:0,right:0,bottom:0,left:0,...n}}function Op(n){return typeof n!="number"?Vy(n):{top:n,right:n,bottom:n,left:n}}function wa(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function Hh(n,e,t){let{reference:s,floating:r}=n;const i=ei(e),o=Eu(e),a=Tu(o),c=Gn(e),l=i==="y",u=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,d=s[a]/2-r[a]/2;let f;switch(c){case"top":f={x:u,y:s.y-r.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:h};break;case"left":f={x:s.x-r.width,y:h};break;default:f={x:s.x,y:s.y}}switch(Jr(e)){case"start":f[o]-=d*(t&&l?-1:1);break;case"end":f[o]+=d*(t&&l?-1:1);break}return f}const Uy=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:h}=Hh(l,s,c),d=s,f={},g=0;for(let p=0;p<a.length;p++){const{name:m,fn:_}=a[p],{x:T,y:w,data:y,reset:v}=await _({x:u,y:h,initialPlacement:s,placement:d,strategy:r,middlewareData:f,rects:l,platform:o,elements:{reference:n,floating:e}});if(u=T??u,h=w??h,f={...f,[m]:{...f[m],...y}},v&&g<=50){g++,typeof v=="object"&&(v.placement&&(d=v.placement),v.rects&&(l=v.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):v.rects),{x:u,y:h}=Hh(l,d,c)),p=-1;continue}}return{x:u,y:h,placement:d,strategy:r,middlewareData:f}};async function Ui(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Yn(e,n),g=Op(f),m=a[d?h==="floating"?"reference":"floating":h],_=wa(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(m)))==null||t?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),T=h==="floating"?{...o.floating,x:s,y:r}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),y=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},v=wa(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:T,offsetParent:w,strategy:c}):T);return{top:(_.top-v.top+g.top)/y.y,bottom:(v.bottom-_.bottom+g.bottom)/y.y,left:(_.left-v.left+g.left)/y.x,right:(v.right-_.right+g.right)/y.x}}const Yh=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=Yn(n,e)||{};if(l==null)return{};const h=Op(u),d={x:t,y:s},f=Eu(r),g=Tu(f),p=await o.getDimensions(l),m=f==="y",_=m?"top":"left",T=m?"bottom":"right",w=m?"clientHeight":"clientWidth",y=i.reference[g]+i.reference[f]-d[f]-i.floating[g],v=d[f]-i.reference[f],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=k?k[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(k)))&&(E=a.floating[w]||i.floating[g]);const x=y/2-v/2,C=E/2-p[g]/2-1,S=ys(h[_],C),R=ys(h[T],C),O=S,L=E-p[g]-R,z=E/2-p[g]/2+x,W=xl(O,z,L),B=!c.arrow&&Jr(r)!=null&&z!=W&&i.reference[g]/2-(z<O?S:R)-p[g]/2<0,V=B?z<O?z-O:z-L:0;return{[f]:d[f]+V,data:{[f]:W,centerOffset:z-W-V,...B&&{alignmentOffset:V}},reset:B}}}),By=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...m}=Yn(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const _=Gn(r),T=Gn(a)===a,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),y=d||(T||!p?[xa(a)]:Ly(a));!d&&g!=="none"&&y.push(...zy(a,p,g,w));const v=[a,...y],k=await Ui(e,m),E=[];let x=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&E.push(k[_]),h){const O=Fy(r,o,w);E.push(k[O[0]],k[O[1]])}if(x=[...x,{placement:r,overflows:E}],!E.every(O=>O<=0)){var C,S;const O=(((C=i.flip)==null?void 0:C.index)||0)+1,L=v[O];if(L)return{data:{index:O,overflows:x},reset:{placement:L}};let z=(S=x.filter(W=>W.overflows[0]<=0).sort((W,B)=>W.overflows[1]-B.overflows[1])[0])==null?void 0:S.placement;if(!z)switch(f){case"bestFit":{var R;const W=(R=x.map(B=>[B.placement,B.overflows.filter(V=>V>0).reduce((V,U)=>V+U,0)]).sort((B,V)=>B[1]-V[1])[0])==null?void 0:R[0];W&&(z=W);break}case"initialPlacement":z=a;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function Gh(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Xh(n){return Ny.some(e=>n[e]>=0)}const Wy=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=Yn(n,e);switch(s){case"referenceHidden":{const i=await Ui(e,{...r,elementContext:"reference"}),o=Gh(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Xh(o)}}}case"escaped":{const i=await Ui(e,{...r,altBoundary:!0}),o=Gh(i,t.floating);return{data:{escapedOffsets:o,escaped:Xh(o)}}}default:return{}}}}};async function qy(n,e){const{placement:t,platform:s,elements:r}=n,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=Gn(t),a=Jr(t),c=ei(t)==="y",l=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=Yn(e,n);let{mainAxis:d,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),c?{x:f*u,y:d*l}:{x:d*l,y:f*u}}const Hy=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:i,placement:o,middlewareData:a}=e,c=await qy(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},Yy=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:_,y:T}=m;return{x:_,y:T}}},...c}=Yn(n,e),l={x:t,y:s},u=await Ui(e,c),h=ei(Gn(r)),d=ku(h);let f=l[d],g=l[h];if(i){const m=d==="y"?"top":"left",_=d==="y"?"bottom":"right",T=f+u[m],w=f-u[_];f=xl(T,f,w)}if(o){const m=h==="y"?"top":"left",_=h==="y"?"bottom":"right",T=g+u[m],w=g-u[_];g=xl(T,g,w)}const p=a.fn({...e,[d]:f,[h]:g});return{...p,data:{x:p.x-t,y:p.y-s}}}}},Gy=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Yn(n,e),u={x:t,y:s},h=ei(r),d=ku(h);let f=u[d],g=u[h];const p=Yn(a,e),m=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=d==="y"?"height":"width",y=i.reference[d]-i.floating[w]+m.mainAxis,v=i.reference[d]+i.reference[w]-m.mainAxis;f<y?f=y:f>v&&(f=v)}if(l){var _,T;const w=d==="y"?"width":"height",y=["top","left"].includes(Gn(r)),v=i.reference[h]-i.floating[w]+(y&&((_=o.offset)==null?void 0:_[h])||0)+(y?0:m.crossAxis),k=i.reference[h]+i.reference[w]+(y?0:((T=o.offset)==null?void 0:T[h])||0)-(y?m.crossAxis:0);g<v?g=v:g>k&&(g=k)}return{[d]:f,[h]:g}}}},Xy=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:s,platform:r,elements:i}=e,{apply:o=()=>{},...a}=Yn(n,e),c=await Ui(e,a),l=Gn(t),u=Jr(t),h=ei(t)==="y",{width:d,height:f}=s.floating;let g,p;l==="top"||l==="bottom"?(g=l,p=u===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(p=l,g=u==="end"?"top":"bottom");const m=f-c[g],_=d-c[p],T=!e.middlewareData.shift;let w=m,y=_;if(h){const k=d-c.left-c.right;y=u||T?ys(_,k):k}else{const k=f-c.top-c.bottom;w=u||T?ys(m,k):k}if(T&&!u){const k=Lt(c.left,0),E=Lt(c.right,0),x=Lt(c.top,0),C=Lt(c.bottom,0);h?y=d-2*(k!==0||E!==0?k+E:Lt(c.left,c.right)):w=f-2*(x!==0||C!==0?x+C:Lt(c.top,c.bottom))}await o({...e,availableWidth:y,availableHeight:w});const v=await r.getDimensions(i.floating);return d!==v.width||f!==v.height?{reset:{rects:!0}}:{}}}};function bs(n){return Ap(n)?(n.nodeName||"").toLowerCase():"#document"}function Vt(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ts(n){var e;return(e=(Ap(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ap(n){return n instanceof Node||n instanceof Vt(n).Node}function Xn(n){return n instanceof Element||n instanceof Vt(n).Element}function Sn(n){return n instanceof HTMLElement||n instanceof Vt(n).HTMLElement}function Zh(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Vt(n).ShadowRoot}function ko(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=en(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function Zy(n){return["table","td","th"].includes(bs(n))}function Cu(n){const e=Su(),t=en(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function Ky(n){let e=Lr(n);for(;Sn(e)&&!pc(e);){if(Cu(e))return e;e=Lr(e)}return null}function Su(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pc(n){return["html","body","#document"].includes(bs(n))}function en(n){return Vt(n).getComputedStyle(n)}function mc(n){return Xn(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Lr(n){if(bs(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Zh(n)&&n.host||ts(n);return Zh(e)?e.host:e}function Rp(n){const e=Lr(n);return pc(e)?n.ownerDocument?n.ownerDocument.body:n.body:Sn(e)&&ko(e)?e:Rp(e)}function Bi(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=Rp(n),i=r===((s=n.ownerDocument)==null?void 0:s.body),o=Vt(r);return i?e.concat(o,o.visualViewport||[],ko(r)?r:[],o.frameElement&&t?Bi(o.frameElement):[]):e.concat(r,Bi(r,[],t))}function Dp(n){const e=en(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Sn(n),i=r?n.offsetWidth:t,o=r?n.offsetHeight:s,a=ba(t)!==i||ba(s)!==o;return a&&(t=i,s=o),{width:t,height:s,$:a}}function Ou(n){return Xn(n)?n:n.contextElement}function Rr(n){const e=Ou(n);if(!Sn(e))return vs(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:i}=Dp(e);let o=(i?ba(t.width):t.width)/s,a=(i?ba(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Qy=vs(0);function Pp(n){const e=Vt(n);return!Su()||!e.visualViewport?Qy:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jy(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Vt(n)?!1:e}function Qs(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=Ou(n);let o=vs(1);e&&(s?Xn(s)&&(o=Rr(s)):o=Rr(n));const a=Jy(i,t,s)?Pp(i):vs(0);let c=(r.left+a.x)/o.x,l=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(i){const d=Vt(i),f=s&&Xn(s)?Vt(s):s;let g=d.frameElement;for(;g&&s&&f!==d;){const p=Rr(g),m=g.getBoundingClientRect(),_=en(g),T=m.left+(g.clientLeft+parseFloat(_.paddingLeft))*p.x,w=m.top+(g.clientTop+parseFloat(_.paddingTop))*p.y;c*=p.x,l*=p.y,u*=p.x,h*=p.y,c+=T,l+=w,g=Vt(g).frameElement}}return wa({width:u,height:h,x:c,y:l})}function e1(n){let{rect:e,offsetParent:t,strategy:s}=n;const r=Sn(t),i=ts(t);if(t===i)return e;let o={scrollLeft:0,scrollTop:0},a=vs(1);const c=vs(0);if((r||!r&&s!=="fixed")&&((bs(t)!=="body"||ko(i))&&(o=mc(t)),Sn(t))){const l=Qs(t);a=Rr(t),c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+c.x,y:e.y*a.y-o.scrollTop*a.y+c.y}}function t1(n){return Array.from(n.getClientRects())}function Mp(n){return Qs(ts(n)).left+mc(n).scrollLeft}function n1(n){const e=ts(n),t=mc(n),s=n.ownerDocument.body,r=Lt(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Lt(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+Mp(n);const a=-t.scrollTop;return en(s).direction==="rtl"&&(o+=Lt(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}function s1(n,e){const t=Vt(n),s=ts(n),r=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,c=0;if(r){i=r.width,o=r.height;const l=Su();(!l||l&&e==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:a,y:c}}function r1(n,e){const t=Qs(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,i=Sn(n)?Rr(n):vs(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=r*i.x,l=s*i.y;return{width:o,height:a,x:c,y:l}}function Kh(n,e,t){let s;if(e==="viewport")s=s1(n,t);else if(e==="document")s=n1(ts(n));else if(Xn(e))s=r1(e,t);else{const r=Pp(n);s={...e,x:e.x-r.x,y:e.y-r.y}}return wa(s)}function Np(n,e){const t=Lr(n);return t===e||!Xn(t)||pc(t)?!1:en(t).position==="fixed"||Np(t,e)}function i1(n,e){const t=e.get(n);if(t)return t;let s=Bi(n,[],!1).filter(a=>Xn(a)&&bs(a)!=="body"),r=null;const i=en(n).position==="fixed";let o=i?Lr(n):n;for(;Xn(o)&&!pc(o);){const a=en(o),c=Cu(o);!c&&a.position==="fixed"&&(r=null),(i?!c&&!r:!c&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ko(o)&&!c&&Np(n,o))?s=s.filter(u=>u!==o):r=a,o=Lr(o)}return e.set(n,s),s}function o1(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const o=[...t==="clippingAncestors"?i1(e,this._c):[].concat(t),s],a=o[0],c=o.reduce((l,u)=>{const h=Kh(e,u,r);return l.top=Lt(h.top,l.top),l.right=ys(h.right,l.right),l.bottom=ys(h.bottom,l.bottom),l.left=Lt(h.left,l.left),l},Kh(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function a1(n){return Dp(n)}function c1(n,e,t){const s=Sn(e),r=ts(e),i=t==="fixed",o=Qs(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=vs(0);if(s||!s&&!i)if((bs(e)!=="body"||ko(r))&&(a=mc(e)),s){const l=Qs(e,!0,i,e);c.x=l.x+e.clientLeft,c.y=l.y+e.clientTop}else r&&(c.x=Mp(r));return{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Qh(n,e){return!Sn(n)||en(n).position==="fixed"?null:e?e(n):n.offsetParent}function Ip(n,e){const t=Vt(n);if(!Sn(n))return t;let s=Qh(n,e);for(;s&&Zy(s)&&en(s).position==="static";)s=Qh(s,e);return s&&(bs(s)==="html"||bs(s)==="body"&&en(s).position==="static"&&!Cu(s))?t:s||Ky(n)||t}const l1=async function(n){let{reference:e,floating:t,strategy:s}=n;const r=this.getOffsetParent||Ip,i=this.getDimensions;return{reference:c1(e,await r(t),s),floating:{x:0,y:0,...await i(t)}}};function u1(n){return en(n).direction==="rtl"}const h1={convertOffsetParentRelativeRectToViewportRelativeRect:e1,getDocumentElement:ts,getClippingRect:o1,getOffsetParent:Ip,getElementRects:l1,getClientRects:t1,getDimensions:a1,getScale:Rr,isElement:Xn,isRTL:u1};function d1(n,e){let t=null,s;const r=ts(n);function i(){clearTimeout(s),t&&t.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const{left:l,top:u,width:h,height:d}=n.getBoundingClientRect();if(a||e(),!h||!d)return;const f=Vo(u),g=Vo(r.clientWidth-(l+h)),p=Vo(r.clientHeight-(u+d)),m=Vo(l),T={rootMargin:-f+"px "+-g+"px "+-p+"px "+-m+"px",threshold:Lt(0,ys(1,c))||1};let w=!0;function y(v){const k=v[0].intersectionRatio;if(k!==c){if(!w)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{t=new IntersectionObserver(y,{...T,root:r.ownerDocument})}catch{t=new IntersectionObserver(y,T)}t.observe(n)}return o(!0),i}function f1(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,l=Ou(n),u=r||i?[...l?Bi(l):[],...Bi(e)]:[];u.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),i&&_.addEventListener("resize",t)});const h=l&&a?d1(l,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(_=>{let[T]=_;T&&T.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{f&&f.observe(e)})),t()}),l&&!c&&f.observe(l),f.observe(e));let g,p=c?Qs(n):null;c&&m();function m(){const _=Qs(n);p&&(_.x!==p.x||_.y!==p.y||_.width!==p.width||_.height!==p.height)&&t(),p=_,g=requestAnimationFrame(m)}return t(),()=>{u.forEach(_=>{r&&_.removeEventListener("scroll",t),i&&_.removeEventListener("resize",t)}),h&&h(),f&&f.disconnect(),f=null,c&&cancelAnimationFrame(g)}}const p1=(n,e,t)=>{const s=new Map,r={platform:h1,...t},i={...r.platform,_c:s};return Uy(n,e,{...r,platform:i})},m1=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?Yh({element:s.current,padding:r}).fn(t):{}:s?Yh({element:s,padding:r}).fn(t):{}}}};var ha=typeof document<"u"?b.useLayoutEffect:b.useEffect;function ka(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(s=t;s--!==0;)if(!ka(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const i=r[s];if(!(i==="_owner"&&n.$$typeof)&&!ka(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function $p(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Jh(n,e){const t=$p(n);return Math.round(e*t)/t}function ed(n){const e=b.useRef(n);return ha(()=>{e.current=n}),e}function g1(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=n,[u,h]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=b.useState(s);ka(d,s)||f(s);const[g,p]=b.useState(null),[m,_]=b.useState(null),T=b.useCallback(B=>{B!=k.current&&(k.current=B,p(B))},[p]),w=b.useCallback(B=>{B!==E.current&&(E.current=B,_(B))},[_]),y=i||g,v=o||m,k=b.useRef(null),E=b.useRef(null),x=b.useRef(u),C=ed(c),S=ed(r),R=b.useCallback(()=>{if(!k.current||!E.current)return;const B={placement:e,strategy:t,middleware:d};S.current&&(B.platform=S.current),p1(k.current,E.current,B).then(V=>{const U={...V,isPositioned:!0};O.current&&!ka(x.current,U)&&(x.current=U,gu.flushSync(()=>{h(U)}))})},[d,e,t,S]);ha(()=>{l===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[l]);const O=b.useRef(!1);ha(()=>(O.current=!0,()=>{O.current=!1}),[]),ha(()=>{if(y&&(k.current=y),v&&(E.current=v),y&&v){if(C.current)return C.current(y,v,R);R()}},[y,v,R,C]);const L=b.useMemo(()=>({reference:k,floating:E,setReference:T,setFloating:w}),[T,w]),z=b.useMemo(()=>({reference:y,floating:v}),[y,v]),W=b.useMemo(()=>{const B={position:t,left:0,top:0};if(!z.floating)return B;const V=Jh(z.floating,u.x),U=Jh(z.floating,u.y);return a?{...B,transform:"translate("+V+"px, "+U+"px)",...$p(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:V,top:U}},[t,a,z.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:R,refs:L,elements:z,floatingStyles:W}),[u,R,L,z,W])}function _1(n){let e;const t=new Set,s=(l,u)=>{const h=typeof l=="function"?l(e):l;if(h!==e){const d=e;e=u?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,i=(l,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function f(){const g=u(e);if(!h(d,g)){const p=d;l(d=g,p)}}return t.add(f),()=>t.delete(f)},c={setState:s,getState:r,subscribe:(l,u,h)=>u||h?i(l,u,h):(t.add(l),()=>t.delete(l)),destroy:()=>t.clear()};return e=n(s,r,c),c}const y1=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),td=y1?b.useEffect:b.useLayoutEffect;function v1(n){const e=typeof n=="function"?_1(n):n,t=(s=e.getState,r=Object.is)=>{const[,i]=b.useReducer(m=>m+1,0),o=e.getState(),a=b.useRef(o),c=b.useRef(s),l=b.useRef(r),u=b.useRef(!1),h=b.useRef();h.current===void 0&&(h.current=s(o));let d,f=!1;(a.current!==o||c.current!==s||l.current!==r||u.current)&&(d=s(o),f=!r(h.current,d)),td(()=>{f&&(h.current=d),a.current=o,c.current=s,l.current=r,u.current=!1});const g=b.useRef(o);td(()=>{const m=()=>{try{const T=e.getState(),w=c.current(T);l.current(h.current,w)||(a.current=T,h.current=w,i())}catch{u.current=!0,i()}},_=e.subscribe(m);return e.getState()!==g.current&&m(),_},[]);const p=f?d:h.current;return b.useDebugValue(p),p};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const s=[t,e];return{next(){const r=s.length<=0;return{value:s.shift(),done:r}}}},t}let ui=0;const b1=v1(n=>(zo.onStart=(e,t,s)=>{n({active:!0,item:e,loaded:t,total:s,progress:(t-ui)/(s-ui)*100})},zo.onLoad=()=>{n({active:!1})},zo.onError=e=>n(t=>({errors:[...t.errors,e]})),zo.onProgress=(e,t,s)=>{t===s&&(ui=s),n({active:!0,item:e,loaded:t,total:s,progress:(t-ui)/(s-ui)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),x1=n=>`Loading ${n.toFixed(2)}%`;function w1({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:s,dataInterpolation:r=x1,initialState:i=o=>o}){const{active:o,progress:a}=b1(),c=b.useRef(0),l=b.useRef(0),u=b.useRef(null),[h,d]=b.useState(i(o));b.useEffect(()=>{let g;return o!==h&&(g=setTimeout(()=>d(o),300)),()=>clearTimeout(g)},[h,o]);const f=b.useCallback(()=>{u.current&&(c.current+=(a-c.current)/2,(c.current>.95*a||a===100)&&(c.current=a),u.current.innerText=r(c.current),c.current<a&&(l.current=requestAnimationFrame(f)))},[r,a]);return b.useEffect(()=>(f(),()=>cancelAnimationFrame(l.current)),[f]),h?b.createElement("div",{style:{...Uo.container,opacity:o?1:0,...n}},b.createElement("div",null,b.createElement("div",{style:{...Uo.inner,...e}},b.createElement("div",{style:{...Uo.bar,transform:`scaleX(${a/100})`,...t}}),b.createElement("span",{ref:u,style:{...Uo.data,...s}})))):null}const Uo={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},Wc=new gy,qc=new _e,pr=new _e,rn=new _e,Nn=new _e,vn=new _e,In=new _e,$n=new _e,hi=new _e,di=new _e,fi=new _e,Bo=new _e,pi=new _e,mi=new _e,gi=new _e;class k1{constructor(e,t,s){this.camera=e,this.scene=t,this.startPoint=new _e,this.endPoint=new _e,this.collection=[],this.deep=s||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(Wc,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){pr.copy(e),pr.x=Math.min(e.x,t.x),pr.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),rn.setFromMatrixPosition(this.camera.matrixWorld),Nn.copy(pr),vn.set(t.x,pr.y,0),In.copy(t),$n.set(pr.x,t.y,0),Nn.unproject(this.camera),vn.unproject(this.camera),In.unproject(this.camera),$n.unproject(this.camera),pi.copy(Nn).sub(rn),mi.copy(vn).sub(rn),gi.copy(In).sub(rn),pi.normalize(),mi.normalize(),gi.normalize(),pi.multiplyScalar(this.deep),mi.multiplyScalar(this.deep),gi.multiplyScalar(this.deep),pi.add(rn),mi.add(rn),gi.add(rn);var s=Wc.planes;s[0].setFromCoplanarPoints(rn,Nn,vn),s[1].setFromCoplanarPoints(rn,vn,In),s[2].setFromCoplanarPoints(In,$n,rn),s[3].setFromCoplanarPoints($n,Nn,rn),s[4].setFromCoplanarPoints(vn,In,$n),s[5].setFromCoplanarPoints(gi,mi,pi),s[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);Nn.set(r,i,-1),vn.set(o,i,-1),In.set(o,a,-1),$n.set(r,a,-1),hi.set(r,i,1),di.set(o,i,1),fi.set(o,a,1),Bo.set(r,a,1),Nn.unproject(this.camera),vn.unproject(this.camera),In.unproject(this.camera),$n.unproject(this.camera),hi.unproject(this.camera),di.unproject(this.camera),fi.unproject(this.camera),Bo.unproject(this.camera);var s=Wc.planes;s[0].setFromCoplanarPoints(Nn,hi,di),s[1].setFromCoplanarPoints(vn,di,fi),s[2].setFromCoplanarPoints(fi,Bo,$n),s[3].setFromCoplanarPoints(Bo,hi,Nn),s[4].setFromCoplanarPoints(vn,In,$n),s[5].setFromCoplanarPoints(fi,di,hi),s[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),qc.copy(t.geometry.boundingSphere.center),qc.applyMatrix4(t.matrixWorld),e.containsPoint(qc)&&this.collection.push(t)),t.children.length>0)for(let s=0;s<t.children.length;s++)this.searchChildInFrustum(e,t.children[s])}}class Pi extends _y{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,s,r){const i=this,o=new yy(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(a){try{t(i.parse(a))}catch(c){r?r(c):console.error(c),i.manager.itemError(e)}},s,r)}parse(e){const t=this;function s(F,j){if(F.nodeType!==1)return;const A=y(F);let I=!0,Y=null;switch(F.nodeName){case"svg":break;case"style":i(F);break;case"g":j=g(F,j);break;case"path":j=g(F,j),F.hasAttribute("d")&&(Y=r(F));break;case"rect":j=g(F,j),Y=c(F);break;case"polygon":j=g(F,j),Y=l(F);break;case"polyline":j=g(F,j),Y=u(F);break;case"circle":j=g(F,j),Y=h(F);break;case"ellipse":j=g(F,j),Y=d(F);break;case"line":j=g(F,j),Y=f(F);break;case"defs":I=!1;break;case"mask":I=!1;break;case"use":j=g(F,j);const $=F.href.baseVal.substring(1),q=F.viewportElement.getElementById($);q?s(q,j):console.warn("SVGLoader: 'use node' references non-existent node id: "+$);break}if(Y&&(j.fill!==void 0&&j.fill!=="none"&&Y.color.setStyle(j.fill),k(Y,X),S.push(Y),Y.userData={node:F,style:j}),I){const $=F.childNodes;for(let q=0;q<$.length;q++)s($[q],j)}A&&(O.pop(),O.length>0?X.copy(O[O.length-1]):X.identity())}function r(F){const j=new Ms,A=new Te,I=new Te,Y=new Te;let $=!0,q=!1;const re=F.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let ie=0,ne=re.length;ie<ne;ie++){const ge=re[ie],te=ge.charAt(0),H=ge.substr(1).trim();$===!0&&(q=!0,$=!1);let M;switch(te){case"M":M=m(H);for(let D=0,J=M.length;D<J;D+=2)A.x=M[D+0],A.y=M[D+1],I.x=A.x,I.y=A.y,D===0?j.moveTo(A.x,A.y):j.lineTo(A.x,A.y),D===0&&Y.copy(A);break;case"H":M=m(H);for(let D=0,J=M.length;D<J;D++)A.x=M[D],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"V":M=m(H);for(let D=0,J=M.length;D<J;D++)A.y=M[D],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"L":M=m(H);for(let D=0,J=M.length;D<J;D+=2)A.x=M[D+0],A.y=M[D+1],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"C":M=m(H);for(let D=0,J=M.length;D<J;D+=6)j.bezierCurveTo(M[D+0],M[D+1],M[D+2],M[D+3],M[D+4],M[D+5]),I.x=M[D+2],I.y=M[D+3],A.x=M[D+4],A.y=M[D+5],D===0&&q===!0&&Y.copy(A);break;case"S":M=m(H);for(let D=0,J=M.length;D<J;D+=4)j.bezierCurveTo(p(A.x,I.x),p(A.y,I.y),M[D+0],M[D+1],M[D+2],M[D+3]),I.x=M[D+0],I.y=M[D+1],A.x=M[D+2],A.y=M[D+3],D===0&&q===!0&&Y.copy(A);break;case"Q":M=m(H);for(let D=0,J=M.length;D<J;D+=4)j.quadraticCurveTo(M[D+0],M[D+1],M[D+2],M[D+3]),I.x=M[D+0],I.y=M[D+1],A.x=M[D+2],A.y=M[D+3],D===0&&q===!0&&Y.copy(A);break;case"T":M=m(H);for(let D=0,J=M.length;D<J;D+=2){const se=p(A.x,I.x),le=p(A.y,I.y);j.quadraticCurveTo(se,le,M[D+0],M[D+1]),I.x=se,I.y=le,A.x=M[D+0],A.y=M[D+1],D===0&&q===!0&&Y.copy(A)}break;case"A":M=m(H,[3,4],7);for(let D=0,J=M.length;D<J;D+=7){if(M[D+5]==A.x&&M[D+6]==A.y)continue;const se=A.clone();A.x=M[D+5],A.y=M[D+6],I.x=A.x,I.y=A.y,o(j,M[D],M[D+1],M[D+2],M[D+3],M[D+4],se,A),D===0&&q===!0&&Y.copy(A)}break;case"m":M=m(H);for(let D=0,J=M.length;D<J;D+=2)A.x+=M[D+0],A.y+=M[D+1],I.x=A.x,I.y=A.y,D===0?j.moveTo(A.x,A.y):j.lineTo(A.x,A.y),D===0&&Y.copy(A);break;case"h":M=m(H);for(let D=0,J=M.length;D<J;D++)A.x+=M[D],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"v":M=m(H);for(let D=0,J=M.length;D<J;D++)A.y+=M[D],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"l":M=m(H);for(let D=0,J=M.length;D<J;D+=2)A.x+=M[D+0],A.y+=M[D+1],I.x=A.x,I.y=A.y,j.lineTo(A.x,A.y),D===0&&q===!0&&Y.copy(A);break;case"c":M=m(H);for(let D=0,J=M.length;D<J;D+=6)j.bezierCurveTo(A.x+M[D+0],A.y+M[D+1],A.x+M[D+2],A.y+M[D+3],A.x+M[D+4],A.y+M[D+5]),I.x=A.x+M[D+2],I.y=A.y+M[D+3],A.x+=M[D+4],A.y+=M[D+5],D===0&&q===!0&&Y.copy(A);break;case"s":M=m(H);for(let D=0,J=M.length;D<J;D+=4)j.bezierCurveTo(p(A.x,I.x),p(A.y,I.y),A.x+M[D+0],A.y+M[D+1],A.x+M[D+2],A.y+M[D+3]),I.x=A.x+M[D+0],I.y=A.y+M[D+1],A.x+=M[D+2],A.y+=M[D+3],D===0&&q===!0&&Y.copy(A);break;case"q":M=m(H);for(let D=0,J=M.length;D<J;D+=4)j.quadraticCurveTo(A.x+M[D+0],A.y+M[D+1],A.x+M[D+2],A.y+M[D+3]),I.x=A.x+M[D+0],I.y=A.y+M[D+1],A.x+=M[D+2],A.y+=M[D+3],D===0&&q===!0&&Y.copy(A);break;case"t":M=m(H);for(let D=0,J=M.length;D<J;D+=2){const se=p(A.x,I.x),le=p(A.y,I.y);j.quadraticCurveTo(se,le,A.x+M[D+0],A.y+M[D+1]),I.x=se,I.y=le,A.x=A.x+M[D+0],A.y=A.y+M[D+1],D===0&&q===!0&&Y.copy(A)}break;case"a":M=m(H,[3,4],7);for(let D=0,J=M.length;D<J;D+=7){if(M[D+5]==0&&M[D+6]==0)continue;const se=A.clone();A.x+=M[D+5],A.y+=M[D+6],I.x=A.x,I.y=A.y,o(j,M[D],M[D+1],M[D+2],M[D+3],M[D+4],se,A),D===0&&q===!0&&Y.copy(A)}break;case"Z":case"z":j.currentPath.autoClose=!0,j.currentPath.curves.length>0&&(A.copy(Y),j.currentPath.currentPoint.copy(A),$=!0);break;default:console.warn(ge)}q=!1}return j}function i(F){if(!(!F.sheet||!F.sheet.cssRules||!F.sheet.cssRules.length))for(let j=0;j<F.sheet.cssRules.length;j++){const A=F.sheet.cssRules[j];if(A.type!==1)continue;const I=A.selectorText.split(/,/gm).filter(Boolean).map(Y=>Y.trim());for(let Y=0;Y<I.length;Y++)R[I[Y]]=Object.assign(R[I[Y]]||{},A.style)}}function o(F,j,A,I,Y,$,q,ae){if(j==0||A==0){F.lineTo(ae.x,ae.y);return}I=I*Math.PI/180,j=Math.abs(j),A=Math.abs(A);const re=(q.x-ae.x)/2,ie=(q.y-ae.y)/2,ne=Math.cos(I)*re+Math.sin(I)*ie,ge=-Math.sin(I)*re+Math.cos(I)*ie;let te=j*j,H=A*A;const M=ne*ne,D=ge*ge,J=M/te+D/H;if(J>1){const os=Math.sqrt(J);j=os*j,A=os*A,te=j*j,H=A*A}const se=te*D+H*M,le=(te*H-se)/se;let be=Math.sqrt(Math.max(0,le));Y===$&&(be=-be);const et=be*j*ge/A,ee=-be*A*ne/j,fe=Math.cos(I)*et-Math.sin(I)*ee+(q.x+ae.x)/2,tt=Math.sin(I)*et+Math.cos(I)*ee+(q.y+ae.y)/2,at=a(1,0,(ne-et)/j,(ge-ee)/A),$t=a((ne-et)/j,(ge-ee)/A,(-ne-et)/j,(-ge-ee)/A)%(Math.PI*2);F.currentPath.absellipse(fe,tt,j,A,at,at+$t,$===0,I)}function a(F,j,A,I){const Y=F*A+j*I,$=Math.sqrt(F*F+j*j)*Math.sqrt(A*A+I*I);let q=Math.acos(Math.max(-1,Math.min(1,Y/$)));return F*I-j*A<0&&(q=-q),q}function c(F){const j=w(F.getAttribute("x")||0),A=w(F.getAttribute("y")||0),I=w(F.getAttribute("rx")||F.getAttribute("ry")||0),Y=w(F.getAttribute("ry")||F.getAttribute("rx")||0),$=w(F.getAttribute("width")),q=w(F.getAttribute("height")),ae=1-.551915024494,re=new Ms;return re.moveTo(j+I,A),re.lineTo(j+$-I,A),(I!==0||Y!==0)&&re.bezierCurveTo(j+$-I*ae,A,j+$,A+Y*ae,j+$,A+Y),re.lineTo(j+$,A+q-Y),(I!==0||Y!==0)&&re.bezierCurveTo(j+$,A+q-Y*ae,j+$-I*ae,A+q,j+$-I,A+q),re.lineTo(j+I,A+q),(I!==0||Y!==0)&&re.bezierCurveTo(j+I*ae,A+q,j,A+q-Y*ae,j,A+q-Y),re.lineTo(j,A+Y),(I!==0||Y!==0)&&re.bezierCurveTo(j,A+Y*ae,j+I*ae,A,j+I,A),re}function l(F){function j($,q,ae){const re=w(q),ie=w(ae);Y===0?I.moveTo(re,ie):I.lineTo(re,ie),Y++}const A=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,I=new Ms;let Y=0;return F.getAttribute("points").replace(A,j),I.currentPath.autoClose=!0,I}function u(F){function j($,q,ae){const re=w(q),ie=w(ae);Y===0?I.moveTo(re,ie):I.lineTo(re,ie),Y++}const A=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,I=new Ms;let Y=0;return F.getAttribute("points").replace(A,j),I.currentPath.autoClose=!1,I}function h(F){const j=w(F.getAttribute("cx")||0),A=w(F.getAttribute("cy")||0),I=w(F.getAttribute("r")||0),Y=new Bc;Y.absarc(j,A,I,0,Math.PI*2);const $=new Ms;return $.subPaths.push(Y),$}function d(F){const j=w(F.getAttribute("cx")||0),A=w(F.getAttribute("cy")||0),I=w(F.getAttribute("rx")||0),Y=w(F.getAttribute("ry")||0),$=new Bc;$.absellipse(j,A,I,Y,0,Math.PI*2);const q=new Ms;return q.subPaths.push($),q}function f(F){const j=w(F.getAttribute("x1")||0),A=w(F.getAttribute("y1")||0),I=w(F.getAttribute("x2")||0),Y=w(F.getAttribute("y2")||0),$=new Ms;return $.moveTo(j,A),$.lineTo(I,Y),$.currentPath.autoClose=!1,$}function g(F,j){j=Object.assign({},j);let A={};if(F.hasAttribute("class")){const q=F.getAttribute("class").split(/\s/).filter(Boolean).map(ae=>ae.trim());for(let ae=0;ae<q.length;ae++)A=Object.assign(A,R["."+q[ae]])}F.hasAttribute("id")&&(A=Object.assign(A,R["#"+F.getAttribute("id")]));function I(q,ae,re){re===void 0&&(re=function(ne){return ne.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ne}),F.hasAttribute(q)&&(j[ae]=re(F.getAttribute(q))),A[q]&&(j[ae]=re(A[q])),F.style&&F.style[q]!==""&&(j[ae]=re(F.style[q]))}function Y(q){return Math.max(0,Math.min(1,w(q)))}function $(q){return Math.max(0,w(q))}return I("fill","fill"),I("fill-opacity","fillOpacity",Y),I("fill-rule","fillRule"),I("opacity","opacity",Y),I("stroke","stroke"),I("stroke-opacity","strokeOpacity",Y),I("stroke-width","strokeWidth",$),I("stroke-linejoin","strokeLineJoin"),I("stroke-linecap","strokeLineCap"),I("stroke-miterlimit","strokeMiterLimit",$),I("visibility","visibility"),j}function p(F,j){return F-(j-F)}function m(F,j,A){if(typeof F!="string")throw new TypeError("Invalid input: "+typeof F);const I={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Y=0,$=1,q=2,ae=3;let re=Y,ie=!0,ne="",ge="";const te=[];function H(se,le,be){const et=new SyntaxError('Unexpected character "'+se+'" at index '+le+".");throw et.partial=be,et}function M(){ne!==""&&(ge===""?te.push(Number(ne)):te.push(Number(ne)*Math.pow(10,Number(ge)))),ne="",ge=""}let D;const J=F.length;for(let se=0;se<J;se++){if(D=F[se],Array.isArray(j)&&j.includes(te.length%A)&&I.FLAGS.test(D)){re=$,ne=D,M();continue}if(re===Y){if(I.WHITESPACE.test(D))continue;if(I.DIGIT.test(D)||I.SIGN.test(D)){re=$,ne=D;continue}if(I.POINT.test(D)){re=q,ne=D;continue}I.COMMA.test(D)&&(ie&&H(D,se,te),ie=!0)}if(re===$){if(I.DIGIT.test(D)){ne+=D;continue}if(I.POINT.test(D)){ne+=D,re=q;continue}if(I.EXP.test(D)){re=ae;continue}I.SIGN.test(D)&&ne.length===1&&I.SIGN.test(ne[0])&&H(D,se,te)}if(re===q){if(I.DIGIT.test(D)){ne+=D;continue}if(I.EXP.test(D)){re=ae;continue}I.POINT.test(D)&&ne[ne.length-1]==="."&&H(D,se,te)}if(re===ae){if(I.DIGIT.test(D)){ge+=D;continue}if(I.SIGN.test(D)){if(ge===""){ge+=D;continue}ge.length===1&&I.SIGN.test(ge)&&H(D,se,te)}}I.WHITESPACE.test(D)?(M(),re=Y,ie=!1):I.COMMA.test(D)?(M(),re=Y,ie=!0):I.SIGN.test(D)?(M(),re=$,ne=D):I.POINT.test(D)?(M(),re=q,ne=D):H(D,se,te)}return M(),te}const _=["mm","cm","in","pt","pc","px"],T={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function w(F){let j="px";if(typeof F=="string"||F instanceof String)for(let I=0,Y=_.length;I<Y;I++){const $=_[I];if(F.endsWith($)){j=$,F=F.substring(0,F.length-$.length);break}}let A;return j==="px"&&t.defaultUnit!=="px"?A=T.in[t.defaultUnit]/t.defaultDPI:(A=T[j][t.defaultUnit],A<0&&(A=T[j].in*t.defaultDPI)),A*parseFloat(F)}function y(F){if(!(F.hasAttribute("transform")||F.nodeName==="use"&&(F.hasAttribute("x")||F.hasAttribute("y"))))return null;const j=v(F);return O.length>0&&j.premultiply(O[O.length-1]),X.copy(j),O.push(j),j}function v(F){const j=new fr,A=L;if(F.nodeName==="use"&&(F.hasAttribute("x")||F.hasAttribute("y"))){const I=w(F.getAttribute("x")),Y=w(F.getAttribute("y"));j.translate(I,Y)}if(F.hasAttribute("transform")){const I=F.getAttribute("transform").split(")");for(let Y=I.length-1;Y>=0;Y--){const $=I[Y].trim();if($==="")continue;const q=$.indexOf("("),ae=$.length;if(q>0&&q<ae){const re=$.substr(0,q),ie=m($.substr(q+1,ae-q-1));switch(A.identity(),re){case"translate":if(ie.length>=1){const ne=ie[0];let ge=ne;ie.length>=2&&(ge=ie[1]),A.translate(ne,ge)}break;case"rotate":if(ie.length>=1){let ne=0,ge=0,te=0;ne=-ie[0]*Math.PI/180,ie.length>=3&&(ge=ie[1],te=ie[2]),z.identity().translate(-ge,-te),W.identity().rotate(ne),B.multiplyMatrices(W,z),z.identity().translate(ge,te),A.multiplyMatrices(z,B)}break;case"scale":if(ie.length>=1){const ne=ie[0];let ge=ne;ie.length>=2&&(ge=ie[1]),A.scale(ne,ge)}break;case"skewX":ie.length===1&&A.set(1,Math.tan(ie[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":ie.length===1&&A.set(1,0,0,Math.tan(ie[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":ie.length===6&&A.set(ie[0],ie[2],ie[4],ie[1],ie[3],ie[5],0,0,1);break}}j.premultiply(A)}}return j}function k(F,j){function A($){U.set($.x,$.y,1).applyMatrix3(j),$.set(U.x,U.y)}const I=E(j),Y=F.subPaths;for(let $=0,q=Y.length;$<q;$++){const re=Y[$].curves;for(let ie=0;ie<re.length;ie++){const ne=re[ie];ne.isLineCurve?(A(ne.v1),A(ne.v2)):ne.isCubicBezierCurve?(A(ne.v0),A(ne.v1),A(ne.v2),A(ne.v3)):ne.isQuadraticBezierCurve?(A(ne.v0),A(ne.v1),A(ne.v2)):ne.isEllipseCurve&&(I&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),V.set(ne.aX,ne.aY),A(V),ne.aX=V.x,ne.aY=V.y,ne.xRadius*=x(j),ne.yRadius*=C(j))}}}function E(F){return F.elements[1]!==0||F.elements[3]!==0}function x(F){const j=F.elements;return Math.sqrt(j[0]*j[0]+j[1]*j[1])}function C(F){const j=F.elements;return Math.sqrt(j[3]*j[3]+j[4]*j[4])}const S=[],R={},O=[],L=new fr,z=new fr,W=new fr,B=new fr,V=new Te,U=new _e,X=new fr,K=new DOMParser().parseFromString(e,"image/svg+xml");return s(K.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:S,xml:K.documentElement}}static createShapes(e){const s={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:s.ORIGIN,t:0};function i(m,_,T,w){const y=m.x,v=_.x,k=T.x,E=w.x,x=m.y,C=_.y,S=T.y,R=w.y,O=(E-k)*(x-S)-(R-S)*(y-k),L=(v-y)*(x-S)-(C-x)*(y-k),z=(R-S)*(v-y)-(E-k)*(C-x),W=O/z,B=L/z;if(z===0&&O!==0||W<=0||W>=1||B<0||B>1)return null;if(O===0&&z===0){for(let V=0;V<2;V++)if(o(V===0?T:w,m,_),r.loc==s.ORIGIN){const U=V===0?T:w;return{x:U.x,y:U.y,t:r.t}}else if(r.loc==s.BETWEEN){const U=+(y+r.t*(v-y)).toPrecision(10),X=+(x+r.t*(C-x)).toPrecision(10);return{x:U,y:X,t:r.t}}return null}else{for(let X=0;X<2;X++)if(o(X===0?T:w,m,_),r.loc==s.ORIGIN){const K=X===0?T:w;return{x:K.x,y:K.y,t:r.t}}const V=+(y+W*(v-y)).toPrecision(10),U=+(x+W*(C-x)).toPrecision(10);return{x:V,y:U,t:W}}}function o(m,_,T){const w=T.x-_.x,y=T.y-_.y,v=m.x-_.x,k=m.y-_.y,E=w*k-v*y;if(m.x===_.x&&m.y===_.y){r.loc=s.ORIGIN,r.t=0;return}if(m.x===T.x&&m.y===T.y){r.loc=s.DESTINATION,r.t=1;return}if(E<-Number.EPSILON){r.loc=s.LEFT;return}if(E>Number.EPSILON){r.loc=s.RIGHT;return}if(w*v<0||y*k<0){r.loc=s.BEHIND;return}if(Math.sqrt(w*w+y*y)<Math.sqrt(v*v+k*k)){r.loc=s.BEYOND;return}let x;w!==0?x=v/w:x=k/y,r.loc=s.BETWEEN,r.t=x}function a(m,_){const T=[],w=[];for(let y=1;y<m.length;y++){const v=m[y-1],k=m[y];for(let E=1;E<_.length;E++){const x=_[E-1],C=_[E],S=i(v,k,x,C);S!==null&&T.find(R=>R.t<=S.t+Number.EPSILON&&R.t>=S.t-Number.EPSILON)===void 0&&(T.push(S),w.push(new Te(S.x,S.y)))}}return w}function c(m,_,T){const w=new Te;_.getCenter(w);const y=[];return T.forEach(v=>{v.boundingBox.containsPoint(w)&&a(m,v.points).forEach(E=>{y.push({identifier:v.identifier,isCW:v.isCW,point:E})})}),y.sort((v,k)=>v.point.x-k.point.x),y}function l(m,_,T,w,y){(y==null||y==="")&&(y="nonzero");const v=new Te;m.boundingBox.getCenter(v);const k=[new Te(T,v.y),new Te(w,v.y)],E=c(k,m.boundingBox,_);E.sort((L,z)=>L.point.x-z.point.x);const x=[],C=[];E.forEach(L=>{L.identifier===m.identifier?x.push(L):C.push(L)});const S=x[0].point.x,R=[];let O=0;for(;O<C.length&&C[O].point.x<S;)R.length>0&&R[R.length-1]===C[O].identifier?R.pop():R.push(C[O].identifier),O++;if(R.push(m.identifier),y==="evenodd"){const L=R.length%2===0,z=R[R.length-2];return{identifier:m.identifier,isHole:L,for:z}}else if(y==="nonzero"){let L=!0,z=null,W=null;for(let B=0;B<R.length;B++){const V=R[B];L?(W=_[V].isCW,L=!1,z=V):W!==_[V].isCW&&(W=_[V].isCW,L=!0)}return{identifier:m.identifier,isHole:L,for:z}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let u=0,h=999999999,d=-999999999,f=e.subPaths.map(m=>{const _=m.getPoints();let T=-999999999,w=999999999,y=-999999999,v=999999999;for(let k=0;k<_.length;k++){const E=_[k];E.y>T&&(T=E.y),E.y<w&&(w=E.y),E.x>y&&(y=E.x),E.x<v&&(v=E.x)}return d<=y&&(d=y+1),h>=v&&(h=v-1),{curves:m.curves,points:_,isCW:vy.isClockWise(_),identifier:u++,boundingBox:new by(new Te(v,w),new Te(y,T))}});f=f.filter(m=>m.points.length>1);const g=f.map(m=>l(m,f,h,d,e.userData.style.fillRule)),p=[];return f.forEach(m=>{if(!g[m.identifier].isHole){const T=new Tp;T.curves=m.curves,g.filter(y=>y.isHole&&y.for===m.identifier).forEach(y=>{const v=f[y.identifier],k=new Bc;k.curves=v.curves,T.holes.push(k)}),p.push(T)}}),p}static getStrokeStyle(e,t,s,r,i){return e=e!==void 0?e:1,t=t!==void 0?t:"#000",s=s!==void 0?s:"miter",r=r!==void 0?r:"butt",i=i!==void 0?i:4,{strokeColor:t,strokeWidth:e,strokeLineJoin:s,strokeLineCap:r,strokeMiterLimit:i}}static pointsToStroke(e,t,s,r){const i=[],o=[],a=[];if(Pi.pointsToStrokeWithBuffers(e,t,s,r,i,o,a)===0)return null;const c=new xy;return c.setAttribute("position",new ua(i,3)),c.setAttribute("normal",new ua(o,3)),c.setAttribute("uv",new ua(a,2)),c}static pointsToStrokeWithBuffers(e,t,s,r,i,o,a,c){const l=new Te,u=new Te,h=new Te,d=new Te,f=new Te,g=new Te,p=new Te,m=new Te,_=new Te,T=new Te,w=new Te,y=new Te,v=new Te,k=new Te,E=new Te,x=new Te,C=new Te;s=s!==void 0?s:12,r=r!==void 0?r:.001,c=c!==void 0?c:0,e=ge(e);const S=e.length;if(S<2)return 0;const R=e[0].equals(e[S-1]);let O,L=e[0],z;const W=t.strokeWidth/2,B=1/(S-1);let V=0,U,X,K,Q,F=!1,j=0,A=c*3,I=c*2;Y(e[0],e[1],l).multiplyScalar(W),m.copy(e[0]).sub(l),_.copy(e[0]).add(l),T.copy(m),w.copy(_);for(let te=1;te<S;te++){O=e[te],te===S-1?R?z=e[1]:z=void 0:z=e[te+1];const H=l;if(Y(L,O,H),h.copy(H).multiplyScalar(W),y.copy(O).sub(h),v.copy(O).add(h),U=V+B,X=!1,z!==void 0){Y(O,z,u),h.copy(u).multiplyScalar(W),k.copy(O).sub(h),E.copy(O).add(h),K=!0,h.subVectors(z,L),H.dot(h)<0&&(K=!1),te===1&&(F=K),h.subVectors(z,O),h.normalize();const M=Math.abs(H.dot(h));if(M!==0){const D=W/M;h.multiplyScalar(-D),d.subVectors(O,L),f.copy(d).setLength(D).add(h),x.copy(f).negate();const J=f.length(),se=d.length();d.divideScalar(se),g.subVectors(z,O);const le=g.length();switch(g.divideScalar(le),d.dot(x)<se&&g.dot(x)<le&&(X=!0),C.copy(f).add(O),x.add(O),Q=!1,X?K?(E.copy(x),v.copy(x)):(k.copy(x),y.copy(x)):ae(),t.strokeLineJoin){case"bevel":re(K,X,U);break;case"round":ie(K,X),K?q(O,y,k,U,0):q(O,E,v,U,1);break;case"miter":case"miter-clip":default:const be=W*t.strokeMiterLimit/J;if(be<1)if(t.strokeLineJoin!=="miter-clip"){re(K,X,U);break}else ie(K,X),K?(g.subVectors(C,y).multiplyScalar(be).add(y),p.subVectors(C,k).multiplyScalar(be).add(k),$(y,U,0),$(g,U,0),$(O,U,.5),$(O,U,.5),$(g,U,0),$(p,U,0),$(O,U,.5),$(p,U,0),$(k,U,0)):(g.subVectors(C,v).multiplyScalar(be).add(v),p.subVectors(C,E).multiplyScalar(be).add(E),$(v,U,1),$(g,U,1),$(O,U,.5),$(O,U,.5),$(g,U,1),$(p,U,1),$(O,U,.5),$(p,U,1),$(E,U,1));else X?(K?($(_,V,1),$(m,V,0),$(C,U,0),$(_,V,1),$(C,U,0),$(x,U,1)):($(_,V,1),$(m,V,0),$(C,U,1),$(m,V,0),$(x,U,0),$(C,U,1)),K?k.copy(C):E.copy(C)):K?($(y,U,0),$(C,U,0),$(O,U,.5),$(O,U,.5),$(C,U,0),$(k,U,0)):($(v,U,1),$(C,U,1),$(O,U,.5),$(O,U,.5),$(C,U,1),$(E,U,1)),Q=!0;break}}else ae()}else ae();!R&&te===S-1&&ne(e[0],T,w,K,!0,V),V=U,L=O,m.copy(k),_.copy(E)}if(!R)ne(O,y,v,K,!1,U);else if(X&&i){let te=C,H=x;F!==K&&(te=x,H=C),K?(Q||F)&&(H.toArray(i,0*3),H.toArray(i,3*3),Q&&te.toArray(i,1*3)):(Q||!F)&&(H.toArray(i,1*3),H.toArray(i,3*3),Q&&te.toArray(i,0*3))}return j;function Y(te,H,M){return M.subVectors(H,te),M.set(-M.y,M.x).normalize()}function $(te,H,M){i&&(i[A]=te.x,i[A+1]=te.y,i[A+2]=0,o&&(o[A]=0,o[A+1]=0,o[A+2]=1),A+=3,a&&(a[I]=H,a[I+1]=M,I+=2)),j+=3}function q(te,H,M,D,J){l.copy(H).sub(te).normalize(),u.copy(M).sub(te).normalize();let se=Math.PI;const le=l.dot(u);Math.abs(le)<1&&(se=Math.abs(Math.acos(le))),se/=s,h.copy(H);for(let be=0,et=s-1;be<et;be++)d.copy(h).rotateAround(te,se),$(h,D,J),$(d,D,J),$(te,D,.5),h.copy(d);$(d,D,J),$(M,D,J),$(te,D,.5)}function ae(){$(_,V,1),$(m,V,0),$(y,U,0),$(_,V,1),$(y,U,1),$(v,U,0)}function re(te,H,M){H?te?($(_,V,1),$(m,V,0),$(y,U,0),$(_,V,1),$(y,U,0),$(x,U,1),$(y,M,0),$(k,M,0),$(x,M,.5)):($(_,V,1),$(m,V,0),$(v,U,1),$(m,V,0),$(x,U,0),$(v,U,1),$(v,M,1),$(E,M,0),$(x,M,.5)):te?($(y,M,0),$(k,M,0),$(O,M,.5)):($(v,M,1),$(E,M,0),$(O,M,.5))}function ie(te,H){H&&(te?($(_,V,1),$(m,V,0),$(y,U,0),$(_,V,1),$(y,U,0),$(x,U,1),$(y,V,0),$(O,U,.5),$(x,U,1),$(O,U,.5),$(k,V,0),$(x,U,1)):($(_,V,1),$(m,V,0),$(v,U,1),$(m,V,0),$(x,U,0),$(v,U,1),$(v,V,1),$(x,U,0),$(O,U,.5),$(O,U,.5),$(x,U,0),$(E,V,1)))}function ne(te,H,M,D,J,se){switch(t.strokeLineCap){case"round":J?q(te,M,H,se,.5):q(te,H,M,se,.5);break;case"square":if(J)l.subVectors(H,te),u.set(l.y,-l.x),h.addVectors(l,u).add(te),d.subVectors(u,l).add(te),D?(h.toArray(i,1*3),d.toArray(i,0*3),d.toArray(i,3*3)):(h.toArray(i,1*3),h.toArray(i,3*3),d.toArray(i,0*3));else{l.subVectors(M,te),u.set(l.y,-l.x),h.addVectors(l,u).add(te),d.subVectors(u,l).add(te);const le=i.length;D?(h.toArray(i,le-1*3),d.toArray(i,le-2*3),d.toArray(i,le-4*3)):(h.toArray(i,le-2*3),d.toArray(i,le-1*3),d.toArray(i,le-4*3))}break}}function ge(te){let H=!1;for(let D=1,J=te.length-1;D<J;D++)if(te[D].distanceTo(te[D+1])<r){H=!0;break}if(!H)return te;const M=[];M.push(te[0]);for(let D=1,J=te.length-1;D<J;D++)te[D].distanceTo(te[D+1])>=r&&M.push(te[D]);return M.push(te[te.length-1]),M}}}function T1(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!Object.is(n[t[s]],e[t[s]]))return!1;return!0}const E1=b.createContext([]);function C1({box:n,multiple:e,children:t,onChange:s,border:r="1px solid #55aaff",backgroundColor:i="rgba(75, 160, 255, 0.1)",filter:o=c=>c,...a}){const{setEvents:c,camera:l,raycaster:u,gl:h,controls:d,size:f,get:g}=Ye(),[p,m]=b.useState(!1),[_,T]=b.useReducer((k,{object:E,shift:x})=>E===void 0?[]:Array.isArray(E)?E:x?k.includes(E)?k.filter(C=>C!==E):[E,...k]:k[0]===E?[]:[E],[]);b.useEffect(()=>void(s==null?void 0:s(_)),[_]);const w=b.useCallback(k=>{k.stopPropagation(),T({object:o([k.object])[0],shift:e&&k.shiftKey})},[]),y=b.useCallback(k=>!p&&T({}),[p]),v=b.useRef(null);return b.useEffect(()=>{if(!n||!e)return;const k=new k1(l,v.current),E=document.createElement("div");E.style.pointerEvents="none",E.style.border=r,E.style.backgroundColor=i,E.style.position="fixed";const x=new Te,C=new Te,S=new Te,R=g().events.enabled,O=d==null?void 0:d.enabled;let L=!1;function z(F,j){const{offsetX:A,offsetY:I}=F,{width:Y,height:$}=f;j.set(A/Y*2-1,-(I/$)*2+1)}function W(F){var j;d&&(d.enabled=!1),c({enabled:!1}),L=!0,(j=h.domElement.parentElement)==null||j.appendChild(E),E.style.left=`${F.clientX}px`,E.style.top=`${F.clientY}px`,E.style.width="0px",E.style.height="0px",x.x=F.clientX,x.y=F.clientY}function B(F){S.x=Math.max(x.x,F.clientX),S.y=Math.max(x.y,F.clientY),C.x=Math.min(x.x,F.clientX),C.y=Math.min(x.y,F.clientY),E.style.left=`${C.x}px`,E.style.top=`${C.y}px`,E.style.width=`${S.x-C.x}px`,E.style.height=`${S.y-C.y}px`}function V(){if(L){var F;d&&(d.enabled=O),c({enabled:R}),L=!1,(F=E.parentElement)==null||F.removeChild(E)}}function U(F){F.shiftKey&&(W(F),z(F,k.startPoint))}let X=[];function K(F){if(L){B(F),z(F,k.endPoint);const j=k.select().sort(A=>A.uuid).filter(A=>A.isMesh);T1(j,X)||(X=j,T({object:o(j)}))}}function Q(F){L&&V()}return document.addEventListener("pointerdown",U,{passive:!0}),document.addEventListener("pointermove",K,{passive:!0,capture:!0}),document.addEventListener("pointerup",Q,{passive:!0}),()=>{document.removeEventListener("pointerdown",U),document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",Q)}},[f.width,f.height,u,l,d,h]),b.createElement("group",Se({ref:v,onClick:w,onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),onPointerMissed:y},a),b.createElement(E1.Provider,{value:_},t))}const Au=b.forwardRef(function({follow:e=!0,lockX:t=!1,lockY:s=!1,lockZ:r=!1,...i},o){const a=b.useRef();return qt(({camera:c})=>{if(!e||!a.current)return;const l=a.current.rotation.clone();c.getWorldQuaternion(a.current.quaternion),t&&(a.current.rotation.x=l.x),s&&(a.current.rotation.y=l.y),r&&(a.current.rotation.z=l.z)}),b.createElement("group",Se({ref:lc([a,o])},i))}),nd=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function Bs(n,e){const t=Ye(r=>r.gl),s=uc(dc,nd(n)?Object.values(n):n);if(b.useLayoutEffect(()=>{e==null||e(s)},[e]),b.useEffect(()=>{(Array.isArray(s)?s:[s]).forEach(t.initTexture)},[t,s]),nd(n)){const r=Object.keys(n),i={};return r.forEach(o=>Object.assign(i,{[o]:s[r.indexOf(o)]})),i}else return s}Bs.preload=n=>uc.preload(dc,n);Bs.clear=n=>uc.clear(dc,n);const S1=b.forwardRef(function({src:e,skipFill:t,skipStrokes:s,fillMaterial:r,strokeMaterial:i,fillMeshProps:o,strokeMeshProps:a,...c},l){const u=uc(Pi,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),h=b.useMemo(()=>s?[]:u.paths.map(d=>{var f;return((f=d.userData)==null?void 0:f.style.stroke)===void 0||d.userData.style.stroke==="none"?null:d.subPaths.map(g=>Pi.pointsToStroke(g.getPoints(),d.userData.style))}),[u,s]);return b.useEffect(()=>()=>h.forEach(d=>d&&d.map(f=>f.dispose())),[h]),b.createElement("object3D",Se({ref:l},c),b.createElement("object3D",{scale:[1,-1,1]},u.paths.map((d,f)=>{var g,p;return b.createElement(b.Fragment,{key:f},!t&&((g=d.userData)==null?void 0:g.style.fill)!==void 0&&d.userData.style.fill!=="none"&&Pi.createShapes(d).map((m,_)=>b.createElement("mesh",Se({key:_},o),b.createElement("shapeGeometry",{args:[m]}),b.createElement("meshBasicMaterial",Se({color:d.userData.style.fill,opacity:d.userData.style.fillOpacity,transparent:!0,side:ya,depthWrite:!1},r)))),!s&&((p=d.userData)==null?void 0:p.style.stroke)!==void 0&&d.userData.style.stroke!=="none"&&d.subPaths.map((m,_)=>b.createElement("mesh",Se({key:_,geometry:h[f][_]},a),b.createElement("meshBasicMaterial",Se({color:d.userData.style.stroke,opacity:d.userData.style.strokeOpacity,transparent:!0,side:ya,depthWrite:!1},i)))))})))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const pe={LEFT:1,RIGHT:2,MIDDLE:4},G=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),mr={NONE:0,IN:1,OUT:-1};function Ns(n){return n.isPerspectiveCamera}function cs(n){return n.isOrthographicCamera}const gr=Math.PI*2,sd=Math.PI/2,Fp=1e-5,_i=Math.PI/180;function on(n,e,t){return Math.max(e,Math.min(t,n))}function Le(n,e=Fp){return Math.abs(n)<e}function Ce(n,e,t=Fp){return Le(n-e,t)}function rd(n,e){return Math.round(n/e)*e}function yi(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function vi(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function Wo(n,e,t,s,r=1/0,i){s=Math.max(1e-4,s);const o=2/s,a=o*i,c=1/(1+a+.48*a*a+.235*a*a*a);let l=n-e;const u=e,h=r*s;l=on(l,-h,h),e=n-l;const d=(t.value+o*l)*i;t.value=(t.value-o*d)*c;let f=e+(l+d)*c;return u-n>0==f>u&&(f=u,t.value=(f-u)/i),f}function id(n,e,t,s,r=1/0,i,o){s=Math.max(1e-4,s);const a=2/s,c=a*i,l=1/(1+c+.48*c*c+.235*c*c*c);let u=e.x,h=e.y,d=e.z,f=n.x-u,g=n.y-h,p=n.z-d;const m=u,_=h,T=d,w=r*s,y=w*w,v=f*f+g*g+p*p;if(v>y){const W=Math.sqrt(v);f=f/W*w,g=g/W*w,p=p/W*w}u=n.x-f,h=n.y-g,d=n.z-p;const k=(t.x+a*f)*i,E=(t.y+a*g)*i,x=(t.z+a*p)*i;t.x=(t.x-a*k)*l,t.y=(t.y-a*E)*l,t.z=(t.z-a*x)*l,o.x=u+(f+k)*l,o.y=h+(g+E)*l,o.z=d+(p+x)*l;const C=m-n.x,S=_-n.y,R=T-n.z,O=o.x-m,L=o.y-_,z=o.z-T;return C*O+S*L+R*z>0&&(o.x=m,o.y=_,o.z=T,t.x=(o.x-m)/i,t.y=(o.y-_)/i,t.z=(o.z-T)/i),o}function Hc(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Yc(n,e){return cs(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class O1{constructor(){this._listeners={}}addEventListener(e,t){const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t){const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){e.target=this;const r=s.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}const A1="2.7.3",qo=1/8,Lp=typeof window<"u",R1=Lp&&/Mac/.test(navigator.platform),D1=!(Lp&&"PointerEvent"in window);let he,od,Ho,Gc,Ct,ve,ke,_r,bi,bn,xn,Is,ad,cd,Ht,xi,yr,ld,Xc,ud,Zc,Kc,Yo,Qc=class kl extends O1{static install(e){he=e.THREE,od=Object.freeze(new he.Vector3(0,0,0)),Ho=Object.freeze(new he.Vector3(0,1,0)),Gc=Object.freeze(new he.Vector3(0,0,1)),Ct=new he.Vector2,ve=new he.Vector3,ke=new he.Vector3,_r=new he.Vector3,bi=new he.Vector3,bn=new he.Vector3,xn=new he.Vector3,Is=new he.Vector3,ad=new he.Vector3,cd=new he.Vector3,Ht=new he.Spherical,xi=new he.Spherical,yr=new he.Box3,ld=new he.Box3,Xc=new he.Sphere,ud=new he.Quaternion,Zc=new he.Quaternion,Kc=new he.Matrix4,Yo=new he.Raycaster}static get ACTION(){return G}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=G.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=mr.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new he.Vector3,this._focalOffsetVelocity=new he.Vector3,this._zoomVelocity={value:0},this._truckInternal=(y,v,k)=>{let E,x;if(Ns(this._camera)){const C=ve.copy(this._camera.position).sub(this._target),S=this._camera.getEffectiveFOV()*_i,R=C.length()*Math.tan(S*.5);E=this.truckSpeed*y*R/this._elementRect.height,x=this.truckSpeed*v*R/this._elementRect.height}else if(cs(this._camera)){const C=this._camera;E=y*(C.right-C.left)/C.zoom/this._elementRect.width,x=v*(C.top-C.bottom)/C.zoom/this._elementRect.height}else return;this.verticalDragToForward?(k?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(E,0,!0),this.forward(-x,!0)):k?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y+x,this._focalOffsetEnd.z,!0):this.truck(E,x,!0)},this._rotateInternal=(y,v)=>{const k=gr*this.azimuthRotateSpeed*y/this._elementRect.height,E=gr*this.polarRotateSpeed*v/this._elementRect.height;this.rotate(k,E,!0)},this._dollyInternal=(y,v,k)=>{const E=Math.pow(.95,-y*this.dollySpeed),x=this._sphericalEnd.radius,C=this._sphericalEnd.radius*E,S=on(C,this.minDistance,this.maxDistance),R=S-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(R,!0),this._dollyToNoClamp(S,!0)):this._dollyToNoClamp(S,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:S)-x,this._dollyControlCoord.set(v,k)),this._lastDollyDirection=Math.sign(-y)},this._zoomInternal=(y,v,k)=>{const E=Math.pow(.95,y*this.dollySpeed),x=this._zoom,C=this._zoom*E;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-x,this._dollyControlCoord.set(v,k))},typeof he>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new he.Quaternion().setFromUnitVectors(this._camera.up,Ho),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=G.NONE,this._target=new he.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new he.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new he.Spherical().setFromVector3(ve.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new he.Vector3,new he.Vector3,new he.Vector3,new he.Vector3],this._updateNearPlaneCorners(),this._boundary=new he.Box3(new he.Vector3(-1/0,-1/0,-1/0),new he.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new he.Vector2,this.mouseButtons={left:G.ROTATE,middle:G.DOLLY,right:G.TRUCK,wheel:Ns(this._camera)?G.DOLLY:cs(this._camera)?G.ZOOM:G.NONE},this.touches={one:G.TOUCH_ROTATE,two:Ns(this._camera)?G.TOUCH_DOLLY_TRUCK:cs(this._camera)?G.TOUCH_ZOOM_TRUCK:G.NONE,three:G.TOUCH_TRUCK};const s=new he.Vector2,r=new he.Vector2,i=new he.Vector2,o=y=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),x=y.clientX/E.width,C=y.clientY/E.height;if(x<this._interactiveArea.left||x>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const v=y.pointerType!=="mouse"?null:(y.buttons&pe.LEFT)===pe.LEFT?pe.LEFT:(y.buttons&pe.MIDDLE)===pe.MIDDLE?pe.MIDDLE:(y.buttons&pe.RIGHT)===pe.RIGHT?pe.RIGHT:null;if(v!==null){const E=this._findPointerByMouseButton(v);E&&this._disposePointer(E)}if((y.buttons&pe.LEFT)===pe.LEFT&&this._lockedPointer)return;const k={pointerId:y.pointerId,clientX:y.clientX,clientY:y.clientY,deltaX:0,deltaY:0,mouseButton:v};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,p(y)},a=y=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),x=y.clientX/E.width,C=y.clientY/E.height;if(x<this._interactiveArea.left||x>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const v=(y.buttons&pe.LEFT)===pe.LEFT?pe.LEFT:(y.buttons&pe.MIDDLE)===pe.MIDDLE?pe.MIDDLE:(y.buttons&pe.RIGHT)===pe.RIGHT?pe.RIGHT:null;if(v!==null){const E=this._findPointerByMouseButton(v);E&&this._disposePointer(E)}const k={pointerId:1,clientX:y.clientX,clientY:y.clientY,deltaX:0,deltaY:0,mouseButton:(y.buttons&pe.LEFT)===pe.LEFT?pe.LEFT:(y.buttons&pe.MIDDLE)===pe.LEFT?pe.MIDDLE:(y.buttons&pe.RIGHT)===pe.LEFT?pe.RIGHT:null};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",l),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,p(y)},c=y=>{y.cancelable&&y.preventDefault();const v=y.pointerId,k=this._lockedPointer||this._findPointerById(v);if(k){if(k.clientX=y.clientX,k.clientY=y.clientY,k.deltaX=y.movementX,k.deltaY=y.movementY,this._state=0,y.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(y.buttons&pe.LEFT)===pe.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(y.buttons&pe.MIDDLE)===pe.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(y.buttons&pe.RIGHT)===pe.RIGHT&&(this._state=this._state|this.mouseButtons.right);m()}},l=y=>{const v=this._lockedPointer||this._findPointerById(1);v&&(v.clientX=y.clientX,v.clientY=y.clientY,v.deltaX=y.movementX,v.deltaY=y.movementY,this._state=0,(this._lockedPointer||(y.buttons&pe.LEFT)===pe.LEFT)&&(this._state=this._state|this.mouseButtons.left),(y.buttons&pe.MIDDLE)===pe.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(y.buttons&pe.RIGHT)===pe.RIGHT&&(this._state=this._state|this.mouseButtons.right),m())},u=y=>{const v=this._findPointerById(y.pointerId);if(!(v&&v===this._lockedPointer)){if(v&&this._disposePointer(v),y.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=G.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=G.NONE;_()}},h=()=>{const y=this._findPointerById(1);y&&y===this._lockedPointer||(y&&this._disposePointer(y),this._state=G.NONE,_())};let d=-1;const f=y=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===G.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),S=y.clientX/C.width,R=y.clientY/C.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}if(y.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===G.ROTATE||this.mouseButtons.wheel===G.TRUCK){const C=performance.now();d-C<1e3&&this._getClientRect(this._elementRect),d=C}const v=R1?-1:-3,k=y.deltaMode===1?y.deltaY/v:y.deltaY/(v*10),E=this.dollyToCursor?(y.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,x=this.dollyToCursor?(y.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case G.ROTATE:{this._rotateInternal(y.deltaX,y.deltaY),this._isUserControllingRotate=!0;break}case G.TRUCK:{this._truckInternal(y.deltaX,y.deltaY,!1),this._isUserControllingTruck=!0;break}case G.OFFSET:{this._truckInternal(y.deltaX,y.deltaY,!0),this._isUserControllingOffset=!0;break}case G.DOLLY:{this._dollyInternal(-k,E,x),this._isUserControllingDolly=!0;break}case G.ZOOM:{this._zoomInternal(-k,E,x),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=y=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===kl.ACTION.NONE){const v=y instanceof PointerEvent?y.pointerId:(y instanceof MouseEvent,0),k=this._findPointerById(v);k&&this._disposePointer(k),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}y.preventDefault()}},p=y=>{if(!this._enabled)return;if(Hc(this._activePointers,Ct),this._getClientRect(this._elementRect),s.copy(Ct),r.copy(Ct),this._activePointers.length>=2){const k=Ct.x-this._activePointers[1].clientX,E=Ct.y-this._activePointers[1].clientY,x=Math.sqrt(k*k+E*E);i.set(0,x);const C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,S=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(C,S)}if(this._state=0,!y)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in y&&y.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(y.buttons&pe.LEFT)===pe.LEFT&&(this._state=this._state|this.mouseButtons.left),(y.buttons&pe.MIDDLE)===pe.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(y.buttons&pe.RIGHT)===pe.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&G.ROTATE)===G.ROTATE||(this._state&G.TOUCH_ROTATE)===G.TOUCH_ROTATE||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&G.TRUCK)===G.TRUCK||(this._state&G.TOUCH_TRUCK)===G.TOUCH_TRUCK||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&G.DOLLY)===G.DOLLY||(this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&G.ZOOM)===G.ZOOM||(this._state&G.TOUCH_ZOOM)===G.TOUCH_ZOOM||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&G.OFFSET)===G.OFFSET||(this._state&G.TOUCH_OFFSET)===G.TOUCH_OFFSET||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},m=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Hc(this._activePointers,Ct);const v=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,k=v?-v.deltaX:r.x-Ct.x,E=v?-v.deltaY:r.y-Ct.y;if(r.copy(Ct),((this._state&G.ROTATE)===G.ROTATE||(this._state&G.TOUCH_ROTATE)===G.TOUCH_ROTATE||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(k,E),this._isUserControllingRotate=!0),(this._state&G.DOLLY)===G.DOLLY||(this._state&G.ZOOM)===G.ZOOM){const x=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0,S=this.dollyDragInverted?-1:1;(this._state&G.DOLLY)===G.DOLLY?(this._dollyInternal(S*E*qo,x,C),this._isUserControllingDolly=!0):(this._zoomInternal(S*E*qo,x,C),this._isUserControllingZoom=!0)}if((this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_ZOOM)===G.TOUCH_ZOOM||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE){const x=Ct.x-this._activePointers[1].clientX,C=Ct.y-this._activePointers[1].clientY,S=Math.sqrt(x*x+C*C),R=i.y-S;i.set(0,S);const O=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,L=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET?(this._dollyInternal(R*qo,O,L),this._isUserControllingDolly=!0):(this._zoomInternal(R*qo,O,L),this._isUserControllingZoom=!0)}((this._state&G.TRUCK)===G.TRUCK||(this._state&G.TOUCH_TRUCK)===G.TOUCH_TRUCK||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(k,E,!1),this._isUserControllingTruck=!0),((this._state&G.OFFSET)===G.OFFSET||(this._state&G.TOUCH_OFFSET)===G.TOUCH_OFFSET||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(k,E,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{Hc(this._activePointers,Ct),r.copy(Ct),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",T),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),p())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))};const T=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=y=>{this._domElement=y,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),D1&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",T),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==G.NONE&&(this._state=G.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=on(e.width,0,1),this._interactiveArea.height=on(e.height,0,1),this._interactiveArea.x=on(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=on(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,s=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,s)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,s=!1){this._isUserControllingRotate=!1;const r=on(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=on(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,s||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!s||Ce(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ce(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=mr.NONE,this._changedDolly=0,this._dollyToNoClamp(on(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const s=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Ce(o,this._spherical.radius);if(!(s>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const i=!t||Ce(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(bi).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const s=!t||Ce(this._target.x,this._targetEnd.x,this.restThreshold)&&Ce(this._target.y,this._targetEnd.y,this.restThreshold)&&Ce(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=on(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const s=!t||Ce(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(s)}pan(e,t,s=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,s)}truck(e,t,s=!1){this._camera.updateMatrix(),bn.setFromMatrixColumn(this._camera.matrix,0),xn.setFromMatrixColumn(this._camera.matrix,1),bn.multiplyScalar(e),xn.multiplyScalar(-t);const r=ve.copy(bn).add(xn),i=ke.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,s)}forward(e,t=!1){ve.setFromMatrixColumn(this._camera.matrix,0),ve.crossVectors(this._camera.up,ve),ve.multiplyScalar(e);const s=ke.copy(this._targetEnd).add(ve);return this.moveTo(s.x,s.y,s.z,t)}elevate(e,t=!1){return ve.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+ve.x,this._targetEnd.y+ve.y,this._targetEnd.z+ve.z,t)}moveTo(e,t,s,r=!1){this._isUserControllingTruck=!1;const i=ve.set(e,t,s).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||Ce(this._target.x,this._targetEnd.x,this.restThreshold)&&Ce(this._target.y,this._targetEnd.y,this.restThreshold)&&Ce(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,s,r=!1){const a=ve.set(e,t,s).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:s=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}={}){const c=[],l=e.isBox3?yr.copy(e):yr.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=rd(this._sphericalEnd.theta,sd),h=rd(this._sphericalEnd.phi,sd);c.push(this.rotateTo(u,h,t));const d=ve.setFromSpherical(this._sphericalEnd).normalize(),f=ud.setFromUnitVectors(d,Gc),g=Ce(Math.abs(d.y),1);g&&f.multiply(Zc.setFromAxisAngle(Ho,u)),f.multiply(this._yAxisUpSpaceInverse);const p=ld.makeEmpty();ke.copy(l.min).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.min).setX(l.max.x).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.min).setY(l.max.y).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.max).setZ(l.min.z).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.min).setZ(l.max.z).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.max).setY(l.min.y).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.max).setX(l.min.x).applyQuaternion(f),p.expandByPoint(ke),ke.copy(l.max).applyQuaternion(f),p.expandByPoint(ke),p.min.x-=r,p.min.y-=o,p.max.x+=i,p.max.y+=a,f.setFromUnitVectors(Gc,d),g&&f.premultiply(Zc.invert()),f.premultiply(this._yAxisUpSpace);const m=p.getSize(ve),_=p.getCenter(ke).applyQuaternion(f);if(Ns(this._camera)){const T=this.getDistanceToFitBox(m.x,m.y,m.z,s);c.push(this.moveTo(_.x,_.y,_.z,t)),c.push(this.dollyTo(T,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(cs(this._camera)){const T=this._camera,w=T.right-T.left,y=T.top-T.bottom,v=s?Math.max(w/m.x,y/m.y):Math.min(w/m.x,y/m.y);c.push(this.moveTo(_.x,_.y,_.z,t)),c.push(this.zoomTo(v,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const s=[],i=e instanceof he.Sphere?Xc.copy(e):kl.createBoundingSphere(e,Xc);if(s.push(this.moveTo(i.center.x,i.center.y,i.center.z,t)),Ns(this._camera)){const o=this.getDistanceToFitSphere(i.radius);s.push(this.dollyTo(o,t))}else if(cs(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,c=2*i.radius,l=Math.min(o/c,a/c);s.push(this.zoomTo(l,t))}return s.push(this.setFocalOffset(0,0,0,t)),Promise.all(s)}setLookAt(e,t,s,r,i,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=mr.NONE,this._changedDolly=0;const c=ke.set(r,i,o),l=ve.set(e,t,s);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(l.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Ce(this._target.x,this._targetEnd.x,this.restThreshold)&&Ce(this._target.y,this._targetEnd.y,this.restThreshold)&&Ce(this._target.z,this._targetEnd.z,this.restThreshold)&&Ce(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ce(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ce(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,s,r,i,o,a,c,l,u,h,d,f,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=mr.NONE,this._changedDolly=0;const p=ve.set(r,i,o),m=ke.set(e,t,s);Ht.setFromVector3(m.sub(p).applyQuaternion(this._yAxisUpSpace));const _=_r.set(u,h,d),T=ke.set(a,c,l);xi.setFromVector3(T.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(_,f));const w=xi.theta-Ht.theta,y=xi.phi-Ht.phi,v=xi.radius-Ht.radius;this._sphericalEnd.set(Ht.radius+v*f,Ht.phi+y*f,Ht.theta+w*f),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const k=!g||Ce(this._target.x,this._targetEnd.x,this.restThreshold)&&Ce(this._target.y,this._targetEnd.y,this.restThreshold)&&Ce(this._target.z,this._targetEnd.z,this.restThreshold)&&Ce(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ce(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ce(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(k)}setPosition(e,t,s,r=!1){return this.setLookAt(e,t,s,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,s,r=!1){const i=this.getPosition(ve),o=this.setLookAt(i.x,i.y,i.z,e,t,s,r);return this._sphericalEnd.phi=on(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,s,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,s),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||Ce(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ce(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ce(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,s){this._camera.updateMatrixWorld(),bn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),xn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Is.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=ve.set(e,t,s),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);bn.multiplyScalar(o.x),xn.multiplyScalar(o.y),Is.multiplyScalar(o.z),ve.copy(bn).add(xn).add(Is),ve.z=ve.z+i,this.dollyTo(i,!1),this.setFocalOffset(-ve.x,ve.y,-ve.z,!1),this.moveTo(e,t,s,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,s,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new he.Vector4,typeof e=="number"?this._viewport.set(e,t,s,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,s,r=!1){if(Yc(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*_i,a=this._camera.aspect;return((r?i>a:i<a)?t:e/a)*.5/Math.tan(o*.5)+s*.5}getDistanceToFitSphere(e){if(Yc(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*_i,s=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:s;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new he.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new he.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof he.Spherical?e:new he.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new he.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%gr,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=gr),this._spherical.theta+=gr*Math.round((this._sphericalEnd.theta-this._spherical.theta)/gr)}reset(e=!1){if(!Ce(this._camera.up.x,this._cameraUp0.x)||!Ce(this._camera.up.y,this._cameraUp0.y)||!Ce(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const s=this.getPosition(ve);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ho),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=ve.subVectors(this._target,this._camera.position).normalize(),t=ke.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const s=this.getPosition(ve);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=ad.subVectors(this._targetEnd,this._target),o=cd.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Le(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Wo(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Le(s))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Wo(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Le(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Wo(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Le(i.x)&&Le(i.y)&&Le(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;id(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Le(o.x)&&Le(o.y)&&Le(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;id(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Le(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Wo(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(Ns(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,d=this._camera,f=this._getCameraDirection(bi),g=ve.copy(f).cross(d.up).normalize();g.lengthSq()===0&&(g.x=1);const p=ke.crossVectors(g,f),m=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*_i*.5),T=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,w=_r.copy(this._targetEnd).add(g.multiplyScalar(this._dollyControlCoord.x*m*d.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*m)),y=ve.copy(this._targetEnd).lerp(w,T),v=this._lastDollyDirection===mr.IN&&this._spherical.radius<=this.minDistance,k=this._lastDollyDirection===mr.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(v||k)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const x=ke.copy(f).multiplyScalar(-h);y.add(x)}this._boundary.clampPoint(y,y);const E=ke.subVectors(y,this._targetEnd);this._targetEnd.copy(y),this._target.add(E),this._changedDolly-=h,Le(this._changedDolly)&&(this._changedDolly=0)}else if(cs(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,d=this._camera,f=ve.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),g=ke.set(0,0,-1).applyQuaternion(d.quaternion),p=_r.copy(f).add(g.multiplyScalar(-f.dot(d.up))),_=-(this._zoom-h-this._zoom)/this._zoom,T=this._getCameraDirection(bi),w=this._targetEnd.dot(T),y=ve.copy(this._targetEnd).lerp(p,_),v=y.dot(T),k=T.multiplyScalar(v-w);y.sub(k),this._boundary.clampPoint(y,y);const E=ke.subVectors(y,this._targetEnd);this._targetEnd.copy(y),this._target.add(E),this._changedZoom-=h,Le(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Le(this._focalOffset.x)||!Le(this._focalOffset.y)||!Le(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),bn.setFromMatrixColumn(this._camera.matrix,0),xn.setFromMatrixColumn(this._camera.matrix,1),Is.setFromMatrixColumn(this._camera.matrix,2),bn.multiplyScalar(this._focalOffset.x),xn.multiplyScalar(-this._focalOffset.y),Is.multiplyScalar(this._focalOffset.z),ve.copy(bn).add(xn).add(Is),this._camera.position.add(ve)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ve.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Le(t,this.restThreshold)&&Le(s,this.restThreshold)&&Le(r,this.restThreshold)&&Le(i.x,this.restThreshold)&&Le(i.y,this.restThreshold)&&Le(i.z,this.restThreshold)&&Le(o.x,this.restThreshold)&&Le(o.y,this.restThreshold)&&Le(o.z,this.restThreshold)&&Le(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:yi(this.maxDistance),minZoom:this.minZoom,maxZoom:yi(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:yi(this.maxPolarAngle),minAzimuthAngle:yi(this.minAzimuthAngle),maxAzimuthAngle:yi(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ve.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const s=JSON.parse(e);this.enabled=s.enabled,this.minDistance=s.minDistance,this.maxDistance=vi(s.maxDistance),this.minZoom=s.minZoom,this.maxZoom=vi(s.maxZoom),this.minPolarAngle=s.minPolarAngle,this.maxPolarAngle=vi(s.maxPolarAngle),this.minAzimuthAngle=vi(s.minAzimuthAngle),this.maxAzimuthAngle=vi(s.maxAzimuthAngle),this.smoothTime=s.smoothTime,this.draggingSmoothTime=s.draggingSmoothTime,this.dollySpeed=s.dollySpeed,this.truckSpeed=s.truckSpeed,this.dollyToCursor=s.dollyToCursor,this.verticalDragToForward=s.verticalDragToForward,this._target0.fromArray(s.target0),this._position0.fromArray(s.position0),this._zoom0=s.zoom0,this._focalOffset0.fromArray(s.focalOffset0),this.moveTo(s.target[0],s.target[1],s.target[2],t),Ht.setFromVector3(ve.fromArray(s.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ht.theta,Ht.phi,t),this.dollyTo(Ht.radius,t),this.zoomTo(s.zoom,t),this.setFocalOffset(s.focalOffset[0],s.focalOffset[1],s.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",A1),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,s){const r=t.lengthSq();if(r===0)return e;const i=ke.copy(t).add(e),a=this._boundary.clampPoint(i,_r).sub(i),c=a.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(s===0)return e.add(t).add(a);{const l=1+s*c/t.dot(a);return e.add(ke.copy(t).multiplyScalar(l)).add(a.multiplyScalar(1-s))}}_updateNearPlaneCorners(){if(Ns(this._camera)){const e=this._camera,t=e.near,s=e.getEffectiveFOV()*_i,r=Math.tan(s*.5)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(cs(this._camera)){const e=this._camera,t=1/e.zoom,s=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(s,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(s,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||Yc(this._camera,"_collisionTest"))return e;const s=this._getTargetDirection(bi);Kc.lookAt(od,s,this._camera.up);for(let r=0;r<4;r++){const i=ke.copy(this._nearPlaneCorners[r]);i.applyMatrix4(Kc);const o=_r.addVectors(this._target,i);Yo.set(o,s),Yo.far=this._spherical.radius+1;const a=Yo.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const s=()=>{this.removeEventListener("rest",s),t()};this.addEventListener("rest",s)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new he.Sphere){const s=t,r=s.center;yr.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&yr.expandByObject(o)}),yr.getCenter(r);let i=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,c=a.geometry.clone();c.applyMatrix4(a.matrixWorld);const u=c.attributes.position;for(let h=0,d=u.count;h<d;h++)ve.fromBufferAttribute(u,h),i=Math.max(i,r.distanceToSquared(ve))}),s.radius=Math.sqrt(i),s}};const jp=b.forwardRef((n,e)=>{b.useMemo(()=>{Qc.install({THREE:wy}),vu({CameraControlsImpl:Qc})},[]);const{camera:t,domElement:s,makeDefault:r,onStart:i,onEnd:o,onChange:a,regress:c,...l}=n,u=Ye(v=>v.camera),h=Ye(v=>v.gl),d=Ye(v=>v.invalidate),f=Ye(v=>v.events),g=Ye(v=>v.setEvents),p=Ye(v=>v.set),m=Ye(v=>v.get),_=Ye(v=>v.performance),T=t||u,w=s||f.connected||h.domElement,y=b.useMemo(()=>new Qc(T),[T]);return qt((v,k)=>{y.enabled&&y.update(k)},-1),b.useEffect(()=>(y.connect(w),()=>void y.disconnect()),[w,y]),b.useEffect(()=>{const v=x=>{d(),c&&_.regress(),a&&a(x)},k=x=>{i&&i(x)},E=x=>{o&&o(x)};return y.addEventListener("update",v),y.addEventListener("controlstart",k),y.addEventListener("controlend",E),()=>{y.removeEventListener("update",v),y.removeEventListener("controlstart",k),y.removeEventListener("controlend",E)}},[y,i,o,d,g,c,a]),b.useEffect(()=>{if(r){const v=m().controls;return p({controls:y}),()=>p({controls:v})}},[r,y]),b.createElement("primitive",Se({ref:e,object:y},l))});Ee.func.isRequired,Ee.arrayOf(Ee.oneOfType([Ee.element,Ee.func])).isRequired;const hd=new wo,dd=new wo,Go=[],wi=new Ep;class P1 extends ky{constructor(){super(),this.color=new va("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const s=this.instance.current;if(!s||!s.geometry||!s.material)return;wi.geometry=s.geometry;const r=s.matrixWorld,i=s.userData.instances.indexOf(this.instanceKey);if(!(i===-1||i>s.count)){s.getMatrixAt(i,hd),dd.multiplyMatrices(r,hd),wi.matrixWorld=dd,s.material instanceof Ty?wi.material.side=s.material.side:wi.material.side=s.material[0].side,wi.raycast(e,Go);for(let o=0,a=Go.length;o<a;o++){const c=Go[o];c.instanceId=i,c.object=this,t.push(c)}Go.length=0}}}const zp=b.createContext(null),fd=new wo,pd=new wo,M1=new wo,md=new _e,gd=new Ey,_d=new _e,Vp=b.forwardRef(({context:n,children:e,...t},s)=>{b.useMemo(()=>vu({PositionMesh:P1}),[]);const r=b.useRef(),{subscribe:i,getParent:o}=b.useContext(n||zp);return b.useLayoutEffect(()=>i(r),[]),b.createElement("positionMesh",Se({instance:o(),instanceKey:r,ref:lc([s,r])},t),e)}),N1=b.forwardRef(({children:n,range:e,limit:t=1e3,frames:s=1/0,...r},i)=>{const[{context:o,instance:a}]=b.useState(()=>{const m=b.createContext(null);return{context:m,instance:b.forwardRef((_,T)=>b.createElement(Vp,Se({context:m},_,{ref:T})))}}),c=b.useRef(null),[l,u]=b.useState([]),[[h,d]]=b.useState(()=>{const m=new Float32Array(t*16);for(let _=0;_<t;_++)M1.identity().toArray(m,_*16);return[m,new Float32Array([...new Array(t*3)].map(()=>1))]});b.useEffect(()=>{c.current.instanceMatrix.needsUpdate=!0});let f=0,g=0;qt(()=>{if(s===1/0||f<s){c.current.updateMatrix(),c.current.updateMatrixWorld(),fd.copy(c.current.matrixWorld).invert(),g=Math.min(t,e!==void 0?e:t,l.length),c.current.count=g,c.current.instanceMatrix.updateRange.count=g*16,c.current.instanceColor.updateRange.count=g*3;for(let m=0;m<l.length;m++){const _=l[m].current;_.matrixWorld.decompose(md,gd,_d),pd.compose(md,gd,_d).premultiply(fd),pd.toArray(h,m*16),c.current.instanceMatrix.needsUpdate=!0,_.color.toArray(d,m*3),c.current.instanceColor.needsUpdate=!0}f++}});const p=b.useMemo(()=>({getParent:()=>c,subscribe:m=>(u(_=>[..._,m]),()=>u(_=>_.filter(T=>T.current!==m.current)))}),[]);return b.createElement("instancedMesh",Se({userData:{instances:l},matrixAutoUpdate:!1,ref:lc([i,c]),args:[null,null,0],raycast:()=>null},r),b.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:Wh}),b.createElement("instancedBufferAttribute",{attach:"instanceColor",count:d.length/3,array:d,itemSize:3,usage:Wh}),typeof n=="function"?b.createElement(o.Provider,{value:p},n(a)):b.createElement(zp.Provider,{value:p},n))}),Up=b.createContext(null),I1=b.forwardRef((n,e)=>{b.useMemo(()=>vu({SegmentObject:$1}),[]);const{limit:t=1e3,lineWidth:s=1,children:r,...i}=n,[o,a]=b.useState([]),[c]=b.useState(()=>new bu),[l]=b.useState(()=>new K_),[u]=b.useState(()=>new Q_),[h]=b.useState(()=>new Te(512,512)),[d]=b.useState(()=>Array(t*6).fill(0)),[f]=b.useState(()=>Array(t*6).fill(0)),g=b.useMemo(()=>({subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(_=>_.current!==p.current)))}),[]);return qt(()=>{for(let m=0;m<t;m++){var p;const _=(p=o[m])==null?void 0:p.current;_&&(d[m*6+0]=_.start.x,d[m*6+1]=_.start.y,d[m*6+2]=_.start.z,d[m*6+3]=_.end.x,d[m*6+4]=_.end.y,d[m*6+5]=_.end.z,f[m*6+0]=_.color.r,f[m*6+1]=_.color.g,f[m*6+2]=_.color.b,f[m*6+3]=_.color.r,f[m*6+4]=_.color.g,f[m*6+5]=_.color.b)}u.setColors(f),u.setPositions(d),c.computeLineDistances()}),b.createElement("primitive",{object:c,ref:e},b.createElement("primitive",{object:u,attach:"geometry"}),b.createElement("primitive",Se({object:l,attach:"material",vertexColors:!0,resolution:h,linewidth:s},i)),b.createElement(Up.Provider,{value:g},r))});class $1{constructor(){this.color=new va("white"),this.start=new _e(0,0,0),this.end=new _e(0,0,0)}}const yd=n=>n instanceof _e?n:new _e(...typeof n=="number"?[n,n,n]:n),F1=b.forwardRef(({color:n,start:e,end:t},s)=>{const r=b.useContext(Up);if(!r)throw"Segment must used inside Segments component.";const i=b.useRef(null);return b.useLayoutEffect(()=>r.subscribe(i),[]),b.createElement("segmentObject",{ref:lc([i,s]),color:n,start:yd(e),end:yd(t)})});function L1({all:n,scene:e,camera:t}){const s=Ye(({gl:o})=>o),r=Ye(({camera:o})=>o),i=Ye(({scene:o})=>o);return b.useLayoutEffect(()=>{const o=[];n&&(e||i).traverse(l=>{l.visible===!1&&(o.push(l),l.visible=!0)}),s.compile(e||i,t||r);const a=new Cy(128);new Sy(.01,1e5,a).update(s,e||i),a.dispose(),o.forEach(l=>l.visible=!1)},[]),null}function vd({pixelated:n}){const e=Ye(o=>o.gl),t=Ye(o=>o.internal.active),s=Ye(o=>o.performance.current),r=Ye(o=>o.viewport.initialDpr),i=Ye(o=>o.setDpr);return b.useEffect(()=>{const o=e.domElement;return()=>{t&&i(r),n&&o&&(o.style.imageRendering="auto")}},[]),b.useEffect(()=>{i(s*r),n&&e.domElement&&(e.domElement.style.imageRendering=s===1?"auto":"pixelated")},[s]),null}function bd(){const n=Ye(s=>s.get),e=Ye(s=>s.setEvents),t=Ye(s=>s.performance.current);return b.useEffect(()=>{const s=n().events.enabled;return()=>e({enabled:s})},[]),b.useEffect(()=>e({enabled:t===1}),[t]),null}const j1=b.createContext(null);function z1({children:n,enabled:e=!0}){const[t,s]=b.useState([]),r=b.useMemo(()=>({selected:t,select:s,enabled:e}),[t,s,e]);return P.jsx(j1.Provider,{value:r,children:n})}function V1(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Bp(...n){return e=>n.forEach(t=>V1(t,e))}function ti(...n){return b.useCallback(Bp(...n),n)}const Wp=b.forwardRef((n,e)=>{const{children:t,...s}=n,r=b.Children.toArray(t),i=r.find(U1);if(i){const o=i.props.children,a=r.map(c=>c===i?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:c);return b.createElement(Tl,Se({},s,{ref:e}),b.isValidElement(o)?b.cloneElement(o,void 0,a):null)}return b.createElement(Tl,Se({},s,{ref:e}),t)});Wp.displayName="Slot";const Tl=b.forwardRef((n,e)=>{const{children:t,...s}=n;return b.isValidElement(t)?b.cloneElement(t,{...B1(s,t.props),ref:e?Bp(e,t.ref):t.ref}):b.Children.count(t)>1?b.Children.only(null):null});Tl.displayName="SlotClone";const qp=({children:n})=>b.createElement(b.Fragment,null,n);function U1(n){return b.isValidElement(n)&&n.type===qp}function B1(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{i(...a),r(...a)}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}const W1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ar=W1.reduce((n,e)=>{const t=b.forwardRef((s,r)=>{const{asChild:i,...o}=s,a=i?Wp:e;return b.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),b.createElement(a,Se({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function q1(n,e){n&&gu.flushSync(()=>n.dispatchEvent(e))}const H1=b.forwardRef((n,e)=>{var t;const{container:s=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return s?pp.createPortal(b.createElement(ar.div,Se({},r,{ref:e})),s):null}),Y1=H1;var xd=Object.prototype.hasOwnProperty;function Wi(n,e){var t,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Wi(n[s],e[s]););return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(xd.call(n,t)&&++s&&!xd.call(e,t)||!(t in e)||!Wi(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function To(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!Object.is(n[t[s]],e[t[s]]))return!1;return!0}var gc=function(e,t,s,r){this.name=e,this.fn=t,this.args=s,this.modifiers=r};gc.prototype._test=function(e){var t=this.fn;try{Dr(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Dr(this.modifiers.slice(),t,this)(e)}catch{return!1}};gc.prototype._check=function(e){try{Dr(this.modifiers.slice(),this.fn,this)(e)}catch{if(Dr(this.modifiers.slice(),function(s){return s},this)(!1))return}if(!Dr(this.modifiers.slice(),this.fn,this)(e))throw null};gc.prototype._testAsync=function(e){var t=this;return new Promise(function(s,r){Yp(t.modifiers.slice(),t.fn,t)(e).then(function(i){i?s(e):r(null)}).catch(function(i){return r(i)})})};function Hp(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Dr(n,e,t){if(n.length){var s=n.shift(),r=Dr(n,e,t);return s.perform(r,t)}else return Hp(e)}function Yp(n,e,t){if(n.length){var s=n.shift(),r=Yp(n,e,t);return s.performAsync(r,t)}else return function(i){return Promise.resolve(Hp(e,"async")(i))}}var G1=function(e,t,s){this.name=e,this.perform=t,this.performAsync=s},Ru=function(n){function e(t,s,r,i){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=s,this.cause=r,this.target=i}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),On=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};On.prototype._applyRule=function(e,t){var s=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return s.chain.push(new gc(t,e.apply(s,r),r,s.nextRuleModifiers)),s.nextRuleModifiers=[],s}};On.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new G1(t,e.simple,e.async)),this};On.prototype._clone=function(){return new On(this.chain.slice(),this.nextRuleModifiers.slice())};On.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};On.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(s){try{s._check(e)}catch(r){t.push(new Ru(s,e,r))}}),t};On.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(s){throw new Ru(t,e,s)}})};On.prototype.testAsync=function(e){var t=this;return new Promise(function(s,r){Gp(e,t.chain.slice(),s,r)})};function Gp(n,e,t,s){if(e.length){var r=e.shift();r._testAsync(n).then(function(){Gp(n,e,t,s)},function(i){s(new Ru(r,n,i))})}else t(n)}var wd=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function X1(n,e){return e===void 0&&(e=!1),{simple:function(t){return wd(t,e)||n.check(t)===void 0},async:function(t){return wd(t,e)||n.testAsync(t)}}}function Ot(){return typeof Proxy<"u"?Xp(new On):El(new On)}var qi={};Ot.extend=function(n){Object.assign(qi,n)};Ot.clearCustomRules=function(){qi={}};function Xp(n){return new Proxy(n,{get:function(t,s){if(s in t)return t[s];var r=Xp(n._clone());if(s in Ta)return r._applyModifier(Ta[s],s);if(s in qi)return r._applyRule(qi[s],s);if(s in Cl)return r._applyRule(Cl[s],s)}})}function El(n){var e=function(r,i){return Object.keys(r).forEach(function(o){i[o]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=El(i._clone()),u=l._applyRule(r[o],o).apply(void 0,a);return u}}),i},t=e(Cl,n),s=e(qi,t);return Object.keys(Ta).forEach(function(r){Object.defineProperty(s,r,{get:function(){var i=El(s._clone());return i._applyModifier(Ta[r],r)}})}),s}var Ta={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Xo(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Xo(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Xo(e).every(n)}},async:function(n){return function(e){return Promise.all(Xo(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return kd(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(s){return kd(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&s:s}).catch(function(){return!1})}}}};function kd(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Xo(n){return typeof n=="string"?n.split(""):n}var Cl={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||Z1;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return vr("string")},boolean:function(){return vr("boolean")},undefined:function(){return vr("undefined")},null:function(){return vr("null")},array:function(){return vr("array")},object:function(){return vr("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return K1(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(s){return s.test(t)})}},optional:X1};function vr(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function Z1(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function K1(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(s){var r=n[s];try{r.check((e||{})[s])}catch(i){i.target=s,t.push(i)}}),t.length>0)throw t;return!0},async:function(e){var t=[],s=Object.keys(n).map(function(r){var i=n[r];return i.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(s).then(function(){if(t.length>0)throw t;return!0})}}}function Vn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Zp(n,e=[]){let t=[];function s(i,o){const a=b.createContext(o),c=t.length;t=[...t,o];function l(h){const{scope:d,children:f,...g}=h,p=(d==null?void 0:d[n][c])||a,m=b.useMemo(()=>g,Object.values(g));return b.createElement(p.Provider,{value:m},f)}function u(h,d){const f=(d==null?void 0:d[n][c])||a,g=b.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,u]}const r=()=>{const i=t.map(o=>b.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return r.scopeName=n,[s,Q1(r,...e)]}function Q1(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:c,scopeName:l})=>{const h=c(i)[`__scope${l}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ni(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var s;return(s=e.current)===null||s===void 0?void 0:s.call(e,...t)},[])}function J1(n,e=globalThis==null?void 0:globalThis.document){const t=ni(n);b.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)},[t,e])}const Sl="dismissableLayer.update",ev="dismissableLayer.pointerDownOutside",tv="dismissableLayer.focusOutside";let Td;const nv=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sv=b.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:c,...l}=n,u=b.useContext(nv),[h,d]=b.useState(null),f=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=b.useState({}),p=ti(e,x=>d(x)),m=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),T=m.indexOf(_),w=h?m.indexOf(h):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,v=w>=T,k=rv(x=>{const C=x.target,S=[...u.branches].some(R=>R.contains(C));!v||S||(i==null||i(x),a==null||a(x),x.defaultPrevented||c==null||c())},f),E=iv(x=>{const C=x.target;[...u.branches].some(R=>R.contains(C))||(o==null||o(x),a==null||a(x),x.defaultPrevented||c==null||c())},f);return J1(x=>{w===u.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&c&&(x.preventDefault(),c()))},f),b.useEffect(()=>{if(h)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Td=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Ed(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Td)}},[h,f,s,u]),b.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Ed())},[h,u]),b.useEffect(()=>{const x=()=>g({});return document.addEventListener(Sl,x),()=>document.removeEventListener(Sl,x)},[]),b.createElement(ar.div,Se({},l,{ref:p,style:{pointerEvents:y?v?"auto":"none":void 0,...n.style},onFocusCapture:Vn(n.onFocusCapture,E.onFocusCapture),onBlurCapture:Vn(n.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Vn(n.onPointerDownCapture,k.onPointerDownCapture)}))});function rv(n,e=globalThis==null?void 0:globalThis.document){const t=ni(n),s=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){Kp(ev,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function iv(n,e=globalThis==null?void 0:globalThis.document){const t=ni(n),s=b.useRef(!1);return b.useEffect(()=>{const r=i=>{i.target&&!s.current&&Kp(tv,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ed(){const n=new CustomEvent(Sl);document.dispatchEvent(n)}function Kp(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?q1(r,i):r.dispatchEvent(i)}const jr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},ov=V_["useId".toString()]||(()=>{});let av=0;function cv(n){const[e,t]=b.useState(ov());return jr(()=>{n||t(s=>s??String(av++))},[n]),n||(e?`radix-${e}`:"")}const lv=b.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...i}=n;return b.createElement(ar.svg,Se({},i,{ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:b.createElement("polygon",{points:"0,0 30,0 15,10"}))}),uv=lv;function hv(n){const[e,t]=b.useState(void 0);return jr(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}const Qp="Popper",[Jp,e0]=Zp(Qp),[dv,t0]=Jp(Qp),fv=n=>{const{__scopePopper:e,children:t}=n,[s,r]=b.useState(null);return b.createElement(dv,{scope:e,anchor:s,onAnchorChange:r},t)},pv="PopperAnchor",mv=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,i=t0(pv,t),o=b.useRef(null),a=ti(e,o);return b.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:b.createElement(ar.div,Se({},r,{ref:a}))}),n0="PopperContent",[gv,_v]=Jp(n0),yv=b.forwardRef((n,e)=>{var t,s,r,i,o,a,c,l;const{__scopePopper:u,side:h="bottom",sideOffset:d=0,align:f="center",alignOffset:g=0,arrowPadding:p=0,avoidCollisions:m=!0,collisionBoundary:_=[],collisionPadding:T=0,sticky:w="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:k,...E}=n,x=t0(n0,u),[C,S]=b.useState(null),R=ti(e,H=>S(H)),[O,L]=b.useState(null),z=hv(O),W=(t=z==null?void 0:z.width)!==null&&t!==void 0?t:0,B=(s=z==null?void 0:z.height)!==null&&s!==void 0?s:0,V=h+(f!=="center"?"-"+f:""),U=typeof T=="number"?T:{top:0,right:0,bottom:0,left:0,...T},X=Array.isArray(_)?_:[_],K=X.length>0,Q={padding:U,boundary:X.filter(wv),altBoundary:K},{refs:F,floatingStyles:j,placement:A,isPositioned:I,middlewareData:Y}=g1({strategy:"fixed",placement:V,whileElementsMounted:(...H)=>f1(...H,{animationFrame:v==="always"}),elements:{reference:x.anchor},middleware:[Hy({mainAxis:d+B,alignmentAxis:g}),m&&Yy({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?Gy():void 0,...Q}),m&&By({...Q}),Xy({...Q,apply:({elements:H,rects:M,availableWidth:D,availableHeight:J})=>{const{width:se,height:le}=M.reference,be=H.floating.style;be.setProperty("--radix-popper-available-width",`${D}px`),be.setProperty("--radix-popper-available-height",`${J}px`),be.setProperty("--radix-popper-anchor-width",`${se}px`),be.setProperty("--radix-popper-anchor-height",`${le}px`)}}),O&&m1({element:O,padding:p}),kv({arrowWidth:W,arrowHeight:B}),y&&Wy({strategy:"referenceHidden",...Q})]}),[$,q]=s0(A),ae=ni(k);jr(()=>{I&&(ae==null||ae())},[I,ae]);const re=(r=Y.arrow)===null||r===void 0?void 0:r.x,ie=(i=Y.arrow)===null||i===void 0?void 0:i.y,ne=((o=Y.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[ge,te]=b.useState();return jr(()=>{C&&te(window.getComputedStyle(C).zIndex)},[C]),b.createElement("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:I?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(a=Y.transformOrigin)===null||a===void 0?void 0:a.x,(c=Y.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:n.dir},b.createElement(gv,{scope:u,placedSide:$,onArrowChange:L,arrowX:re,arrowY:ie,shouldHideArrow:ne},b.createElement(ar.div,Se({"data-side":$,"data-align":q},E,{ref:R,style:{...E.style,animation:I?void 0:"none",opacity:(l=Y.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}}))))}),vv="PopperArrow",bv={top:"bottom",right:"left",bottom:"top",left:"right"},xv=b.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,i=_v(vv,s),o=bv[i.placedSide];return b.createElement("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},b.createElement(uv,Se({},r,{ref:t,style:{...r.style,display:"block"}})))});function wv(n){return n!==null}const kv=n=>({name:"transformOrigin",options:n,fn(e){var t,s,r,i,o;const{placement:a,rects:c,middlewareData:l}=e,h=((t=l.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,d=h?0:n.arrowWidth,f=h?0:n.arrowHeight,[g,p]=s0(a),m={start:"0%",center:"50%",end:"100%"}[p],_=((s=(r=l.arrow)===null||r===void 0?void 0:r.x)!==null&&s!==void 0?s:0)+d/2,T=((i=(o=l.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+f/2;let w="",y="";return g==="bottom"?(w=h?m:`${_}px`,y=`${-f}px`):g==="top"?(w=h?m:`${_}px`,y=`${c.floating.height+f}px`):g==="right"?(w=`${-f}px`,y=h?m:`${T}px`):g==="left"&&(w=`${c.floating.width+f}px`,y=h?m:`${T}px`),{data:{x:w,y}}}});function s0(n){const[e,t="center"]=n.split("-");return[e,t]}const Tv=fv,Ev=mv,Cv=yv,Sv=xv;function Ov(n,e){return b.useReducer((t,s)=>{const r=e[t][s];return r??t},n)}const r0=n=>{const{present:e,children:t}=n,s=Av(e),r=typeof t=="function"?t({present:s.isPresent}):b.Children.only(t),i=ti(s.ref,r.ref);return typeof t=="function"||s.isPresent?b.cloneElement(r,{ref:i}):null};r0.displayName="Presence";function Av(n){const[e,t]=b.useState(),s=b.useRef({}),r=b.useRef(n),i=b.useRef("none"),o=n?"mounted":"unmounted",[a,c]=Ov(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const l=Zo(s.current);i.current=a==="mounted"?l:"none"},[a]),jr(()=>{const l=s.current,u=r.current;if(u!==n){const d=i.current,f=Zo(l);n?c("MOUNT"):f==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),jr(()=>{if(e){const l=h=>{const f=Zo(s.current).includes(h.animationName);h.target===e&&f&&gu.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===e&&(i.current=Zo(s.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",l),e.addEventListener("animationend",l),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",l),e.removeEventListener("animationend",l)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(l=>{l&&(s.current=getComputedStyle(l)),t(l)},[])}}function Zo(n){return(n==null?void 0:n.animationName)||"none"}function Rv({prop:n,defaultProp:e,onChange:t=()=>{}}){const[s,r]=Dv({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:s,a=ni(t),c=b.useCallback(l=>{if(i){const h=typeof l=="function"?l(n):l;h!==n&&a(h)}else r(l)},[i,n,r,a]);return[o,c]}function Dv({defaultProp:n,onChange:e}){const t=b.useState(n),[s]=t,r=b.useRef(s),i=ni(e);return b.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),t}const Pv=b.forwardRef((n,e)=>b.createElement(ar.span,Se({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),Mv=Pv,[_c,EM]=Zp("Tooltip",[e0]),yc=e0(),Nv="TooltipProvider",Ol="tooltip.open",[CM,Du]=_c(Nv),Pu="Tooltip",[Iv,vc]=_c(Pu),$v=n=>{const{__scopeTooltip:e,children:t,open:s,defaultOpen:r=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=n,c=Du(Pu,n.__scopeTooltip),l=yc(e),[u,h]=b.useState(null),d=cv(),f=b.useRef(0),g=o??c.disableHoverableContent,p=a??c.delayDuration,m=b.useRef(!1),[_=!1,T]=Rv({prop:s,defaultProp:r,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ol))):c.onClose(),i==null||i(E)}}),w=b.useMemo(()=>_?m.current?"delayed-open":"instant-open":"closed",[_]),y=b.useCallback(()=>{window.clearTimeout(f.current),m.current=!1,T(!0)},[T]),v=b.useCallback(()=>{window.clearTimeout(f.current),T(!1)},[T]),k=b.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m.current=!0,T(!0)},p)},[p,T]);return b.useEffect(()=>()=>window.clearTimeout(f.current),[]),b.createElement(Tv,l,b.createElement(Iv,{scope:e,contentId:d,open:_,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayed?k():y()},[c.isOpenDelayed,k,y]),onTriggerLeave:b.useCallback(()=>{g?v():window.clearTimeout(f.current)},[v,g]),onOpen:y,onClose:v,disableHoverableContent:g},t))},Cd="TooltipTrigger",Fv=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=vc(Cd,t),i=Du(Cd,t),o=yc(t),a=b.useRef(null),c=ti(e,a,r.onTriggerChange),l=b.useRef(!1),u=b.useRef(!1),h=b.useCallback(()=>l.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),b.createElement(Ev,Se({asChild:!0},o),b.createElement(ar.button,Se({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},s,{ref:c,onPointerMove:Vn(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:Vn(n.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:Vn(n.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Vn(n.onFocus,()=>{l.current||r.onOpen()}),onBlur:Vn(n.onBlur,r.onClose),onClick:Vn(n.onClick,r.onClose)})))}),Lv="TooltipPortal",[SM,jv]=_c(Lv,{forceMount:void 0}),Hi="TooltipContent",zv=b.forwardRef((n,e)=>{const t=jv(Hi,n.__scopeTooltip),{forceMount:s=t.forceMount,side:r="top",...i}=n,o=vc(Hi,n.__scopeTooltip);return b.createElement(r0,{present:s||o.open},o.disableHoverableContent?b.createElement(i0,Se({side:r},i,{ref:e})):b.createElement(Vv,Se({side:r},i,{ref:e})))}),Vv=b.forwardRef((n,e)=>{const t=vc(Hi,n.__scopeTooltip),s=Du(Hi,n.__scopeTooltip),r=b.useRef(null),i=ti(e,r),[o,a]=b.useState(null),{trigger:c,onClose:l}=t,u=r.current,{onPointerInTransitChange:h}=s,d=b.useCallback(()=>{a(null),h(!1)},[h]),f=b.useCallback((g,p)=>{const m=g.currentTarget,_={x:g.clientX,y:g.clientY},T=Hv(_,m.getBoundingClientRect()),w=Yv(_,T),y=Gv(p.getBoundingClientRect()),v=Zv([...w,...y]);a(v),h(!0)},[h]);return b.useEffect(()=>()=>d(),[d]),b.useEffect(()=>{if(c&&u){const g=m=>f(m,u),p=m=>f(m,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",p)}}},[c,u,f,d]),b.useEffect(()=>{if(o){const g=p=>{const m=p.target,_={x:p.clientX,y:p.clientY},T=(c==null?void 0:c.contains(m))||(u==null?void 0:u.contains(m)),w=!Xv(_,o);T?d():w&&(d(),l())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,l,d]),b.createElement(i0,Se({},n,{ref:i}))}),[Uv,Bv]=_c(Pu,{isInside:!1}),i0=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,c=vc(Hi,t),l=yc(t),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(Ol,u),()=>document.removeEventListener(Ol,u)),[u]),b.useEffect(()=>{if(c.trigger){const h=d=>{const f=d.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),b.createElement(sv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u},b.createElement(Cv,Se({"data-state":c.stateAttribute},l,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),b.createElement(qp,null,s),b.createElement(Uv,{scope:t,isInside:!0},b.createElement(Mv,{id:c.contentId,role:"tooltip"},r||s))))}),Wv="TooltipArrow",qv=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=yc(t);return Bv(Wv,t).isInside?null:b.createElement(Sv,Se({},r,s,{ref:e}))});function Hv(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,s,r,i)){case i:return"left";case r:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Yv(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function Gv(n){const{top:e,right:t,bottom:s,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:s},{x:r,y:s}]}function Xv(n,e){const{x:t,y:s}=n;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,l=e[o].x,u=e[o].y;c>s!=u>s&&t<(l-a)*(s-c)/(u-c)+a&&(r=!r)}return r}function Zv(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),Kv(e)}function Kv(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const r=n[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const r=n[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Qv=$v,Jv=Fv,eb=zv,tb=qv;function nb(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function De(n,e){if(n==null)return{};var t=nb(n,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}let He;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(He||(He={}));const sb={[He.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[He.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[He.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[He.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[He.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[He.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[He.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[He.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[He.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[He.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[He.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function o0(n,e,...t){const[s,...r]=sb[e](...t);console[n]("LEVA: "+s,...r)}const Bn=o0.bind(null,"warn"),rb=o0.bind(null,"log"),ib=["value"],ob=["schema"],ab=["value"],a0=[],Js={};function Sd(n){let{value:e}=n,t=De(n,ib);for(let s of a0){const r=s(e,t);if(r)return r}}function ns(n,e){let{schema:t}=e,s=De(e,ob);if(n in Js){Bn(He.ALREADY_REGISTERED_TYPE,n);return}a0.push((r,i)=>t(r,i)&&n),Js[n]=s}function Jc(n,e,t,s){const{normalize:r}=Js[n];if(r)return r(e,t,s);if(typeof e!="object"||!("value"in e))return{value:e};const{value:i}=e,o=De(e,ab);return{value:i,settings:o}}function cb(n,e,t,s,r,i){const{sanitize:o}=Js[n];return o?o(e,t,s,r,i):e}function Od(n,e,t){const{format:s}=Js[n];return s?s(e,t):e}function lb(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ad(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function de(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ad(Object(t),!0).forEach(function(s){lb(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ad(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}const xs=(n,e,t)=>n>t?t:n<e?e:n,ub=n=>{if(n===""||typeof n=="number")return n;try{const e=ls(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},hb=Math.log(10);function Rd(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/hb)+1,s=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,s-t);return Math.max(r,.001)}const Ea=(n,e,t)=>t===e?0:(xs(n,e,t)-e)/(t-e),Ca=(n,e,t)=>n*(t-e)+e,db=()=>"_"+Math.random().toString(36).substr(2,9),Dd=/\(([0-9+\-*/^ .]+)\)/,Pd=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Md=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Nd=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Id=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,$d=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function ls(n){if(isNaN(Number(n)))if(Dd.test(n)){const e=n.replace(Dd,(t,s)=>String(ls(s)));return ls(e)}else if(Pd.test(n)){const e=n.replace(Pd,(t,s,r)=>String(Math.pow(Number(s),Number(r))));return ls(e)}else if(Md.test(n)){const e=n.replace(Md,(t,s,r)=>String(Number(s)*Number(r)));return ls(e)}else if(Nd.test(n)){const e=n.replace(Nd,(t,s,r)=>{if(r!=0)return String(Number(s)/Number(r));throw new Error("Division by zero")});return ls(e)}else if(Id.test(n)){const e=n.replace(Id,(t,s,r)=>String(Number(s)+Number(r)));return ls(e)}else if($d.test(n)){const e=n.replace($d,(t,s,r)=>String(Number(s)-Number(r)));return ls(e)}else return Number(n);return Number(n)}function fb(n,e){return e.reduce((t,s)=>(n&&n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}function pb(n,e){const t=de({},n);return e.forEach(s=>s in n&&delete t[s]),t}function mb(n,e){return n.reduce((t,s,r)=>Object.assign(t,{[e[r]]:s}),{})}function c0(n){return Object.prototype.toString.call(n)==="[object Object]"}const gb=n=>c0(n)&&Object.keys(n).length===0;let un;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(un||(un={}));let dn;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(dn||(dn={}));const _b=["type","__customInput"],yb=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],vb=["type"];function l0(n,e,t={},s){var r,i;if(typeof n!="object"||Array.isArray(n))return{type:s,input:n,options:de({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:v,__customInput:k}=n,E=De(n,_b);return l0(k,e,E,v)}const{render:o,label:a,optional:c,order:l=0,disabled:u,hint:h,onChange:d,onEditStart:f,onEditEnd:g,transient:p}=n,m=De(n,yb),_=de({render:o,key:e,label:a??e,hint:h,transient:p??!!d,onEditStart:f,onEditEnd:g,disabled:u,optional:c,order:l},t);let{type:T}=m,w=De(m,vb);if(T=s??T,T in un)return{type:T,input:w,options:_};let y;return s&&c0(w)&&"value"in w?y=w.value:y=gb(w)?void 0:w,{type:T,input:y,options:de(de({},_),{},{onChange:d,optional:(r=_.optional)!==null&&r!==void 0?r:!1,disabled:(i=_.disabled)!==null&&i!==void 0?i:!1})}}function bb(n,e,t,s){const r=l0(n,e),{type:i,input:o,options:a}=r;if(i)return i in un?r:{type:i,input:Jc(i,o,t,s),options:a};let c=Sd(o);return c?{type:c,input:Jc(c,o,t,s),options:a}:(c=Sd({value:o}),c?{type:c,input:Jc(c,{value:o},t,s),options:a}:!1)}function Fd(n,e,t,s,r){const{value:i,type:o,settings:a}=n;n.value=u0({type:o,value:i,settings:a},e,t,s),n.fromPanel=r}const xb=function(e,t,s){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=s};function u0({type:n,value:e,settings:t},s,r,i){const o=n!=="SELECT"&&typeof s=="function"?s(e):s;let a;try{a=cb(n,o,t,e,r,i)}catch(c){throw new xb(`The value \`${s}\` did not result in a correct value.`,e,c)}return Wi(a,e)?e:a}const h0=(n,e,t=!1)=>{let s=0;return function(){const r=arguments,i=t&&!s,o=()=>n.apply(this,r);window.clearTimeout(s),s=window.setTimeout(o,e),i&&o()}},d0=n=>n.shiftKey?5:n.altKey?1/5:1;function wb(n,e){const t=console.error;console.error=()=>{},pp.render(n,e),console.error=t}const kb=["value"],Tb=["min","max"],Eb=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},f0=(n,{min:e=-1/0,max:t=1/0,suffix:s})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const i=xs(r,e,t);return s?i+s:i},Cb=(n,{pad:e=0,suffix:t})=>{const s=parseFloat(n).toFixed(e);return t?s+t:s},p0=n=>{let{value:e}=n,t=De(n,kb);const{min:s=-1/0,max:r=1/0}=t,i=De(t,Tb);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=xs(o,s,r);let c=t.step;c||(Number.isFinite(s)?Number.isFinite(r)?c=+(Math.abs(r-s)/100).toPrecision(1):c=+(Math.abs(o-s)/100).toPrecision(1):Number.isFinite(r)&&(c=+(Math.abs(r-o)/100).toPrecision(1)));const l=c?Rd(c)*10:Rd(o);c=c||l/10;const u=Math.round(xs(Math.log10(1/l),0,2));return{value:a?o+a:o,settings:de({initialValue:o,step:c,pad:u,min:s,max:r,suffix:a},i)}},m0=(n,{step:e,initialValue:t})=>{const s=Math.round((n-t)/e);return t+s*e};var g0=Object.freeze({__proto__:null,schema:Eb,sanitize:f0,format:Cb,normalize:p0,sanitizeStep:m0});function Je(){return Je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Je.apply(this,arguments)}const _0=b.createContext({});function yt(){return b.useContext(_0)}const Mu=b.createContext(null),y0=b.createContext(null),v0=b.createContext(null);function Eo(){return b.useContext(y0)}function Sb(){return b.useContext(v0)}const b0=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Ko(n,e){const[t,s]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),s&&(r.backgroundColor=s),r}const ki={$inputStyle:()=>n=>Ko(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Ko(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Ko(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Ko(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ce,css:OM,createTheme:Ob,globalCss:Ab,keyframes:AM}=J_({prefix:"leva",theme:b0(),utils:de(de({},ki),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":ki.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":ki.$focusStyle()(n)}),$hover:n=>({"&:hover":ki.$hoverStyle()(n)}),$active:n=>({"&:active":ki.$activeStyle()(n)})})}),Rb=Ab({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Db(n){const e=b0();if(!n)return{theme:e,className:""};Object.keys(n).forEach(s=>{Object.assign(e[s],n[s])});const t=Ob(e);return{theme:e,className:t.className}}function Wn(n,e){const{theme:t}=b.useContext(Mu);if(!(n in t)||!(e in t[n]))return Bn(He.THEME_ERROR,n,e),"";let s=e;for(;;){let r=t[n][s];if(typeof r=="string"&&r.charAt(0)==="$")s=r.substr(1);else return r}}const x0=ce("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),w0=ce("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${x0}`]:{paddingLeft:0}}),Pb=ce(w0,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Mb=ce("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Nb=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Ib=["onUpdate"];function Nu(n){let{innerLabel:e,value:t,onUpdate:s,onChange:r,onKeyDown:i,type:o,id:a,inputType:c="text",rows:l=0}=n,u=De(n,Nb);const{id:h,emitOnEditStart:d,emitOnEditEnd:f,disabled:g}=yt(),p=a||h,m=b.useRef(null),_=l>0,T=_?"textarea":"input",w=b.useCallback(k=>E=>{const x=E.currentTarget.value;k(x)},[]);N.useEffect(()=>{const k=m.current,E=w(x=>{s(x),f()});return k==null||k.addEventListener("blur",E),()=>k==null?void 0:k.removeEventListener("blur",E)},[w,s,f]);const y=b.useCallback(k=>{k.key==="Enter"&&w(s)(k)},[w,s]),v=Object.assign({as:T},_?{rows:l}:{},u);return N.createElement(Mb,{textArea:_},e&&typeof e=="string"?N.createElement(w0,null,e):e,N.createElement(x0,Je({levaType:o,ref:m,id:p,type:c,autoComplete:"off",spellCheck:"false",value:t,onChange:w(r),onFocus:()=>d(),onKeyPress:y,onKeyDown:i,disabled:g},v)))}function $b(n){let{onUpdate:e}=n,t=De(n,Ib);const s=b.useCallback(i=>e(ub(i)),[e]),r=b.useCallback(i=>{const o=i.key==="ArrowUp"?1:i.key==="ArrowDown"?-1:0;if(o){i.preventDefault();const a=i.altKey?.1:i.shiftKey?10:1;e(c=>parseFloat(c)+o*a)}},[e]);return N.createElement(Nu,Je({},t,{onUpdate:s,onKeyDown:r,type:"number"}))}const Sa=ce("div",{}),Al=ce("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Fb=ce("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Al}::after`]:{opacity:.6},[`${Sa}:hover > & + ${Al}::after`]:{opacity:.6},[`${Sa}:hover > & > svg`]:{opacity:1}}),k0=ce("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Sa}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),T0=ce("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${k0} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),E0=ce(T0,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Lb=ce("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),jb=ce("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Rl=ce("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),zb=ce("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Rl}`]:{pointerEvents:"auto"}}}}}),C0=ce("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Vb=ce("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Ub=ce(tb,{fill:"$toolTipBackground"});function Iu({children:n}){const{className:e}=b.useContext(Mu);return N.createElement(Y1,{className:e},n)}const Bb=["align"];function Wb(){const{id:n,disable:e,disabled:t}=yt();return N.createElement(N.Fragment,null,N.createElement(jb,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),N.createElement("label",{htmlFor:n+"__disable"}))}function qb(n){const{id:e,optional:t,hint:s}=yt(),r=n.htmlFor||(e?{htmlFor:e}:null),i=!s&&typeof n.children=="string"?{title:n.children}:null;return N.createElement(N.Fragment,null,t&&N.createElement(Wb,null),s!==void 0?N.createElement(Qv,null,N.createElement(Jv,{asChild:!0},N.createElement(Rl,Je({},r,n))),N.createElement(eb,{side:"top",sideOffset:2},N.createElement(Vb,null,s,N.createElement(Ub,null)))):N.createElement(Rl,Je({},r,i,n)))}function mn(n){let{align:e}=n,t=De(n,Bb);const{value:s,label:r,key:i,disabled:o}=yt(),{hideCopyButton:a}=Sb(),c=!a&&i!==void 0,[l,u]=b.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[i]:s??""})),u(!0)}catch{Bn(He.CLIPBOARD_ERROR,{[i]:s})}};return N.createElement(Lb,{align:e,onPointerLeave:()=>u(!1)},N.createElement(qb,t),c&&!o&&N.createElement("div",{title:`Click to copy ${typeof r=="string"?r:i} value`},l?N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},N.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),N.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):N.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},N.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),N.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Hb=["toggled"],Yb=ce("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function $u(n){let{toggled:e}=n,t=De(n,Hb);return N.createElement(Yb,Je({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),N.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Gb=["input"];function sn(n){let{input:e}=n,t=De(n,Gb);return e?N.createElement(E0,t):N.createElement(T0,t)}function S0({value:n,type:e,settings:t,setValue:s}){const[r,i]=b.useState(Od(e,n,t)),o=b.useRef(n),a=b.useRef(t);a.current=t;const c=b.useCallback(u=>i(Od(e,u,a.current)),[e]),l=b.useCallback(u=>{try{s(u)}catch(h){const{type:d,previousValue:f}=h;if(d!=="LEVA_ERROR")throw h;c(f)}},[c,s]);return b.useEffect(()=>{Wi(n,o.current)||c(n),o.current=n},[n,c]),{displayValue:r,onChange:i,onUpdate:l}}function Co(n,e){const{emitOnEditStart:t,emitOnEditEnd:s}=yt();return ey(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const i=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),s==null||s()),i},e)}function Xb(n){const e=b.useRef(null),t=b.useRef(null),s=b.useRef(!1);return b.useEffect(()=>{const r=h0(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),s.current||(r(),s.current=!0),()=>window.removeEventListener("resize",r)},[n]),b.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function O0(){const n=b.useRef(null),e=b.useRef({x:0,y:0}),t=b.useCallback(s=>{Object.assign(e.current,s),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const Zb=["__refCount"],el=(n,e)=>{if(!n[e])return null;const t=n[e];return De(t,Zb)};function Kb(n){const e=Eo(),[t,s]=b.useState(el(e.getData(),n)),r=b.useCallback(l=>e.setValueAtPath(n,l,!0),[n,e]),i=b.useCallback(l=>e.setSettingsAtPath(n,l),[n,e]),o=b.useCallback(l=>e.disableInputAtPath(n,l),[n,e]),a=b.useCallback(()=>e.emitOnEditStart(n),[n,e]),c=b.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return b.useEffect(()=>{s(el(e.getData(),n));const l=e.useStore.subscribe(u=>el(u.data,n),s,{equalityFn:To});return()=>l()},[e,n]),[t,{set:r,setSettings:i,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:c}]}const Qb=ce("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),A0=ce("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Dl=ce("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),R0=ce("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),D0=ce("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Jb({value:n,min:e,max:t,onDrag:s,step:r,initialValue:i}){const o=b.useRef(null),a=b.useRef(null),c=b.useRef(0),l=Wn("sizes","scrubberWidth"),u=Co(({event:d,first:f,xy:[g],movement:[p],memo:m})=>{if(f){const{width:T,left:w}=o.current.getBoundingClientRect();c.current=T-parseFloat(l),m=(d==null?void 0:d.target)===a.current?n:Ca((g-w)/T,e,t)}const _=m+Ca(p/c.current,0,t-e);return s(m0(_,{step:r,initialValue:i})),m}),h=Ea(n,e,t);return N.createElement(R0,Je({ref:o},u()),N.createElement(A0,null,N.createElement(D0,{style:{left:0,right:`${(1-h)*100}%`}})),N.createElement(Dl,{ref:a,style:{left:`calc(${h} * (100% - ${l}))`}}))}const ex=N.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:s})=>{const[r,i]=b.useState(!1),o=Co(({active:a,delta:[c],event:l,memo:u=0})=>(i(a),u+=c/2,Math.abs(u)>=1&&(e(h=>parseFloat(h)+Math.floor(u)*t*d0(l)),u=0),u));return N.createElement(Pb,Je({dragging:r,title:n.length>1?n:""},o()),n.slice(0,s))});function P0({label:n,id:e,displayValue:t,onUpdate:s,onChange:r,settings:i,innerLabelTrim:o=1}){const a=o>0&&N.createElement(ex,{label:n,step:i.step,onUpdate:s,innerLabelTrim:o});return N.createElement($b,{id:e,value:String(t),onUpdate:s,onChange:r,innerLabel:a})}function tx(){const n=yt(),{label:e,value:t,onUpdate:s,settings:r,id:i}=n,{min:o,max:a}=r,c=a!==1/0&&o!==-1/0;return N.createElement(sn,{input:!0},N.createElement(mn,null,e),N.createElement(Qb,{hasRange:c},c&&N.createElement(Jb,Je({value:parseFloat(t),onDrag:s},r)),N.createElement(P0,Je({},n,{id:i,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:nx}=g0,sx=De(g0,["sanitizeStep"]);var rx=de({component:tx},sx);const ix=(n,e)=>Ot().schema({options:Ot().passesAnyOf(Ot().object(),Ot().array())}).test(e),ox=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},ax=(n,{values:e})=>e.indexOf(n),cx=n=>{let{value:e,options:t}=n,s,r;return Array.isArray(t)?(r=t,s=t.map(i=>String(i))):(r=Object.values(t),s=Object.keys(t)),"value"in n?r.includes(e)||(s.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:s,values:r}}};var lx=Object.freeze({__proto__:null,schema:ix,sanitize:ox,format:ax,normalize:cx});const ux=ce("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Pl=ce("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),hx=ce("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Pl}:focus + &`]:{$focusStyle:""},[`${Pl}:hover + &`]:{$hoverStyle:""}});function dx({displayValue:n,value:e,onUpdate:t,id:s,settings:r,disabled:i}){const{keys:o,values:a}=r,c=b.useRef();return e===a[n]&&(c.current=o[n]),N.createElement(ux,null,N.createElement(Pl,{id:s,value:n,onChange:l=>t(a[Number(l.currentTarget.value)]),disabled:i},o.map((l,u)=>N.createElement("option",{key:l,value:u},l))),N.createElement(hx,null,c.current),N.createElement($u,{toggled:!0}))}function fx(){const{label:n,value:e,displayValue:t,onUpdate:s,id:r,disabled:i,settings:o}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(dx,{id:r,value:e,displayValue:t,onUpdate:s,settings:o,disabled:i}))}var px=de({component:fx},lx);const mx=n=>Ot().string().test(n),gx=n=>{if(typeof n!="string")throw Error("Invalid string");return n},_x=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var yx=Object.freeze({__proto__:null,schema:mx,sanitize:gx,normalize:_x});const vx=["displayValue","onUpdate","onChange","editable"],bx=ce("div",{whiteSpace:"pre-wrap"});function xx(n){let{displayValue:e,onUpdate:t,onChange:s,editable:r=!0}=n,i=De(n,vx);return r?N.createElement(Nu,Je({value:e,onUpdate:t,onChange:s},i)):N.createElement(bx,null,e)}function wx(){const{label:n,settings:e,displayValue:t,onUpdate:s,onChange:r}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(xx,Je({displayValue:t,onUpdate:s,onChange:r},e)))}var kx=de({component:wx},yx);const Tx=n=>Ot().boolean().test(n),Ex=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Cx=Object.freeze({__proto__:null,schema:Tx,sanitize:Ex});const Sx=ce("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Ox({value:n,onUpdate:e,id:t,disabled:s}){return N.createElement(Sx,null,N.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:s}),N.createElement("label",{htmlFor:t},N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Ax(){const{label:n,value:e,onUpdate:t,disabled:s,id:r}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(Ox,{value:e,onUpdate:t,id:r,disabled:s}))}var Rx=de({component:Ax},Cx);const Dx=["locked"];function Px({value:n,id:e,valueKey:t,settings:s,onUpdate:r,innerLabelTrim:i}){const o=b.useRef(n[t]);o.current=n[t];const a=b.useCallback(l=>r({[t]:u0({type:"NUMBER",value:o.current,settings:s},l)}),[r,s,t]),c=S0({type:"NUMBER",value:n[t],settings:s,setValue:a});return N.createElement(P0,{id:e,label:t,value:n[t],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:s,innerLabelTrim:i})}const Mx=ce("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Nx(n){let{locked:e}=n,t=De(n,Dx);return N.createElement("svg",Je({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?N.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):N.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Fu({value:n,onUpdate:e,settings:t,innerLabelTrim:s}){const{id:r,setSettings:i}=yt(),{lock:o,locked:a}=t;return N.createElement(Mx,{withLock:o},o&&N.createElement(Nx,{locked:a,onClick:()=>i({locked:!a})}),Object.keys(n).map((c,l)=>N.createElement(Px,{id:l===0?r:`${r}.${c}`,key:c,valueKey:c,value:n,settings:t[c],onUpdate:e,innerLabelTrim:s})))}const M0=(n,e)=>{const t={};let s=0,r=1/0;Object.entries(n).forEach(([i,o])=>{t[i]=p0(de({value:o},e[i])).settings,s=Math.max(s,t[i].step),r=Math.min(r,t[i].pad)});for(let i in t){const{step:o,min:a,max:c}=e[i]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(c))&&(t[i].step=s,t[i].pad=r)}return t},Ix=["lock"],$x=["value"];function Fx(n){const e=Ot().array().length(n).every.number(),t=s=>{if(!s||typeof s!="object")return!1;const r=Object.values(s);return r.length===n&&r.every(i=>isFinite(i))};return s=>e.test(s)||t(s)}function Lx(n){return Array.isArray(n)?"array":"object"}function Mi(n,e,t){return Lx(n)===e?n:e==="array"?Object.values(n):mb(n,t)}const jx=(n,e,t)=>{const s=Mi(n,"object",e.keys);for(let o in s)s[o]=f0(s[o],e[o]);const r=Object.keys(s);let i={};if(r.length===e.keys.length)i=s;else{const o=Mi(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],c=s[a],l=o[a],u=l!==0?c/l:1;for(let h in o)h===a?i[a]=c:i[h]=o[h]*u}else i=de(de({},o),s)}return Mi(i,e.format,e.keys)},zx=(n,e)=>Mi(n,"object",e.keys),Vx=n=>!!n&&("step"in n||"min"in n||"max"in n);function Ux(n,e,t=[]){const{lock:s=!1}=e,r=De(e,Ix),i=Array.isArray(n)?"array":"object",o=i==="object"?Object.keys(n):t,a=Mi(n,"object",o),c=Vx(r)?o.reduce((u,h)=>Object.assign(u,{[h]:r}),{}):r,l=M0(a,c);return{value:i==="array"?n:a,settings:de(de({},l),{},{format:i,keys:o,lock:s,locked:!1})}}function N0(n){return{schema:Fx(n.length),normalize:e=>{let{value:t}=e,s=De(e,$x);return Ux(t,s,n)},format:(e,t)=>zx(e,t),sanitize:(e,t,s)=>jx(e,t,s)}}var Bx={grad:.9,turn:360,rad:360/(2*Math.PI)},Fn=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},lt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Xt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},I0=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Ld=function(n){return{r:Xt(n.r,0,255),g:Xt(n.g,0,255),b:Xt(n.b,0,255),a:Xt(n.a)}},tl=function(n){return{r:lt(n.r),g:lt(n.g),b:lt(n.b),a:lt(n.a,3)}},Wx=/^#([0-9a-f]{3,8})$/i,Qo=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},$0=function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=Math.max(e,t,s),o=i-Math.min(e,t,s),a=o?i===e?(t-s)/o:i===t?2+(s-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:r}},F0=function(n){var e=n.h,t=n.s,s=n.v,r=n.a;e=e/360*6,t/=100,s/=100;var i=Math.floor(e),o=s*(1-t),a=s*(1-(e-i)*t),c=s*(1-(1-e+i)*t),l=i%6;return{r:255*[s,a,o,o,c,s][l],g:255*[c,s,s,a,o,o][l],b:255*[o,o,c,s,s,a][l],a:r}},jd=function(n){return{h:I0(n.h),s:Xt(n.s,0,100),l:Xt(n.l,0,100),a:Xt(n.a)}},zd=function(n){return{h:lt(n.h),s:lt(n.s),l:lt(n.l),a:lt(n.a,3)}},Vd=function(n){return F0((t=(e=n).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},Ni=function(n){return{h:(e=$0(n)).h,s:(r=(200-(t=e.s))*(s=e.v)/100)>0&&r<200?t*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,s,r},qx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ml={string:[[function(n){var e=Wx.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?lt(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?lt(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=Yx.exec(n)||Gx.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ld({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=qx.exec(n)||Hx.exec(n);if(!e)return null;var t,s,r=jd({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Bx[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Vd(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=r===void 0?1:r;return Fn(e)&&Fn(t)&&Fn(s)?Ld({r:Number(e),g:Number(t),b:Number(s),a:Number(i)}):null},"rgb"],[function(n){var e=n.h,t=n.s,s=n.l,r=n.a,i=r===void 0?1:r;if(!Fn(e)||!Fn(t)||!Fn(s))return null;var o=jd({h:Number(e),s:Number(t),l:Number(s),a:Number(i)});return Vd(o)},"hsl"],[function(n){var e=n.h,t=n.s,s=n.v,r=n.a,i=r===void 0?1:r;if(!Fn(e)||!Fn(t)||!Fn(s))return null;var o=function(a){return{h:I0(a.h),s:Xt(a.s,0,100),v:Xt(a.v,0,100),a:Xt(a.a)}}({h:Number(e),s:Number(t),v:Number(s),a:Number(i)});return F0(o)},"hsv"]]},Ud=function(n,e){for(var t=0;t<e.length;t++){var s=e[t][0](n);if(s)return[s,e[t][1]]}return[null,void 0]},L0=function(n){return typeof n=="string"?Ud(n.trim(),Ml.string):typeof n=="object"&&n!==null?Ud(n,Ml.object):[null,void 0]},Xx=function(n){return L0(n)[1]},nl=function(n,e){var t=Ni(n);return{h:t.h,s:Xt(t.s+100*e,0,100),l:t.l,a:t.a}},sl=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Bd=function(n,e){var t=Ni(n);return{h:t.h,s:t.s,l:Xt(t.l+100*e,0,100),a:t.a}},Nl=function(){function n(e){this.parsed=L0(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return lt(sl(this.rgba),2)},n.prototype.isDark=function(){return sl(this.rgba)<.5},n.prototype.isLight=function(){return sl(this.rgba)>=.5},n.prototype.toHex=function(){return e=tl(this.rgba),t=e.r,s=e.g,r=e.b,o=(i=e.a)<1?Qo(lt(255*i)):"","#"+Qo(t)+Qo(s)+Qo(r)+o;var e,t,s,r,i,o},n.prototype.toRgb=function(){return tl(this.rgba)},n.prototype.toRgbString=function(){return e=tl(this.rgba),t=e.r,s=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+s+", "+r+", "+i+")":"rgb("+t+", "+s+", "+r+")";var e,t,s,r,i},n.prototype.toHsl=function(){return zd(Ni(this.rgba))},n.prototype.toHslString=function(){return e=zd(Ni(this.rgba)),t=e.h,s=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+s+"%, "+r+"%, "+i+")":"hsl("+t+", "+s+"%, "+r+"%)";var e,t,s,r,i},n.prototype.toHsv=function(){return e=$0(this.rgba),{h:lt(e.h),s:lt(e.s),v:lt(e.v),a:lt(e.a,3)};var e},n.prototype.invert=function(){return bt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),bt(nl(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),bt(nl(this.rgba,-e))},n.prototype.grayscale=function(){return bt(nl(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),bt(Bd(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),bt(Bd(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?bt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):lt(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Ni(this.rgba);return typeof e=="number"?bt({h:e,s:t.s,l:t.l,a:t.a}):lt(t.h)},n.prototype.isEqual=function(e){return this.toHex()===bt(e).toHex()},n}(),bt=function(n){return n instanceof Nl?n:new Nl(n)},Wd=[],Zx=function(n){n.forEach(function(e){Wd.indexOf(e)<0&&(e(Nl,Ml),Wd.push(e))})};function Kx(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in t)s[t[r]]=r;var i={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=s[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!i.length)for(var f in t)i[f]=new n(t[f]).toRgb();for(var g in t){var p=(a=u,c=i[g],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));p<h&&(h=p,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":t[a];return c?new n(c).toRgb():null},"name"])}function si(){return(si=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n}).apply(this,arguments)}function Lu(n,e){if(n==null)return{};var t,s,r={},i=Object.keys(n);for(s=0;s<i.length;s++)e.indexOf(t=i[s])>=0||(r[t]=n[t]);return r}function Il(n){var e=b.useRef(n),t=b.useRef(function(s){e.current&&e.current(s)});return e.current=n,t.current}var zr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Ii=function(n){return"touches"in n},$l=function(n){return n&&n.ownerDocument.defaultView||self},qd=function(n,e,t){var s=n.getBoundingClientRect(),r=Ii(e)?function(i,o){for(var a=0;a<i.length;a++)if(i[a].identifier===o)return i[a];return i[0]}(e.touches,t):e;return{left:zr((r.pageX-(s.left+$l(n).pageXOffset))/s.width),top:zr((r.pageY-(s.top+$l(n).pageYOffset))/s.height)}},Hd=function(n){!Ii(n)&&n.preventDefault()},ju=N.memo(function(n){var e=n.onMove,t=n.onKey,s=Lu(n,["onMove","onKey"]),r=b.useRef(null),i=Il(e),o=Il(t),a=b.useRef(null),c=b.useRef(!1),l=b.useMemo(function(){var f=function(m){Hd(m),(Ii(m)?m.touches.length>0:m.buttons>0)&&r.current?i(qd(r.current,m,a.current)):p(!1)},g=function(){return p(!1)};function p(m){var _=c.current,T=$l(r.current),w=m?T.addEventListener:T.removeEventListener;w(_?"touchmove":"mousemove",f),w(_?"touchend":"mouseup",g)}return[function(m){var _=m.nativeEvent,T=r.current;if(T&&(Hd(_),!function(y,v){return v&&!Ii(y)}(_,c.current)&&T)){if(Ii(_)){c.current=!0;var w=_.changedTouches||[];w.length&&(a.current=w[0].identifier)}T.focus(),i(qd(T,_,a.current)),p(!0)}},function(m){var _=m.which||m.keyCode;_<37||_>40||(m.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},p]},[o,i]),u=l[0],h=l[1],d=l[2];return b.useEffect(function(){return d},[d]),N.createElement("div",si({},s,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:h,tabIndex:0,role:"slider"}))}),So=function(n){return n.filter(Boolean).join(" ")},zu=function(n){var e=n.color,t=n.left,s=n.top,r=s===void 0?.5:s,i=So(["react-colorful__pointer",n.className]);return N.createElement("div",{className:i,style:{top:100*r+"%",left:100*t+"%"}},N.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},kt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},j0=function(n){var e=n.s,t=n.v,s=n.a,r=(200-e)*t/100;return{h:kt(n.h),s:kt(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:kt(r/2),a:kt(s,2)}},Fl=function(n){var e=j0(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},rl=function(n){var e=j0(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},z0=function(n){var e=n.h,t=n.s,s=n.v,r=n.a;e=e/360*6,t/=100,s/=100;var i=Math.floor(e),o=s*(1-t),a=s*(1-(e-i)*t),c=s*(1-(1-e+i)*t),l=i%6;return{r:kt(255*[s,a,o,o,c,s][l]),g:kt(255*[c,s,s,a,o,o][l]),b:kt(255*[o,o,c,s,s,a][l]),a:kt(r,2)}},V0=function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=Math.max(e,t,s),o=i-Math.min(e,t,s),a=o?i===e?(t-s)/o:i===t?2+(s-e)/o:4+(e-t)/o:0;return{h:kt(60*(a<0?a+6:a)),s:kt(i?o/i*100:0),v:kt(i/255*100),a:r}},U0=N.memo(function(n){var e=n.hue,t=n.onChange,s=So(["react-colorful__hue",n.className]);return N.createElement("div",{className:s},N.createElement(ju,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:zr(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":kt(e),"aria-valuemax":"360","aria-valuemin":"0"},N.createElement(zu,{className:"react-colorful__hue-pointer",left:e/360,color:Fl({h:e,s:100,v:100,a:1})})))}),B0=N.memo(function(n){var e=n.hsva,t=n.onChange,s={backgroundColor:Fl({h:e.h,s:100,v:100,a:1})};return N.createElement("div",{className:"react-colorful__saturation",style:s},N.createElement(ju,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:zr(e.s+100*r.left,0,100),v:zr(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+kt(e.s)+"%, Brightness "+kt(e.v)+"%"},N.createElement(zu,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Fl(e)})))}),Vu=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function W0(n,e,t){var s=Il(t),r=b.useState(function(){return n.toHsva(e)}),i=r[0],o=r[1],a=b.useRef({color:e,hsva:i});b.useEffect(function(){if(!n.equal(e,a.current.color)){var l=n.toHsva(e);a.current={hsva:l,color:e},o(l)}},[e,n]),b.useEffect(function(){var l;Vu(i,a.current.hsva)||n.equal(l=n.fromHsva(i),a.current.color)||(a.current={hsva:i,color:l},s(l))},[i,n,s]);var c=b.useCallback(function(l){o(function(u){return Object.assign({},u,l)})},[]);return[i,c]}var Qx=typeof window<"u"?b.useLayoutEffect:b.useEffect,Jx=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Yd=new Map,q0=function(n){Qx(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!Yd.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Yd.set(e,t);var s=Jx();s&&t.setAttribute("nonce",s),e.head.appendChild(t)}},[])},ew=function(n){var e=n.className,t=n.colorModel,s=n.color,r=s===void 0?t.defaultColor:s,i=n.onChange,o=Lu(n,["className","colorModel","color","onChange"]),a=b.useRef(null);q0(a);var c=W0(t,r,i),l=c[0],u=c[1],h=So(["react-colorful",e]);return N.createElement("div",si({},o,{ref:a,className:h}),N.createElement(B0,{hsva:l,onChange:u}),N.createElement(U0,{hue:l.h,onChange:u,className:"react-colorful__last-control"}))},tw=function(n){var e=n.className,t=n.hsva,s=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+rl(Object.assign({},t,{a:0}))+", "+rl(Object.assign({},t,{a:1}))+")"},i=So(["react-colorful__alpha",e]),o=kt(100*t.a);return N.createElement("div",{className:i},N.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),N.createElement(ju,{onMove:function(a){s({a:a.left})},onKey:function(a){s({a:zr(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},N.createElement(zu,{className:"react-colorful__alpha-pointer",left:t.a,color:rl(t)})))},nw=function(n){var e=n.className,t=n.colorModel,s=n.color,r=s===void 0?t.defaultColor:s,i=n.onChange,o=Lu(n,["className","colorModel","color","onChange"]),a=b.useRef(null);q0(a);var c=W0(t,r,i),l=c[0],u=c[1],h=So(["react-colorful",e]);return N.createElement("div",si({},o,{ref:a,className:h}),N.createElement(B0,{hsva:l,onChange:u}),N.createElement(U0,{hue:l.h,onChange:u}),N.createElement(tw,{hsva:l,onChange:u,className:"react-colorful__last-control"}))},sw={defaultColor:{r:0,g:0,b:0,a:1},toHsva:V0,fromHsva:z0,equal:Vu},rw=function(n){return N.createElement(nw,si({},n,{colorModel:sw}))},iw={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return V0({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=z0(n)).r,g:e.g,b:e.b};var e},equal:Vu},ow=function(n){return N.createElement(ew,si({},n,{colorModel:iw}))};function gn(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function $e(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}function ri(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(s=1,r&&(i=l[0]&2?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,r=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){t.label=l[1];break}if(l[0]===6&&t.label<i[1]){t.label=i[1],i=l;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(l);break}i[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(u){l=[6,u],r=0}finally{s=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function aw(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}return i}function cw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(aw(arguments[e]));return n}var lw=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Oo(n,e){var t=uw(n);if(typeof t.path!="string"){var s=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof s=="string"&&s.length>0?s:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function uw(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var s=e.split(".").pop().toLowerCase(),r=lw.get(s);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var hw=[".DS_Store","Thumbs.db"];function dw(n){return $e(this,void 0,void 0,function(){return ri(this,function(e){return Oa(n)&&fw(n)?[2,_w(n.dataTransfer,n.type)]:pw(n)?[2,mw(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,gw(n)]:[2,[]]})})}function fw(n){return Oa(n.dataTransfer)}function pw(n){return Oa(n)&&Oa(n.target)}function Oa(n){return typeof n=="object"&&n!==null}function mw(n){return Ll(n.target.files).map(function(e){return Oo(e)})}function gw(n){return $e(this,void 0,void 0,function(){var e;return ri(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(s){return s.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(s){return Oo(s)})]}})})}function _w(n,e){return $e(this,void 0,void 0,function(){var t,s;return ri(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=Ll(n.items).filter(function(i){return i.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(yw))]):[3,2];case 1:return s=r.sent(),[2,Gd(H0(s))];case 2:return[2,Gd(Ll(n.files).map(function(i){return Oo(i)}))]}})})}function Gd(n){return n.filter(function(e){return hw.indexOf(e.name)===-1})}function Ll(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var s=n[t];e.push(s)}return e}function yw(n){if(typeof n.webkitGetAsEntry!="function")return Xd(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?Y0(e):Xd(n)}function H0(n){return n.reduce(function(e,t){return cw(e,Array.isArray(t)?H0(t):[t])},[])}function Xd(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Oo(e);return Promise.resolve(t)}function vw(n){return $e(this,void 0,void 0,function(){return ri(this,function(e){return[2,n.isDirectory?Y0(n):bw(n)]})})}function Y0(n){var e=n.createReader();return new Promise(function(t,s){var r=[];function i(){var o=this;e.readEntries(function(a){return $e(o,void 0,void 0,function(){var c,l,u;return ri(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return c=h.sent(),t(c),[3,4];case 3:return l=h.sent(),s(l),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(vw)),r.push(u),i(),h.label=6;case 6:return[2]}})})},function(a){s(a)})}i()})}function bw(n){return $e(this,void 0,void 0,function(){return ri(this,function(e){return[2,new Promise(function(t,s){n.file(function(r){var i=Oo(r,n.fullPath);t(i)},function(r){s(r)})})]})})}var xw=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),s=n.name||"",r=(n.type||"").toLowerCase(),i=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?s.toLowerCase().endsWith(a):a.endsWith("/*")?i===a.replace(/\/.*$/,""):r===a})}return!0};function Zd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function Kd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zd(Object(t),!0).forEach(function(s){G0(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zd(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function G0(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qd(n,e){return Ew(n)||Tw(n,e)||kw(n,e)||ww()}function ww(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kw(n,e){if(n){if(typeof n=="string")return Jd(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Jd(n,e)}}function Jd(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Tw(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s=[],r=!0,i=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(s.push(o.value),!(e&&s.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(i)throw a}}return s}}function Ew(n){if(Array.isArray(n))return n}var Cw="file-invalid-type",Sw="file-too-large",Ow="file-too-small",Aw="too-many-files",Rw=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Cw,message:"File type must be ".concat(t)}},ef=function(e){return{code:Sw,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},tf=function(e){return{code:Ow,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Dw={code:Aw,message:"Too many files"};function X0(n,e){var t=n.type==="application/x-moz-file"||xw(n,e);return[t,t?null:Rw(e)]}function Z0(n,e,t){if(Ti(n.size))if(Ti(e)&&Ti(t)){if(n.size>t)return[!1,ef(t)];if(n.size<e)return[!1,tf(e)]}else{if(Ti(e)&&n.size<e)return[!1,tf(e)];if(Ti(t)&&n.size>t)return[!1,ef(t)]}return[!0,null]}function Ti(n){return n!=null}function Pw(n){var e=n.files,t=n.accept,s=n.minSize,r=n.maxSize,i=n.multiple,o=n.maxFiles;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(a){var c=X0(a,t),l=Qd(c,1),u=l[0],h=Z0(a,s,r),d=Qd(h,1),f=d[0];return u&&f})}function Aa(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Jo(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function nf(n){n.preventDefault()}function Mw(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Nw(n){return n.indexOf("Edge/")!==-1}function Iw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Mw(n)||Nw(n)}function wn(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(s){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.some(function(a){return!Aa(s)&&a&&a.apply(void 0,[s].concat(i)),Aa(s)})}}function $w(){return"showOpenFilePicker"in window}function Fw(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Kd(Kd({},e),{},G0({},t,[]))},{}):{}}]}function Lw(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function jw(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var zw=["children"],Vw=["open"],Uw=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Bw=["refKey","onChange","onClick"];function Ww(n){return Yw(n)||Hw(n)||K0(n)||qw()}function qw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hw(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yw(n){if(Array.isArray(n))return jl(n)}function il(n,e){return Zw(n)||Xw(n,e)||K0(n,e)||Gw()}function Gw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K0(n,e){if(n){if(typeof n=="string")return jl(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jl(n,e)}}function jl(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Xw(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s=[],r=!0,i=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(s.push(o.value),!(e&&s.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(i)throw a}}return s}}function Zw(n){if(Array.isArray(n))return n}function sf(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function qe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sf(Object(t),!0).forEach(function(s){zl(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sf(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function zl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ra(n,e){if(n==null)return{};var t=Kw(n,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Kw(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var Uu=b.forwardRef(function(n,e){var t=n.children,s=Ra(n,zw),r=J0(s),i=r.open,o=Ra(r,Vw);return b.useImperativeHandle(e,function(){return{open:i}},[i]),N.createElement(b.Fragment,null,t(qe(qe({},o),{},{open:i})))});Uu.displayName="Dropzone";var Q0={disabled:!1,getFilesFromEvent:dw,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Uu.defaultProps=Q0;Uu.propTypes={children:Ee.func,accept:Ee.oneOfType([Ee.string,Ee.arrayOf(Ee.string)]),multiple:Ee.bool,preventDropOnDocument:Ee.bool,noClick:Ee.bool,noKeyboard:Ee.bool,noDrag:Ee.bool,noDragEventsBubbling:Ee.bool,minSize:Ee.number,maxSize:Ee.number,maxFiles:Ee.number,disabled:Ee.bool,getFilesFromEvent:Ee.func,onFileDialogCancel:Ee.func,onFileDialogOpen:Ee.func,useFsAccessApi:Ee.bool,onDragEnter:Ee.func,onDragLeave:Ee.func,onDragOver:Ee.func,onDrop:Ee.func,onDropAccepted:Ee.func,onDropRejected:Ee.func,validator:Ee.func};var Vl={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function J0(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=qe(qe({},Q0),n),t=e.accept,s=e.disabled,r=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,a=e.multiple,c=e.maxFiles,l=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,d=e.onDrop,f=e.onDropAccepted,g=e.onDropRejected,p=e.onFileDialogCancel,m=e.onFileDialogOpen,_=e.useFsAccessApi,T=e.preventDropOnDocument,w=e.noClick,y=e.noKeyboard,v=e.noDrag,k=e.noDragEventsBubbling,E=e.validator,x=b.useMemo(function(){return typeof m=="function"?m:rf},[m]),C=b.useMemo(function(){return typeof p=="function"?p:rf},[p]),S=b.useRef(null),R=b.useRef(null),O=b.useReducer(Qw,Vl),L=il(O,2),z=L[0],W=L[1],B=z.isFocused,V=z.isFileDialogActive,U=z.draggedFiles,X=b.useRef(typeof window<"u"&&window.isSecureContext&&_&&$w()),K=function(){!X.current&&V&&setTimeout(function(){if(R.current){var fe=R.current.files;fe.length||(W({type:"closeDialog"}),C())}},300)};b.useEffect(function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}},[R,V,C,X]);var Q=b.useRef([]),F=function(fe){S.current&&S.current.contains(fe.target)||(fe.preventDefault(),Q.current=[])};b.useEffect(function(){return T&&(document.addEventListener("dragover",nf,!1),document.addEventListener("drop",F,!1)),function(){T&&(document.removeEventListener("dragover",nf),document.removeEventListener("drop",F))}},[S,T]);var j=b.useCallback(function(ee){ee.preventDefault(),ee.persist(),M(ee),Q.current=[].concat(Ww(Q.current),[ee.target]),Jo(ee)&&Promise.resolve(r(ee)).then(function(fe){Aa(ee)&&!k||(W({draggedFiles:fe,isDragActive:!0,type:"setDraggedFiles"}),l&&l(ee))})},[r,l,k]),A=b.useCallback(function(ee){ee.preventDefault(),ee.persist(),M(ee);var fe=Jo(ee);if(fe&&ee.dataTransfer)try{ee.dataTransfer.dropEffect="copy"}catch{}return fe&&h&&h(ee),!1},[h,k]),I=b.useCallback(function(ee){ee.preventDefault(),ee.persist(),M(ee);var fe=Q.current.filter(function(at){return S.current&&S.current.contains(at)}),tt=fe.indexOf(ee.target);tt!==-1&&fe.splice(tt,1),Q.current=fe,!(fe.length>0)&&(W({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Jo(ee)&&u&&u(ee))},[S,u,k]),Y=b.useCallback(function(ee,fe){var tt=[],at=[];ee.forEach(function($t){var os=X0($t,t),dr=il(os,2),$c=dr[0],Fc=dr[1],Lc=Z0($t,o,i),jo=il(Lc,2),jc=jo[0],zc=jo[1],Vc=E?E($t):null;if($c&&jc&&!Vc)tt.push($t);else{var Uc=[Fc,zc];Vc&&(Uc=Uc.concat(Vc)),at.push({file:$t,errors:Uc.filter(function(z_){return z_})})}}),(!a&&tt.length>1||a&&c>=1&&tt.length>c)&&(tt.forEach(function($t){at.push({file:$t,errors:[Dw]})}),tt.splice(0)),W({acceptedFiles:tt,fileRejections:at,type:"setFiles"}),d&&d(tt,at,fe),at.length>0&&g&&g(at,fe),tt.length>0&&f&&f(tt,fe)},[W,a,t,o,i,c,d,f,g,E]),$=b.useCallback(function(ee){ee.preventDefault(),ee.persist(),M(ee),Q.current=[],Jo(ee)&&Promise.resolve(r(ee)).then(function(fe){Aa(ee)&&!k||Y(fe,ee)}),W({type:"reset"})},[r,Y,k]),q=b.useCallback(function(){if(X.current){W({type:"openDialog"}),x();var ee={multiple:a,types:Fw(t)};window.showOpenFilePicker(ee).then(function(fe){return r(fe)}).then(function(fe){Y(fe,null),W({type:"closeDialog"})}).catch(function(fe){Lw(fe)?(C(fe),W({type:"closeDialog"})):jw(fe)&&(X.current=!1,R.current&&(R.current.value=null,R.current.click()))});return}R.current&&(W({type:"openDialog"}),x(),R.current.value=null,R.current.click())},[W,x,C,_,Y,t,a]),ae=b.useCallback(function(ee){!S.current||!S.current.isEqualNode(ee.target)||(ee.key===" "||ee.key==="Enter"||ee.keyCode===32||ee.keyCode===13)&&(ee.preventDefault(),q())},[S,q]),re=b.useCallback(function(){W({type:"focus"})},[]),ie=b.useCallback(function(){W({type:"blur"})},[]),ne=b.useCallback(function(){w||(Iw()?setTimeout(q,0):q())},[w,q]),ge=function(fe){return s?null:fe},te=function(fe){return y?null:ge(fe)},H=function(fe){return v?null:ge(fe)},M=function(fe){k&&fe.stopPropagation()},D=b.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=ee.refKey,tt=fe===void 0?"ref":fe,at=ee.role,$t=ee.onKeyDown,os=ee.onFocus,dr=ee.onBlur,$c=ee.onClick,Fc=ee.onDragEnter,Lc=ee.onDragOver,jo=ee.onDragLeave,jc=ee.onDrop,zc=Ra(ee,Uw);return qe(qe(zl({onKeyDown:te(wn($t,ae)),onFocus:te(wn(os,re)),onBlur:te(wn(dr,ie)),onClick:ge(wn($c,ne)),onDragEnter:H(wn(Fc,j)),onDragOver:H(wn(Lc,A)),onDragLeave:H(wn(jo,I)),onDrop:H(wn(jc,$)),role:typeof at=="string"&&at!==""?at:"button"},tt,S),!s&&!y?{tabIndex:0}:{}),zc)}},[S,ae,re,ie,ne,j,A,I,$,y,v,s]),J=b.useCallback(function(ee){ee.stopPropagation()},[]),se=b.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=ee.refKey,tt=fe===void 0?"ref":fe,at=ee.onChange,$t=ee.onClick,os=Ra(ee,Bw),dr=zl({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:ge(wn(at,$)),onClick:ge(wn($t,J)),tabIndex:-1},tt,R);return qe(qe({},dr),os)}},[R,t,a,$,s]),le=U.length,be=le>0&&Pw({files:U,accept:t,minSize:o,maxSize:i,multiple:a,maxFiles:c}),et=le>0&&!be;return qe(qe({},z),{},{isDragAccept:be,isDragReject:et,isFocused:B&&!s,getRootProps:D,getInputProps:se,rootRef:S,inputRef:R,open:ge(q)})}function Qw(n,e){switch(e.type){case"focus":return qe(qe({},n),{},{isFocused:!0});case"blur":return qe(qe({},n),{},{isFocused:!1});case"openDialog":return qe(qe({},Vl),{},{isFileDialogActive:!0});case"closeDialog":return qe(qe({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,s=e.draggedFiles;return qe(qe({},n),{},{draggedFiles:s,isDragActive:t});case"setFiles":return qe(qe({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return qe({},Vl);default:return n}}function rf(){}function Jw(n){let e;const t=new Set,s=(l,u)=>{const h=typeof l=="function"?l(e):l;if(h!==e){const d=e;e=u?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,i=(l,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function f(){const g=u(e);if(!h(d,g)){const p=d;l(d=g,p)}}return t.add(f),()=>t.delete(f)},c={setState:s,getState:r,subscribe:(l,u,h)=>u||h?i(l,u,h):(t.add(l),()=>t.delete(l)),destroy:()=>t.clear()};return e=n(s,r,c),c}const ek=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),of=ek?b.useEffect:b.useLayoutEffect;function tk(n){const e=typeof n=="function"?Jw(n):n,t=(s=e.getState,r=Object.is)=>{const[,i]=b.useReducer(m=>m+1,0),o=e.getState(),a=b.useRef(o),c=b.useRef(s),l=b.useRef(r),u=b.useRef(!1),h=b.useRef();h.current===void 0&&(h.current=s(o));let d,f=!1;(a.current!==o||c.current!==s||l.current!==r||u.current)&&(d=s(o),f=!r(h.current,d)),of(()=>{f&&(h.current=d),a.current=o,c.current=s,l.current=r,u.current=!1});const g=b.useRef(o);of(()=>{const m=()=>{try{const T=e.getState(),w=c.current(T);l.current(h.current,w)||(a.current=T,h.current=w,i())}catch{u.current=!0,i()}},_=e.subscribe(m);return e.getState()!==g.current&&m(),_},[]);const p=f?d:h.current;return b.useDebugValue(p),p};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const s=[t,e];return{next(){const r=s.length<=0;return{value:s.shift(),done:r}}}},t}const nk=n=>(e,t,s)=>{const r=s.subscribe;return s.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let h=o(s.getState());l=d=>{const f=o(d);if(!u(h,f)){const g=h;a(h=f,g)}},c!=null&&c.fireImmediately&&a(h,h)}return r(l)},n(e,t,s)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var sk=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var rk=sk;function af(n){return rk(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var em=function(e){var t,s;return!(af(e)===!1||(t=e.constructor,typeof t!="function")||(s=t.prototype,af(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ik=em,Bu=function(e){return ik(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ok=function(e,t,s){for(var r in e)if(t.call(s,e[r],r,e)===!1)break},ak=Bu,ck=ok;function tm(n,e){for(var t=arguments.length,s=0;++s<t;){var r=arguments[s];Ul(r)&&ck(r,lk,n)}return n}function lk(n,e){if(uk(e)){var t=this[e];Ul(n)&&Ul(t)?tm(t,n):this[e]=n}}function Ul(n){return ak(n)&&!Array.isArray(n)}function uk(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var hk=tm;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var dk=function(n,e,t,s,r){if(!fk(n)||!e)return n;if(e=ea(e),t&&(e+="."+ea(t)),s&&(e+="."+ea(s)),r&&(e+="."+ea(r)),e in n)return n[e];for(var i=e.split("."),o=i.length,a=-1;n&&++a<o;){for(var c=i[a];c[c.length-1]==="\\";)c=c.slice(0,-1)+"."+i[++a];n=n[c]}return n};function fk(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function ea(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var pk=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,s=Object(n),r=arguments.length,i=0;++i<r;)for(var o=Object(arguments[i]),a=Object.getOwnPropertySymbols(o),c=0;c<a.length;c++){var l=a[c];t.call(o,l)&&(s[l]=o[l])}return s},mk=Bu,gk=pk,_k=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");cf(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];vk(t)&&(t=bk(t)),cf(t)&&(yk(n,t),gk(n,t))}return n};function yk(n,e){for(var t in e)xk(e,t)&&(n[t]=e[t])}function vk(n){return n&&typeof n=="string"}function bk(n){var e={};for(var t in n)e[t]=n[t];return e}function cf(n){return n&&typeof n=="object"||mk(n)}function xk(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var wk=_k,kk=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var s=wk({sep:"."},e),r=s.quotes||['"',"'","`"],i;s.brackets===!0?i={"<":">","(":")","[":"]","{":"}"}:s.brackets&&(i=s.brackets);var o=[],a=[],c=[""],l=s.sep,u=n.length,h=-1,d;function f(){if(i&&a.length)return i[a[a.length-1]]}for(;++h<u;){var g=n[h],p=n[h+1],m={val:g,idx:h,arr:c,str:n};if(o.push(m),g==="\\"){m.val=Ek(s,n,h)===!0?g+p:p,m.escaped=!0,typeof t=="function"&&t(m),c[c.length-1]+=m.val,h++;continue}if(i&&i[g]){a.push(g);var _=f(),T=h+1;if(n.indexOf(_,T+1)!==-1)for(;a.length&&T<u;){var w=n[++T];if(w==="\\"){w++;continue}if(r.indexOf(w)!==-1){T=Bl(n,w,T+1);continue}if(_=f(),a.length&&n.indexOf(_,T+1)===-1)break;if(i[w]){a.push(w);continue}_===w&&a.pop()}if(d=T,d===-1){c[c.length-1]+=g;continue}g=n.slice(h,d+1),m.val=g,m.idx=h=d}if(r.indexOf(g)!==-1){if(d=Bl(n,g,h+1),d===-1){c[c.length-1]+=g;continue}Tk(g,s)===!0?g=n.slice(h,d+1):g=n.slice(h+1,d),m.val=g,m.idx=h=d}if(typeof t=="function"&&(t(m,o),g=m.val,h=m.idx),m.val===l&&m.split!==!1){c.push("");continue}c[c.length-1]+=m.val}return c};function Bl(n,e,t,s){var r=n.indexOf(e,t);return n.charAt(r-1)==="\\"?Bl(n,e,r+1):r}function Tk(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Ek(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ck=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},lf=Ck,Sk=function(e){lf(e)||(e={});for(var t=arguments.length,s=1;s<t;s++){var r=arguments[s];lf(r)&&Ok(e,r)}return e};function Ok(n,e){for(var t in e)Ak(e,t)&&(n[t]=e[t])}function Ak(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Rk=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Dk=kk,Pk=Sk,uf=em,hf=Rk,Mk=function(n,e,t){if(!hf(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var s=Dk(e,{sep:".",brackets:!0}).filter(Nk),r=s.length,i=-1,o=n;++i<r;){var a=s[i];if(i!==r-1){hf(o[a])||(o[a]={}),o=o[a];continue}uf(o[a])&&uf(t)?o[a]=Pk({},o[a],t):o[a]=t}return n};function Nk(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var ol=Bu,df=hk,Ik=dk,ff=Mk,$k=function(e,t,s){if(!ol(e))throw new TypeError("expected an object");if(typeof t!="string"||s==null)return df.apply(null,arguments);if(typeof s=="string")return ff(e,t,s),e;var r=Ik(e,t);return ol(s)&&ol(r)&&(s=df({},r,s)),ff(e,t,s),e};const Fk=U_($k),Wu=(...n)=>n.filter(Boolean).join(".");function Lk(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function jk(n,e){return Object.entries(fb(n,e)).reduce((t,[,{value:s,disabled:r,key:i}])=>(t[i]=r?void 0:s,t),{})}function zk(n,e){const t=b.useRef();return(e?Wi:To)(n,t.current)||(t.current=n),t.current}function nm(n,e){return b.useMemo(n,zk(e,!0))}function Vk(n){const e=b.useRef(null),t=b.useRef(null),s=b.useRef(!0);return b.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),b.useEffect(()=>{if(s.current){s.current=!1;return}let r;const i=e.current,o=()=>{n&&(i.style.removeProperty("height"),i.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};i.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return i.style.height=a+"px",n||(i.style.overflow="hidden",r=window.setTimeout(()=>i.style.height="0px",50)),()=>{i.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const Uk=n=>{const[e,t]=b.useState(n.getVisiblePaths());return b.useEffect(()=>{t(n.getVisiblePaths());const s=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:To});return()=>s()},[n]),e};function Bk(n,e,t){return n.useStore(r=>{const i=de(de({},t),r.data);return jk(i,e)},To)}function sm(n=3){const e=b.useRef(null),t=b.useRef(null),[s,r]=b.useState(!1),i=b.useCallback(()=>r(!0),[]),o=b.useCallback(()=>r(!1),[]);return b.useLayoutEffect(()=>{if(s){const{bottom:a,top:c,left:l}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),h=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=l+"px",h==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-c+n+"px"}},[n,s]),{popinRef:e,wrapperRef:t,shown:s,show:i,hide:o}}Zx([Kx]);const Wk={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Ot.extend({color:()=>n=>bt(n).isValid()});const qk=n=>Ot().color().test(n);function rm(n,{format:e,hasAlpha:t,isString:s}){const r=Wk[e]+(s&&e!=="hex"?"String":""),i=n[r]();return typeof i=="object"&&!t?pb(i,["a"]):i}const im=(n,e)=>{const t=bt(n);if(!t.isValid())throw Error("Invalid color");return rm(t,e)},Hk=(n,e)=>rm(bt(n),de(de({},e),{},{isString:!0,format:"hex"})),Yk=({value:n})=>{const e=Xx(n),t=e==="name"?"hex":e,s=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:s,isString:typeof n=="string"};return{value:im(n,r),settings:r}};var Gk=Object.freeze({__proto__:null,schema:qk,sanitize:im,format:Hk,normalize:Yk});const Xk=ce("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Zk=ce("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Kk=ce("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function pf(n,e){return e!=="rgb"?bt(n).toRgb():n}function Qk({value:n,displayValue:e,settings:t,onUpdate:s}){const{emitOnEditStart:r,emitOnEditEnd:i}=yt(),{format:o,hasAlpha:a}=t,{popinRef:c,wrapperRef:l,shown:u,show:h,hide:d}=sm(),f=b.useRef(0),[g,p]=b.useState(()=>pf(n,o)),m=a?rw:ow,_=()=>{p(pf(n,o)),h(),r()},T=()=>{d(),i(),window.clearTimeout(f.current)},w=()=>{f.current=window.setTimeout(T,500)};return b.useEffect(()=>()=>window.clearTimeout(f.current),[]),N.createElement(N.Fragment,null,N.createElement(Xk,{ref:c,active:u,onClick:()=>_(),style:{color:e}}),u&&N.createElement(Iu,null,N.createElement(C0,{onPointerUp:T}),N.createElement(Kk,{ref:l,onMouseEnter:()=>window.clearTimeout(f.current),onMouseLeave:y=>y.buttons===0&&w()},N.createElement(m,{color:g,onChange:s}))))}function Jk(){const{value:n,displayValue:e,label:t,onChange:s,onUpdate:r,settings:i}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,t),N.createElement(Zk,null,N.createElement(Qk,{value:n,displayValue:e,onChange:s,onUpdate:r,settings:i}),N.createElement(Nu,{value:e,onChange:s,onUpdate:r})))}var eT=de({component:Jk},Gk);function tT(){const{label:n,displayValue:e,onUpdate:t,settings:s}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(Fu,{value:e,settings:s,onUpdate:t}))}var nT=de({component:tT},N0(["x","y","z"]));const sT=ce("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),rT=ce("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function iT({value:n,settings:e,onUpdate:t}){const s=b.useRef(),r=b.useRef(0),i=b.useRef(0),o=b.useRef(1),[a,c]=b.useState(!1),[l,u]=b.useState(!1),[h,d]=O0(),f=b.useRef(null),g=b.useRef(null);b.useLayoutEffect(()=>{if(a){const{top:O,left:L,width:z,height:W}=f.current.getBoundingClientRect();g.current.style.left=L+z/2+"px",g.current.style.top=O+W/2+"px"}},[a]);const{keys:[p,m],joystick:_}=e,T=_==="invertY"?1:-1,{[p]:{step:w},[m]:{step:y}}=e,v=Wn("sizes","joystickWidth"),k=Wn("sizes","joystickHeight"),E=parseFloat(v)*.8/2,x=parseFloat(k)*.8/2,C=b.useCallback(()=>{s.current||(u(!0),r.current&&d({x:r.current*E}),i.current&&d({y:i.current*-x}),s.current=window.setInterval(()=>{t(O=>{const L=w*r.current*o.current,z=T*y*i.current*o.current;return Array.isArray(O)?{[p]:O[0]+L,[m]:O[1]+z}:{[p]:O[p]+L,[m]:O[m]+z}})},16))},[E,x,t,d,w,y,p,m,T]),S=b.useCallback(()=>{window.clearTimeout(s.current),s.current=void 0,u(!1)},[]);b.useEffect(()=>{function O(L){o.current=d0(L)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(s.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const R=Co(({first:O,active:L,delta:[z,W],movement:[B,V]})=>{O&&c(!0);const U=xs(B,-E,E),X=xs(V,-x,x);r.current=Math.abs(B)>Math.abs(U)?Math.sign(B-U):0,i.current=Math.abs(V)>Math.abs(X)?Math.sign(X-V):0;let K=n[p],Q=n[m];L?(r.current||(K+=z*w*o.current,d({x:U})),i.current||(Q-=T*W*y*o.current,d({y:X})),r.current||i.current?C():S(),t({[p]:K,[m]:Q})):(c(!1),r.current=0,i.current=0,d({x:0,y:0}),S())});return N.createElement(sT,Je({ref:f},R()),a&&N.createElement(Iu,null,N.createElement(rT,{ref:g,isOutOfBounds:l},N.createElement("div",null),N.createElement("span",{ref:h}))))}const oT=ce("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function aT(){const{label:n,displayValue:e,onUpdate:t,settings:s}=yt();return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(oT,{withJoystick:!!s.joystick},s.joystick&&N.createElement(iT,{value:e,settings:s,onUpdate:t}),N.createElement(Fu,{value:e,settings:s,onUpdate:t})))}const cT=["joystick"],om=N0(["x","y"]),lT=n=>{let{joystick:e=!0}=n,t=De(n,cT);const{value:s,settings:r}=om.normalize(t);return{value:s,settings:de(de({},r),{},{joystick:e})}};var uT=de(de({component:aT},om),{},{normalize:lT});const hT=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},dT=(n,e)=>typeof e=="object"&&"image"in e,fT=({image:n})=>({value:n});var pT=Object.freeze({__proto__:null,sanitize:hT,schema:dT,normalize:fT});const mT=ce("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),gT=ce("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),_T=ce("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),yT=ce("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),vT=ce("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),bT=ce("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function xT(){const{label:n,value:e,onUpdate:t,disabled:s}=yt(),{popinRef:r,wrapperRef:i,shown:o,show:a,hide:c}=sm(),l=b.useCallback(g=>{g.length&&t(g[0])},[t]),u=b.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:d,isDragAccept:f}=J0({maxFiles:1,accept:"image/*",onDrop:l,disabled:s});return N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(mT,null,N.createElement(_T,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:c,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&N.createElement(Iu,null,N.createElement(C0,{onPointerUp:c,style:{cursor:"pointer"}}),N.createElement(yT,{ref:i,style:{backgroundImage:`url(${e})`}})),N.createElement(gT,h({isDragAccept:f}),N.createElement("input",d()),N.createElement(vT,null,f?"drop image":"click or drop")),N.createElement(bT,{onClick:u,disabled:!e})))}var wT=de({component:xT},pT);const mf=Ot().number(),kT=(n,e)=>Ot().array().length(2).every.number().test(n)&&Ot().schema({min:mf,max:mf}).test(e),Da=n=>({min:n[0],max:n[1]}),am=(n,{bounds:[e,t]},s)=>{const r=Array.isArray(n)?Da(n):n,i={min:s[0],max:s[1]},{min:o,max:a}=de(de({},i),r);return[xs(Number(o),e,Math.max(e,a)),xs(Number(a),Math.min(t,o),t)]},TT=({value:n,min:e,max:t})=>{const s={min:e,max:t},r=M0(Da(n),{min:s,max:s}),i=[e,t],o=de(de({},r),{},{bounds:i});return{value:am(Da(n),o,n),settings:o}};var ET=Object.freeze({__proto__:null,schema:kT,format:Da,sanitize:am,normalize:TT});const CT=["value","bounds","onDrag"],ST=["bounds"],OT=ce("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function AT(n){let{value:e,bounds:[t,s],onDrag:r}=n,i=De(n,CT);const o=b.useRef(null),a=b.useRef(null),c=b.useRef(null),l=b.useRef(0),u=Wn("sizes","scrubberWidth"),h=Co(({event:g,first:p,xy:[m],movement:[_],memo:T={}})=>{if(p){const{width:y,left:v}=o.current.getBoundingClientRect();l.current=y-parseFloat(u);const k=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===c.current;T.pos=Ca((m-v)/y,t,s);const E=Math.abs(T.pos-e.min)-Math.abs(T.pos-e.max);T.key=E<0||E===0&&T.pos<=e.min?"min":"max",k&&(T.pos=e[T.key])}const w=T.pos+Ca(_/l.current,0,s-t);return r({[T.key]:nx(w,i[T.key])}),T}),d=`calc(${Ea(e.min,t,s)} * (100% - ${u} - 8px) + 4px)`,f=`calc(${1-Ea(e.max,t,s)} * (100% - ${u} - 8px) + 4px)`;return N.createElement(R0,Je({ref:o},h()),N.createElement(A0,null,N.createElement(D0,{style:{left:d,right:f}})),N.createElement(Dl,{position:"left",ref:a,style:{left:d}}),N.createElement(Dl,{position:"right",ref:c,style:{right:f}}))}function RT(){const{label:n,displayValue:e,onUpdate:t,settings:s}=yt(),r=De(s,ST);return N.createElement(N.Fragment,null,N.createElement(sn,{input:!0},N.createElement(mn,null,n),N.createElement(OT,null,N.createElement(AT,Je({value:e},s,{onDrag:t})),N.createElement(Fu,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var DT=de({component:RT},ET);const PT=()=>{const n=new Map;return{on:(e,t)=>{let s=n.get(e);s===void 0&&(s=new Set,n.set(e,s)),s.add(t)},off:(e,t)=>{const s=n.get(e);s!==void 0&&(s.delete(t),s.size===0&&n.delete(e))},emit:(e,...t)=>{const s=n.get(e);if(s!==void 0)for(const r of s)r(...t)}}},MT=["type","value"],NT=["onChange","transient","onEditStart","onEditEnd"],IT=function(){const e=tk(nk(()=>({data:{}}))),t=PT();this.storeId=db(),this.useStore=e;const s={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),c=[];Object.entries(s).forEach(([u,h])=>{h.render&&a.some(d=>d.indexOf(u)===0)&&!h.render(this.get)&&c.push(u+".")});const l=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&c.every(h=>u.indexOf(h)===-1)&&(!o[u].render||o[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const c=a.data;return o.forEach(l=>{if(l in c){const u=c[l];u.__refCount--,u.__refCount===0&&u.type in un&&delete c[l]}}),{data:c}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>s[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,h])=>{let d=l[u];if(d){const{type:f,value:g}=h,p=De(h,MT);f!==d.type?Bn(He.INPUT_TYPE_OVERRIDE,f):((d.__refCount===0||a)&&Object.assign(d,p),d.__refCount++)}else l[u]=de(de({},h),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(o,a,c)=>{e.setState(l=>{const u=l.data;return Fd(u[o],a,o,this,c),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(c=>{const l=c.data;return l[o].settings=de(de({},l[o].settings),a),{data:l}})},this.disableInputAtPath=(o,a)=>{e.setState(c=>{const l=c.data;return l[o].disabled=a,{data:l}})},this.set=(o,a)=>{e.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,h])=>{try{Fd(l[u],h,void 0,void 0,a)}catch{}}),{data:l}})},this.getInput=o=>{try{return this.getData()[o]}catch{Bn(He.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,de(de({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,de(de({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const c=`onEditStart:${o}`;return t.on(c,a),()=>t.off(c,a)},this.subscribeToEditEnd=(o,a)=>{const c=`onEditEnd:${o}`;return t.on(c,a),()=>t.off(c,a)};const i=(o,a,c)=>{const l={};return Object.entries(o).forEach(([u,h])=>{if(u==="")return Bn(He.EMPTY_KEY);let d=Wu(a,u);if(h.type===un.FOLDER){const f=i(h.schema,d,c);Object.assign(l,f),d in s||(s[d]=h.settings)}else if(u in c)Bn(He.DUPLICATE_KEYS,u,d,c[u].path);else{const f=bb(h,u,d,l);if(f){const{type:g,options:p,input:m}=f,{onChange:_,transient:T,onEditStart:w,onEditEnd:y}=p,v=De(p,NT);l[d]=de(de(de({type:g},v),m),{},{fromPanel:!0}),c[u]={path:d,onChange:_,transient:T,onEditStart:w,onEditEnd:y}}else Bn(He.UNKNOWN_INPUT,d,h)}}),l};this.getDataFromSchema=o=>{const a={};return[i(o,"",a),a]}},cm=new IT,$T={collapsed:!1};function FT(n,e){return{type:un.FOLDER,schema:n,settings:de(de({},$T),e)}}const gf=n=>"__levaInput"in n,LT=(n,e)=>{const t={},s=e?e.toLowerCase():null;return n.forEach(r=>{const[i,o]=Lk(r);(!s||i.toLowerCase().indexOf(s)>-1)&&Fk(t,o,{[i]:{__levaInput:!0,path:r}})}),t},jT=["type","label","path","valueKey","value","settings","setValue","disabled"];function zT(n){let{type:e,label:t,path:s,valueKey:r,value:i,settings:o,setValue:a,disabled:c}=n,l=De(n,jT);const{displayValue:u,onChange:h,onUpdate:d}=S0({type:e,value:i,settings:o,setValue:a}),f=Js[e].component;return f?N.createElement(_0.Provider,{value:de({key:r,path:s,id:""+s,label:t,displayValue:u,value:i,onChange:h,onUpdate:d,settings:o,setValue:a,disabled:c},l)},N.createElement(zb,{disabled:c},N.createElement(f,null))):(Bn(He.NO_COMPONENT_FOR_TYPE,e,s),null)}const VT=ce("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function UT({onClick:n,settings:e,label:t}){const s=Eo();return N.createElement(sn,null,N.createElement(VT,{disabled:e.disabled,onClick:()=>n(s.get)},t))}const BT=ce("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),WT=ce("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),qT=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,s=e;return typeof e.opts=="object"&&(s.label!==void 0&&(t=e.label),s=e.opts),{label:t,opts:s}};function HT(n){const{label:e,opts:t}=qT(n),s=Eo();return N.createElement(sn,{input:!!e},e&&N.createElement(mn,null,e),N.createElement(BT,null,Object.entries(t).map(([r,i])=>N.createElement(WT,{key:r,onClick:()=>i(s.get)},r))))}const YT=ce("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),lm=100;function GT(n,e){n.push(e),n.length>lm&&n.shift()}const XT=b.forwardRef(function({initialValue:n},e){const t=Wn("colors","highlight3"),s=Wn("colors","elevation2"),r=Wn("colors","highlight1"),[i,o]=b.useMemo(()=>[bt(r).alpha(.4).toRgbString(),bt(r).alpha(.1).toRgbString()],[r]),a=b.useRef([n]),c=b.useRef(n),l=b.useRef(n),u=b.useRef(),h=b.useCallback((g,p)=>{if(!g)return;const{width:m,height:_}=g,T=new Path2D,w=m/lm,y=_*.05;for(let E=0;E<a.current.length;E++){const x=Ea(a.current[E],c.current,l.current),C=w*E,S=_-x*(_-y*2)-y;T.lineTo(C,S)}p.clearRect(0,0,m,_);const v=new Path2D(T);v.lineTo(w*(a.current.length+1),_),v.lineTo(0,_),v.lineTo(0,0);const k=p.createLinearGradient(0,0,0,_);k.addColorStop(0,i),k.addColorStop(1,o),p.fillStyle=k,p.fill(v),p.strokeStyle=s,p.lineJoin="round",p.lineWidth=14,p.stroke(T),p.strokeStyle=t,p.lineWidth=2,p.stroke(T)},[t,s,i,o]),[d,f]=Xb(h);return b.useImperativeHandle(e,()=>({frame:g=>{(c.current===void 0||g<c.current)&&(c.current=g),(l.current===void 0||g>l.current)&&(l.current=g),GT(a.current,g),u.current=requestAnimationFrame(()=>h(d.current,f.current))}}),[d,f,h]),b.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),N.createElement(YT,{ref:d})}),_f=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),ZT=b.forwardRef(function({initialValue:n},e){const[t,s]=b.useState(_f(n));return b.useImperativeHandle(e,()=>({frame:r=>s(_f(r))}),[]),N.createElement("div",null,t)});function yf(n){return typeof n=="function"?n():n.current}function KT({label:n,objectOrFn:e,settings:t}){const s=b.useRef(),r=b.useRef(yf(e));return b.useEffect(()=>{const i=window.setInterval(()=>{var o;document.hidden||(o=s.current)===null||o===void 0||o.frame(yf(e))},t.interval);return()=>window.clearInterval(i)},[e,t.interval]),N.createElement(sn,{input:!0},N.createElement(mn,{align:"top"},n),t.graph?N.createElement(XT,{ref:s,initialValue:r.current}):N.createElement(ZT,{ref:s,initialValue:r.current}))}const QT=["type","label","key"],JT={[un.BUTTON]:UT,[un.BUTTON_GROUP]:HT,[un.MONITOR]:KT},eE=N.memo(({path:n})=>{const[e,{set:t,setSettings:s,disable:r,storeId:i,emitOnEditStart:o,emitOnEditEnd:a}]=Kb(n);if(!e)return null;const{type:c,label:l,key:u}=e,h=De(e,QT);if(c in un){const d=JT[c];return N.createElement(d,Je({label:l,path:n},h))}return c in Js?N.createElement(zT,Je({key:i+n,type:c,label:l,storeId:i,path:n,valueKey:u,setValue:t,setSettings:s,disable:r,emitOnEditStart:o,emitOnEditEnd:a},h)):(rb(He.UNSUPPORTED_INPUT,c,n),null)});function tE({toggle:n,toggled:e,name:t}){return N.createElement(Fb,{onClick:()=>n()},N.createElement($u,{toggled:e}),N.createElement("div",null,t))}const nE=({name:n,path:e,tree:t})=>{const s=Eo(),r=Wu(e,n),{collapsed:i,color:o}=s.getFolderSettings(r),[a,c]=b.useState(!i),l=b.useRef(null),u=Wn("colors","folderWidgetColor"),h=Wn("colors","folderTextColor");return b.useLayoutEffect(()=>{l.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),l.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,u,h]),N.createElement(Sa,{ref:l},N.createElement(tE,{name:n,toggled:a,toggle:()=>c(d=>!d)}),N.createElement(um,{parent:r,tree:t,toggled:a}))},um=N.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:s,tree:r,toggled:i})=>{const{wrapperRef:o,contentRef:a}=Vk(i),c=Eo(),l=([h,d])=>{var f;return(gf(d)?(f=c.getInput(d.path))===null||f===void 0?void 0:f.order:c.getFolderSettings(Wu(s,h)).order)||0},u=Object.entries(r).sort((h,d)=>l(h)-l(d));return N.createElement(Al,{ref:o,isRoot:n,fill:e,flat:t},N.createElement(k0,{ref:a,isRoot:n,toggled:i},u.map(([h,d])=>gf(d)?N.createElement(eE,{key:d.path,valueKey:d.valueKey,path:d.path}):N.createElement(nE,{key:h,name:h,path:s,tree:d}))))}),sE=ce("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${E0}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),hm=40,Pa=ce("i",{$flexCenter:"",width:hm,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),rE=ce("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),iE=ce("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Pa}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),oE=ce("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),aE=ce("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:hm}}}}),cE=N.forwardRef(({setFilter:n,toggle:e},t)=>{const[s,r]=b.useState(""),i=b.useMemo(()=>h0(n,250),[n]),o=()=>{n(""),r("")},a=c=>{const l=c.currentTarget.value;e(!0),r(l)};return b.useEffect(()=>{i(s)},[s,i]),N.createElement(N.Fragment,null,N.createElement(oE,{ref:t,value:s,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:a}),N.createElement(Pa,{onClick:()=>o(),style:{visibility:s?"visible":"hidden"}},N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},N.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function lE({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:s,toggle:r,toggled:i,title:o,drag:a,filterEnabled:c,from:l}){const[u,h]=b.useState(!1),d=b.useRef(null);b.useEffect(()=>{var g,p;u?(g=d.current)===null||g===void 0||g.focus():(p=d.current)===null||p===void 0||p.blur()},[u]);const f=Co(({offset:[g,p],first:m,last:_})=>{e({x:g,y:p}),m&&t({x:g,y:p}),_&&s({x:g,y:p})},{filterTaps:!0,from:({offset:[g,p]})=>[(l==null?void 0:l.x)||g,(l==null?void 0:l.y)||p]});return b.useEffect(()=>{const g=p=>{p.key==="L"&&p.shiftKey&&p.metaKey&&h(m=>!m)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),N.createElement(N.Fragment,null,N.createElement(rE,{mode:a?"drag":void 0},N.createElement(Pa,{active:!i,onClick:()=>r()},N.createElement($u,{toggled:i,width:12,height:8})),N.createElement(aE,Je({},a?f():{},{drag:a,filterEnabled:c}),o===void 0&&a?N.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},N.createElement("circle",{cx:"2",cy:"2",r:"2"}),N.createElement("circle",{cx:"14",cy:"2",r:"2"}),N.createElement("circle",{cx:"26",cy:"2",r:"2"}),N.createElement("circle",{cx:"2",cy:"12",r:"2"}),N.createElement("circle",{cx:"14",cy:"12",r:"2"}),N.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),c&&N.createElement(Pa,{active:u,onClick:()=>h(g=>!g)},N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},N.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),N.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),N.createElement(iE,{toggled:u},N.createElement(cE,{ref:d,setFilter:n,toggle:r})))}const uE=["store","hidden","theme","collapsed"];function hE(n){let{store:e,hidden:t=!1,theme:s,collapsed:r=!1}=n,i=De(n,uE);const o=nm(()=>Db(s),[s]),[a,c]=b.useState(!r),l=typeof r=="object"?!r.collapsed:a,u=b.useMemo(()=>typeof r=="object"?h=>{typeof h=="function"?r.onChange(!h(!r.collapsed)):r.onChange(!h)}:c,[r]);return!e||t?null:N.createElement(Mu.Provider,{value:o},N.createElement(dE,Je({store:e},i,{toggled:l,setToggle:u,rootClass:o.className})))}const dE=N.memo(({store:n,rootClass:e,fill:t=!1,flat:s=!1,neverHide:r=!1,oneLineLabels:i=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:c,setToggle:l})=>{var u,h;const d=Uk(n),[f,g]=b.useState(""),p=b.useMemo(()=>LT(d,f),[d,f]),[m,_]=O0(),T=r||d.length>0,w=typeof o=="object"&&o.title||void 0,y=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,v=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,k=typeof o=="object"&&o.position||void 0,E=typeof o=="object"&&o.onDrag||void 0,x=typeof o=="object"&&o.onDragStart||void 0,C=typeof o=="object"&&o.onDragEnd||void 0;return N.useEffect(()=>{_({x:k==null?void 0:k.x,y:k==null?void 0:k.y})},[k,_]),Rb(),N.createElement(v0.Provider,{value:{hideCopyButton:a}},N.createElement(sE,{ref:m,className:e,fill:t,flat:s,oneLineLabels:i,hideTitleBar:!o,style:{display:T?"block":"none"}},o&&N.createElement(lE,{onDrag:S=>{_(S),E==null||E(S)},onDragStart:S=>x==null?void 0:x(S),onDragEnd:S=>C==null?void 0:C(S),setFilter:g,toggle:S=>l(R=>S??!R),toggled:c,title:w,drag:y,filterEnabled:v,from:k}),T&&N.createElement(y0.Provider,{value:n},N.createElement(um,{isRoot:!0,fill:t,flat:s,tree:p,toggled:c}))))}),fE=["isRoot"];let Ma=!1,zs=null;function dm(n){let{isRoot:e=!1}=n,t=De(n,fE);return b.useEffect(()=>(Ma=!0,!e&&zs&&(zs.remove(),zs=null),()=>{e||(Ma=!1)}),[e]),N.createElement(hE,Je({store:cm},t))}function pE(n){b.useEffect(()=>{n&&!Ma&&(zs||(zs=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(zs),wb(N.createElement(dm,{isRoot:!0}),zs))),Ma=!0)},[n])}function mE(n,e,t,s,r){let i,o,a,c,l;return typeof n=="string"?(o=n,i=e,Array.isArray(t)?l=t:t&&("store"in t?(c=t,l=s):(a=t,Array.isArray(s)?l=s:(c=s,l=r)))):(i=n,Array.isArray(e)?l=e:(c=e,l=t)),{schema:i,folderName:o,folderSettings:a,hookSettings:c,deps:l||[]}}function gE(n,e,t,s,r){const{folderName:i,schema:o,folderSettings:a,hookSettings:c,deps:l}=mE(n,e,t,s,r),u=typeof o=="function",h=b.useRef(!1),d=b.useRef(!0),f=nm(()=>{h.current=!0;const R=typeof o=="function"?o():o;return i?{[i]:FT(R,a)}:R},l),g=!(c!=null&&c.store);pE(g);const[p]=b.useState(()=>(c==null?void 0:c.store)||cm),[m,_]=b.useMemo(()=>p.getDataFromSchema(f),[p,f]),[T,w,y,v,k]=b.useMemo(()=>{const R=[],O=[],L={},z={},W={};return Object.values(_).forEach(({path:B,onChange:V,onEditStart:U,onEditEnd:X,transient:K})=>{R.push(B),V?(L[B]=V,K||O.push(B)):O.push(B),U&&(z[B]=U),X&&(W[B]=X)}),[R,O,L,z,W]},[_]),E=b.useMemo(()=>p.orderPaths(T),[T,p]),x=Bk(p,w,m),C=b.useCallback(R=>{const O=Object.entries(R).reduce((L,[z,W])=>Object.assign(L,{[_[z].path]:W}),{});p.set(O,!1)},[p,_]),S=b.useCallback(R=>p.get(_[R].path),[p,_]);return b.useEffect(()=>{const R=!d.current&&h.current;return p.addData(m,R),d.current=!1,h.current=!1,()=>p.disposePaths(E)},[p,E,m]),b.useEffect(()=>{const R=[];return Object.entries(y).forEach(([O,L])=>{L(p.get(O),O,de({initial:!0,get:p.get},p.getInput(O)));const z=p.useStore.subscribe(W=>{const B=W.data[O];return[B.disabled?void 0:B.value,B]},([W,B])=>L(W,O,de({initial:!1,get:p.get},B)),{equalityFn:To});R.push(z)}),()=>R.forEach(O=>O())},[p,y]),b.useEffect(()=>{const R=[];return Object.entries(v).forEach(([O,L])=>R.push(p.subscribeToEditStart(O,L))),Object.entries(k).forEach(([O,L])=>R.push(p.subscribeToEditEnd(O,L))),()=>R.forEach(O=>O())},[v,k,p]),u?[x,C,S]:x}ns(dn.SELECT,px);ns(dn.IMAGE,wT);ns(dn.NUMBER,rx);ns(dn.COLOR,eT);ns(dn.STRING,kx);ns(dn.BOOLEAN,Rx);ns(dn.INTERVAL,DT);ns(dn.VECTOR3D,nT);ns(dn.VECTOR2D,uT);const _E={isUserDragging:!1,isUserScrolling:!1,userMovedCamera:!1,isUserScrollingOnHtmlPanel:!1},Ws=mp(n=>({..._E,setIsUserDragging:e=>n({isUserDragging:e}),setIsUserScrolling:e=>n({isUserScrolling:e}),setUserMovedCamera:e=>n({userMovedCamera:e}),setIsUserScrollingOnHtmlPanel:e=>n({isUserScrollingOnHtmlPanel:e})})),yE=()=>{const[n,e]=b.useState(""),t=b.useRef(null),{fetchData:s,setAbortRequests:r,seedQuestions:i}=Jt(y=>y),[o]=_u(y=>[y.setBudget]),{setUniverseQuestionIsOpen:a,setSidebarOpen:c,setShowCollapseButton:l}=bo(y=>({setUniverseQuestionIsOpen:y.setUniverseQuestionIsOpen,setSidebarOpen:y.setSidebarOpen,setShowCollapseButton:y.setShowCollapseButton})),u=B_(y=>y.resetAiSummaryAnswer),[h,d]=b.useState([]);b.useEffect(()=>{i&&d(T(i).slice(0,4))},[i]),b.useEffect(()=>{t.current&&t.current.focus()},[]);const f=async y=>{y&&(u(),a(),c(!0),l(!0)),await s(o,r,y)},g=!!n.trim().length,p=async y=>{y.keyCode===13&&y.shiftKey===!1&&g&&(y.preventDefault(),f(n))},m=async y=>{e(y),await f(y)},_=()=>{a(),c(!0),l(!0)},T=y=>{const v=[...y];let k=v.length-1;for(;k>0;){const E=Math.floor(Math.random()*(k+1));[v[k],v[E]]=[v[E],v[k]],k-=1}return v},w=!!n&&n.trim().length>0;return P.jsxs(xE,{children:["Ideas have shapes",P.jsxs(bE,{onKeyDown:p,py:12,tabIndex:-1,children:[P.jsx(vE,{ref:t,onChange:y=>e(y.target.value),placeholder:"What do you want to know?",value:n}),P.jsx(wE,{color:"secondary",disabled:!w,onClick:()=>f(n),variant:"contained",children:w?P.jsxs(P.Fragment,{children:["Search ",P.jsx(Uh,{})]}):P.jsx(Uh,{})})]}),h.length>0&&P.jsx(TE,{children:h.map(y=>P.jsxs(EE,{onClick:()=>m(y),children:[P.jsx(iy,{}),y]},y))}),P.jsx(kE,{"data-testid":"explore-graph-btn",onClick:_,startIcon:P.jsx(oy,{}),children:"Explore Graph"})]})},vE=ye(my).attrs({maxRows:3})`
  background: ${oe.BG1};
  max-width: 700px;
  width: 700px;
  color: ${oe.white};
  padding: 0 16px 0 16px;
  overflow-y: auto !important;
  border: none;
  resize: none;
  outline: none;
  border-radius: 12px;
  font-family: 'Barlow';
  display: flex;
  align-items: center;
  text-align: justify;
  font-size: 16px;
  font-weight: 400;

  &:-moz-placeholder, /* Firefox 18- */
  &::-moz-placeholder, /* Firefox 19+ */
  &:-ms-input-placeholder, /* IE 10+ */
  &::-webkit-input-placeholder, /* Webkit based */
  &::placeholder {
    color: #0bf;
  }

  &::-webkit-scrollbar {
    width: 3px;
  }

  &::-webkit-scrollbar-track {
    border-radius: 12px;
    margin: 13px;
    overflow-y: hidden;
  }
`,bE=ye(Me)`
  position: relative;
  margin-top: 30px;
  background: ${oe.BG1};
  max-width: 702px;
  width: 702px;
  color: ${oe.white};
  min-height: 150px;
  border: 1px solid ${oe.modalShield};
  resize: none;
  outline: none;
  border-radius: 12px;
  box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.5);
`,xE=ye(Me)`
  background: #16161de3;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  color: #fff;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-style: normal;
  font-weight: 700;
  line-height: 16px;
  font-family: 'Barlow';
`,wE=ye(gp)`
  && {
    position: absolute;
    bottom: 16px;
    right: 16px;
    height: 32px;
    border-radius: 16px;
    min-width: 32px;
  }

  &&.MuiButton-root {
    padding: 0 10px 0 12px;
  }

  svg {
    margin-top: 1px;
    width: 11px;
    height: 11px;
  }
`,kE=ye(gp)`
  && {
    position: absolute;
    bottom: 20px;
    right: 20px;
    border-radius: 16px;
  }
`,TE=ye.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-top: 20px;
  max-width: 702px;
  width: 100%;
`,EE=ye.div`
  background: ${oe.BG1};
  color: ${oe.white};
  padding: 15px 12px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  text-align: left;
  font-family: Barlow;
  font-size: 14px;
  font-weight: 400;
  gap: 10px;
  &:hover {
    background: ${oe.SEEDQUESTION_HOVER};
  }

  &:active {
    background: ${oe.SEEDQUESTION};
  }
  svg {
    width: 20px;
    height: 20px;
  }

  path {
    fill: ${oe.modalWhiteOverlayBg};
  }
`,CE=new _e(0,0,0),vf=1,SE=16777215,$i=new _e(0,0,0),bf=100,OE=600,AE=2e3,ps={x:0,y:0,z:200},fm="14.8.49",xf=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),wf=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),Wl=(n,e)=>({startTime:e,type:"setValue",value:n}),pm=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),mm=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),Er=n=>n.type==="exponentialRampToValue",Na=n=>n.type==="linearRampToValue",us=n=>Er(n)||Na(n),qu=n=>n.type==="setValue",jn=n=>n.type==="setValueCurve",Ia=(n,e,t,s)=>{const r=n[e];return r===void 0?s:us(r)||qu(r)?r.value:jn(r)?r.values[r.values.length-1]:mm(t,Ia(n,e-1,r.startTime,s),r)},kf=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:us(t)?[t.endTime,t.value]:qu(t)?[t.startTime,t.value]:jn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Ia(n,e-1,t.startTime,r)],ql=n=>n.type==="cancelAndHold",Hl=n=>n.type==="cancelScheduledValues",as=n=>ql(n)||Hl(n)?n.cancelTime:Er(n)||Na(n)?n.endTime:n.startTime,Tf=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,Ef=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),RE=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},DE=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return RE(s,r)},ta=n=>n.type==="setTarget";class PE{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=as(e);if(ql(e)||Hl(e)){const s=this._automationEvents.findIndex(i=>Hl(e)&&jn(i)?i.startTime+i.duration>=t:as(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),ql(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&us(r)){if(i!==void 0&&ta(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:jn(i)?i.startTime+i.duration:as(i),a=i===void 0?this._defaultValue:jn(i)?i.values[i.values.length-1]:i.value,c=Er(r)?Tf(t,o,a,r):Ef(t,o,a,r),l=Er(r)?xf(c,t,this._currenTime):wf(c,t,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&ta(i)&&this._automationEvents.push(Wl(this.getValue(t),t)),i!==void 0&&jn(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const d=l*h%1;u[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=pm(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>as(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&jn(r)&&as(r)+r.duration>t)return!1;const i=Er(e)?xf(e.value,e.endTime,this._currenTime):Na(e)?wf(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(jn(e)&&t+e.duration>as(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>as(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];ta(r)&&s.unshift(Wl(Ia(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>as(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&ta(i)&&(s===void 0||!us(s)||s.insertTime>e))return mm(e,Ia(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&qu(i)&&(s===void 0||!us(s)))return i.value;if(i!==void 0&&jn(i)&&(s===void 0||!us(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?DE(e,i):i.values[i.values.length-1];if(i!==void 0&&us(i)&&(s===void 0||!us(s)))return i.value;if(s!==void 0&&Er(s)){const[o,a]=kf(this._automationEvents,r,i,s,this._defaultValue);return Tf(e,o,a,s)}if(s!==void 0&&Na(s)){const[o,a]=kf(this._automationEvents,r,i,s,this._defaultValue);return Ef(e,o,a,s)}return this._defaultValue}}const ME=n=>({cancelTime:n,type:"cancelAndHold"}),NE=n=>({cancelTime:n,type:"cancelScheduledValues"}),IE=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),$E=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),FE=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),LE=()=>new DOMException("","AbortError"),jE=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},zE=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},VE=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Vr=new WeakSet,gm=new WeakMap,Hu=new WeakMap,_m=new WeakMap,Yu=new WeakMap,bc=new WeakMap,ym=new WeakMap,Yl=new WeakMap,Gl=new WeakMap,Xl=new WeakMap,vm={construct(){return vm}},UE=n=>{try{const e=new Proxy(n,vm);new e}catch{return!1}return!0},Cf=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Sf=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(Cf);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Cf)}return[t.join(";"),s]},Of=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Af=n=>{if(!UE(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},BE=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(g,p,m={credentials:"omit"})=>{const _=u.get(g);if(_!==void 0&&_.has(p))return Promise.resolve();const T=l.get(g);if(T!==void 0){const v=T.get(p);if(v!==void 0)return v}const w=i(g),y=w.audioWorklet===void 0?r(p).then(([v,k])=>{const[E,x]=Sf(v,k),C=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${x}
})})(window,'_AWGS')`;return t(C)}).then(()=>{const v=d._AWGS.pop();if(v===void 0)throw new SyntaxError;s(w.currentTime,w.sampleRate,()=>v(class{},void 0,(k,E)=>{if(k.trim()==="")throw e();const x=Gl.get(w);if(x!==void 0){if(x.has(k))throw e();Af(E),Of(E.parameterDescriptors),x.set(k,E)}else Af(E),Of(E.parameterDescriptors),Gl.set(w,new Map([[k,E]]))},w.sampleRate,void 0,void 0))}):Promise.all([r(p),Promise.resolve(n(h,h))]).then(([[v,k],E])=>{const x=f+1;f=x;const[C,S]=Sf(v,k),z=`${C};((AudioWorkletProcessor,registerProcessor)=>{${S}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${x}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([z],{type:"application/javascript; charset=utf-8"}),B=URL.createObjectURL(W);return w.audioWorklet.addModule(B,m).then(()=>{if(a(w))return w;const V=o(w);return V.audioWorklet.addModule(B,m).then(()=>V)}).then(V=>{if(c===null)throw new SyntaxError;try{new c(V,`__sac${x}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(B))});return T===void 0?l.set(g,new Map([[p,y]])):T.set(p,y),y.then(()=>{const v=u.get(g);v===void 0?u.set(g,new Set([p])):v.add(p)}).finally(()=>{const v=l.get(g);v!==void 0&&v.delete(p)}),y}},fn=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},xc=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},bm=(n,e,t,s)=>{const r=fn(n,e),i=xc(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Ao=n=>fn(ym,n),Ur=n=>{if(Vr.has(n))throw new Error("The AudioNode is already stored.");Vr.add(n),Ao(n).forEach(e=>e(!0))},xm=n=>"port"in n,Ro=n=>{if(!Vr.has(n))throw new Error("The AudioNode is not stored.");Vr.delete(n),Ao(n).forEach(e=>e(!1))},Zl=(n,e)=>{!xm(n)&&e.every(t=>t.size===0)&&Ro(n)},WE=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(g,p,m,_,T)=>{const{activeInputs:w,passiveInputs:y}=i(p),{outputs:v}=i(g),k=a(g),E=x=>{const C=c(p),S=c(g);if(x){const R=bm(y,g,m,_);n(w,g,R,!1),!T&&!h(g)&&t(S,C,m,_),d(p)&&Ur(p)}else{const R=s(w,g,m,_);e(y,_,R,!1),!T&&!h(g)&&r(S,C,m,_);const O=o(p);if(O===0)u(p)&&Zl(p,w);else{const L=f.get(p);L!==void 0&&clearTimeout(L),f.set(p,setTimeout(()=>{u(p)&&Zl(p,w)},O*1e3))}}};return l(v,[p,m,_],x=>x[0]===p&&x[1]===m&&x[2]===_,!0)?(k.add(E),u(g)?n(w,g,[m,_,E],!0):e(y,_,[g,m,E],!0),!0):!1}},qE=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},HE=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},YE=n=>(e,t)=>{n(e).add(t)},GE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},XE=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...GE,...c},h=s(l,u),d=i(l)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},vt=(n,e)=>n.context===e,ZE=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},$a=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Dn=()=>new DOMException("","IndexSizeError"),Gu=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Dn():s}})(n.getChannelData)},KE={numberOfChannels:1},QE=(n,e,t,s,r,i,o,a)=>{let c=null;return class wm{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...KE,...u};c===null&&(c=new r(1,1,44100));const g=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(g.numberOfChannels===0)throw t();return typeof g.copyFromChannel!="function"?(o(g),Gu(g)):e($a,()=>$a(g))||a(g),n.add(g),g}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===wm.prototype||n.has(u)}}},St=-34028234663852886e22,xt=-St,qn=n=>Vr.has(n),JE={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},eC=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...JE,...u},f=r(h,d),g=o(h),p=g?e():null;super(l,!1,f,p),this._audioBufferSourceNodeRenderer=p,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,g,f.playbackRate,xt,St)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Ur(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),qn(this)&&Ro(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},tC=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=vt(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},nC=n=>"playbackRate"in n,sC=n=>"frequency"in n&&"gain"in n,rC=n=>"offset"in n,iC=n=>!("frequency"in n)&&"gain"in n,oC=n=>"detune"in n&&"frequency"in n,aC=n=>"pan"in n,Tt=n=>fn(gm,n),Do=n=>fn(_m,n),Kl=(n,e)=>{const{activeInputs:t}=Tt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||Kl(i,[...e,n])}));const s=nC(n)?[n.playbackRate]:xm(n)?Array.from(n.parameters.values()):sC(n)?[n.Q,n.detune,n.frequency,n.gain]:rC(n)?[n.offset]:iC(n)?[n.gain]:oC(n)?[n.detune,n.frequency]:aC(n)?[n.pan]:[];for(const r of s){const i=Do(r);i!==void 0&&i.activeInputs.forEach(([o])=>Kl(o,e))}qn(n)&&Ro(n)},km=n=>{Kl(n.destination,[])},cC=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),lC=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(g){throw g.code===12&&g.message==="sampleRate is not in range"?t():g}if(h===null)throw s();if(!cC(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const g=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",g)};h.addEventListener("statechange",g)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),km(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},uC=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),g=d?e(a):null;super(l,!1,f,g),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},hC=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},dC=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const v=new Float32Array(1),k=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(l);let x=!1,C=[0,0,-1,0,1,0],S=[0,0,0];const R=()=>{if(x)return;x=!0;const W=s(l,256,9,0);W.onaudioprocess=({inputBuffer:B})=>{const V=[i(B,v,0),i(B,v,1),i(B,v,2),i(B,v,3),i(B,v,4),i(B,v,5)];V.some((X,K)=>X!==C[K])&&(u.setOrientation(...V),C=V);const U=[i(B,v,6),i(B,v,7),i(B,v,8)];U.some((X,K)=>X!==S[K])&&(u.setPosition(...U),S=U)},k.connect(W)},O=W=>B=>{B!==C[W]&&(C[W]=B,u.setOrientation(...C))},L=W=>B=>{B!==S[W]&&(S[W]=B,u.setPosition(...S))},z=(W,B,V)=>{const U=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:B});U.connect(k,0,W),U.start(),Object.defineProperty(U.offset,"defaultValue",{get(){return B}});const X=n({context:c},E,U.offset,xt,St);return a(X,"value",K=>()=>K.call(X),K=>Q=>{try{K.call(X,Q)}catch(F){if(F.code!==9)throw F}R(),E&&V(Q)}),X.cancelAndHoldAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.cancelAndHoldAtTime),X.cancelScheduledValues=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.cancelScheduledValues),X.exponentialRampToValueAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.exponentialRampToValueAtTime),X.linearRampToValueAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.linearRampToValueAtTime),X.setTargetAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.setTargetAtTime),X.setValueAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.setValueAtTime),X.setValueCurveAtTime=(K=>E?()=>{throw r()}:(...Q)=>{const F=K.apply(X,Q);return R(),F})(X.setValueCurveAtTime),X};return{forwardX:z(0,0,O(0)),forwardY:z(1,0,O(1)),forwardZ:z(2,-1,O(2)),positionX:z(6,0,L(0)),positionY:z(7,0,L(1)),positionZ:z(8,0,L(2)),upX:z(3,0,O(3)),upY:z(4,1,O(4)),upZ:z(5,0,O(5))}},{forwardX:d,forwardY:f,forwardZ:g,positionX:p,positionY:m,positionZ:_,upX:T,upY:w,upZ:y}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return g},get positionX(){return p},get positionY(){return m},get positionZ(){return _},get upX(){return T},get upY(){return w},get upZ(){return y}}},Fa=n=>"context"in n,Po=n=>Fa(n[0]),cr=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Rf=(n,e,[t,s],r)=>{cr(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},Df=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):cr(i,[t,s],o=>o[0]===t,r)},ii=n=>"inputs"in n,La=(n,e,t,s)=>{if(ii(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},Tm=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},fC=(n,e,t)=>xc(n,s=>s[0]===e&&s[1]===t),Em=(n,e)=>{if(!Ao(n).delete(e))throw new Error("Missing the expected event listener.")},Cm=(n,e,t)=>{const s=fn(n,e),r=xc(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},ja=(n,e,t,s)=>{ii(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Be=n=>fn(Hu,n),Yi=n=>fn(Yu,n),er=n=>Yl.has(n),da=n=>!Vr.has(n),Pf=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),al=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},za=n=>"context"in n,pC=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=za(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{za(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},mC=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Do(e),{outputs:o}=Tt(n),a=Ao(n),c=l=>{const u=Be(n),h=Yi(e);if(l){const d=Cm(i,n,t);Rf(r,n,d,!1),!s&&!er(n)&&u.connect(h,t)}else{const d=fC(r,n,t);Df(i,d,!1),!s&&!er(n)&&u.disconnect(h,t)}};return cr(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),qn(n)?Rf(r,n,[t,c],!0):Df(i,[n,t,c],!0),!0):!1},gC=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Tt(e),o=Tm(r[s],n,t);return o===null?[bm(i,n,t,s)[2],!1]:[o[2],!0]},_C=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Do(e),i=Tm(s,n,t);return i===null?[Cm(r,n,t)[1],!1]:[i[2],!0]},Xu=(n,e,t,s,r)=>{const[i,o]=gC(n,t,s,r);if(i!==null&&(Em(n,i),o&&!e&&!er(n)&&ja(Be(n),Be(t),s,r)),qn(t)){const{activeInputs:a}=Tt(t);Zl(t,a)}},Zu=(n,e,t,s)=>{const[r,i]=_C(n,t,s);r!==null&&(Em(n,r),i&&!e&&!er(n)&&Be(n).disconnect(Yi(t),s))},yC=(n,e)=>{const t=Tt(n),s=[];for(const r of t.outputs)Po(r)?Xu(n,e,...r):Zu(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},vC=(n,e,t)=>{const s=Tt(n),r=[];for(const i of s.outputs)i[1]===t&&(Po(i)?Xu(n,e,...i):Zu(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},bC=(n,e,t,s,r)=>{const i=Tt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Po(o)?Xu(n,e,...o):Zu(n,e,...o),i.outputs.delete(o),o[0]))},xC=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,g,p)=>class extends l{constructor(_,T,w,y){super(w),this._context=_,this._nativeAudioNode=w;const v=u(_);h(v)&&t(Pf,()=>Pf(v,p))!==!0&&pC(w),Hu.set(this,w),ym.set(this,new Set),_.state!=="closed"&&T&&Ur(this),n(this,y,w)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,T=0,w=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw r();const y=u(this._context),v=g(y);if(d(_)||f(_))throw i();if(Fa(_)){const x=Be(_);try{const S=La(this._nativeAudioNode,x,T,w),R=da(this);(v||R)&&this._nativeAudioNode.disconnect(...S),this.context.state!=="closed"&&!R&&da(_)&&Ur(_)}catch(S){throw S.code===12?i():S}if(e(this,_,T,w,v)){const S=c([this],_);al(S,s(v))}return _}const k=Yi(_);if(k.name==="playbackRate"&&k.maxValue===1024)throw o();try{this._nativeAudioNode.connect(k,T),(v||da(this))&&this._nativeAudioNode.disconnect(k,T)}catch(x){throw x.code===12?i():x}if(mC(this,_,T,v)){const x=c([this],_);al(x,s(v))}}disconnect(_,T,w){let y;const v=u(this._context),k=g(v);if(_===void 0)y=yC(this,k);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();y=vC(this,k,_)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||Fa(_)&&w!==void 0&&(w<0||w>=_.numberOfInputs))throw r();if(y=bC(this,k,_,T,w),y.length===0)throw i()}for(const E of y){const x=c([this],E);al(x,a)}}},wC=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,g,p,m=null,_=null)=>{const T=p.value,w=new PE(T),y=g?s(w):null,v={get defaultValue(){return T},get maxValue(){return m===null?p.maxValue:m},get minValue(){return _===null?p.minValue:_},get value(){return p.value},set value(k){p.value=k,v.setValueAtTime(k,f.context.currentTime)},cancelAndHoldAtTime(k){if(typeof p.cancelAndHoldAtTime=="function")y===null&&w.flush(f.context.currentTime),w.add(r(k)),p.cancelAndHoldAtTime(k);else{const E=Array.from(w).pop();y===null&&w.flush(f.context.currentTime),w.add(r(k));const x=Array.from(w).pop();p.cancelScheduledValues(k),E!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?p.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?p.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?p.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&p.setValueCurveAtTime(x.values,x.startTime,x.duration))}return v},cancelScheduledValues(k){return y===null&&w.flush(f.context.currentTime),w.add(i(k)),p.cancelScheduledValues(k),v},exponentialRampToValueAtTime(k,E){if(k===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const x=f.context.currentTime;return y===null&&w.flush(x),Array.from(w).length===0&&(w.add(l(T,x)),p.setValueAtTime(T,x)),w.add(o(k,E)),p.exponentialRampToValueAtTime(k,E),v},linearRampToValueAtTime(k,E){const x=f.context.currentTime;return y===null&&w.flush(x),Array.from(w).length===0&&(w.add(l(T,x)),p.setValueAtTime(T,x)),w.add(a(k,E)),p.linearRampToValueAtTime(k,E),v},setTargetAtTime(k,E,x){return y===null&&w.flush(f.context.currentTime),w.add(c(k,E,x)),p.setTargetAtTime(k,E,x),v},setValueAtTime(k,E){return y===null&&w.flush(f.context.currentTime),w.add(l(k,E)),p.setValueAtTime(k,E),v},setValueCurveAtTime(k,E,x){const C=k instanceof Float32Array?k:new Float32Array(k);if(h!==null&&h.name==="webkitAudioContext"){const S=E+x,R=f.context.sampleRate,O=Math.ceil(E*R),L=Math.floor(S*R),z=L-O,W=new Float32Array(z);for(let V=0;V<z;V+=1){const U=(C.length-1)/x*((O+V)/R-E),X=Math.floor(U),K=Math.ceil(U);W[V]=X===K?C[X]:(1-(U-X))*C[X]+(1-(K-U))*C[K]}y===null&&w.flush(f.context.currentTime),w.add(u(W,E,x)),p.setValueCurveAtTime(W,E,x);const B=L/R;B<S&&d(v,W[W.length-1],B),d(v,C[C.length-1],S)}else y===null&&w.flush(f.context.currentTime),w.add(u(C,E,x)),p.setValueCurveAtTime(C,E,x);return v}};return t.set(v,p),e.set(v,f),n(v,y),v},kC=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Sm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const TC={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},EC=(n,e,t,s,r,i,o,a,c,l,u,h,d,f)=>class extends e{constructor(p,m,_){var T;const w=a(p),y=c(w),v=u({...TC,..._});d(v);const k=Gl.get(w),E=k==null?void 0:k.get(m),x=y||w.state!=="closed"?w:(T=o(w))!==null&&T!==void 0?T:w,C=r(x,y?null:p.baseLatency,l,m,E,v),S=y?s(m,v,E):null;super(p,!0,C,S);const R=[];C.parameters.forEach((L,z)=>{const W=t(this,y,L);R.push([z,W])}),this._nativeAudioWorkletNode=C,this._onprocessorerror=null,this._parameters=new Sm(R),y&&n(w,this);const{activeInputs:O}=i(this);h(C,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(p){const m=typeof p=="function"?f(this,p):null;this._nativeAudioWorkletNode.onprocessorerror=m;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===m?p:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Va(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const Om=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},Ua=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},CC=(n,e)=>{const t=fn(Xl,n),s=Be(e);return fn(t,s)},SC=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((m,_)=>m+_,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Tt(n),d=await CC(t,n),f=Ua(s.numberOfInputs,s.channelCount),g=Ua(s.numberOfOutputs,r),p=Array.from(n.parameters.keys()).reduce((m,_)=>({...m,[_]:new Float32Array(128)}),{});for(let m=0;m<a;m+=128){if(s.numberOfInputs>0&&e!==null)for(let _=0;_<s.numberOfInputs;_+=1)for(let T=0;T<s.channelCount;T+=1)Va(e,f[_],T,T,m);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:_},T)=>{Va(e,p,_,c+T,m)});for(let _=0;_<s.numberOfInputs;_+=1)for(let T=0;T<r[_];T+=1)g[_][T].byteLength===0&&(g[_][T]=new Float32Array(128));try{const _=f.map((w,y)=>h.activeInputs[y].size===0?[]:w),T=o(m/t.sampleRate,t.sampleRate,()=>d.process(_,g,p));if(u!==null)for(let w=0,y=0;w<s.numberOfOutputs;w+=1){for(let v=0;v<r[w];v+=1)Om(u,g[w],v,y+v,m);y+=r[w]}if(!T)break}catch(_){n.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u},OC=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,g,p)=>(m,_,T)=>{const w=new WeakMap;let y=null;const v=async(k,E)=>{let x=u(k),C=null;const S=vt(x,E),R=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const O=R.reduce((B,V)=>B+V,0),L=r(E,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),z=[];for(let B=0;B<k.numberOfOutputs;B+=1)z.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[B]}));const W=o(E,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});W.connect=e.bind(null,z),W.disconnect=c.bind(null,z),C=[L,z,W]}else S||(x=new h(E,m));if(w.set(E,C===null?x:C[2]),C!==null){if(y===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=k.channelCount*k.numberOfInputs,U=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,X=V+U;y=SC(k,X===0?null:await(async()=>{const Q=new d(X,Math.ceil(k.context.length/128)*128,E.sampleRate),F=[],j=[];for(let Y=0;Y<_.numberOfInputs;Y+=1)F.push(o(Q,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),j.push(r(Q,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const A=await Promise.all(Array.from(k.parameters.values()).map(async Y=>{const $=i(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y.value});return await f(Q,Y,$.offset),$})),I=s(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,V+U)});for(let Y=0;Y<_.numberOfInputs;Y+=1){F[Y].connect(j[Y]);for(let $=0;$<_.channelCount;$+=1)j[Y].connect(I,$,Y*_.channelCount+$)}for(const[Y,$]of A.entries())$.connect(I,0,V+Y),$.start(0);return I.connect(Q.destination),await Promise.all(F.map(Y=>g(k,Q,Y))),p(Q)})(),E,_,R,T,l)}const O=await y,L=t(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[z,W,B]=C;O!==null&&(L.buffer=O,L.start(0)),L.connect(z);for(let V=0,U=0;V<k.numberOfOutputs;V+=1){const X=W[V];for(let K=0;K<R[V];K+=1)z.connect(X,U+K,K);U+=R[V]}return B}if(S)for(const[O,L]of k.parameters.entries())await n(E,L,x.parameters.get(O));else for(const[O,L]of k.parameters.entries())await f(E,L,x.parameters.get(O));return await g(k,E,x),x};return{render(k,E){a(E,k);const x=w.get(E);return x!==void 0?Promise.resolve(x):v(k,E)}}},AC=(n,e,t,s,r,i,o,a,c,l,u,h,d,f,g,p,m,_,T,w)=>class extends g{constructor(v,k){super(v,k),this._nativeContext=v,this._audioWorklet=n===void 0?void 0:{addModule:(E,x)=>n(this,E,x)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(v,k,E){return new t({length:k,numberOfChannels:v,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(v=6){return new i(this,{numberOfInputs:v})}createChannelSplitter(v=6){return new o(this,{numberOfOutputs:v})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(v=1){return new u(this,{maxDelayTime:v})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(v,k){return new f(this,{feedback:k,feedforward:v})}createOscillator(){return new p(this)}createPanner(){return new m(this)}createPeriodicWave(v,k,E={disableNormalization:!1}){return new _(this,{...E,imag:k,real:v})}createStereoPanner(){return new T(this)}createWaveShaper(){return new w(this)}decodeAudioData(v,k,E){return l(this._nativeContext,v).then(x=>(typeof k=="function"&&k(x),x),x=>{throw typeof E=="function"&&E(x),x})}},RC={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},DC=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...RC,...u},f=r(h,d),g=o(h),p=g?t():null;super(l,!1,f,p),this._Q=e(this,g,f.Q,xt,St),this._detune=e(this,g,f.detune,1200*Math.log2(xt),-1200*Math.log2(xt)),this._frequency=e(this,g,f.frequency,l.sampleRate/2,0),this._gain=e(this,g,f.gain,40*Math.log10(xt),St),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},PC=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},MC=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},NC={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},IC=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...NC,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},$C=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},FC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},LC=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...FC,...c}),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},jC=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zC=n=>(e,t,s)=>n(t,e,s),VC=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return za(t)?i.connect(t,0,r):i.connect(t,0)},UC=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},BC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},WC=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...BC,...l},d=s(u,h),f=i(u),g=f?t():null;super(c,!1,d,g),this._constantSourceNodeRenderer=g,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,xt,St),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Ur(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),qn(this)&&Ro(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},qC=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=vt(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},HC=n=>e=>(n[0]=e,n[0]),YC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},GC=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...YC,...c},h=t(l,u),f=r(l)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},XC=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),ii(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ZC=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},KC=()=>new DOMException("","DataCloneError"),Mf=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}catch{}finally{r()}})},QC=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const g=t();return Promise.reject(g)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(g=>(Mf(d).catch(()=>{}),e(a,()=>a(g))||u(g),n.add(g),g)):new Promise((g,p)=>{const m=async()=>{try{await Mf(d)}catch{}},_=T=>{p(T),m()};try{f.decodeAudioData(d,T=>{typeof T.copyFromChannel!="function"&&(l(T),Gu(T)),n.add(T),m().then(()=>g(T))},T=>{_(T===null?s():T)})}catch(T){_(T)}})},JC=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:g}=t(c);for(const p of g)if(Po(p)){const m=s(p[0]);n(f,m,p[1],p[2])}else{const m=r(p[0]);f.connect(m,p[1])}}}else e.set(c,u-l)},eS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},tS=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...eS,...l},d=s(u,h),f=i(u),g=f?t(h.maxDelayTime):null;super(c,!1,d,g),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},nS=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=vt(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},sS=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),rS=n=>(e,t)=>{n(e).delete(t)},iS=n=>"delayTime"in n,oS=(n,e,t)=>function s(r,i){const o=Fa(i)?i:t(n,i);if(iS(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},na=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},aS=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?na(n,e,t).disconnect():za(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?na(n,e,s).disconnect(t,0):na(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):na(n,e,s).disconnect(t,0),cS={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},lS=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...cS,...u},f=s(h,d),g=o(h),p=g?t():null;super(l,!1,f,p),this._attack=e(this,g,f.attack),this._knee=e(this,g,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,g,f.ratio),this._release=e(this,g,f.release),this._threshold=e(this,g,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},uS=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},hS=()=>new DOMException("","EncodingError"),dS=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,g)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(g),!1;if(c!==null)return c(u,h,d,f,g)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),fS=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},pS=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},mS=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},gS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},_S=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...gS,...c},h=s(l,u),d=i(l),f=d?t():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,xt,St)}get gain(){return this._gain}},yS=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},vS=(n,e)=>t=>e(n,t),bS=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},xS=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},wS=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},kS=n=>e=>n.get(e),ht=()=>new DOMException("","InvalidStateError"),TS=n=>e=>{const t=n.get(e);if(t===void 0)throw ht();return t},ES=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},CS=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},wc=()=>new DOMException("","InvalidAccessError"),SS=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw wc();return e.call(n,t,s,r)})(n.getFrequencyResponse)},OS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},AS=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...OS,...c},d=e(l,u?null:a.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(a,!1,d,f),SS(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Am=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let g=t[0]*l[f];for(let p=1;p<r;p+=1){const m=d-p&c-1;g+=t[p]*i[m],g-=n[p]*o[m]}for(let p=r;p<s;p+=1)g+=t[p]*i[d-p&c-1];for(let p=r;p<e;p+=1)g-=n[p]*o[d-p&c-1];i[d]=l[f],o[d]=g,d=d+1&c-1,u[f]=g}return d},RS=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let g=0;g<o;g+=1)i[g]/=r[0];for(let g=1;g<a;g+=1)r[g]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let g=0;g<f;g+=1){const p=n.getChannelData(g),m=d.getChannelData(g);u.fill(0),h.fill(0),Am(r,o,i,a,c,u,h,0,l,p,m)}return d},DS=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=e(u);const g=vt(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const m=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,m,m.destination);const _=await r(m);return RS(_,h,i,o)})()}const p=await c;return d.buffer=p,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},PS=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const d of h)if(Po(d)){const f=s(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},MS=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},NS=(n,e)=>t=>n.has(t)||e(t),IS=(n,e)=>t=>n.has(t)||e(t),$S=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},FS=n=>e=>n!==null&&e instanceof n,LS=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,jS=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,zS=(n,e)=>t=>n(t)||e(t),VS=n=>e=>n!==null&&e instanceof n,US=n=>n!==null&&n.isSecureContext,BS=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},WS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qS=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...WS,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},HS=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},YS=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},GS=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,bc.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Gi=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},XS=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},We=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},ct=(n,e)=>{We(n,e,"channelCount"),We(n,e,"channelCountMode"),We(n,e,"channelInterpretation")},Nf=n=>typeof n.getFloatTimeDomainData=="function",ZS=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},KS=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(ct(r,s),!(s.maxDecibels>s.minDecibels))throw e();return We(r,s,"fftSize"),We(r,s,"maxDecibels"),We(r,s,"minDecibels"),We(r,s,"smoothingTimeConstant"),n(Nf,()=>Nf(r))||ZS(r),r},QS=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ze=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},JS=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw ht();e.call(n,s,r,i),t=!0}})(n.start)},Ku=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Qu=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},eO=(n,e,t,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return ct(f,d),Ze(f,d,"playbackRate"),We(f,d,"buffer"),We(f,d,"loop"),We(f,d,"loopEnd"),We(f,d,"loopStart"),e(t,()=>t(h))||JS(f),e(s,()=>s(h))||c(f),e(r,()=>r(h))||l(f,h),e(i,()=>i(h))||Ku(f),e(o,()=>o(h))||u(f,h),e(a,()=>a(h))||Qu(f),n(h,f),f},tO=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,nO=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},sO=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,rO=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},iO=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:g=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof g=="function"?g:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(g=>(...p)=>{if(p[0]==="processorerror"){const m=typeof p[1]=="function"?p[1]:typeof p[1]=="object"&&p[1]!==null&&typeof p[1].handleEvent=="function"?p[1].handleEvent:null;if(m!==null){const _=d.get(p[1]);_!==void 0?p[1]=_:(p[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),m(T)):m(new ErrorEvent(p[0],{...T}))},d.set(m,p[1]))}}return g.call(h,"error",p[1],p[2]),g.call(h,...p)})(h.addEventListener),h.removeEventListener=(g=>(...p)=>{if(p[0]==="processorerror"){const m=d.get(p[1]);m!==void 0&&(d.delete(p[1]),p[1]=m)}return g.call(h,"error",p[1],p[2]),g.call(h,p[0],p[1],p[2])})(h.removeEventListener),u.numberOfOutputs!==0){const g=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(g).connect(i.destination),r(h,()=>g.disconnect(),()=>g.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return rO(u),e(i,o,l,u)},Rm=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),oO=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),aO=async(n,e)=>{const t=await oO(e);return new n(t)},cO=(n,e,t,s)=>{let r=Xl.get(n);r===void 0&&(r=new WeakMap,Xl.set(n,r));const i=aO(t,s);return r.set(e,i),i},lO=(n,e,t,s,r,i,o,a,c,l,u,h,d)=>(f,g,p,m)=>{if(m.numberOfInputs===0&&m.numberOfOutputs===0)throw c();const _=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(_.some(H=>H<1))throw c();if(_.length!==m.numberOfOutputs)throw e();if(m.channelCountMode!=="explicit")throw c();const T=m.channelCount*m.numberOfInputs,w=_.reduce((H,M)=>H+M,0),y=p.parameterDescriptors===void 0?0:p.parameterDescriptors.length;if(T+y>6||w>6)throw c();const v=new MessageChannel,k=[],E=[];for(let H=0;H<m.numberOfInputs;H+=1)k.push(o(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),E.push(r(f,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const x=[];if(p.parameterDescriptors!==void 0)for(const{defaultValue:H,maxValue:M,minValue:D,name:J}of p.parameterDescriptors){const se=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:m.parameterData[J]!==void 0?m.parameterData[J]:H===void 0?0:H});Object.defineProperties(se.offset,{defaultValue:{get:()=>H===void 0?0:H},maxValue:{get:()=>M===void 0?xt:M},minValue:{get:()=>D===void 0?St:D}}),x.push(se)}const C=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+y)}),S=Rm(g,f.sampleRate),R=a(f,S,T+y,Math.max(1,w)),O=r(f,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),L=[];for(let H=0;H<m.numberOfOutputs;H+=1)L.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[H]}));for(let H=0;H<m.numberOfInputs;H+=1){k[H].connect(E[H]);for(let M=0;M<m.channelCount;M+=1)E[H].connect(C,M,H*m.channelCount+M)}const z=new Sm(p.parameterDescriptors===void 0?[]:p.parameterDescriptors.map(({name:H},M)=>{const D=x[M];return D.connect(C,0,T+M),D.start(0),[H,D.offset]}));C.connect(R);let W=m.channelInterpretation,B=null;const V=m.numberOfOutputs===0?[R]:L,U={get bufferSize(){return S},get channelCount(){return m.channelCount},set channelCount(H){throw t()},get channelCountMode(){return m.channelCountMode},set channelCountMode(H){throw t()},get channelInterpretation(){return W},set channelInterpretation(H){for(const M of k)M.channelInterpretation=H;W=H},get context(){return R.context},get inputs(){return k},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(H){typeof B=="function"&&U.removeEventListener("processorerror",B),B=typeof H=="function"?H:null,typeof B=="function"&&U.addEventListener("processorerror",B)},get parameters(){return z},get port(){return v.port2},addEventListener(...H){return R.addEventListener(H[0],H[1],H[2])},connect:n.bind(null,V),disconnect:l.bind(null,V),dispatchEvent(...H){return R.dispatchEvent(H[0])},removeEventListener(...H){return R.removeEventListener(H[0],H[1],H[2])}},X=new Map;v.port1.addEventListener=(H=>(...M)=>{if(M[0]==="message"){const D=typeof M[1]=="function"?M[1]:typeof M[1]=="object"&&M[1]!==null&&typeof M[1].handleEvent=="function"?M[1].handleEvent:null;if(D!==null){const J=X.get(M[1]);J!==void 0?M[1]=J:(M[1]=se=>{u(f.currentTime,f.sampleRate,()=>D(se))},X.set(D,M[1]))}}return H.call(v.port1,M[0],M[1],M[2])})(v.port1.addEventListener),v.port1.removeEventListener=(H=>(...M)=>{if(M[0]==="message"){const D=X.get(M[1]);D!==void 0&&(X.delete(M[1]),M[1]=D)}return H.call(v.port1,M[0],M[1],M[2])})(v.port1.removeEventListener);let K=null;Object.defineProperty(v.port1,"onmessage",{get:()=>K,set:H=>{typeof K=="function"&&v.port1.removeEventListener("message",K),K=typeof H=="function"?H:null,typeof K=="function"&&(v.port1.addEventListener("message",K),v.port1.start())}}),p.prototype.port=v.port1;let Q=null;cO(f,U,p,m).then(H=>Q=H);const j=Ua(m.numberOfInputs,m.channelCount),A=Ua(m.numberOfOutputs,_),I=p.parameterDescriptors===void 0?[]:p.parameterDescriptors.reduce((H,{name:M})=>({...H,[M]:new Float32Array(128)}),{});let Y=!0;const $=()=>{m.numberOfOutputs>0&&R.disconnect(O);for(let H=0,M=0;H<m.numberOfOutputs;H+=1){const D=L[H];for(let J=0;J<_[H];J+=1)O.disconnect(D,M+J,J);M+=_[H]}},q=new Map;R.onaudioprocess=({inputBuffer:H,outputBuffer:M})=>{if(Q!==null){const D=h(U);for(let J=0;J<S;J+=128){for(let se=0;se<m.numberOfInputs;se+=1)for(let le=0;le<m.channelCount;le+=1)Va(H,j[se],le,le,J);p.parameterDescriptors!==void 0&&p.parameterDescriptors.forEach(({name:se},le)=>{Va(H,I,se,T+le,J)});for(let se=0;se<m.numberOfInputs;se+=1)for(let le=0;le<_[se];le+=1)A[se][le].byteLength===0&&(A[se][le]=new Float32Array(128));try{const se=j.map((be,et)=>{if(D[et].size>0)return q.set(et,S/128),be;const fe=q.get(et);return fe===void 0?[]:(be.every(tt=>tt.every(at=>at===0))&&(fe===1?q.delete(et):q.set(et,fe-1)),be)});Y=u(f.currentTime+J/f.sampleRate,f.sampleRate,()=>Q.process(se,A,I));for(let be=0,et=0;be<m.numberOfOutputs;be+=1){for(let ee=0;ee<_[be];ee+=1)Om(M,A[be],ee,et+ee,J);et+=_[be]}}catch(se){Y=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:se.colno,filename:se.filename,lineno:se.lineno,message:se.message}))}if(!Y){for(let se=0;se<m.numberOfInputs;se+=1){k[se].disconnect(E[se]);for(let le=0;le<m.channelCount;le+=1)E[J].disconnect(C,le,se*m.channelCount+le)}if(p.parameterDescriptors!==void 0){const se=p.parameterDescriptors.length;for(let le=0;le<se;le+=1){const be=x[le];be.disconnect(C,0,T+le),be.stop()}}C.disconnect(R),R.onaudioprocess=null,ae?$():ne();break}}}};let ae=!1;const re=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ie=()=>R.connect(re).connect(f.destination),ne=()=>{R.disconnect(re),re.disconnect()},ge=()=>{if(Y){ne(),m.numberOfOutputs>0&&R.connect(O);for(let H=0,M=0;H<m.numberOfOutputs;H+=1){const D=L[H];for(let J=0;J<_[H];J+=1)O.connect(D,M+J,J);M+=_[H]}}ae=!0},te=()=>{Y&&(ie(),$()),ae=!1};return ie(),d(U,ge,te)},Dm=(n,e)=>{const t=n.createBiquadFilter();return ct(t,e),Ze(t,e,"Q"),Ze(t,e,"detune"),Ze(t,e,"frequency"),Ze(t,e,"gain"),We(t,e,"type"),t},uO=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),ct(r,s),r},hO=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw ht()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw ht()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw ht()}})},Mo=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return ct(t,e),hO(t),t},dO=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return ct(a,o),Ze(a,o,"offset"),e(s,()=>s(i))||Ku(a),e(r,()=>r(i))||Qu(a),n(i,a),a},oi=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),fO=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(g){l.channelCount=g},get channelCountMode(){return l.channelCountMode},set channelCountMode(g){l.channelCountMode=g},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(g){l.channelInterpretation=g},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(g){c.onended=g},addEventListener(...g){return c.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return c.dispatchEvent(g[0])},removeEventListener(...g){return c.removeEventListener(g[0],g[1],g[2])},start(g=0){c.start.call(c,g)},stop(g=0){c.stop.call(c,g)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(oi(h,l),d,f)},pO=(n,e)=>(t,s)=>{const r=t.createConvolver();if(ct(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),We(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},Pm=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return ct(t,e),Ze(t,e,"delayTime"),t},mO=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(ct(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ze(s,t,"attack"),Ze(s,t,"knee"),Ze(s,t,"ratio"),Ze(s,t,"release"),Ze(s,t,"threshold"),s},Nt=(n,e)=>{const t=n.createGain();return ct(t,e),Ze(t,e,"gain"),t},gO=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return ct(r,s),r};function _O(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function yO(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function If(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=yO(t,e),t[0]+=n[s];return t}const vO=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Rm(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),g=d.length,p=f.length,m=Math.min(g,p);if(g===0||g>20)throw s();if(d[0]===0)throw e();if(p===0||p>20)throw s();if(f[0]===0)throw e();if(d[0]!==1){for(let x=0;x<p;x+=1)f[x]/=d[0];for(let x=1;x<g;x+=1)d[x]/=d[0]}const _=t(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const T=32,w=[],y=[],v=[];for(let x=0;x<o;x+=1){w.push(0);const C=new Float32Array(T),S=new Float32Array(T);C.fill(0),S.fill(0),y.push(C),v.push(S)}_.onaudioprocess=x=>{const C=x.inputBuffer,S=x.outputBuffer,R=C.numberOfChannels;for(let O=0;O<R;O+=1){const L=C.getChannelData(O),z=S.getChannelData(O);w[O]=Am(d,g,f,p,m,y[O],v[O],w[O],T,L,z)}};const k=r.sampleRate/2;return oi({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(x){_.channelCount=x},get channelCountMode(){return _.channelCountMode},set channelCountMode(x){_.channelCountMode=x},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(x){_.channelInterpretation=x},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...x){return _.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return _.dispatchEvent(x[0])},getFrequencyResponse(x,C,S){if(x.length!==C.length||C.length!==S.length)throw n();const R=x.length;for(let O=0;O<R;O+=1){const L=-Math.PI*(x[O]/k),z=[Math.cos(L),Math.sin(L)],W=If(f,z),B=If(d,z),V=_O(W,B);C[O]=Math.sqrt(V[0]*V[0]+V[1]*V[1]),S[O]=Math.atan2(V[1],V[0])}},removeEventListener(...x){return _.removeEventListener(x[0],x[1],x[2])}},_)},bO=(n,e)=>n.createMediaElementSource(e.mediaElement),xO=(n,e)=>{const t=n.createMediaStreamDestination();return ct(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},wO=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},kO=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},TO=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,EO=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return ct(c,a),Ze(c,a,"detune"),Ze(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):We(c,a,"type"),e(t,()=>t(o))||Ku(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Qu(c),n(o,c),c},CO=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(ct(s,t),Ze(s,t,"orientationX"),Ze(s,t,"orientationY"),Ze(s,t,"orientationZ"),Ze(s,t,"positionX"),Ze(s,t,"positionY"),Ze(s,t,"positionZ"),We(s,t,"coneInnerAngle"),We(s,t,"coneOuterAngle"),We(s,t,"coneOuterGain"),We(s,t,"distanceModel"),We(s,t,"maxDistance"),We(s,t,"panningModel"),We(s,t,"refDistance"),We(s,t,"rolloffFactor"),s)},SO=(n,e,t,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:g,maxDistance:p,orientationX:m,orientationY:_,orientationZ:T,panningModel:w,positionX:y,positionY:v,positionZ:k,refDistance:E,rolloffFactor:x,...C})=>{const S=u.createPanner();if(C.channelCount>2||C.channelCountMode==="max")throw o();ct(S,C);const R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=t(u,{...R,channelInterpretation:"speakers",numberOfInputs:6}),L=s(u,{...C,gain:1}),z=s(u,{...R,gain:1}),W=s(u,{...R,gain:0}),B=s(u,{...R,gain:0}),V=s(u,{...R,gain:0}),U=s(u,{...R,gain:0}),X=s(u,{...R,gain:0}),K=r(u,256,6,1),Q=i(u,{...R,curve:new Float32Array([1,1]),oversample:"none"});let F=[m,_,T],j=[y,v,k];const A=new Float32Array(1);K.onaudioprocess=({inputBuffer:q})=>{const ae=[c(q,A,0),c(q,A,1),c(q,A,2)];ae.some((ie,ne)=>ie!==F[ne])&&(S.setOrientation(...ae),F=ae);const re=[c(q,A,3),c(q,A,4),c(q,A,5)];re.some((ie,ne)=>ie!==j[ne])&&(S.setPosition(...re),j=re)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0});const I={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(q){if(q>2)throw o();L.channelCount=q,S.channelCount=q},get channelCountMode(){return S.channelCountMode},set channelCountMode(q){if(q==="max")throw o();L.channelCountMode=q,S.channelCountMode=q},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(q){L.channelInterpretation=q,S.channelInterpretation=q},get coneInnerAngle(){return S.coneInnerAngle},set coneInnerAngle(q){S.coneInnerAngle=q},get coneOuterAngle(){return S.coneOuterAngle},set coneOuterAngle(q){S.coneOuterAngle=q},get coneOuterGain(){return S.coneOuterGain},set coneOuterGain(q){if(q<0||q>1)throw e();S.coneOuterGain=q},get context(){return S.context},get distanceModel(){return S.distanceModel},set distanceModel(q){S.distanceModel=q},get inputs(){return[L]},get maxDistance(){return S.maxDistance},set maxDistance(q){if(q<0)throw new RangeError;S.maxDistance=q},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get orientationX(){return z.gain},get orientationY(){return W.gain},get orientationZ(){return B.gain},get panningModel(){return S.panningModel},set panningModel(q){S.panningModel=q},get positionX(){return V.gain},get positionY(){return U.gain},get positionZ(){return X.gain},get refDistance(){return S.refDistance},set refDistance(q){if(q<0)throw new RangeError;S.refDistance=q},get rolloffFactor(){return S.rolloffFactor},set rolloffFactor(q){if(q<0)throw new RangeError;S.rolloffFactor=q},addEventListener(...q){return L.addEventListener(q[0],q[1],q[2])},dispatchEvent(...q){return L.dispatchEvent(q[0])},removeEventListener(...q){return L.removeEventListener(q[0],q[1],q[2])}};h!==I.coneInnerAngle&&(I.coneInnerAngle=h),d!==I.coneOuterAngle&&(I.coneOuterAngle=d),f!==I.coneOuterGain&&(I.coneOuterGain=f),g!==I.distanceModel&&(I.distanceModel=g),p!==I.maxDistance&&(I.maxDistance=p),m!==I.orientationX.value&&(I.orientationX.value=m),_!==I.orientationY.value&&(I.orientationY.value=_),T!==I.orientationZ.value&&(I.orientationZ.value=T),w!==I.panningModel&&(I.panningModel=w),y!==I.positionX.value&&(I.positionX.value=y),v!==I.positionY.value&&(I.positionY.value=v),k!==I.positionZ.value&&(I.positionZ.value=k),E!==I.refDistance&&(I.refDistance=E),x!==I.rolloffFactor&&(I.rolloffFactor=x),(F[0]!==1||F[1]!==0||F[2]!==0)&&S.setOrientation(...F),(j[0]!==0||j[1]!==0||j[2]!==0)&&S.setPosition(...j);const Y=()=>{L.connect(S),n(L,Q,0,0),Q.connect(z).connect(O,0,0),Q.connect(W).connect(O,0,1),Q.connect(B).connect(O,0,2),Q.connect(V).connect(O,0,3),Q.connect(U).connect(O,0,4),Q.connect(X).connect(O,0,5),O.connect(K).connect(u.destination)},$=()=>{L.disconnect(S),a(L,Q,0,0),Q.disconnect(z),z.disconnect(O),Q.disconnect(W),W.disconnect(O),Q.disconnect(B),B.disconnect(O),Q.disconnect(V),V.disconnect(O),Q.disconnect(U),U.disconnect(O),Q.disconnect(X),X.disconnect(O),O.disconnect(K),K.disconnect(u.destination)};return l(oi(I,S),Y,$)},OO=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},No=(n,e,t,s)=>n.createScriptProcessor(e,t,s),AO=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return ct(i,s),Ze(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},RO=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(g,p,m,_)=>{const T=new Float32Array(16385),w=new Float32Array(16385);for(let C=0;C<16385;C+=1){const S=C/16384*c;T[C]=Math.cos(S),w[C]=Math.sin(S)}const y=t(g,{...l,gain:0}),v=s(g,{...u,curve:T}),k=s(g,{...u,curve:a}),E=t(g,{...l,gain:0}),x=s(g,{...u,curve:w});return{connectGraph(){p.connect(y),p.connect(k.inputs===void 0?k:k.inputs[0]),p.connect(E),k.connect(m),m.connect(v.inputs===void 0?v:v.inputs[0]),m.connect(x.inputs===void 0?x:x.inputs[0]),v.connect(y.gain),x.connect(E.gain),y.connect(_,0,0),E.connect(_,0,1)},disconnectGraph(){p.disconnect(y),p.disconnect(k.inputs===void 0?k:k.inputs[0]),p.disconnect(E),k.disconnect(m),m.disconnect(v.inputs===void 0?v:v.inputs[0]),m.disconnect(x.inputs===void 0?x:x.inputs[0]),v.disconnect(y.gain),x.disconnect(E.gain),y.disconnect(_,0,0),E.disconnect(_,0,1)}}},d=(g,p,m,_)=>{const T=new Float32Array(16385),w=new Float32Array(16385),y=new Float32Array(16385),v=new Float32Array(16385),k=Math.floor(16385/2);for(let V=0;V<16385;V+=1)if(V>k){const U=(V-k)/(16384-k)*c;T[V]=Math.cos(U),w[V]=Math.sin(U),y[V]=0,v[V]=1}else{const U=V/(16384-k)*c;T[V]=1,w[V]=0,y[V]=Math.cos(U),v[V]=Math.sin(U)}const E=e(g,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=t(g,{...l,gain:0}),C=s(g,{...u,curve:T}),S=t(g,{...l,gain:0}),R=s(g,{...u,curve:w}),O=s(g,{...u,curve:a}),L=t(g,{...l,gain:0}),z=s(g,{...u,curve:y}),W=t(g,{...l,gain:0}),B=s(g,{...u,curve:v});return{connectGraph(){p.connect(E),p.connect(O.inputs===void 0?O:O.inputs[0]),E.connect(x,0),E.connect(S,0),E.connect(L,1),E.connect(W,1),O.connect(m),m.connect(C.inputs===void 0?C:C.inputs[0]),m.connect(R.inputs===void 0?R:R.inputs[0]),m.connect(z.inputs===void 0?z:z.inputs[0]),m.connect(B.inputs===void 0?B:B.inputs[0]),C.connect(x.gain),R.connect(S.gain),z.connect(L.gain),B.connect(W.gain),x.connect(_,0,0),L.connect(_,0,0),S.connect(_,0,1),W.connect(_,0,1)},disconnectGraph(){p.disconnect(E),p.disconnect(O.inputs===void 0?O:O.inputs[0]),E.disconnect(x,0),E.disconnect(S,0),E.disconnect(L,1),E.disconnect(W,1),O.disconnect(m),m.disconnect(C.inputs===void 0?C:C.inputs[0]),m.disconnect(R.inputs===void 0?R:R.inputs[0]),m.disconnect(z.inputs===void 0?z:z.inputs[0]),m.disconnect(B.inputs===void 0?B:B.inputs[0]),C.disconnect(x.gain),R.disconnect(S.gain),z.disconnect(L.gain),B.disconnect(W.gain),x.disconnect(_,0,0),L.disconnect(_,0,0),S.disconnect(_,0,1),W.disconnect(_,0,1)}}},f=(g,p,m,_,T)=>{if(p===1)return h(g,m,_,T);if(p===2)return d(g,m,_,T);throw r()};return(g,{channelCount:p,channelCountMode:m,pan:_,...T})=>{if(m==="max")throw r();const w=n(g,{...T,channelCount:1,channelCountMode:m,numberOfInputs:2}),y=t(g,{...T,channelCount:p,channelCountMode:m,gain:1}),v=t(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:k,disconnectGraph:E}=f(g,p,y,v,w);Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"maxValue",{get:()=>1}),Object.defineProperty(v.gain,"minValue",{get:()=>-1});const x={get bufferSize(){},get channelCount(){return y.channelCount},set channelCount(O){y.channelCount!==O&&(C&&E(),{connectGraph:k,disconnectGraph:E}=f(g,O,y,v,w),C&&k()),y.channelCount=O},get channelCountMode(){return y.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw r();y.channelCountMode=O},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(O){y.channelInterpretation=O},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get pan(){return v.gain},addEventListener(...O){return y.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return y.dispatchEvent(O[0])},removeEventListener(...O){return y.removeEventListener(O[0],O[1],O[2])}};let C=!1;const S=()=>{k(),C=!0},R=()=>{E(),C=!1};return i(oi(x,w),S,R)}},DO=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);ct(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();We(l,{curve:u},"curve"),We(l,c,"oversample");let h=null,d=!1;return o(l,"curve",p=>()=>p.call(l),p=>m=>(p.call(l,m),d&&(s(m)&&h===null?h=n(a,l):!s(m)&&h!==null&&(h(),h=null)),m)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},PO=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();ct(l,c),ct(u,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),g=t(i,{...c,gain:-1});let p=null,m=!1,_=null;const T={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(v){h.channelCount=v,d.channelCount=v,l.channelCount=v,f.channelCount=v,u.channelCount=v,g.channelCount=v},get channelCountMode(){return l.channelCountMode},set channelCountMode(v){h.channelCountMode=v,d.channelCountMode=v,l.channelCountMode=v,f.channelCountMode=v,u.channelCountMode=v,g.channelCountMode=v},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(v){h.channelInterpretation=v,d.channelInterpretation=v,l.channelInterpretation=v,f.channelInterpretation=v,u.channelInterpretation=v,g.channelInterpretation=v},get context(){return l.context},get curve(){return _},set curve(v){if(v!==null&&v.length<2)throw e();if(v===null)l.curve=v,u.curve=v;else{const k=v.length,E=new Float32Array(k+2-k%2),x=new Float32Array(k+2-k%2);E[0]=v[0],x[0]=-v[k-1];const C=Math.ceil((k+1)/2),S=(k+1)/2-1;for(let R=1;R<C;R+=1){const O=R/C*S,L=Math.floor(O),z=Math.ceil(O);E[R]=L===z?v[L]:(1-(O-L))*v[L]+(1-(z-O))*v[z],x[R]=L===z?-v[k-1-L]:-((1-(O-L))*v[k-1-L])-(1-(z-O))*v[k-1-z]}E[C]=k%2===1?v[C-1]:(v[C-2]+v[C-1])/2,l.curve=E,u.curve=x}_=v,m&&(s(_)&&p===null?p=n(i,h):p!==null&&(p(),p=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(v){l.oversample=v,u.oversample=v},addEventListener(...v){return h.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return h.dispatchEvent(v[0])},removeEventListener(...v){return h.removeEventListener(v[0],v[1],v[2])}};o!==null&&(T.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==T.oversample&&(T.oversample=a);const w=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(g).connect(f),m=!0,s(_)&&(p=n(i,h))},y=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(g),g.disconnect(f),m=!1,p!==null&&(p(),p=null)};return r(oi(T,f),w,y)},Et=()=>new DOMException("","NotSupportedError"),MO={numberOfChannels:1},NO=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...MO,...l},f=s(h,u,d);e(Gi,()=>Gi(f))||f.addEventListener("statechange",(()=>{let g=0;const p=m=>{this._state==="running"&&(g>0?(f.removeEventListener("statechange",p),m.stopImmediatePropagation(),this._waitForThePromiseToSettle(m)):g+=1)};return p})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,km(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},IO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},$O=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...IO,...l},d=t(u,h),f=i(u),g=f?s():null,p=c.sampleRate/2;super(c,!1,d,g),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,p,-p),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=g,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Ur(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),qn(this)&&Ro(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},FO=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const f=vt(d,h);if(!f){const g={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,g),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},LO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},jO=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...LO,...l},d=t(u,h),f=i(u),g=f?s():null;super(c,!1,d,g),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,xt,St),this._orientationY=e(this,f,d.orientationY,xt,St),this._orientationZ=e(this,f,d.orientationZ,xt,St),this._positionX=e(this,f,d.positionX,xt,St),this._positionY=e(this,f,d.positionY,xt,St),this._positionZ=e(this,f,d.positionZ,xt,St),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},zO=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,g)=>{let p=null,m=i(f);const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},T={..._,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},w=vt(m,g);if("bufferSize"in m)p=s(g,{..._,gain:1});else if(!w){const y={...T,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=r(g,y)}if(u.set(g,p===null?m:p),p!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const R=new o(6,f.context.length,g.sampleRate),O=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(R.destination),h=(async()=>{const L=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(z,W)=>{const B=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await a(R,z,B.offset),B}));for(let z=0;z<6;z+=1)L[z].connect(O,0,z),L[z].start(0);return l(R)})()}const y=await h,v=s(g,{..._,gain:1});await c(f,g,v);const k=[];for(let R=0;R<y.numberOfChannels;R+=1)k.push(y.getChannelData(R));let E=[k[0][0],k[1][0],k[2][0]],x=[k[3][0],k[4][0],k[5][0]],C=s(g,{..._,gain:1}),S=r(g,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:x[0],positionY:x[1],positionZ:x[2]});v.connect(C).connect(S.inputs[0]),S.connect(p);for(let R=128;R<y.length;R+=128){const O=[k[0][R],k[1][R],k[2][R]],L=[k[3][R],k[4][R],k[5][R]];if(O.some((z,W)=>z!==E[W])||L.some((z,W)=>z!==x[W])){E=O,x=L;const z=R/g.sampleRate;C.gain.setValueAtTime(0,z),C=s(g,{..._,gain:0}),S=r(g,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:x[0],positionY:x[1],positionZ:x[2]}),C.gain.setValueAtTime(1,z),v.connect(C).connect(S.inputs[0]),S.connect(p)}}return p}return w?(await n(g,f.orientationX,m.orientationX),await n(g,f.orientationY,m.orientationY),await n(g,f.orientationZ,m.orientationZ),await n(g,f.positionX,m.positionX),await n(g,f.positionY,m.positionY),await n(g,f.positionZ,m.positionZ)):(await a(g,f.orientationX,m.orientationX),await a(g,f.orientationY,m.orientationY),await a(g,f.orientationZ,m.orientationZ),await a(g,f.positionX,m.positionX),await a(g,f.positionY,m.positionY),await a(g,f.positionZ,m.positionZ)),ii(m)?await c(f,g,m.inputs[0]):await c(f,g,m),m};return{render(f,g){const p=u.get(g);return p!==void 0?Promise.resolve(p):d(f,g)}}},VO={disableNormalization:!1},UO=(n,e,t,s)=>class Mm{constructor(i,o){const a=e(i),c=s({...VO,...o}),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Mm.prototype||t.has(i)}},BO=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),WO=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),f=s.context.destination;!t(l)&&(s!==f||!t(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},qO=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},HO=(n,e,t,s)=>r=>n(Gi,()=>Gi(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),YO=n=>(e,t)=>{n.set(e,t)},GO=n=>(e,t)=>n.set(e,t),XO=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Gu(u)):e(i,()=>i(u))||a(u),n.add(u),u)),ZO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},KO=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...ZO,...c},h=t(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},QO=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=vt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),ii(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},JO=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},e2=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},t2=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},n2=()=>new DOMException("","UnknownError"),s2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},r2=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...s2,...l},d=t(u,h),g=i(u)?s():null;super(c,!0,d,g),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},i2=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!vt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),ii(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},o2=()=>typeof window>"u"?null:window,a2=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},c2=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},l2=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},u2=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Nm=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Im=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Io=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},h2=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),d2=n=>({...n,channelCount:n.numberOfOutputs}),f2=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},$m=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;$m(n,e,t+1e-7)}},p2=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},m2=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},g2=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ju=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Fm=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},eh=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},_2=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},y2=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},Lm=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),oi(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},ai=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},v2=jE(cr),b2=qE(cr),x2=sS(xc),jm=new WeakMap,w2=xS(jm),_n=MC(new Map,new WeakMap),An=o2(),zm=KS(_n,Dn),th=bS(Tt),ft=WO(Tt,th,er),k2=ZE(zm,Be,ft),ze=TS(bc),ss=TO(An),Pe=VS(ss),Vm=new WeakMap,Um=fS(ai),$o=tO(An),nh=FS($o),sh=LS(An),Bm=jS(An),Xi=sO(An),it=xC(zE(gm),WE(v2,b2,La,x2,ja,Tt,w2,Ao,Be,cr,qn,er,da),_n,PS(Yl,ja,Tt,Be,Yi,qn),Dn,wc,Et,JC(La,Yl,Tt,Be,Yi,ze,qn,Pe),oS(Vm,Tt,fn),Um,ze,nh,sh,Bm,Pe,Xi),T2=XE(it,k2,Dn,zm,ze,Pe),rh=new WeakSet,$f=QS(An),Wm=HC(new Uint32Array(1)),ih=a2(Wm,Dn),oh=c2(Wm),qm=QE(rh,_n,Et,$f,ss,JO($f),ih,oh),kc=HE(Nt),Hm=qO(th,Do,er),Pn=zC(Hm),ci=eO(kc,_n,p2,m2,g2,Ju,Fm,eh,y2,l2(Io),Lm),Mn=BO(wS(Do),Hm),E2=tC(Pn,ci,Be,Mn,ft),yn=wC(VE(_m),Vm,Yu,kC,ME,NE,IE,$E,FE,Wl,pm,$o,$m),C2=eC(it,E2,yn,ht,ci,ze,Pe,ai),S2=uC(it,hC,Dn,ht,nO(Nt,Io),ze,Pe,ft),O2=PC(Pn,Dm,Be,Mn,ft),lr=GO(jm),A2=DC(it,yn,O2,wc,Dm,ze,Pe,lr),Rs=XS(cr,sh),R2=u2(ht,Rs),Ds=uO($o,R2),D2=$C(Ds,Be,ft),P2=IC(it,D2,Ds,ze,Pe),M2=jC(Mo,Be,ft),N2=LC(it,M2,Mo,ze,Pe,d2),I2=fO(kc,ci,Nt,Rs),li=dO(kc,_n,I2,Ju,eh),$2=qC(Pn,li,Be,Mn,ft),F2=WC(it,yn,$2,li,ze,Pe,ai),Ym=pO(Et,Io),L2=XC(Ym,Be,ft),j2=GC(it,L2,Ym,ze,Pe,lr),z2=nS(Pn,Pm,Be,Mn,ft),V2=tS(it,yn,z2,Pm,ze,Pe,lr),Gm=mO(Et),U2=uS(Pn,Gm,Be,Mn,ft),B2=lS(it,yn,U2,Gm,Et,ze,Pe,lr),W2=yS(Pn,Nt,Be,Mn,ft),q2=_S(it,yn,W2,Nt,ze,Pe),H2=vO(wc,ht,No,Et),Tc=HO(_n,Nt,No,t2(Nt,ss)),Y2=DS(ci,Be,ss,ft,Tc),G2=gO(H2),X2=AS(it,G2,Y2,ze,Pe,lr),Z2=dC(yn,Ds,li,No,Et,Nm,Pe,Io),Xm=new WeakMap,K2=GS(S2,Z2,Um,Pe,Xm,ai),Zm=EO(kc,_n,Ju,Fm,eh,Lm),Q2=FO(Pn,Zm,Be,Mn,ft),J2=$O(it,yn,Zm,Q2,ze,Pe,ai),Km=UC(ci),eA=PO(Km,ht,Nt,Im,Rs),Ec=DO(Km,ht,eA,Im,Rs,$o,Io),tA=SO(La,ht,Ds,Nt,No,Ec,Et,ja,Nm,Rs),Qm=CO(tA),nA=zO(Pn,Ds,li,Nt,Qm,Be,ss,Mn,ft,Tc),sA=jO(it,yn,Qm,nA,ze,Pe,lr),rA=OO(Dn),iA=UO(rA,ze,new WeakSet,f2),oA=RO(Ds,Mo,Nt,Ec,Et,Rs),Jm=AO(oA,Et),aA=QO(Pn,Jm,Be,Mn,ft),cA=KO(it,yn,Jm,aA,ze,Pe),lA=i2(Ec,Be,ft),uA=r2(it,ht,Ec,lA,ze,Pe,lr),eg=US(An),ah=pS(An),tg=new WeakMap,hA=ES(tg,ss),dA=eg?BE(_n,Et,dS(An),ah,mS(LE),ze,hA,Pe,Xi,new WeakMap,new WeakMap,e2(Xi,ss),An):void 0,fA=zS(nh,Pe),pA=QC(rh,_n,KC,hS,new WeakSet,ze,fA,$a,Gi,ih,oh),ng=AC(dA,T2,qm,C2,A2,P2,N2,F2,j2,pA,V2,B2,q2,X2,K2,J2,sA,iA,cA,uA),mA=BS(it,bO,ze,Pe),gA=qS(it,xO,ze,Pe),_A=HS(it,wO,ze,Pe),yA=kO(ht,Pe),vA=YS(it,yA,ze),bA=lC(ng,ht,Et,n2,mA,gA,_A,vA,$o),ch=CS(Xm),xA=YE(ch),sg=VC(Dn),wA=rS(ch),rg=aS(Dn),ig=new WeakMap,kA=vS(ig,fn),TA=lO(sg,Dn,ht,Ds,Mo,li,Nt,No,Et,rg,ah,kA,Rs),EA=iO(ht,TA,Nt,Et,Rs),CA=OC(Pn,sg,ci,Ds,Mo,li,Nt,wA,rg,ah,Be,Xi,ss,Mn,ft,Tc),SA=kS(tg),OA=YO(ig),Ff=eg?EC(xA,it,yn,CA,EA,Tt,SA,ze,Pe,Xi,h2,OA,_2,ai):void 0,AA=ZC(Et,ss),RA=XO(rh,_n,th,ch,Tc,$a,ih,oh),DA=NO(ng,_n,ht,AA,RA),PA=MS(bc,nh),MA=NS(Hu,sh),NA=IS(Yu,Bm),IA=$S(bc,Pe);function Ut(n){return typeof n>"u"}function xe(n){return!Ut(n)}function $A(n){return typeof n=="function"}function ws(n){return typeof n=="number"}function qs(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function FA(n){return typeof n=="boolean"}function hn(n){return Array.isArray(n)}function Zn(n){return typeof n=="string"}function sa(n){return Zn(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function me(n,e){if(!n)throw new Error(e)}function pn(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function og(n){!n.isOffline&&n.state!=="running"&&lh('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ag=!1,Lf=!1;function jf(n){ag=n}function LA(n){Ut(n)&&ag&&!Lf&&(Lf=!0,lh("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let cg=console;function jA(...n){cg.log(...n)}function lh(...n){cg.warn(...n)}function zA(n){return new bA(n)}function VA(n,e,t){return new DA(n,e,t)}const Hs=typeof self=="object"?self:null,UA=Hs&&(Hs.hasOwnProperty("AudioContext")||Hs.hasOwnProperty("webkitAudioContext"));function BA(n,e,t){return me(xe(Ff),"This node only works in a secure context (https or localhost)"),new Ff(n,e,t)}class WA{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function tr(n){return NA(n)}function ms(n){return MA(n)}function fa(n){return IA(n)}function Tr(n){return PA(n)}function qA(n){return n instanceof qm}function HA(n,e){return n==="value"||tr(e)||ms(e)||qA(e)}function Pr(n,...e){if(!e.length)return n;const t=e.shift();if(qs(n)&&qs(t))for(const s in t)HA(s,t[s])?n[s]=t[s]:qs(t[s])?(n[s]||Object.assign(n,{[s]:{}}),Pr(n[s],t[s])):Object.assign(n,{[s]:t[s]});return Pr(n,...e)}function YA(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Z(n,e,t=[],s){const r={},i=Array.from(e);if(qs(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(Pr(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&qs(i[0]))Pr(r,i[0]);else for(let o=0;o<t.length;o++)xe(i[o])&&(r[t[o]]=i[o]);return Pr(n,r)}function GA(n){return n.constructor.getDefaults()}function Mr(n,e){return Ut(n)?e:n}function Cr(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class rs{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Hs&&this.toString()===Hs.TONE_DEBUG_CLASS)&&jA(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}rs.version=fm;const uh=1e-6;function Br(n,e){return n>e+uh}function Ql(n,e){return Br(n,e)||an(n,e)}function Ba(n,e){return n+uh<e}function an(n,e){return Math.abs(n-e)<uh}function XA(n,e,t){return Math.max(Math.min(n,t),e)}let En=class lg extends rs{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Z(lg.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(me(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];me(Ql(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(an(this._timeline[t].time,e)){for(let s=t;s>=0&&an(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Ql(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(an(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(an(u[t],e))o=l;else break}return o}else{if(Ba(a[t],e)&&Br(c[t],e))return o;Br(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&an(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&an(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}};const ug=[];function Cc(n){ug.push(n)}function ZA(n){ug.forEach(e=>e(n))}const hg=[];function Sc(n){hg.push(n)}function KA(n){hg.forEach(e=>e(n))}class Fo extends rs{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Ut(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Ut(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Ut(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Fo.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class dg extends Fo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let hh=class fg extends dg{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new En,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Z(fg.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=zA({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new WA(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(ZA(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return me(Tr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return me(Tr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return me(Tr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){me(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){me(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){me(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){me(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return BA(this.rawContext,e,t)}addAudioWorkletModule(e){return $e(this,void 0,void 0,function*(){me(xe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return $e(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Tr(this._context)?this._context.resume():Promise.resolve()}close(){return $e(this,void 0,void 0,function*(){Tr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&KA(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}};class QA extends dg{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return $e(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ve(n,e){hn(e)?e.forEach(t=>Ve(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function dh(n,e){hn(e)?e.forEach(t=>dh(n,t)):Object.defineProperty(n,e,{writable:!0})}const Oe=()=>{};class Ae extends rs{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Oe;const e=Z(Ae.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Zn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Oe,onload:Oe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:cn().sampleRate}set(e){return e instanceof Ae?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return $e(this,void 0,void 0,function*(){const t=Ae.load(e).then(s=>{this.set(s),this.onload(this)});Ae.downloads.push(t);try{yield t}finally{const s=Ae.downloads.indexOf(t);Ae.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=hn(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=cn(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(ws(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(ws(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){me(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);me(s<r,"The start time must be less than the end time");const i=r-s,o=cn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Ae(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ae().fromArray(e)}static fromUrl(e){return $e(this,void 0,void 0,function*(){return yield new Ae().load(e)})}static load(e){return $e(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let l=c[0];for(const u of c)if(Ae.supportsType(u)){l=u;break}e=e.replace(t[0],l)}const s=Ae.baseUrl===""||Ae.baseUrl.endsWith("/")?Ae.baseUrl:Ae.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield cn().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return $e(this,void 0,void 0,function*(){for(yield Promise.resolve();Ae.downloads.length;)yield Ae.downloads[0]})}}Ae.baseUrl="";Ae.downloads=[];class Oc extends hh{constructor(){super({clockSource:"offline",context:fa(arguments[0])?arguments[0]:VA(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:fa(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=fa(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return $e(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return $e(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Ae(t)})}close(){return Promise.resolve()}}const pg=new QA;let Vs=pg;function cn(){return Vs===pg&&UA&&JA(new hh),Vs}function JA(n,e=!1){e&&Vs.dispose(),Tr(n)?Vs=new hh(n):fa(n)?Vs=new Oc(n):Vs=n}function eR(){return Vs.resume()}if(Hs&&!Hs.TONE_SILENCE_LOGGING){const e=` * Tone.js v${fm} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function tR(n){return Math.pow(10,n/20)}function nR(n){return 20*(Math.log(n)/Math.LN10)}function mg(n){return Math.pow(2,n/12)}let Ac=440;function sR(){return Ac}function rR(n){Ac=n}function Jl(n){return Math.round(gg(n))}function gg(n){return 69+12*Math.log2(n/Ac)}function iR(n){return Ac*Math.pow(2,(n-69)/12)}class fh extends rs{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof fh&&this.fromType(this._val),Ut(this._val))return this._noArg();if(Zn(this._val)&&Ut(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(qs(this._val)){let e=0;for(const t in this._val)if(xe(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(xe(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Zn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ln extends fh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new ln(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new ln(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new ln(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Jl(this.toFrequency())}_now(){return this.context.now()}}class Zt extends ln{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return sR()}static set A4(e){rR(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Zt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=oR[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:Zt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new Zt(this.context,this.valueOf()*mg(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Jl(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Zt.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),aR[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return iR(e)}static ftom(e){return Jl(e)}}const oR={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},aR=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Fi extends ln{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class At extends rs{constructor(){super();const e=Z(At.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:cn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return LA(e),new ln(this.context,e).toSeconds()}toFrequency(e){return new Zt(this.context,e).toFrequency()}toTicks(e){return new Fi(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ut(e[s])&&delete t[s]}),t}get(){const e=GA(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];xe(s)&&xe(s.value)&&xe(s.setValueAtTime)?e[t]=s.value:s instanceof At?e[t]=s._getPartialProperties(e[t]):hn(s)||ws(s)||Zn(s)||FA(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&xe(this[t])&&(this[t]&&xe(this[t].value)&&xe(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof At?this[t].set(e[t]):this[t]=e[t])}),this}}class ph extends En{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return pn(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Re extends At{constructor(){super(Z(Re.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=Z(Re.getDefaults(),arguments,["param","units","convert"]);for(me(xe(e.param)&&(tr(e.param)||e.param instanceof Re),"param must be an AudioParam");!tr(e.param);)e.param=e.param._param;this._swappable=xe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new En(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,xe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(At.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return xe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return xe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return xe(this.maxValue)&&xe(this.minValue)&&pn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?tR(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?nR(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return me(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return me(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=an(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return me(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);me(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),me(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return me(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));me(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&an(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){me(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class ue extends At{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return xe(this.input)?tr(this.input)||this.input instanceof Re?1:this.input.numberOfInputs:0}get numberOfOutputs(){return xe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return xe(e)&&(e instanceof ue||ms(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();me(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return ks(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return lh("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return cR(this,e,t,s),this}chain(...e){return Zi(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),xe(this.input)&&(this.input instanceof ue?this.input.dispose():ms(this.input)&&this.input.disconnect()),xe(this.output)&&(this.output instanceof ue?this.output.dispose():ms(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Zi(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof ue?t.connect(s):ms(t)&&ks(t,s),s),e)}function ks(n,e,t=0,s=0){for(me(xe(n),"Cannot connect from undefined node"),me(xe(e),"Cannot connect to undefined node"),(e instanceof ue||ms(e))&&me(e.numberOfInputs>0,"Cannot connect to node with no inputs"),me(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ue||e instanceof Re;)xe(e.input)&&(e=e.input);for(;n instanceof ue;)xe(n.output)&&(n=n.output);tr(e)?n.connect(e,t):n.connect(e,t,s)}function cR(n,e,t=0,s=0){if(xe(e))for(;e instanceof ue;)e=e.input;for(;!ms(n);)xe(n.output)&&(n=n.output);tr(e)?n.disconnect(e,t):ms(e)?n.disconnect(e,t,s):n.disconnect()}class Fe extends ue{constructor(){super(Z(Fe.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=Z(Fe.getDefaults(),arguments,["gain","units"]);this.gain=new Re({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ve(this,"gain")}static getDefaults(){return Object.assign(ue.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Wr extends ue{constructor(e){super(e),this.onended=Oe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Fe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ue.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Oe})}_startGain(e,t=1){me(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){me(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Oe&&(this.onended(this),this.onended=Oe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),me(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Oe,this}}class Wa extends Wr{constructor(){super(Z(Wa.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=Z(Wa.getDefaults(),arguments,["offset"]);ks(this._source,this._gainNode),this.offset=new Re({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Wr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class je extends ue{constructor(){super(Z(je.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=Z(je.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Wa({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ue.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return mh(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function mh(n,e,t,s){(e instanceof Re||tr(e)||e instanceof je&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof je&&(e.overridden=!0)),ks(n,e,t,s)}class qa extends Re{constructor(){super(Z(qa.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new En(1/0),this._multiplier=1;const e=Z(qa.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Re.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ut(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Ha extends je{constructor(){super(Z(Ha.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=Z(Ha.getDefaults(),arguments,["value"]);this.input=this._param=new qa({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ya extends At{constructor(){super(Z(Ya.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ph,this._tickOffset=new En,this._ticksAtTime=new En,this._secondsAtTime=new En;const e=Z(Ya.getDefaults(),arguments,["frequency"]);this.frequency=new Ha({context:this.context,units:e.units,value:e.frequency}),Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},At.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),xe(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!=s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=an(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ki extends At{constructor(){super(Z(Ki.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Oe,this._lastUpdate=0,this._state=new ph("stopped"),this._boundLoop=this._loop.bind(this);const e=Z(Ki.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ya({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(At.getDefaults(),{callback:Oe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){og(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Fo.mixin(Ki);class gh extends rs{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Z(gh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Oe,onload:Oe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return me(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=Oe,r=Oe){return Zn(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ae(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new Ae(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Sr extends Fi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class lR extends At{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new En,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Cc(n=>{n.draw=new lR({context:n})});Sc(n=>{n.draw.dispose()});class uR extends rs{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){me(xe(e.time),"Events must have a time property"),me(xe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new hR(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class hR{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ts extends ue{constructor(){super(Z(Ts.getDefaults(),arguments,["volume"])),this.name="Volume";const e=Z(Ts.getDefaults(),arguments,["volume"]);this.input=this.output=new Fe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ve(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let dR=class eu extends ue{constructor(){super(Z(eu.getDefaults(),arguments)),this.name="Destination",this.input=new Ts({context:this.context}),this.output=new Fe({context:this.context}),this.volume=this.input.volume;const e=Z(eu.getDefaults(),arguments);Zi(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Zi(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};Cc(n=>{n.destination=new dR({context:n})});Sc(n=>{n.destination.dispose()});class fR extends rs{constructor(e){super(),this.name="TimelineValue",this._timeline=new En({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Kn extends ue{constructor(){super(Object.assign(Z(Kn.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return mh(this,e,t,s),this}}class nr extends Kn{constructor(){super(Object.assign(Z(nr.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=Z(nr.getDefaults(),arguments,["mapping","length"]);hn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):$A(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(je.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));me(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Qi extends Kn{constructor(){super(Object.assign(Z(Qi.getDefaults(),arguments,["value"]))),this.name="Pow";const e=Z(Qi.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new nr({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Kn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Es{constructor(e,t){this.id=Es._eventId++,this._remainderTime=0;const s=Object.assign(Es.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Oe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Es._eventId=0;class _h extends Es{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(_h.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Es.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Ba(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Sr(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Ba(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Sr(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Br(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ji extends At{constructor(){super(Z(Ji.getDefaults(),arguments)),this.name="Transport",this._loop=new fR(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new En,this._repeatedEvents=new uR,this._syncedSignals=[],this._swingAmount=0;const e=Z(Ji.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Ki({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ve(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(At.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Sr(this.context,this._swingTicks*2/3).toSeconds()*r}jf(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),jf(!1)}schedule(e,t){const s=new Es(this,{callback:e,time:new Fi(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new _h(this,{callback:e,duration:new ln(this.context,r).toTicks(),interval:new ln(this.context,t).toTicks(),time:new Fi(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Es(this,{callback:e,once:!0,time:new Fi(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Sr(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return xe(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){hn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ln(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ln(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Sr(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Sr(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,l=new Fe(c),u=new Qi(-1),h=new Fe(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/i:t=0);const a=new Fe(t);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),dh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Fo.mixin(Ji);Cc(n=>{n.transport=new Ji({context:n})});Sc(n=>{n.transport.dispose()});class _t extends ue{constructor(e){super(e),this.input=void 0,this._state=new ph("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Oe,this._syncedStop=Oe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ts({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,onstop:Oe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Ut(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")me(Br(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Mr(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else og(this.context),this._start(r,t,s);return this}stop(e){let t=Ut(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||xe(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Br(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Oe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class qr extends Wr{constructor(){super(Z(qr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=Z(qr.getDefaults(),arguments,["url","onload"]);ks(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Re({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ae(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Wr.getDefaults(),{url:new Ae,loop:!1,loopEnd:0,loopStart:0,onload:Oe,onerror:Oe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){me(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Mr(t,this.loopStart):t=Mr(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Ql(o,a)&&(o=(o-c)%l+c),an(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ba(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),xe(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class eo extends _t{constructor(){super(Z(eo.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=Z(eo.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(_t.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(me(e in zf,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=zf[this._type];this._source=new qr({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const br=44100*5,cl=2,Ln={brown:null,pink:null,white:null},zf={get brown(){if(!Ln.brown){const n=[];for(let e=0;e<cl;e++){const t=new Float32Array(br);n[e]=t;let s=0;for(let r=0;r<br;r++){const i=Math.random()*2-1;t[r]=(s+.02*i)/1.02,s=t[r],t[r]*=3.5}}Ln.brown=new Ae().fromArray(n)}return Ln.brown},get pink(){if(!Ln.pink){const n=[];for(let e=0;e<cl;e++){const t=new Float32Array(br);n[e]=t;let s,r,i,o,a,c,l;s=r=i=o=a=c=l=0;for(let u=0;u<br;u++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,c=-.7616*c-h*.016898,t[u]=s+r+i+o+a+c+l+h*.5362,t[u]*=.11,l=h*.115926}}Ln.pink=new Ae().fromArray(n)}return Ln.pink},get white(){if(!Ln.white){const n=[];for(let e=0;e<cl;e++){const t=new Float32Array(br);n[e]=t;for(let s=0;s<br;s++)t[s]=Math.random()*2-1}Ln.white=new Ae().fromArray(n)}return Ln.white}};function ur(n,e){return $e(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Oc(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Ga extends Wr{constructor(){super(Z(Ga.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=Z(Ga.getDefaults(),arguments,["frequency","type"]);ks(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Re({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Re({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(Wr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class rt extends _t{constructor(){super(Z(rt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Z(rt.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),Ve(this,"frequency"),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Ve(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new Ga({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return rt._periodicWaveCache.find(t=>t.phase===this._phase&&YA(t.partials,this._partials));{const e=rt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(xe(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),rt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),rt._periodicWaveCache.length>100&&rt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){pn(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return XA(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}rt._periodicWaveCache=[];class pR extends Kn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new nr({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Cs extends je{constructor(){super(Object.assign(Z(Cs.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=Z(Cs.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Fe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class to extends _t{constructor(){super(Z(to.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new pR({context:this.context}),this._modulationNode=new Fe({context:this.context});const e=Z(to.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new rt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Cs({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ve(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class no extends _t{constructor(){super(Z(no.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Fe({context:this.context,gain:0});const e=Z(no.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new rt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new rt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Cs({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Cs({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ve(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Hr extends _t{constructor(){super(Z(Hr.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Fe({context:this.context,gain:0}),this._thresh=new nr({context:this.context,mapping:t=>t<=0?-1:1});const e=Z(Hr.getDefaults(),arguments,["frequency","width"]);this.width=new je({context:this.context,units:"audioRange",value:e.width}),this._triangle=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ve(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class so extends _t{constructor(){super(Z(so.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=Z(so.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(rt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(pn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new rt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Oe});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ro extends _t{constructor(){super(Z(ro.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Cs({context:this.context,value:2});const e=Z(ro.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Hr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ve(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Vf={am:to,fat:so,fm:no,oscillator:rt,pulse:Hr,pwm:ro};class sr extends _t{constructor(){super(Z(sr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=Z(sr.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Ve(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(rt.getDefaults(),no.getDefaults(),to.getDefaults(),so.getDefaults(),Hr.getDefaults(),ro.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Vf[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Vf[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&ws(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&ws(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Zn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return $e(this,void 0,void 0,function*(){return ur(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class yh extends je{constructor(){super(Object.assign(Z(yh.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Fe({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Zi(this._constantSource,this._sum)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Xa extends Kn{constructor(){super(Object.assign(Z(Xa.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=Z(Xa.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Cs({context:this.context,value:e.max-e.min}),this._add=this.output=new yh({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Kn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function _g(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){pn(i,n,e),t.set(this,i)}})}}function is(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){pn(this.toSeconds(i),n,e),t.set(this,i)}})}}class io extends _t{constructor(){super(Z(io.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=Z(io.getDefaults(),arguments,["url","onload"]);this._buffer=new Ae({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(_t.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Oe,onerror:Oe,playbackRate:1,reverse:!1})}load(e){return $e(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Oe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Mr(t,this._loopStart):t=Mr(t,0);const r=this.toSeconds(t),i=s;s=Mr(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new qr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Ut(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}gn([is(0)],io.prototype,"fadeIn",void 0);gn([is(0)],io.prototype,"fadeOut",void 0);class mR extends Kn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new nr({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class tn extends ue{constructor(){super(Z(tn.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new je({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=Z(tn.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ue.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Zn(e))return e;{let s;for(s in ra)if(ra[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Zn(s)&&Reflect.has(ra,s)){const r=ra[s];qs(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(hn(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(me(hn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return mh(this,e,t,s),this}asArray(e=1024){return $e(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new Oc(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}gn([is(0)],tn.prototype,"attack",void 0);gn([is(0)],tn.prototype,"decay",void 0);gn([_g(0,1)],tn.prototype,"sustain",void 0);gn([is(0)],tn.prototype,"release",void 0);const ra=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let g=0;g<d.length;g++)f[g]=1-d[g];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class rr extends ue{constructor(){super(Z(rr.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=Z(rr.getDefaults(),arguments);this._volume=this.output=new Ts({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume")}static getDefaults(){return Object.assign(ue.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Qn extends rr{constructor(){super(Z(Qn.getDefaults(),arguments));const e=Z(Qn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(rr.getDefaults(),{detune:0,onsilence:Oe,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof Zt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}gn([is(0)],Qn.prototype,"portamento",void 0);class Rc extends tn{constructor(){super(Z(Rc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Fe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class oo extends Qn{constructor(){super(Z(oo.getDefaults(),arguments)),this.name="Synth";const e=Z(oo.getDefaults(),arguments);this.oscillator=new sr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Rc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ve(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Qn.getDefaults(),{envelope:Object.assign(Cr(tn.getDefaults(),Object.keys(ue.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Cr(sr.getDefaults(),[...Object.keys(_t.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ao extends ue{constructor(){super(Z(ao.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=Z(ao.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Re({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Re({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Re({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Re({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ue.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){me(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Yr extends ue{constructor(){super(Z(Yr.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Fe({context:this.context}),this.output=new Fe({context:this.context}),this._filters=[];const e=Z(Yr.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new je({context:this.context,units:"positive",value:e.Q}),this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this.gain=new je({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ve(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ue.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){me(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=ws(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(t);me(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new ao({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,Zi(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new ao({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),dh(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class co extends tn{constructor(){super(Z(co.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=Z(co.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Qi({context:this.context,value:e.exponent}),this._scale=this.output=new Xa({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(tn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);pn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class lo extends Qn{constructor(){super(Z(lo.getDefaults(),arguments)),this.name="MonoSynth";const e=Z(lo.getDefaults(),arguments);this.oscillator=new sr(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Yr(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new co(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Rc(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ve(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Qn.getDefaults(),{envelope:Object.assign(Cr(tn.getDefaults(),Object.keys(ue.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Cr(Yr.getDefaults(),Object.keys(ue.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Cr(co.getDefaults(),Object.keys(ue.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Cr(sr.getDefaults(),Object.keys(_t.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class uo extends oo{constructor(){super(Z(uo.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=Z(uo.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ve(this,["oscillator","envelope"])}static getDefaults(){return Pr(Qn.getDefaults(),oo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof Zt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}gn([_g(0)],uo.prototype,"octaves",void 0);gn([is(0)],uo.prototype,"pitchDecay",void 0);const yg=new Set;function vh(n){yg.add(n)}function vg(n,e){const t=`registerProcessor("${n}", ${e})`;yg.add(t)}const gR=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;vh(gR);const _R=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;vh(_R);const yR=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;vh(yR);const vR="feedback-comb-filter",bR=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;vg(vR,bR);class ho extends rr{constructor(){super(Z(ho.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=Z(ho.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(me(sa(s)||ws(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),sa(s)){const i=new Zt(this.context,s).toMidi();t[i]=e.urls[s]}else ws(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new gh({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(rr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Oe,onerror:Oe,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=gg(new Zt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=mg(c+a),d=new qr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,s),hn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),g=f.indexOf(d);g!==-1&&f.splice(g,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new Zt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),hn(t)?(me(hn(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(me(sa(e)||isFinite(e),`note must be a pitch or midi: ${e}`),sa(e)){const r=new Zt(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}gn([is(0)],ho.prototype,"attack",void 0);gn([is(0)],ho.prototype,"release",void 0);class Za extends ue{constructor(){super(Object.assign(Z(Za.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new mR({context:this.context}),this.a=new Fe({context:this.context,gain:0}),this.b=new Fe({context:this.context,gain:0}),this.output=new Fe({context:this.context}),this._internalChannels=[this.a,this.b];const e=Z(Za.getDefaults(),arguments,["fade"]);this.fade=new je({context:this.context,units:"normalRange",value:e.fade}),Ve(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ks(this._split,this.a.gain,0),ks(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ue.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Uf extends ue{constructor(e){super(e),this.name="Effect",this._dryWet=new Za({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Fe({context:this.context}),this.effectReturn=new Fe({context:this.context}),this.input=new Fe({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ve(this,"wet")}static getDefaults(){return Object.assign(ue.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Ka extends ue{constructor(){super(Object.assign(Z(Ka.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=Z(Ka.getDefaults(),arguments,["pan"]);this.pan=new Re({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ve(this,"pan")}static getDefaults(){return Object.assign(ue.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const xR="bit-crusher",wR=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;vg(xR,wR);class Qa extends ue{constructor(){super(Z(Qa.getDefaults(),arguments,["channels"])),this.name="Merge";const e=Z(Qa.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ue.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Ja extends Uf{constructor(){super(Z(Ja.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=Z(Ja.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Uf.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),pn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),pn(e,0),this._preDelay=e,this.generate()}generate(){return $e(this,void 0,void 0,function*(){const e=this.ready,t=new Oc(2,this._decay+this._preDelay,this.context.sampleRate),s=new eo({context:t}),r=new eo({context:t}),i=new Qa({context:t});s.connect(i,0,0),r.connect(i,0,1);const o=new Fe({context:t}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then(Oe),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class nt extends ue{constructor(){super(Z(nt.getDefaults(),arguments,["solo"])),this.name="Solo";const e=Z(nt.getDefaults(),arguments,["solo"]);this.input=this.output=new Fe({context:this.context}),nt._allSolos.has(this.context)||nt._allSolos.set(this.context,new Set),nt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ue.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),nt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){nt._soloed.has(this.context)||nt._soloed.set(this.context,new Set),nt._soloed.get(this.context).add(this)}_removeSolo(){nt._soloed.has(this.context)&&nt._soloed.get(this.context).delete(this)}_isSoloed(){return nt._soloed.has(this.context)&&nt._soloed.get(this.context).has(this)}_noSolos(){return!nt._soloed.has(this.context)||nt._soloed.has(this.context)&&nt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),nt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}nt._allSolos=new Map;nt._soloed=new Map;class ec extends ue{constructor(){super(Z(ec.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=Z(ec.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ka({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ts({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(ue.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class js extends ue{constructor(){super(Z(js.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=Z(js.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new nt({solo:e.solo,context:this.context}),this._panVol=this.output=new ec({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(ue.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return js.buses.has(e)||js.buses.set(e,new Fe({context:this.context})),js.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new Fe({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}js.buses=new Map;class kR extends ue{constructor(){super(...arguments),this.name="Listener",this.positionX=new Re({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Re({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Re({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Re({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Re({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Re({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Re({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Re({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Re({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ue.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Cc(n=>{n.listener=new kR({context:n})});Sc(n=>{n.listener.dispose()});cn().transport;const bh=cn().destination;cn().destination;cn().listener;cn().draw;cn();const xh=new Yr(900,"highpass"),bg=new Ts(-6);bg.chain(xh,bh);const TR=new Ja(3).connect(bg),Dc=new lo({envelope:{attack:0,decay:.9,sustain:.2,release:.1}});Dc.oscillator.type="triangle2";Dc.volume.value=-6;Dc.chain(xh,bh);const Pc=new lo({envelope:{attack:.4,decay:.9,sustain:.7,release:.6}}).connect(TR);Pc.oscillator.type="triangle";Pc.volume.value=-6;Pc.chain(xh,bh);function ER(){return Math.floor((Math.random()-.5)*20)}let Bf=!1;const CR=async(n=0)=>{Bf||(await eR(),Bf=!0);try{if(n>2e3)Pc.triggerAttackRelease(60,.3);else if(n>1e3){let e=310;e+=ER(),Dc.triggerAttackRelease(e,.001)}}catch(e){console.warn(e)}},ia=1800,SR=(n,e)=>n.clone().normalize().clone().negate().normalize().multiplyScalar(e).add(n),OR=(n,e,t,s,r)=>{const i=new Tp,o=1e-5;i.absarc(o,o,o,-Math.PI/2,-Math.PI,!0),i.absarc(o,e-s*2,o,Math.PI,Math.PI/2,!0),i.absarc(n-s*2,e-s*2,o,Math.PI/2,0,!0),i.absarc(n-s*2,o,o,0,-Math.PI/2,!0);const a=new Ay(i,{depth:t-s*2,bevelEnabled:!0,bevelSegments:r,steps:2,bevelSize:s,bevelThickness:s,curveSegments:r});a.center();const c=[],l=a.getAttribute("normal"),u=a.getAttribute("position");for(let h=0;h<u.count;h+=1){const d=new _e(l.getX(h),l.getY(h),l.getZ(h)),f=new _e(u.getX(h),u.getY(h),u.getZ(h));let g=0,p=0;Math.abs(d.y)>.9?(g=f.x/n+.5,p=1-(f.z/t+.5)):Math.abs(d.x)>.9?(g=-f.z/t+.5,p=1-(-f.y/e+.5)):Math.abs(d.z)>.9&&(g=f.x/n+.5,p=1-(-f.y/e+.5)),c.push(g,p)}return a.setAttribute("uv",new ua(c,2)),a};OR(10,10,10,2,10);new Oy(10,10,10);const AR=500,RR=800;let Ei=null;const DR=500,xg=(n,e)=>{if(Ei)return null;Ei=setTimeout(()=>{Ei&&(clearTimeout(Ei),Ei=null)},DR);const t=[];return n.forEach(r=>{const i=e.position.distanceTo(CE.set(r.x,r.y,r.z));i<RR&&t.push({id:r.ref_id||"",distance:i})}),t.sort((r,i)=>r.distance-i.distance).slice(0,AR).map(r=>r.id)};let xr,Ci;const PR=1e3,MR=2e3,NR=n=>{const e=As(),t=Ws(x=>x.isUserDragging),s=Ws(x=>x.isUserScrolling),r=Ws(x=>x.setUserMovedCamera),{data:i,graphStyle:o,showSelectionGraph:a,setNearbyNodeIds:c,cameraFocusTrigger:l,graphRadius:u}=Ue(x=>x),{camera:h}=Ye(),[d,f]=b.useState(!1),[g,p]=b.useState(!1),[m,_]=b.useState(bf),T=b.useMemo(()=>{if(a)return new _e(0,0,0);const x=i==null?void 0:i.nodes.find(R=>R.ref_id===(e==null?void 0:e.ref_id)),C=u+300;let S=new _e(0,0,C);if(x&&i){const R=i==null?void 0:i.nodes.filter(B=>{var V;return(V=x.children)==null?void 0:V.find(U=>U===B.id)}),O=new _e(x.x,x.y,x.z);let L=new _e(0,0,0);R.map(B=>(L=L.add(new _e(B.x,B.y,B.z).normalize()),B));const z=x.scale?1-1/(x.scale+10):1,W=O.sub(L).multiplyScalar(.8*z);S=O.add(W)}return S},[a,e,i,u]),w=b.useMemo(()=>{if(a)return new _e(0,0,0);const x=i==null?void 0:i.nodes.find(C=>C.ref_id===(e==null?void 0:e.ref_id));return new _e((x==null?void 0:x.x)||0,(x==null?void 0:x.y)||0,(x==null?void 0:x.z)||0)},[a,e,i]);b.useEffect(()=>{var x;a&&((x=n.current)==null||x.setLookAt(ps.x,ps.y,ps.z,0,0,0,!1)),y()},[a]),b.useEffect(()=>{a?_(AE):(e==null?void 0:e.node_type)==="topic"?_(OE):_(bf)},[e,_,a]),b.useEffect(()=>{v()},[l]),b.useEffect(()=>{(t||s)&&(f(!0),p(!0))},[t,s,f,p]),b.useEffect(()=>{if(e)if(!a&&o==="earth"&&(n!=null&&n.current)){const x=n.current.camera.position.distanceTo(new _e),C=SR(w,-x/2);n.current.setLookAt(C.x,C.y,C.z,0,0,0,!0)}else xr&&clearTimeout(xr),xr=setTimeout(()=>{p(!0),clearTimeout(xr)},MR),y();return()=>{xr&&clearTimeout(xr),Ci&&clearTimeout(Ci)}},[e]),qt(x=>{n.current&&(d||k(T,x.camera),g||E(w,x.camera))});const y=()=>{if(e){const x=h.position.distanceTo(T);CR(x)}v()},v=()=>{f(!1),p(!1),r(!1),Ci&&clearTimeout(Ci),Ci=setTimeout(()=>{f(!0),p(!0)},PR)},k=(x,C)=>{if(C.position.distanceTo(x)<m)f(!0);else{C.position.lerp(x,.5);const R=xg((i==null?void 0:i.nodes)||[],h);R&&c(R)}},E=(x,C)=>{var S;(S=n==null?void 0:n.current)==null||S.setLookAt(C.position.x,C.position.y,C.position.z,x.x,x.y,x.z,!0)};return null};let oa=null;const IR=(n,{enabled:e})=>{const t=As();NR(n);const{graphRadius:s}=Ue(r=>r);return b.useEffect(()=>{e||(oa==null||oa.kill(),oa=null)},[e]),b.useEffect(()=>{!t&&n.current&&n.current.setLookAt($i.x,$i.y,s+200,0,0,0,!0)},[t,s]),null},$R=({disableAnimations:n})=>{const e=b.useRef(null),{data:t,setNearbyNodeIds:s,setDisableCameraRotation:r}=Ue(h=>h),[i]=b.useState(.8),{camera:o}=Ye(),[a,c,l,u]=Ws(h=>[h.isUserDragging,h.setIsUserDragging,h.isUserScrolling,h.isUserScrollingOnHtmlPanel]);return IR(e,{enabled:!n&&!l&&!a}),b.useEffect(()=>{if(!a){const h=xg((t==null?void 0:t.nodes)||[],o);h&&s(h)}},[o,o.position,o.position.x,o.position.y,o.position.z,t==null?void 0:t.nodes,s,a]),b.useEffect(()=>{a&&r(!0)},[a,r]),P.jsx(jp,{ref:e,boundaryEnclosesCamera:!0,dollyToCursor:!0,enabled:!u,makeDefault:!0,maxDistance:12e3,minDistance:100,onEnd:()=>c(!1),onStart:()=>c(!0),smoothTime:i})},FR=({node:n})=>{const{getNodeKeysByType:e}=Hn(r=>r),t=e(n.node_type)||"",s=n!=null&&n.properties?n==null?void 0:n.properties[t]:"";return P.jsx(LR,{children:P.jsxs(jR,{children:[P.jsx(zR,{children:P.jsx(Dy,{type:n.node_type})}),s&&P.jsx(VR,{children:s})]})})},LR=ye(Me)`
  width: 390px;
  min-height: 100px;
  background: ${oe.HOVER_CARD_BG};
  border-radius: 8px;
  padding: 15px;
  padding-bottom: 3px !important;
  flex-direction: column;
  gap: 4px;
  pointer-events: auto;
  align-items: flex-start;
`,jR=ye(Me)`
  margin-top: 0;
  flex-direction: column;
  gap: 4px;
  align-items: flex-start;
`,zR=ye(_p)`
  font-family: Barlow;
  font-size: 20px;
  font-weight: 600;
  line-height: 24px;
  color: ${oe.white};
  margin: 0;
`,VR=ye(_p)`
  font-family: Barlow;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  color: ${oe.white};
  margin: 0;
  opacity: 0.8;
  white-space: normal;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  line-clamp: 3;
  -webkit-line-clamp: 3;
`,tc=70,UR=()=>{const n=b.useRef(null),e=b.useRef(null),t=xp();return b.useEffect(()=>{n.current&&(n.current.style.display=t?"block":"none")},[t]),b.useEffect(()=>{const s=document.getElementById("universe-canvas");let r;const i=n.current,o=e.current,a=c=>{if(!i||!o)return;c.target.tagName!=="CANVAS"?(i.style.display="none",o.style.display="none"):(s&&(s.style.cursor="none"),o.style.display="flex"),i.style.display="block";const u=i.offsetWidth,h=i.offsetHeight,d=window.innerWidth-u-10,f=window.innerHeight-h-10,g=Math.min(c.clientX+10,d),p=Math.min(c.clientY+10,f);r=requestAnimationFrame(()=>{i.style.transform=`translate(${g}px, ${p}px)`,o.style.transform=`translate(${c.clientX-tc/2}px, ${c.clientY-tc/2}px)`})};return window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a),cancelAnimationFrame(r)}},[]),P.jsxs(P.Fragment,{children:[P.jsx(WR,{ref:e,children:P.jsx(Me,{className:"inner-circle",children:P.jsx("span",{className:"inner-circle__center",children:"+"})})}),P.jsx(BR,{ref:n,children:t&&P.jsx(FR,{node:t})})]})},BR=ye(Me)`
  position: fixed; /* Fixed position for the tooltip */
  left: 0;
  top: 0;
  transform: translate(0, 0); /* Initial transform */
  will-change: transform; /* Optimize for transform changes */
  background: ${oe.BG1};
  color: white;
  padding: 0;
  border-radius: 3px;
  pointer-events: none; /* Tooltip won't block mouse events */
  z-index: 1000;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: none; /* Initially hidden */
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* Optional shadow for better visibility */
`,WR=ye(Me)`
  pointer-events: none;
  left: 0;
  top: 0;
  border: 1px solid ${oe.white};
  border-radius: 50%;
  border-color: rgba(255, 255, 255, 0.2);
  position: fixed;
  background: rgba(0, 0, 0, 0.2);
  width: ${tc}px;
  height: ${tc}px;
  align-items: center;
  justify-content: center;

  .inner-circle {
    border-radius: 50%;
    border: 1px solid ${oe.white};
    border-color: rgba(255, 255, 255, 0.2);
    justify-content: center;
    align-items: center;
    color: rgba(255, 255, 255, 1);
    font-size: 6px;
    text-transform: uppercase;
    font-weight: 300;
    background: radial-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.1));

    &__text {
      animation: fadeOpacity 8s infinite;
      padding: 12px;

      /* Define keyframes */
      @keyframes fadeOpacity {
        0%,
        100% {
          opacity: 0.2;
        }
        50% {
          opacity: 0.8;
        }
      }
    }

    &__center {
      font-size: 20px;
      font-weight: 200;
      opacity: 0.5;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
      margin-top: -2px;
    }
  }
`;function zn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wg(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Bt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Gr={duration:.5,overwrite:!1,delay:0},wh,mt,Ke,Kt=1e8,Ie=1/Kt,tu=Math.PI*2,qR=tu/4,HR=0,kg=Math.sqrt,YR=Math.cos,GR=Math.sin,dt=function(e){return typeof e=="string"},Qe=function(e){return typeof e=="function"},Jn=function(e){return typeof e=="number"},kh=function(e){return typeof e>"u"},Rn=function(e){return typeof e=="object"},Rt=function(e){return e!==!1},Th=function(){return typeof window<"u"},aa=function(e){return Qe(e)||dt(e)},Tg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},gt=Array.isArray,nu=/(?:-?\.?\d|\.)+/gi,Eg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Or=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ll=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Cg=/[+-]=-?[.\d]+/,Sg=/[^,'"\[\]\s]+/gi,XR=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ge,Gt,su,Eh,Wt={},nc={},Og,Ag=function(e){return(nc=ir(e,Wt))&&It},Ch=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},fo=function(e,t){return!t&&console.warn(e)},Rg=function(e,t){return e&&(Wt[e]=t)&&nc&&(nc[e]=t)||Wt},po=function(){return 0},ZR={suppressEvents:!0,isStart:!0,kill:!1},pa={suppressEvents:!0,kill:!1},KR={suppressEvents:!0},Sh={},gs=[],ru={},Dg,Ft={},ul={},Wf=30,ma=[],Oh="",Ah=function(e){var t=e[0],s,r;if(Rn(t)||Qe(t)||(e=[e]),!(s=(t._gsap||{}).harness)){for(r=ma.length;r--&&!ma[r].targetTest(t););s=ma[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new t_(e[r],s)))||e.splice(r,1);return e},Ys=function(e){return e._gsap||Ah(Qt(e))[0]._gsap},Pg=function(e,t,s){return(s=e[t])&&Qe(s)?e[t]():kh(s)&&e.getAttribute&&e.getAttribute(t)||s},Dt=function(e,t){return(e=e.split(",")).forEach(t)||e},st=function(e){return Math.round(e*1e5)/1e5||0},ut=function(e){return Math.round(e*1e7)/1e7||0},Nr=function(e,t){var s=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),s==="+"?e+r:s==="-"?e-r:s==="*"?e*r:e/r},QR=function(e,t){for(var s=t.length,r=0;e.indexOf(t[r])<0&&++r<s;);return r<s},sc=function(){var e=gs.length,t=gs.slice(0),s,r;for(ru={},gs.length=0,s=0;s<e;s++)r=t[s],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Mg=function(e,t,s,r){gs.length&&!mt&&sc(),e.render(t,s,r||mt&&t<0&&(e._initted||e._startAt)),gs.length&&!mt&&sc()},Ng=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Sg).length<2?t:dt(e)?e.trim():e},Ig=function(e){return e},nn=function(e,t){for(var s in t)s in e||(e[s]=t[s]);return e},JR=function(e){return function(t,s){for(var r in s)r in t||r==="duration"&&e||r==="ease"||(t[r]=s[r])}},ir=function(e,t){for(var s in t)e[s]=t[s];return e},qf=function n(e,t){for(var s in t)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(e[s]=Rn(t[s])?n(e[s]||(e[s]={}),t[s]):t[s]);return e},rc=function(e,t){var s={},r;for(r in e)r in t||(s[r]=e[r]);return s},Li=function(e){var t=e.parent||Ge,s=e.keyframes?JR(gt(e.keyframes)):nn;if(Rt(e.inherit))for(;t;)s(e,t.vars.defaults),t=t.parent||t._dp;return e},eD=function(e,t){for(var s=e.length,r=s===t.length;r&&s--&&e[s]===t[s];);return s<0},$g=function(e,t,s,r,i){s===void 0&&(s="_first"),r===void 0&&(r="_last");var o=e[r],a;if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[s],e[s]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Mc=function(e,t,s,r){s===void 0&&(s="_first"),r===void 0&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[s]===t&&(e[s]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Ss=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gs=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var s=e;s;)s._dirty=1,s=s.parent;return e},tD=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},iu=function(e,t,s,r){return e._startAt&&(mt?e._startAt.revert(pa):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},nD=function n(e){return!e||e._ts&&n(e.parent)},Hf=function(e){return e._repeat?Xr(e._tTime,e=e.duration()+e._rDelay)*e:0},Xr=function(e,t){var s=Math.floor(e/=t);return e&&s===e?s-1:s},ic=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Nc=function(e){return e._end=ut(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ie)||0))},Ic=function(e,t){var s=e._dp;return s&&s.smoothChildTiming&&e._ts&&(e._start=ut(s._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Nc(e),s._dirty||Gs(s,e)),e},Fg=function(e,t){var s;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(s=ic(e.rawTime(),t),(!t._dur||Lo(0,t.totalDuration(),s)-t._tTime>Ie)&&t.render(s,!0)),Gs(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(s=e;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;e._zTime=-Ie}},kn=function(e,t,s,r){return t.parent&&Ss(t),t._start=ut((Jn(s)?s:s||e!==Ge?Yt(e,s,t):e._time)+t._delay),t._end=ut(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),$g(e,t,"_first","_last",e._sort?"_start":0),ou(t)||(e._recent=t),r||Fg(e,t),e._ts<0&&Ic(e,e._tTime),e},Lg=function(e,t){return(Wt.ScrollTrigger||Ch("scrollTrigger",t))&&Wt.ScrollTrigger.create(t,e)},jg=function(e,t,s,r,i){if(Dh(e,t,i),!e._initted)return 1;if(!s&&e._pt&&!mt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Dg!==jt.frame)return gs.push(e),e._lazy=[i,r],1},sD=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},ou=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},rD=function(e,t,s,r){var i=e.ratio,o=t<0||!t&&(!e._start&&sD(e)&&!(!e._initted&&ou(e))||(e._ts<0||e._dp._ts<0)&&!ou(e))?0:1,a=e._rDelay,c=0,l,u,h;if(a&&e._repeat&&(c=Lo(0,e._tDur,t),u=Xr(c,a),e._yoyo&&u&1&&(o=1-o),u!==Xr(e._tTime,a)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||mt||r||e._zTime===Ie||!t&&e._zTime){if(!e._initted&&jg(e,t,r,s,c))return;for(h=e._zTime,e._zTime=t||(s?Ie:0),s||(s=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&iu(e,t,s,!0),e._onUpdate&&!s&&zt(e,"onUpdate"),c&&e._repeat&&!s&&e.parent&&zt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ss(e,1),!s&&!mt&&(zt(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},iD=function(e,t,s){var r;if(s>t)for(r=e._first;r&&r._start<=s;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=s;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Zr=function(e,t,s,r){var i=e._repeat,o=ut(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:ut(o*(i+1)+e._rDelay*i):o,a>0&&!r&&Ic(e,e._tTime=e._tDur*a),e.parent&&Nc(e),s||Gs(e.parent,e),e},Yf=function(e){return e instanceof wt?Gs(e):Zr(e,e._dur)},oD={_start:0,endTime:po,totalDuration:po},Yt=function n(e,t,s){var r=e.labels,i=e._recent||oD,o=e.duration()>=Kt?i.endTime(!1):e._dur,a,c,l;return dt(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l=t.substr(-1)==="%",a=t.indexOf("="),c==="<"||c===">"?(a>=0&&(t=t.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?i:s).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&s&&(c=c/100*(gt(s)?s[0]:s).totalDuration()),a>1?n(e,t.substr(0,a-1),s)+c:o+c)):t==null?o:+t},ji=function(e,t,s){var r=Jn(t[1]),i=(r?2:1)+(e<2?0:1),o=t[i],a,c;if(r&&(o.duration=t[1]),o.parent=s,e){for(a=o,c=s;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=Rt(c.vars.inherit)&&c.parent;o.immediateRender=Rt(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new ot(t[0],o,t[i+1])},Ps=function(e,t){return e||e===0?t(e):t},Lo=function(e,t,s){return s<e?e:s>t?t:s},pt=function(e,t){return!dt(e)||!(t=XR.exec(e))?"":t[1]},aD=function(e,t,s){return Ps(s,function(r){return Lo(e,t,r)})},au=[].slice,zg=function(e,t){return e&&Rn(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Rn(e[0]))&&!e.nodeType&&e!==Gt},cD=function(e,t,s){return s===void 0&&(s=[]),e.forEach(function(r){var i;return dt(r)&&!t||zg(r,1)?(i=s).push.apply(i,Qt(r)):s.push(r)})||s},Qt=function(e,t,s){return Ke&&!t&&Ke.selector?Ke.selector(e):dt(e)&&!s&&(su||!Kr())?au.call((t||Eh).querySelectorAll(e),0):gt(e)?cD(e,s):zg(e)?au.call(e,0):e?[e]:[]},cu=function(e){return e=Qt(e)[0]||fo("Invalid scope")||{},function(t){var s=e.current||e.nativeElement||e;return Qt(t,s.querySelectorAll?s:s===e?fo("Invalid scope")||Eh.createElement("div"):e)}},Vg=function(e){return e.sort(function(){return .5-Math.random()})},Ug=function(e){if(Qe(e))return e;var t=Rn(e)?e:{each:e},s=Xs(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,h=r;return dt(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],h=r[1]),function(d,f,g){var p=(g||t).length,m=o[p],_,T,w,y,v,k,E,x,C;if(!m){if(C=t.grid==="auto"?0:(t.grid||[1,Kt])[1],!C){for(E=-Kt;E<(E=g[C++].getBoundingClientRect().left)&&C<p;);C<p&&C--}for(m=o[p]=[],_=c?Math.min(C,p)*u-.5:r%C,T=C===Kt?0:c?p*h/C-.5:r/C|0,E=0,x=Kt,k=0;k<p;k++)w=k%C-_,y=T-(k/C|0),m[k]=v=l?Math.abs(l==="y"?y:w):kg(w*w+y*y),v>E&&(E=v),v<x&&(x=v);r==="random"&&Vg(m),m.max=E-x,m.min=x,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(C>p?p-1:l?l==="y"?p/C:C:Math.max(C,p/C))||0)*(r==="edges"?-1:1),m.b=p<0?i-p:i,m.u=pt(t.amount||t.each)||0,s=s&&p<0?Qg(s):s}return p=(m[d]-m.min)/m.max||0,ut(m.b+(s?s(p):p)*m.v)+m.u}},lu=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(s){var r=ut(Math.round(parseFloat(s)/e)*e*t);return(r-r%1)/t+(Jn(s)?0:pt(s))}},Bg=function(e,t){var s=gt(e),r,i;return!s&&Rn(e)&&(r=s=e.radius||Kt,e.values?(e=Qt(e.values),(i=!Jn(e[0]))&&(r*=r)):e=lu(e.increment)),Ps(t,s?Qe(e)?function(o){return i=e(o),Math.abs(i-o)<=r?i:o}:function(o){for(var a=parseFloat(i?o.x:o),c=parseFloat(i?o.y:0),l=Kt,u=0,h=e.length,d,f;h--;)i?(d=e[h].x-a,f=e[h].y-c,d=d*d+f*f):d=Math.abs(e[h]-a),d<l&&(l=d,u=h);return u=!r||l<=r?e[u]:o,i||u===o||Jn(o)?u:u+pt(o)}:lu(e))},Wg=function(e,t,s,r){return Ps(gt(e)?!t:s===!0?!!(s=0):!r,function(){return gt(e)?e[~~(Math.random()*e.length)]:(s=s||1e-5)&&(r=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((e-s/2+Math.random()*(t-e+s*.99))/s)*s*r)/r})},lD=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(r){return t.reduce(function(i,o){return o(i)},r)}},uD=function(e,t){return function(s){return e(parseFloat(s))+(t||pt(s))}},hD=function(e,t,s){return Hg(e,t,0,1,s)},qg=function(e,t,s){return Ps(s,function(r){return e[~~t(r)]})},dD=function n(e,t,s){var r=t-e;return gt(e)?qg(e,n(0,e.length),t):Ps(s,function(i){return(r+(i-e)%r)%r+e})},fD=function n(e,t,s){var r=t-e,i=r*2;return gt(e)?qg(e,n(0,e.length-1),t):Ps(s,function(o){return o=(i+(o-e)%i)%i||0,e+(o>r?i-o:o)})},mo=function(e){for(var t=0,s="",r,i,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",i=e.substr(r+7,o-r-7).match(a?Sg:nu),s+=e.substr(t,r-t)+Wg(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),t=o+1;return s+e.substr(t,e.length-t)},Hg=function(e,t,s,r,i){var o=t-e,a=r-s;return Ps(i,function(c){return s+((c-e)/o*a||0)})},pD=function n(e,t,s,r){var i=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!i){var o=dt(e),a={},c,l,u,h,d;if(s===!0&&(r=1)&&(s=null),o)e={p:e},t={p:t};else if(gt(e)&&!gt(t)){for(u=[],h=e.length,d=h-2,l=1;l<h;l++)u.push(n(e[l-1],e[l]));h--,i=function(g){g*=h;var p=Math.min(d,~~g);return u[p](g-p)},s=t}else r||(e=ir(gt(e)?[]:{},e));if(!u){for(c in t)Rh.call(a,e,c,"get",t[c]);i=function(g){return Nh(g,a)||(o?e.p:e)}}}return Ps(s,i)},Gf=function(e,t,s){var r=e.labels,i=Kt,o,a,c;for(o in r)a=r[o]-t,a<0==!!s&&a&&i>(a=Math.abs(a))&&(c=o,i=a);return c},zt=function(e,t,s){var r=e.vars,i=r[t],o=Ke,a=e._ctx,c,l,u;if(i)return c=r[t+"Params"],l=r.callbackScope||e,s&&gs.length&&sc(),a&&(Ke=a),u=c?i.apply(l,c):i.call(l),Ke=o,u},Ri=function(e){return Ss(e),e.scrollTrigger&&e.scrollTrigger.kill(!!mt),e.progress()<1&&zt(e,"onInterrupt"),e},Ar,Yg=[],Gg=function(e){if(Th()&&e){e=!e.name&&e.default||e;var t=e.name,s=Qe(e),r=t&&!s&&e.init?function(){this._props=[]}:e,i={init:po,render:Nh,add:Rh,kill:RD,modifier:AD,rawVars:0},o={targetTest:0,get:0,getSetter:Mh,aliases:{},register:0};if(Kr(),e!==r){if(Ft[t])return;nn(r,nn(rc(e,i),o)),ir(r.prototype,ir(i,rc(e,o))),Ft[r.prop=t]=r,e.targetTest&&(ma.push(r),Sh[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Rg(t,r),e.register&&e.register(It,r,Pt)}else e&&Yg.push(e)},Ne=255,Di={aqua:[0,Ne,Ne],lime:[0,Ne,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ne],navy:[0,0,128],white:[Ne,Ne,Ne],olive:[128,128,0],yellow:[Ne,Ne,0],orange:[Ne,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ne,0,0],pink:[Ne,192,203],cyan:[0,Ne,Ne],transparent:[Ne,Ne,Ne,0]},hl=function(e,t,s){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(s-t)*e*6:e<.5?s:e*3<2?t+(s-t)*(2/3-e)*6:t)*Ne+.5|0},Xg=function(e,t,s){var r=e?Jn(e)?[e>>16,e>>8&Ne,e&Ne]:0:Di.black,i,o,a,c,l,u,h,d,f,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Di[e])r=Di[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+i+i+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Ne,r&Ne,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Ne,e&Ne]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(nu),!t)c=+r[0]%360/360,l=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(l+1):u+l-u*l,i=u*2-o,r.length>3&&(r[3]*=1),r[0]=hl(c+1/3,i,o),r[1]=hl(c,i,o),r[2]=hl(c-1/3,i,o);else if(~e.indexOf("="))return r=e.match(Eg),s&&r.length<4&&(r[3]=1),r}else r=e.match(nu)||Di.transparent;r=r.map(Number)}return t&&!g&&(i=r[0]/Ne,o=r[1]/Ne,a=r[2]/Ne,h=Math.max(i,o,a),d=Math.min(i,o,a),u=(h+d)/2,h===d?c=l=0:(f=h-d,l=u>.5?f/(2-h-d):f/(h+d),c=h===i?(o-a)/f+(o<a?6:0):h===o?(a-i)/f+2:(i-o)/f+4,c*=60),r[0]=~~(c+.5),r[1]=~~(l*100+.5),r[2]=~~(u*100+.5)),s&&r.length<4&&(r[3]=1),r},Zg=function(e){var t=[],s=[],r=-1;return e.split(_s).forEach(function(i){var o=i.match(Or)||[];t.push.apply(t,o),s.push(r+=o.length+1)}),t.c=s,t},Xf=function(e,t,s){var r="",i=(e+r).match(_s),o=t?"hsla(":"rgba(",a=0,c,l,u,h;if(!i)return e;if(i=i.map(function(d){return(d=Xg(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),s&&(u=Zg(e),c=s.c,c.join(r)!==u.c.join(r)))for(l=e.replace(_s,"1").split(Or),h=l.length-1;a<h;a++)r+=l[a]+(~c.indexOf(a)?i.shift()||o+"0,0,0,0)":(u.length?u:i.length?i:s).shift());if(!l)for(l=e.split(_s),h=l.length-1;a<h;a++)r+=l[a]+i[a];return r+l[h]},_s=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Di)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),mD=/hsl[a]?\(/,Kg=function(e){var t=e.join(" "),s;if(_s.lastIndex=0,_s.test(t))return s=mD.test(t),e[1]=Xf(e[1],s),e[0]=Xf(e[0],s,Zg(e[1])),!0},go,jt=function(){var n=Date.now,e=500,t=33,s=n(),r=s,i=1e3/240,o=i,a=[],c,l,u,h,d,f,g=function p(m){var _=n()-r,T=m===!0,w,y,v,k;if(_>e&&(s+=_-t),r+=_,v=r-s,w=v-o,(w>0||T)&&(k=++h.frame,d=v-h.time*1e3,h.time=v=v/1e3,o+=w+(w>=i?4:i-w),y=1),T||(c=l(p)),y)for(f=0;f<a.length;f++)a[f](v,d,k,m)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){Og&&(!su&&Th()&&(Gt=su=window,Eh=Gt.document||{},Wt.gsap=It,(Gt.gsapVersions||(Gt.gsapVersions=[])).push(It.version),Ag(nc||Gt.GreenSockGlobals||!Gt.gsap&&Gt||{}),u=Gt.requestAnimationFrame,Yg.forEach(Gg)),c&&h.sleep(),l=u||function(m){return setTimeout(m,o-h.time*1e3+1|0)},go=1,g(2))},sleep:function(){(u?Gt.cancelAnimationFrame:clearTimeout)(c),go=0,l=po},lagSmoothing:function(m,_){e=m||1/0,t=Math.min(_||33,e)},fps:function(m){i=1e3/(m||240),o=h.time*1e3+i},add:function(m,_,T){var w=_?function(y,v,k,E){m(y,v,k,E),h.remove(w)}:m;return h.remove(m),a[T?"unshift":"push"](w),Kr(),w},remove:function(m,_){~(_=a.indexOf(m))&&a.splice(_,1)&&f>=_&&f--},_listeners:a},h}(),Kr=function(){return!go&&jt.wake()},we={},gD=/^[\d.\-M][\d.\-,\s]/,_D=/["']/g,yD=function(e){for(var t={},s=e.substr(1,e.length-3).split(":"),r=s[0],i=1,o=s.length,a,c,l;i<o;i++)c=s[i],a=i!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(_D,"").trim():+l,r=c.substr(a+1).trim();return t},vD=function(e){var t=e.indexOf("(")+1,s=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<s?e.indexOf(")",s+1):s)},bD=function(e){var t=(e+"").split("("),s=we[t[0]];return s&&t.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[yD(t[1])]:vD(e).split(",").map(Ng)):we._CE&&gD.test(e)?we._CE("",e):s},Qg=function(e){return function(t){return 1-e(1-t)}},Jg=function n(e,t){for(var s=e._first,r;s;)s instanceof wt?n(s,t):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==t&&(s.timeline?n(s.timeline,t):(r=s._ease,s._ease=s._yEase,s._yEase=r,s._yoyo=t)),s=s._next},Xs=function(e,t){return e&&(Qe(e)?e:we[e]||bD(e))||t},hr=function(e,t,s,r){s===void 0&&(s=function(c){return 1-t(1-c)}),r===void 0&&(r=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var i={easeIn:t,easeOut:s,easeInOut:r},o;return Dt(e,function(a){we[a]=Wt[a]=i,we[o=a.toLowerCase()]=s;for(var c in i)we[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=we[a+"."+c]=i[c]}),i},e_=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},dl=function n(e,t,s){var r=t>=1?t:1,i=(s||(e?.3:.45))/(t<1?t:1),o=i/tu*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*GR((u-o)*i)+1},c=e==="out"?a:e==="in"?function(l){return 1-a(1-l)}:e_(a);return i=tu/i,c.config=function(l,u){return n(e,l,u)},c},fl=function n(e,t){t===void 0&&(t=1.70158);var s=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?s:e==="in"?function(i){return 1-s(1-i)}:e_(s);return r.config=function(i){return n(e,i)},r};Dt("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;hr(n+",Power"+(t-1),e?function(s){return Math.pow(s,t)}:function(s){return s},function(s){return 1-Math.pow(1-s,t)},function(s){return s<.5?Math.pow(s*2,t)/2:1-Math.pow((1-s)*2,t)/2})});we.Linear.easeNone=we.none=we.Linear.easeIn;hr("Elastic",dl("in"),dl("out"),dl());(function(n,e){var t=1/e,s=2*t,r=2.5*t,i=function(a){return a<t?n*a*a:a<s?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};hr("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);hr("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});hr("Circ",function(n){return-(kg(1-n*n)-1)});hr("Sine",function(n){return n===1?1:-YR(n*qR)+1});hr("Back",fl("in"),fl("out"),fl());we.SteppedEase=we.steps=Wt.SteppedEase={config:function(e,t){e===void 0&&(e=1);var s=1/e,r=e+(t?0:1),i=t?1:0,o=1-Ie;return function(a){return((r*Lo(0,o,a)|0)+i)*s}}};Gr.ease=we["quad.out"];Dt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Oh+=n+","+n+"Params,"});var t_=function(e,t){this.id=HR++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Pg,this.set=t?t.getSetter:Mh},_o=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Zr(this,+t.duration,1,1),this.data=t.data,Ke&&(this._ctx=Ke,Ke.data.push(this)),go||jt.wake()}var e=n.prototype;return e.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},e.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},e.totalDuration=function(s){return arguments.length?(this._dirty=0,Zr(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(s,r){if(Kr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Ic(this,s),!i._dp||i.parent||Fg(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&kn(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ie||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),Mg(this,s,r)),this},e.time=function(s,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+Hf(this))%(this._dur+this._rDelay)||(s?this._dur:0),r):this._time},e.totalProgress=function(s,r){return arguments.length?this.totalTime(this.totalDuration()*s,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(s,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+Hf(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(s,r){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*i,r):this._repeat?Xr(this._tTime,i)+1:1},e.timeScale=function(s,r){if(!arguments.length)return this._rts===-Ie?0:this._rts;if(this._rts===s)return this;var i=this.parent&&this._ts?ic(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-Ie?0:this._rts,this.totalTime(Lo(-Math.abs(this._delay),this._tDur,i),r!==!1),Nc(this),tD(this)},e.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Kr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ie&&(this._tTime-=Ie)))),this):this._ps},e.startTime=function(s){if(arguments.length){this._start=s;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&kn(r,this,s-this._delay),this}return this._start},e.endTime=function(s){return this._start+(Rt(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(s){var r=this.parent||this._dp;return r?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ic(r.rawTime(s),this):this._tTime:this._tTime},e.revert=function(s){s===void 0&&(s=KR);var r=mt;return mt=s,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(s),this.totalTime(-.01,s.suppressEvents)),this.data!=="nested"&&s.kill!==!1&&this.kill(),mt=r,this},e.globalTime=function(s){for(var r=this,i=arguments.length?s:r.rawTime();r;)i=r._start+i/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(s):i},e.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,Yf(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(s){if(arguments.length){var r=this._time;return this._rDelay=s,Yf(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},e.seek=function(s,r){return this.totalTime(Yt(this,s),Rt(r))},e.restart=function(s,r){return this.play().totalTime(s?-this._delay:0,Rt(r))},e.play=function(s,r){return s!=null&&this.seek(s,r),this.reversed(!1).paused(!1)},e.reverse=function(s,r){return s!=null&&this.seek(s||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(s,r){return s!=null&&this.seek(s,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-Ie:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ie,this},e.isActive=function(){var s=this.parent||this._dp,r=this._start,i;return!!(!s||this._ts&&this._initted&&s.isActive()&&(i=s.rawTime(!0))>=r&&i<this.endTime(!0)-Ie)},e.eventCallback=function(s,r,i){var o=this.vars;return arguments.length>1?(r?(o[s]=r,i&&(o[s+"Params"]=i),s==="onUpdate"&&(this._onUpdate=r)):delete o[s],this):o[s]},e.then=function(s){var r=this;return new Promise(function(i){var o=Qe(s)?s:Ig,a=function(){var l=r.then;r.then=null,Qe(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),i(o),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Ri(this)},n}();nn(_o.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ie,_prom:0,_ps:!1,_rts:1});var wt=function(n){wg(e,n);function e(s,r){var i;return s===void 0&&(s={}),i=n.call(this,s)||this,i.labels={},i.smoothChildTiming=!!s.smoothChildTiming,i.autoRemoveChildren=!!s.autoRemoveChildren,i._sort=Rt(s.sortChildren),Ge&&kn(s.parent||Ge,zn(i),r),s.reversed&&i.reverse(),s.paused&&i.paused(!0),s.scrollTrigger&&Lg(zn(i),s.scrollTrigger),i}var t=e.prototype;return t.to=function(r,i,o){return ji(0,arguments,this),this},t.from=function(r,i,o){return ji(1,arguments,this),this},t.fromTo=function(r,i,o,a){return ji(2,arguments,this),this},t.set=function(r,i,o){return i.duration=0,i.parent=this,Li(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new ot(r,i,Yt(this,o),1),this},t.call=function(r,i,o){return kn(this,ot.delayedCall(0,r,i),o)},t.staggerTo=function(r,i,o,a,c,l,u){return o.duration=i,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new ot(r,o,Yt(this,c)),this},t.staggerFrom=function(r,i,o,a,c,l,u){return o.runBackwards=1,Li(o).immediateRender=Rt(o.immediateRender),this.staggerTo(r,i,o,a,c,l,u)},t.staggerFromTo=function(r,i,o,a,c,l,u,h){return a.startAt=o,Li(a).immediateRender=Rt(a.immediateRender),this.staggerTo(r,i,a,c,l,u,h)},t.render=function(r,i,o){var a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:ut(r),h=this._zTime<0!=r<0&&(this._initted||!l),d,f,g,p,m,_,T,w,y,v,k,E;if(this!==Ge&&u>c&&r>=0&&(u=c),u!==this._tTime||o||h){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),d=u,y=this._start,w=this._ts,_=!w,h&&(l||(a=this._zTime),(r||!i)&&(this._zTime=r)),this._repeat){if(k=this._yoyo,m=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(m*100+r,i,o);if(d=ut(u%m),u===c?(p=this._repeat,d=l):(p=~~(u/m),p&&p===u/m&&(d=l,p--),d>l&&(d=l)),v=Xr(this._tTime,m),!a&&this._tTime&&v!==p&&this._tTime-v*m-this._dur<=0&&(v=p),k&&p&1&&(d=l-d,E=1),p!==v&&!this._lock){var x=k&&v&1,C=x===(k&&p&1);if(p<v&&(x=!x),a=x?0:u%l?l:u,this._lock=1,this.render(a||(E?0:ut(p*m)),i,!l)._lock=0,this._tTime=u,!i&&this.parent&&zt(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,C&&(this._lock=2,a=x?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Jg(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=iD(this,ut(a),ut(d)),T&&(u-=d-(d=T._start))),this._tTime=u,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!i&&!p&&(zt(this,"onStart"),this._tTime!==u))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&T!==f){if(f.parent!==this)return this.render(r,i,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,i,o),d!==this._time||!this._ts&&!_){T=0,g&&(u+=this._zTime=-Ie);break}}f=g}else{f=this._last;for(var S=r<0?r:d;f;){if(g=f._prev,(f._act||S<=f._end)&&f._ts&&T!==f){if(f.parent!==this)return this.render(r,i,o);if(f.render(f._ts>0?(S-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(S-f._start)*f._ts,i,o||mt&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!_){T=0,g&&(u+=this._zTime=S?-Ie:Ie);break}}f=g}}if(T&&!i&&(this.pause(),T.render(d>=a?0:-Ie)._zTime=d>=a?1:-1,this._ts))return this._start=y,Nc(this),this.render(r,i,o);this._onUpdate&&!i&&zt(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(y===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Ss(this,1),!i&&!(r<0&&!a)&&(u||a||!c)&&(zt(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,i){var o=this;if(Jn(i)||(i=Yt(this,i,r)),!(r instanceof _o)){if(gt(r))return r.forEach(function(a){return o.add(a,i)}),this;if(dt(r))return this.addLabel(r,i);if(Qe(r))r=ot.delayedCall(0,r);else return this}return this!==r?kn(this,r,i):this},t.getChildren=function(r,i,o,a){r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),a===void 0&&(a=-Kt);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof ot?i&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,i,o)))),l=l._next;return c},t.getById=function(r){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===r)return i[o]},t.remove=function(r){return dt(r)?this.removeLabel(r):Qe(r)?this.killTweensOf(r):(Mc(this,r),r===this._recent&&(this._recent=this._last),Gs(this))},t.totalTime=function(r,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ut(jt.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,i),this._forcing=0,this):this._tTime},t.addLabel=function(r,i){return this.labels[r]=Yt(this,i),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,i,o){var a=ot.delayedCall(0,i||po,o);return a.data="isPause",this._hasPause=1,kn(this,a,Yt(this,r))},t.removePause=function(r){var i=this._first;for(r=Yt(this,r);i;)i._start===r&&i.data==="isPause"&&Ss(i),i=i._next},t.killTweensOf=function(r,i,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)hs!==a[c]&&a[c].kill(r,i);return this},t.getTweensOf=function(r,i){for(var o=[],a=Qt(r),c=this._first,l=Jn(i),u;c;)c instanceof ot?QR(c._targets,a)&&(l?(!hs||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&o.push(c):(u=c.getTweensOf(a,i)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,i){i=i||{};var o=this,a=Yt(o,r),c=i,l=c.startAt,u=c.onStart,h=c.onStartParams,d=c.immediateRender,f,g=ot.to(o,nn({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||Ie,onStart:function(){if(o.pause(),!f){var m=i.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());g._dur!==m&&Zr(g,m,0,1).render(g._time,!0,!0),f=1}u&&u.apply(g,h||[])}},i));return d?g.render(0):g},t.tweenFromTo=function(r,i,o){return this.tweenTo(i,nn({startAt:{time:Yt(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Gf(this,Yt(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Gf(this,Yt(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ie)},t.shiftChildren=function(r,i,o){o===void 0&&(o=0);for(var a=this._first,c=this.labels,l;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(i)for(l in c)c[l]>=o&&(c[l]+=r);return Gs(this)},t.invalidate=function(r){var i=this._first;for(this._lock=0;i;)i.invalidate(r),i=i._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Gs(this)},t.totalDuration=function(r){var i=0,o=this,a=o._last,c=Kt,l,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,kn(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(i-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>i&&a._ts&&(i=a._end),a=l;Zr(o,o===Ge&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Ge._ts&&(Mg(Ge,ic(r,Ge)),Dg=jt.frame),jt.frame>=Wf){Wf+=Bt.autoSleep||120;var i=Ge._first;if((!i||!i._ts)&&Bt.autoSleep&&jt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||jt.sleep()}}},e}(_o);nn(wt.prototype,{_lock:0,_hasPause:0,_forcing:0});var xD=function(e,t,s,r,i,o,a){var c=new Pt(this._pt,e,t,0,1,a_,null,i),l=0,u=0,h,d,f,g,p,m,_,T;for(c.b=s,c.e=r,s+="",r+="",(_=~r.indexOf("random("))&&(r=mo(r)),o&&(T=[s,r],o(T,e,t),s=T[0],r=T[1]),d=s.match(ll)||[];h=ll.exec(r);)g=h[0],p=r.substring(l,h.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),g!==d[u++]&&(m=parseFloat(d[u-1])||0,c._pt={_next:c._pt,p:p||u===1?p:",",s:m,c:g.charAt(1)==="="?Nr(m,g)-m:parseFloat(g)-m,m:f&&f<4?Math.round:0},l=ll.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(Cg.test(r)||_)&&(c.e=0),this._pt=c,c},Rh=function(e,t,s,r,i,o,a,c,l,u){Qe(r)&&(r=r(i||0,e,o));var h=e[t],d=s!=="get"?s:Qe(h)?l?e[t.indexOf("set")||!Qe(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,f=Qe(h)?l?CD:i_:Ph,g;if(dt(r)&&(~r.indexOf("random(")&&(r=mo(r)),r.charAt(1)==="="&&(g=Nr(d,r)+(pt(d)||0),(g||g===0)&&(r=g))),!u||d!==r||uu)return!isNaN(d*r)&&r!==""?(g=new Pt(this._pt,e,t,+d||0,r-(d||0),typeof h=="boolean"?OD:o_,0,f),l&&(g.fp=l),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&Ch(t,r),xD.call(this,e,t,d,r,f,c||Bt.stringFilter,l))},wD=function(e,t,s,r,i){if(Qe(e)&&(e=zi(e,i,t,s,r)),!Rn(e)||e.style&&e.nodeType||gt(e)||Tg(e))return dt(e)?zi(e,i,t,s,r):e;var o={},a;for(a in e)o[a]=zi(e[a],i,t,s,r);return o},n_=function(e,t,s,r,i,o){var a,c,l,u;if(Ft[e]&&(a=new Ft[e]).init(i,a.rawVars?t[e]:wD(t[e],r,i,o,s),s,r,o)!==!1&&(s._pt=c=new Pt(s._pt,i,e,0,1,a.render,a,0,a.priority),s!==Ar))for(l=s._ptLookup[s._targets.indexOf(i)],u=a._props.length;u--;)l[a._props[u]]=c;return a},hs,uu,Dh=function n(e,t,s){var r=e.vars,i=r.ease,o=r.startAt,a=r.immediateRender,c=r.lazy,l=r.onUpdate,u=r.runBackwards,h=r.yoyoEase,d=r.keyframes,f=r.autoRevert,g=e._dur,p=e._startAt,m=e._targets,_=e.parent,T=_&&_.data==="nested"?_.vars.targets:m,w=e._overwrite==="auto"&&!wh,y=e.timeline,v,k,E,x,C,S,R,O,L,z,W,B,V;if(y&&(!d||!i)&&(i="none"),e._ease=Xs(i,Gr.ease),e._yEase=h?Qg(Xs(h===!0?i:h,Gr.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!y&&!!r.runBackwards,!y||d&&!r.stagger){if(O=m[0]?Ys(m[0]).harness:0,B=O&&r[O.prop],v=rc(r,Sh),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!f?p.render(-1,!0):p.revert(u&&g?pa:ZR),p._lazy=0),o){if(Ss(e._startAt=ot.set(m,nn({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!p&&Rt(c),startAt:null,delay:0,onUpdate:l&&function(){return zt(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(mt||!a&&!f)&&e._startAt.revert(pa),a&&g&&t<=0&&s<=0){t&&(e._zTime=t);return}}else if(u&&g&&!p){if(t&&(a=!1),E=nn({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Rt(c),immediateRender:a,stagger:0,parent:_},v),B&&(E[O.prop]=B),Ss(e._startAt=ot.set(m,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(mt?e._startAt.revert(pa):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Ie,Ie);else if(!t)return}for(e._pt=e._ptCache=0,c=g&&Rt(c)||c&&!g,k=0;k<m.length;k++){if(C=m[k],R=C._gsap||Ah(m)[k]._gsap,e._ptLookup[k]=z={},ru[R.id]&&gs.length&&sc(),W=T===m?k:T.indexOf(C),O&&(L=new O).init(C,B||v,e,W,T)!==!1&&(e._pt=x=new Pt(e._pt,C,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(U){z[U]=x}),L.priority&&(S=1)),!O||B)for(E in v)Ft[E]&&(L=n_(E,v,e,W,C,T))?L.priority&&(S=1):z[E]=x=Rh.call(e,C,E,"get",v[E],W,T,0,r.stringFilter);e._op&&e._op[k]&&e.kill(C,e._op[k]),w&&e._pt&&(hs=e,Ge.killTweensOf(C,z,e.globalTime(t)),V=!e.parent,hs=0),e._pt&&c&&(ru[R.id]=1)}S&&c_(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!V,d&&t<=0&&y.render(Kt,!0,!0)},kD=function(e,t,s,r,i,o,a,c){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,f;if(!l)for(l=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(u=d[f][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return uu=1,e.vars[t]="+=0",Dh(e,a),uu=0,c?fo(t+" not eligible for reset"):1;l.push(u)}for(f=l.length;f--;)h=l[f],u=h._pt||h,u.s=(r||r===0)&&!i?r:u.s+(r||0)+o*u.c,u.c=s-u.s,h.e&&(h.e=st(s)+pt(h.e)),h.b&&(h.b=u.s+pt(h.b))},TD=function(e,t){var s=e[0]?Ys(e[0]).harness:0,r=s&&s.aliases,i,o,a,c;if(!r)return t;i=ir({},t);for(o in r)if(o in i)for(c=r[o].split(","),a=c.length;a--;)i[c[a]]=i[o];return i},ED=function(e,t,s,r){var i=t.ease||r||"power1.inOut",o,a;if(gt(t))a=s[e]||(s[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:i})});else for(o in t)a=s[o]||(s[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:i})},zi=function(e,t,s,r,i){return Qe(e)?e.call(t,s,r,i):dt(e)&&~e.indexOf("random(")?mo(e):e},s_=Oh+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",r_={};Dt(s_+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return r_[n]=1});var ot=function(n){wg(e,n);function e(s,r,i,o){var a;typeof r=="number"&&(i.duration=r,r=i,i=null),a=n.call(this,o?r:Li(r))||this;var c=a.vars,l=c.duration,u=c.delay,h=c.immediateRender,d=c.stagger,f=c.overwrite,g=c.keyframes,p=c.defaults,m=c.scrollTrigger,_=c.yoyoEase,T=r.parent||Ge,w=(gt(s)||Tg(s)?Jn(s[0]):"length"in r)?[s]:Qt(s),y,v,k,E,x,C,S,R;if(a._targets=w.length?Ah(w):fo("GSAP target "+s+" not found. https://gsap.com",!Bt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||aa(l)||aa(u)){if(r=a.vars,y=a.timeline=new wt({data:"nested",defaults:p||{},targets:T&&T.data==="nested"?T.vars.targets:w}),y.kill(),y.parent=y._dp=zn(a),y._start=0,d||aa(l)||aa(u)){if(E=w.length,S=d&&Ug(d),Rn(d))for(x in d)~s_.indexOf(x)&&(R||(R={}),R[x]=d[x]);for(v=0;v<E;v++)k=rc(r,r_),k.stagger=0,_&&(k.yoyoEase=_),R&&ir(k,R),C=w[v],k.duration=+zi(l,zn(a),v,C,w),k.delay=(+zi(u,zn(a),v,C,w)||0)-a._delay,!d&&E===1&&k.delay&&(a._delay=u=k.delay,a._start+=u,k.delay=0),y.to(C,k,S?S(v,C,w):0),y._ease=we.none;y.duration()?l=u=0:a.timeline=0}else if(g){Li(nn(y.vars.defaults,{ease:"none"})),y._ease=Xs(g.ease||r.ease||"none");var O=0,L,z,W;if(gt(g))g.forEach(function(B){return y.to(w,B,">")}),y.duration();else{k={};for(x in g)x==="ease"||x==="easeEach"||ED(x,g[x],k,g.easeEach);for(x in k)for(L=k[x].sort(function(B,V){return B.t-V.t}),O=0,v=0;v<L.length;v++)z=L[v],W={ease:z.e,duration:(z.t-(v?L[v-1].t:0))/100*l},W[x]=z.v,y.to(w,W,O),O+=W.duration;y.duration()<l&&y.to({},{duration:l-y.duration()})}}l||a.duration(l=y.duration())}else a.timeline=0;return f===!0&&!wh&&(hs=zn(a),Ge.killTweensOf(w),hs=0),kn(T,zn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!l&&!g&&a._start===ut(T._time)&&Rt(h)&&nD(zn(a))&&T.data!=="nested")&&(a._tTime=-Ie,a.render(Math.max(0,-u)||0)),m&&Lg(zn(a),m),a}var t=e.prototype;return t.render=function(r,i,o){var a=this._time,c=this._tDur,l=this._dur,u=r<0,h=r>c-Ie&&!u?c:r<Ie?0:r,d,f,g,p,m,_,T,w,y;if(!l)rD(this,r,i,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,w=this.timeline,this._repeat){if(p=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+r,i,o);if(d=ut(h%p),h===c?(g=this._repeat,d=l):(g=~~(h/p),g&&g===ut(h/p)&&(d=l,g--),d>l&&(d=l)),_=this._yoyo&&g&1,_&&(y=this._yEase,d=l-d),m=Xr(this._tTime,p),d===a&&!o&&this._initted&&g===m)return this._tTime=h,this;g!==m&&(w&&this._yEase&&Jg(w,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==l&&this._initted&&(this._lock=o=1,this.render(ut(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(jg(this,u?r:d,o,i,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==m))return this;if(l!==this._dur)return this.render(r,i,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(y||this._ease)(d/l),this._from&&(this.ratio=T=1-T),d&&!a&&!i&&!g&&(zt(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(T,f.d),f=f._next;w&&w.render(r<0?r:!d&&_?-Ie:w._dur*w._ease(d/this._dur),i,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!i&&(u&&iu(this,r,i,o),zt(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!i&&this.parent&&zt(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&iu(this,r,!0,!0),(r||!l)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ss(this,1),!i&&!(u&&!a)&&(h||a||_)&&(zt(this,h===c?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,i,o,a,c){go||jt.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Dh(this,l),u=this._ease(l/this._dur),kD(this,r,i,o,a,u,l,c)?this.resetTo(r,i,o,a,1):(Ic(this,0),this.parent||$g(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,i){if(i===void 0&&(i="all"),!r&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Ri(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,i,hs&&hs.vars.overwrite!==!0)._first||Ri(this),this.parent&&o!==this.timeline.totalDuration()&&Zr(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,c=r?Qt(r):a,l=this._ptLookup,u=this._pt,h,d,f,g,p,m,_;if((!i||i==="all")&&eD(a,c))return i==="all"&&(this._pt=0),Ri(this);for(h=this._op=this._op||[],i!=="all"&&(dt(i)&&(p={},Dt(i,function(T){return p[T]=1}),i=p),i=TD(a,i)),_=a.length;_--;)if(~c.indexOf(a[_])){d=l[_],i==="all"?(h[_]=i,g=d,f={}):(f=h[_]=h[_]||{},g=i);for(p in g)m=d&&d[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&Mc(this,m,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&u&&Ri(this),this},e.to=function(r,i){return new e(r,i,arguments[2])},e.from=function(r,i){return ji(1,arguments)},e.delayedCall=function(r,i,o,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,i,o){return ji(2,arguments)},e.set=function(r,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(r,i)},e.killTweensOf=function(r,i,o){return Ge.killTweensOf(r,i,o)},e}(_o);nn(ot.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Dt("staggerTo,staggerFrom,staggerFromTo",function(n){ot[n]=function(){var e=new wt,t=au.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Ph=function(e,t,s){return e[t]=s},i_=function(e,t,s){return e[t](s)},CD=function(e,t,s,r){return e[t](r.fp,s)},SD=function(e,t,s){return e.setAttribute(t,s)},Mh=function(e,t){return Qe(e[t])?i_:kh(e[t])&&e.setAttribute?SD:Ph},o_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},OD=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},a_=function(e,t){var s=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;s;)r=s.p+(s.m?s.m(s.s+s.c*e):Math.round((s.s+s.c*e)*1e4)/1e4)+r,s=s._next;r+=t.c}t.set(t.t,t.p,r,t)},Nh=function(e,t){for(var s=t._pt;s;)s.r(e,s.d),s=s._next},AD=function(e,t,s,r){for(var i=this._pt,o;i;)o=i._next,i.p===r&&i.modifier(e,t,s),i=o},RD=function(e){for(var t=this._pt,s,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Mc(this,t,"_pt"):t.dep||(s=1),t=r;return!s},DD=function(e,t,s,r){r.mSet(e,t,r.m.call(r.tween,s,r.mt),r)},c_=function(e){for(var t=e._pt,s,r,i,o;t;){for(s=t._next,r=i;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:i=t,(t._next=r)?r._prev=t:o=t,t=s}e._pt=i},Pt=function(){function n(t,s,r,i,o,a,c,l,u){this.t=s,this.s=i,this.c=o,this.p=r,this.r=a||o_,this.d=c||this,this.set=l||Ph,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(s,r,i){this.mSet=this.mSet||this.set,this.set=DD,this.m=s,this.mt=i,this.tween=r},n}();Dt(Oh+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Sh[n]=1});Wt.TweenMax=Wt.TweenLite=ot;Wt.TimelineLite=Wt.TimelineMax=wt;Ge=new wt({sortChildren:!1,defaults:Gr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Bt.stringFilter=Kg;var Zs=[],ga={},PD=[],Zf=0,MD=0,pl=function(e){return(ga[e]||PD).map(function(t){return t()})},hu=function(){var e=Date.now(),t=[];e-Zf>2&&(pl("matchMediaInit"),Zs.forEach(function(s){var r=s.queries,i=s.conditions,o,a,c,l;for(a in r)o=Gt.matchMedia(r[a]).matches,o&&(c=1),o!==i[a]&&(i[a]=o,l=1);l&&(s.revert(),c&&t.push(s))}),pl("matchMediaRevert"),t.forEach(function(s){return s.onMatch(s,function(r){return s.add(null,r)})}),Zf=e,pl("matchMedia"))},l_=function(){function n(t,s){this.selector=s&&cu(s),this.data=[],this._r=[],this.isReverted=!1,this.id=MD++,t&&this.add(t)}var e=n.prototype;return e.add=function(s,r,i){Qe(s)&&(i=r,r=s,s=Qe);var o=this,a=function(){var l=Ke,u=o.selector,h;return l&&l!==o&&l.data.push(o),i&&(o.selector=cu(i)),Ke=o,h=r.apply(o,arguments),Qe(h)&&o._r.push(h),Ke=l,o.selector=u,o.isReverted=!1,h};return o.last=a,s===Qe?a(o,function(c){return o.add(null,c)}):s?o[s]=a:a},e.ignore=function(s){var r=Ke;Ke=null,s(this),Ke=r},e.getTweens=function(){var s=[];return this.data.forEach(function(r){return r instanceof n?s.push.apply(s,r.getTweens()):r instanceof ot&&!(r.parent&&r.parent.data==="nested")&&s.push(r)}),s},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(s,r){var i=this;if(s?function(){for(var a=i.getTweens(),c=i.data.length,l;c--;)l=i.data[c],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(s)}),c=i.data.length;c--;)l=i.data[c],l instanceof wt?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof ot)&&l.revert&&l.revert(s);i._r.forEach(function(u){return u(s,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Zs.length;o--;)Zs[o].id===this.id&&Zs.splice(o,1)},e.revert=function(s){this.kill(s||{})},n}(),ND=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(s,r,i){Rn(s)||(s={matches:s});var o=new l_(0,i||this.scope),a=o.conditions={},c,l,u;Ke&&!o.selector&&(o.selector=Ke.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=s;for(l in s)l==="all"?u=1:(c=Gt.matchMedia(s[l]),c&&(Zs.indexOf(o)<0&&Zs.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(hu):c.addEventListener("change",hu)));return u&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(s){this.kill(s||{})},e.kill=function(s){this.contexts.forEach(function(r){return r.kill(s,!0)})},n}(),oc={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t.forEach(function(r){return Gg(r)})},timeline:function(e){return new wt(e)},getTweensOf:function(e,t){return Ge.getTweensOf(e,t)},getProperty:function(e,t,s,r){dt(e)&&(e=Qt(e)[0]);var i=Ys(e||{}).get,o=s?Ig:Ng;return s==="native"&&(s=""),e&&(t?o((Ft[t]&&Ft[t].get||i)(e,t,s,r)):function(a,c,l){return o((Ft[a]&&Ft[a].get||i)(e,a,c,l))})},quickSetter:function(e,t,s){if(e=Qt(e),e.length>1){var r=e.map(function(u){return It.quickSetter(u,t,s)}),i=r.length;return function(u){for(var h=i;h--;)r[h](u)}}e=e[0]||{};var o=Ft[t],a=Ys(e),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var h=new o;Ar._pt=0,h.init(e,s?u+s:u,Ar,0,[e]),h.render(1,h),Ar._pt&&Nh(1,Ar)}:a.set(e,c);return o?l:function(u){return l(e,c,s?u+s:u,a,1)}},quickTo:function(e,t,s){var r,i=It.to(e,ir((r={},r[t]="+=0.1",r.paused=!0,r),s||{})),o=function(c,l,u){return i.resetTo(t,c,l,u)};return o.tween=i,o},isTweening:function(e){return Ge.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Xs(e.ease,Gr.ease)),qf(Gr,e||{})},config:function(e){return qf(Bt,e||{})},registerEffect:function(e){var t=e.name,s=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Ft[a]&&!Wt[a]&&fo(t+" effect requires "+a+" plugin.")}),ul[t]=function(a,c,l){return s(Qt(a),nn(c||{},i),l)},o&&(wt.prototype[t]=function(a,c,l){return this.add(ul[t](a,Rn(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){we[e]=Xs(t)},parseEase:function(e,t){return arguments.length?Xs(e,t):we},getById:function(e){return Ge.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var s=new wt(e),r,i;for(s.smoothChildTiming=Rt(e.smoothChildTiming),Ge.remove(s),s._dp=0,s._time=s._tTime=Ge._time,r=Ge._first;r;)i=r._next,(t||!(!r._dur&&r instanceof ot&&r.vars.onComplete===r._targets[0]))&&kn(s,r,r._start-r._delay),r=i;return kn(Ge,s,0),s},context:function(e,t){return e?new l_(e,t):Ke},matchMedia:function(e){return new ND(e)},matchMediaRefresh:function(){return Zs.forEach(function(e){var t=e.conditions,s,r;for(r in t)t[r]&&(t[r]=!1,s=1);s&&e.revert()})||hu()},addEventListener:function(e,t){var s=ga[e]||(ga[e]=[]);~s.indexOf(t)||s.push(t)},removeEventListener:function(e,t){var s=ga[e],r=s&&s.indexOf(t);r>=0&&s.splice(r,1)},utils:{wrap:dD,wrapYoyo:fD,distribute:Ug,random:Wg,snap:Bg,normalize:hD,getUnit:pt,clamp:aD,splitColor:Xg,toArray:Qt,selector:cu,mapRange:Hg,pipe:lD,unitize:uD,interpolate:pD,shuffle:Vg},install:Ag,effects:ul,ticker:jt,updateRoot:wt.updateRoot,plugins:Ft,globalTimeline:Ge,core:{PropTween:Pt,globals:Rg,Tween:ot,Timeline:wt,Animation:_o,getCache:Ys,_removeLinkedListItem:Mc,reverting:function(){return mt},context:function(e){return e&&Ke&&(Ke.data.push(e),e._ctx=Ke),Ke},suppressOverwrites:function(e){return wh=e}}};Dt("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return oc[n]=ot[n]});jt.add(wt.updateRoot);Ar=oc.to({},{duration:0});var ID=function(e,t){for(var s=e._pt;s&&s.p!==t&&s.op!==t&&s.fp!==t;)s=s._next;return s},$D=function(e,t){var s=e._targets,r,i,o;for(r in t)for(i=s.length;i--;)o=e._ptLookup[i][r],o&&(o=o.d)&&(o._pt&&(o=ID(o,r)),o&&o.modifier&&o.modifier(t[r],e,s[i],r))},ml=function(e,t){return{name:e,rawVars:1,init:function(r,i,o){o._onInit=function(a){var c,l;if(dt(i)&&(c={},Dt(i,function(u){return c[u]=1}),i=c),t){c={};for(l in i)c[l]=t(i[l]);i=c}$D(a,i)}}}},It=oc.registerPlugin({name:"attr",init:function(e,t,s,r,i){var o,a,c;this.tween=s;for(o in t)c=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(c||0)+"",t[o],r,i,0,0,o),a.op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var s=t._pt;s;)mt?s.set(s.t,s.p,s.b,s):s.r(e,s.d),s=s._next}},{name:"endArray",init:function(e,t){for(var s=t.length;s--;)this.add(e,s,e[s]||0,t[s],0,0,0,0,0,1)}},ml("roundProps",lu),ml("modifiers"),ml("snap",Bg))||oc;ot.version=wt.version=It.version="3.12.4";Og=1;Th()&&Kr();we.Power0;we.Power1;we.Power2;we.Power3;we.Power4;we.Linear;we.Quad;we.Cubic;we.Quart;we.Quint;we.Strong;we.Elastic;we.Back;we.SteppedEase;we.Bounce;we.Sine;we.Expo;we.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Kf,ds,Ir,Ih,Us,Qf,$h,FD=function(){return typeof window<"u"},es={},Ls=180/Math.PI,$r=Math.PI/180,wr=Math.atan2,Jf=1e8,Fh=/([A-Z])/g,LD=/(left|right|width|margin|padding|x)/i,jD=/[\s,\(]\S/,Tn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},du=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},zD=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},VD=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},UD=function(e,t){var s=t.s+t.c*e;t.set(t.t,t.p,~~(s+(s<0?-.5:.5))+t.u,t)},u_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},h_=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},BD=function(e,t,s){return e.style[t]=s},WD=function(e,t,s){return e.style.setProperty(t,s)},qD=function(e,t,s){return e._gsap[t]=s},HD=function(e,t,s){return e._gsap.scaleX=e._gsap.scaleY=s},YD=function(e,t,s,r,i){var o=e._gsap;o.scaleX=o.scaleY=s,o.renderTransform(i,o)},GD=function(e,t,s,r,i){var o=e._gsap;o[t]=s,o.renderTransform(i,o)},Xe="transform",Mt=Xe+"Origin",XD=function n(e,t){var s=this,r=this.target,i=r.style,o=r._gsap;if(e in es&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Tn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return s.tfm[a]=Un(r,a)}):this.tfm[e]=o.x?o[e]:Un(r,e),e===Mt&&(this.tfm.zOrigin=o.zOrigin);else return Tn.transform.split(",").forEach(function(a){return n.call(s,a,t)});if(this.props.indexOf(Xe)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Mt,t,"")),e=Xe}(i||t)&&this.props.push(e,t,i[e])},d_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},ZD=function(){var e=this.props,t=this.target,s=t.style,r=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?t[e[i]]=e[i+2]:e[i+2]?s[e[i]]=e[i+2]:s.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Fh,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=$h(),(!i||!i.isStart)&&!s[Xe]&&(d_(s),r.zOrigin&&s[Mt]&&(s[Mt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},f_=function(e,t){var s={target:e,props:[],revert:ZD,save:XD};return e._gsap||It.core.getCache(e),t&&t.split(",").forEach(function(r){return s.save(r)}),s},p_,fu=function(e,t){var s=ds.createElementNS?ds.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ds.createElement(e);return s&&s.style?s:ds.createElement(e)},Cn=function n(e,t,s){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Fh,"-$1").toLowerCase())||r.getPropertyValue(t)||!s&&n(e,Qr(t)||t,1)||""},ep="O,Moz,ms,Ms,Webkit".split(","),Qr=function(e,t,s){var r=t||Us,i=r.style,o=5;if(e in i&&!s)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(ep[o]+e in i););return o<0?null:(o===3?"ms":o>=0?ep[o]:"")+e},pu=function(){FD()&&window.document&&(Kf=window,ds=Kf.document,Ir=ds.documentElement,Us=fu("div")||{style:{}},fu("div"),Xe=Qr(Xe),Mt=Xe+"Origin",Us.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",p_=!!Qr("perspective"),$h=It.core.reverting,Ih=1)},gl=function n(e){var t=fu("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,r=this.nextSibling,i=this.style.cssText,o;if(Ir.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return s&&(r?s.insertBefore(this,r):s.appendChild(this)),Ir.removeChild(t),this.style.cssText=i,o},tp=function(e,t){for(var s=t.length;s--;)if(e.hasAttribute(t[s]))return e.getAttribute(t[s])},m_=function(e){var t;try{t=e.getBBox()}catch{t=gl.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===gl||(t=gl.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+tp(e,["x","cx","x1"])||0,y:+tp(e,["y","cy","y1"])||0,width:0,height:0}:t},g_=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&m_(e))},or=function(e,t){if(t){var s=e.style,r;t in es&&t!==Mt&&(t=Xe),s.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),s.removeProperty(r==="--"?t:t.replace(Fh,"-$1").toLowerCase())):s.removeAttribute(t)}},fs=function(e,t,s,r,i,o){var a=new Pt(e._pt,t,s,0,1,o?h_:u_);return e._pt=a,a.b=r,a.e=i,e._props.push(s),a},np={deg:1,rad:1,turn:1},KD={grid:1,flex:1},Os=function n(e,t,s,r){var i=parseFloat(s)||0,o=(s+"").trim().substr((i+"").length)||"px",a=Us.style,c=LD.test(t),l=e.tagName.toLowerCase()==="svg",u=(l?"client":"offset")+(c?"Width":"Height"),h=100,d=r==="px",f=r==="%",g,p,m,_;if(r===o||!i||np[r]||np[o])return i;if(o!=="px"&&!d&&(i=n(e,t,s,"px")),_=e.getCTM&&g_(e),(f||o==="%")&&(es[t]||~t.indexOf("adius")))return g=_?e.getBBox()[c?"width":"height"]:e[u],st(f?i/g*h:i/100*g);if(a[c?"width":"height"]=h+(d?o:r),p=~t.indexOf("adius")||r==="em"&&e.appendChild&&!l?e:e.parentNode,_&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===ds||!p.appendChild)&&(p=ds.body),m=p._gsap,m&&f&&m.width&&c&&m.time===jt.time&&!m.uncache)return st(i/m.width*h);if(f&&(t==="height"||t==="width")){var T=e.style[t];e.style[t]=h+r,g=e[u],T?e.style[t]=T:or(e,t)}else(f||o==="%")&&!KD[Cn(p,"display")]&&(a.position=Cn(e,"position")),p===e&&(a.position="static"),p.appendChild(Us),g=Us[u],p.removeChild(Us),a.position="absolute";return c&&f&&(m=Ys(p),m.time=jt.time,m.width=p[u]),st(d?g*i/h:g&&i?h/g*i:0)},Un=function(e,t,s,r){var i;return Ih||pu(),t in Tn&&t!=="transform"&&(t=Tn[t],~t.indexOf(",")&&(t=t.split(",")[0])),es[t]&&t!=="transform"?(i=vo(e,r),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:cc(Cn(e,Mt))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||r||~(i+"").indexOf("calc("))&&(i=ac[t]&&ac[t](e,t,s)||Cn(e,t)||Pg(e,t)||(t==="opacity"?1:0))),s&&!~(i+"").trim().indexOf(" ")?Os(e,t,i,s)+s:i},QD=function(e,t,s,r){if(!s||s==="none"){var i=Qr(t,e,1),o=i&&Cn(e,i,1);o&&o!==s?(t=i,s=o):t==="borderColor"&&(s=Cn(e,"borderTopColor"))}var a=new Pt(this._pt,e.style,t,0,1,a_),c=0,l=0,u,h,d,f,g,p,m,_,T,w,y,v;if(a.b=s,a.e=r,s+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=Cn(e,t)||r,p?e.style[t]=p:or(e,t)),u=[s,r],Kg(u),s=u[0],r=u[1],d=s.match(Or)||[],v=r.match(Or)||[],v.length){for(;h=Or.exec(r);)m=h[0],T=r.substring(c,h.index),g?g=(g+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(g=1),m!==(p=d[l++]||"")&&(f=parseFloat(p)||0,y=p.substr((f+"").length),m.charAt(1)==="="&&(m=Nr(f,m)+y),_=parseFloat(m),w=m.substr((_+"").length),c=Or.lastIndex-w.length,w||(w=w||Bt.units[t]||y,c===r.length&&(r+=w,a.e+=w)),y!==w&&(f=Os(e,t,p,w)||0),a._pt={_next:a._pt,p:T||l===1?T:",",s:f,c:_-f,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r=t==="display"&&r==="none"?h_:u_;return Cg.test(r)&&(a.e=0),this._pt=a,a},sp={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},JD=function(e){var t=e.split(" "),s=t[0],r=t[1]||"50%";return(s==="top"||s==="bottom"||r==="left"||r==="right")&&(e=s,s=r,r=e),t[0]=sp[s]||s,t[1]=sp[r]||r,t.join(" ")},eP=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var s=t.t,r=s.style,i=t.u,o=s._gsap,a,c,l;if(i==="all"||i===!0)r.cssText="",c=1;else for(i=i.split(","),l=i.length;--l>-1;)a=i[l],es[a]&&(c=1,a=a==="transformOrigin"?Mt:Xe),or(s,a);c&&(or(s,Xe),o&&(o.svg&&s.removeAttribute("transform"),vo(s,1),o.uncache=1,d_(r)))}},ac={clearProps:function(e,t,s,r,i){if(i.data!=="isFromStart"){var o=e._pt=new Pt(e._pt,t,s,0,0,eP);return o.u=r,o.pr=-10,o.tween=i,e._props.push(s),1}}},yo=[1,0,0,1,0,0],__={},y_=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},rp=function(e){var t=Cn(e,Xe);return y_(t)?yo:t.substr(7).match(Eg).map(st)},Lh=function(e,t){var s=e._gsap||Ys(e),r=e.style,i=rp(e),o,a,c,l;return s.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?yo:i):(i===yo&&!e.offsetParent&&e!==Ir&&!s.svg&&(c=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Ir.appendChild(e)),i=rp(e),c?r.display=c:or(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Ir.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},mu=function(e,t,s,r,i,o){var a=e._gsap,c=i||Lh(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=c[0],g=c[1],p=c[2],m=c[3],_=c[4],T=c[5],w=t.split(" "),y=parseFloat(w[0])||0,v=parseFloat(w[1])||0,k,E,x,C;s?c!==yo&&(E=f*m-g*p)&&(x=y*(m/E)+v*(-p/E)+(p*T-m*_)/E,C=y*(-g/E)+v*(f/E)-(f*T-g*_)/E,y=x,v=C):(k=m_(e),y=k.x+(~w[0].indexOf("%")?y/100*k.width:y),v=k.y+(~(w[1]||w[0]).indexOf("%")?v/100*k.height:v)),r||r!==!1&&a.smooth?(_=y-l,T=v-u,a.xOffset=h+(_*f+T*p)-_,a.yOffset=d+(_*g+T*m)-T):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=v,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!s,e.style[Mt]="0px 0px",o&&(fs(o,a,"xOrigin",l,y),fs(o,a,"yOrigin",u,v),fs(o,a,"xOffset",h,a.xOffset),fs(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",y+" "+v)},vo=function(e,t){var s=e._gsap||new t_(e);if("x"in s&&!t&&!s.uncache)return s;var r=e.style,i=s.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=Cn(e,Mt)||"0",u,h,d,f,g,p,m,_,T,w,y,v,k,E,x,C,S,R,O,L,z,W,B,V,U,X,K,Q,F,j,A,I;return u=h=d=p=m=_=T=w=y=0,f=g=1,s.svg=!!(e.getCTM&&g_(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[Xe]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Xe]!=="none"?c[Xe]:"")),r.scale=r.rotate=r.translate="none"),E=Lh(e,s.svg),s.svg&&(s.uncache?(U=e.getBBox(),l=s.xOrigin-U.x+"px "+(s.yOrigin-U.y)+"px",V=""):V=!t&&e.getAttribute("data-svg-origin"),mu(e,V||l,!!V||s.originIsAbsolute,s.smooth!==!1,E)),v=s.xOrigin||0,k=s.yOrigin||0,E!==yo&&(R=E[0],O=E[1],L=E[2],z=E[3],u=W=E[4],h=B=E[5],E.length===6?(f=Math.sqrt(R*R+O*O),g=Math.sqrt(z*z+L*L),p=R||O?wr(O,R)*Ls:0,T=L||z?wr(L,z)*Ls+p:0,T&&(g*=Math.abs(Math.cos(T*$r))),s.svg&&(u-=v-(v*R+k*L),h-=k-(v*O+k*z))):(I=E[6],j=E[7],K=E[8],Q=E[9],F=E[10],A=E[11],u=E[12],h=E[13],d=E[14],x=wr(I,F),m=x*Ls,x&&(C=Math.cos(-x),S=Math.sin(-x),V=W*C+K*S,U=B*C+Q*S,X=I*C+F*S,K=W*-S+K*C,Q=B*-S+Q*C,F=I*-S+F*C,A=j*-S+A*C,W=V,B=U,I=X),x=wr(-L,F),_=x*Ls,x&&(C=Math.cos(-x),S=Math.sin(-x),V=R*C-K*S,U=O*C-Q*S,X=L*C-F*S,A=z*S+A*C,R=V,O=U,L=X),x=wr(O,R),p=x*Ls,x&&(C=Math.cos(x),S=Math.sin(x),V=R*C+O*S,U=W*C+B*S,O=O*C-R*S,B=B*C-W*S,R=V,W=U),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,_=180-_),f=st(Math.sqrt(R*R+O*O+L*L)),g=st(Math.sqrt(B*B+I*I)),x=wr(W,B),T=Math.abs(x)>2e-4?x*Ls:0,y=A?1/(A<0?-A:A):0),s.svg&&(V=e.getAttribute("transform"),s.forceCSS=e.setAttribute("transform","")||!y_(Cn(e,Xe)),V&&e.setAttribute("transform",V))),Math.abs(T)>90&&Math.abs(T)<270&&(i?(f*=-1,T+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,T+=T<=0?180:-180)),t=t||s.uncache,s.x=u-((s.xPercent=u&&(!t&&s.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*s.xPercent/100:0)+o,s.y=h-((s.yPercent=h&&(!t&&s.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*s.yPercent/100:0)+o,s.z=d+o,s.scaleX=st(f),s.scaleY=st(g),s.rotation=st(p)+a,s.rotationX=st(m)+a,s.rotationY=st(_)+a,s.skewX=T+a,s.skewY=w+a,s.transformPerspective=y+o,(s.zOrigin=parseFloat(l.split(" ")[2])||!t&&s.zOrigin||0)&&(r[Mt]=cc(l)),s.xOffset=s.yOffset=0,s.force3D=Bt.force3D,s.renderTransform=s.svg?nP:p_?v_:tP,s.uncache=0,s},cc=function(e){return(e=e.split(" "))[0]+" "+e[1]},_l=function(e,t,s){var r=pt(t);return st(parseFloat(t)+parseFloat(Os(e,"x",s+"px",r)))+r},tP=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,v_(e,t)},$s="0deg",Si="0px",Fs=") ",v_=function(e,t){var s=t||this,r=s.xPercent,i=s.yPercent,o=s.x,a=s.y,c=s.z,l=s.rotation,u=s.rotationY,h=s.rotationX,d=s.skewX,f=s.skewY,g=s.scaleX,p=s.scaleY,m=s.transformPerspective,_=s.force3D,T=s.target,w=s.zOrigin,y="",v=_==="auto"&&e&&e!==1||_===!0;if(w&&(h!==$s||u!==$s)){var k=parseFloat(u)*$r,E=Math.sin(k),x=Math.cos(k),C;k=parseFloat(h)*$r,C=Math.cos(k),o=_l(T,o,E*C*-w),a=_l(T,a,-Math.sin(k)*-w),c=_l(T,c,x*C*-w+w)}m!==Si&&(y+="perspective("+m+Fs),(r||i)&&(y+="translate("+r+"%, "+i+"%) "),(v||o!==Si||a!==Si||c!==Si)&&(y+=c!==Si||v?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+Fs),l!==$s&&(y+="rotate("+l+Fs),u!==$s&&(y+="rotateY("+u+Fs),h!==$s&&(y+="rotateX("+h+Fs),(d!==$s||f!==$s)&&(y+="skew("+d+", "+f+Fs),(g!==1||p!==1)&&(y+="scale("+g+", "+p+Fs),T.style[Xe]=y||"translate(0, 0)"},nP=function(e,t){var s=t||this,r=s.xPercent,i=s.yPercent,o=s.x,a=s.y,c=s.rotation,l=s.skewX,u=s.skewY,h=s.scaleX,d=s.scaleY,f=s.target,g=s.xOrigin,p=s.yOrigin,m=s.xOffset,_=s.yOffset,T=s.forceCSS,w=parseFloat(o),y=parseFloat(a),v,k,E,x,C;c=parseFloat(c),l=parseFloat(l),u=parseFloat(u),u&&(u=parseFloat(u),l+=u,c+=u),c||l?(c*=$r,l*=$r,v=Math.cos(c)*h,k=Math.sin(c)*h,E=Math.sin(c-l)*-d,x=Math.cos(c-l)*d,l&&(u*=$r,C=Math.tan(l-u),C=Math.sqrt(1+C*C),E*=C,x*=C,u&&(C=Math.tan(u),C=Math.sqrt(1+C*C),v*=C,k*=C)),v=st(v),k=st(k),E=st(E),x=st(x)):(v=h,x=d,k=E=0),(w&&!~(o+"").indexOf("px")||y&&!~(a+"").indexOf("px"))&&(w=Os(f,"x",o,"px"),y=Os(f,"y",a,"px")),(g||p||m||_)&&(w=st(w+g-(g*v+p*E)+m),y=st(y+p-(g*k+p*x)+_)),(r||i)&&(C=f.getBBox(),w=st(w+r/100*C.width),y=st(y+i/100*C.height)),C="matrix("+v+","+k+","+E+","+x+","+w+","+y+")",f.setAttribute("transform",C),T&&(f.style[Xe]=C)},sP=function(e,t,s,r,i){var o=360,a=dt(i),c=parseFloat(i)*(a&&~i.indexOf("rad")?Ls:1),l=c-r,u=r+l+"deg",h,d;return a&&(h=i.split("_")[1],h==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),h==="cw"&&l<0?l=(l+o*Jf)%o-~~(l/o)*o:h==="ccw"&&l>0&&(l=(l-o*Jf)%o-~~(l/o)*o)),e._pt=d=new Pt(e._pt,t,s,r,l,zD),d.e=u,d.u="deg",e._props.push(s),d},ip=function(e,t){for(var s in t)e[s]=t[s];return e},rP=function(e,t,s){var r=ip({},s._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=s.style,a,c,l,u,h,d,f,g;r.svg?(l=s.getAttribute("transform"),s.setAttribute("transform",""),o[Xe]=t,a=vo(s,1),or(s,Xe),s.setAttribute("transform",l)):(l=getComputedStyle(s)[Xe],o[Xe]=t,a=vo(s,1),o[Xe]=l);for(c in es)l=r[c],u=a[c],l!==u&&i.indexOf(c)<0&&(f=pt(l),g=pt(u),h=f!==g?Os(s,c,l,g):parseFloat(l),d=parseFloat(u),e._pt=new Pt(e._pt,a,c,h,d-h,du),e._pt.u=g||0,e._props.push(c));ip(a,r)};Dt("padding,margin,Width,Radius",function(n,e){var t="Top",s="Right",r="Bottom",i="Left",o=(e<3?[t,s,r,i]:[t+i,t+s,r+s,r+i]).map(function(a){return e<2?n+a:"border"+a+n});ac[e>1?"border"+n:n]=function(a,c,l,u,h){var d,f;if(arguments.length<4)return d=o.map(function(g){return Un(a,g,l)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(u+"").split(" "),f={},o.forEach(function(g,p){return f[g]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(c,f,h)}});var b_={name:"css",register:pu,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,s,r,i){var o=this._props,a=e.style,c=s.vars.startAt,l,u,h,d,f,g,p,m,_,T,w,y,v,k,E,x;Ih||pu(),this.styles=this.styles||f_(e),x=this.styles.props,this.tween=s;for(p in t)if(p!=="autoRound"&&(u=t[p],!(Ft[p]&&n_(p,t,s,r,e,i)))){if(f=typeof u,g=ac[p],f==="function"&&(u=u.call(s,r,e,i),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=mo(u)),g)g(this,e,p,u,s)&&(E=1);else if(p.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",_s.lastIndex=0,_s.test(l)||(m=pt(l),_=pt(u)),_?m!==_&&(l=Os(e,p,l,_)+_):m&&(u+=m),this.add(a,"setProperty",l,u,r,i,0,0,p),o.push(p),x.push(p,0,a[p]);else if(f!=="undefined"){if(c&&p in c?(l=typeof c[p]=="function"?c[p].call(s,r,e,i):c[p],dt(l)&&~l.indexOf("random(")&&(l=mo(l)),pt(l+"")||l==="auto"||(l+=Bt.units[p]||pt(Un(e,p))||""),(l+"").charAt(1)==="="&&(l=Un(e,p))):l=Un(e,p),d=parseFloat(l),T=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),T&&(u=u.substr(2)),h=parseFloat(u),p in Tn&&(p==="autoAlpha"&&(d===1&&Un(e,"visibility")==="hidden"&&h&&(d=0),x.push("visibility",0,a.visibility),fs(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Tn[p],~p.indexOf(",")&&(p=p.split(",")[0]))),w=p in es,w){if(this.styles.save(p),y||(v=e._gsap,v.renderTransform&&!t.parseTransform||vo(e,t.parseTransform),k=t.smoothOrigin!==!1&&v.smooth,y=this._pt=new Pt(this._pt,a,Xe,0,1,v.renderTransform,v,0,-1),y.dep=1),p==="scale")this._pt=new Pt(this._pt,v,"scaleY",v.scaleY,(T?Nr(v.scaleY,T+h):h)-v.scaleY||0,du),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){x.push(Mt,0,a[Mt]),u=JD(u),v.svg?mu(e,u,0,k,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==v.zOrigin&&fs(this,v,"zOrigin",v.zOrigin,_),fs(this,a,p,cc(l),cc(u)));continue}else if(p==="svgOrigin"){mu(e,u,1,k,0,this);continue}else if(p in __){sP(this,v,p,d,T?Nr(d,T+u):u);continue}else if(p==="smoothOrigin"){fs(this,v,"smooth",v.smooth,u);continue}else if(p==="force3D"){v[p]=u;continue}else if(p==="transform"){rP(this,u,e);continue}}else p in a||(p=Qr(p)||p);if(w||(h||h===0)&&(d||d===0)&&!jD.test(u)&&p in a)m=(l+"").substr((d+"").length),h||(h=0),_=pt(u)||(p in Bt.units?Bt.units[p]:m),m!==_&&(d=Os(e,p,l,_)),this._pt=new Pt(this._pt,w?v:a,p,d,(T?Nr(d,T+h):h)-d,!w&&(_==="px"||p==="zIndex")&&t.autoRound!==!1?UD:du),this._pt.u=_||0,m!==_&&_!=="%"&&(this._pt.b=l,this._pt.r=VD);else if(p in a)QD.call(this,e,p,l,T?T+u:u);else if(p in e)this.add(e,p,l||e[p],T?T+u:u,r,i);else if(p!=="parseTransform"){Ch(p,u);continue}w||(p in a?x.push(p,0,a[p]):x.push(p,1,l||e[p])),o.push(p)}}E&&c_(this)},render:function(e,t){if(t.tween._time||!$h())for(var s=t._pt;s;)s.r(e,s.d),s=s._next;else t.styles.revert()},get:Un,aliases:Tn,getSetter:function(e,t,s){var r=Tn[t];return r&&r.indexOf(",")<0&&(t=r),t in es&&t!==Mt&&(e._gsap.x||Un(e,"x"))?s&&Qf===s?t==="scale"?HD:qD:(Qf=s||{})&&(t==="scale"?YD:GD):e.style&&!kh(e.style[t])?BD:~t.indexOf("-")?WD:Mh(e,t)},core:{_removeProperty:or,_getMatrix:Lh}};It.utils.checkPrefix=Qr;It.core.getStyleSaver=f_;(function(n,e,t,s){var r=Dt(n+","+e+","+t,function(i){es[i]=1});Dt(e,function(i){Bt.units[i]="deg",__[i]=1}),Tn[r[13]]=n+","+e,Dt(s,function(i){var o=i.split(":");Tn[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Dt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Bt.units[n]="px"});It.registerPlugin(b_);var Ks=It.registerPlugin(b_)||It;Ks.core.Tween;const x_=n=>{const e=b.useRef(null),t=b.useRef(null),s=Jt(f=>f.nodesNormalized),{label:r,source:i,target:o,sourceX:a,sourceY:c,sourceZ:l,targetX:u,targetY:h,targetZ:d}=n;return b.useEffect(()=>{if(e.current){const f=e.current;Ks.fromTo(f.material,{linewidth:vf*15},{linewidth:vf,duration:1})}},[e,a]),qt(()=>{const f=s.get(i),g=s.get(o);if(!e.current||!t.current||!f||!g)return;const{hoveredNode:p,searchQuery:m,selectedNodeTypes:_,selectedLinkTypes:T}=Ue.getState(),w=e.current,y=p,v=T.includes(r)||_.includes(f==null?void 0:f.node_type)&&_.includes(g.node_type);if(!v&&!y&&!m){t.current.visible=!1;return}w.visible=!1,t.current.visible=!1,v&&(w.visible=!0,t.current.visible=!0),(y==null?void 0:y.ref_id)===i||(y==null?void 0:y.ref_id)===o?(w.visible=!0,t.current.visible=!0,Ks.to(w.material,{linewidth:6,duration:.5,ease:"power1.out"})):Ks.to(w.material,{linewidth:1,duration:.5,ease:"power1.out"})}),P.jsxs("group",{ref:t,children:[P.jsx(vp,{ref:e,color:"white",isLine2:!0,lineWidth:2,name:"line",points:[a,c,l,u,h,d]}),P.jsx(Au,{children:P.jsx(xu,{anchorX:"center",anchorY:"middle",color:"white",...wu,fontSize:10,children:r})})]})};x_.displayName="LineComponent";const iP=b.memo(x_),op=new _e(0,0,0),w_=b.memo(n=>{const{sourceX:e,sourceY:t,sourceZ:s,targetX:r,targetY:i,targetZ:o,color:a}=n,c=b.useRef(null);return qt(()=>{c.current&&(c.current.start.set(e||0,t||0,s||0),c.current.end.set(r,i,o))}),P.jsx(P.Fragment,{children:P.jsx(F1,{ref:c,color:a,end:op,start:op})})});w_.displayName="LineInstance";const k_=b.memo(({linksPosition:n})=>{const[e,t]=Jt(a=>[a.dataInitial,a.nodesNormalized]),[s,r,i]=Ue(a=>[a.showSelectionGraph,a.searchQuery,a.selectedNodeTypes]),o=Hn(a=>a.normalizedSchemasByType);return P.jsxs(P.Fragment,{children:[P.jsx("group",{name:"simulation-3d-group__connections",visible:!s,children:e==null?void 0:e.links.map(a=>{const c=n.get(a.ref_id)||{sx:0,sy:0,sz:0,tx:0,ty:0,tz:0};return P.jsx(iP,{label:a.edge_type,source:a.source,sourceX:c.sx,sourceY:c.sy,sourceZ:c.sz,target:a.target,targetX:c.tx,targetY:c.ty,targetZ:c.tz},a.ref_id)})}),P.jsx("group",{visible:!r&&!i.length,children:P.jsx(I1,{limit:1e3,lineWidth:.05,children:e==null?void 0:e.links.map(a=>{var d;const c=n.get(a.ref_id)||{sx:0,sy:0,sz:0,tx:0,ty:0,tz:0},l=t.get(a.source)||"",h=(l?(d=o[l.node_type])==null?void 0:d.primary_color:"white")||"white";return P.jsx(w_,{color:h,sourceX:c.sx,sourceY:c.sy,sourceZ:c.sz,targetX:c.tx,targetY:c.ty,targetZ:c.tz},a.ref_id)})})})]})});k_.displayName="Connections";const oP=({node:n,isFixed:e,isLast:t})=>{var h,d,f;const{normalizedSchemasByType:s,getNodeKeysByType:r}=Hn(g=>g),i=b.useRef(null),o=(h=s[n.node_type])==null?void 0:h.icon,a=o?hc[o]:null,c=r(n.node_type)||"",l=n!=null&&n.properties?n==null?void 0:n.properties[c]:"",u=l?_a(l,30):"";return b.useEffect(()=>{i.current&&e&&Ks.to(i.current,{scale:.1,duration:1,ease:"power3.out"})},[e]),P.jsx(xo,{ref:i,as:"div",center:!0,className:"sprite",sprite:!0,children:t||e?P.jsx(aP,{align:"center",justify:"center",children:P.jsxs(P.Fragment,{children:[P.jsx(lP,{children:P.jsx(uP,{align:"center",height:32,justify:"center",radius:"50%",src:((d=n==null?void 0:n.properties)==null?void 0:d.image_url)||"",width:32,children:(f=n==null?void 0:n.properties)!=null&&f.image_url?null:P.jsx("span",{children:a?P.jsx(a,{}):P.jsx(Vi,{})})})}),P.jsx(cP,{children:u})]})}):null})},aP=ye(Me)`
  background: ${oe.gray100};
  padding: 8px;
  border-radius: 8px;
`,cP=ye(Me)`
  color: ${oe.white};
  width: 100px;
  text-align: center;
  margin-top: 8px;
`,lP=ye(Me)`
  text-align: center;
  width: 48px;
  height: 48px;
  outline: 1px solid ${oe.white};
  outline-offset: 0px;
  background: ${oe.BG1};
  color: ${oe.white};
  border-radius: 50%;
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 12px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }
`,uP=ye(Me)`
  background-image: ${({src:n})=>`url(${n})`};
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  width: ${({width:n})=>`${n}px`};
  height: ${({height:n})=>`${n}px`};
  border-radius: ${({radius:n})=>`${n}`};
  font-size: 20px;
`,T_=b.memo(n=>{const{node:e,x:t,y:s,z:r,iX:i,iY:o,iZ:a,onRemove:c,isFixed:l,isLast:u}=n,h=b.useRef(null);return b.useEffect(()=>{h.current&&!l&&Ks.fromTo(h.current.position,{x:i,y:o,z:a},{x:t,y:s,z:r,duration:1,ease:"power3.out"})},[t,s,r,i,o,a,l]),b.useEffect(()=>{h.current&&l&&Ks.to(h.current.position,{x:t,y:s,z:r,duration:2,ease:"power3.out",onComplete:()=>{c&&c(e.ref_id)}})},[e.fx,e.fy,e.fz,e.ref_id,c,l,t,s,r]),P.jsx("mesh",{ref:h,position:[i,o,a],scale:e.scale||1,userData:e,children:P.jsx(oP,{isFixed:l,isLast:u,node:e})})});T_.displayName="CandidateWrapper";const E_=b.memo(()=>{const{activeNode:n,simulation:e}=Ue(c=>c),t=b.useRef([""]),[s,r]=b.useState(0),i={x:(n==null?void 0:n.fx)||0,y:(n==null?void 0:n.fy)||0,z:(n==null?void 0:n.fz)||0},o=200,a=c=>{t.current=t.current.filter(l=>l!==c),r(s+1)};return P.jsx(P.Fragment,{children:e.nodes().slice(-5).filter(c=>c.fx===void 0||t.current.some(l=>l===c.ref_id)).map((c,l,u)=>{const d=c.fx||i.x+Math.cos(0)*o,f=c.fy||i.y+Math.sin(0)*o,g=c.fz||i.z;return t.current.includes(c.ref_id)||t.current.push(c.ref_id),P.jsx(T_,{isFixed:typeof c.fx=="number",isLast:l===u.length-1,iX:i.x,iY:i.y,iZ:i.z,node:c,onRemove:a,x:d,y:f,z:g},c.ref_id)})})});E_.displayName="Candidates";const C_=b.memo(({color:n,scale:e,name:t,index:s,node:r,nodeType:i})=>{const o=b.useRef(null),a=b.useRef(null);return qt(()=>{var g;if(!o.current||!a.current)return;const{searchQuery:c,simulation:l,selectedNodeTypes:u,selectedLinkTypes:h}=Ue.getState(),{nodesNormalized:d}=Jt.getState(),f=l==null?void 0:l.nodes()[s];if(typeof(f==null?void 0:f.fx)=="number")o.current.scale.set(e,e,e);else{o.current.scale.set(0,0,0);return}if(c){const p=t.toLowerCase().includes(c.toLowerCase()),m=p?1:.1,_=!!p;a.current.visible=_,o.current.scale.set(m,m,m)}else if(u.length){const p=u.includes(i),m=p?1:.1,_=!!p;a.current.visible=_,o.current.scale.set(m,m,m)}else if(h.length){const p=d.get(r.ref_id),m=(g=p==null?void 0:p.edgeTypes)==null?void 0:g.some(w=>h.includes(w)),_=m?1:.1,T=!!m;a.current.visible=T,o.current.scale.set(_,_,_)}else o.current.scale.set(1,1,1),a.current.visible=!0}),P.jsxs(Au,{ref:o,follow:!0,lockX:!1,lockY:!1,lockZ:!1,name:"group-name",visible:!1,children:[P.jsxs("mesh",{ref:a,name:"instance-helper",scale:[e,e,e],userData:r,children:[P.jsx("sphereGeometry",{args:[30,16,16]}),P.jsx("meshBasicMaterial",{color:"white",opacity:0,transparent:!0})]}),P.jsx(Vp,{color:n,name:"instance",scale:e})]})});C_.displayName="Point";const hP=["#fff","#9747FF","#00887A","#0098A6","#0288D1","#33691E","#465A65","#512DA7","#5C6BC0","#5D4038","#662C00","#689F39","#6B1B00","#750000","#78909C","#7E57C2","#8C6E63","#AA47BC","#BF360C","#C2175B","#EC407A","#EF6C00","#F5511E","#FF9696","#FFC064","#FFCD29","#FFEA60"],dP=()=>{const n=As(),e=Jt(o=>o.dataInitial),{normalizedSchemasByType:t}=Hn(o=>o),s=yu(),r=b.useMemo(()=>new Ry(30,.5,16,100),[]),{getNodeKeysByType:i}=Hn(o=>o);return P.jsx(P.Fragment,{children:P.jsxs(N1,{geometry:r,limit:1e3,range:1e3,visible:!n||!0,children:[P.jsx("meshBasicMaterial",{}),e==null?void 0:e.nodes.map((o,a)=>{var f;const l=((f=t[o.node_type])==null?void 0:f.primary_color)??(hP[s.indexOf(o.node_type)]||oe.white),u=o.scale||1,h=i(o.node_type)||"",d=h&&(o!=null&&o.properties)&&(o==null?void 0:o.properties[h])||"";return P.jsx(C_,{color:l,index:a,name:d,node:o,nodeType:o.node_type,scale:u},o.ref_id)})]})})},fP=b.memo(dP);function pP(n){const e=b.useRef(n);b.useEffect(()=>{const t=Object.entries(n).reduce((s,[r,i])=>(e.current[r]!==i&&(s[r]=[e.current[r],i]),s),{});Object.keys(t).length>0&&console.log("Changed props:",t),e.current=n})}const mP=n=>{const e=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;return n.replace(e,t=>/^[\d*#]$/.test(t)?t:"")},S_={metalness:.9,roughness:0},O_=new dc,A_=O_.load("noimage.jpeg");new fc({...S_,map:A_});const gP=.4;new fc({...S_,map:A_,transparent:!0,opacity:gP});const ca={},_P=n=>{const[e,t]=b.useState(null);return b.useEffect(()=>{var r;if(!n){t(null);return}const s=n;if((r=ca[s])!=null&&r.texture){t(ca[s].texture);return}O_.load(n,i=>{ca[s]={texture:i,material:new fc({map:i})},t(i)},void 0,()=>{t(null)})},[n]),b.useEffect(()=>()=>{e&&(Object.values(ca).some(r=>r.texture===e)||e.dispose())},[e]),{texture:e}};function yP(n){const e=_a(n,30),t=e.split(" ");if(t.length<=5)return e;const s=Math.ceil(t.length/3),r=s*2,i=t.slice(0,s).join(" "),o=t.slice(s,r).join(" "),a=t.slice(r).join(" ");return`${i}
${o}
${a}`}const R_=b.memo(n=>{var v,k,E,x;const{node:e,hide:t,ignoreDistance:s,color:r}=n,i=b.useRef(null),o=b.useRef(null),a=b.useRef(null),c=b.useRef(null);pP(n);const l=b.useRef(new _e),{texture:u}=_P(((v=e.properties)==null?void 0:v.image_url)||""),{normalizedSchemasByType:h,getNodeKeysByType:d}=Hn(C=>C),f=d(e.node_type)||"",g=f&&(e!=null&&e.properties)?mP(String((e==null?void 0:e.properties[f])||"")):"";qt(({camera:C,clock:S})=>{var X,K;if(!o.current||!a.current)return;const{selectedNode:R,hoveredNode:O,activeEdge:L,searchQuery:z,selectedNodeTypes:W,selectedLinkTypes:B}=Ue.getState(),V=()=>{const Q=l.current.setFromMatrixPosition(o.current.matrixWorld);o.current&&(o.current.visible=s?!0:Q.distanceTo(C.position)<1500)};if(z.length<3&&!W.length&&!B.length?(a.current.visible=!0,V()):(o.current.visible=!1,a.current.visible=!1),e.ref_id===(R==null?void 0:R.ref_id)||e.ref_id===(O==null?void 0:O.ref_id)||(L==null?void 0:L.target)===e.ref_id||(L==null?void 0:L.source)===e.ref_id||z&&g.toLowerCase().includes(z.toLowerCase())||W.includes(e.node_type)||((X=e.edgeTypes)==null?void 0:X.some(Q=>B.includes(Q)))){o.current&&!o.current.visible&&(o.current.visible=!0);const Q=S.getElapsedTime(),F=2,j=Q%F/F,A=1+j*2,I=1-j;if(c.current&&!c.current.visible){c.current.visible=!0,c.current.scale.set(A,A,A);const{material:Y}=c.current;Y instanceof qh&&(Y.opacity=I)}return}(K=c.current)!=null&&K.visible&&(c.current.visible=!1)});const p=(k=h[e.node_type])==null?void 0:k.primary_color,m=(E=h[e.node_type])==null?void 0:E.icon,_=p??r,w=(m?hc[m]:null)?m:"NodesIcon",y={u_texture:{value:u},u_radius:{value:.5}};return P.jsx(Au,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,name:"billboard",userData:e,children:P.jsxs("mesh",{ref:o,name:e.ref_id,userData:e,visible:!t,children:[P.jsxs("mesh",{ref:a,name:"event-handler",children:[P.jsx("boxGeometry",{args:[40,40,40]}),P.jsx("meshStandardMaterial",{opacity:0,transparent:!0})]}),P.jsxs("mesh",{ref:c,position:[0,0,-2],children:[P.jsx("ringGeometry",{args:[29,30,32]})," ",P.jsx("meshBasicMaterial",{color:_,opacity:.5,side:ya,transparent:!0})]}),(x=e.properties)!=null&&x.image_url&&u?P.jsx(ty,{args:[10*2,10*2],scale:2,children:P.jsx("shaderMaterial",{fragmentShader:`
          uniform sampler2D u_texture;
          uniform float u_radius;
          varying vec2 vUv;

          void main() {
            vec2 center = vec2(0.5, 0.5); // Center of the circle
            float dist = distance(vUv, center);
            if (dist < u_radius) {
              gl_FragColor = texture2D(u_texture, vUv);
            } else {
              discard; // Discard pixels outside the circle
            }
          }
        `,uniforms:y,vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `})}):P.jsx(S1,{ref:i,name:"svg",onUpdate:C=>{C.traverse(S=>{S instanceof Ep&&(S.material=new qh({color:_}))})},position:[-15,15,0],scale:2,src:`svg-icons/${w}.svg`,userData:e}),g&&P.jsx(xu,{color:_,fillOpacity:1,name:"text",position:[0,-65,0],scale:1,userData:e,...wu,fontSize:20,children:yP(g)})]})})},(n,e)=>n.hide===e.hide&&n.ignoreDistance===e.ignoreDistance&&n.node.ref_id===e.node.ref_id);R_.displayName="TextNode";const D_=b.memo(n=>{const{node:e,color:t,isFixed:s}=n;return P.jsx("mesh",{name:"wr2",scale:e.scale||1,userData:e,children:P.jsx("mesh",{visible:s,children:P.jsx(R_,{color:t,ignoreDistance:!1,node:e,scale:e.scale||1},e.ref_id)})},e.ref_id)},(n,e)=>n.isFixed===e.isFixed);D_.displayName="NodeWrapper";const vP=200,P_=b.memo(()=>{const n=As(),e=xp(),t=b.useRef(null),s=b.useRef(null),{selectionGraphData:r,showSelectionGraph:i,setHoveredNode:o,setIsHovering:a,simulation:c}=Ue(w=>w),l=yu(),u=Jt(w=>w.dataInitial),h=Jt(w=>w.nodesNormalized),d=bo(w=>w.setTranscriptOpen);qt(()=>{});const f=b.useCallback(w=>!!(i&&!r.nodes.find(y=>y.ref_id===w.ref_id)),[i,r]),g=b.useCallback(w=>{const y=w==null?void 0:w[0];y&&(d(!1),y.userData&&(f(y.userData)||Ue.getState().setSelectedNode((y==null?void 0:y.userData)||null)))},[d,f]),p=b.useRef(null),m=b.useCallback(w=>{w.stopPropagation(),p.current&&(clearTimeout(p.current),p.current=null),e&&(a(!1),o(null))},[a,o,e]),_=b.useCallback(w=>{var k;const v=w.intersections.map(E=>E.object)[0];if(p.current&&(clearTimeout(p.current),p.current=null),(k=v==null?void 0:v.userData)!=null&&k.ref_id){const E=v.userData;f(E)||(w.stopPropagation(),p.current=setTimeout(()=>{a(!0),o(E)},vP))}},[o,f,a]),T=i&&!!n;return P.jsxs(P.Fragment,{children:[P.jsx("group",{ref:t,name:"simulation-3d-group__nodes",visible:!T,children:u==null?void 0:u.nodes.map((w,y)=>{const v=ny[l.indexOf(w.node_type)]||oe.white,k=c.nodes()[y],E=typeof(k==null?void 0:k.fx)=="number",x=h.get(w.ref_id);return x?P.jsx(D_,{color:v,isFixed:E,node:x,scale:w.scale||1},w.ref_id):null})}),P.jsx(C1,{filter:w=>w.filter(y=>{var v;return!!((v=y.userData)!=null&&v.ref_id)}),onChange:g,onPointerOut:m,onPointerOver:_,children:P.jsx("group",{ref:s,name:"simulation-3d-group__node-points",children:P.jsx(fP,{})})}),P.jsx(E_,{})]})});P_.displayName="Cubes";const bP={earthRef:null},xP=mp(n=>({...bP,setEarthRef:e=>n({earthRef:e})})),wP=new _e(0,0,0),kP=()=>{const n=b.useRef(null),e=b.useRef(null),{graphStyle:t,showSelectionGraph:s}=Ue(a=>a),r=xP(a=>a.setEarthRef),i=Bs("textures/earth/galaxy.png"),o=Bs("textures/earth/clouds.png");return qt(({camera:a})=>{e.current&&e.current.position.copy(a.getWorldPosition(wP))}),b.useLayoutEffect(()=>{n.current&&r(n)},[r]),t!=="earth"||s?null:P.jsxs(P.Fragment,{children:[P.jsxs("mesh",{ref:n,userData:{type:"earth"},children:[P.jsx("sphereGeometry",{args:[ia,200,200]}),P.jsx(TP,{})]}),P.jsxs("mesh",{children:[P.jsx("sphereGeometry",{args:[ia+2,200,200]}),P.jsx("meshStandardMaterial",{alphaMap:o,map:o,transparent:!0})]}),P.jsxs("mesh",{children:[P.jsx("sphereGeometry",{args:[ia*4,200,200]}),P.jsx("meshStandardMaterial",{map:i,opacity:.4,side:ya,transparent:!0})]}),P.jsx("directionalLight",{ref:e,intensity:.9,position:[0,0,ia*3]})]})},TP=()=>{const n=Bs("textures/earth/earth.jpeg"),e=Bs("textures/earth/bump.jpeg"),t=Bs("textures/earth/water.png"),s=b.useMemo(()=>new fc({map:n,bumpMap:e,aoMap:e,roughnessMap:e,metalnessMap:t,toneMapped:!0,roughness:35,metalness:0}),[n,e,t]);return P.jsx("meshStandardMaterial",{...s})},EP="C",CP=256,SP=256,OP={g:"LottieFiles AE 0.1.20"},AP=[{ty:0,nm:"I",sr:1,st:0,op:26,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_0",ind:1},{ty:0,nm:"I",sr:1,st:26,op:52,ip:26,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_1",ind:2},{ty:0,nm:"I",sr:1,st:52,op:78,ip:52,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_2",ind:3},{ty:0,nm:"I",sr:1,st:78,op:108,ip:78,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_3",ind:4}],RP="5.5.7",DP=60,PP=104,MP=0,NP=[{nm:"",id:"comp_0",layers:[{ty:4,nm:"I",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.656,.016],[0,20],[-34.641,0],[.016,-19.984]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,10],[17.321,30],[17.321,-10],[51.962,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,-9.984],[17.32,10],[17.32,-30],[-17.32,-50.016]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,30],[17.32,50],[17.305,10],[-17.32,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.321,10],[-51.962,30],[-51.962,-10],[-17.321,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[0,20],[-34.641,0],[0,-20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:1}]},{nm:"",id:"comp_1",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"S",sr:1,st:-20,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,-10.016],[-17.32,-30],[17.32,-50],[51.961,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[.015,-20],[0,20],[34.641,40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,-10.016],[-17.32,-30],[17.32,-50],[51.961,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:33,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.324,30],[-17.34,-9.984],[17.336,-30.016],[17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:35,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[.015,-20],[0,20],[34.641,40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.324,30],[-17.34,-9.984],[17.336,-30.016],[17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.305,30],[-17.336,-9.984],[17.336,-30.016],[17.32,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.016,-20.016],[-34.643,-40],[-34.641,.016],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:31,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,-10],[17.321,30],[-17.321,10],[-17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.305,50],[-51.961,30],[-17.321,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:10,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:34,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.305,30],[-17.336,-9.984],[17.336,-30.016],[17.32,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:11,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,-10],[17.321,30],[-17.321,10],[-17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.305,50],[-51.961,30],[-17.321,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:12,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.016,-20.016],[-34.643,-40],[-34.641,.016],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:13,parent:1}]},{nm:"",id:"comp_2",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"T",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-34.656,.031],[.047,-19.969],[34.652,.031],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[17.32,-9.984],[17.32,-50],[-17.32,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"F",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.321,30],[-51.962,10],[-51.962,-30],[-17.321,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"S",sr:1,st:0,op:30,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[17.32,-9.984],[17.32,-50],[-17.32,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"F",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,30],[17.321,10],[17.321,-30],[51.962,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"S",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,50],[17.32,30],[17.336,-10],[-17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"F",sr:1,st:0,op:30,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,30],[17.321,10],[17.321,-30],[51.962,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"T",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-34.656,0],[.015,-20],[34.656,0],[.012,20.062]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1}]},{nm:"",id:"comp_3",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"S",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-10],[-17.32,-30.016],[-51.961,-10],[-17.305,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"T",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.015,60.016],[-34.642,40],[-34.641,0],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[-17.32,-30],[17.32,-10],[17.32,30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.312,-10],[-17.313,10],[17.332,30],[51.977,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"F",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-29.984],[17.348,10],[-17.305,30],[-17.305,-9.984]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"F",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-30],[17.32,10],[-17.32,30],[-17.336,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-10],[-17.32,-30.016],[-51.961,-10],[-17.305,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"T",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[0,-20],[0,-60.016],[34.641,-40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"S",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[-17.32,-30],[17.32,-10],[17.32,30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.312,-10],[-17.313,10],[17.332,30],[51.977,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1},{ty:4,nm:"F",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-30],[17.32,10],[-17.32,30],[-17.336,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:10,parent:1}]}],IP={nm:EP,h:CP,w:SP,meta:OP,layers:AP,v:RP,fr:DP,op:PP,ip:MP,assets:NP},$P=({meshId:n})=>{const e=b.useRef(null);return b.useEffect(()=>{const t=document.getElementById(`lottie-animation-${n}`);return t&&(e.current=W_.loadAnimation({container:t,animationData:IP,loop:!0,autoplay:!0})),()=>{e.current&&e.current.destroy()}},[n]),P.jsx("div",{id:`lottie-animation-${n}`,style:{width:"2em",height:"2em"}})},yl=()=>Math.floor(Math.random()*2001)-1e3,FP=()=>P.jsx(P.Fragment,{children:["a","b","c"].map(n=>{const e=yl(),t=yl(),s=yl();return P.jsx("mesh",{position:[e,t,s],children:P.jsx(xo,{center:!0,sprite:!0,children:P.jsx(LP,{children:P.jsx($P,{meshId:n})})})},n)})}),LP=ye.div`
  border: 2px solid white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 20px;
`,Oi=n=>({close:{backgroundColor:"rgba(48, 51, 66, 1)",borderColor:"#fff",fontColor:"rgba(255, 255, 255, 1)"},focus:{backgroundColor:n?"rgba(255, 255, 255, 0.90);":"rgba(255, 255, 255, 0.90)",borderColor:n?"#FFDB58bb":"#fff",fontColor:"rgba(48, 51, 66, 1)"},menu:{backgroundColor:"#00000066",borderColor:n?"#ffffff66":"#5078f2",fontColor:n?"#ffffff66":"#fff"}}),jP=new _e,M_=b.memo(()=>{var x,C;const n=b.useRef(null),e=bo(S=>S.setSidebarOpen),[t,s]=N.useState(null),{open:r}=Ai("editNodeName"),{open:i}=Ai("addEdgeToNode"),{open:o}=Ai("mergeToNode"),{open:a}=Ai("createBounty"),[c]=_u(S=>[S.isAdmin]),[l]=Jt(S=>[S.addNewNode]),u=As(),{showSelectionGraph:h,selectionGraphData:d,setSelectedNode:f,setShowSelectionGraph:g}=Ue(S=>S),p=Py(),m=b.useCallback(async()=>{try{if(u!=null&&u.ref_id){const S=await yp(u==null?void 0:u.ref_id,d.nodes.length||0);S&&l(S)}}catch(S){console.error(S)}},[l,u==null?void 0:u.ref_id,d.nodes.length]);qt(()=>{_()});const _=b.useCallback(()=>{const S=h?d:p;if(n.current){const R=S==null?void 0:S.nodes.find(O=>O.ref_id===(u==null?void 0:u.ref_id));if(R){const O=jP.set(R==null?void 0:R.x,R==null?void 0:R.y,R==null?void 0:R.z);n.current.position.copy(O)}}},[u,h,d,p]),T=b.useMemo(()=>{const S=c?[{key:"control-key-1",colors:Oi(h).focus,icon:P.jsx(hy,{}),left:-80,className:"add",onClick:O=>{s(O.currentTarget)}},{key:"control-key-2",colors:Oi(h).focus,icon:P.jsx(wp,{}),left:-40,className:"edit",onClick:()=>{r()}}]:[],R=[{key:"control-key-4",colors:Oi(h).focus,icon:P.jsx(q_,{}),left:0,className:"expand",onClick:()=>{const O=!h;g(O),O&&e(!0)}},{key:"control-key-5",colors:Oi(!0).close,icon:P.jsx(Vi,{}),left:40,className:"exit",onClick:()=>{m()}},{key:"control-key-6",colors:Oi(!0).close,icon:P.jsx(H_,{}),left:40,className:"exit",onClick:()=>{g(!1),f(null)}}];return[...S,...R].map((O,L)=>({...O,left:-80+L*40}))},[c,h,r,g,e,m,f]);if(!u)return null;const w=()=>{s(null)},y=!!t,v=y?"simple-popover":void 0,k=((x=u==null?void 0:u.node_type)==null?void 0:x.toLowerCase())==="repository",E=!!(u&&((C=u==null?void 0:u.node_type)==null?void 0:C.toLowerCase())==="function");return P.jsx("group",{ref:n,children:P.jsxs(xo,{center:!0,className:"control-panel",onClick:S=>S.stopPropagation(),onKeyDown:S=>S.stopPropagation(),onPointerDown:S=>S.stopPropagation(),onPointerOut:S=>S.stopPropagation(),onPointerOver:S=>S.stopPropagation(),onPointerUp:S=>S.stopPropagation(),sprite:!0,zIndexRange:[16777271,16777272],children:[T.map(S=>P.jsx(zP,{backgroundColor:S.colors.backgroundColor,borderColor:S.colors.borderColor,className:S.className,fontColor:S.colors.fontColor,left:S.left,onClick:R=>{R.stopPropagation(),S.onClick(R)},children:S.icon},S.key)),E&&P.jsx(UP,{left:2,onClick:()=>{a()},children:"Create Test"}),P.jsx(VP,{anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:v,onClose:w,open:y,transformOrigin:{vertical:"top",horizontal:"right"},children:k?P.jsxs(P.Fragment,{children:[P.jsxs(kr,{"data-testid":"generate_tests",onClick:()=>{w()},children:[P.jsx(ap,{children:P.jsx(Bh,{"data-testid":"AddCircleIcon"})}),"Generate Tests"]}),P.jsxs(kr,{"data-testid":"add_comments",onClick:()=>{w()},children:[P.jsxs(ap,{children:[P.jsx(cy,{"data-testid":"DocumentIcon"})," "]}),"Add Comments"]}),P.jsxs(kr,{"data-testid":"review_bugs",onClick:()=>{w()},children:[P.jsx(ly,{"data-testid":"ConstructionIcon"})," Review Bugs"]}),P.jsxs(kr,{"data-testid":"find_vulnerabilities",onClick:()=>{w()},children:[P.jsx(uy,{"data-testid":"RobotIcon"})," Find Vulnerabilities"]})]}):P.jsxs(P.Fragment,{children:[P.jsxs(kr,{"data-testid":"merge",onClick:()=>{o(),w()},children:[P.jsx(ay,{"data-testid":"MergeIcon"})," Merge"]}),P.jsxs(kr,{"data-testid":"add_edge",onClick:()=>{i(),w()},children:[P.jsx(Bh,{"data-testid":"AddCircleIcon"}),"Add edge"]})]})})]})})});M_.displayName="NodeControls";const zP=ye.div`
  position: fixed;
  top: -60px;
  left: ${n=>-7+n.left}px;
  width: 24px;
  height: 24px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${n=>n.backgroundColor?n.backgroundColor:"#000000bb"};
  color: ${n=>n.fontColor?n.fontColor:"#ffffff"};
  border-radius: 100%;
  font-size: 16px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,kr=ye(Me).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${oe.BUTTON1};
  color: ${oe.white};

  &:hover {
    background: ${oe.BUTTON1_HOVER};
    color: ${oe.GRAY3};
  }
`,VP=ye(dy)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${oe.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
    background-color: transparent !important;
    margin: 2px;
  }
`,ap=ye.div`
  display: flex;
  align-items: center;
  justify-content: start;

  svg {
    margin-top: 1px;
    width: 12px;
    height: 12px;
  }
`,UP=ye.div`
  position: fixed;
  top: 40px;
  left: ${n=>-53+n.left}px;
  width: 100px;
  padding: 6px;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${oe.createTestButton};
  color: ${oe.black};
  font-size: 14px;
  font-family: Barlow;
  font-weight: 600;
  cursor: pointer;
  &:hover {
    transform: scale(1.05);
  }
`,N_=b.memo(()=>P.jsx(P.Fragment,{children:P.jsx(M_,{})}));N_.displayName="NodeDetailsPanel";const BP=()=>{const{dataInitial:n,isLoadingNew:e,isFetching:t,dataNew:s,resetDataNew:r}=Jt(m=>m),i=b.useRef(null),{normalizedSchemasByType:o}=Hn(m=>m),a=b.useRef(new Map),c=b.useRef(new Map),{setData:l,simulation:u,simulationCreate:h,simulationHelpers:d,graphStyle:f,setGraphRadius:g}=Ue(m=>m),p=Ue(m=>m.removeSimulation);return b.useEffect(()=>{if(!s)return;const m=s.nodes||[],_=s.links||[],T=structuredClone(m),w=structuredClone(_);if(u){const y=Y_.isEqual(s,n);d.addNodesAndLinks(T,w,y)}u||h(T,w)},[l,s,u,h,d,n]),b.useEffect(()=>{n||p()},[n,p]),b.useEffect(()=>{u&&d.setForces()},[f,d,u]),b.useEffect(()=>{u&&u.on("end",()=>{if(r(),u.nodes().forEach(m=>{m.fx=m.x,m.fy=m.y,m.fz=m.z,c.current.set(m.ref_id,{x:m.x,y:m.y,z:m.z})}),i!=null&&i.current){const m=i.current.getObjectByName("simulation-3d-group__nodes"),_=i.current.getObjectByName("simulation-3d-group__node-points"),T=i.current.getObjectByName("simulation-3d-group__connections");m&&m.children.forEach((v,k)=>{const E=u.nodes()[k];E&&v.position.set(E.x,E.y,E.z)}),_&&_.children[0].children.forEach((v,k)=>{const E=u.nodes()[k];E&&v.position.set(E.x,E.y,E.z)}),a.current.clear(),n==null||n.links.forEach(v=>{const k=c.current.get(v.source)||{x:0,y:0,z:0},E=c.current.get(v.target)||{x:0,y:0,z:0},{x,y:C,z:S}=k,{x:R,y:O,z:L}=E;a.current.set(v.ref_id,{sx:x,sy:C,sz:S,tx:R,ty:O,tz:L})}),T&&T.children.forEach((v,k)=>{const E=v.children[0],x=v.children[1];if(E instanceof bu){const C=E,S=n==null?void 0:n.links[k];if(S){const R=c.current.get(S.source)||{x:0,y:0,z:0},O=c.current.get(S.target)||{x:0,y:0,z:0};if(!R||!O){console.warn(`Missing source or target node for link: ${S==null?void 0:S.ref_id}`);return}const{x:L,y:z,z:W}=R,{x:B,y:V,z:U}=O;a.current.set(S.ref_id,{sx:L,sy:z,sz:W,tx:B,ty:V,tz:U}),x.position.set((L+B)/2,(z+V)/2,(W+U)/2),C.geometry.setPositions([L,z,W,B,V,U]);const{material:X}=C;X.transparent=!0,X.opacity=.3}}});const w=new Cp().setFromObject(m),y=new Sp;w.getBoundingSphere(y),y.radius&&g(y.radius)}})},[n,u,g,o,r]),u?P.jsxs("group",{ref:i,children:[P.jsx(P_,{}),f==="earth"&&P.jsx(kP,{}),(e||t)&&P.jsx(FP,{}),f!=="earth"&&P.jsx(k_,{linksPosition:a.current}),P.jsx(N_,{})]}):null},WP=()=>{const{normalizedSchemasByType:n}=Hn(o=>o),e=yu(),t=Ue(o=>o.setSelectedNodeTypes),s=Ue(o=>o.selectedNodeTypes),r=Ue(o=>o.resetSelectedNodeTypes);function i(o){t(o)}return P.jsxs(qP,{children:[P.jsx(cp,{className:Fr({isActive:!s.length}),onClick:()=>r(),children:P.jsx("div",{className:"text",children:"All Nodes"})}),e.map(o=>{var l;const a=(l=n[o])==null?void 0:l.icon,c=hc[a]||Vi;return P.jsxs(cp,{className:Fr({isActive:s.includes(o)}),onClick:()=>i(o),children:[P.jsx("div",{className:"icon",children:P.jsx(c,{})}),P.jsx("div",{className:"text",children:o})]},o)})]})},qP=ye(Me).attrs({align:"center",direction:"row",grow:1,justify:"flex-start"})`
  flex: 1 1 100%;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px;
`,cp=ye(Me).attrs({align:"center",direction:"row",justify:"flex-start"})`
  color: ${oe.white};
  background: ${oe.BG1};
  padding: 6px 10px 6px 8px;
  font-family: Barlow;
  font-size: 13px;
  font-style: normal;
  font-weight: 500;
  line-height: 15px;
  letter-spacing: 0.78px;
  border-radius: 200px;
  cursor: pointer;

  &.isActive {
    background: ${oe.white};
    color: ${oe.BG1};

    &:hover {
      background: ${oe.white};
      color: ${oe.BG1};
    }
  }

  &:hover {
    background: ${oe.BUTTON1_PRESS};
  }

  &:active {
    background: ${oe.BUTTON1};
  }

  .icon {
    margin-right: 8px;
    font-size: 16px;
  }

  .text {
  }
`,HP=()=>{const n=Jt(i=>i.linkTypes),e=Ue(i=>i.setSelectedLinkTypes),t=Ue(i=>i.selectedLinkTypes),s=Ue(i=>i.resetSelectedLinkTypes);function r(i){e(i)}return P.jsxs(YP,{children:[P.jsx(lp,{className:Fr({isActive:!t.length}),onClick:()=>s(),children:P.jsx("div",{className:"text",children:"All Links"})}),n.map(i=>P.jsx(lp,{className:Fr({isActive:t.includes(i)}),onClick:()=>r(i),children:P.jsx("div",{className:"text",children:i})},i))]})},YP=ye(Me).attrs({align:"center",direction:"row",grow:1,justify:"flex-start"})`
  flex: 1 1 100%;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px;
`,lp=ye(Me).attrs({align:"center",direction:"row",justify:"flex-start"})`
  color: ${oe.white};
  background: ${oe.BG1};
  padding: 6px 10px 6px 8px;
  font-family: Barlow;
  font-size: 13px;
  font-style: normal;
  font-weight: 500;
  line-height: 15px;
  letter-spacing: 0.78px;
  border-radius: 200px;
  cursor: pointer;

  &.isActive {
    background: ${oe.white};
    color: ${oe.BG1};

    &:hover {
      background: ${oe.white};
      color: ${oe.BG1};
    }
  }

  &:hover {
    background: ${oe.BUTTON1_PRESS};
  }

  &:active {
    background: ${oe.BUTTON1};
  }

  .icon {
    margin-right: 8px;
    font-size: 16px;
  }

  .text {
  }
`,GP=()=>{const[n,e]=Ue(t=>[t.setSearchQuery,t.searchQuery]);return P.jsxs(XP,{children:[P.jsxs(ZP,{children:[P.jsx(KP,{id:"graph-search",onChange:t=>n(t.target.value),placeholder:"Search graph",type:"text",value:e}),P.jsx(QP,{"data-testid":"search_action_icon",onClick:()=>{n("")},children:P.jsx(P.Fragment,{children:e!=null&&e.trim()?P.jsx(X_,{}):null})})]}),P.jsx(WP,{}),P.jsx(HP,{})]})},XP=ye(Me)`
  position: absolute;
  top: 0;
  left: 0;
  flex-direction: column;
  right: 0;
  align-items: flex-start;
  justify-content: flex-start;
`,ZP=ye(Me)`
  flex-direction: row;
  margin-bottom: 16px;
`,KP=ye.input.attrs(()=>({autoCorrect:"off",autoComplete:"off"}))`
  pointer-events: auto;
  height: 48px;
  padding: 0 40px 0 18px;
  z-index: 2;
  box-shadow: 0px 1px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  color: #fff;
  box-shadow: none;
  border: none;
  border-radius: 200px;
  background: ${oe.BG2};

  -webkit-autofill,
  -webkit-autocomplete,
  -webkit-contacts-auto-fill,
  -webkit-credentials-auto-fill {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
    position: absolute !important;
    right: 0 !important;
  }

  &:focus {
    outline: 1px solid ${oe.primaryBlue};
  }

  &::placeholder {
    color: ${oe.GRAY7};
  }

  ${({loading:n})=>n&&G_`
      background-image: url('https://i.gifer.com/ZZ5H.gif');
      background-size: 25px 25px;
      background-position: right center;
      background-position-x: 95%;
      background-repeat: no-repeat;
    `}
`,QP=ye(Me).attrs({align:"center",justify:"center",p:5})`
  font-size: 32px;
  color: ${oe.mainBottomIcons};
  cursor: pointer;
  transition-duration: 0.2s;
  margin-left: -42px;
  z-index: 2;
  width: 30px;
`,JP=({fullSize:n=!0})=>{const e=bo(t=>t.sidebarIsOpen);return P.jsx(eM,{align:"center",className:Fr({"sidebar-is-open":e&&!n}),justify:"center",children:P.jsx(My,{color:oe.SECONDARY_BLUE,size:64})})},eM=ye(Me)`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: ${oe.black};
  z-index: 1;
`,I_=n=>{const e=b.useRef(null),{label:t,sourceX:s,sourceY:r,sourceZ:i,targetX:o,targetY:a,targetZ:c}=n;return P.jsxs("group",{children:[P.jsx(vp,{ref:e,color:"white",isLine2:!0,lineWidth:2,name:"line",points:[s,r,i,o,a,c]}),P.jsxs("mesh",{children:[P.jsx("planeGeometry",{args:[t.length*1,2]}),P.jsx("meshBasicMaterial",{color:"black"}),P.jsx(xu,{anchorX:"center",anchorY:"middle",color:"white",...wu,scale:1.5,children:t})]})]})};I_.displayName="Connection";const tM=b.memo(I_),nM="#68BE3E",$_=b.memo(({links:n,nodes:e})=>{const t=b.useRef(null),s=b.useRef(new Map),{setSelectionGraphRadius:r}=Ue(kp(i=>i));return b.useEffect(()=>{if(!t.current)return;t.current.children.forEach((l,u)=>{const h=l.children[0],d=l.children[1];if(h instanceof bu){const f=h,g=n[u];if(g){const p=e.find(x=>x.ref_id===g.source),m=e.find(x=>x.ref_id===g.target);if(!p||!m)return;const{x:_,y:T}=p,{x:w,y}=m;s.current.set(g.ref_id,{sx:_,sy:T,tx:w,ty:y,sz:0,tz:0});const v=new _e((_+w)/2,(T+y)/2,0);d.position.set(v.x,v.y,1);let k=Math.atan2(y-T,w-_);(w<_||Math.abs(w-_)<.01&&y<T)&&(k+=Math.PI),d.rotation.set(0,0,k),f.geometry.setPositions([_,T,0,w,y,0]);const{material:E}=f;E.color=new va(oe.white),d.visible=!0,E.opacity=1,E.linewidth=2,m.isPathNode&&p.isPathNode&&(E.color=new va(nM),d.visible=!1,E.linewidth=4,E.transparent=!0,E.opacity=.3)}}});const o=e.map(l=>new _e(l.x,l.y,l.z)),a=new Cp().setFromPoints(o),c=new Sp;a.getBoundingSphere(c),r(c.radius)},[n,r,e]),P.jsx("group",{ref:t,name:"simulation-3d-group__connections",children:n==null?void 0:n.map(i=>{var a;const o=((a=s.current)==null?void 0:a.get(i.ref_id))||{sx:0,sy:0,sz:0,tx:0,ty:0,tz:0};return P.jsx(tM,{label:i.edge_type,sourceX:o.sx,sourceY:o.sy,sourceZ:o.sz,targetX:o.tx,targetY:o.ty,targetZ:o.tz},i.ref_id)})})});$_.displayName="Connections";const sM=({onClick:n,node:e,selected:t,rounded:s=!0,x:r,y:i,z:o,id:a})=>{var k,E,x,C,S,R;const c=b.useRef(null),[l]=_u(O=>[O.isAdmin]),{open:u}=Ai("editNodeName"),{normalizedSchemasByType:h,getNodeKeysByType:d}=Hn(O=>O),f=Ue(O=>O.setSelectedNode),g=new _e(r,i,o);qt(()=>{c.current&&c.current.position.lerp(g,.05)});const p=(k=h[e.node_type])==null?void 0:k.icon,m=p?hc[p]:null,_=d(e.node_type)||"",T=e!=null&&e.properties?e==null?void 0:e.properties[_]:"",w=T?_a(T,30):"",y=_!=="description"?(E=e.properties)==null?void 0:E.description:"",v=y?_a(y,60):"";return P.jsx("mesh",{ref:c,children:P.jsx(xo,{center:!0,sprite:!0,zIndexRange:[0,0],children:P.jsx(rM,{align:"center",direction:"row",justify:"flex-start",children:P.jsx(P.Fragment,{children:t?P.jsxs(iM,{className:Fr({"has-padding":v}),rounded:!1,children:[l&&P.jsx(oM,{onClick:()=>u(),children:P.jsx(wp,{})}),P.jsx(aM,{onClick:()=>f(null),children:P.jsx(fy,{})}),P.jsx("div",{children:P.jsx(up,{align:"center",height:v?48:100,justify:"center",radius:"6px",src:((x=e==null?void 0:e.properties)==null?void 0:x.image_url)||"",width:v?72:200,children:(C=e==null?void 0:e.properties)!=null&&C.image_url?null:P.jsx("span",{children:m?P.jsx(m,{}):P.jsx(Vi,{})})})}),P.jsxs(Me,{align:"flex-start",children:[P.jsx(vl,{className:"selected__title",children:w}),v?P.jsx(vl,{children:v}):null]})]}):P.jsxs(P.Fragment,{children:[P.jsx(F_,{onClick:()=>n(a),rounded:s,children:P.jsx(up,{align:"center",height:32,justify:"center",radius:"50%",src:((S=e==null?void 0:e.properties)==null?void 0:S.image_url)||"",width:32,children:(R=e==null?void 0:e.properties)!=null&&R.image_url?null:P.jsx("span",{children:m?P.jsx(m,{}):P.jsx(Vi,{})})})}),P.jsx(vl,{children:w})]})})})})})},rM=ye(Me)`
  background: black;
`,vl=ye(Me)`
  color: ${oe.white};
  margin-left: 16px;
  width: 100px;
`,F_=ye(Me)`
  text-align: center;
  width: 48px;
  height: 48px;
  outline: 1px solid ${oe.white};
  outline-offset: 0px;
  background: ${oe.BG1};
  color: ${oe.white};
  border-radius: ${n=>`${n.rounded?"50%":"6px"}`};
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 12px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }
`,iM=ye(F_)`
  width: 200px;
  height: 100px;
  flex-direction: row;
  justify-content: center;
  align-items: flex-start;
  position: relative;
  font-family: Barlow;
  font-weight: 700;
  text-align: left;
  &.has-padding {
    padding: 12px;
  }

  .selected__title {
    position: absolute;
    bottom: -24px;
    font-size: 20px;
    left: 50%;
    top: 100%;
    transform: translateX(-50%) translateY(8px);
    margin-left: 0;
    width: auto;
  }
`,L_=ye(Me)`
  width: 30px;
  height: 30px;
  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
  color: #ffffff;
  font-size: 30px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
  position: absolute; /* Position relative to the parent */
`,oM=ye(L_)`
  left: 130px;
  top: -10px;
  background: ${oe.white};
  color: ${oe.BG1};
  border: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s ease-in-out;

  &:hover {
    transform: scale(1.1);
  }
`,aM=ye(L_)`
  right: -10px;
  top: -10px;
`,up=ye(Me)`
  background-image: ${({src:n})=>`url(${n})`};
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  width: ${({width:n})=>`${n}px`};
  height: ${({height:n})=>`${n}px`};
  border-radius: ${({radius:n})=>`${n}`};
  font-size: 20px;
`,la=50,cM=7,j_=b.memo(()=>{var g;const[n,e]=b.useState(),{addNewNode:t,nodesNormalized:s}=Jt(p=>p),r=As(),i=b.useRef(null),[o,a]=b.useState(null),c=b.useRef(new Map),l=sy(r==null?void 0:r.ref_id),{setSelectedNode:u}=Ue(kp(p=>p)),h=b.useMemo(()=>{if(!(n!=null&&n.nodes.length))return{nodes:[],links:[]};const p=(o==null?void 0:o.nodes)||[],m=(o==null?void 0:o.links.filter(x=>!n.links.some(C=>C.ref_id===x.ref_id)))||[],_=n.nodes.filter(x=>!p.some(C=>C.ref_id===x.ref_id)),T=p.at(-1),w=T?{x:T.x,y:T.y}:{x:0,y:0},y=Math.atan2(w.y,w.x),v=p.length+_.length-1,k=Math.PI*2/v;return{nodes:[...p,..._.map((x,C)=>{const S=y+k*(C+1),R=x.ref_id===(r==null?void 0:r.ref_id)?0:Math.cos(S)*la,O=x.ref_id===(r==null?void 0:r.ref_id)?0:Math.sin(S)*la,L=(x.ref_id===(r==null?void 0:r.ref_id),0);return{...x,x:R,y:O,z:L}})],links:[...n.links,...m]}},[n==null?void 0:n.nodes,n==null?void 0:n.links,o==null?void 0:o.nodes,o==null?void 0:o.links,r==null?void 0:r.ref_id]),d=b.useMemo(()=>{var m;if((m=h==null?void 0:h.nodes)!=null&&m.length)return h;if(o)return{nodes:o.nodes,links:o.links};const p=r!=null&&r.ref_id?s.get((r==null?void 0:r.ref_id)||""):null;return{nodes:p?[{...p,x:0,y:0,z:0}]:[],links:[]}},[h,o,r==null?void 0:r.ref_id,s]);b.useEffect(()=>{r&&(async()=>{if(r!=null&&r.ref_id&&r.ref_id!==l)try{const m=await yp(r.ref_id,0,5,{useSubGraph:!1});if(m){const _=m.nodes.filter((v,k)=>v.ref_id!==r.ref_id&&k<cM),w=[..._.map(v=>({...v,x:0,y:0,z:0})),{...r,x:0,y:0,z:0,fx:0,fy:0,fz:0}],y=m.edges.filter(v=>w.some(k=>k.ref_id===v.target)&&w.some(k=>k.ref_id===v.source));e({nodes:w,links:y}),c.current=new Map,t({nodes:_,edges:y})}}catch(m){console.error(m)}})()},[t,l,r,e]);const f=b.useCallback(p=>{if(r){const m=d.nodes.find(x=>x.ref_id===p);if(!m)return;const _=(o==null?void 0:o.nodes.filter(x=>x.ref_id!==m.ref_id))||[],T=[{...m,isPathNode:!1},..._.length?_:[{...r,isPathNode:!0}]].slice(0,3),w=Math.atan2(-m.y,-m.x),y=la*Math.cos(w),v=la*Math.sin(w),k=T.map((x,C)=>C===0?{...x,x:0,y:0,z:0,fx:0,fy:0,fz:0,isPathNode:!0}:C===1?T.length===3?{...x,x:y/2,y:v/2,z:0,fx:y/2,fy:v/2,fz:0,isPathNode:!0}:{...x,x:y,y:v,z:0,fx:y,fy:v,fz:0,isPathNode:!0}:{...x,x:y,y:v,z:0,fx:y,fy:v,fz:0,isPathNode:!0}),E=d.links.filter(x=>k.some(C=>C.ref_id===x.target)&&k.some(C=>C.ref_id===x.source));e(null),a({nodes:k,links:E}),u(m)}},[d.links,d.nodes,o,r,u]);return P.jsx(P.Fragment,{children:P.jsxs("group",{ref:i,name:"simulation-2d-group",children:[(g=d.nodes)==null?void 0:g.map(p=>P.jsx(sM,{id:p.ref_id,node:p,onClick:f,selected:p.ref_id===(r==null?void 0:r.ref_id),x:p.x,y:p.y,z:p.z},p.ref_id)),P.jsx($_,{links:d.links,nodes:d.nodes})]})})});j_.displayName="SelectionDataNodes";const lM=()=>{const n=b.useRef(null),e=Ue(s=>s.selectionGraphRadius),[t]=b.useState(.8);return b.useEffect(()=>{if(console.log(e,"radius"),n.current){const s=n.current.getDistanceToFitSphere(55);n.current.setLookAt(ps.x,ps.y,s,0,0,0,!0)}},[e]),P.jsx(jp,{ref:n,azimuthRotateSpeed:0,boundaryEnclosesCamera:!0,makeDefault:!0,maxDistance:12e3,minDistance:1,polarRotateSpeed:0,smoothTime:t})},uM=()=>P.jsxs(P.Fragment,{children:[P.jsx(bp,{}),P.jsx(lM,{}),P.jsx(j_,{})]});var fp;const hM=((fp=window.location)==null?void 0:fp.hostname)==="graphmindset.sphinx.chat",hp=()=>P.jsx(xo,{children:P.jsx(w1,{})}),dM=()=>{const{universeColor:n}=gE("universe",{universeColor:oe.black}),e=As();return b.useMemo(()=>e!=null&&e.node_type?ry(e.node_type):SE,[e]),P.jsxs(P.Fragment,{children:[P.jsx("color",{args:[oe.BLUE_PRESS_STATE||n],attach:"transparent"}),P.jsx(bp,{}),P.jsx($R,{}),P.jsxs(z1,{children:[!1,P.jsx(BP,{})]})]})};let bl=null;const dp={aspect:window.innerWidth/window.innerHeight,far:3e4,near:1,position:[$i.x,$i.y,$i.z]},fM=()=>{const[n,e,t]=[Ws(c=>c.setIsUserScrollingOnHtmlPanel),Ws(c=>c.setIsUserScrolling),Ws(c=>c.setUserMovedCamera)],s=Jt(c=>c.isFetching),r=bo(c=>c.universeQuestionIsOpen),i=As(),o=b.useCallback(c=>{var h;const{target:l}=c,{offsetParent:u}=l;bl&&clearTimeout(bl),(h=u==null?void 0:u.classList)!=null&&h.contains("html-panel")&&u.clientHeight<u.scrollHeight&&n(!0),e(!0),t(!0),bl=setTimeout(()=>{e(!1),n(!1)},200)},[e,n,t]),a=b.useCallback(c=>Z_(c,"threeState"),[]);return P.jsxs(pM,{children:[P.jsxs(b.Suspense,{fallback:null,children:[P.jsx(dm,{hidden:!0,isRoot:!0}),P.jsxs(zh,{camera:dp,frameloop:i?"demand":"always",id:"universe-canvas",onCreated:a,onWheel:o,children:[jh&&P.jsx(Vh,{position:"top-right",style:{top:"80px"}}),P.jsxs(b.Suspense,{fallback:P.jsx(hp,{}),children:[P.jsx(L1,{}),P.jsx(vd,{}),P.jsx(bd,{}),P.jsx(dM,{})]})]}),hM&&P.jsx(GP,{}),P.jsx(UR,{}),i?P.jsx(mM,{children:P.jsxs(zh,{camera:{...dp,position:[ps.x,ps.y,ps.z]},id:"selection-canvas",onCreated:({gl:c})=>{c.setClearColor("#000000"),c.setClearAlpha(.8)},children:[jh&&P.jsx(Vh,{position:"top-right",style:{top:"80px"}}),P.jsxs(b.Suspense,{fallback:P.jsx(hp,{}),children:[P.jsx(vd,{}),P.jsx(bd,{}),P.jsx(uM,{})]})]})}):null]}),r&&P.jsx(yE,{}),s&&P.jsx(JP,{fullSize:!1}),P.jsx(py,{})]})},pM=ye(Me)`
  flex: 1 1 100%;
  position: relative;
`,mM=ye(Me)`
  position: absolute;
  inset: 0;
`,rN=b.memo(fM);export{rN as Universe};
