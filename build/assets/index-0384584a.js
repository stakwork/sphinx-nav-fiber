import{ah as ge,r as i,ab as ee,_ as je,ai as ie,aj as Ht,ak as nt,al as kt,am as ae,V as j,an as pe,ao as st,ap as Ot,j as s,aq as ke,ar as Ft,as as V,at as Oe,au as ot,G as Ut,av as $t,aw as Zt,ax as Gt,ay as Nt,az as Vt,aA as Bt,aB as Wt,a3 as F,i as v,aC as qt,aD as ce,f as W,h as Q,F as it,aE as at,aF as Dt,l as Xt,aG as ct,aH as Yt,aI as Qt,aJ as Kt,k as lt,Z as Jt,aK as oe,aL as er,aM as tr,aN as rr,aO as Ce,x as nr,aP as sr,P as or,aQ as ir}from"./index-b648bda2.js";import{u as K,a as Ie,e as ar,m as ut,b as H,c as cr,d as lr,f as ur,C as dt,g as Pe,S as dr,H as Re,L as fr,D as pr,U as hr,h as gr}from"./Selection-9c06badb.js";import{T as Me,u as G,p as mr,g as xr,C as Cr,S as vr,a as ft,b as yr,E as wr,P as br,A as jr,c as Mr,L as Sr,d as Lr,V as Er,B as Ir,R as Fe,O as Pr,e as Rr}from"./EditIcon-000ea430.js";import{r as I,A as Ar,j as Tr}from"./react-toastify.esm-97ee9838.js";import{q as pt}from"./generateCategoricalChart-41b055e0.js";import{T as _r}from"./index-78236889.js";import{e as zr,c as Hr}from"./index.esm-cd549611.js";import{P as kr}from"./PlusIcon-9dabb621.js";import{u as Ue}from"./index-508aaedf.js";import{L as Or}from"./index-ac0d77ba.js";import{P as Fr,O as Ur}from"./index-c37c9c0e.js";import"./Popover-79f7e7a0.js";import"./useSlotProps-0887689d.js";import"./InfoIcon-bd087e20.js";import"./NoFilterResultIcon-8f4cd1e1.js";import"./index-f6ada33d.js";import"./index-35f21305.js";import"./index-70164c7c.js";import"./index-47846cf0.js";import"./index-dd9afccc.js";import"./Popper-c27d1fc3.js";import"./CheckIcon-a73ec811.js";function $r(e){let t=0;for(let n in e.attributes){const o=e.getAttribute(n);t+=o.count*o.itemSize*o.array.BYTES_PER_ELEMENT}const r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}const $e=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!="function";function B(e,t){const r=K(o=>o.gl),n=Ie(ge,$e(e)?Object.values(e):e);if(i.useLayoutEffect(()=>{t==null||t(n)},[t]),i.useEffect(()=>{(Array.isArray(n)?n:[n]).forEach(r.initTexture)},[r,n]),$e(e)){const o=Object.keys(e),l={};return o.forEach(a=>Object.assign(l,{[a]:n[o.indexOf(a)]})),l}else return n}B.preload=e=>Ie.preload(ge,e);B.clear=e=>Ie.clear(ge,e);ee.func.isRequired,ee.arrayOf(ee.oneOfType([ee.element,ee.func])).isRequired;const Ze=new ae,Ge=new ae,le=[],te=new st;class Zr extends Ht{constructor(){super(),this.color=new nt("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){const n=this.instance.current;if(!n||!n.geometry||!n.material)return;te.geometry=n.geometry;const o=n.matrixWorld,l=n.userData.instances.indexOf(this.instanceKey);if(!(l===-1||l>n.count)){n.getMatrixAt(l,Ze),Ge.multiplyMatrices(o,Ze),te.matrixWorld=Ge,n.material instanceof kt?te.material.side=n.material.side:te.material.side=n.material[0].side,te.raycast(t,le);for(let a=0,c=le.length;a<c;a++){const d=le[a];d.instanceId=l,d.object=this,r.push(d)}le.length=0}}}const ht=i.createContext(null),Ne=new ae,Ve=new ae,Gr=new ae,Be=new j,We=new pe,qe=new j,gt=i.forwardRef(({context:e,children:t,...r},n)=>{i.useMemo(()=>ar({PositionMesh:Zr}),[]);const o=i.useRef(),{subscribe:l,getParent:a}=i.useContext(e||ht);return i.useLayoutEffect(()=>l(o),[]),i.createElement("positionMesh",je({instance:a(),instanceKey:o,ref:ut([n,o])},r),t)}),Nr=i.forwardRef(({children:e,range:t,limit:r=1e3,frames:n=1/0,...o},l)=>{const[{context:a,instance:c}]=i.useState(()=>{const x=i.createContext(null);return{context:x,instance:i.forwardRef((C,M)=>i.createElement(gt,je({context:x},C,{ref:M})))}}),d=i.useRef(null),[f,g]=i.useState([]),[[h,u]]=i.useState(()=>{const x=new Float32Array(r*16);for(let C=0;C<r;C++)Gr.identity().toArray(x,C*16);return[x,new Float32Array([...new Array(r*3)].map(()=>1))]});i.useEffect(()=>{d.current.instanceMatrix.needsUpdate=!0});let p=0,m=0;H(()=>{if(n===1/0||p<n){d.current.updateMatrix(),d.current.updateMatrixWorld(),Ne.copy(d.current.matrixWorld).invert(),m=Math.min(r,t!==void 0?t:r,f.length),d.current.count=m,d.current.instanceMatrix.updateRange.count=m*16,d.current.instanceColor.updateRange.count=m*3;for(let x=0;x<f.length;x++){const C=f[x].current;C.matrixWorld.decompose(Be,We,qe),Ve.compose(Be,We,qe).premultiply(Ne),Ve.toArray(h,x*16),d.current.instanceMatrix.needsUpdate=!0,C.color.toArray(u,x*3),d.current.instanceColor.needsUpdate=!0}p++}});const w=i.useMemo(()=>({getParent:()=>d,subscribe:x=>(g(C=>[...C,x]),()=>g(C=>C.filter(M=>M.current!==x.current)))}),[]);return i.createElement("instancedMesh",je({userData:{instances:f},matrixAutoUpdate:!1,ref:ut([l,d]),args:[null,null,0],raycast:()=>null},o),i.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:ie}),i.createElement("instancedBufferAttribute",{attach:"instanceColor",count:u.length/3,array:u,itemSize:3,usage:ie}),typeof e=="function"?i.createElement(a.Provider,{value:w},e(c)):i.createElement(ht.Provider,{value:w},e))});function L(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,l;for(l=0;l<n.length;l++)o=n[l],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Vr=["color"],mt=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Vr);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Br=["color"],Wr=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Br);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),qr=["color"],Dr=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,qr);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Xr=["color"],Yr=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Xr);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Qr=["color"],Kr=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Qr);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Jr=["color"],en=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Jr);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),tn=["color"],rn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,tn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),nn=["color"],sn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,nn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),on=["color"],Se=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,on);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),an=["color"],cn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,an);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),ln=["color"],un=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,ln);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),dn=["color"],fn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,dn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),pn=["color"],hn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,pn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),gn=["color"],mn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,gn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),xn=["color"],Cn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,xn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),vn=["color"],yn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,vn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),wn=["color"],bn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,wn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),jn=["color"],Mn=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,jn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Sn=["color"],xt=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Sn);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:n}))}),Ln=["color"],Ct=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,Ln);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:n}))}),En=["color"],vt=i.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=L(e,En);return i.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),i.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))});function In(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pn(e){var t=In(e,"string");return typeof t=="symbol"?t:String(t)}function Rn(e,t,r){return t=Pn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?De(Object(r),!0).forEach(function(n){Rn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const O={value:0,fpsLimit:60,isOverLimit:0},re=e=>(e==null?void 0:e.reduce((t,r)=>t+r,0))/e.length;class An{constructor(t={}){this.names=[""],this.finished=[],this.gl=void 0,this.extension=void 0,this.query=void 0,this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,t),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=ot.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let t=0;const r=n=>{++t<20?this.rafId=window.requestAnimationFrame(r):(this.detected=Math.ceil(1e3*t/(n-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=n)};this.rafId=window.requestAnimationFrame(r)}addUI(t){this.names.indexOf(t)===-1&&(this.names.push(t),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(t){const r=16.666666666666668,n=r-t.timeRemaining(),o=r*O.fpsLimit/10/n;o<0||(O.value=o,O.isOverLimit<25?O.isOverLimit++:b.setState({overclockingFps:!0}))}nextFrame(t){this.frameId++;const r=t||this.now();let n=r-this.paramTime,o=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=r;else if(r>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const l=this.frameId-this.paramFrame,a=l*1e3/n,c=b.getState().overclockingFps?O.value:a;if(o=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/n,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const d=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=d.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(a),this.logsAccums.fps.push(c),this.logsAccums.gpu.push(o),this.overClock&&typeof window.requestIdleCallback<"u"&&(O.isOverLimit>0&&c>a?O.isOverLimit--:b.getState().overclockingFps&&b.setState({overclockingFps:!1})),r>=this.paramTime+180&&(this.paramLogger({cpu:re(this.logsAccums.cpu),gpu:re(this.logsAccums.gpu),mem:re(this.logsAccums.mem),fps:re(this.logsAccums.fps),duration:Math.round(n),maxMemory:this.maxMemory,frameCount:l}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=r),this.overClock&&r-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=t,O.fpsLimit=Math.round(re(this.logsAccums.fpsFixed)/10)*100,b.setState({fpsLimit:O.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=r)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=r,this.circularId=0;else{const l=r-this.chartTime;let a=this.chartHz*l/1e3;for(;--a>0&&this.detected;){const d=(this.frameId-this.chartFrame)/l*1e3,f=b.getState().overclockingFps?O.value:d;this.fpsChart[this.circularId%this.chartLen]=f;const g=1e3/this.currentMem,h=this.currentCpu,u=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/n*100))+4;u>0&&(this.gpuChart[this.circularId%this.chartLen]=u),h>0&&(this.cpuChart[this.circularId%this.chartLen]=h),g>0&&(this.memChart[this.circularId%this.chartLen]=g);for(let p=0;p<this.names.length;p++)this.chartLogger({i:p,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=r}}}startGpu(){const t=this.gl,r=this.extension;if(!(!t||!r)&&this.isWebGL2){let n=!1,o,l;if(this.query){this.queryHasResult=!1;let a=this.query;if(n=t.getQueryParameter(a,t.QUERY_RESULT_AVAILABLE),o=t.getParameter(r.GPU_DISJOINT_EXT),n&&!o){l=t.getQueryParameter(this.query,t.QUERY_RESULT);const c=l*1e-6;n&&c>0&&(o||this.activeAccums.forEach((d,f)=>{this.gpuAccums[f]=c}))}}(n||!this.query)&&(this.queryCreated=!0,this.query=t.createQuery(),t.beginQuery(r.TIME_ELAPSED_EXT,this.query))}}endGpu(){const t=this.extension,r=this.gl;this.isWebGL2&&this.queryCreated&&r.getQuery(t.TIME_ELAPSED_EXT,r.CURRENT_QUERY)&&r.endQuery(t.TIME_ELAPSED_EXT)}begin(t){this.startGpu(),this.updateAccums(t)}end(t){this.endGpu(),this.updateAccums(t)}updateAccums(t){let r=this.names.indexOf(t);r===-1&&(r=this.names.length,this.addUI(t));const n=this.now();this.activeAccums[r]=!this.activeAccums[r],this.t0=n}}const Tn=e=>{e.forEach((t,r)=>{const{meshes:n}=t;if(!n)return;let o={total:0,type:"Triangle",data:[]};Object.keys(n).forEach(l=>{const a=n[l],{geometry:c,material:d}=a;let f=c.index;const g=c.attributes.position;if(!g)return;let h=1;d.wireframe===!0&&(h=0);const u=f!==null?f.count:g.count,p=c.drawRange.start*h,m=c.drawRange.count*h,w=p,x=Math.min(u,p+m)-1;let C=1;const M=a.count||1;let S="Triangle",P=0;a.isMesh?d.wireframe===!0?(S="Line",C=C/2):(S="Triangle",C=C/3):a.isLine?(S="Line",a.isLineSegments?C=C/2:a.isLineLoop?C=C:C=C-1):a.isPoints?(S="Point",C=C):a.isSprite&&(S="Triangle",C=C/3);const E=Math.round(Math.max(0,x-w+1)*(C*M));E>P&&(P=E,o.type=S),o.total+=E,o.data.push({drawCount:E,type:S}),a.userData.drawCount={type:S,count:E}}),t.drawCounts=o})},_n=V.prototype.updateMatrixWorld,zn=V.prototype.updateWorldMatrix,Xe=V.prototype.updateMatrix;let Y={value:0},U={value:0};const Hn=e=>{let t=""+e;return t=t.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),t!==null},Ye=(e,t)=>{e.defines||(e.defines={}),e.defines&&!e.defines.muiPerf&&(e.defines=Object.assign(e.defines||{},{muiPerf:e.uuid}));const r=e.uuid;return t[r]||(t[r]={meshes:{},material:e},e.needsUpdate=!0),e.needsUpdate=!1,r},kn=e=>e==="muiPerf",b=Ot(e=>({log:null,paused:!1,triggerProgramsUpdate:0,customData:0,fpsLimit:60,overclockingFps:!1,chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos"})),yt=({trackCPU:e,overClock:t,chart:r,deepAnalyze:n,matrixUpdate:o})=>{const{gl:l,scene:a}=K();b.setState({gl:l,scene:a});const c=i.useMemo(()=>{const d=new An({trackGPU:!0,overClock:t,chartLen:r?r.length:120,chartHz:r?r.hz:60,gl:l.getContext(),chartLogger:h=>{b.setState({chart:h})},paramLogger:h=>{b.setState({log:{maxMemory:h.maxMemory,gpu:h.gpu,cpu:h.cpu,mem:h.mem,fps:h.fps,totalTime:h.duration,frameCount:h.frameCount}})}}),f=new Map,g=new Map;return Object.defineProperty(Oe.prototype,"onBeforeRender",{get(){return(...h)=>{var u;d&&d.begin("profiler"),(u=f.get(this))===null||u===void 0||u(...h)}},set(h){f.set(this,h)},configurable:!0}),Object.defineProperty(Oe.prototype,"onAfterRender",{get(){return(...h)=>{var u;d&&d.end("profiler"),(u=g.get(this))===null||u===void 0||u(...h)}},set(h){g.set(this,h)},configurable:!0}),d},[]);return i.useEffect(()=>{c&&(c.overClock=t||!1,t===!1&&(b.setState({overclockingFps:!1}),O.value=0,O.isOverLimit=0),c.chartHz=(r==null?void 0:r.hz)||60,c.chartLen=(r==null?void 0:r.length)||120)},[t,c,r==null?void 0:r.length,r==null?void 0:r.hz]),i.useEffect(()=>{o&&(V.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&Y.value++,_n.apply(this,arguments)},V.prototype.updateWorldMatrix=function(){Y.value++,zn.apply(this,arguments)},V.prototype.updateMatrix=function(){U.value++,Xe.apply(this,arguments)}),l.info.autoReset=!1;let d=null,f=null;if(l.info)return d=cr(function(){b.getState().paused&&b.setState({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),c.startCpuProfiling=!0),U.value-=1,Y.value=0,U.value=0,l.info&&l.info.reset()}),f=lr(function(){if(c&&!c.paused&&(c.nextFrame(window.performance.now()),t&&typeof window.requestIdleCallback<"u"&&(c.idleCbId=requestIdleCallback(c.nextFps))),n){var h,u;const p={},m=new Map;a.traverse(function(x){if((x instanceof st||x instanceof $t)&&x.material){let C=x.material.uuid;Array.isArray(x.material)&&x.material.length>1?C=Ye(x.material[1],p):C=Ye(x.material,p),p[C].meshes[x.uuid]=x}}),l==null||(h=l.info)===null||h===void 0||(u=h.programs)===null||u===void 0||u.forEach(w=>{const x=w.cacheKey.split(","),C=x[x.findIndex(kn)+1];if(Hn(C)&&p[C]){const{material:M,meshes:S}=p[C];m.set(C,{program:w,material:M,meshes:S,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),m.size!==b.getState().programs.size&&(Tn(m),b.setState({programs:m,triggerProgramsUpdate:b.getState().triggerProgramsUpdate++}))}}),()=>{c&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(c.idleCbId),window.cancelAnimationFrame(c.rafId),window.cancelAnimationFrame(c.checkQueryId)),o&&(V.prototype.updateMatrixWorld=Xe),d(),f()}},[c,l,e,r,o]),i.useEffect(()=>{const d=ur(function(){return c&&(c.paused=!0,U.value=0,Y.value=0,b.setState({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{d()}},[]),null},On=I("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),ve=I("small",{position:"absolute",right:0,fontSize:"10px"}),R=I("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),z=I("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),Fn=I("div",{display:"flex"}),Un=I("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),$n=I("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),Zn=I("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),Ae=I("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),Gn=I("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),Nn=I("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),Vn=I("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),Bn=I("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),Wn=I("div",{marginTop:"0"}),Qe=I("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),wt=I("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),bt=I("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),qn=I("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),Dn=I("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}}),k=i.memo(({isPerf:e,color:t,colorBlind:r,customData:n,isMemory:o,isShadersInfo:l,metric:a,fontSize:c,offsetY:d=0,offsetX:f,round:g,hasInstance:h})=>{const{width:u,height:p}=K(x=>x.viewport),m=i.useRef(null),w=i.useRef(null);return H(function(){const C=b.getState().gl,M=b.getState().log;if(!M||!m.current||(n&&(m.current.text=b.getState().customData),!a))return;let S=M[a];if(l){var P;S=(P=C.info.programs)===null||P===void 0?void 0:P.length}else a==="matriceCount"?S=U.value:!e&&C.info.render&&(S=(o?C.info.memory:C.info.render)[a]);if(a==="fps"&&(m.current.color=b.getState().overclockingFps?A(r).overClock.toString():`rgb(${A(r).fps.toString()})`),m.current.text=(Math.round(S*Math.pow(10,g))/Math.pow(10,g)).toFixed(g),h){const E=C.info.instance;if(typeof E>"u"&&a!=="matriceCount")return;let T;a==="matriceCount"?T=Y.value:T=E[a],T>0?(m.current.fontSize=c/1.15,w.current.fontSize=S>0?c/1.4:c,m.current.position.y=p/2-d-c/1.9,w.current.text=" ±	"+(Math.round(T*Math.pow(10,g))/Math.pow(10,g)).toFixed(g)):(m.current.position.y=p/2-d-c,m.current.fontSize=c)}U.value-=1,m.current.updateMatrix(),m.current.matrixWorld.copy(m.current.matrix)}),s.jsxs(i.Suspense,{fallback:null,children:[s.jsxs(Me,{textAlign:"justify",matrixAutoUpdate:!1,ref:m,fontSize:c,position:[-u/2+f+c,p/2-d-c,0],color:t,characters:"0123456789",onUpdate:x=>{x.updateMatrix(),U.value-=1,x.matrixWorld.copy(x.matrix)},children:[s.jsx("meshBasicMaterial",{blending:ke}),"0"]}),h&&s.jsx(Me,{textAlign:"justify",matrixAutoUpdate:!1,ref:w,fontSize:8,position:[-u/2+f+c,p/2-d-c*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:x=>{x.updateMatrix(),U.value-=1,x.matrixWorld.copy(x.matrix)},children:s.jsx("meshBasicMaterial",{blending:ke})})]})}),Xn=({colorBlind:e,customData:t,minimal:r,matrixUpdate:n})=>s.jsxs(s.Fragment,{children:[s.jsx(k,{colorBlind:e,color:`rgb(${A(e).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),s.jsx(k,{color:`rgb(${A(e).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),s.jsx(k,{color:`rgb(${A(e).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),r?null:s.jsxs(s.Fragment,{children:[s.jsx(k,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),s.jsx(k,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),s.jsx(k,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),s.jsx(k,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),s.jsx(k,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),s.jsx(k,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),s.jsx(k,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),n&&s.jsx(k,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),t&&s.jsx(k,{color:`rgb(${A(e).custom.toString()})`,customData:t,fontSize:14,offsetY:0,offsetX:r?200:320,round:0})]}),Yn=({colorBlind:e,minimal:t,chart:r={length:30,hz:15}})=>{const n=i.useMemo(()=>({fps:new Float32Array(r.length*3),cpu:new Float32Array(r.length*3),gpu:new Float32Array(r.length*3)}),[r]),o=i.useRef(null),l=i.useRef(null),a=i.useRef(null),c=i.useRef(null),d=i.useMemo(()=>new j(0,0,0),[]),f=(g,h=1,u,p)=>{let m=0;const{width:w,height:x}=p,C=b.getState().chart.data[g];if(!C||C.length===0)return;const M=t?2:6,S=t?12:50;let P=C.length;for(let E=0;E<P;E++){let T=(b.getState().chart.circularId+E+1)%P;C[T]!==void 0&&(C[T]>m&&(m=C[T]*h),d.set(M+E/(P-1)*(w-M*2)-w/2,Math.min(100,C[T])*h/100*(x-M*2-S)-x/2,0),d.toArray(u.attributes.position.array,E*3))}u.attributes.position.needsUpdate=!0};return H(function({viewport:h}){f("fps",1,o.current,h),l.current&&l.current.color.set(b.getState().overclockingFps?A(e).overClock.toString():`rgb(${A(e).fps.toString()})`),f("gpu",5,a.current,h),f("cpu",5,c.current,h)}),s.jsxs(s.Fragment,{children:[s.jsxs("line",{children:[s.jsx("bufferGeometry",{ref:o,children:s.jsx("bufferAttribute",{attach:"attributes-position",count:r.length,array:n.fps,itemSize:3,usage:ie,needsUpdate:!0})}),s.jsx("lineBasicMaterial",{ref:l,color:`rgb(${A(e).fps.toString()})`,transparent:!0,opacity:.5})]}),s.jsxs("line",{children:[s.jsx("bufferGeometry",{ref:a,children:s.jsx("bufferAttribute",{attach:"attributes-position",count:r.length,array:n.gpu,itemSize:3,usage:ie,needsUpdate:!0})}),s.jsx("lineBasicMaterial",{color:`rgb(${A(e).gpu.toString()})`,transparent:!0,opacity:.5})]}),s.jsxs("line",{children:[s.jsx("bufferGeometry",{ref:c,children:s.jsx("bufferAttribute",{attach:"attributes-position",count:r.length,array:n.cpu,itemSize:3,usage:ie,needsUpdate:!0})}),s.jsx("lineBasicMaterial",{color:`rgb(${A(e).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},Qn=({colorBlind:e,chart:t,customData:r,matrixUpdate:n,showGraph:o=!0,antialias:l=!0,minimal:a})=>{const c=i.useRef(void 0),d=b(f=>f.paused);return s.jsxs($n,{style:{display:"flex",position:"absolute",height:`${a?37:o?100:60}px`,minWidth:`${a?"100px":r?"370px":"310px"}`},children:[s.jsx(dt,{ref:c,orthographic:!0,dpr:l?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:f})=>{f.traverse(g=>{g.matrixWorldAutoUpdate=!1,g.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${a?37:o?100:60}px`},children:d?null:s.jsxs(s.Fragment,{children:[s.jsx(Kn,{}),s.jsx(Xn,{customData:r,minimal:a,matrixUpdate:n}),o&&s.jsx(Yn,{colorBlind:e,minimal:a,chart:t})]})}),d&&s.jsxs(Zn,{children:[s.jsx(Cn,{})," PAUSED"]})]})},Kn=()=>(H(function({gl:t,scene:r,camera:n}){n.updateMatrix(),U.value-=1,n.matrixWorld.copy(n.matrix),n.matrixWorldInverse.copy(n.matrixWorld).invert(),t.render(r,n),Y.value=0,U.value=0},1/0),null);function Jn(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,l;for(l=0;l<n.length;l++)o=n[l],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function es(e,t){if(e==null)return{};var r=Jn(e,t),n,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const ts=["portal","className","children"],rs=i.forwardRef((e,t)=>{let{portal:r,className:n,children:o}=e,l=es(e,ts);const a=K(g=>g.gl),c=i.useRef(null),d=i.useRef(null),f=(r==null?void 0:r.current)!=null?r.current:a.domElement.parentNode;return i.useLayoutEffect(()=>{if(!c.current||!f)return;const g=document.createElement("div"),h=d.current=Ft(g);return f.appendChild(g),()=>{h.unmount(),d.current=null,f.removeChild(g)}},[f]),i.useLayoutEffect(()=>{const g=d.current;g&&g.render(s.jsx("div",{ref:t,className:n,children:o}))}),s.jsx("group",Le(Le({},l),{},{ref:c}))}),Ke=(e,t)=>{const r=o=>{switch(o){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},n=o=>{switch(o){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:e,url:t.image.currentSrc,encoding:n(t.encoding),wrapT:r(t.image.wrapT),flipY:t.flipY.toString()}},ns=({program:e,material:t,setTexNumber:r})=>{const n=b(a=>a.gl),[o,l]=i.useState(null);return i.useEffect(()=>{if(n){const a=e==null?void 0:e.getUniforms();let c=0;const d=new Map;a.seq.forEach(f=>{if(!f.id.includes("uTroika")&&f.id!=="isOrthographic"&&f.id!=="uvTransform"&&f.id!=="lightProbe"&&f.id!=="projectionMatrix"&&f.id!=="viewMatrix"&&f.id!=="normalMatrix"&&f.id!=="modelMatrix"&&f.id!=="modelViewMatrix"){let g=[],h={name:f.id};f.cache&&(f.cache.forEach(u=>{typeof u<"u"&&g.push(u.toString().substring(0,4))}),h.value=g.join(),t[f.id]&&t[f.id].image&&t[f.id].image&&(c++,h.value=Ke(f.id,t[f.id])),h.value||(h.value="empty"),d.set(f.id,h))}}),t.uniforms&&Object.keys(t.uniforms).forEach(f=>{const g=t.uniforms[f];if(g.value){const{value:h}=g;let u={name:f};if(f.includes("uTroika"))return;if(h instanceof Zt)c++,u.value=Ke(f,h);else{let p=JSON.stringify(h);try{p=JSON.stringify(h)}catch{p=h.toString()}u.value=p}d.set(f,u)}}),c>0&&r(c),l(d)}},[]),s.jsx(wt,{children:o&&Array.from(o.values()).map(a=>s.jsx("span",{children:typeof a.value=="string"?s.jsx("li",{children:s.jsxs("span",{children:[a.name," :"," ",s.jsxs("b",{children:[a.value.substring(0,30),a.value.length>30?"...":""]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("li",{children:s.jsxs("b",{children:[a.value.name,":"]})}),s.jsxs("div",{children:[Object.keys(a.value).map(c=>c!=="name"?s.jsx("div",{children:c==="url"?s.jsx("a",{href:a.value[c],target:"_blank",children:s.jsx("img",{src:a.value[c]})}):s.jsxs("li",{children:[c,": ",s.jsx("b",{children:a.value[c]})]})},c):null),s.jsxs(bt,{onClick:()=>{var c;console.info(t[a.value.name]||(t==null||(c=t.uniforms[a.value.name])===null||c===void 0?void 0:c.value))},children:["console.info(",a.value.name,");"]})]})]})},a.name))})},ss=({el:e})=>{b(n=>n.log);const t=b(n=>n.gl),r=n=>{if(!t)return 0;const o=Math.round(n.drawCounts.total/(t.info.render.triangles+t.info.render.lines+t.info.render.points)*100*10)/10;return isFinite(o)&&o||0};return s.jsx(s.Fragment,{children:e.drawCounts.total>0&&s.jsxs(R,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[e.drawCounts.type==="Triangle"?s.jsx(vt,{style:{top:"-1px"}}):s.jsx(mt,{style:{top:"-1px"}}),e.drawCounts.total,s.jsxs("small",{children:[e.drawCounts.type,"s"]}),t&&s.jsxs(z,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[e.visible&&!e.material.wireframe?r(e):0,"%"]})]})})},os=({el:e})=>{const[t,r]=i.useState(e.visible),[n,o]=i.useState(e.expand),[l,a]=i.useState(0),{meshes:c,program:d,material:f}=e;return s.jsxs(Nn,{children:[s.jsxs(Un,{onClick:()=>{e.expand=!n,Object.keys(c).forEach(g=>{const h=c[g];h.material.wireframe=!1}),o(!n)},children:[s.jsx(Ae,{style:{marginRight:"6px"},children:n?s.jsx("span",{children:s.jsx(xt,{})}):s.jsx("span",{children:s.jsx(Ct,{})})}),d&&s.jsxs("span",{children:[s.jsx(Vn,{children:d.name}),s.jsxs(R,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s.jsx(un,{style:{top:"-1px"}}),Object.keys(c).length,s.jsx("small",{children:Object.keys(c).length>1?"users":"user"})]}),l>0&&s.jsxs(R,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[l>1?s.jsx(Se,{style:{top:"-1px"}}):s.jsx(Se,{style:{top:"-1px"}}),l,s.jsx("small",{children:"tex"})]}),s.jsx(ss,{el:e}),f.glslVersion==="300 es"&&s.jsxs(R,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s.jsx(yn,{style:{top:"-1px"}}),"300",s.jsx("small",{children:"es"}),s.jsx(z,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),s.jsx(Gn,{onPointerEnter:()=>{Object.keys(c).forEach(g=>{const h=c[g];h.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(c).forEach(g=>{const h=c[g];h.material.wireframe=!1})},onClick:g=>{g.stopPropagation(),Object.keys(c).forEach(h=>{const u=c[h],p=!t;u.visible=p,e.visible=p,r(p)})},children:t?s.jsx(sn,{}):s.jsx(rn,{})})]}),s.jsxs("div",{style:{maxHeight:n?"9999px":0,overflow:"hidden"},children:[s.jsxs(Qe,{children:[s.jsx(Dr,{})," Uniforms:"]}),s.jsx(ns,{program:d,material:f,setTexNumber:a}),s.jsxs(Qe,{children:[s.jsx(Yr,{})," Geometries:"]}),s.jsx(wt,{children:c&&Object.keys(c).map(g=>c[g]&&c[g].geometry&&s.jsxs(Dn,{children:[s.jsxs("span",{children:[c[g].geometry.type,": "]}),c[g].userData&&c[g].userData.drawCount&&s.jsxs("b",{children:[s.jsxs("div",{children:[c[g].userData.drawCount.count,s.jsxs("small",{children:[" ",c[g].userData.drawCount.type,"s"]})]}),s.jsx("br",{}),s.jsxs("div",{children:[Math.round($r(c[g].geometry)/1024*1e3)/1e3,"Kb",s.jsx("small",{children:" memory used"})]})]})]},g))}),s.jsxs(bt,{onClick:()=>{console.info(f)},children:["console.info(",f.type,")"]})]})]})},is=()=>{b(t=>t.triggerProgramsUpdate);const e=b(t=>t.programs);return s.jsx(Wn,{children:e&&Array.from(e.values()).map(t=>t&&t?s.jsx(os,{el:t},t.material.uuid):null)})},A=e=>({overClock:"#ff6eff",fps:e?"100, 143, 255":"238,38,110",cpu:e?"254, 254, 98":"66,226,46",gpu:e?"254,254,254":"253,151,31",custom:e?"86,180,233":"40,255,255"}),as=({showGraph:e,colorBlind:t})=>{const r=b(o=>o.overclockingFps),n=b(o=>o.fpsLimit);return s.jsxs(z,{style:e?{color:r?A(t).overClock.toString():`rgb(${A(t).fps})`}:{},children:["FPS ",r?`${n}🚀`:""]})},cs=({showGraph:e,colorBlind:t,customData:r,minimal:n})=>{const o=b(l=>l.gl);return o?s.jsxs(Fn,{children:[s.jsxs(R,{children:[s.jsx(fn,{}),s.jsx(z,{style:e?{color:`rgb(${A(t).gpu.toString()})`}:{},children:"GPU"}),s.jsx(ve,{children:"ms"})]}),s.jsxs(R,{children:[s.jsx(bn,{}),s.jsx(z,{style:e?{color:`rgb(${A(t).cpu.toString()})`}:{},children:"CPU"}),s.jsx(ve,{children:"ms"})]}),s.jsxs(R,{children:[s.jsx(cn,{}),s.jsx(as,{showGraph:e,colorBlind:t})]}),!n&&o&&s.jsxs(R,{children:[s.jsx(Mn,{}),s.jsx(z,{children:o.info.render.calls===1?"call":"calls"})]}),!n&&o&&s.jsxs(R,{children:[s.jsx(vt,{}),s.jsx(z,{children:"Triangles"})]}),r&&s.jsxs(R,{children:[s.jsx(Wr,{}),s.jsx(z,{style:e?{color:`rgb(${A(t).custom})`}:{},children:r.name}),r.info&&s.jsx(ve,{children:r.info})]})]}):null},ls=({showGraph:e,colorBlind:t,deepAnalyze:r,customData:n,matrixUpdate:o,openByDefault:l,minimal:a})=>s.jsxs(s.Fragment,{children:[s.jsx(cs,{showGraph:e,colorBlind:t,customData:n,minimal:a}),!a&&s.jsx(ds,{matrixUpdate:o,openByDefault:l,deepAnalyze:r,showGraph:e})]}),us=({matrixUpdate:e})=>s.jsxs("div",{children:[s.jsxs(R,{children:[s.jsx(hn,{}),s.jsx(z,{children:"Geometries"})]}),s.jsxs(R,{children:[s.jsx(Se,{}),s.jsx(z,{children:"Textures"})]}),s.jsxs(R,{children:[s.jsx(mt,{}),s.jsx(z,{children:"shaders"})]}),s.jsxs(R,{children:[s.jsx(mn,{}),s.jsx(z,{children:"Lines"})]}),s.jsxs(R,{children:[s.jsx(Kr,{}),s.jsx(z,{children:"Points"})]}),e&&s.jsxs(R,{children:[s.jsx(en,{}),s.jsx(z,{children:"Matrices"})]})]}),Je=({tab:e,title:t,set:r})=>{const n=b(o=>o.tab);return s.jsx(Ae,{className:`${n===e?" __perf_toggle_tab_active":""}`,onClick:()=>{r(!0),b.setState({tab:e})},children:s.jsx("span",{children:t})})},ds=({openByDefault:e,showGraph:t,deepAnalyze:r,matrixUpdate:n})=>{const[o,l]=Ut.useState(e);return s.jsxs("span",{children:[s.jsx(fs,{show:o,showGraph:t,matrixUpdate:n}),e&&!r?null:s.jsxs(qn,{className:"__perf_toggle",children:[r&&s.jsx(Je,{tab:"programs",title:"Programs",set:l}),r&&s.jsx(Je,{tab:"infos",title:"Infos",set:l}),s.jsx(Ae,{onClick:()=>{l(!o)},children:o?s.jsxs("span",{children:[s.jsx(xt,{})," Minimize"]}):s.jsxs("span",{children:[s.jsx(Ct,{})," More"]})})]})]})},fs=({show:e,showGraph:t,matrixUpdate:r})=>{const n=b(o=>o.tab);return s.jsxs(s.Fragment,{children:[s.jsx(us,{matrixUpdate:r}),e&&s.jsx("div",{children:s.jsx(Bn,{style:{marginTop:t?"38px":0},children:n==="programs"&&s.jsx(is,{})})})]})},ps=({showGraph:e,colorBlind:t,openByDefault:r,className:n,overClock:o,style:l,position:a,chart:c,deepAnalyze:d,antialias:f,customData:g,matrixUpdate:h,minimal:u})=>{const p=i.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsx(yt,{chart:c,overClock:o,deepAnalyze:d,matrixUpdate:h}),s.jsx(rs,{transform:!1,children:s.jsxs(On,{className:(n?" ".concat(n):" ")+` ${a||""} ${u?"minimal":""}`,style:Le({minHeight:u?"37px":e?"100px":"60px"},l),ref:p,children:[s.jsx(Qn,{perfContainerRef:p,colorBlind:t,chart:c,showGraph:e,antialias:f,customData:g,minimal:u,matrixUpdate:h}),s.jsx(ls,{colorBlind:t,showGraph:e,deepAnalyze:d,openByDefault:r,customData:g,matrixUpdate:h,minimal:u})]})})]})},hs=({headless:e=!1,colorBlind:t=!1,overClock:r=!1,showGraph:n=!0,trackCPU:o=!1,deepAnalyze:l=!1,antialias:a=!0,openByDefault:c=!0,customData:d,matrixUpdate:f=!1,position:g="top-right",chart:h={length:30,hz:15},className:u,style:p,minimal:m=!1})=>e?s.jsx(yt,{chart:h,deepAnalyze:l,matrixUpdate:f,overClock:r}):s.jsx(ps,{colorBlind:t,showGraph:n,trackCPU:o,openByDefault:c,className:u,style:p,overClock:r,position:g,antialias:a,chart:h,deepAnalyze:l,minimal:m,customData:d,matrixUpdate:f}),gs=(e,t,r,n,o)=>{const l=new Nt,a=1e-5;l.absarc(a,a,a,-Math.PI/2,-Math.PI,!0),l.absarc(a,t-n*2,a,Math.PI,Math.PI/2,!0),l.absarc(e-n*2,t-n*2,a,Math.PI/2,0,!0),l.absarc(e-n*2,a,a,0,-Math.PI/2,!0);const c=new Vt(l,{depth:r-n*2,bevelEnabled:!0,bevelSegments:o,steps:2,bevelSize:n,bevelThickness:n,curveSegments:o});c.center();const d=[],f=c.getAttribute("normal"),g=c.getAttribute("position");for(let h=0;h<g.count;h+=1){const u=new j(f.getX(h),f.getY(h),f.getZ(h)),p=new j(g.getX(h),g.getY(h),g.getZ(h));let m=0,w=0;Math.abs(u.y)>.9?(m=p.x/e+.5,w=1-(p.z/r+.5)):Math.abs(u.x)>.9?(m=-p.z/r+.5,w=1-(-p.y/t+.5)):Math.abs(u.z)>.9&&(m=p.x/e+.5,w=1-(-p.y/t+.5)),d.push(m,w)}return c.setAttribute("uv",new Bt(d,2)),c};gs(10,10,10,2,10);const Ee=new Gt(10,10,10),jt=e=>e.node_type==="topic"&&(e.scale||1)>5,ms=500,xs=800;let ne=null;const Cs=500,Te=(e,t)=>{if(ne)return null;ne=setTimeout(()=>{ne&&(clearTimeout(ne),ne=null)},Cs);const r=[];return e.forEach(o=>{const l=t.position.distanceTo(Wt.set(o.x,o.y,o.z));l<xs&&r.push({id:o.ref_id||"",distance:l})}),r.sort((o,l)=>o.distance-l.distance).slice(0,ms).map(o=>o.id)},Z=new j(5e3,600,1600),et=100,vs=600,ys=2e3,ye={x:172.7392402058252,y:-239.04675366094037,z:-2e3};let D,se;const ws=4e3,bs=2e3,js=e=>{const t=F(),r=v(y=>y.cameraFocusTrigger),n=G(y=>y.isUserDragging),o=G(y=>y.isUserScrolling),l=G(y=>y.setUserMovedCamera),a=v(y=>y.setNearbyNodeIds),c=v(y=>y.showSelectionGraph),d=v(y=>y.data),f=v(y=>y.graphStyle),{camera:g}=K(),[h,u]=i.useState(!1),[p,m]=i.useState(!1),[w,x]=i.useState(et),C=i.useMemo(()=>{if(c)return new j(0,0,0);const y=d==null?void 0:d.nodes.find(N=>N.ref_id===(t==null?void 0:t.ref_id));let _=new j(2e3,2e3,3e3);if(y&&d){const N=d==null?void 0:d.nodes.filter(q=>{var He;return(He=y.children)==null?void 0:He.find(zt=>zt===q.id)}),J=new j(y.x,y.y,y.z);let xe=new j(0,0,0);N.map(q=>(xe=xe.add(new j(q.x,q.y,q.z).normalize()),q));const Tt=y.scale?1-1/(y.scale+10):1,_t=J.sub(xe).multiplyScalar(.8*Tt);_=J.add(_t)}return _},[c,t,d]),M=i.useMemo(()=>{if(c)return new j(0,0,0);const y=d==null?void 0:d.nodes.find(_=>_.ref_id===(t==null?void 0:t.ref_id));return new j((y==null?void 0:y.x)||0,(y==null?void 0:y.y)||0,(y==null?void 0:y.z)||0)},[c,t,d]);i.useEffect(()=>{var y;c&&((y=e.current)==null||y.setLookAt(ye.x,ye.y,ye.z,0,0,0,!1)),S()},[c]),i.useEffect(()=>{c?x(ys):(t==null?void 0:t.node_type)==="topic"?x(vs):x(et)},[t,x,c]),i.useEffect(()=>{P()},[r]),i.useEffect(()=>{(n||o)&&(u(!0),m(!0))},[n,o,u,m]),i.useEffect(()=>{if(t)if(!c&&f==="earth"&&(e!=null&&e.current)){const y=e.current.camera.position.distanceTo(new j),_=qt(M,-y/2);e.current.setLookAt(_.x,_.y,_.z,0,0,0,!0)}else D&&clearTimeout(D),D=setTimeout(()=>{m(!0),clearTimeout(D)},bs),S();return()=>{D&&clearTimeout(D),se&&clearTimeout(se)}},[t]),H(y=>{e.current&&(h||E(C,y.camera),p||T(M,y.camera))});const S=()=>{if(t){const y=g.position.distanceTo(C);mr(y)}P()},P=()=>{u(!1),m(!1),l(!1),se&&clearTimeout(se),se=setTimeout(()=>{u(!0),m(!0)},ws)},E=(y,_)=>{if(_.position.distanceTo(y)<w)u(!0);else{_.position.lerp(y,.5);const J=Te((d==null?void 0:d.nodes)||[],g);J&&a(J)}},T=(y,_)=>{var N;(N=e==null?void 0:e.current)==null||N.setLookAt(_.position.x,_.position.y,_.position.z,y.x,y.y,y.z,!0)};return null},Ms=1;let $=null;const Ss=(e,{enabled:t})=>{const r=F();js(e);const n=G(g=>g.isUserDragging),o=v(g=>g.disableCameraRotation),l=v(g=>g.data),a=v(g=>g.graphStyle),c=v(g=>g.graphRadius),d=v(g=>g.setNearbyNodeIds);i.useEffect(()=>{t||($==null||$.kill(),$=null)},[t]);const f=i.useCallback(()=>{$==null||$.kill();const g={value:-244},h=xr.to(g,{duration:5,keyframes:{"0%":{value:10},"100%":{delay:2,ease:"Power4.easeIn",value:-200}},onComplete:()=>{$=null},onInterrupt(){h.kill()},onUpdate:()=>{var p;const{value:u}=g;if(e.current){const m=Te((l==null?void 0:l.nodes)||[],e.current.camera);m&&d(m),(p=e.current)==null||p.dolly(u,!1)}}});h.play(),$=h},[]);return i.useEffect(()=>{e.current&&c&&(a==="sphere"?(e.current.maxDistance=8e3,e.current.minDistance=200,e.current.setTarget(0,0,500,!0)):(e.current.maxDistance=e.current.getDistanceToFitSphere(c+200),e.current.minDistance=100))},[c,a,e]),i.useEffect(()=>{f()},[f,a]),i.useEffect(()=>{!r&&e.current&&e.current.setLookAt(Z.x,Z.y,Z.z,0,0,0,!0)},[r]),H((g,h)=>{e.current&&(!o&&!n&&(e.current.azimuthAngle+=Ms*h*ot.DEG2RAD),e.current.update(h))}),null},Ls=({disableAnimations:e})=>{const t=i.useRef(null),r=v(u=>u.graphStyle),n=v(u=>u.data),o=v(u=>u.setNearbyNodeIds),l=v(u=>u.setDisableCameraRotation),[a]=i.useState(.8),{camera:c}=K(),[d,f,g,h]=G(u=>[u.isUserDragging,u.setIsUserDragging,u.isUserScrolling,u.isUserScrollingOnHtmlPanel]);return Ss(t,{enabled:!e&&!g&&!d}),i.useEffect(()=>{t.current&&t.current.setLookAt(Z.x,Z.y,Z.z,0,0,0,!0)},[r]),i.useEffect(()=>{if(!d){const u=Te((n==null?void 0:n.nodes)||[],c);u&&o(u)}},[c,c.position,c.position.x,c.position.y,c.position.z,n==null?void 0:n.nodes,o,d]),i.useEffect(()=>{d&&l(!0)},[d,l]),s.jsx(Cr,{ref:t,boundaryEnclosesCamera:!0,enabled:!h,makeDefault:!0,maxDistance:12e3,minDistance:100,onEnd:()=>f(!1),onStart:()=>f(!0),smoothTime:a})},me={metalness:.9,roughness:0},Es={...me},Is=new ce(Es),Ps=({hide:e})=>{const t=pt(),r=v(o=>o.graphStyle),n=i.useMemo(()=>t.nodes.map((o,l)=>{if(o.node_type==="topic")return!1;const a=!jt(o),c=Pe(o.node_type||"",!0);return s.jsx(gt,{color:c,name:o.id,position:[o.x,o.y,o.z],scale:a?(o.scale||1)*.9:0,userData:o},`${o.ref_id||o.id}-instanced-node-${l}-${r}`)}),[r,t]);return s.jsx(Nr,{geometry:Ee,material:Is,visible:!e,children:n})},Mt=new ge,he=Mt.load("noimage.jpeg"),tt=new ce({...me,map:he}),St=.4,Rs=new ce({...me,map:he,transparent:!0,opacity:St}),ue={},As=(e,t)=>{const[r,n]=i.useState(he),[o,l]=i.useState(tt);return i.useEffect(()=>{const a=`${e}${t&&"-transparent"}`;if(ue[a]){n(ue[a].texture),l(ue[a].material);return}Mt.load(e,c=>{const d=new ce({map:c,transparent:t,opacity:t?St:1,...me});ue[a]={texture:c,material:d},n(c),l(d)},void 0,()=>{n(he),l(t?Rs:tt)})},[e,t]),i.useEffect(()=>function(){r.dispose(),o.dispose()},[r,o]),o},_e=i.memo(({node:e,hide:t,animated:r})=>{const n=i.useRef(null),[o]=i.useState(Ee),l=F(),a=v(g=>g.showSelectionGraph),c=!!l&&e.ref_id===l.ref_id,d=As(e.image_url||"noimage.jpeg",!1);H((g,h)=>{r&&n.current&&(n.current.position.set(e.x,e.y,e.z),c&&(n.current.rotation.y+=h*1,n.current.rotation.x-=h*.6))}),i.useEffect(()=>function(){o.dispose()},[o]);const f=i.useMemo(()=>a&&c?20:c?(e.scale||1)*1.2:e.scale,[e,c,a]);return s.jsx(dr,{enabled:!!c,children:s.jsx("mesh",{ref:n,geometry:Ee,material:d,name:e.id,position:[e.x,e.y,e.z],scale:f,userData:e,visible:!t})})});_e.displayName="Cube";const Ts=W(it)`
  text-align: center;
  width: ${e=>e.type==="topic"?"auto":`${e.size}px`};
  height: ${e=>e.type==="topic"?"auto":`${e.size}px`};
  outline: 1px solid ${e=>Q.white};
  outline-offset: 0px;
  background: rgba(0, 0, 0, 0.75);
  color: ${e=>e.fontColor};
  border-radius: ${e=>`${e.type==="guest"?"100%":"6px"}`};
  font-size: ${e=>`${e.fontSize}px`};
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  transform: scale(${e=>e.scale});
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 26px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }

  &.selected {
    .badge-wrapper {
      top: 0;
    }

    font-size: 36px;

    &:hover {
      outline-offset: 0px;
    }
  }

  &.topic {
    outline: none;
    background: none;
    &:hover {
      font-size: 36px;
    }
    white-space: nowrap;
    .badge-wrapper {
      display: none;
    }
  }

  .badge-wrapper {
    position: absolute;
    top: -7px;
    left: -14px;
  }
`;W.img`
  background-image: ${({src:e})=>`url(${e})`};
  background-size: contain;
  background-repeat: no-repeat;
  width: ${e=>e.size}px;
  height: ${e=>e.size}px;
  border-radius: ${e=>e.borderRadius};
`;W.div`
  display: flex;
  position: absolute;
  bottom: -14px;
  left: -5px;
  width: auto;
  justify-content: center;
  align-items: center;
`;W.div`
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${Q.transparentBlack};
  border: 2px solid ${e=>e.color};
  color: #fff;
  padding: 0 4px;
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;W.div`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px solid ${e=>e.color}44;
  background: ${Q.transparentBlack};
  padding: 0 4px;
  color: ${e=>e.color};
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;const _s=new j,zs=({position:e,userData:t,color:r})=>{const n=i.useRef(null),[o,l]=v(p=>[p.selectedNode,p.setSelectedNode]),a=v(p=>p.setHoveredNode),c=v(p=>p.hoveredNode),d=v(p=>p.showSelectionGraph),f=((t==null?void 0:t.node_type)||"")==="topic",g=((t==null?void 0:t.node_type)||"")==="guest"||((t==null?void 0:t.node_type)||"")==="person";H(()=>{if(d&&n.current){const p=_s.set((t==null?void 0:t.x)||0,(t==null?void 0:t.y)||0,(t==null?void 0:t.z)||0);n.current.position.copy(p)}}),i.useEffect(()=>function(){n.current&&n.current.clear()},[n]);const h=i.useMemo(()=>(c==null?void 0:c.ref_id)===(t==null?void 0:t.ref_id),[c==null?void 0:c.ref_id,t==null?void 0:t.ref_id]),u=(o==null?void 0:o.ref_id)===(t==null?void 0:t.ref_id);return f||u&&d||!u?s.jsx("group",{ref:n,position:e,children:s.jsx(Re,{center:!0,sprite:!0,zIndexRange:[0,0],children:s.jsxs(Ts,{className:Xt(t==null?void 0:t.node_type,{selected:u}),color:r,fontColor:Q.white,fontSize:f?64:20,onClick:p=>{p.stopPropagation(),t&&l(t)},onPointerOut:p=>{p.stopPropagation(),a(null)},onPointerOver:p=>{p.stopPropagation(),a(t||null)},scale:h?1.05:1,selected:!1,size:u?100:68,type:(t==null?void 0:t.node_type)||"",children:[!g&&!f?s.jsx("div",{className:"badge-wrapper",children:s.jsx(_r,{type:(t==null?void 0:t.node_type)||""})}):null,f?t==null?void 0:t.label:s.jsx(Ar,{rounded:g,size:u?60:52,src:(t==null?void 0:t.image_url)||"audio_default.svg",type:t==null?void 0:t.node_type})]})})}):null},Lt=i.memo(()=>{const e=v(a=>a.data),t=F(),r=v(a=>a.showSelectionGraph),n=v(a=>a.selectionGraphData),o=v(a=>a.selectedNodeRelativeIds),l=i.useMemo(()=>(r?n.nodes:(e==null?void 0:e.nodes)||[]).filter(f=>o.includes((f==null?void 0:f.ref_id)||"")||(t==null?void 0:t.ref_id)===(f==null?void 0:f.ref_id)).slice(0,at).map(f=>{const g=Pe(f.node_type||"",!0),h=new j((f==null?void 0:f.x)||0,(f==null?void 0:f.y)||0,(f==null?void 0:f.z)||0),u=((e==null?void 0:e.nodes)||[]).filter(p=>p.ref_id&&Dt(p,f)).map(p=>(p==null?void 0:p.ref_id)||"")||[];return s.jsx(zs,{color:g,position:h,relativeIds:u,userData:f},`node-badge-${f.ref_id}`)}),[o,e==null?void 0:e.nodes,r,n,t]);return s.jsx(i.Fragment,{children:l.length?l:null},"node-badges")});Lt.displayName="RelevanceBadges";const Et=({link:e,animated:t})=>{const r=i.useRef(null),n=F(),[o,l]=i.useState(new j(0,0,0)),[a,c]=i.useState(new j(0,0,0)),[d,f]=i.useState(8947848),g=v(h=>h.selectionGraphData);return i.useEffect(()=>{var p,m,w,x,C,M;const h=(n==null?void 0:n.ref_id)||"",u=n&&(h===e.targetRef||h===e.sourceRef);!e.onlyVisibleOnSelect||u?(l(new j(((p=e.sourcePosition)==null?void 0:p.x)||0,((m=e.sourcePosition)==null?void 0:m.y)||0,((w=e.sourcePosition)==null?void 0:w.z)||0)),c(new j(((x=e.targetPosition)==null?void 0:x.x)||0,((C=e.targetPosition)==null?void 0:C.y)||0,((M=e.targetPosition)==null?void 0:M.z)||0))):(l(new j(0,0,0)),c(new j(0,0,0))),f(u?e.color||ct.children.segmentColor:n?5592405:8947848)},[n,e]),H(()=>{if(t&&r.current){const h=g.nodes.find(p=>p.ref_id===e.sourceRef),u=g.nodes.find(p=>p.ref_id===e.targetRef);r.current.start.set((h==null?void 0:h.x)||0,(h==null?void 0:h.y)||0,(h==null?void 0:h.z)||0),r.current.end.set((u==null?void 0:u.x)||0,(u==null?void 0:u.y)||0,(u==null?void 0:u.z)||0)}}),s.jsx(vr,{ref:r,color:"0xFFFFFF",end:a,start:o})},Hs={font:"/fonts/Inter-Bold.woff",characters:"abcdefghijklmnopqrstuvwxyz0123456789!",fontSize:2,letterSpacing:-.05,lineHeight:1,"material-toneMapped":!1},ze=i.memo(({node:e,hide:t})=>{const r=i.useRef(null),n=F(),l=v(g=>g.selectedNodeRelativeIds).includes((e==null?void 0:e.ref_id)||""),a=!!n&&(n==null?void 0:n.id)===e.id,c=v(g=>g.showSelectionGraph);H(({camera:g})=>{r!=null&&r.current&&(r.current.quaternion.copy(g.quaternion),c&&r.current.position.set(e.x,e.y,e.z))});const d=i.useMemo(()=>{let g=(e.scale||1)*4;return c&&a?g=40:!a&&l&&(g=0),g},[e.scale,a,l,c]),f=i.useMemo(()=>n&&n.node_type==="topic"&&!a?.2:1,[a,n]);return s.jsx(Me,{ref:r,anchorX:"center",anchorY:"middle",color:Q.white,fillOpacity:f,position:[e.x,e.y,e.z],scale:d,userData:e,visible:!t&&!a,...Hs,children:e.label})});ze.displayName="TextNode";let we=null;const It=i.memo(()=>{const e=pt(),t=F(),r=v(l=>l.selectedNodeRelativeIds),n=v(l=>l.selectionGraphData),o=v(l=>l.setSelectionData);return i.useEffect(()=>{const l=e.nodes.filter(c=>c.ref_id===(t==null?void 0:t.ref_id)||r.includes((c==null?void 0:c.ref_id)||"")).map(c=>{const d=c.ref_id===(t==null?void 0:t.ref_id)&&c.node_type!=="topic"?{fx:0,fy:0,fz:0}:{};return{...c,x:0,y:0,z:0,...d}}),a=Yt(l,!1,!1);o({nodes:l,links:a})},[e,t,r,o]),i.useEffect(()=>{we=Qt(n.nodes,n.links,{numDimensions:2,forceLinkStrength:.01,forceCenterStrength:.85,forceChargeStrength:-20,velocityDecay:.9})},[n]),H(()=>{we&&we.tick()}),s.jsxs(s.Fragment,{children:[n==null?void 0:n.nodes.map(l=>l.node_type==="topic"?s.jsx(ze,{hide:!0,node:l},`${l.ref_id||l.id}-compact`):s.jsx(_e,{animated:!0,hide:!0,node:l},`${l.ref_id||l.id}-compact`)),s.jsx(ft,{fog:!0,lineWidth:.9,children:(n==null?void 0:n.links).map((l,a)=>s.jsx(Et,{animated:!0,link:l},a.toString()))},`selection-links-${n==null?void 0:n.links.length}`)]})});It.displayName="SelectionDataNodes";const Pt=i.memo(()=>{const e=Kt(),t=F(),r=v(u=>u.nearbyNodeIds),n=v(u=>u.setHoveredNode),o=v(u=>u.showSelectionGraph),l=v(u=>u.selectionGraphData),a=lt(u=>u.setTranscriptOpen),c=i.useCallback(u=>!!(o&&!l.nodes.find(p=>p.ref_id===u.ref_id)),[o,l]),d=i.useCallback(u=>{const p=u==null?void 0:u[0];p&&(a(!1),p.userData&&(c(p.userData)||v.getState().setSelectedNode((p==null?void 0:p.userData)||null)))},[a,c]),f=i.useCallback(u=>{u.stopPropagation(),n(null)},[n]),g=i.useCallback(u=>{var w;const m=u.intersections.map(x=>x.object)[0];if((w=m==null?void 0:m.userData)!=null&&w.ref_id){const x=m.userData;c(x)||(u.stopPropagation(),n(x))}},[n,c]),h=o&&!!t;return s.jsxs(yr,{filter:u=>u.filter(p=>{var m;return!!((m=p.userData)!=null&&m.id)}),onChange:d,onPointerOut:f,onPointerOver:g,children:[s.jsx(Ps,{hide:h}),s.jsx(Lt,{}),e==null?void 0:e.nodes.filter(u=>{const p=(u==null?void 0:u.ref_id)===(t==null?void 0:t.ref_id);return r.includes(u.ref_id||"")||jt(u)||p}).map(u=>u.node_type==="topic"?s.jsx(ze,{hide:h,node:u},u.ref_id||u.id):s.jsx(_e,{hide:h,node:u},u.ref_id||u.id)),h&&s.jsx(It,{})]})});Pt.displayName="Cubes";const ks={earthRef:null},Os=Jt(e=>({...ks,setEarthRef:t=>e({earthRef:t})})),Fs=(e,t)=>{const r=new pe().setFromUnitVectors(new j(0,1,0),e.clone().normalize()),n=new pe().setFromUnitVectors(new j(0,1,0),t.clone().normalize()),o=new pe,l=50,a=[];for(let d=0;d<=l;d+=1){const f=d/l;o.slerpQuaternions(r,n,f);const g=new j(0,1,0).applyQuaternion(o).multiplyScalar(oe+er);a.push(g)}return new tr(a).getPoints(l)},Us=({link:e})=>{const t=F(),[r,n]=i.useState(8947848);i.useEffect(()=>{const l=(t==null?void 0:t.ref_id)||"",a=t&&(l===e.targetRef||l===e.sourceRef);n(a?e.color||ct.children.segmentColor:t?5592405:8947848)},[t,e]);const o=i.useMemo(()=>{var f,g,h,u,p,m;const l=(t==null?void 0:t.ref_id)||"",a=t&&(l===e.targetRef||l===e.sourceRef);if(!(!e.onlyVisibleOnSelect||a))return[];const c=new j(((f=e.sourcePosition)==null?void 0:f.x)||0,((g=e.sourcePosition)==null?void 0:g.y)||0,((h=e.sourcePosition)==null?void 0:h.z)||0),d=new j(((u=e.targetPosition)==null?void 0:u.x)||0,((p=e.targetPosition)==null?void 0:p.y)||0,((m=e.targetPosition)==null?void 0:m.z)||0);return Fs(c,d)},[e,t]);return o.length?s.jsx(fr,{color:r,dashed:!1,lineWidth:3,points:o}):null},$s=new j(0,0,0),Zs=()=>{const e=i.useRef(null),t=i.useRef(null),r=v(d=>d.graphStyle),n=v(d=>d.showSelectionGraph),o=v(d=>d.data),l=Os(d=>d.setEarthRef),a=B("textures/earth/galaxy.png"),c=B("textures/earth/clouds.png");return H(({camera:d})=>{t.current&&t.current.position.copy(d.getWorldPosition($s))}),i.useLayoutEffect(()=>{e.current&&l(e)},[l]),r!=="earth"||n?null:s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{ref:e,userData:{type:"earth"},children:[s.jsx("sphereGeometry",{args:[oe,200,200]}),s.jsx(Gs,{})]}),s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[oe+2,200,200]}),s.jsx("meshStandardMaterial",{alphaMap:c,map:c,transparent:!0})]}),s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[oe*4,200,200]}),s.jsx("meshStandardMaterial",{map:a,opacity:.4,side:rr,transparent:!0})]}),s.jsx("directionalLight",{ref:t,intensity:.9,position:[0,0,oe*3]}),o==null?void 0:o.links.map((d,f)=>s.jsx(Us,{link:d},`curved-${f}`))]})},Gs=()=>{const e=B("textures/earth/earth.jpeg"),t=B("textures/earth/bump.jpeg"),r=B("textures/earth/water.png"),n=i.useMemo(()=>new ce({map:e,bumpMap:t,aoMap:t,roughnessMap:t,metalnessMap:r,toneMapped:!0,roughness:35,metalness:0}),[e,t,r]);return s.jsx("meshStandardMaterial",{...n})},X=2e3,de=hr*4,rt=Object.values(pr).map(e=>e),Ns=()=>{const e=i.useRef(null);H(()=>{var a,c,d,f,g;const o=(c=(a=e.current)==null?void 0:a.geometry.getAttribute("position"))==null?void 0:c.array,l=(f=(d=e.current)==null?void 0:d.geometry.getAttribute("velocity"))==null?void 0:f.array;if(o&&l){for(let h=0;h<o.length;h+=3){const u=o[h],p=o[h+1],m=o[h+2],w=l[h],x=l[h+1],C=l[h+2];o[h]+=w,o[h+1]+=x,o[h+2]+=C;const M=Math.sqrt(u*u+p*p+m*m);if(M*M>de*de){const P=Math.random()*Math.PI*2,E=Math.random()*Math.PI*2,T=Math.random()*de;o[h]=Math.sin(P)*Math.cos(E)*T,o[h+1]=Math.sin(P)*Math.sin(E)*T,o[h+2]=Math.cos(P)*T}}((g=e.current)==null?void 0:g.geometry.getAttribute("position")).needsUpdate=!0}});const t=i.useMemo(()=>new Float32Array(X*3),[]),r=i.useMemo(()=>new Float32Array(X*3),[]);i.useEffect(()=>{const o=de;for(let l=0;l<X;l+=1){const a=l*3,c=Math.acos(1-l/X*2),d=Math.PI*2*l/X;t[a]=Math.sin(c)*Math.cos(d)*o,t[a+1]=Math.sin(c)*Math.sin(d)*o,t[a+2]=Math.cos(c)*o,r[a]=Math.random()-.5,r[a+1]=Math.random()-.5,r[a+2]=Math.random()-.5}},[t,r]);const n=i.useRef(null);return i.useEffect(()=>{n.current&&e.current&&(n.current.setAttribute("position",new Ce(t,3)),n.current.setAttribute("velocity",new Ce(r,3)),e.current.geometry=n.current)},[t,r]),i.useEffect(()=>{if(n.current){const o=[];for(let l=0;l<X;l+=1){const a=Math.floor(Math.random()*rt.length),c=rt[a],d=new nt(c);d.multiplyScalar(2),o.push(d.r,d.g,d.b)}n.current.setAttribute("color",new Ce(new Float32Array(o),3))}},[]),s.jsxs("points",{ref:e,frustumCulled:!1,children:[s.jsx("bufferGeometry",{ref:n}),s.jsx("pointsMaterial",{opacity:.8,size:4,transparent:!0,vertexColors:!0})]})},fe=e=>({close:{backgroundColor:"rgba(48, 51, 66, 1)",borderColor:"#fff",fontColor:"rgba(255, 255, 255, 1)"},focus:{backgroundColor:e?"rgba(255, 255, 255, 0.90);":"rgba(255, 255, 255, 0.90)",borderColor:e?"#FFDB58bb":"#fff",fontColor:"rgba(48, 51, 66, 1)"},menu:{backgroundColor:"#00000066",borderColor:e?"#ffffff66":"#5078f2",fontColor:e?"#ffffff66":"#fff"}}),Vs=new j,Rt=i.memo(()=>{const e=i.useRef(null),t=lt(p=>p.setSidebarOpen),{open:r}=Ue("editNodeName"),{open:n}=Ue("addEdgeToNode"),[o]=nr(p=>[p.isAdmin]),l=v(p=>p.showSelectionGraph),a=v(p=>p.selectionGraphData),c=v(p=>p.data),d=F(),f=v(p=>p.setSelectedNode),g=v(p=>p.setShowSelectionGraph);H(()=>{h()});const h=i.useCallback(()=>{const p=l?a:c;if(e.current){const m=p==null?void 0:p.nodes.find(w=>w.ref_id===(d==null?void 0:d.ref_id));if(m){const w=Vs.set(m==null?void 0:m.x,m==null?void 0:m.y,m==null?void 0:m.z);e.current.position.copy(w)}}},[d,l,a,c]),u=i.useMemo(()=>{const p=o?[{key:"control-key-1",colors:fe(l).focus,icon:s.jsx(kr,{}),left:-80,className:"add",onClick:()=>{n()}},{key:"control-key-2",colors:fe(l).focus,icon:s.jsx(wr,{}),left:-40,className:"edit",onClick:()=>{r()}}]:[],m=[{key:"control-key-4",colors:fe(l).focus,icon:s.jsx(zr,{}),left:0,className:"expand",onClick:()=>{const w=!l;g(w),w&&t(!0)}},{key:"control-key-5",colors:fe(!0).close,icon:s.jsx(Hr,{}),left:40,className:"exit",onClick:()=>{f(null),g(!1)}}];return[...p,...m].map((w,x)=>({...w,left:-80+x*40}))},[l,n,r,g,t,f,o]);return d?s.jsx("group",{ref:e,children:s.jsx(Re,{center:!0,className:"control-panel",onClick:p=>p.stopPropagation(),onKeyDown:p=>p.stopPropagation(),onPointerDown:p=>p.stopPropagation(),onPointerOut:p=>p.stopPropagation(),onPointerOver:p=>p.stopPropagation(),onPointerUp:p=>p.stopPropagation(),sprite:!0,zIndexRange:[16777271,16777272],children:u.map(p=>s.jsx(Bs,{backgroundColor:p.colors.backgroundColor,borderColor:p.colors.borderColor,className:p.className,fontColor:p.colors.fontColor,left:p.left,onClick:m=>{m.stopPropagation(),p.onClick()},children:p.icon},p.key))})}):null});Rt.displayName="NodeControls";const Bs=W.div`
  position: fixed;
  top: -60px;
  left: ${e=>-7+e.left}px;
  width: 24px;
  height: 24px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${e=>e.backgroundColor?e.backgroundColor:"#000000bb"};
  color: ${e=>e.fontColor?e.fontColor:"#ffffff"};
  border-radius: 100%;
  font-size: 16px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,At=i.memo(()=>s.jsx(s.Fragment,{children:s.jsx(Rt,{})}));At.displayName="NodeDetailsPanel";const Ws=()=>{const e=v(f=>f.data),t=v(f=>f.isFetching),r=v(f=>f.graphStyle),n=v(f=>f.showSelectionGraph),o=v(f=>f.selectedNodeRelativeIds),l=v(f=>f.selectionGraphData),a=v(f=>f.selectedNode),c=i.useMemo(()=>n?0:r==="force"?.2:.4,[n,r]),d=i.useMemo(()=>(n?l.nodes:(e==null?void 0:e.nodes)||[]).filter(u=>o.includes((u==null?void 0:u.ref_id)||"")||(a==null?void 0:a.ref_id)===(u==null?void 0:u.ref_id)).slice(0,at).map(u=>{const p=new j(a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.z),m=new j(u.x,u.y,u.z),w={source:a!=null&&a.id?a.id:"",target:u.id?u.id:"",targetRef:u.ref_id,sourceRef:a==null?void 0:a.ref_id,sourcePosition:p,targetPosition:m};return s.jsx(Et,{link:w},u.id)}),[o,e==null?void 0:e.nodes,n,l,a]);return t?null:s.jsxs(s.Fragment,{children:[s.jsx(Pt,{}),s.jsx(Zs,{}),s.jsx(Ns,{}),r!=="earth"&&s.jsx(ft,{fog:!0,limit:d.length,lineWidth:c,children:d},`links-${d.length}-${r}`),s.jsx(At,{})]})},qs=()=>s.jsx(Re,{children:s.jsx(Sr,{})}),Ds=()=>{const{universeColor:e}=Tr("universe",{universeColor:Q.black}),t=F(),r=i.useMemo(()=>t!=null&&t.node_type?Pe(t.node_type):ir,[t]);return s.jsxs(s.Fragment,{children:[s.jsx("color",{args:[e],attach:"background"}),s.jsx(Or,{}),s.jsx(Ls,{}),s.jsxs(gr,{children:[s.jsxs(Lr,{autoClear:!1,multisampling:8,children:[s.jsx(Er,{darkness:.7,eskil:!1,offset:.05}),s.jsx(Ir,{luminanceThreshold:1,mipmapBlur:!0,resolutionX:Fe.AUTO_SIZE,resolutionY:Fe.AUTO_SIZE}),s.jsx(Pr,{blendFunction:Rr.SCREEN,blur:!0,edgeStrength:4,hiddenEdgeColor:r,visibleEdgeColor:r})]}),s.jsx(Ws,{})]})]})};let be=null;const Xs={aspect:window.innerWidth/window.innerHeight,far:3e4,near:1,position:[Z.x,Z.y,Z.z]},Ys=()=>{const[e,t,r]=[G(a=>a.setIsUserScrollingOnHtmlPanel),G(a=>a.setIsUserScrolling),G(a=>a.setUserMovedCamera)],n=v(a=>a.isFetching),o=i.useCallback(a=>{var f;const{target:c}=a,{offsetParent:d}=c;be&&clearTimeout(be),(f=d==null?void 0:d.classList)!=null&&f.contains("html-panel")&&d.clientHeight<d.scrollHeight&&e(!0),t(!0),r(!0),be=setTimeout(()=>{t(!1),e(!1)},200)},[t,e,r]),l=i.useCallback(a=>sr(a,"threeState"),[]);return s.jsxs(Qs,{children:[s.jsx(i.Suspense,{fallback:null,children:s.jsxs(dt,{camera:Xs,id:"universe-canvas",onCreated:l,onWheel:o,children:[or&&s.jsx(hs,{position:"top-right"}),s.jsxs(i.Suspense,{fallback:s.jsx(qs,{}),children:[s.jsx(br,{}),s.jsx(jr,{}),s.jsx(Mr,{}),s.jsx(Ds,{})]})]})}),n&&s.jsx(Fr,{fullSize:!1}),s.jsx(Ur,{})]})},Qs=W(it)`
  flex: 1 1 100%;
  position: relative;
`,wo=i.memo(Ys);export{wo as Universe};
