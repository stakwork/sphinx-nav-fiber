import{g as ee,a as te,s as P,_ as v,a8 as Ce,r as g,b as se,j as t,d as ne,c as E,e as oe,u as ue,aU as Be,b0 as K,b1 as re,a6 as le,b2 as Te,b3 as ze,f as w,F as x,T as R,i as Re,k as he,L as Ne,C as ae,h as S,b4 as Fe,b5 as X,W as Q,b6 as Ee,H as Pe,b7 as Ae,x as Me,J as Ie}from"./index-16ea0b62.js";import{B as xe}from"./index-d17b741d.js";import{u as V}from"./index-f79d8d98.js";import{o as De,h as Oe,c as ge,F as fe,C as H,p as Ge,i as Le,I as me,B as J}from"./react-toastify.esm-61460506.js";import{B as be,T as We,a as Ve}from"./index-25118e04.js";import{T as q}from"./index-6caa7048.js";import{e as _e,A as ye}from"./index-89aef612.js";import{p as Ue,c as qe}from"./index-30d16895.js";import{a as de,N as Ke,S as He,b as D,c as Je,E as Ye}from"./index-017414a6.js";import{D as Ze}from"./DeleteIcon-1f465941.js";import{P as we}from"./PlusIcon-f3e4a162.js";import{u as Xe,a as Qe}from"./Popover-f85482fa.js";import{u as et}from"./Select-0df73c3f.js";import{E as tt}from"./EditIcon-58022246.js";import{M as st,a as nt}from"./NoFilterResultIcon-36d3122e.js";import"./useSlotProps-d1aef4fa.js";import"./index.esm-cd6c9c6f.js";import"./InfoIcon-c4e47262.js";import"./Popper-8668fe80.js";import"./generateCategoricalChart-1eb3a817.js";import"./index-531d124e.js";import"./CheckIcon-4e725e44.js";import"./dividerClasses-65fab76b.js";function ot(e){return ee("PrivateSwitchBase",e)}te("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rt=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],at=e=>{const{classes:s,checked:n,disabled:o,edge:r}=e,i={root:["root",n&&"checked",o&&"disabled",r&&`edge${E(r)}`],input:["input"]};return oe(i,ot,s)},it=P(De)(({ownerState:e})=>v({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),ct=P("input",{shouldForwardProp:Ce})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),lt=g.forwardRef(function(s,n){const{autoFocus:o,checked:r,checkedIcon:i,className:l,defaultChecked:p,disabled:d,disableFocusRipple:c=!1,edge:a=!1,icon:u,id:h,inputProps:m,inputRef:C,name:F,onBlur:b,onChange:T,onFocus:A,readOnly:M,required:G=!1,tabIndex:f,type:y,value:$}=s,k=se(s,rt),[U,I]=et({controlled:r,default:!!p,name:"SwitchBase",state:"checked"}),z=Xe(),ve=B=>{A&&A(B),z&&z.onFocus&&z.onFocus(B)},Se=B=>{b&&b(B),z&&z.onBlur&&z.onBlur(B)},ke=B=>{if(B.nativeEvent.defaultPrevented)return;const ce=B.target.checked;I(ce),T&&T(B,ce)};let L=d;z&&typeof L>"u"&&(L=z.disabled);const $e=y==="checkbox"||y==="radio",Y=v({},s,{checked:U,disabled:L,disableFocusRipple:c,edge:a}),ie=at(Y);return t.jsxs(it,v({component:"span",className:ne(ie.root,l),centerRipple:!0,focusRipple:!c,disabled:L,tabIndex:null,role:void 0,onFocus:ve,onBlur:Se,ownerState:Y,ref:n},k,{children:[t.jsx(ct,v({autoFocus:o,checked:r,defaultChecked:p,className:ie.input,disabled:L,id:$e?h:void 0,name:F,onChange:ke,readOnly:M,ref:C,required:G,ownerState:Y,tabIndex:f,type:y},y==="checkbox"&&$===void 0?{}:{value:$},m)),U?i:u]}))}),dt=lt,pt=g.createContext(),pe=pt;function ut(e){return ee("MuiGrid",e)}const ht=[0,1,2,3,4,5,6,7,8,9,10],xt=["column-reverse","column","row-reverse","row"],gt=["nowrap","wrap-reverse","wrap"],W=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],ft=te("MuiGrid",["root","container","item","zeroMinWidth",...ht.map(e=>`spacing-xs-${e}`),...xt.map(e=>`direction-xs-${e}`),...gt.map(e=>`wrap-xs-${e}`),...W.map(e=>`grid-xs-${e}`),...W.map(e=>`grid-sm-${e}`),...W.map(e=>`grid-md-${e}`),...W.map(e=>`grid-lg-${e}`),...W.map(e=>`grid-xl-${e}`)]),_=ft,mt=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function O(e){const s=parseFloat(e);return`${s}${String(e).replace(String(s),"")||"px"}`}function bt({theme:e,ownerState:s}){let n;return e.breakpoints.keys.reduce((o,r)=>{let i={};if(s[r]&&(n=s[r]),!n)return o;if(n===!0)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=K({values:s.columns,breakpoints:e.breakpoints.values}),p=typeof l=="object"?l[r]:l;if(p==null)return o;const d=`${Math.round(n/p*1e8)/1e6}%`;let c={};if(s.container&&s.item&&s.columnSpacing!==0){const a=e.spacing(s.columnSpacing);if(a!=="0px"){const u=`calc(${d} + ${O(a)})`;c={flexBasis:u,maxWidth:u}}}i=v({flexBasis:d,flexGrow:0,maxWidth:d},c)}return e.breakpoints.values[r]===0?Object.assign(o,i):o[e.breakpoints.up(r)]=i,o},{})}function yt({theme:e,ownerState:s}){const n=K({values:s.direction,breakpoints:e.breakpoints.values});return re({theme:e},n,o=>{const r={flexDirection:o};return o.indexOf("column")===0&&(r[`& > .${_.item}`]={maxWidth:"none"}),r})}function je({breakpoints:e,values:s}){let n="";Object.keys(s).forEach(r=>{n===""&&s[r]!==0&&(n=r)});const o=Object.keys(e).sort((r,i)=>e[r]-e[i]);return o.slice(0,o.indexOf(n))}function wt({theme:e,ownerState:s}){const{container:n,rowSpacing:o}=s;let r={};if(n&&o!==0){const i=K({values:o,breakpoints:e.breakpoints.values});let l;typeof i=="object"&&(l=je({breakpoints:e.breakpoints.values,values:i})),r=re({theme:e},i,(p,d)=>{var c;const a=e.spacing(p);return a!=="0px"?{marginTop:`-${O(a)}`,[`& > .${_.item}`]:{paddingTop:O(a)}}:(c=l)!=null&&c.includes(d)?{}:{marginTop:0,[`& > .${_.item}`]:{paddingTop:0}}})}return r}function jt({theme:e,ownerState:s}){const{container:n,columnSpacing:o}=s;let r={};if(n&&o!==0){const i=K({values:o,breakpoints:e.breakpoints.values});let l;typeof i=="object"&&(l=je({breakpoints:e.breakpoints.values,values:i})),r=re({theme:e},i,(p,d)=>{var c;const a=e.spacing(p);return a!=="0px"?{width:`calc(100% + ${O(a)})`,marginLeft:`-${O(a)}`,[`& > .${_.item}`]:{paddingLeft:O(a)}}:(c=l)!=null&&c.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${_.item}`]:{paddingLeft:0}}})}return r}function vt(e,s,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return s.forEach(r=>{const i=e[r];Number(i)>0&&o.push(n[`spacing-${r}-${String(i)}`])}),o}const St=P("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e,{container:o,direction:r,item:i,spacing:l,wrap:p,zeroMinWidth:d,breakpoints:c}=n;let a=[];o&&(a=vt(l,c,s));const u=[];return c.forEach(h=>{const m=n[h];m&&u.push(s[`grid-${h}-${String(m)}`])}),[s.root,o&&s.container,i&&s.item,d&&s.zeroMinWidth,...a,r!=="row"&&s[`direction-xs-${String(r)}`],p!=="wrap"&&s[`wrap-xs-${String(p)}`],...u]}})(({ownerState:e})=>v({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),yt,wt,jt,bt);function kt(e,s){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return s.forEach(o=>{const r=e[o];if(Number(r)>0){const i=`spacing-${o}-${String(r)}`;n.push(i)}}),n}const $t=e=>{const{classes:s,container:n,direction:o,item:r,spacing:i,wrap:l,zeroMinWidth:p,breakpoints:d}=e;let c=[];n&&(c=kt(i,d));const a=[];d.forEach(h=>{const m=e[h];m&&a.push(`grid-${h}-${String(m)}`)});const u={root:["root",n&&"container",r&&"item",p&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...a]};return oe(u,ut,s)},Ct=g.forwardRef(function(s,n){const o=ue({props:s,name:"MuiGrid"}),{breakpoints:r}=Be(),i=_e(o),{className:l,columns:p,columnSpacing:d,component:c="div",container:a=!1,direction:u="row",item:h=!1,rowSpacing:m,spacing:C=0,wrap:F="wrap",zeroMinWidth:b=!1}=i,T=se(i,mt),A=m||C,M=d||C,G=g.useContext(pe),f=a?p||12:G,y={},$=v({},T);r.keys.forEach(I=>{T[I]!=null&&(y[I]=T[I],delete $[I])});const k=v({},i,{columns:f,container:a,direction:u,item:h,rowSpacing:A,columnSpacing:M,wrap:F,zeroMinWidth:b,spacing:C},y,{breakpoints:r.keys}),U=$t(k);return t.jsx(pe.Provider,{value:f,children:t.jsx(St,v({ownerState:k,className:ne(U.root,l),as:c,ref:n},$))})}),N=Ct;function Bt(e){return ee("MuiSwitch",e)}const Tt=te("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),j=Tt,zt=["className","color","edge","size","sx"],Rt=e=>{const{classes:s,edge:n,size:o,color:r,checked:i,disabled:l}=e,p={root:["root",n&&`edge${E(n)}`,`size${E(o)}`],switchBase:["switchBase",`color${E(r)}`,i&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=oe(p,Bt,s);return v({},s,d)},Nt=P("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.root,n.edge&&s[`edge${E(n.edge)}`],s[`size${E(n.size)}`]]}})(({ownerState:e})=>v({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${j.thumb}`]:{width:16,height:16},[`& .${j.switchBase}`]:{padding:4,[`&.${j.checked}`]:{transform:"translateX(16px)"}}})),Ft=P(dt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.switchBase,{[`& .${j.input}`]:s.input},n.color!=="default"&&s[`color${E(n.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${j.checked}`]:{transform:"translateX(20px)"},[`&.${j.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${j.checked} + .${j.track}`]:{opacity:.5},[`&.${j.disabled} + .${j.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${j.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:s})=>v({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${j.checked}`]:{color:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette[s.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${j.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${s.color}DisabledColor`]:`${e.palette.mode==="light"?Te(e.palette[s.color].main,.62):ze(e.palette[s.color].main,.55)}`}},[`&.${j.checked} + .${j.track}`]:{backgroundColor:(e.vars||e).palette[s.color].main}})),Et=P("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,s)=>s.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Pt=P("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,s)=>s.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),At=g.forwardRef(function(s,n){const o=ue({props:s,name:"MuiSwitch"}),{className:r,color:i="primary",edge:l=!1,size:p="medium",sx:d}=o,c=se(o,zt),a=v({},o,{color:i,edge:l,size:p}),u=Rt(a),h=t.jsx(Pt,{className:u.thumb,ownerState:a});return t.jsxs(Nt,{className:ne(u.root,r),sx:d,ownerState:a,children:[t.jsx(Ft,v({type:"checkbox",icon:h,checkedIcon:h,ref:n,ownerState:a},c,{classes:v({},u,{root:u.switchBase})})),t.jsx(Et,{className:u.track,ownerState:a})]})}),Mt=At,It=({onClose:e})=>{const[s]=Re(o=>[o.graphStyle]),n=()=>{localStorage.setItem("graphStyle",s),e()};return t.jsxs(Dt,{direction:"column",children:[t.jsx(Ot,{children:"Default graph view:"}),t.jsx(Oe,{}),t.jsx(x,{mt:308,children:t.jsx(be,{kind:"big",onClick:n,children:"Save Changes"})})]})},Dt=w(x)`
  display: flex;
  gap: 10px;
  padding: 36px;
`,Ot=w(R)`
  font-family: Barlow;
  font-size: 13px;
  font-weight: 400;
`,Gt=({initialValues:e})=>{const s=ge({defaultValues:e,mode:"onSubmit"}),{isSubmitting:n}=s.formState,o=he(i=>i.setAppMetaData),r=s.handleSubmit(async i=>{try{(await Ne(i)).status==="success"&&o(i)}catch(l){console.log(l),console.warn(l)}});return t.jsx(fe,{...s,children:t.jsx(Wt,{id:"add-node-form",onSubmit:r,children:t.jsxs(t.Fragment,{children:[t.jsxs(x,{children:[t.jsx(x,{pt:20,children:t.jsx(q,{id:"cy-about-title-id",label:"Graph Title",maxLength:50,name:"title",placeholder:"Type graph title here...",rules:{...ae}})}),t.jsx(x,{pt:20,children:t.jsx(q,{id:"cy-about-id",label:"Graph Description",maxLength:100,name:"description",placeholder:"Type graph description here..."})})]}),t.jsx(x,{mt:210,py:24,children:n?t.jsx(Lt,{children:t.jsx(H,{color:S.white,size:20})}):t.jsx(be,{disabled:n,id:"add-node-submit-cta",kind:"big",type:"submit",children:"Save Changes"})})]})})})},Lt=w(x).attrs({align:"center",background:"primaryButton",borderRadius:8,justify:"center"})`
  padding: 16px 24px;
  opacity: 0.5;
`,Wt=w.form`
  padding: 36px;
`,Vt=/^[a-z0-9_]+$/,_t=({parentParam:e})=>{const[s,n]=g.useState(!1),[o,r]=g.useState([]),{fields:i,append:l,replace:p,remove:d}=Ge({name:"attributes"}),{setValue:c,watch:a}=Le();return g.useEffect(()=>{const u=async()=>{try{let h=[{required:!1,type:"string",key:""}];if(e!==Ke.value.toLowerCase()){n(!0);const m=await Fe(e);h=Ue(m)}p(h),r(h)}catch(h){console.warn(h)}finally{n(!1)}};o.length===0&&u()},[e,c,p,o.length]),t.jsxs(t.Fragment,{children:[s?t.jsx(x,{align:"center",children:t.jsx(H,{color:S.SECONDARY_BLUE,size:"30"})}):t.jsx(Ut,{py:8,children:t.jsx(N,{container:!0,spacing:2,children:i.map((u,h)=>{const m=a(`attributes[${h}].type`),C=a(`attributes[${h}].required`),F=u.isNew||!1;return t.jsxs(g.Fragment,{children:[t.jsx(N,{item:!0,xs:5,children:t.jsx(q,{autoComplete:"off",className:"text-input",disabled:!F,id:"cy-item-name",maxLength:50,name:`attributes.${h}.key`,placeholder:"Enter value",rules:{...ae,pattern:{message:"Please avoid special characters, spaces and uppercase",value:Vt}}})}),t.jsx(N,{item:!0,xs:4,children:t.jsx(ye,{onSelect:b=>c(`attributes[${h}].type`,b==null?void 0:b.value),options:de,selectedValue:de.find(b=>b.value===m)})}),t.jsxs(N,{item:!0,xs:3,children:[t.jsx(Mt,{checked:C,disabled:!1,name:`attributes.${h}.required`,onChange:b=>c(`attributes[${h}].required`,b.target.checked),size:"small"}),t.jsx(me,{onClick:()=>d(h),children:t.jsx(Ze,{})})]})]},u.id)})})}),t.jsx(x,{align:"flex-start",py:12,children:t.jsx(J,{onClick:()=>l({key:"",type:"string",required:!0,isNew:!0}),size:"medium",startIcon:t.jsx(we,{}),variant:"contained",children:"Add Attribute"})})]})},Ut=w(x)`
  max-height: 260px;
  overflow: auto;
  width: calc(100% + 20px);
`,qt=({parent:e})=>{const s=e;return t.jsxs(x,{children:[t.jsx(x,{direction:"row",mb:10,children:t.jsxs(N,{container:!0,spacing:2,children:[t.jsx(N,{item:!0,xs:5,children:t.jsx(Z,{style:{marginRight:180},children:"Attributes"})}),t.jsx(N,{item:!0,xs:4,children:t.jsx(Z,{style:{marginRight:130},children:"Type"})}),t.jsx(N,{item:!0,xs:3,children:t.jsx(Z,{children:"Required"})})]})}),s&&t.jsx(_t,{parentParam:s},s)]})},Z=w(R)`
  font-size: 15px;
  color: gray;
`,Kt={type:"",parent:""},Ht=async(e,s=!1)=>{try{const{attributes:n,...o}=e,r={...o,...qe(n)};let i;if(s?i=await Q.put("/schema",JSON.stringify(r),{}):i=await Q.post("/schema",JSON.stringify(r),{}),i.error){const{message:l}=i.error;throw new Error(l)}}catch(n){let o=X;if(n.status===400){const r=await n.json();o=r.errorCode||(r==null?void 0:r.status)||X}else n instanceof Error&&(o=n.message);throw new Error(o)}},Jt=({onSchemaCreate:e,selectedSchema:s,onDelete:n})=>{const{close:o,visible:r}=V("addType"),i=ge({mode:"onChange",defaultValues:s?{type:s.type,parent:s.parent}:Kt}),{watch:l,setValue:p,reset:d}=i,[c,a]=g.useState(!1),[u,h]=g.useState(!1),[m,C]=g.useState(null);g.useEffect(()=>()=>{d()},[r,d]);const F=f=>f.charAt(0).toUpperCase()+f.slice(1);g.useEffect(()=>{s||(async()=>{h(!0);try{const $=(await Ee()).schemas.filter(k=>!k.is_deleted).map(k=>(k==null?void 0:k.type)==="thing"?{label:"No Parent",value:k.type}:{label:F(k.type),value:k.type});C($)}catch(y){console.warn(y)}finally{h(!1)}})()},[s]);const b=l("parent"),T=()=>{o()},A=async()=>{if(s!=null&&s.type)try{await Q.delete(`/schema/${s.type}`),n(s.type),o()}catch(f){console.warn(f)}},M=i.handleSubmit(async f=>{a(!1);try{await Ht(f,!!s),e({type:f.type,parent:b||""}),T()}catch(y){if((y==null?void 0:y.status)===400){const $=await y.json();$.errorCode||$!=null&&$.status||X}else y instanceof Error&&y.message}finally{a(!1)}}),G=()=>m==null?void 0:m.find(f=>f.value===b);return t.jsx(fe,{...i,children:t.jsxs("form",{id:"add-type-form",onSubmit:M,children:[t.jsxs(x,{children:[t.jsx(x,{align:"center",direction:"row",justify:"space-between",mb:18,children:t.jsx(x,{align:"center",direction:"row",children:t.jsx(R,{children:"Enter details"})})}),s?t.jsx(x,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Parent: ",s.parent]})}):t.jsxs(t.Fragment,{children:[t.jsx(x,{mb:20,children:t.jsx(R,{children:"Select Parent"})}),t.jsx(x,{direction:"row",mb:20,children:t.jsx(ye,{autoFocus:!s,disabled:u,isLoading:u,onSelect:f=>p("parent",(f==null?void 0:f.value)||""),options:m,selectedValue:G()},b)})]}),s?t.jsx(x,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Type: ",s.type]})}):t.jsxs(t.Fragment,{children:[t.jsx(x,{mb:4,children:t.jsx(R,{children:"Type name"})}),t.jsx(x,{mb:12,children:t.jsx(q,{id:"cy-item-name",maxLength:250,name:"type",placeholder:"Enter type name",rules:{...ae},value:b})})]})]}),t.jsx(qt,{parent:s?s.type:b}),t.jsxs(x,{direction:"row",justify:"space-between",mt:20,children:[s?t.jsx(Yt,{color:"secondary",onClick:A,size:"large",style:{marginRight:20},variant:"contained",children:"Delete"}):null,t.jsx(J,{color:"secondary",disabled:c,onClick:M,size:"large",startIcon:c?t.jsx(H,{color:S.white,size:24}):null,variant:"contained",children:"Save"})]})]})})},Yt=w(J)`
  && {
    color: ${S.primaryRed};
    background-color: rgba(237, 116, 116, 0.1);

    &:hover,
    &:active,
    &:focus {
      color: ${S.primaryRed};
      background-color: rgba(237, 116, 116, 0.2);
    }
  }
`,Zt=({onSchemaCreate:e,selectedSchema:s,onDelete:n,onClose:o})=>{const{close:r}=V("addType"),i=()=>{r(),o()};return t.jsx(xe,{id:"addType",kind:"regular",onClose:i,preventOutsideClose:!0,children:t.jsx(Jt,{onDelete:n,onSchemaCreate:e,selectedSchema:s})})};function Xt(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}const Qt=({schema:e,onOpenActions:s})=>t.jsxs(He,{children:[t.jsx(D,{className:"empty"}),t.jsx(D,{children:Xt(e.type??"")}),t.jsx(D,{children:t.jsx(me,{disabled:(e==null?void 0:e.type)==="thing",onClick:()=>s(e),children:t.jsx(tt,{"data-testid":"EditIcon"})})})]}),es=g.memo(Qt),ts=({schemas:e,setSelectedSchema:s})=>{const{open:n}=V("addType"),[o,r]=Pe.useState(null),i=async()=>{n()},l=g.useCallback(a=>{n(),s(a)},[n,s]),p=()=>{r(null)},d=()=>{r(null),i()},c=!!o;return t.jsxs(t.Fragment,{children:[t.jsxs(st,{component:"table",children:[t.jsx(Je,{children:t.jsxs(nt,{component:"tr",children:[t.jsx(D,{className:"empty"}),t.jsx(D,{children:"Type"}),t.jsx(D,{className:"empty"})]})}),t.jsx("tbody",{children:e==null?void 0:e.map(a=>t.jsx(es,{onOpenActions:l,schema:a},a==null?void 0:a.type))})]}),t.jsx(os,{anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"schema-editor",onClose:p,open:c,transformOrigin:{vertical:"top",horizontal:"right"},children:t.jsxs(ns,{onClick:d,children:[t.jsx(Ye,{"data-testid":"EditTopicIcon"})," Edit"]})}),t.jsx(ss,{children:t.jsx(J,{color:"secondary",endIcon:t.jsx(we,{}),onClick:i,size:"medium",type:"submit",variant:"contained",children:"Create New Type"})})]})},ss=w(x)`
  display: flex;
  margin: 20px 0px 0px 30px;
  width: 28%;
`,ns=w(x).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${S.BUTTON1};
  color: ${S.white};

  &:hover {
    background: ${S.BUTTON1_HOVER};
    color: ${S.GRAY3};
  }
`,os=w(Qe)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${S.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
  }
`,rs=()=>{const[e,s]=g.useState(!0),[n,o]=g.useState([]),[r,i]=g.useState(null);g.useEffect(()=>{(async()=>{try{const c=await Ae();o(c.schemas.filter(a=>a.ref_id&&!a.is_deleted)),s(!1)}catch(c){console.error("Error fetching data:",c),s(!1)}})()},[]);const l=d=>{const c=n.some(a=>a.type===d.type);o(c?n.map(a=>a.type===d.type?d:a):[...n,d])},p=d=>{o(n.filter(c=>c.type!==d))};return t.jsxs(t.Fragment,{children:[t.jsx(as,{align:e?"center":"flex-start",justify:e?"center":"flex-start",py:16,children:e?t.jsx(H,{color:S.white}):t.jsx(t.Fragment,{children:t.jsx(ts,{schemas:n,setSelectedSchema:i})})}),t.jsx(Zt,{onClose:()=>i(null),onDelete:p,onSchemaCreate:l,selectedSchema:r})]})},as=w(x)`
  min-height: 0;
  overflow: auto;
  flex: 1;
  width: 100%;
`,is=e=>{const{children:s,value:n,index:o,...r}=e;return n===o?t.jsx(hs,{"aria-labelledby":`simple-tab-${o}`,hidden:n!==o,id:`simple-tabpanel-${o}`,role:"tabpanel",...r,children:s}):null};function cs(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const ls=({onClose:e})=>{const[s,n]=g.useState(0),[o]=Me(a=>[a.isAdmin,a.setPubKey]),r=Ie(a=>a.customSchemaFlag),i=he(a=>a.appMetaData),l=()=>o?"Admin Settings":"Settings",p=({children:a})=>t.jsxs(ps,{children:[t.jsx(x,{direction:"row",pt:3,children:t.jsx(gs,{"data-testid":"setting-label",children:l()})}),a]}),d=(a,u)=>{n(u)},c=[...o?[{label:"General",component:Gt}]:[],{label:"Appearance",component:It},...o&&r?[{label:"Blueprint",component:rs}]:[]];return t.jsxs(xs,{direction:"column",children:[t.jsx(p,{children:t.jsx(ds,{"aria-label":"settings tabs",onChange:d,value:s,children:c.map((a,u)=>t.jsx(us,{disableRipple:!0,label:a.label,...cs(u)},a.label))})}),c.map((a,u)=>t.jsx(is,{index:u,value:s,children:i&&t.jsx(a.component,{initialValues:i,onClose:e})},a.label))]})},ds=w(We)`
  && {
    .MuiTabs-indicator {
      background: ${S.primaryBlue};
    }
    padding-left: 34px;
  }
`,ps=w(x)`
  border-radius: 9px 9px 0 0;
  background: rgb(22, 24, 30);
  padding: 40px 36px 0 0;
`,us=w(Ve)`
  && {
    min-width: 0;
    width: auto;
    padding: 30px 0 19px;
    color: ${S.GRAY6};
    margin-right: 87px;
    font-family: Barlow;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    text-align: left;

    &.Mui-selected {
      color: ${S.white};
    }
  }
`,hs=w(x)`
  display: flex;
  flex: 1;
  min-height: 495px;
  max-height: 495px;
  height: fit-content;
  min-width: 480px;
  overflow: hidden;
  border-radius: 9px;
`,xs=w(x)`
  min-height: 0;
  flex: 1;
`,gs=w(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: Barlow;
  padding: 0 0 0 36px;
`,Os=()=>{const{close:e}=V("settings"),{visible:s}=V("addItem");return s?null:t.jsx(xe,{background:"BG1",id:"settings",noWrap:!0,onClose:e,children:t.jsx(ls,{onClose:e})})};export{Os as SettingsModal};
