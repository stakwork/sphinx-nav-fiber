import{r as V,ac as r0,bs as _d,aw as Xh,bt as XT,bu as Ps,bv as Gp,al as Wp,ak as Cr,bw as ZT,bx as Hp,by as Iu,at as _h,bz as vd,bA as QT,bB as KT,bC as JT,bD as s0,bE as $T,bF as eS,bG as tS,V as Ve,bH as pt,bI as nS,_ as ii,bJ as i0,ar as rS,aM as So,bK as Gc,bL as sS,bM as Zh,bN as o0,aA as tp,bO as np,bP as Ea,bQ as iS,bk as jp,bR as us,bS as rp,bT as S_,bU as Qh,bV as zi,am as a0,bW as oS,ao as Uu,au as aS,bX as l0,bY as vh,bZ as lS,b_ as uS,b$ as u0,c0 as Fa,c1 as Jl,c2 as cS,c3 as hS,c4 as fS,c5 as qp,c6 as dS,c7 as pS,j as La,c8 as Yp,c9 as Ar,ca as za,cb as mS,cc as el,cd as gS,ce as _S,cf as vS,cg as yS,ch as TS,ci as Ne,cj as SS,ck as hi,cl as c0,cm as h0,aN as Wc,G as sp,cn as wS,Z as xS}from"./index-b85f35cf.js";import{_ as Jt,s as cs}from"./react-toastify.esm-ce67a4f9.js";var f0={exports:{}},Bo={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Bo.ConcurrentRoot=1;Bo.ContinuousEventPriority=4;Bo.DefaultEventPriority=16;Bo.DiscreteEventPriority=1;Bo.IdleEventPriority=536870912;Bo.LegacyRoot=0;f0.exports=Bo;var Ca=f0.exports;function ES(s){let e;const t=new Set,n=(h,f)=>{const d=typeof h=="function"?h(e):h;if(d!==e){const m=e;e=f?d:Object.assign({},e,d),t.forEach(_=>_(e,m))}},r=()=>e,i=(h,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function _(){const y=f(e);if(!d(m,y)){const v=m;h(m=y,v)}}return t.add(_),()=>t.delete(_)},c={setState:n,getState:r,subscribe:(h,f,d)=>f||d?i(h,f,d):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=s(n,r,c),c}const CS=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),w_=CS?V.useEffect:V.useLayoutEffect;function bS(s){const e=typeof s=="function"?ES(s):s,t=(n=e.getState,r=Object.is)=>{const[,i]=V.useReducer(T=>T+1,0),o=e.getState(),u=V.useRef(o),c=V.useRef(n),h=V.useRef(r),f=V.useRef(!1),d=V.useRef();d.current===void 0&&(d.current=n(o));let m,_=!1;(u.current!==o||c.current!==n||h.current!==r||f.current)&&(m=n(o),_=!r(d.current,m)),w_(()=>{_&&(d.current=m),u.current=o,c.current=n,h.current=r,f.current=!1});const y=V.useRef(o);w_(()=>{const T=()=>{try{const w=e.getState(),O=c.current(w);h.current(d.current,O)||(u.current=w,d.current=O,i())}catch{f.current=!0,i()}},x=e.subscribe(T);return e.getState()!==y.current&&T(),x},[]);const v=_?m:d.current;return V.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}var d0={exports:{}},p0={exports:{}},m0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(H,z){var W=H.length;H.push(z);e:for(;0<W;){var N=W-1>>>1,L=H[N];if(0<r(L,z))H[N]=z,H[W]=L,W=N;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var z=H[0],W=H.pop();if(W!==z){H[0]=W;e:for(var N=0,L=H.length,K=L>>>1;N<K;){var ee=2*(N+1)-1,Y=H[ee],ie=ee+1,ne=H[ie];if(0>r(Y,W))ie<L&&0>r(ne,Y)?(H[N]=ne,H[ie]=W,N=ie):(H[N]=Y,H[ee]=W,N=ee);else if(ie<L&&0>r(ne,W))H[N]=ne,H[ie]=W,N=ie;else break e}}return z}function r(H,z){var W=H.sortIndex-z.sortIndex;return W!==0?W:H.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();s.unstable_now=function(){return o.now()-u}}var c=[],h=[],f=1,d=null,m=3,_=!1,y=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(H){for(var z=t(h);z!==null;){if(z.callback===null)n(h);else if(z.startTime<=H)n(h),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(h)}}function C(H){if(v=!1,O(H),!y)if(t(c)!==null)y=!0,X(E);else{var z=t(h);z!==null&&J(C,z.startTime-H)}}function E(H,z){y=!1,v&&(v=!1,x(M),M=-1),_=!0;var W=m;try{for(O(z),d=t(c);d!==null&&(!(d.expirationTime>z)||H&&!R());){var N=d.callback;if(typeof N=="function"){d.callback=null,m=d.priorityLevel;var L=N(d.expirationTime<=z);z=s.unstable_now(),typeof L=="function"?d.callback=L:d===t(c)&&n(c),O(z)}else n(c);d=t(c)}if(d!==null)var K=!0;else{var ee=t(h);ee!==null&&J(C,ee.startTime-z),K=!1}return K}finally{d=null,m=W,_=!1}}var k=!1,A=null,M=-1,D=5,U=-1;function R(){return!(s.unstable_now()-U<D)}function P(){if(A!==null){var H=s.unstable_now();U=H;var z=!0;try{z=A(!0,H)}finally{z?F():(k=!1,A=null)}}else k=!1}var F;if(typeof w=="function")F=function(){w(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=P,F=function(){q.postMessage(null)}}else F=function(){T(P,0)};function X(H){A=H,k||(k=!0,F())}function J(H,z){M=T(function(){H(s.unstable_now())},z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_continueExecution=function(){y||_||(y=!0,X(E))},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return m},s.unstable_getFirstCallbackNode=function(){return t(c)},s.unstable_next=function(H){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var W=m;m=z;try{return H()}finally{m=W}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(H,z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var W=m;m=H;try{return z()}finally{m=W}},s.unstable_scheduleCallback=function(H,z,W){var N=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?N+W:N):W=N,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,H={id:f++,callback:z,priorityLevel:H,startTime:W,expirationTime:L,sortIndex:-1},W>N?(H.sortIndex=W,e(h,H),t(c)===null&&H===t(h)&&(v?(x(M),M=-1):v=!0,J(C,W-N))):(H.sortIndex=L,e(c,H),y||_||(y=!0,X(E))),H},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(H){var z=m;return function(){var W=m;m=z;try{return H.apply(this,arguments)}finally{m=W}}}})(m0);p0.exports=m0;var ip=p0.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=function(e){var t={},n=V,r=ip,i=Object.assign;function o(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),E=Symbol.iterator;function k(a){return a===null||typeof a!="object"?null:(a=E&&a[E]||a["@@iterator"],typeof a=="function"?a:null)}function A(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case f:return"Fragment";case h:return"Portal";case m:return"Profiler";case d:return"StrictMode";case T:return"Suspense";case x:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case y:return(a.displayName||"Context")+".Consumer";case _:return(a._context.displayName||"Context")+".Provider";case v:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case w:return l=a.displayName||null,l!==null?l:A(a.type)||"Memo";case O:l=a._payload,a=a._init;try{return A(a(l))}catch{}}return null}function M(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(l);case 8:return l===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function D(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,l.flags&4098&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function U(a){if(D(a)!==a)throw Error(o(188))}function R(a){var l=a.alternate;if(!l){if(l=D(a),l===null)throw Error(o(188));return l!==a?null:a}for(var p=a,g=l;;){var S=p.return;if(S===null)break;var b=S.alternate;if(b===null){if(g=S.return,g!==null){p=g;continue}break}if(S.child===b.child){for(b=S.child;b;){if(b===p)return U(S),a;if(b===g)return U(S),l;b=b.sibling}throw Error(o(188))}if(p.return!==g.return)p=S,g=b;else{for(var I=!1,G=S.child;G;){if(G===p){I=!0,p=S,g=b;break}if(G===g){I=!0,g=S,p=b;break}G=G.sibling}if(!I){for(G=b.child;G;){if(G===p){I=!0,p=b,g=S;break}if(G===g){I=!0,g=b,p=S;break}G=G.sibling}if(!I)throw Error(o(189))}}if(p.alternate!==g)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?a:l}function P(a){return a=R(a),a!==null?F(a):null}function F(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=F(a);if(l!==null)return l;a=a.sibling}return null}function B(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var l=B(a);if(l!==null)return l}a=a.sibling}return null}var q=Array.isArray,X=e.getPublicInstance,J=e.getRootHostContext,H=e.getChildHostContext,z=e.prepareForCommit,W=e.resetAfterCommit,N=e.createInstance,L=e.appendInitialChild,K=e.finalizeInitialChildren,ee=e.prepareUpdate,Y=e.shouldSetTextContent,ie=e.createTextInstance,ne=e.scheduleTimeout,Z=e.cancelTimeout,me=e.noTimeout,ge=e.isPrimaryRenderer,oe=e.supportsMutation,ae=e.supportsPersistence,Ee=e.supportsHydration,Re=e.getInstanceFromNode,$=e.preparePortalMount,ce=e.getCurrentEventPriority,ve=e.detachDeletedInstance,le=e.supportsMicrotasks,fe=e.scheduleMicrotask,de=e.supportsTestSelectors,ue=e.findFiberRoot,Ce=e.getBoundingRect,Te=e.getTextContent,we=e.isHiddenSubtree,Se=e.matchAccessibilityRole,Je=e.setFocusIfFocusable,Ge=e.setupIntersectionObserver,Ae=e.appendChild,We=e.appendChildToContainer,et=e.commitTextUpdate,Lt=e.commitMount,Be=e.commitUpdate,gt=e.insertBefore,Ye=e.insertInContainerBefore,Ie=e.removeChild,it=e.removeChildFromContainer,ut=e.resetTextContent,zt=e.hideInstance,je=e.hideTextInstance,bt=e.unhideInstance,yn=e.unhideTextInstance,Zr=e.clearContainer,Ls=e.cloneInstance,Qr=e.createContainerChildSet,Nn=e.appendChildToContainerChildSet,Fn=e.finalizeContainerChildren,Ot=e.replaceContainerChildren,mi=e.cloneHiddenInstance,Mt=e.cloneHiddenTextInstance,Dt=e.canHydrateInstance,cr=e.canHydrateTextInstance,Ln=e.canHydrateSuspenseInstance,ot=e.isSuspenseInstancePending,jt=e.isSuspenseInstanceFallback,Qn=e.registerSuspenseInstanceRetry,Bt=e.getNextHydratableSibling,tn=e.getFirstHydratableChild,Tn=e.getFirstHydratableChildWithinContainer,ds=e.getFirstHydratableChildWithinSuspenseInstance,hr=e.hydrateInstance,zs=e.hydrateTextInstance,wf=e.hydrateSuspenseInstance,Qu=e.getNextHydratableInstanceAfterSuspenseInstance,Qi=e.commitHydratedContainer,al=e.commitHydratedSuspenseInstance,xf=e.clearSuspenseBoundary,Ku=e.clearSuspenseBoundaryFromContainer,jo=e.shouldDeleteUnhydratedTailInstances,ll=e.didNotMatchHydratedContainerTextInstance,ul=e.didNotMatchHydratedTextInstance,be;function Kr(a){if(be===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);be=l&&l[1]||""}return`
`+be+a}var cl=!1;function ps(a,l){if(!a||cl)return"";cl=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(pe){var g=pe}Reflect.construct(a,[],l)}else{try{l.call()}catch(pe){g=pe}a.call(l.prototype)}else{try{throw Error()}catch(pe){g=pe}a()}}catch(pe){if(pe&&g&&typeof pe.stack=="string"){for(var S=pe.stack.split(`
`),b=g.stack.split(`
`),I=S.length-1,G=b.length-1;1<=I&&0<=G&&S[I]!==b[G];)G--;for(;1<=I&&0<=G;I--,G--)if(S[I]!==b[G]){if(I!==1||G!==1)do if(I--,G--,0>G||S[I]!==b[G]){var re=`
`+S[I].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=I&&0<=G);break}}}finally{cl=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?Kr(a):""}var qo=Object.prototype.hasOwnProperty,Yo=[],ms=-1;function fr(a){return{current:a}}function at(a){0>ms||(a.current=Yo[ms],Yo[ms]=null,ms--)}function ct(a,l){ms++,Yo[ms]=a.current,a.current=l}var dr={},on=fr(dr),un=fr(!1),gs=dr;function Dr(a,l){var p=a.type.contextTypes;if(!p)return dr;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var S={},b;for(b in p)S[b]=l[b];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=S),S}function cn(a){return a=a.childContextTypes,a!=null}function Jr(){at(un),at(on)}function Xo(a,l,p){if(on.current!==dr)throw Error(o(168));ct(on,l),ct(un,p)}function Zo(a,l,p){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return p;g=g.getChildContext();for(var S in g)if(!(S in l))throw Error(o(108,M(a)||"Unknown",S));return i({},p,g)}function gi(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||dr,gs=on.current,ct(on,a),ct(un,un.current),!0}function pr(a,l,p){var g=a.stateNode;if(!g)throw Error(o(169));p?(a=Zo(a,l,gs),g.__reactInternalMemoizedMergedChildContext=a,at(un),at(on),ct(on,a)):at(un),ct(un,p)}var mr=Math.clz32?Math.clz32:Ju,Qo=Math.log,Ki=Math.LN2;function Ju(a){return a>>>=0,a===0?32:31-(Qo(a)/Ki|0)|0}var Bs=64,Vs=4194304;function Gs(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ji(a,l){var p=a.pendingLanes;if(p===0)return 0;var g=0,S=a.suspendedLanes,b=a.pingedLanes,I=p&268435455;if(I!==0){var G=I&~S;G!==0?g=Gs(G):(b&=I,b!==0&&(g=Gs(b)))}else I=p&~S,I!==0?g=Gs(I):b!==0&&(g=Gs(b));if(g===0)return 0;if(l!==0&&l!==g&&!(l&S)&&(S=g&-g,b=l&-l,S>=b||S===16&&(b&4194240)!==0))return l;if(g&4&&(g|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)p=31-mr(l),S=1<<p,g|=a[p],l&=~S;return g}function $u(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(a,l){for(var p=a.suspendedLanes,g=a.pingedLanes,S=a.expirationTimes,b=a.pendingLanes;0<b;){var I=31-mr(b),G=1<<I,re=S[I];re===-1?(!(G&p)||G&g)&&(S[I]=$u(G,l)):re<=l&&(a.expiredLanes|=G),b&=~G}}function Ws(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ko(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function _s(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-mr(l),a[l]=p}function _i(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<p;){var S=31-mr(p),b=1<<S;l[S]=0,g[S]=-1,a[S]=-1,p&=~b}}function vs(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var g=31-mr(p),S=1<<g;S&l|a[g]&l&&(a[g]|=l),p&=~S}}var Qe=0;function fl(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Hs=r.unstable_scheduleCallback,Jo=r.unstable_cancelCallback,dl=r.unstable_shouldYield,ec=r.unstable_requestPaint,It=r.unstable_now,$i=r.unstable_ImmediatePriority,tc=r.unstable_UserBlockingPriority,zn=r.unstable_NormalPriority,pl=r.unstable_IdlePriority,eo=null,gr=null;function ml(a){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(eo,a,void 0,(a.current.flags&128)===128)}catch{}}function nc(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var _r=typeof Object.is=="function"?Object.is:nc,Bn=null,ys=!1,Pr=!1;function gl(a){Bn===null?Bn=[a]:Bn.push(a)}function _l(a){ys=!0,gl(a)}function Kn(){if(!Pr&&Bn!==null){Pr=!0;var a=0,l=Qe;try{var p=Bn;for(Qe=1;a<p.length;a++){var g=p[a];do g=g(!0);while(g!==null)}Bn=null,ys=!1}catch(S){throw Bn!==null&&(Bn=Bn.slice(a+1)),Hs($i,Kn),S}finally{Qe=l,Pr=!1}}return null}var to=u.ReactCurrentBatchConfig;function no(a,l){if(_r(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),g=Object.keys(l);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var S=p[g];if(!qo.call(l,S)||!_r(a[S],l[S]))return!1}return!0}function ro(a){switch(a.tag){case 5:return Kr(a.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return a=ps(a.type,!1),a;case 11:return a=ps(a.type.render,!1),a;case 1:return a=ps(a.type,!0),a;default:return""}}function Vn(a,l){if(a&&a.defaultProps){l=i({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}var hn=fr(null),$o=null,$r=null,vi=null;function ea(){vi=$r=$o=null}function rc(a,l,p){ge?(ct(hn,l._currentValue),l._currentValue=p):(ct(hn,l._currentValue2),l._currentValue2=p)}function fn(a){var l=hn.current;at(hn),ge?a._currentValue=l:a._currentValue2=l}function Gn(a,l,p){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===p)break;a=a.return}}function qt(a,l){$o=a,vi=$r=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&l&&(Sr=!0),a.firstContext=null)}function Yt(a){var l=ge?a._currentValue:a._currentValue2;if(vi!==a)if(a={context:a,memoizedValue:l,next:null},$r===null){if($o===null)throw Error(o(308));$r=a,$o.dependencies={lanes:0,firstContext:a}}else $r=$r.next=a;return l}var vr=null,yi=!1;function Ef(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xm(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function js(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Ti(a,l){var p=a.updateQueue;p!==null&&(p=p.shared,nn!==null&&a.mode&1&&!(Xe&2)?(a=p.interleaved,a===null?(l.next=l,vr===null?vr=[p]:vr.push(p)):(l.next=a.next,a.next=l),p.interleaved=l):(a=p.pending,a===null?l.next=l:(l.next=a.next,a.next=l),p.pending=l))}function sc(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,p|=g,l.lanes=p,vs(a,p)}}function Zm(a,l){var p=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var S=null,b=null;if(p=p.firstBaseUpdate,p!==null){do{var I={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};b===null?S=b=I:b=b.next=I,p=p.next}while(p!==null);b===null?S=b=l:b=b.next=l}else S=b=l;p={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:b,shared:g.shared,effects:g.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function ic(a,l,p,g){var S=a.updateQueue;yi=!1;var b=S.firstBaseUpdate,I=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var re=G,pe=re.next;re.next=null,I===null?b=pe:I.next=pe,I=re;var xe=a.alternate;xe!==null&&(xe=xe.updateQueue,G=xe.lastBaseUpdate,G!==I&&(G===null?xe.firstBaseUpdate=pe:G.next=pe,xe.lastBaseUpdate=re))}if(b!==null){var Le=S.baseState;I=0,xe=pe=re=null,G=b;do{var Me=G.lane,_t=G.eventTime;if((g&Me)===Me){xe!==null&&(xe=xe.next={eventTime:_t,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var ke=a,An=G;switch(Me=l,_t=p,An.tag){case 1:if(ke=An.payload,typeof ke=="function"){Le=ke.call(_t,Le,Me);break e}Le=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=An.payload,Me=typeof ke=="function"?ke.call(_t,Le,Me):ke,Me==null)break e;Le=i({},Le,Me);break e;case 2:yi=!0}}G.callback!==null&&G.lane!==0&&(a.flags|=64,Me=S.effects,Me===null?S.effects=[G]:Me.push(G))}else _t={eventTime:_t,lane:Me,tag:G.tag,payload:G.payload,callback:G.callback,next:null},xe===null?(pe=xe=_t,re=Le):xe=xe.next=_t,I|=Me;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;Me=G,G=Me.next,Me.next=null,S.lastBaseUpdate=Me,S.shared.pending=null}}while(1);if(xe===null&&(re=Le),S.baseState=re,S.firstBaseUpdate=pe,S.lastBaseUpdate=xe,l=S.shared.interleaved,l!==null){S=l;do I|=S.lane,S=S.next;while(S!==l)}else b===null&&(S.shared.lanes=0);ua|=I,a.lanes=I,a.memoizedState=Le}}function Qm(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],S=g.callback;if(S!==null){if(g.callback=null,g=p,typeof S!="function")throw Error(o(191,S));S.call(g)}}}var Km=new n.Component().refs;function Cf(a,l,p,g){l=a.memoizedState,p=p(g,l),p=p==null?l:i({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var oc={isMounted:function(a){return(a=a._reactInternals)?D(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var g=Hn(),S=xi(a),b=js(g,S);b.payload=l,p!=null&&(b.callback=p),Ti(a,b),l=Fr(a,S,g),l!==null&&sc(l,a,S)},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var g=Hn(),S=xi(a),b=js(g,S);b.tag=1,b.payload=l,p!=null&&(b.callback=p),Ti(a,b),l=Fr(a,S,g),l!==null&&sc(l,a,S)},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=Hn(),g=xi(a),S=js(p,g);S.tag=2,l!=null&&(S.callback=l),Ti(a,S),l=Fr(a,g,p),l!==null&&sc(l,a,g)}};function Jm(a,l,p,g,S,b,I){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,b,I):l.prototype&&l.prototype.isPureReactComponent?!no(p,g)||!no(S,b):!0}function $m(a,l,p){var g=!1,S=dr,b=l.contextType;return typeof b=="object"&&b!==null?b=Yt(b):(S=cn(l)?gs:on.current,g=l.contextTypes,b=(g=g!=null)?Dr(a,S):dr),l=new l(p,b),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=oc,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=b),l}function eg(a,l,p,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,g),l.state!==a&&oc.enqueueReplaceState(l,l.state,null)}function bf(a,l,p,g){var S=a.stateNode;S.props=p,S.state=a.memoizedState,S.refs=Km,Ef(a);var b=l.contextType;typeof b=="object"&&b!==null?S.context=Yt(b):(b=cn(l)?gs:on.current,S.context=Dr(a,b)),S.state=a.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Cf(a,l,b,p),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&oc.enqueueReplaceState(S,S.state,null),ic(a,p,S,g),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}var ta=[],na=0,ac=null,lc=0,Rr=[],Ir=0,so=null,qs=1,Ys="";function io(a,l){ta[na++]=lc,ta[na++]=ac,ac=a,lc=l}function tg(a,l,p){Rr[Ir++]=qs,Rr[Ir++]=Ys,Rr[Ir++]=so,so=a;var g=qs;a=Ys;var S=32-mr(g)-1;g&=~(1<<S),p+=1;var b=32-mr(l)+S;if(30<b){var I=S-S%5;b=(g&(1<<I)-1).toString(32),g>>=I,S-=I,qs=1<<32-mr(l)+S|p<<S|g,Ys=b+a}else qs=1<<b|p<<S|g,Ys=a}function Of(a){a.return!==null&&(io(a,1),tg(a,1,0))}function kf(a){for(;a===ac;)ac=ta[--na],ta[na]=null,lc=ta[--na],ta[na]=null;for(;a===so;)so=Rr[--Ir],Rr[Ir]=null,Ys=Rr[--Ir],Rr[Ir]=null,qs=Rr[--Ir],Rr[Ir]=null}var yr=null,Tr=null,Pt=!1,vl=!1,es=null;function ng(a,l){var p=Lr(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function rg(a,l){switch(a.tag){case 5:return l=Dt(l,a.type,a.pendingProps),l!==null?(a.stateNode=l,yr=a,Tr=tn(l),!0):!1;case 6:return l=cr(l,a.pendingProps),l!==null?(a.stateNode=l,yr=a,Tr=null,!0):!1;case 13:if(l=Ln(l),l!==null){var p=so!==null?{id:qs,overflow:Ys}:null;return a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Lr(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,yr=a,Tr=null,!0}return!1;default:return!1}}function Af(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Mf(a){if(Pt){var l=Tr;if(l){var p=l;if(!rg(a,l)){if(Af(a))throw Error(o(418));l=Bt(p);var g=yr;l&&rg(a,l)?ng(g,p):(a.flags=a.flags&-4097|2,Pt=!1,yr=a)}}else{if(Af(a))throw Error(o(418));a.flags=a.flags&-4097|2,Pt=!1,yr=a}}}function sg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;yr=a}function yl(a){if(!Ee||a!==yr)return!1;if(!Pt)return sg(a),Pt=!0,!1;if(a.tag!==3&&(a.tag!==5||jo(a.type)&&!Y(a.type,a.memoizedProps))){var l=Tr;if(l){if(Af(a)){for(a=Tr;a;)a=Bt(a);throw Error(o(418))}for(;l;)ng(a,l),l=Bt(l)}}if(sg(a),a.tag===13){if(!Ee)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));Tr=Qu(a)}else Tr=yr?Bt(a.stateNode):null;return!0}function ra(){Ee&&(Tr=yr=null,vl=Pt=!1)}function Df(a){es===null?es=[a]:es.push(a)}function Tl(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(o(309));var g=p.stateNode}if(!g)throw Error(o(147,a));var S=g,b=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(I){var G=S.refs;G===Km&&(G=S.refs={}),I===null?delete G[b]:G[b]=I},l._stringRef=b,l)}if(typeof a!="string")throw Error(o(284));if(!p._owner)throw Error(o(290,a))}return a}function uc(a,l){throw a=Object.prototype.toString.call(l),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function ig(a){var l=a._init;return l(a._payload)}function og(a){function l(Q,j){if(a){var te=Q.deletions;te===null?(Q.deletions=[j],Q.flags|=16):te.push(j)}}function p(Q,j){if(!a)return null;for(;j!==null;)l(Q,j),j=j.sibling;return null}function g(Q,j){for(Q=new Map;j!==null;)j.key!==null?Q.set(j.key,j):Q.set(j.index,j),j=j.sibling;return Q}function S(Q,j){return Q=Ci(Q,j),Q.index=0,Q.sibling=null,Q}function b(Q,j,te){return Q.index=te,a?(te=Q.alternate,te!==null?(te=te.index,te<j?(Q.flags|=2,j):te):(Q.flags|=2,j)):(Q.flags|=1048576,j)}function I(Q){return a&&Q.alternate===null&&(Q.flags|=2),Q}function G(Q,j,te,ye){return j===null||j.tag!==6?(j=pd(te,Q.mode,ye),j.return=Q,j):(j=S(j,te),j.return=Q,j)}function re(Q,j,te,ye){var Oe=te.type;return Oe===f?xe(Q,j,te.props.children,ye,te.key):j!==null&&(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===O&&ig(Oe)===j.type)?(ye=S(j,te.props),ye.ref=Tl(Q,j,te),ye.return=Q,ye):(ye=Bc(te.type,te.key,te.props,null,Q.mode,ye),ye.ref=Tl(Q,j,te),ye.return=Q,ye)}function pe(Q,j,te,ye){return j===null||j.tag!==4||j.stateNode.containerInfo!==te.containerInfo||j.stateNode.implementation!==te.implementation?(j=md(te,Q.mode,ye),j.return=Q,j):(j=S(j,te.children||[]),j.return=Q,j)}function xe(Q,j,te,ye,Oe){return j===null||j.tag!==7?(j=fo(te,Q.mode,ye,Oe),j.return=Q,j):(j=S(j,te),j.return=Q,j)}function Le(Q,j,te){if(typeof j=="string"&&j!==""||typeof j=="number")return j=pd(""+j,Q.mode,te),j.return=Q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case c:return te=Bc(j.type,j.key,j.props,null,Q.mode,te),te.ref=Tl(Q,null,j),te.return=Q,te;case h:return j=md(j,Q.mode,te),j.return=Q,j;case O:var ye=j._init;return Le(Q,ye(j._payload),te)}if(q(j)||k(j))return j=fo(j,Q.mode,te,null),j.return=Q,j;uc(Q,j)}return null}function Me(Q,j,te,ye){var Oe=j!==null?j.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Oe!==null?null:G(Q,j,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case c:return te.key===Oe?re(Q,j,te,ye):null;case h:return te.key===Oe?pe(Q,j,te,ye):null;case O:return Oe=te._init,Me(Q,j,Oe(te._payload),ye)}if(q(te)||k(te))return Oe!==null?null:xe(Q,j,te,ye,null);uc(Q,te)}return null}function _t(Q,j,te,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Q=Q.get(te)||null,G(j,Q,""+ye,Oe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case c:return Q=Q.get(ye.key===null?te:ye.key)||null,re(j,Q,ye,Oe);case h:return Q=Q.get(ye.key===null?te:ye.key)||null,pe(j,Q,ye,Oe);case O:var qe=ye._init;return _t(Q,j,te,qe(ye._payload),Oe)}if(q(ye)||k(ye))return Q=Q.get(te)||null,xe(j,Q,ye,Oe,null);uc(j,ye)}return null}function ke(Q,j,te,ye){for(var Oe=null,qe=null,ze=j,tt=j=0,pn=null;ze!==null&&tt<te.length;tt++){ze.index>tt?(pn=ze,ze=null):pn=ze.sibling;var nt=Me(Q,ze,te[tt],ye);if(nt===null){ze===null&&(ze=pn);break}a&&ze&&nt.alternate===null&&l(Q,ze),j=b(nt,j,tt),qe===null?Oe=nt:qe.sibling=nt,qe=nt,ze=pn}if(tt===te.length)return p(Q,ze),Pt&&io(Q,tt),Oe;if(ze===null){for(;tt<te.length;tt++)ze=Le(Q,te[tt],ye),ze!==null&&(j=b(ze,j,tt),qe===null?Oe=ze:qe.sibling=ze,qe=ze);return Pt&&io(Q,tt),Oe}for(ze=g(Q,ze);tt<te.length;tt++)pn=_t(ze,Q,tt,te[tt],ye),pn!==null&&(a&&pn.alternate!==null&&ze.delete(pn.key===null?tt:pn.key),j=b(pn,j,tt),qe===null?Oe=pn:qe.sibling=pn,qe=pn);return a&&ze.forEach(function(bi){return l(Q,bi)}),Pt&&io(Q,tt),Oe}function An(Q,j,te,ye){var Oe=k(te);if(typeof Oe!="function")throw Error(o(150));if(te=Oe.call(te),te==null)throw Error(o(151));for(var qe=Oe=null,ze=j,tt=j=0,pn=null,nt=te.next();ze!==null&&!nt.done;tt++,nt=te.next()){ze.index>tt?(pn=ze,ze=null):pn=ze.sibling;var bi=Me(Q,ze,nt.value,ye);if(bi===null){ze===null&&(ze=pn);break}a&&ze&&bi.alternate===null&&l(Q,ze),j=b(bi,j,tt),qe===null?Oe=bi:qe.sibling=bi,qe=bi,ze=pn}if(nt.done)return p(Q,ze),Pt&&io(Q,tt),Oe;if(ze===null){for(;!nt.done;tt++,nt=te.next())nt=Le(Q,nt.value,ye),nt!==null&&(j=b(nt,j,tt),qe===null?Oe=nt:qe.sibling=nt,qe=nt);return Pt&&io(Q,tt),Oe}for(ze=g(Q,ze);!nt.done;tt++,nt=te.next())nt=_t(ze,Q,tt,nt.value,ye),nt!==null&&(a&&nt.alternate!==null&&ze.delete(nt.key===null?tt:nt.key),j=b(nt,j,tt),qe===null?Oe=nt:qe.sibling=nt,qe=nt);return a&&ze.forEach(function(YT){return l(Q,YT)}),Pt&&io(Q,tt),Oe}function zr(Q,j,te,ye){if(typeof te=="object"&&te!==null&&te.type===f&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case c:e:{for(var Oe=te.key,qe=j;qe!==null;){if(qe.key===Oe){if(Oe=te.type,Oe===f){if(qe.tag===7){p(Q,qe.sibling),j=S(qe,te.props.children),j.return=Q,Q=j;break e}}else if(qe.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===O&&ig(Oe)===qe.type){p(Q,qe.sibling),j=S(qe,te.props),j.ref=Tl(Q,qe,te),j.return=Q,Q=j;break e}p(Q,qe);break}else l(Q,qe);qe=qe.sibling}te.type===f?(j=fo(te.props.children,Q.mode,ye,te.key),j.return=Q,Q=j):(ye=Bc(te.type,te.key,te.props,null,Q.mode,ye),ye.ref=Tl(Q,j,te),ye.return=Q,Q=ye)}return I(Q);case h:e:{for(qe=te.key;j!==null;){if(j.key===qe)if(j.tag===4&&j.stateNode.containerInfo===te.containerInfo&&j.stateNode.implementation===te.implementation){p(Q,j.sibling),j=S(j,te.children||[]),j.return=Q,Q=j;break e}else{p(Q,j);break}else l(Q,j);j=j.sibling}j=md(te,Q.mode,ye),j.return=Q,Q=j}return I(Q);case O:return qe=te._init,zr(Q,j,qe(te._payload),ye)}if(q(te))return ke(Q,j,te,ye);if(k(te))return An(Q,j,te,ye);uc(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,j!==null&&j.tag===6?(p(Q,j.sibling),j=S(j,te),j.return=Q,Q=j):(p(Q,j),j=pd(te,Q.mode,ye),j.return=Q,Q=j),I(Q)):p(Q,j)}return zr}var sa=og(!0),ag=og(!1),Sl={},Ur=fr(Sl),wl=fr(Sl),ia=fr(Sl);function Ts(a){if(a===Sl)throw Error(o(174));return a}function Pf(a,l){ct(ia,l),ct(wl,a),ct(Ur,Sl),a=J(l),at(Ur),ct(Ur,a)}function oa(){at(Ur),at(wl),at(ia)}function lg(a){var l=Ts(ia.current),p=Ts(Ur.current);l=H(p,a.type,l),p!==l&&(ct(wl,a),ct(Ur,l))}function Rf(a){wl.current===a&&(at(Ur),at(wl))}var Ut=fr(0);function cc(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||ot(p)||jt(p)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var If=[];function Uf(){for(var a=0;a<If.length;a++){var l=If[a];ge?l._workInProgressVersionPrimary=null:l._workInProgressVersionSecondary=null}If.length=0}var hc=u.ReactCurrentDispatcher,Nr=u.ReactCurrentBatchConfig,aa=0,Vt=null,bn=null,dn=null,fc=!1,xl=!1,El=0,vT=0;function On(){throw Error(o(321))}function Nf(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!_r(a[p],l[p]))return!1;return!0}function Ff(a,l,p,g,S,b){if(aa=b,Vt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,hc.current=a===null||a.memoizedState===null?wT:xT,a=p(g,S),xl){b=0;do{if(xl=!1,El=0,25<=b)throw Error(o(301));b+=1,dn=bn=null,l.updateQueue=null,hc.current=ET,a=p(g,S)}while(xl)}if(hc.current=_c,l=bn!==null&&bn.next!==null,aa=0,dn=bn=Vt=null,fc=!1,l)throw Error(o(300));return a}function Lf(){var a=El!==0;return El=0,a}function Xs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Vt.memoizedState=dn=a:dn=dn.next=a,dn}function Ss(){if(bn===null){var a=Vt.alternate;a=a!==null?a.memoizedState:null}else a=bn.next;var l=dn===null?Vt.memoizedState:dn.next;if(l!==null)dn=l,bn=a;else{if(a===null)throw Error(o(310));bn=a,a={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},dn===null?Vt.memoizedState=dn=a:dn=dn.next=a}return dn}function oo(a,l){return typeof l=="function"?l(a):l}function dc(a){var l=Ss(),p=l.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=a;var g=bn,S=g.baseQueue,b=p.pending;if(b!==null){if(S!==null){var I=S.next;S.next=b.next,b.next=I}g.baseQueue=S=b,p.pending=null}if(S!==null){b=S.next,g=g.baseState;var G=I=null,re=null,pe=b;do{var xe=pe.lane;if((aa&xe)===xe)re!==null&&(re=re.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),g=pe.hasEagerState?pe.eagerState:a(g,pe.action);else{var Le={lane:xe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};re===null?(G=re=Le,I=g):re=re.next=Le,Vt.lanes|=xe,ua|=xe}pe=pe.next}while(pe!==null&&pe!==b);re===null?I=g:re.next=G,_r(g,l.memoizedState)||(Sr=!0),l.memoizedState=g,l.baseState=I,l.baseQueue=re,p.lastRenderedState=g}if(a=p.interleaved,a!==null){S=a;do b=S.lane,Vt.lanes|=b,ua|=b,S=S.next;while(S!==a)}else S===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function pc(a){var l=Ss(),p=l.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=a;var g=p.dispatch,S=p.pending,b=l.memoizedState;if(S!==null){p.pending=null;var I=S=S.next;do b=a(b,I.action),I=I.next;while(I!==S);_r(b,l.memoizedState)||(Sr=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),p.lastRenderedState=b}return[b,g]}function ug(){}function cg(a,l){var p=Vt,g=Ss(),S=l(),b=!_r(g.memoizedState,S);if(b&&(g.memoizedState=S,Sr=!0),g=g.queue,bl(dg.bind(null,p,g,a),[a]),g.getSnapshot!==l||b||dn!==null&&dn.memoizedState.tag&1){if(p.flags|=2048,Cl(9,fg.bind(null,p,g,S,l),void 0,null),nn===null)throw Error(o(349));aa&30||hg(p,l,S)}return S}function hg(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Vt.updateQueue,l===null?(l={lastEffect:null,stores:null},Vt.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function fg(a,l,p,g){l.value=p,l.getSnapshot=g,pg(l)&&Fr(a,1,-1)}function dg(a,l,p){return p(function(){pg(l)&&Fr(a,1,-1)})}function pg(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!_r(a,p)}catch{return!0}}function zf(a){var l=Xs();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:a},l.queue=a,a=a.dispatch=ST.bind(null,Vt,a),[l.memoizedState,a]}function Cl(a,l,p,g){return a={tag:a,create:l,destroy:p,deps:g,next:null},l=Vt.updateQueue,l===null?(l={lastEffect:null,stores:null},Vt.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(g=p.next,p.next=a,a.next=g,l.lastEffect=a)),a}function mg(){return Ss().memoizedState}function mc(a,l,p,g){var S=Xs();Vt.flags|=a,S.memoizedState=Cl(1|l,p,void 0,g===void 0?null:g)}function gc(a,l,p,g){var S=Ss();g=g===void 0?null:g;var b=void 0;if(bn!==null){var I=bn.memoizedState;if(b=I.destroy,g!==null&&Nf(g,I.deps)){S.memoizedState=Cl(l,p,b,g);return}}Vt.flags|=a,S.memoizedState=Cl(1|l,p,b,g)}function Bf(a,l){return mc(8390656,8,a,l)}function bl(a,l){return gc(2048,8,a,l)}function gg(a,l){return gc(4,2,a,l)}function _g(a,l){return gc(4,4,a,l)}function vg(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function yg(a,l,p){return p=p!=null?p.concat([a]):null,gc(4,4,vg.bind(null,l,a),p)}function Vf(){}function Tg(a,l){var p=Ss();l=l===void 0?null:l;var g=p.memoizedState;return g!==null&&l!==null&&Nf(l,g[1])?g[0]:(p.memoizedState=[a,l],a)}function Sg(a,l){var p=Ss();l=l===void 0?null:l;var g=p.memoizedState;return g!==null&&l!==null&&Nf(l,g[1])?g[0]:(a=a(),p.memoizedState=[a,l],a)}function yT(a,l){var p=Qe;Qe=p!==0&&4>p?p:4,a(!0);var g=Nr.transition;Nr.transition={};try{a(!1),l()}finally{Qe=p,Nr.transition=g}}function wg(){return Ss().memoizedState}function TT(a,l,p){var g=xi(a);p={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null},xg(a)?Eg(l,p):(Cg(a,l,p),p=Hn(),a=Fr(a,g,p),a!==null&&bg(a,l,g))}function ST(a,l,p){var g=xi(a),S={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null};if(xg(a))Eg(l,S);else{Cg(a,l,S);var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var I=l.lastRenderedState,G=b(I,p);if(S.hasEagerState=!0,S.eagerState=G,_r(G,I))return}catch{}finally{}p=Hn(),a=Fr(a,g,p),a!==null&&bg(a,l,g)}}function xg(a){var l=a.alternate;return a===Vt||l!==null&&l===Vt}function Eg(a,l){xl=fc=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function Cg(a,l,p){nn!==null&&a.mode&1&&!(Xe&2)?(a=l.interleaved,a===null?(p.next=p,vr===null?vr=[l]:vr.push(l)):(p.next=a.next,a.next=p),l.interleaved=p):(a=l.pending,a===null?p.next=p:(p.next=a.next,a.next=p),l.pending=p)}function bg(a,l,p){if(p&4194240){var g=l.lanes;g&=a.pendingLanes,p|=g,l.lanes=p,vs(a,p)}}var _c={readContext:Yt,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},wT={readContext:Yt,useCallback:function(a,l){return Xs().memoizedState=[a,l===void 0?null:l],a},useContext:Yt,useEffect:Bf,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,mc(4194308,4,vg.bind(null,l,a),p)},useLayoutEffect:function(a,l){return mc(4194308,4,a,l)},useInsertionEffect:function(a,l){return mc(4,2,a,l)},useMemo:function(a,l){var p=Xs();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var g=Xs();return l=p!==void 0?p(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=TT.bind(null,Vt,a),[g.memoizedState,a]},useRef:function(a){var l=Xs();return a={current:a},l.memoizedState=a},useState:zf,useDebugValue:Vf,useDeferredValue:function(a){var l=zf(a),p=l[0],g=l[1];return Bf(function(){var S=Nr.transition;Nr.transition={};try{g(a)}finally{Nr.transition=S}},[a]),p},useTransition:function(){var a=zf(!1),l=a[0];return a=yT.bind(null,a[1]),Xs().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var g=Vt,S=Xs();if(Pt){if(p===void 0)throw Error(o(407));p=p()}else{if(p=l(),nn===null)throw Error(o(349));aa&30||hg(g,l,p)}S.memoizedState=p;var b={value:p,getSnapshot:l};return S.queue=b,Bf(dg.bind(null,g,b,a),[a]),g.flags|=2048,Cl(9,fg.bind(null,g,b,p,l),void 0,null),p},useId:function(){var a=Xs(),l=nn.identifierPrefix;if(Pt){var p=Ys,g=qs;p=(g&~(1<<32-mr(g)-1)).toString(32)+p,l=":"+l+"R"+p,p=El++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=vT++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},xT={readContext:Yt,useCallback:Tg,useContext:Yt,useEffect:bl,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:_g,useMemo:Sg,useReducer:dc,useRef:mg,useState:function(){return dc(oo)},useDebugValue:Vf,useDeferredValue:function(a){var l=dc(oo),p=l[0],g=l[1];return bl(function(){var S=Nr.transition;Nr.transition={};try{g(a)}finally{Nr.transition=S}},[a]),p},useTransition:function(){var a=dc(oo)[0],l=Ss().memoizedState;return[a,l]},useMutableSource:ug,useSyncExternalStore:cg,useId:wg,unstable_isNewReconciler:!1},ET={readContext:Yt,useCallback:Tg,useContext:Yt,useEffect:bl,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:_g,useMemo:Sg,useReducer:pc,useRef:mg,useState:function(){return pc(oo)},useDebugValue:Vf,useDeferredValue:function(a){var l=pc(oo),p=l[0],g=l[1];return bl(function(){var S=Nr.transition;Nr.transition={};try{g(a)}finally{Nr.transition=S}},[a]),p},useTransition:function(){var a=pc(oo)[0],l=Ss().memoizedState;return[a,l]},useMutableSource:ug,useSyncExternalStore:cg,useId:wg,unstable_isNewReconciler:!1};function Gf(a,l){try{var p="",g=l;do p+=ro(g),g=g.return;while(g);var S=p}catch(b){S=`
Error generating stack: `+b.message+`
`+b.stack}return{value:a,source:l,stack:S}}function Wf(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var CT=typeof WeakMap=="function"?WeakMap:Map;function Og(a,l,p){p=js(-1,p),p.tag=3,p.payload={element:null};var g=l.value;return p.callback=function(){Rc||(Rc=!0,ad=g),Wf(a,l)},p}function kg(a,l,p){p=js(-1,p),p.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var S=l.value;p.payload=function(){return g(S)},p.callback=function(){Wf(a,l)}}var b=a.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(p.callback=function(){Wf(a,l),typeof g!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})}),p}function Ag(a,l,p){var g=a.pingCache;if(g===null){g=a.pingCache=new CT;var S=new Set;g.set(l,S)}else S=g.get(l),S===void 0&&(S=new Set,g.set(l,S));S.has(p)||(S.add(p),a=zT.bind(null,a,l,p),l.then(a,a))}function Mg(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Dg(a,l,p,g,S){return a.mode&1?(a.flags|=65536,a.lanes=S,a):(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=js(-1,1),l.tag=2,Ti(p,l))),p.lanes|=1),a)}function ws(a){a.flags|=4}function Pg(a,l){if(a!==null&&a.child===l.child)return!0;if(l.flags&16)return!1;for(a=l.child;a!==null;){if(a.flags&12854||a.subtreeFlags&12854)return!1;a=a.sibling}return!0}var Ol,kl,vc,yc;if(oe)Ol=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)L(a,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},kl=function(){},vc=function(a,l,p,g,S){if(a=a.memoizedProps,a!==g){var b=l.stateNode,I=Ts(Ur.current);p=ee(b,p,a,g,S,I),(l.updateQueue=p)&&ws(l)}},yc=function(a,l,p,g){p!==g&&ws(l)};else if(ae){Ol=function(a,l,p,g){for(var S=l.child;S!==null;){if(S.tag===5){var b=S.stateNode;p&&g&&(b=mi(b,S.type,S.memoizedProps,S)),L(a,b)}else if(S.tag===6)b=S.stateNode,p&&g&&(b=Mt(b,S.memoizedProps,S)),L(a,b);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)b=S.child,b!==null&&(b.return=S),Ol(a,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var Rg=function(a,l,p,g){for(var S=l.child;S!==null;){if(S.tag===5){var b=S.stateNode;p&&g&&(b=mi(b,S.type,S.memoizedProps,S)),Nn(a,b)}else if(S.tag===6)b=S.stateNode,p&&g&&(b=Mt(b,S.memoizedProps,S)),Nn(a,b);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)b=S.child,b!==null&&(b.return=S),Rg(a,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};kl=function(a,l){var p=l.stateNode;if(!Pg(a,l)){a=p.containerInfo;var g=Qr(a);Rg(g,l,!1,!1),p.pendingChildren=g,ws(l),Fn(a,g)}},vc=function(a,l,p,g,S){var b=a.stateNode,I=a.memoizedProps;if((a=Pg(a,l))&&I===g)l.stateNode=b;else{var G=l.stateNode,re=Ts(Ur.current),pe=null;I!==g&&(pe=ee(G,p,I,g,S,re)),a&&pe===null?l.stateNode=b:(b=Ls(b,pe,p,I,g,l,a,G),K(b,p,g,S,re)&&ws(l),l.stateNode=b,a?ws(l):Ol(b,l,!1,!1))}},yc=function(a,l,p,g){p!==g?(a=Ts(ia.current),p=Ts(Ur.current),l.stateNode=ie(g,a,p,l),ws(l)):l.stateNode=a.stateNode}}else kl=function(){},vc=function(){},yc=function(){};function Al(a,l){if(!Pt)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function kn(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,g=0;if(l)for(var S=a.child;S!==null;)p|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)p|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=g,a.childLanes=p,l}function bT(a,l,p){var g=l.pendingProps;switch(kf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(l),null;case 1:return cn(l.type)&&Jr(),kn(l),null;case 3:return g=l.stateNode,oa(),at(un),at(on),Uf(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(yl(l)?ws(l):a===null||a.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,es!==null&&(cd(es),es=null))),kl(a,l),kn(l),null;case 5:Rf(l),p=Ts(ia.current);var S=l.type;if(a!==null&&l.stateNode!=null)vc(a,l,S,g,p),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(o(166));return kn(l),null}if(a=Ts(Ur.current),yl(l)){if(!Ee)throw Error(o(175));a=hr(l.stateNode,l.type,l.memoizedProps,p,a,l,!vl),l.updateQueue=a,a!==null&&ws(l)}else{var b=N(S,g,p,a,l);Ol(b,l,!1,!1),l.stateNode=b,K(b,S,g,p,a)&&ws(l)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return kn(l),null;case 6:if(a&&l.stateNode!=null)yc(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(o(166));if(a=Ts(ia.current),p=Ts(Ur.current),yl(l)){if(!Ee)throw Error(o(176));if(a=l.stateNode,g=l.memoizedProps,(p=zs(a,g,l,!vl))&&(S=yr,S!==null))switch(b=(S.mode&1)!==0,S.tag){case 3:ll(S.stateNode.containerInfo,a,g,b);break;case 5:ul(S.type,S.memoizedProps,S.stateNode,a,g,b)}p&&ws(l)}else l.stateNode=ie(g,a,p,l)}return kn(l),null;case 13:if(at(Ut),g=l.memoizedState,Pt&&Tr!==null&&l.mode&1&&!(l.flags&128)){for(a=Tr;a;)a=Bt(a);return ra(),l.flags|=98560,l}if(g!==null&&g.dehydrated!==null){if(g=yl(l),a===null){if(!g)throw Error(o(318));if(!Ee)throw Error(o(344));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));wf(a,l)}else ra(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;return kn(l),null}return es!==null&&(cd(es),es=null),l.flags&128?(l.lanes=p,l):(g=g!==null,p=!1,a===null?yl(l):p=a.memoizedState!==null,g&&!p&&(l.child.flags|=8192,l.mode&1&&(a===null||Ut.current&1?an===0&&(an=3):fd())),l.updateQueue!==null&&(l.flags|=4),kn(l),null);case 4:return oa(),kl(a,l),a===null&&$(l.stateNode.containerInfo),kn(l),null;case 10:return fn(l.type._context),kn(l),null;case 17:return cn(l.type)&&Jr(),kn(l),null;case 19:if(at(Ut),S=l.memoizedState,S===null)return kn(l),null;if(g=(l.flags&128)!==0,b=S.rendering,b===null)if(g)Al(S,!1);else{if(an!==0||a!==null&&a.flags&128)for(a=l.child;a!==null;){if(b=cc(a),b!==null){for(l.flags|=128,Al(S,!1),a=b.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),l.subtreeFlags=0,a=p,g=l.child;g!==null;)p=g,S=a,p.flags&=14680066,b=p.alternate,b===null?(p.childLanes=0,p.lanes=S,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=b.childLanes,p.lanes=b.lanes,p.child=b.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=b.memoizedProps,p.memoizedState=b.memoizedState,p.updateQueue=b.updateQueue,p.type=b.type,S=b.dependencies,p.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),g=g.sibling;return ct(Ut,Ut.current&1|2),l.child}a=a.sibling}S.tail!==null&&It()>od&&(l.flags|=128,g=!0,Al(S,!1),l.lanes=4194304)}else{if(!g)if(a=cc(b),a!==null){if(l.flags|=128,g=!0,a=a.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),Al(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Pt)return kn(l),null}else 2*It()-S.renderingStartTime>od&&p!==1073741824&&(l.flags|=128,g=!0,Al(S,!1),l.lanes=4194304);S.isBackwards?(b.sibling=l.child,l.child=b):(a=S.last,a!==null?a.sibling=b:l.child=b,S.last=b)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=It(),l.sibling=null,a=Ut.current,ct(Ut,g?a&1|2:a&1),l):(kn(l),null);case 22:case 23:return hd(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&l.mode&1?wr&1073741824&&(kn(l),oe&&l.subtreeFlags&6&&(l.flags|=8192)):kn(l),null;case 24:return null;case 25:return null}throw Error(o(156,l.tag))}var OT=u.ReactCurrentOwner,Sr=!1;function Wn(a,l,p,g){l.child=a===null?ag(l,null,p,g):sa(l,a.child,p,g)}function Ig(a,l,p,g,S){p=p.render;var b=l.ref;return qt(l,S),g=Ff(a,l,p,g,b,S),p=Lf(),a!==null&&!Sr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Zs(a,l,S)):(Pt&&p&&Of(l),l.flags|=1,Wn(a,l,g,S),l.child)}function Ug(a,l,p,g,S){if(a===null){var b=p.type;return typeof b=="function"&&!dd(b)&&b.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=b,Ng(a,l,b,g,S)):(a=Bc(p.type,null,g,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(b=a.child,!(a.lanes&S)){var I=b.memoizedProps;if(p=p.compare,p=p!==null?p:no,p(I,g)&&a.ref===l.ref)return Zs(a,l,S)}return l.flags|=1,a=Ci(b,g),a.ref=l.ref,a.return=l,l.child=a}function Ng(a,l,p,g,S){if(a!==null&&no(a.memoizedProps,g)&&a.ref===l.ref)if(Sr=!1,(a.lanes&S)!==0)a.flags&131072&&(Sr=!0);else return l.lanes=a.lanes,Zs(a,l,S);return Hf(a,l,p,g,S)}function Fg(a,l,p){var g=l.pendingProps,S=g.children,b=a!==null?a.memoizedState:null;if(g.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null},ct(la,wr),wr|=p;else if(p&1073741824)l.memoizedState={baseLanes:0,cachePool:null},g=b!==null?b.baseLanes:p,ct(la,wr),wr|=g;else return a=b!==null?b.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null},l.updateQueue=null,ct(la,wr),wr|=a,null;else b!==null?(g=b.baseLanes|p,l.memoizedState=null):g=p,ct(la,wr),wr|=g;return Wn(a,l,S,p),l.child}function Lg(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Hf(a,l,p,g,S){var b=cn(p)?gs:on.current;return b=Dr(l,b),qt(l,S),p=Ff(a,l,p,g,b,S),g=Lf(),a!==null&&!Sr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Zs(a,l,S)):(Pt&&g&&Of(l),l.flags|=1,Wn(a,l,p,S),l.child)}function zg(a,l,p,g,S){if(cn(p)){var b=!0;gi(l)}else b=!1;if(qt(l,S),l.stateNode===null)a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2),$m(l,p,g),bf(l,p,g,S),g=!0;else if(a===null){var I=l.stateNode,G=l.memoizedProps;I.props=G;var re=I.context,pe=p.contextType;typeof pe=="object"&&pe!==null?pe=Yt(pe):(pe=cn(p)?gs:on.current,pe=Dr(l,pe));var xe=p.getDerivedStateFromProps,Le=typeof xe=="function"||typeof I.getSnapshotBeforeUpdate=="function";Le||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(G!==g||re!==pe)&&eg(l,I,g,pe),yi=!1;var Me=l.memoizedState;I.state=Me,ic(l,g,I,S),re=l.memoizedState,G!==g||Me!==re||un.current||yi?(typeof xe=="function"&&(Cf(l,p,xe,g),re=l.memoizedState),(G=yi||Jm(l,p,G,g,Me,re,pe))?(Le||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(l.flags|=4194308)):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=re),I.props=g,I.state=re,I.context=pe,g=G):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{I=l.stateNode,Xm(a,l),G=l.memoizedProps,pe=l.type===l.elementType?G:Vn(l.type,G),I.props=pe,Le=l.pendingProps,Me=I.context,re=p.contextType,typeof re=="object"&&re!==null?re=Yt(re):(re=cn(p)?gs:on.current,re=Dr(l,re));var _t=p.getDerivedStateFromProps;(xe=typeof _t=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(G!==Le||Me!==re)&&eg(l,I,g,re),yi=!1,Me=l.memoizedState,I.state=Me,ic(l,g,I,S);var ke=l.memoizedState;G!==Le||Me!==ke||un.current||yi?(typeof _t=="function"&&(Cf(l,p,_t,g),ke=l.memoizedState),(pe=yi||Jm(l,p,pe,g,Me,ke,re)||!1)?(xe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(g,ke,re),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(g,ke,re)),typeof I.componentDidUpdate=="function"&&(l.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof I.componentDidUpdate!="function"||G===a.memoizedProps&&Me===a.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Me===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ke),I.props=g,I.state=ke,I.context=re,g=pe):(typeof I.componentDidUpdate!="function"||G===a.memoizedProps&&Me===a.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Me===a.memoizedState||(l.flags|=1024),g=!1)}return jf(a,l,p,g,b,S)}function jf(a,l,p,g,S,b){Lg(a,l);var I=(l.flags&128)!==0;if(!g&&!I)return S&&pr(l,p,!1),Zs(a,l,b);g=l.stateNode,OT.current=l;var G=I&&typeof p.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&I?(l.child=sa(l,a.child,null,b),l.child=sa(l,null,G,b)):Wn(a,l,G,b),l.memoizedState=g.state,S&&pr(l,p,!0),l.child}function Bg(a){var l=a.stateNode;l.pendingContext?Xo(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Xo(a,l.context,!1),Pf(a,l.containerInfo)}function Vg(a,l,p,g,S){return ra(),Df(S),l.flags|=256,Wn(a,l,p,g),l.child}var Tc={dehydrated:null,treeContext:null,retryLane:0};function Sc(a){return{baseLanes:a,cachePool:null}}function Gg(a,l,p){var g=l.pendingProps,S=Ut.current,b=!1,I=(l.flags&128)!==0,G;if((G=I)||(G=a!==null&&a.memoizedState===null?!1:(S&2)!==0),G?(b=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),ct(Ut,S&1),a===null)return Mf(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(l.mode&1?jt(a)?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(S=g.children,a=g.fallback,b?(g=l.mode,b=l.child,S={mode:"hidden",children:S},!(g&1)&&b!==null?(b.childLanes=0,b.pendingProps=S):b=Vc(S,g,0,null),a=fo(a,g,p,null),b.return=l,a.return=l,b.sibling=a,l.child=b,l.child.memoizedState=Sc(p),l.memoizedState=Tc,a):qf(l,S));if(S=a.memoizedState,S!==null){if(G=S.dehydrated,G!==null){if(I)return l.flags&256?(l.flags&=-257,wc(a,l,p,Error(o(422)))):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(b=g.fallback,S=l.mode,g=Vc({mode:"visible",children:g.children},S,0,null),b=fo(b,S,p,null),b.flags|=2,g.return=l,b.return=l,g.sibling=b,l.child=g,l.mode&1&&sa(l,a.child,null,p),l.child.memoizedState=Sc(p),l.memoizedState=Tc,b);if(!(l.mode&1))l=wc(a,l,p,null);else if(jt(G))l=wc(a,l,p,Error(o(419)));else if(g=(p&a.childLanes)!==0,Sr||g){if(g=nn,g!==null){switch(p&-p){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}g=b&(g.suspendedLanes|p)?0:b,g!==0&&g!==S.retryLane&&(S.retryLane=g,Fr(a,g,-1))}fd(),l=wc(a,l,p,Error(o(421)))}else ot(G)?(l.flags|=128,l.child=a.child,l=BT.bind(null,a),Qn(G,l),l=null):(p=S.treeContext,Ee&&(Tr=ds(G),yr=l,Pt=!0,es=null,vl=!1,p!==null&&(Rr[Ir++]=qs,Rr[Ir++]=Ys,Rr[Ir++]=so,qs=p.id,Ys=p.overflow,so=l)),l=qf(l,l.pendingProps.children),l.flags|=4096);return l}return b?(g=Hg(a,l,g.children,g.fallback,p),b=l.child,S=a.child.memoizedState,b.memoizedState=S===null?Sc(p):{baseLanes:S.baseLanes|p,cachePool:null},b.childLanes=a.childLanes&~p,l.memoizedState=Tc,g):(p=Wg(a,l,g.children,p),l.memoizedState=null,p)}return b?(g=Hg(a,l,g.children,g.fallback,p),b=l.child,S=a.child.memoizedState,b.memoizedState=S===null?Sc(p):{baseLanes:S.baseLanes|p,cachePool:null},b.childLanes=a.childLanes&~p,l.memoizedState=Tc,g):(p=Wg(a,l,g.children,p),l.memoizedState=null,p)}function qf(a,l){return l=Vc({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Wg(a,l,p,g){var S=a.child;return a=S.sibling,p=Ci(S,{mode:"visible",children:p}),!(l.mode&1)&&(p.lanes=g),p.return=l,p.sibling=null,a!==null&&(g=l.deletions,g===null?(l.deletions=[a],l.flags|=16):g.push(a)),l.child=p}function Hg(a,l,p,g,S){var b=l.mode;a=a.child;var I=a.sibling,G={mode:"hidden",children:p};return!(b&1)&&l.child!==a?(p=l.child,p.childLanes=0,p.pendingProps=G,l.deletions=null):(p=Ci(a,G),p.subtreeFlags=a.subtreeFlags&14680064),I!==null?g=Ci(I,g):(g=fo(g,b,S,null),g.flags|=2),g.return=l,p.return=l,p.sibling=g,l.child=p,g}function wc(a,l,p,g){return g!==null&&Df(g),sa(l,a.child,null,p),a=qf(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function jg(a,l,p){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),Gn(a.return,l,p)}function Yf(a,l,p,g,S){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:S}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=p,b.tailMode=S)}function qg(a,l,p){var g=l.pendingProps,S=g.revealOrder,b=g.tail;if(Wn(a,l,g.children,p),g=Ut.current,g&2)g=g&1|2,l.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jg(a,p,l);else if(a.tag===19)jg(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(ct(Ut,g),!(l.mode&1))l.memoizedState=null;else switch(S){case"forwards":for(p=l.child,S=null;p!==null;)a=p.alternate,a!==null&&cc(a)===null&&(S=p),p=p.sibling;p=S,p===null?(S=l.child,l.child=null):(S=p.sibling,p.sibling=null),Yf(l,!1,S,p,b);break;case"backwards":for(p=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&cc(a)===null){l.child=S;break}a=S.sibling,S.sibling=p,p=S,S=a}Yf(l,!0,p,null,b);break;case"together":Yf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Zs(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),ua|=l.lanes,!(p&l.childLanes))return null;if(a!==null&&l.child!==a.child)throw Error(o(153));if(l.child!==null){for(a=l.child,p=Ci(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=Ci(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function kT(a,l,p){switch(l.tag){case 3:Bg(l),ra();break;case 5:lg(l);break;case 1:cn(l.type)&&gi(l);break;case 4:Pf(l,l.stateNode.containerInfo);break;case 10:rc(l,l.type._context,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(ct(Ut,Ut.current&1),l.flags|=128,null):p&l.child.childLanes?Gg(a,l,p):(ct(Ut,Ut.current&1),a=Zs(a,l,p),a!==null?a.sibling:null);ct(Ut,Ut.current&1);break;case 19:if(g=(p&l.childLanes)!==0,a.flags&128){if(g)return qg(a,l,p);l.flags|=128}var S=l.memoizedState;if(S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ct(Ut,Ut.current),g)break;return null;case 22:case 23:return l.lanes=0,Fg(a,l,p)}return Zs(a,l,p)}function AT(a,l){switch(kf(l),l.tag){case 1:return cn(l.type)&&Jr(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return oa(),at(un),at(on),Uf(),a=l.flags,a&65536&&!(a&128)?(l.flags=a&-65537|128,l):null;case 5:return Rf(l),null;case 13:if(at(Ut),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(o(340));ra()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return at(Ut),null;case 4:return oa(),null;case 10:return fn(l.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var xc=!1,ao=!1,MT=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ec(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(g){er(a,l,g)}else p.current=null}function Xf(a,l,p){try{p()}catch(g){er(a,l,g)}}var Yg=!1;function DT(a,l){for(z(a.containerInfo),_e=l;_e!==null;)if(a=_e,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,_e=l;else for(;_e!==null;){a=_e;try{var p=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,S=p.memoizedState,b=a.stateNode,I=b.getSnapshotBeforeUpdate(a.elementType===a.type?g:Vn(a.type,g),S);b.__reactInternalSnapshotBeforeUpdate=I}break;case 3:oe&&Zr(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(G){er(a,a.return,G)}if(l=a.sibling,l!==null){l.return=a.return,_e=l;break}_e=a.return}return p=Yg,Yg=!1,p}function lo(a,l,p){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&a)===a){var b=S.destroy;S.destroy=void 0,b!==void 0&&Xf(l,p,b)}S=S.next}while(S!==g)}}function Ml(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var g=p.create;p.destroy=g()}p=p.next}while(p!==l)}}function Zf(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=X(p);break;default:a=p}typeof l=="function"?l(a):l.current=a}}function Xg(a,l,p){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(eo,l)}catch{}switch(l.tag){case 0:case 11:case 14:case 15:if(a=l.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var g=a=a.next;do{var S=g,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&Xf(l,p,b),g=g.next}while(g!==a)}break;case 1:if(Ec(l,p),a=l.stateNode,typeof a.componentWillUnmount=="function")try{a.props=l.memoizedProps,a.state=l.memoizedState,a.componentWillUnmount()}catch(I){er(l,p,I)}break;case 5:Ec(l,p);break;case 4:oe?e_(a,l,p):ae&&ae&&(l=l.stateNode.containerInfo,p=Qr(l),Ot(l,p))}}function Zg(a,l,p){for(var g=l;;)if(Xg(a,g,p),g.child===null||oe&&g.tag===4){if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else g.child.return=g,g=g.child}function Qg(a){var l=a.alternate;l!==null&&(a.alternate=null,Qg(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&ve(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Kg(a){return a.tag===5||a.tag===3||a.tag===4}function Jg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Kg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $g(a){if(oe){e:{for(var l=a.return;l!==null;){if(Kg(l))break e;l=l.return}throw Error(o(160))}var p=l;switch(p.tag){case 5:l=p.stateNode,p.flags&32&&(ut(l),p.flags&=-33),p=Jg(a),Kf(a,p,l);break;case 3:case 4:l=p.stateNode.containerInfo,p=Jg(a),Qf(a,p,l);break;default:throw Error(o(161))}}}function Qf(a,l,p){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?Ye(p,a,l):We(p,a);else if(g!==4&&(a=a.child,a!==null))for(Qf(a,l,p),a=a.sibling;a!==null;)Qf(a,l,p),a=a.sibling}function Kf(a,l,p){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?gt(p,a,l):Ae(p,a);else if(g!==4&&(a=a.child,a!==null))for(Kf(a,l,p),a=a.sibling;a!==null;)Kf(a,l,p),a=a.sibling}function e_(a,l,p){for(var g=l,S=!1,b,I;;){if(!S){S=g.return;e:for(;;){if(S===null)throw Error(o(160));switch(b=S.stateNode,S.tag){case 5:I=!1;break e;case 3:b=b.containerInfo,I=!0;break e;case 4:b=b.containerInfo,I=!0;break e}S=S.return}S=!0}if(g.tag===5||g.tag===6)Zg(a,g,p),I?it(b,g.stateNode):Ie(b,g.stateNode);else if(g.tag===18)I?Ku(b,g.stateNode):xf(b,g.stateNode);else if(g.tag===4){if(g.child!==null){b=g.stateNode.containerInfo,I=!0,g.child.return=g,g=g.child;continue}}else if(Xg(a,g,p),g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return,g.tag===4&&(S=!1)}g.sibling.return=g.return,g=g.sibling}}function Jf(a,l){if(oe){switch(l.tag){case 0:case 11:case 14:case 15:lo(3,l,l.return),Ml(3,l),lo(5,l,l.return);return;case 1:return;case 5:var p=l.stateNode;if(p!=null){var g=l.memoizedProps;a=a!==null?a.memoizedProps:g;var S=l.type,b=l.updateQueue;l.updateQueue=null,b!==null&&Be(p,b,S,a,g,l)}return;case 6:if(l.stateNode===null)throw Error(o(162));p=l.memoizedProps,et(l.stateNode,a!==null?a.memoizedProps:p,p);return;case 3:Ee&&a!==null&&a.memoizedState.isDehydrated&&Qi(l.stateNode.containerInfo);return;case 12:return;case 13:Cc(l);return;case 19:Cc(l);return;case 17:return}throw Error(o(163))}switch(l.tag){case 0:case 11:case 14:case 15:lo(3,l,l.return),Ml(3,l),lo(5,l,l.return);return;case 12:return;case 13:Cc(l);return;case 19:Cc(l);return;case 3:Ee&&a!==null&&a.memoizedState.isDehydrated&&Qi(l.stateNode.containerInfo);break;case 22:case 23:return}e:if(ae){switch(l.tag){case 1:case 5:case 6:break e;case 3:case 4:l=l.stateNode,Ot(l.containerInfo,l.pendingChildren);break e}throw Error(o(163))}}function Cc(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new MT),l.forEach(function(g){var S=VT.bind(null,a,g);p.has(g)||(p.add(g),g.then(S,S))})}}function PT(a,l){for(_e=l;_e!==null;){l=_e;var p=l.deletions;if(p!==null)for(var g=0;g<p.length;g++){var S=p[g];try{var b=a;oe?e_(b,S,l):Zg(b,S,l);var I=S.alternate;I!==null&&(I.return=null),S.return=null}catch(Oe){er(S,l,Oe)}}if(p=l.child,l.subtreeFlags&12854&&p!==null)p.return=l,_e=p;else for(;_e!==null;){l=_e;try{var G=l.flags;if(G&32&&oe&&ut(l.stateNode),G&512){var re=l.alternate;if(re!==null){var pe=re.ref;pe!==null&&(typeof pe=="function"?pe(null):pe.current=null)}}if(G&8192)switch(l.tag){case 13:if(l.memoizedState!==null){var xe=l.alternate;(xe===null||xe.memoizedState===null)&&(id=It())}break;case 22:var Le=l.memoizedState!==null,Me=l.alternate,_t=Me!==null&&Me.memoizedState!==null;if(p=l,oe){e:if(g=p,S=Le,b=null,oe)for(var ke=g;;){if(ke.tag===5){if(b===null){b=ke;var An=ke.stateNode;S?zt(An):bt(ke.stateNode,ke.memoizedProps)}}else if(ke.tag===6){if(b===null){var zr=ke.stateNode;S?je(zr):yn(zr,ke.memoizedProps)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===g)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===g)break;for(;ke.sibling===null;){if(ke.return===null||ke.return===g)break e;b===ke&&(b=null),ke=ke.return}b===ke&&(b=null),ke.sibling.return=ke.return,ke=ke.sibling}}if(Le&&!_t&&p.mode&1){_e=p;for(var Q=p.child;Q!==null;){for(p=_e=Q;_e!==null;){g=_e;var j=g.child;switch(g.tag){case 0:case 11:case 14:case 15:lo(4,g,g.return);break;case 1:Ec(g,g.return);var te=g.stateNode;if(typeof te.componentWillUnmount=="function"){var ye=g.return;try{te.props=g.memoizedProps,te.state=g.memoizedState,te.componentWillUnmount()}catch(Oe){er(g,ye,Oe)}}break;case 5:Ec(g,g.return);break;case 22:if(g.memoizedState!==null){r_(p);continue}}j!==null?(j.return=g,_e=j):r_(p)}Q=Q.sibling}}}switch(G&4102){case 2:$g(l),l.flags&=-3;break;case 6:$g(l),l.flags&=-3,Jf(l.alternate,l);break;case 4096:l.flags&=-4097;break;case 4100:l.flags&=-4097,Jf(l.alternate,l);break;case 4:Jf(l.alternate,l)}}catch(Oe){er(l,l.return,Oe)}if(p=l.sibling,p!==null){p.return=l.return,_e=p;break}_e=l.return}}}function RT(a,l,p){_e=a,t_(a)}function t_(a,l,p){for(var g=(a.mode&1)!==0;_e!==null;){var S=_e,b=S.child;if(S.tag===22&&g){var I=S.memoizedState!==null||xc;if(!I){var G=S.alternate,re=G!==null&&G.memoizedState!==null||ao;G=xc;var pe=ao;if(xc=I,(ao=re)&&!pe)for(_e=S;_e!==null;)I=_e,re=I.child,I.tag===22&&I.memoizedState!==null?s_(S):re!==null?(re.return=I,_e=re):s_(S);for(;b!==null;)_e=b,t_(b),b=b.sibling;_e=S,xc=G,ao=pe}n_(a)}else S.subtreeFlags&8772&&b!==null?(b.return=S,_e=b):n_(a)}}function n_(a){for(;_e!==null;){var l=_e;if(l.flags&8772){var p=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:ao||Ml(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!ao)if(p===null)g.componentDidMount();else{var S=l.elementType===l.type?p.memoizedProps:Vn(l.type,p.memoizedProps);g.componentDidUpdate(S,p.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&Qm(l,b,g);break;case 3:var I=l.updateQueue;if(I!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=X(l.child.stateNode);break;case 1:p=l.child.stateNode}Qm(l,I,p)}break;case 5:var G=l.stateNode;p===null&&l.flags&4&&Lt(G,l.type,l.memoizedProps,l);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&l.memoizedState===null){var re=l.alternate;if(re!==null){var pe=re.memoizedState;if(pe!==null){var xe=pe.dehydrated;xe!==null&&al(xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ao||l.flags&512&&Zf(l)}catch(Le){er(l,l.return,Le)}}if(l===a){_e=null;break}if(p=l.sibling,p!==null){p.return=l.return,_e=p;break}_e=l.return}}function r_(a){for(;_e!==null;){var l=_e;if(l===a){_e=null;break}var p=l.sibling;if(p!==null){p.return=l.return,_e=p;break}_e=l.return}}function s_(a){for(;_e!==null;){var l=_e;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Ml(4,l)}catch(re){er(l,p,re)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var S=l.return;try{g.componentDidMount()}catch(re){er(l,S,re)}}var b=l.return;try{Zf(l)}catch(re){er(l,b,re)}break;case 5:var I=l.return;try{Zf(l)}catch(re){er(l,I,re)}}}catch(re){er(l,l.return,re)}if(l===a){_e=null;break}var G=l.sibling;if(G!==null){G.return=l.return,_e=G;break}_e=l.return}}var bc=0,Oc=1,kc=2,Ac=3,Mc=4;if(typeof Symbol=="function"&&Symbol.for){var Dl=Symbol.for;bc=Dl("selector.component"),Oc=Dl("selector.has_pseudo_class"),kc=Dl("selector.role"),Ac=Dl("selector.test_id"),Mc=Dl("selector.text")}function $f(a){var l=Re(a);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(o(364));return l}if(a=ue(a),a===null)throw Error(o(362));return a.stateNode.current}function ed(a,l){switch(l.$$typeof){case bc:if(a.type===l.value)return!0;break;case Oc:e:{l=l.value,a=[a,0];for(var p=0;p<a.length;){var g=a[p++],S=a[p++],b=l[S];if(g.tag!==5||!we(g)){for(;b!=null&&ed(g,b);)S++,b=l[S];if(S===l.length){l=!0;break e}else for(g=g.child;g!==null;)a.push(g,S),g=g.sibling}}l=!1}return l;case kc:if(a.tag===5&&Se(a.stateNode,l.value))return!0;break;case Mc:if((a.tag===5||a.tag===6)&&(a=Te(a),a!==null&&0<=a.indexOf(l.value)))return!0;break;case Ac:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function td(a){switch(a.$$typeof){case bc:return"<"+(A(a.value)||"Unknown")+">";case Oc:return":has("+(td(a)||"")+")";case kc:return'[role="'+a.value+'"]';case Mc:return'"'+a.value+'"';case Ac:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function i_(a,l){var p=[];a=[a,0];for(var g=0;g<a.length;){var S=a[g++],b=a[g++],I=l[b];if(S.tag!==5||!we(S)){for(;I!=null&&ed(S,I);)b++,I=l[b];if(b===l.length)p.push(S);else for(S=S.child;S!==null;)a.push(S,b),S=S.sibling}}return p}function nd(a,l){if(!de)throw Error(o(363));a=$f(a),a=i_(a,l),l=[],a=Array.from(a);for(var p=0;p<a.length;){var g=a[p++];if(g.tag===5)we(g)||l.push(g.stateNode);else for(g=g.child;g!==null;)a.push(g),g=g.sibling}return l}var IT=Math.ceil,Dc=u.ReactCurrentDispatcher,rd=u.ReactCurrentOwner,Xt=u.ReactCurrentBatchConfig,Xe=0,nn=null,rn=null,Sn=0,wr=0,la=fr(0),an=0,Pl=null,ua=0,Pc=0,sd=0,Rl=null,Jn=null,id=0,od=1/0;function ca(){od=It()+500}var Rc=!1,ad=null,Si=null,Ic=!1,wi=null,Uc=0,Il=0,ld=null,Nc=-1,Fc=0;function Hn(){return Xe&6?It():Nc!==-1?Nc:Nc=It()}function xi(a){return a.mode&1?Xe&2&&Sn!==0?Sn&-Sn:to.transition!==null?(Fc===0&&(a=Bs,Bs<<=1,!(Bs&4194240)&&(Bs=64),Fc=a),Fc):(a=Qe,a!==0?a:ce()):1}function Fr(a,l,p){if(50<Il)throw Il=0,ld=null,Error(o(185));var g=Lc(a,l);return g===null?null:(_s(g,l,p),(!(Xe&2)||g!==nn)&&(g===nn&&(!(Xe&2)&&(Pc|=l),an===4&&Ei(g,Sn)),$n(g,p),l===1&&Xe===0&&!(a.mode&1)&&(ca(),ys&&Kn())),g)}function Lc(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}function $n(a,l){var p=a.callbackNode;hl(a,l);var g=Ji(a,a===nn?Sn:0);if(g===0)p!==null&&Jo(p),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(p!=null&&Jo(p),l===1)a.tag===0?_l(a_.bind(null,a)):gl(a_.bind(null,a)),le?fe(function(){Xe===0&&Kn()}):Hs($i,Kn),p=null;else{switch(fl(g)){case 1:p=$i;break;case 4:p=tc;break;case 16:p=zn;break;case 536870912:p=pl;break;default:p=zn}p=g_(p,o_.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function o_(a,l){if(Nc=-1,Fc=0,Xe&6)throw Error(o(327));var p=a.callbackNode;if(ho()&&a.callbackNode!==p)return null;var g=Ji(a,a===nn?Sn:0);if(g===0)return null;if(g&30||g&a.expiredLanes||l)l=zc(a,g);else{l=g;var S=Xe;Xe|=2;var b=c_();(nn!==a||Sn!==l)&&(ca(),uo(a,l));do try{FT();break}catch(G){u_(a,G)}while(1);ea(),Dc.current=b,Xe=S,rn!==null?l=0:(nn=null,Sn=0,l=an)}if(l!==0){if(l===2&&(S=Ws(a),S!==0&&(g=S,l=ud(a,S))),l===1)throw p=Pl,uo(a,0),Ei(a,g),$n(a,It()),p;if(l===6)Ei(a,g);else{if(S=a.current.alternate,!(g&30)&&!UT(S)&&(l=zc(a,g),l===2&&(b=Ws(a),b!==0&&(g=b,l=ud(a,b))),l===1))throw p=Pl,uo(a,0),Ei(a,g),$n(a,It()),p;switch(a.finishedWork=S,a.finishedLanes=g,l){case 0:case 1:throw Error(o(345));case 2:co(a,Jn);break;case 3:if(Ei(a,g),(g&130023424)===g&&(l=id+500-It(),10<l)){if(Ji(a,0)!==0)break;if(S=a.suspendedLanes,(S&g)!==g){Hn(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=ne(co.bind(null,a,Jn),l);break}co(a,Jn);break;case 4:if(Ei(a,g),(g&4194240)===g)break;for(l=a.eventTimes,S=-1;0<g;){var I=31-mr(g);b=1<<I,I=l[I],I>S&&(S=I),g&=~b}if(g=S,g=It()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*IT(g/1960))-g,10<g){a.timeoutHandle=ne(co.bind(null,a,Jn),g);break}co(a,Jn);break;case 5:co(a,Jn);break;default:throw Error(o(329))}}}return $n(a,It()),a.callbackNode===p?o_.bind(null,a):null}function ud(a,l){var p=Rl;return a.current.memoizedState.isDehydrated&&(uo(a,l).flags|=256),a=zc(a,l),a!==2&&(l=Jn,Jn=p,l!==null&&cd(l)),a}function cd(a){Jn===null?Jn=a:Jn.push.apply(Jn,a)}function UT(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var g=0;g<p.length;g++){var S=p[g],b=S.getSnapshot;S=S.value;try{if(!_r(b(),S))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ei(a,l){for(l&=~sd,l&=~Pc,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-mr(l),g=1<<p;a[p]=-1,l&=~g}}function a_(a){if(Xe&6)throw Error(o(327));ho();var l=Ji(a,0);if(!(l&1))return $n(a,It()),null;var p=zc(a,l);if(a.tag!==0&&p===2){var g=Ws(a);g!==0&&(l=g,p=ud(a,g))}if(p===1)throw p=Pl,uo(a,0),Ei(a,l),$n(a,It()),p;if(p===6)throw Error(o(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,co(a,Jn),$n(a,It()),null}function l_(a){wi!==null&&wi.tag===0&&!(Xe&6)&&ho();var l=Xe;Xe|=1;var p=Xt.transition,g=Qe;try{if(Xt.transition=null,Qe=1,a)return a()}finally{Qe=g,Xt.transition=p,Xe=l,!(Xe&6)&&Kn()}}function hd(){wr=la.current,at(la)}function uo(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==me&&(a.timeoutHandle=me,Z(p)),rn!==null)for(p=rn.return;p!==null;){var g=p;switch(kf(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Jr();break;case 3:oa(),at(un),at(on),Uf();break;case 5:Rf(g);break;case 4:oa();break;case 13:at(Ut);break;case 19:at(Ut);break;case 10:fn(g.type._context);break;case 22:case 23:hd()}p=p.return}if(nn=a,rn=a=Ci(a.current,null),Sn=wr=l,an=0,Pl=null,sd=Pc=ua=0,Jn=Rl=null,vr!==null){for(l=0;l<vr.length;l++)if(p=vr[l],g=p.interleaved,g!==null){p.interleaved=null;var S=g.next,b=p.pending;if(b!==null){var I=b.next;b.next=S,g.next=I}p.pending=g}vr=null}return a}function u_(a,l){do{var p=rn;try{if(ea(),hc.current=_c,fc){for(var g=Vt.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}fc=!1}if(aa=0,dn=bn=Vt=null,xl=!1,El=0,rd.current=null,p===null||p.return===null){an=1,Pl=l,rn=null;break}e:{var b=a,I=p.return,G=p,re=l;if(l=Sn,G.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var pe=re,xe=G,Le=xe.tag;if(!(xe.mode&1)&&(Le===0||Le===11||Le===15)){var Me=xe.alternate;Me?(xe.updateQueue=Me.updateQueue,xe.memoizedState=Me.memoizedState,xe.lanes=Me.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var _t=Mg(I);if(_t!==null){_t.flags&=-257,Dg(_t,I,G,b,l),_t.mode&1&&Ag(b,pe,l),l=_t,re=pe;var ke=l.updateQueue;if(ke===null){var An=new Set;An.add(re),l.updateQueue=An}else ke.add(re);break e}else{if(!(l&1)){Ag(b,pe,l),fd();break e}re=Error(o(426))}}else if(Pt&&G.mode&1){var zr=Mg(I);if(zr!==null){!(zr.flags&65536)&&(zr.flags|=256),Dg(zr,I,G,b,l),Df(re);break e}}b=re,an!==4&&(an=2),Rl===null?Rl=[b]:Rl.push(b),re=Gf(re,G),G=I;do{switch(G.tag){case 3:G.flags|=65536,l&=-l,G.lanes|=l;var Q=Og(G,re,l);Zm(G,Q);break e;case 1:b=re;var j=G.type,te=G.stateNode;if(!(G.flags&128)&&(typeof j.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Si===null||!Si.has(te)))){G.flags|=65536,l&=-l,G.lanes|=l;var ye=kg(G,b,l);Zm(G,ye);break e}}G=G.return}while(G!==null)}f_(p)}catch(Oe){l=Oe,rn===p&&p!==null&&(rn=p=p.return);continue}break}while(1)}function c_(){var a=Dc.current;return Dc.current=_c,a===null?_c:a}function fd(){(an===0||an===3||an===2)&&(an=4),nn===null||!(ua&268435455)&&!(Pc&268435455)||Ei(nn,Sn)}function zc(a,l){var p=Xe;Xe|=2;var g=c_();nn===a&&Sn===l||uo(a,l);do try{NT();break}catch(S){u_(a,S)}while(1);if(ea(),Xe=p,Dc.current=g,rn!==null)throw Error(o(261));return nn=null,Sn=0,an}function NT(){for(;rn!==null;)h_(rn)}function FT(){for(;rn!==null&&!dl();)h_(rn)}function h_(a){var l=m_(a.alternate,a,wr);a.memoizedProps=a.pendingProps,l===null?f_(a):rn=l,rd.current=null}function f_(a){var l=a;do{var p=l.alternate;if(a=l.return,l.flags&32768){if(p=AT(p,l),p!==null){p.flags&=32767,rn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{an=6,rn=null;return}}else if(p=bT(p,l,wr),p!==null){rn=p;return}if(l=l.sibling,l!==null){rn=l;return}rn=l=a}while(l!==null);an===0&&(an=5)}function co(a,l){var p=Qe,g=Xt.transition;try{Xt.transition=null,Qe=1,LT(a,l,p)}finally{Xt.transition=g,Qe=p}return null}function LT(a,l,p){do ho();while(wi!==null);if(Xe&6)throw Error(o(327));var g=a.finishedWork,S=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(o(177));a.callbackNode=null,a.callbackPriority=0;var b=g.lanes|g.childLanes;if(_i(a,b),a===nn&&(rn=nn=null,Sn=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||Ic||(Ic=!0,g_(zn,function(){return ho(),null})),b=(g.flags&15990)!==0,g.subtreeFlags&15990||b){b=Xt.transition,Xt.transition=null;var I=Qe;Qe=1;var G=Xe;Xe|=4,rd.current=null,DT(a,g),PT(a,g),W(a.containerInfo),a.current=g,RT(g),ec(),Xe=G,Qe=I,Xt.transition=b}else a.current=g;if(Ic&&(Ic=!1,wi=a,Uc=S),b=a.pendingLanes,b===0&&(Si=null),ml(g.stateNode),$n(a,It()),l!==null)for(p=a.onRecoverableError,g=0;g<l.length;g++)p(l[g]);if(Rc)throw Rc=!1,a=ad,ad=null,a;return Uc&1&&a.tag!==0&&ho(),b=a.pendingLanes,b&1?a===ld?Il++:(Il=0,ld=a):Il=0,Kn(),null}function ho(){if(wi!==null){var a=fl(Uc),l=Xt.transition,p=Qe;try{if(Xt.transition=null,Qe=16>a?16:a,wi===null)var g=!1;else{if(a=wi,wi=null,Uc=0,Xe&6)throw Error(o(331));var S=Xe;for(Xe|=4,_e=a.current;_e!==null;){var b=_e,I=b.child;if(_e.flags&16){var G=b.deletions;if(G!==null){for(var re=0;re<G.length;re++){var pe=G[re];for(_e=pe;_e!==null;){var xe=_e;switch(xe.tag){case 0:case 11:case 15:lo(8,xe,b)}var Le=xe.child;if(Le!==null)Le.return=xe,_e=Le;else for(;_e!==null;){xe=_e;var Me=xe.sibling,_t=xe.return;if(Qg(xe),xe===pe){_e=null;break}if(Me!==null){Me.return=_t,_e=Me;break}_e=_t}}}var ke=b.alternate;if(ke!==null){var An=ke.child;if(An!==null){ke.child=null;do{var zr=An.sibling;An.sibling=null,An=zr}while(An!==null)}}_e=b}}if(b.subtreeFlags&2064&&I!==null)I.return=b,_e=I;else e:for(;_e!==null;){if(b=_e,b.flags&2048)switch(b.tag){case 0:case 11:case 15:lo(9,b,b.return)}var Q=b.sibling;if(Q!==null){Q.return=b.return,_e=Q;break e}_e=b.return}}var j=a.current;for(_e=j;_e!==null;){I=_e;var te=I.child;if(I.subtreeFlags&2064&&te!==null)te.return=I,_e=te;else e:for(I=j;_e!==null;){if(G=_e,G.flags&2048)try{switch(G.tag){case 0:case 11:case 15:Ml(9,G)}}catch(Oe){er(G,G.return,Oe)}if(G===I){_e=null;break e}var ye=G.sibling;if(ye!==null){ye.return=G.return,_e=ye;break e}_e=G.return}}if(Xe=S,Kn(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(eo,a)}catch{}g=!0}return g}finally{Qe=p,Xt.transition=l}}return!1}function d_(a,l,p){l=Gf(p,l),l=Og(a,l,1),Ti(a,l),l=Hn(),a=Lc(a,1),a!==null&&(_s(a,1,l),$n(a,l))}function er(a,l,p){if(a.tag===3)d_(a,a,p);else for(;l!==null;){if(l.tag===3){d_(l,a,p);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Si===null||!Si.has(g))){a=Gf(p,a),a=kg(l,a,1),Ti(l,a),a=Hn(),l=Lc(l,1),l!==null&&(_s(l,1,a),$n(l,a));break}}l=l.return}}function zT(a,l,p){var g=a.pingCache;g!==null&&g.delete(l),l=Hn(),a.pingedLanes|=a.suspendedLanes&p,nn===a&&(Sn&p)===p&&(an===4||an===3&&(Sn&130023424)===Sn&&500>It()-id?uo(a,0):sd|=p),$n(a,l)}function p_(a,l){l===0&&(a.mode&1?(l=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):l=1);var p=Hn();a=Lc(a,l),a!==null&&(_s(a,l,p),$n(a,p))}function BT(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),p_(a,p)}function VT(a,l){var p=0;switch(a.tag){case 13:var g=a.stateNode,S=a.memoizedState;S!==null&&(p=S.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(o(314))}g!==null&&g.delete(l),p_(a,p)}var m_;m_=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||un.current)Sr=!0;else{if(!(a.lanes&p)&&!(l.flags&128))return Sr=!1,kT(a,l,p);Sr=!!(a.flags&131072)}else Sr=!1,Pt&&l.flags&1048576&&tg(l,lc,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2),a=l.pendingProps;var S=Dr(l,on.current);qt(l,p),S=Ff(null,l,g,a,S,p);var b=Lf();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,cn(g)?(b=!0,gi(l)):b=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Ef(l),S.updater=oc,l.stateNode=S,S._reactInternals=l,bf(l,g,a,p),l=jf(null,l,g,!0,b,p)):(l.tag=0,Pt&&b&&Of(l),Wn(null,l,S,p),l=l.child),l;case 16:g=l.elementType;e:{switch(a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2),a=l.pendingProps,S=g._init,g=S(g._payload),l.type=g,S=l.tag=WT(g),a=Vn(g,a),S){case 0:l=Hf(null,l,g,a,p);break e;case 1:l=zg(null,l,g,a,p);break e;case 11:l=Ig(null,l,g,a,p);break e;case 14:l=Ug(null,l,g,Vn(g.type,a),p);break e}throw Error(o(306,g,""))}return l;case 0:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:Vn(g,S),Hf(a,l,g,S,p);case 1:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:Vn(g,S),zg(a,l,g,S,p);case 3:e:{if(Bg(l),a===null)throw Error(o(387));g=l.pendingProps,b=l.memoizedState,S=b.element,Xm(a,l),ic(l,g,null,p);var I=l.memoizedState;if(g=I.element,Ee&&b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:I.cache,transitions:I.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){S=Error(o(423)),l=Vg(a,l,g,p,S);break e}else if(g!==S){S=Error(o(424)),l=Vg(a,l,g,p,S);break e}else for(Ee&&(Tr=Tn(l.stateNode.containerInfo),yr=l,Pt=!0,es=null,vl=!1),p=ag(l,null,g,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ra(),g===S){l=Zs(a,l,p);break e}Wn(a,l,g,p)}l=l.child}return l;case 5:return lg(l),a===null&&Mf(l),g=l.type,S=l.pendingProps,b=a!==null?a.memoizedProps:null,I=S.children,Y(g,S)?I=null:b!==null&&Y(g,b)&&(l.flags|=32),Lg(a,l),Wn(a,l,I,p),l.child;case 6:return a===null&&Mf(l),null;case 13:return Gg(a,l,p);case 4:return Pf(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=sa(l,null,g,p):Wn(a,l,g,p),l.child;case 11:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:Vn(g,S),Ig(a,l,g,S,p);case 7:return Wn(a,l,l.pendingProps,p),l.child;case 8:return Wn(a,l,l.pendingProps.children,p),l.child;case 12:return Wn(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(g=l.type._context,S=l.pendingProps,b=l.memoizedProps,I=S.value,rc(l,g,I),b!==null)if(_r(b.value,I)){if(b.children===S.children&&!un.current){l=Zs(a,l,p);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var G=b.dependencies;if(G!==null){I=b.child;for(var re=G.firstContext;re!==null;){if(re.context===g){if(b.tag===1){re=js(-1,p&-p),re.tag=2;var pe=b.updateQueue;if(pe!==null){pe=pe.shared;var xe=pe.pending;xe===null?re.next=re:(re.next=xe.next,xe.next=re),pe.pending=re}}b.lanes|=p,re=b.alternate,re!==null&&(re.lanes|=p),Gn(b.return,p,l),G.lanes|=p;break}re=re.next}}else if(b.tag===10)I=b.type===l.type?null:b.child;else if(b.tag===18){if(I=b.return,I===null)throw Error(o(341));I.lanes|=p,G=I.alternate,G!==null&&(G.lanes|=p),Gn(I,p,l),I=b.sibling}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===l){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}Wn(a,l,S.children,p),l=l.child}return l;case 9:return S=l.type,g=l.pendingProps.children,qt(l,p),S=Yt(S),g=g(S),l.flags|=1,Wn(a,l,g,p),l.child;case 14:return g=l.type,S=Vn(g,l.pendingProps),S=Vn(g.type,S),Ug(a,l,g,S,p);case 15:return Ng(a,l,l.type,l.pendingProps,p);case 17:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:Vn(g,S),a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2),l.tag=1,cn(g)?(a=!0,gi(l)):a=!1,qt(l,p),$m(l,g,S),bf(l,g,S,p),jf(null,l,g,!0,a,p);case 19:return qg(a,l,p);case 22:return Fg(a,l,p)}throw Error(o(156,l.tag))};function g_(a,l){return Hs(a,l)}function GT(a,l,p,g){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(a,l,p,g){return new GT(a,l,p,g)}function dd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function WT(a){if(typeof a=="function")return dd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===v)return 11;if(a===w)return 14}return 2}function Ci(a,l){var p=a.alternate;return p===null?(p=Lr(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function Bc(a,l,p,g,S,b){var I=2;if(g=a,typeof a=="function")dd(a)&&(I=1);else if(typeof a=="string")I=5;else e:switch(a){case f:return fo(p.children,S,b,l);case d:I=8,S|=8;break;case m:return a=Lr(12,p,l,S|2),a.elementType=m,a.lanes=b,a;case T:return a=Lr(13,p,l,S),a.elementType=T,a.lanes=b,a;case x:return a=Lr(19,p,l,S),a.elementType=x,a.lanes=b,a;case C:return Vc(p,S,b,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case _:I=10;break e;case y:I=9;break e;case v:I=11;break e;case w:I=14;break e;case O:I=16,g=null;break e}throw Error(o(130,a==null?a:typeof a,""))}return l=Lr(I,p,l,S),l.elementType=a,l.type=g,l.lanes=b,l}function fo(a,l,p,g){return a=Lr(7,a,g,l),a.lanes=p,a}function Vc(a,l,p,g){return a=Lr(22,a,g,l),a.elementType=C,a.lanes=p,a.stateNode={},a}function pd(a,l,p){return a=Lr(6,a,null,l),a.lanes=p,a}function md(a,l,p){return l=Lr(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function HT(a,l,p,g,S){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=me,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=g,this.onRecoverableError=S,Ee&&(this.mutableSourceEagerHydrationData=null)}function __(a,l,p,g,S,b,I,G,re){return a=new HT(a,l,p,G,re),l===1?(l=1,b===!0&&(l|=8)):l=0,b=Lr(3,null,null,l),a.current=b,b.stateNode=a,b.memoizedState={element:g,isDehydrated:p,cache:null,transitions:null},Ef(b),a}function v_(a){if(!a)return dr;a=a._reactInternals;e:{if(D(a)!==a||a.tag!==1)throw Error(o(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(cn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(o(171))}if(a.tag===1){var p=a.type;if(cn(p))return Zo(a,p,l)}return l}function y_(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=P(l),a===null?null:a.stateNode}function T_(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function gd(a,l){T_(a,l),(a=a.alternate)&&T_(a,l)}function jT(a){return a=P(a),a===null?null:a.stateNode}function qT(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var l=Hn();Fr(a,134217728,l),gd(a,134217728)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var l=Hn(),p=xi(a);Fr(a,p,l),gd(a,p)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=Gs(l.pendingLanes);p!==0&&(vs(l,p|1),$n(l,It()),!(Xe&6)&&(ca(),Kn()))}break;case 13:var g=Hn();l_(function(){return Fr(a,1,g)}),gd(a,1)}},t.batchedUpdates=function(a,l){var p=Xe;Xe|=1;try{return a(l)}finally{Xe=p,Xe===0&&(ca(),ys&&Kn())}},t.createComponentSelector=function(a){return{$$typeof:bc,value:a}},t.createContainer=function(a,l,p,g,S,b,I){return __(a,l,!1,null,p,g,S,b,I)},t.createHasPseudoClassSelector=function(a){return{$$typeof:Oc,value:a}},t.createHydrationContainer=function(a,l,p,g,S,b,I,G,re){return a=__(p,g,!0,a,S,b,I,G,re),a.context=v_(null),p=a.current,g=Hn(),S=xi(p),b=js(g,S),b.callback=l??null,Ti(p,b),a.current.lanes=S,_s(a,S,g),$n(a,g),a},t.createPortal=function(a,l,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:g==null?null:""+g,children:a,containerInfo:l,implementation:p}},t.createRoleSelector=function(a){return{$$typeof:kc,value:a}},t.createTestNameSelector=function(a){return{$$typeof:Ac,value:a}},t.createTextSelector=function(a){return{$$typeof:Mc,value:a}},t.deferredUpdates=function(a){var l=Qe,p=Xt.transition;try{return Xt.transition=null,Qe=16,a()}finally{Qe=l,Xt.transition=p}},t.discreteUpdates=function(a,l,p,g,S){var b=Qe,I=Xt.transition;try{return Xt.transition=null,Qe=1,a(l,p,g,S)}finally{Qe=b,Xt.transition=I,Xe===0&&ca()}},t.findAllNodes=nd,t.findBoundingRects=function(a,l){if(!de)throw Error(o(363));l=nd(a,l),a=[];for(var p=0;p<l.length;p++)a.push(Ce(l[p]));for(l=a.length-1;0<l;l--){p=a[l];for(var g=p.x,S=g+p.width,b=p.y,I=b+p.height,G=l-1;0<=G;G--)if(l!==G){var re=a[G],pe=re.x,xe=pe+re.width,Le=re.y,Me=Le+re.height;if(g>=pe&&b>=Le&&S<=xe&&I<=Me){a.splice(l,1);break}else if(g!==pe||p.width!==re.width||Me<b||Le>I){if(!(b!==Le||p.height!==re.height||xe<g||pe>S)){pe>g&&(re.width+=pe-g,re.x=g),xe<S&&(re.width=S-pe),a.splice(l,1);break}}else{Le>b&&(re.height+=Le-b,re.y=b),Me<I&&(re.height=I-Le),a.splice(l,1);break}}}return a},t.findHostInstance=y_,t.findHostInstanceWithNoPortals=function(a){return a=R(a),a=a!==null?B(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return y_(a)},t.flushControlled=function(a){var l=Xe;Xe|=1;var p=Xt.transition,g=Qe;try{Xt.transition=null,Qe=1,a()}finally{Qe=g,Xt.transition=p,Xe=l,Xe===0&&(ca(),Kn())}},t.flushPassiveEffects=ho,t.flushSync=l_,t.focusWithin=function(a,l){if(!de)throw Error(o(363));for(a=$f(a),l=i_(a,l),l=Array.from(l),a=0;a<l.length;){var p=l[a++];if(!we(p)){if(p.tag===5&&Je(p.stateNode))return!0;for(p=p.child;p!==null;)l.push(p),p=p.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qe},t.getFindAllNodesFailureDescription=function(a,l){if(!de)throw Error(o(363));var p=0,g=[];a=[$f(a),0];for(var S=0;S<a.length;){var b=a[S++],I=a[S++],G=l[I];if((b.tag!==5||!we(b))&&(ed(b,G)&&(g.push(td(G)),I++,I>p&&(p=I)),I<l.length))for(b=b.child;b!==null;)a.push(b,I),b=b.sibling}if(p<l.length){for(a=[];p<l.length;p++)a.push(td(l[p]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return X(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:jT,findFiberByHostInstance:a.findFiberByHostInstance||qT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)a=!0;else{try{eo=l.inject(a),gr=l}catch{}a=!!l.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,l,p,g){if(!de)throw Error(o(363));a=nd(a,l);var S=Ge(a,p,g).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(a,l){var p=l._getVersion;p=p(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,p]:a.mutableSourceEagerHydrationData.push(l,p)},t.runWithPriority=function(a,l){var p=Qe;try{return Qe=a,l()}finally{Qe=p}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,l,p,g){var S=l.current,b=Hn(),I=xi(S);return p=v_(p),l.context===null?l.context=p:l.pendingContext=p,l=js(b,I),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),Ti(S,l),a=Fr(S,I,b),a!==null&&sc(a,S,I),I},t};d0.exports=OS;var kS=d0.exports;const AS=r0(kS),MS=s=>typeof s=="object"&&typeof s.then=="function",wo=[];function g0(s,e,t=(n,r)=>n===r){if(s===e)return!0;if(!s||!e)return!1;const n=s.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(s[r],e[r]))return!1;return!0}function _0(s,e=null,t=!1,n={}){e===null&&(e=[s]);for(const i of wo)if(g0(e,i.keys,i.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return n.lifespan&&n.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,n.lifespan)),i.response;if(!t)throw i.promise}const r={keys:e,equal:n.equal,remove:()=>{const i=wo.indexOf(r);i!==-1&&wo.splice(i,1)},promise:(MS(s)?s:s(...e)).then(i=>{r.response=i,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(i=>r.error=i)};if(wo.push(r),!t)throw r.promise}const DS=(s,e,t)=>_0(s,e,!1,t),PS=(s,e,t)=>void _0(s,e,!0,t),RS=s=>{if(s===void 0||s.length===0)wo.splice(0,wo.length);else{const e=wo.find(t=>g0(s,t.keys,t.equal));e&&e.remove()}},Xp={},Kh=s=>void Object.assign(Xp,s);function IS(s,e){function t(f,{args:d=[],attach:m,..._},y){let v=`${f[0].toUpperCase()}${f.slice(1)}`,T;if(f==="primitive"){if(_.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=_.object;T=Sa(x,{type:f,root:y,attach:m,primitive:!0})}else{const x=Xp[v];if(!x)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");T=Sa(new x(...d),{type:f,root:y,attach:m,memoizedProps:{args:d}})}return T.__r3f.attach===void 0&&(T instanceof Gp?T.__r3f.attach="geometry":T instanceof Wp&&(T.__r3f.attach="material")),v!=="inject"&&Sd(T,_),T}function n(f,d){let m=!1;if(d){var _,y;(_=d.__r3f)!=null&&_.attach?Td(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),m=!0),m||(y=f.__r3f)==null||y.objects.push(d),d.__r3f||Sa(d,{}),d.__r3f.parent=f,ap(d),wa(d)}}function r(f,d,m){let _=!1;if(d){var y,v;if((y=d.__r3f)!=null&&y.attach)Td(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"});const T=f.children.filter(w=>w!==d),x=T.indexOf(m);f.children=[...T.slice(0,x),d,...T.slice(x)],_=!0}_||(v=f.__r3f)==null||v.objects.push(d),d.__r3f||Sa(d,{}),d.__r3f.parent=f,ap(d),wa(d)}}function i(f,d,m=!1){f&&[...f].forEach(_=>o(d,_,m))}function o(f,d,m){if(d){var _,y,v;if(d.__r3f&&(d.__r3f.parent=null),(_=f.__r3f)!=null&&_.objects&&(f.__r3f.objects=f.__r3f.objects.filter(C=>C!==d)),(y=d.__r3f)!=null&&y.attach)O_(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var T;f.remove(d),(T=d.__r3f)!=null&&T.root&&WS(d.__r3f.root,d)}const w=(v=d.__r3f)==null?void 0:v.primitive,O=!w&&(m===void 0?d.dispose!==null:m);if(!w){var x;i((x=d.__r3f)==null?void 0:x.objects,d,O),i(d.children,d,O)}if(delete d.__r3f,O&&d.dispose&&d.type!=="Scene"){const C=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ip.unstable_scheduleCallback(ip.unstable_IdlePriority,C):C()}wa(f)}}function u(f,d,m,_){var y;const v=(y=f.__r3f)==null?void 0:y.parent;if(!v)return;const T=t(d,m,f.__r3f.root);if(f.children){for(const x of f.children)x.__r3f&&n(T,x);f.children=f.children.filter(x=>!x.__r3f)}f.__r3f.objects.forEach(x=>n(T,x)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(v,f),T.parent&&(T.__r3f.autoRemovedBeforeAppend=!0),n(v,T),T.raycast&&T.__r3f.eventCount&&T.__r3f.root.getState().internal.interaction.push(T),[_,_.alternate].forEach(x=>{x!==null&&(x.stateNode=T,x.ref&&(typeof x.ref=="function"?x.ref(T):x.ref.current=T))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:AS({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const m=f.getState().scene;m.__r3f&&(m.__r3f.root=f,n(m,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,m)=>{if(!d||!m)return;const _=f.getState().scene;_.__r3f&&r(_,d,m)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,m,_){var y;if(((y=f==null?void 0:f.__r3f)!=null?y:{}).primitive&&_.object&&_.object!==f)return[!0];{const{args:T=[],children:x,...w}=_,{args:O=[],children:C,...E}=m;if(!Array.isArray(T))throw new Error("R3F: the args prop must be an array!");if(T.some((A,M)=>A!==O[M]))return[!0];const k=E0(f,w,E,!0);return k.changes.length?[!1,k]:null}},commitUpdate(f,[d,m],_,y,v,T){d?u(f,_,v,T):Sd(f,m)},commitMount(f,d,m,_){var y;const v=(y=f.__r3f)!=null?y:{};f.raycast&&v.handlers&&v.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Sa(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:m,parent:_}=(d=f.__r3f)!=null?d:{};m&&_&&O_(_,f,m),f.isObject3D&&(f.visible=!1),wa(f)},unhideInstance(f,d){var m;const{attach:_,parent:y}=(m=f.__r3f)!=null?m:{};_&&y&&Td(y,f,_),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),wa(f)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Ca.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&kt.fun(performance.now)?performance.now:kt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:kt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:kt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Sd}}var x_,E_;const yd=s=>"colorSpace"in s||"outputColorSpace"in s,v0=()=>{var s;return(s=Xp.ColorManagement)!=null?s:null},y0=s=>s&&s.isOrthographicCamera,US=s=>s&&s.hasOwnProperty("current"),tl=typeof window<"u"&&((x_=window.document)!=null&&x_.createElement||((E_=window.navigator)==null?void 0:E_.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function T0(s){const e=V.useRef(s);return tl(()=>void(e.current=s),[s]),e}function NS({set:s}){return tl(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}class S0 extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}S0.getDerivedStateFromError=()=>({error:!0});const w0="__default",C_=new Map,FS=s=>s&&!!s.memoized&&!!s.changes;function x0(s){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],t),s[1]):s}const Ul=s=>{var e;return(e=s.__r3f)==null?void 0:e.root.getState()},kt={obj:s=>s===Object(s)&&!kt.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,arr:s=>Array.isArray(s),equ(s,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof s!=typeof e||!!s!=!!e)return!1;if(kt.str(s)||kt.num(s))return s===e;const i=kt.obj(s);if(i&&n==="reference")return s===e;const o=kt.arr(s);if(o&&t==="reference")return s===e;if((o||i)&&s===e)return!0;let u;for(u in s)if(!(u in e))return!1;if(i&&t==="shallow"&&n==="shallow"){for(u in r?e:s)if(!kt.equ(s[u],e[u],{strict:r,objects:"reference"}))return!1}else for(u in r?e:s)if(s[u]!==e[u])return!1;if(kt.und(u)){if(o&&s.length===0&&e.length===0||i&&Object.keys(s).length===0&&Object.keys(e).length===0)return!0;if(s!==e)return!1}return!0}};function LS(s){const e={nodes:{},materials:{}};return s&&s.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function zS(s){s.dispose&&s.type!=="Scene"&&s.dispose();for(const e in s)e.dispose==null||e.dispose(),delete s[e]}function Sa(s,e){const t=s;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},s}function op(s,e){let t=s;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((i,o)=>i[o],s),{target:t,key:r}}else return{target:t,key:e}}const b_=/-\d+$/;function Td(s,e,t){if(kt.str(t)){if(b_.test(t)){const i=t.replace(b_,""),{target:o,key:u}=op(s,i);Array.isArray(o[u])||(o[u]=[])}const{target:n,key:r}=op(s,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(s,e)}function O_(s,e,t){var n,r;if(kt.str(t)){const{target:i,key:o}=op(s,t),u=e.__r3f.previousAttach;u===void 0?delete i[o]:i[o]=u}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(s,e);(r=e.__r3f)==null||delete r.previousAttach}function E0(s,{children:e,key:t,ref:n,...r},{children:i,key:o,ref:u,...c}={},h=!1){var f;const d=(f=s==null?void 0:s.__r3f)!=null?f:{},m=Object.entries(r),_=[];if(h){const v=Object.keys(c);for(let T=0;T<v.length;T++)r.hasOwnProperty(v[T])||m.unshift([v[T],w0+"remove"])}m.forEach(([v,T])=>{var x;if((x=s.__r3f)!=null&&x.primitive&&v==="object"||kt.equ(T,c[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return _.push([v,T,!0,[]]);let w=[];v.includes("-")&&(w=v.split("-")),_.push([v,T,!1,w]);for(const O in r){const C=r[O];O.startsWith(`${v}-`)&&_.push([O,C,!1,O.split("-")])}});const y={...r};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:_}}const BS=typeof process<"u"&&!1;function Sd(s,e){var t,n,r;const i=(t=s.__r3f)!=null?t:{},o=i.root,u=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:c,changes:h}=FS(e)?e:E0(s,e),f=i.eventCount;s.__r3f&&(s.__r3f.memoizedProps=c);for(let m=0;m<h.length;m++){let[_,y,v,T]=h[m];if(yd(s)){const C="srgb",E="srgb-linear";_==="encoding"?(_="colorSpace",y=y===3001?C:E):_==="outputEncoding"&&(_="outputColorSpace",y=y===3001?C:E)}let x=s,w=x[_];if(T.length&&(w=T.reduce((O,C)=>O[C],s),!(w&&w.set))){const[O,...C]=T.reverse();x=C.reverse().reduce((E,k)=>E[k],s),_=O}if(y===w0+"remove")if(x.constructor){let O=C_.get(x.constructor);O||(O=new x.constructor,C_.set(x.constructor,O)),y=O[_]}else y=0;if(v)y?i.handlers[_]=y:delete i.handlers[_],i.eventCount=Object.keys(i.handlers).length;else if(w&&w.set&&(w.copy||w instanceof _d)){if(Array.isArray(y))w.fromArray?w.fromArray(y):w.set(...y);else if(w.copy&&y&&y.constructor&&(BS?w.constructor.name===y.constructor.name:w.constructor===y.constructor))w.copy(y);else if(y!==void 0){const O=w instanceof Cr;!O&&w.setScalar?w.setScalar(y):w instanceof _d&&y instanceof _d?w.mask=y.mask:w.set(y),!v0()&&!u.linear&&O&&w.convertSRGBToLinear()}}else if(x[_]=y,x[_]instanceof Xh&&x[_].format===XT&&x[_].type===Ps){const O=x[_];yd(O)&&yd(u.gl)?O.colorSpace=u.gl.outputColorSpace:O.encoding=u.gl.outputEncoding}wa(s)}if(i.parent&&u.internal&&s.raycast&&f!==i.eventCount){const m=u.internal.interaction.indexOf(s);m>-1&&u.internal.interaction.splice(m,1),i.eventCount&&u.internal.interaction.push(s)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(r=s.__r3f)!=null&&r.parent&&ap(s),s}function wa(s){var e,t;const n=(e=s.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function ap(s){s.onUpdate==null||s.onUpdate(s)}function VS(s,e){s.manual||(y0(s)?(s.left=e.width/-2,s.right=e.width/2,s.top=e.height/2,s.bottom=e.height/-2):s.aspect=e.width/e.height,s.updateProjectionMatrix(),s.updateMatrixWorld())}function Hc(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function GS(){var s;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ca.DefaultEventPriority;switch((s=e.event)==null?void 0:s.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ca.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ca.ContinuousEventPriority;default:return Ca.DefaultEventPriority}}function C0(s,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(s.delete(n),r.target.releasePointerCapture(n)))}function WS(s,e){const{internal:t}=s.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{C0(t.capturedMap,e,n,r)})}function HS(s){function e(c){const{internal:h}=s.getState(),f=c.offsetX-h.initialClick[0],d=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=h.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function n(c,h){const f=s.getState(),d=new Set,m=[],_=h?h(f.internal.interaction):f.internal.interaction;for(let x=0;x<_.length;x++){const w=Ul(_[x]);w&&(w.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(c,f);function y(x){const w=Ul(x);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var O;w.events.compute==null||w.events.compute(c,w,(O=w.previousRoot)==null?void 0:O.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(x,!0):[]}let v=_.flatMap(y).sort((x,w)=>{const O=Ul(x.object),C=Ul(w.object);return!O||!C?x.distance-w.distance:C.events.priority-O.events.priority||x.distance-w.distance}).filter(x=>{const w=Hc(x);return d.has(w)?!1:(d.add(w),!0)});f.events.filter&&(v=f.events.filter(v,f));for(const x of v){let w=x.object;for(;w;){var T;(T=w.__r3f)!=null&&T.eventCount&&m.push({...x,eventObject:w}),w=w.parent}}if("pointerId"in c&&f.internal.capturedMap.has(c.pointerId))for(let x of f.internal.capturedMap.get(c.pointerId).values())d.has(Hc(x.intersection))||m.push(x.intersection);return m}function r(c,h,f,d){const m=s.getState();if(c.length){const _={stopped:!1};for(const y of c){const v=Ul(y.object)||m,{raycaster:T,pointer:x,camera:w,internal:O}=v,C=new Ve(x.x,x.y,0).unproject(w),E=U=>{var R,P;return(R=(P=O.capturedMap.get(U))==null?void 0:P.has(y.eventObject))!=null?R:!1},k=U=>{const R={intersection:y,target:h.target};O.capturedMap.has(U)?O.capturedMap.get(U).set(y.eventObject,R):O.capturedMap.set(U,new Map([[y.eventObject,R]])),h.target.setPointerCapture(U)},A=U=>{const R=O.capturedMap.get(U);R&&C0(O.capturedMap,y.eventObject,R,U)};let M={};for(let U in h){let R=h[U];typeof R!="function"&&(M[U]=R)}let D={...y,...M,pointer:x,intersections:c,stopped:_.stopped,delta:f,unprojectedPoint:C,ray:T.ray,camera:w,stopPropagation(){const U="pointerId"in h&&O.capturedMap.get(h.pointerId);if((!U||U.has(y.eventObject))&&(D.stopped=_.stopped=!0,O.hovered.size&&Array.from(O.hovered.values()).find(R=>R.eventObject===y.eventObject))){const R=c.slice(0,c.indexOf(y));i([...R,y])}},target:{hasPointerCapture:E,setPointerCapture:k,releasePointerCapture:A},currentTarget:{hasPointerCapture:E,setPointerCapture:k,releasePointerCapture:A},nativeEvent:h};if(d(D),_.stopped===!0)break}}return c}function i(c){const{internal:h}=s.getState();for(const f of h.hovered.values())if(!c.length||!c.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const m=f.eventObject.__r3f,_=m==null?void 0:m.handlers;if(h.hovered.delete(Hc(f)),m!=null&&m.eventCount){const y={...f,intersections:c};_.onPointerOut==null||_.onPointerOut(y),_.onPointerLeave==null||_.onPointerLeave(y)}}}function o(c,h){for(let f=0;f<h.length;f++){const d=h[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function u(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return h=>{const{internal:f}=s.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),i([]))})}}return function(f){const{onPointerMissed:d,internal:m}=s.getState();m.lastEvent.current=f;const _=c==="onPointerMove",y=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",T=n(f,_?t:void 0),x=y?e(f):0;c==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=T.map(O=>O.eventObject)),y&&!T.length&&x<=2&&(o(f,m.interaction),d&&d(f)),_&&i(T);function w(O){const C=O.eventObject,E=C.__r3f,k=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(_){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const A=Hc(O),M=m.hovered.get(A);M?M.stopped&&O.stopPropagation():(m.hovered.set(A,O),k.onPointerOver==null||k.onPointerOver(O),k.onPointerEnter==null||k.onPointerEnter(O))}k.onPointerMove==null||k.onPointerMove(O)}else{const A=k[c];A?(!y||m.initialHits.includes(C))&&(o(f,m.interaction.filter(M=>!m.initialHits.includes(M))),A(O)):y&&m.initialHits.includes(C)&&o(f,m.interaction.filter(M=>!m.initialHits.includes(M)))}}r(T,f,x,w)}}return{handlePointer:u}}const b0=s=>!!(s!=null&&s.render),O0=V.createContext(null),jS=(s,e)=>{const t=bS((u,c)=>{const h=new Ve,f=new Ve,d=new Ve;function m(x=c().camera,w=f,O=c().size){const{width:C,height:E,top:k,left:A}=O,M=C/E;w instanceof Ve?d.copy(w):d.set(...w);const D=x.getWorldPosition(h).distanceTo(d);if(y0(x))return{width:C/x.zoom,height:E/x.zoom,top:k,left:A,factor:1,distance:D,aspect:M};{const U=x.fov*Math.PI/180,R=2*Math.tan(U/2)*D,P=R*(C/E);return{width:P,height:R,top:k,left:A,factor:C/P,distance:D,aspect:M}}}let _;const y=x=>u(w=>({performance:{...w.performance,current:x}})),v=new pt;return{set:u,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>s(c(),x),advance:(x,w)=>e(x,w,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new nS,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();_&&clearTimeout(_),x.performance.current!==x.performance.min&&y(x.performance.min),_=setTimeout(()=>y(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:x=>u(w=>({...w,events:{...w.events,...x}})),setSize:(x,w,O,C,E)=>{const k=c().camera,A={width:x,height:w,top:C||0,left:E||0,updateStyle:O};u(M=>({size:A,viewport:{...M.viewport,...m(k,f,A)}}))},setDpr:x=>u(w=>{const O=x0(x);return{viewport:{...w.viewport,dpr:O,initialDpr:w.viewport.initialDpr||O}}}),setFrameloop:(x="always")=>{const w=c().clock;w.stop(),w.elapsedTime=0,x!=="never"&&(w.start(),w.elapsedTime=0),u(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,w,O)=>{const C=c().internal;return C.priority=C.priority+(w>0?1:0),C.subscribers.push({ref:x,priority:w,store:O}),C.subscribers=C.subscribers.sort((E,k)=>E.priority-k.priority),()=>{const E=c().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(w>0?1:0),E.subscribers=E.subscribers.filter(k=>k.ref!==x))}}}}}),n=t.getState();let r=n.size,i=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:u,size:c,viewport:h,gl:f,set:d}=t.getState();if(c.width!==r.width||c.height!==r.height||h.dpr!==i){var m;r=c,i=h.dpr,VS(u,c),f.setPixelRatio(h.dpr);const _=(m=c.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(c.width,c.height,_)}u!==o&&(o=u,d(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>s(u)),t};function Zp(s,e){const t={callback:s};return e.add(t),()=>void e.delete(t)}let jc,k0=new Set,A0=new Set,M0=new Set;const DD=s=>Zp(s,k0),PD=s=>Zp(s,A0),RD=s=>Zp(s,M0);function wd(s,e){if(s.size)for(const{callback:t}of s.values())t(e)}function Nl(s,e){switch(s){case"before":return wd(k0,e);case"after":return wd(A0,e);case"tail":return wd(M0,e)}}let xd,Ed;function Cd(s,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof s=="number"&&(n=s-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=s),xd=e.internal.subscribers,jc=0;jc<xd.length;jc++)Ed=xd[jc],Ed.ref.current(Ed.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function qS(s){let e=!1,t,n,r;function i(c){n=requestAnimationFrame(i),e=!0,t=0,Nl("before",c);for(const f of s.values()){var h;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((h=r.gl.xr)!=null&&h.isPresenting)&&(t+=Cd(c,r))}if(Nl("after",c),t===0)return Nl("tail",c),e=!1,cancelAnimationFrame(n)}function o(c,h=1){var f;if(!c)return s.forEach(d=>o(d.store.getState()),h);(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+h),e||(e=!0,requestAnimationFrame(i)))}function u(c,h=!0,f,d){if(h&&Nl("before",c),f)Cd(c,f,d);else for(const m of s.values())Cd(c,m.store.getState());h&&Nl("after",c)}return{loop:i,invalidate:o,advance:u}}function YS(s){const e=V.useRef(null);return tl(()=>void(e.current=s.current.__r3f),[s]),e}function D0(){const s=V.useContext(O0);if(!s)throw new Error("R3F: Hooks can only be used within the Canvas component!");return s}function wt(s=t=>t,e){return D0()(s,e)}function Jh(s,e=0){const t=D0(),n=t.getState().internal.subscribe,r=T0(s);return tl(()=>n(r,e,t),[e,n,t]),null}const k_=new WeakMap;function P0(s,e){return function(t,...n){let r=k_.get(t);return r||(r=new t,k_.set(t,r)),s&&s(r),Promise.all(n.map(i=>new Promise((o,u)=>r.load(i,c=>{c.scene&&Object.assign(c,LS(c.scene)),o(c)},e,c=>u(new Error(`Could not load ${i}: ${c==null?void 0:c.message}`)))))).finally(()=>r.dispose==null?void 0:r.dispose())}}function R0(s,e,t,n){const r=Array.isArray(e)?e:[e],i=DS(P0(t,n),[s,...r],{equal:kt.equ});return Array.isArray(e)?i:i[0]}R0.preload=function(s,e,t){const n=Array.isArray(e)?e:[e];return PS(P0(t),[s,...n])};R0.clear=function(s,e){const t=Array.isArray(e)?e:[e];return RS([s,...t])};const Ba=new Map,{invalidate:A_,advance:M_}=qS(Ba),{reconciler:yh,applyProps:ha}=IS(Ba,GS),fa={objects:"shallow",strict:!1},XS=(s,e)=>{const t=typeof s=="function"?s(e):s;return b0(t)?t:new JT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...s})};function ZS(s,e){const t=typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:i,left:o,updateStyle:u=t}=e;return{width:n,height:r,top:i,left:o,updateStyle:u}}else if(typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:n,height:r,top:i,left:o}=s.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function QS(s){const e=Ba.get(s),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,i=n||jS(A_,M_),o=t||yh.createContainer(i,Ca.ConcurrentRoot,null,!1,null,"",r,null);e||Ba.set(s,{fiber:o,store:i});let u,c=!1,h;return{configure(f={}){let{gl:d,size:m,scene:_,events:y,onCreated:v,shadows:T=!1,linear:x=!1,flat:w=!1,legacy:O=!1,orthographic:C=!1,frameloop:E="always",dpr:k=[1,2],performance:A,raycaster:M,camera:D,onPointerMissed:U}=f,R=i.getState(),P=R.gl;R.gl||R.set({gl:P=XS(d,s)});let F=R.raycaster;F||R.set({raycaster:F=new ZT});const{params:B,...q}=M||{};if(kt.equ(q,F,fa)||ha(F,{...q}),kt.equ(B,F.params,fa)||ha(F,{params:{...F.params,...B}}),!R.camera||R.camera===h&&!kt.equ(h,D,fa)){h=D;const L=D instanceof s0,K=L?D:C?new Hp(0,0,0,0,.1,1e3):new Iu(75,0,.1,1e3);L||(K.position.z=5,D&&ha(K,D),!R.camera&&!(D!=null&&D.rotation)&&K.lookAt(0,0,0)),R.set({camera:K}),F.camera=K}if(!R.scene){let L;_ instanceof _h?L=_:(L=new _h,_&&ha(L,_)),R.set({scene:Sa(L)})}if(!R.xr){var X;const L=(Y,ie)=>{const ne=i.getState();ne.frameloop!=="never"&&M_(Y,!0,ne,ie)},K=()=>{const Y=i.getState();Y.gl.xr.enabled=Y.gl.xr.isPresenting,Y.gl.xr.setAnimationLoop(Y.gl.xr.isPresenting?L:null),Y.gl.xr.isPresenting||A_(Y)},ee={connect(){const Y=i.getState().gl;Y.xr.addEventListener("sessionstart",K),Y.xr.addEventListener("sessionend",K)},disconnect(){const Y=i.getState().gl;Y.xr.removeEventListener("sessionstart",K),Y.xr.removeEventListener("sessionend",K)}};typeof((X=P.xr)==null?void 0:X.addEventListener)=="function"&&ee.connect(),R.set({xr:ee})}if(P.shadowMap){const L=P.shadowMap.enabled,K=P.shadowMap.type;if(P.shadowMap.enabled=!!T,kt.boo(T))P.shadowMap.type=vd;else if(kt.str(T)){var J;const ee={basic:$T,percentage:eS,soft:vd,variance:tS};P.shadowMap.type=(J=ee[T])!=null?J:vd}else kt.obj(T)&&Object.assign(P.shadowMap,T);(L!==P.shadowMap.enabled||K!==P.shadowMap.type)&&(P.shadowMap.needsUpdate=!0)}const H=v0();H&&("enabled"in H?H.enabled=!O:"legacyMode"in H&&(H.legacyMode=O)),ha(P,{outputEncoding:x?3e3:3001,toneMapping:w?QT:KT}),R.legacy!==O&&R.set(()=>({legacy:O})),R.linear!==x&&R.set(()=>({linear:x})),R.flat!==w&&R.set(()=>({flat:w})),d&&!kt.fun(d)&&!b0(d)&&!kt.equ(d,P,fa)&&ha(P,d),y&&!R.events.handlers&&R.set({events:y(i)});const N=ZS(s,m);return kt.equ(N,R.size,fa)||R.setSize(N.width,N.height,N.updateStyle,N.top,N.left),k&&R.viewport.dpr!==x0(k)&&R.setDpr(k),R.frameloop!==E&&R.setFrameloop(E),R.onPointerMissed||R.set({onPointerMissed:U}),A&&!kt.equ(A,R.performance,fa)&&R.set(L=>({performance:{...L.performance,...A}})),u=v,c=!0,this},render(f){return c||this.configure(),yh.updateContainer(V.createElement(KS,{store:i,children:f,onCreated:u,rootElement:s}),o,null,()=>{}),i},unmount(){I0(s)}}}function KS({store:s,children:e,onCreated:t,rootElement:n}){return tl(()=>{const r=s.getState();r.set(i=>({internal:{...i.internal,active:!0}})),t&&t(r),s.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),V.createElement(O0.Provider,{value:s},e)}function I0(s,e){const t=Ba.get(s),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),yh.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var i,o,u,c;r.events.disconnect==null||r.events.disconnect(),(i=r.gl)==null||(o=i.renderLists)==null||o.dispose==null||o.dispose(),(u=r.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),zS(r),Ba.delete(s),e&&e(s)}catch{}},500)})}}yh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});function lp(s,e,t){var n,r,i,o,u;e==null&&(e=100);function c(){var f=Date.now()-o;f<e&&f>=0?n=setTimeout(c,e-f):(n=null,t||(u=s.apply(i,r),i=r=null))}var h=function(){i=this,r=arguments,o=Date.now();var f=t&&!n;return n||(n=setTimeout(c,e)),f&&(u=s.apply(i,r),i=r=null),u};return h.clear=function(){n&&(clearTimeout(n),n=null)},h.flush=function(){n&&(u=s.apply(i,r),i=r=null,clearTimeout(n),n=null)},h}lp.debounce=lp;var JS=lp;const D_=r0(JS);function $S(s){let{debounce:e,scroll:t,polyfill:n,offsetSize:r}=s===void 0?{debounce:0,scroll:!1,offsetSize:!1}:s;const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,u]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),h=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,d=V.useRef(!1);V.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,_,y]=V.useMemo(()=>{const w=()=>{if(!c.current.element)return;const{left:O,top:C,width:E,height:k,bottom:A,right:M,x:D,y:U}=c.current.element.getBoundingClientRect(),R={left:O,top:C,width:E,height:k,bottom:A,right:M,x:D,y:U};c.current.element instanceof HTMLElement&&r&&(R.height=c.current.element.offsetHeight,R.width=c.current.element.offsetWidth),Object.freeze(R),d.current&&!rw(c.current.lastBounds,R)&&u(c.current.lastBounds=R)};return[w,f?D_(w,f):w,h?D_(w,h):w]},[u,r,h,f]);function v(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",y,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function T(){c.current.element&&(c.current.resizeObserver=new i(y),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(w=>w.addEventListener("scroll",y,{capture:!0,passive:!0})))}const x=w=>{!w||w===c.current.element||(v(),c.current.element=w,c.current.scrollContainers=U0(w),T())};return tw(y,!!t),ew(_),V.useEffect(()=>{v(),T()},[t,y,_]),V.useEffect(()=>v,[]),[x,o,m]}function ew(s){V.useEffect(()=>{const e=s;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[s])}function tw(s,e){V.useEffect(()=>{if(e){const t=s;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[s,e])}function U0(s){const e=[];if(!s||s===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(s);return[t,n,r].some(i=>i==="auto"||i==="scroll")&&e.push(s),[...e,...U0(s.parentElement)]}const nw=["x","y","top","bottom","left","right","width","height"],rw=(s,e)=>nw.every(t=>s[t]===e[t]);var sw=Object.defineProperty,iw=Object.defineProperties,ow=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertySymbols,aw=Object.prototype.hasOwnProperty,lw=Object.prototype.propertyIsEnumerable,R_=(s,e,t)=>e in s?sw(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,I_=(s,e)=>{for(var t in e||(e={}))aw.call(e,t)&&R_(s,t,e[t]);if(P_)for(var t of P_(e))lw.call(e,t)&&R_(s,t,e[t]);return s},uw=(s,e)=>iw(s,ow(e));function N0(s,e,t){if(!s)return;if(t(s)===!0)return s;let n=e?s.return:s.child;for(;n;){const r=N0(n,e,t);if(r)return r;n=e?null:n.sibling}}function F0(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const Qp=F0(V.createContext(null));class L0 extends V.Component{render(){return V.createElement(Qp.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:U_,ReactCurrentDispatcher:N_}=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function cw(){const s=V.useContext(Qp);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const n of[U_==null?void 0:U_.current,s,s==null?void 0:s.alternate]){if(!n)continue;const r=N0(n,!1,i=>{let o=i.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[s,e])}function hw(){var s,e;const t=cw(),[n]=V.useState(()=>new Map);n.clear();let r=t;for(;r;){const i=(s=r.type)==null?void 0:s._context;i&&i!==Qp&&!n.has(i)&&n.set(i,(e=N_==null?void 0:N_.current)==null?void 0:e.readContext(F0(i))),r=r.return}return n}function fw(){const s=hw();return V.useMemo(()=>Array.from(s.keys()).reduce((e,t)=>n=>V.createElement(e,null,V.createElement(t.Provider,uw(I_({},n),{value:s.get(t)}))),e=>V.createElement(L0,I_({},e))),[s])}const bd={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function dw(s){const{handlePointer:e}=HS(s);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(bd).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=s.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=s.getState();i.disconnect==null||i.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=i.handlers)!=null?n:[]).forEach(([o,u])=>{const[c,h]=bd[o];t.addEventListener(c,u,{passive:h})})},disconnect:()=>{const{set:t,events:n}=s.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([i,o])=>{if(n&&n.connected instanceof HTMLElement){const[u]=bd[i];n.connected.removeEventListener(u,o)}}),t(i=>({events:{...i.events,connected:void 0}}))}}}}const pw=V.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:i,events:o=dw,eventSource:u,eventPrefix:c,shadows:h,linear:f,flat:d,legacy:m,orthographic:_,frameloop:y,dpr:v,performance:T,raycaster:x,camera:w,scene:O,onPointerMissed:C,onCreated:E,...k},A){V.useMemo(()=>Kh(i0),[]);const M=fw(),[D,U]=$S({scroll:!0,debounce:{scroll:50,resize:0},...n}),R=V.useRef(null),P=V.useRef(null);V.useImperativeHandle(A,()=>R.current);const F=T0(C),[B,q]=V.useState(!1),[X,J]=V.useState(!1);if(B)throw B;if(X)throw X;const H=V.useRef(null);tl(()=>{const W=R.current;U.width>0&&U.height>0&&W&&(H.current||(H.current=QS(W)),H.current.configure({gl:i,events:o,shadows:h,linear:f,flat:d,legacy:m,orthographic:_,frameloop:y,dpr:v,performance:T,raycaster:x,camera:w,scene:O,size:U,onPointerMissed:(...N)=>F.current==null?void 0:F.current(...N),onCreated:N=>{N.events.connect==null||N.events.connect(u?US(u)?u.current:u:P.current),c&&N.setEvents({compute:(L,K)=>{const ee=L[c+"X"],Y=L[c+"Y"];K.pointer.set(ee/K.size.width*2-1,-(Y/K.size.height)*2+1),K.raycaster.setFromCamera(K.pointer,K.camera)}}),E==null||E(N)}}),H.current.render(V.createElement(M,null,V.createElement(S0,{set:J},V.createElement(V.Suspense,{fallback:V.createElement(NS,{set:q})},e)))))}),V.useEffect(()=>{const W=R.current;if(W)return()=>I0(W)},[]);const z=u?"none":"auto";return V.createElement("div",ii({ref:P,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...r}},k),V.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},V.createElement("canvas",{ref:R,style:{display:"block"}},t)))}),UD=V.forwardRef(function(e,t){return V.createElement(L0,null,V.createElement(pw,ii({},e,{ref:t})))}),Nu=new Ve,Kp=new Ve,mw=new Ve;function gw(s,e,t){const n=Nu.setFromMatrixPosition(s.matrixWorld);n.project(e);const r=t.width/2,i=t.height/2;return[n.x*r+r,-(n.y*i)+i]}function _w(s,e){const t=Nu.setFromMatrixPosition(s.matrixWorld),n=Kp.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),i=e.getWorldDirection(mw);return r.angleTo(i)>Math.PI/2}function vw(s,e,t,n){const r=Nu.setFromMatrixPosition(s.matrixWorld),i=r.clone();i.project(e),t.setFromCamera(i,e);const o=t.intersectObjects(n,!0);if(o.length){const u=o[0].distance;return r.distanceTo(t.ray.origin)<u}return!0}function yw(s,e){if(e instanceof Hp)return e.zoom;if(e instanceof Iu){const t=Nu.setFromMatrixPosition(s.matrixWorld),n=Kp.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,i=t.distanceTo(n);return 1/(2*Math.tan(r/2)*i)}else return 1}function Tw(s,e,t){if(e instanceof Iu||e instanceof Hp){const n=Nu.setFromMatrixPosition(s.matrixWorld),r=Kp.setFromMatrixPosition(e.matrixWorld),i=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),u=t[1]-o*e.far;return Math.round(o*i+u)}}const up=s=>Math.abs(s)<1e-10?0:s;function z0(s,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=up(e[r]*s.elements[r])+(r!==15?",":")");return t+n}const Sw=(s=>e=>z0(e,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ww=(s=>(e,t)=>z0(e,s(t),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]);function xw(s){return s&&typeof s=="object"&&"current"in s}const ND=V.forwardRef(({children:s,eps:e=.001,style:t,className:n,prepend:r,center:i,fullscreen:o,portal:u,distanceFactor:c,sprite:h=!1,transform:f=!1,occlude:d,onOcclude:m,castShadow:_,receiveShadow:y,material:v,geometry:T,zIndexRange:x=[16777271,0],calculatePosition:w=gw,as:O="div",wrapperClass:C,pointerEvents:E="auto",...k},A)=>{const{gl:M,camera:D,scene:U,size:R,raycaster:P,events:F,viewport:B}=wt(),[q]=V.useState(()=>document.createElement(O)),X=V.useRef(),J=V.useRef(null),H=V.useRef(0),z=V.useRef([0,0]),W=V.useRef(null),N=V.useRef(null),L=(u==null?void 0:u.current)||F.connected||M.domElement.parentNode,K=V.useRef(null),ee=V.useRef(!1),Y=V.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&xw(d[0]),[d]);V.useLayoutEffect(()=>{const ge=M.domElement;d&&d==="blending"?(ge.style.zIndex=`${Math.floor(x[0]/2)}`,ge.style.position="absolute",ge.style.pointerEvents="none"):(ge.style.zIndex=null,ge.style.position=null,ge.style.pointerEvents=null)},[d]),V.useLayoutEffect(()=>{if(J.current){const ge=X.current=rS(q);if(U.updateMatrixWorld(),f)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const oe=w(J.current,D,R);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${oe[0]}px,${oe[1]}px,0);transform-origin:0 0;`}return L&&(r?L.prepend(q):L.appendChild(q)),()=>{L&&L.removeChild(q),ge.unmount()}}},[L,f]),V.useLayoutEffect(()=>{C&&(q.className=C)},[C]);const ie=V.useMemo(()=>f?{position:"absolute",top:0,left:0,width:R.width,height:R.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:i?"translate3d(-50%,-50%,0)":"none",...o&&{top:-R.height/2,left:-R.width/2,width:R.width,height:R.height},...t},[t,i,o,R,f]),ne=V.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);V.useLayoutEffect(()=>{if(ee.current=!1,f){var ge;(ge=X.current)==null||ge.render(V.createElement("div",{ref:W,style:ie},V.createElement("div",{ref:N,style:ne},V.createElement("div",{ref:A,className:n,style:t,children:s}))))}else{var oe;(oe=X.current)==null||oe.render(V.createElement("div",{ref:A,style:ie,className:n,children:s}))}});const Z=V.useRef(!0);Jh(ge=>{if(J.current){D.updateMatrixWorld(),J.current.updateWorldMatrix(!0,!1);const oe=f?z.current:w(J.current,D,R);if(f||Math.abs(H.current-D.zoom)>e||Math.abs(z.current[0]-oe[0])>e||Math.abs(z.current[1]-oe[1])>e){const ae=_w(J.current,D);let Ee=!1;Y&&(d!=="blending"?Ee=[U]:Array.isArray(d)&&(Ee=d.map(ve=>ve.current)));const Re=Z.current;if(Ee){const ve=vw(J.current,D,P,Ee);Z.current=ve&&!ae}else Z.current=!ae;Re!==Z.current&&(m?m(!Z.current):q.style.display=Z.current?"block":"none");const $=Math.floor(x[0]/2),ce=d?Y?[x[0],$]:[$-1,0]:x;if(q.style.zIndex=`${Tw(J.current,D,ce)}`,f){const[ve,le]=[R.width/2,R.height/2],fe=D.projectionMatrix.elements[5]*le,{isOrthographicCamera:de,top:ue,left:Ce,bottom:Te,right:we}=D,Se=Sw(D.matrixWorldInverse),Je=de?`scale(${fe})translate(${up(-(we+Ce)/2)}px,${up((ue+Te)/2)}px)`:`translateZ(${fe}px)`;let Ge=J.current.matrixWorld;h&&(Ge=D.matrixWorldInverse.clone().transpose().copyPosition(Ge).scale(J.current.scale),Ge.elements[3]=Ge.elements[7]=Ge.elements[11]=0,Ge.elements[15]=1),q.style.width=R.width+"px",q.style.height=R.height+"px",q.style.perspective=de?"":`${fe}px`,W.current&&N.current&&(W.current.style.transform=`${Je}${Se}translate(${ve}px,${le}px)`,N.current.style.transform=ww(Ge,1/((c||10)/400)))}else{const ve=c===void 0?1:yw(J.current,D)*c;q.style.transform=`translate3d(${oe[0]}px,${oe[1]}px,0) scale(${ve})`}z.current=oe,H.current=D.zoom}}if(!Y&&K.current&&!ee.current)if(f){if(W.current){const oe=W.current.children[0];if(oe!=null&&oe.clientWidth&&oe!=null&&oe.clientHeight){const{isOrthographicCamera:ae}=D;if(ae||T)k.scale&&(Array.isArray(k.scale)?k.scale instanceof Ve?K.current.scale.copy(k.scale.clone().divideScalar(1)):K.current.scale.set(1/k.scale[0],1/k.scale[1],1/k.scale[2]):K.current.scale.setScalar(1/k.scale));else{const Ee=(c||10)/400,Re=oe.clientWidth*Ee,$=oe.clientHeight*Ee;K.current.scale.set(Re,$,1)}ee.current=!0}}}else{const oe=q.children[0];if(oe!=null&&oe.clientWidth&&oe!=null&&oe.clientHeight){const ae=1/B.factor,Ee=oe.clientWidth*ae,Re=oe.clientHeight*ae;K.current.scale.set(Ee,Re,1),ee.current=!0}K.current.lookAt(ge.camera.position)}});const me=V.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return V.createElement("group",ii({},k,{ref:J}),d&&!Y&&V.createElement("mesh",{castShadow:_,receiveShadow:y,ref:K},T||V.createElement("planeGeometry",null),v||V.createElement("shaderMaterial",{side:So,vertexShader:me.vertexShader,fragmentShader:me.fragmentShader})))});function Ew(s){let e;const t=new Set,n=(h,f)=>{const d=typeof h=="function"?h(e):h;if(d!==e){const m=e;e=f?d:Object.assign({},e,d),t.forEach(_=>_(e,m))}},r=()=>e,i=(h,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function _(){const y=f(e);if(!d(m,y)){const v=m;h(m=y,v)}}return t.add(_),()=>t.delete(_)},c={setState:n,getState:r,subscribe:(h,f,d)=>f||d?i(h,f,d):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=s(n,r,c),c}const Cw=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),F_=Cw?V.useEffect:V.useLayoutEffect;function bw(s){const e=typeof s=="function"?Ew(s):s,t=(n=e.getState,r=Object.is)=>{const[,i]=V.useReducer(T=>T+1,0),o=e.getState(),u=V.useRef(o),c=V.useRef(n),h=V.useRef(r),f=V.useRef(!1),d=V.useRef();d.current===void 0&&(d.current=n(o));let m,_=!1;(u.current!==o||c.current!==n||h.current!==r||f.current)&&(m=n(o),_=!r(d.current,m)),F_(()=>{_&&(d.current=m),u.current=o,c.current=n,h.current=r,f.current=!1});const y=V.useRef(o);F_(()=>{const T=()=>{try{const w=e.getState(),O=c.current(w);h.current(d.current,O)||(u.current=w,d.current=O,i())}catch{f.current=!0,i()}},x=e.subscribe(T);return e.getState()!==y.current&&T(),x},[]);const v=_?m:d.current;return V.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}let Fl=0;const Ow=bw(s=>(Gc.onStart=(e,t,n)=>{s({active:!0,item:e,loaded:t,total:n,progress:(t-Fl)/(n-Fl)*100})},Gc.onLoad=()=>{s({active:!1})},Gc.onError=e=>s(t=>({errors:[...t.errors,e]})),Gc.onProgress=(e,t,n)=>{t===n&&(Fl=n),s({active:!0,item:e,loaded:t,total:n,progress:(t-Fl)/(n-Fl)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),kw=s=>`Loading ${s.toFixed(2)}%`;function FD({containerStyles:s,innerStyles:e,barStyles:t,dataStyles:n,dataInterpolation:r=kw,initialState:i=o=>o}){const{active:o,progress:u}=Ow(),c=V.useRef(0),h=V.useRef(0),f=V.useRef(null),[d,m]=V.useState(i(o));V.useEffect(()=>{let y;return o!==d&&(y=setTimeout(()=>m(o),300)),()=>clearTimeout(y)},[d,o]);const _=V.useCallback(()=>{f.current&&(c.current+=(u-c.current)/2,(c.current>.95*u||u===100)&&(c.current=u),f.current.innerText=r(c.current),c.current<u&&(h.current=requestAnimationFrame(_)))},[r,u]);return V.useEffect(()=>(_(),()=>cancelAnimationFrame(h.current)),[_]),d?V.createElement("div",{style:{...qc.container,opacity:o?1:0,...s}},V.createElement("div",null,V.createElement("div",{style:{...qc.inner,...e}},V.createElement("div",{style:{...qc.bar,transform:`scaleX(${u/100})`,...t}}),V.createElement("span",{ref:f,style:{...qc.data,...n}})))):null}const qc={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Aw(s){return function(e){s.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}let Ll;function Mw(){var s;if(Ll!==void 0)return Ll;try{let e;const t=document.createElement("canvas");return Ll=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((s=e.getExtension("WEBGL_lose_context"))==null||s.loseContext()),Ll}catch{return Ll=!1}}const Od=new sS,kd=new Ve,da=new Ve,ts=new Ve,Qs=new Ve,xs=new Ve,Ks=new Ve,Js=new Ve,zl=new Ve,Bl=new Ve,Vl=new Ve,Yc=new Ve,Gl=new Ve,Wl=new Ve,Hl=new Ve;class Dw{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new Ve,this.endPoint=new Ve,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(Od,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){da.copy(e),da.x=Math.min(e.x,t.x),da.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),ts.setFromMatrixPosition(this.camera.matrixWorld),Qs.copy(da),xs.set(t.x,da.y,0),Ks.copy(t),Js.set(da.x,t.y,0),Qs.unproject(this.camera),xs.unproject(this.camera),Ks.unproject(this.camera),Js.unproject(this.camera),Gl.copy(Qs).sub(ts),Wl.copy(xs).sub(ts),Hl.copy(Ks).sub(ts),Gl.normalize(),Wl.normalize(),Hl.normalize(),Gl.multiplyScalar(this.deep),Wl.multiplyScalar(this.deep),Hl.multiplyScalar(this.deep),Gl.add(ts),Wl.add(ts),Hl.add(ts);var n=Od.planes;n[0].setFromCoplanarPoints(ts,Qs,xs),n[1].setFromCoplanarPoints(ts,xs,Ks),n[2].setFromCoplanarPoints(Ks,Js,ts),n[3].setFromCoplanarPoints(Js,Qs,ts),n[4].setFromCoplanarPoints(xs,Ks,Js),n[5].setFromCoplanarPoints(Hl,Wl,Gl),n[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),u=Math.min(e.y,t.y);Qs.set(r,i,-1),xs.set(o,i,-1),Ks.set(o,u,-1),Js.set(r,u,-1),zl.set(r,i,1),Bl.set(o,i,1),Vl.set(o,u,1),Yc.set(r,u,1),Qs.unproject(this.camera),xs.unproject(this.camera),Ks.unproject(this.camera),Js.unproject(this.camera),zl.unproject(this.camera),Bl.unproject(this.camera),Vl.unproject(this.camera),Yc.unproject(this.camera);var n=Od.planes;n[0].setFromCoplanarPoints(Qs,zl,Bl),n[1].setFromCoplanarPoints(xs,Bl,Vl),n[2].setFromCoplanarPoints(Vl,Yc,Js),n[3].setFromCoplanarPoints(Yc,zl,Qs),n[4].setFromCoplanarPoints(xs,Ks,Js),n[5].setFromCoplanarPoints(Vl,Bl,zl),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),kd.copy(t.geometry.boundingSphere.center),kd.applyMatrix4(t.matrixWorld),e.containsPoint(kd)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}const L_=new Zh,Xc=new Ve;class $h extends o0{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new tp(e,3)),this.setAttribute("uv",new tp(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new np(t,6,1);return this.setAttribute("instanceStart",new Ea(n,3,0)),this.setAttribute("instanceEnd",new Ea(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new np(t,6,1);return this.setAttribute("instanceColorStart",new Ea(n,3,0)),this.setAttribute("instanceColorEnd",new Ea(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new iS(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zh);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),L_.setFromBufferAttribute(t),this.boundingBox.union(L_))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new jp),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)Xc.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Xc)),Xc.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Xc));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class B0 extends $h{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class ef extends us{constructor(e){super({type:"LineMaterial",uniforms:rp.clone(rp.merge([S_.common,S_.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new pt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(Qh.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const z_=new Ve,B_=new Ve,wn=new zi,xn=new zi,Es=new zi,Ad=new Ve,Md=new a0,Mn=new oS,V_=new Ve,Zc=new Zh,Qc=new jp,Cs=new zi;let ks,cp,V0,Co;function G_(s,e,t){return Cs.set(0,0,-e,1).applyMatrix4(s.projectionMatrix),Cs.multiplyScalar(1/Cs.w),Cs.x=Co/t.width,Cs.y=Co/t.height,Cs.applyMatrix4(s.projectionMatrixInverse),Cs.multiplyScalar(1/Cs.w),Math.abs(Math.max(Cs.x,Cs.y))}function Pw(s,e){for(let t=0,n=cp.count;t<n;t++){Mn.start.fromBufferAttribute(cp,t),Mn.end.fromBufferAttribute(V0,t);const r=new Ve,i=new Ve;ks.distanceSqToSegment(Mn.start,Mn.end,i,r),i.distanceTo(r)<Co*.5&&e.push({point:i,pointOnLine:r,distance:ks.origin.distanceTo(i),object:s,face:null,faceIndex:t,uv:null,uv2:null})}}function Rw(s,e,t){const n=e.projectionMatrix,i=s.material.resolution,o=s.matrixWorld,u=s.geometry,c=u.attributes.instanceStart,h=u.attributes.instanceEnd,f=-e.near;ks.at(1,Es),Es.w=1,Es.applyMatrix4(e.matrixWorldInverse),Es.applyMatrix4(n),Es.multiplyScalar(1/Es.w),Es.x*=i.x/2,Es.y*=i.y/2,Es.z=0,Ad.copy(Es),Md.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,m=c.count;d<m;d++){if(wn.fromBufferAttribute(c,d),xn.fromBufferAttribute(h,d),wn.w=1,xn.w=1,wn.applyMatrix4(Md),xn.applyMatrix4(Md),wn.z>f&&xn.z>f)continue;if(wn.z>f){const w=wn.z-xn.z,O=(wn.z-f)/w;wn.lerp(xn,O)}else if(xn.z>f){const w=xn.z-wn.z,O=(xn.z-f)/w;xn.lerp(wn,O)}wn.applyMatrix4(n),xn.applyMatrix4(n),wn.multiplyScalar(1/wn.w),xn.multiplyScalar(1/xn.w),wn.x*=i.x/2,wn.y*=i.y/2,xn.x*=i.x/2,xn.y*=i.y/2,Mn.start.copy(wn),Mn.start.z=0,Mn.end.copy(xn),Mn.end.z=0;const y=Mn.closestPointToPointParameter(Ad,!0);Mn.at(y,V_);const v=aS.lerp(wn.z,xn.z,y),T=v>=-1&&v<=1,x=Ad.distanceTo(V_)<Co*.5;if(T&&x){Mn.start.fromBufferAttribute(c,d),Mn.end.fromBufferAttribute(h,d),Mn.start.applyMatrix4(o),Mn.end.applyMatrix4(o);const w=new Ve,O=new Ve;ks.distanceSqToSegment(Mn.start,Mn.end,O,w),t.push({point:O,pointOnLine:w,distance:ks.origin.distanceTo(O),object:s,face:null,faceIndex:d,uv:null,uv2:null})}}}class G0 extends Uu{constructor(e=new $h,t=new ef({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,u=0,c=t.count;o<c;o++,u+=2)z_.fromBufferAttribute(t,o),B_.fromBufferAttribute(n,o),r[u]=u===0?0:r[u-1],r[u+1]=r[u]+z_.distanceTo(B_);const i=new np(r,2,1);return e.setAttribute("instanceDistanceStart",new Ea(i,1,0)),e.setAttribute("instanceDistanceEnd",new Ea(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ks=e.ray;const o=this.matrixWorld,u=this.geometry,c=this.material;Co=c.linewidth+i,cp=u.attributes.instanceStart,V0=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),Qc.copy(u.boundingSphere).applyMatrix4(o);let h;if(n)h=Co*.5;else{const d=Math.max(r.near,Qc.distanceToPoint(ks.origin));h=G_(r,d,c.resolution)}if(Qc.radius+=h,ks.intersectsSphere(Qc)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),Zc.copy(u.boundingBox).applyMatrix4(o);let f;if(n)f=Co*.5;else{const d=Math.max(r.near,Zc.distanceToPoint(ks.origin));f=G_(r,d,c.resolution)}Zc.expandByScalar(f),ks.intersectsBox(Zc)!==!1&&(n?Pw(this,t):Rw(this,r,t))}}class W0 extends G0{constructor(e=new B0,t=new ef({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}function Iw(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(s[t[n]],e[t[n]]))return!1;return!0}const Uw=V.createContext([]);function LD({box:s,multiple:e,children:t,onChange:n,border:r="1px solid #55aaff",backgroundColor:i="rgba(75, 160, 255, 0.1)",filter:o=c=>c,...u}){const{setEvents:c,camera:h,raycaster:f,gl:d,controls:m,size:_,get:y}=wt(),[v,T]=V.useState(!1),[x,w]=V.useReducer((k,{object:A,shift:M})=>A===void 0?[]:Array.isArray(A)?A:M?k.includes(A)?k.filter(D=>D!==A):[A,...k]:k[0]===A?[]:[A],[]);V.useEffect(()=>void(n==null?void 0:n(x)),[x]);const O=V.useCallback(k=>{k.stopPropagation(),w({object:o([k.object])[0],shift:e&&k.shiftKey})},[]),C=V.useCallback(k=>!v&&w({}),[v]),E=V.useRef(null);return V.useEffect(()=>{if(!s||!e)return;const k=new Dw(h,E.current),A=document.createElement("div");A.style.pointerEvents="none",A.style.border=r,A.style.backgroundColor=i,A.style.position="fixed";const M=new pt,D=new pt,U=new pt,R=y().events.enabled,P=m==null?void 0:m.enabled;let F=!1;function B(L,K){const{offsetX:ee,offsetY:Y}=L,{width:ie,height:ne}=_;K.set(ee/ie*2-1,-(Y/ne)*2+1)}function q(L){var K;m&&(m.enabled=!1),c({enabled:!1}),F=!0,(K=d.domElement.parentElement)==null||K.appendChild(A),A.style.left=`${L.clientX}px`,A.style.top=`${L.clientY}px`,A.style.width="0px",A.style.height="0px",M.x=L.clientX,M.y=L.clientY}function X(L){U.x=Math.max(M.x,L.clientX),U.y=Math.max(M.y,L.clientY),D.x=Math.min(M.x,L.clientX),D.y=Math.min(M.y,L.clientY),A.style.left=`${D.x}px`,A.style.top=`${D.y}px`,A.style.width=`${U.x-D.x}px`,A.style.height=`${U.y-D.y}px`}function J(){if(F){var L;m&&(m.enabled=P),c({enabled:R}),F=!1,(L=A.parentElement)==null||L.removeChild(A)}}function H(L){L.shiftKey&&(q(L),B(L,k.startPoint))}let z=[];function W(L){if(F){X(L),B(L,k.endPoint);const K=k.select().sort(ee=>ee.uuid).filter(ee=>ee.isMesh);Iw(K,z)||(z=K,w({object:o(K)}))}}function N(L){F&&J()}return document.addEventListener("pointerdown",H,{passive:!0}),document.addEventListener("pointermove",W,{passive:!0,capture:!0}),document.addEventListener("pointerup",N,{passive:!0}),()=>{document.removeEventListener("pointerdown",H),document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",N)}},[_.width,_.height,f,h,m,d]),V.createElement("group",ii({ref:E,onClick:O,onPointerOver:()=>T(!0),onPointerOut:()=>T(!1),onPointerMissed:C},u),V.createElement(Uw.Provider,{value:x},t))}const zD=V.forwardRef(function({points:e,color:t="black",vertexColors:n,linewidth:r,lineWidth:i,segments:o,dashed:u,...c},h){const f=wt(y=>y.size),d=V.useMemo(()=>o?new G0:new W0,[o]),[m]=V.useState(()=>new ef),_=V.useMemo(()=>{const y=o?new $h:new B0,v=e.map(T=>{const x=Array.isArray(T);return T instanceof Ve?[T.x,T.y,T.z]:T instanceof pt?[T.x,T.y,0]:x&&T.length===3?[T[0],T[1],T[2]]:x&&T.length===2?[T[0],T[1],0]:T});if(y.setPositions(v.flat()),n){const T=n.map(x=>x instanceof Cr?x.toArray():x);y.setColors(T.flat())}return y},[e,o,n]);return V.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),V.useLayoutEffect(()=>{u?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[u,m]),V.useEffect(()=>()=>_.dispose(),[_]),V.createElement("primitive",ii({object:d,ref:h},c),V.createElement("primitive",{object:_,attach:"geometry"}),V.createElement("primitive",ii({object:m,attach:"material",color:t,vertexColors:!!n,resolution:[f.width,f.height],linewidth:r??i,dashed:u},c)))});function Nw(){var s=Object.create(null);function e(r,i){var o=r.id,u=r.name,c=r.dependencies;c===void 0&&(c=[]);var h=r.init;h===void 0&&(h=function(){});var f=r.getTransferables;if(f===void 0&&(f=null),!s[o])try{c=c.map(function(m){return m&&m.isWorkerModule&&(e(m,function(_){if(_ instanceof Error)throw _}),m=s[m.id].value),m}),h=n("<"+u+">.init",h),f&&(f=n("<"+u+">.getTransferables",f));var d=null;typeof h=="function"?d=h.apply(void 0,c):console.error("worker module init function failed to rehydrate"),s[o]={id:o,value:d,getTransferables:f},i(d)}catch(m){m&&m.noLog||console.error(m),i(m)}}function t(r,i){var o,u=r.id,c=r.args;(!s[u]||typeof s[u].value!="function")&&i(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var h=(o=s[u]).value.apply(o,c);h&&typeof h.then=="function"?h.then(f,function(d){return i(d instanceof Error?d:new Error(""+d))}):f(h)}catch(d){i(d)}function f(d){try{var m=s[u].getTransferables&&s[u].getTransferables(d);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),i(d,m)}catch(_){console.error(_),i(_)}}}function n(r,i){var o=void 0;self.troikaDefine=function(c){return o=c};var u=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+i+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(c){console.error(c)}return URL.revokeObjectURL(u),delete self.troikaDefine,o}self.addEventListener("message",function(r){var i=r.data,o=i.messageId,u=i.action,c=i.data;try{u==="registerModule"&&e(c,function(h){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof h=="function"}})}),u==="callModule"&&t(c,function(h,f){h instanceof Error?postMessage({messageId:o,success:!1,error:h.message}):postMessage({messageId:o,success:!0,result:h},f||void 0)})}catch(h){postMessage({messageId:o,success:!1,error:h.stack})}})}function Fw(s){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=s.dependencies,n=s.init;t=Array.isArray(t)?t.map(function(i){return i&&i._getInitResult?i._getInitResult():i}):[];var r=Promise.all(t).then(function(i){return n.apply(null,i)});return e._getInitResult=function(){return r},r},e}var H0=function(){var s=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),s=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return H0=function(){return s},s},Lw=0,zw=0,Dd=!1,tu=Object.create(null),nu=Object.create(null),hp=Object.create(null);function Fu(s){if((!s||typeof s.init!="function")&&!Dd)throw new Error("requires `options.init` function");var e=s.dependencies,t=s.init,n=s.getTransferables,r=s.workerId;if(!H0())return Fw(s);r==null&&(r="#default");var i="workerModule"+ ++Lw,o=s.name||i,u=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(Dd=!0,h=Fu({workerId:r,name:"<"+o+"> function dependency: "+h.name,init:`function(){return (
`+ch(h)+`
)}`}),Dd=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function c(){for(var h=[],f=arguments.length;f--;)h[f]=arguments[f];if(!u){u=W_(r,"registerModule",c.workerModuleData);var d=function(){u=null,nu[r].delete(d)};(nu[r]||(nu[r]=new Set)).add(d)}return u.then(function(m){var _=m.isCallable;if(_)return W_(r,"callModule",{id:i,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:i,name:o,dependencies:e,init:ch(t),getTransferables:n&&ch(n)},c}function Bw(s){nu[s]&&nu[s].forEach(function(e){e()}),tu[s]&&(tu[s].terminate(),delete tu[s])}function ch(s){var e=s.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Vw(s){var e=tu[s];if(!e){var t=ch(Nw);e=tu[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var r=n.data,i=r.messageId,o=hp[i];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete hp[i],o(r)}}return e}function W_(s,e,t){return new Promise(function(n,r){var i=++zw;hp[i]=function(o){o.success?n(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},Vw(s).postMessage({messageId:i,action:e,data:t})})}function j0(){var s=function(e){function t(z,W,N,L,K,ee,Y,ie){var ne=1-Y;ie.x=ne*ne*z+2*ne*Y*N+Y*Y*K,ie.y=ne*ne*W+2*ne*Y*L+Y*Y*ee}function n(z,W,N,L,K,ee,Y,ie,ne,Z){var me=1-ne;Z.x=me*me*me*z+3*me*me*ne*N+3*me*ne*ne*K+ne*ne*ne*Y,Z.y=me*me*me*W+3*me*me*ne*L+3*me*ne*ne*ee+ne*ne*ne*ie}function r(z,W){for(var N=/([MLQCZ])([^MLQCZ]*)/g,L,K,ee,Y,ie;L=N.exec(z);){var ne=L[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Z){return parseFloat(Z)});switch(L[1]){case"M":Y=K=ne[0],ie=ee=ne[1];break;case"L":(ne[0]!==Y||ne[1]!==ie)&&W("L",Y,ie,Y=ne[0],ie=ne[1]);break;case"Q":{W("Q",Y,ie,Y=ne[2],ie=ne[3],ne[0],ne[1]);break}case"C":{W("C",Y,ie,Y=ne[4],ie=ne[5],ne[0],ne[1],ne[2],ne[3]);break}case"Z":(Y!==K||ie!==ee)&&W("L",Y,ie,K,ee);break}}}function i(z,W,N){N===void 0&&(N=16);var L={x:0,y:0};r(z,function(K,ee,Y,ie,ne,Z,me,ge,oe){switch(K){case"L":W(ee,Y,ie,ne);break;case"Q":{for(var ae=ee,Ee=Y,Re=1;Re<N;Re++)t(ee,Y,Z,me,ie,ne,Re/(N-1),L),W(ae,Ee,L.x,L.y),ae=L.x,Ee=L.y;break}case"C":{for(var $=ee,ce=Y,ve=1;ve<N;ve++)n(ee,Y,Z,me,ge,oe,ie,ne,ve/(N-1),L),W($,ce,L.x,L.y),$=L.x,ce=L.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,h={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(z,W){var N=z.getContext?z.getContext("webgl",h):z,L=c.get(N);if(!L){let me=function($){var ce=ee[$];if(!ce&&(ce=ee[$]=N.getExtension($),!ce))throw new Error($+" not supported");return ce},ge=function($,ce){var ve=N.createShader(ce);return N.shaderSource(ve,$),N.compileShader(ve),ve},oe=function($,ce,ve,le){if(!Y[$]){var fe={},de={},ue=N.createProgram();N.attachShader(ue,ge(ce,N.VERTEX_SHADER)),N.attachShader(ue,ge(ve,N.FRAGMENT_SHADER)),N.linkProgram(ue),Y[$]={program:ue,transaction:function(Te){N.useProgram(ue),Te({setUniform:function(Se,Je){for(var Ge=[],Ae=arguments.length-2;Ae-- >0;)Ge[Ae]=arguments[Ae+2];var We=de[Je]||(de[Je]=N.getUniformLocation(ue,Je));N["uniform"+Se].apply(N,[We].concat(Ge))},setAttribute:function(Se,Je,Ge,Ae,We){var et=fe[Se];et||(et=fe[Se]={buf:N.createBuffer(),loc:N.getAttribLocation(ue,Se),data:null}),N.bindBuffer(N.ARRAY_BUFFER,et.buf),N.vertexAttribPointer(et.loc,Je,N.FLOAT,!1,0,0),N.enableVertexAttribArray(et.loc),K?N.vertexAttribDivisor(et.loc,Ae):me("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(et.loc,Ae),We!==et.data&&(N.bufferData(N.ARRAY_BUFFER,We,Ge),et.data=We)}})}}}Y[$].transaction(le)},ae=function($,ce){ne++;try{N.activeTexture(N.TEXTURE0+ne);var ve=ie[$];ve||(ve=ie[$]=N.createTexture(),N.bindTexture(N.TEXTURE_2D,ve),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.NEAREST),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.NEAREST)),N.bindTexture(N.TEXTURE_2D,ve),ce(ve,ne)}finally{ne--}},Ee=function($,ce,ve){var le=N.createFramebuffer();Z.push(le),N.bindFramebuffer(N.FRAMEBUFFER,le),N.activeTexture(N.TEXTURE0+ce),N.bindTexture(N.TEXTURE_2D,$),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,$,0);try{ve(le)}finally{N.deleteFramebuffer(le),N.bindFramebuffer(N.FRAMEBUFFER,Z[--Z.length-1]||null)}},Re=function(){ee={},Y={},ie={},ne=-1,Z.length=0};var K=typeof WebGL2RenderingContext<"u"&&N instanceof WebGL2RenderingContext,ee={},Y={},ie={},ne=-1,Z=[];N.canvas.addEventListener("webglcontextlost",function($){Re(),$.preventDefault()},!1),c.set(N,L={gl:N,isWebGL2:K,getExtension:me,withProgram:oe,withTexture:ae,withTextureFramebuffer:Ee,handleContextLoss:Re})}W(L)}function d(z,W,N,L,K,ee,Y,ie){Y===void 0&&(Y=15),ie===void 0&&(ie=null),f(z,function(ne){var Z=ne.gl,me=ne.withProgram,ge=ne.withTexture;ge("copy",function(oe,ae){Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,K,ee,0,Z.RGBA,Z.UNSIGNED_BYTE,W),me("copy",o,u,function(Ee){var Re=Ee.setUniform,$=Ee.setAttribute;$("aUV",2,Z.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Re("1i","image",ae),Z.bindFramebuffer(Z.FRAMEBUFFER,ie||null),Z.disable(Z.BLEND),Z.colorMask(Y&8,Y&4,Y&2,Y&1),Z.viewport(N,L,K,ee),Z.scissor(N,L,K,ee),Z.drawArrays(Z.TRIANGLES,0,3)})})})}function m(z,W,N){var L=z.width,K=z.height;f(z,function(ee){var Y=ee.gl,ie=new Uint8Array(L*K*4);Y.readPixels(0,0,L,K,Y.RGBA,Y.UNSIGNED_BYTE,ie),z.width=W,z.height=N,d(Y,ie,0,0,L,K)})}var _=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:d,resizeWebGLCanvasWithoutClearing:m});function y(z,W,N,L,K,ee){ee===void 0&&(ee=1);var Y=new Uint8Array(z*W),ie=L[2]-L[0],ne=L[3]-L[1],Z=[];i(N,function($,ce,ve,le){Z.push({x1:$,y1:ce,x2:ve,y2:le,minX:Math.min($,ve),minY:Math.min(ce,le),maxX:Math.max($,ve),maxY:Math.max(ce,le)})}),Z.sort(function($,ce){return $.maxX-ce.maxX});for(var me=0;me<z;me++)for(var ge=0;ge<W;ge++){var oe=Ee(L[0]+ie*(me+.5)/z,L[1]+ne*(ge+.5)/W),ae=Math.pow(1-Math.abs(oe)/K,ee)/2;oe<0&&(ae=1-ae),ae=Math.max(0,Math.min(255,Math.round(ae*255))),Y[ge*z+me]=ae}return Y;function Ee($,ce){for(var ve=1/0,le=1/0,fe=Z.length;fe--;){var de=Z[fe];if(de.maxX+le<=$)break;if($+le>de.minX&&ce-le<de.maxY&&ce+le>de.minY){var ue=x($,ce,de.x1,de.y1,de.x2,de.y2);ue<ve&&(ve=ue,le=Math.sqrt(ve))}}return Re($,ce)&&(le=-le),le}function Re($,ce){for(var ve=0,le=Z.length;le--;){var fe=Z[le];if(fe.maxX<=$)break;var de=fe.y1>ce!=fe.y2>ce&&$<(fe.x2-fe.x1)*(ce-fe.y1)/(fe.y2-fe.y1)+fe.x1;de&&(ve+=fe.y1<fe.y2?1:-1)}return ve!==0}}function v(z,W,N,L,K,ee,Y,ie,ne,Z){ee===void 0&&(ee=1),ie===void 0&&(ie=0),ne===void 0&&(ne=0),Z===void 0&&(Z=0),T(z,W,N,L,K,ee,Y,null,ie,ne,Z)}function T(z,W,N,L,K,ee,Y,ie,ne,Z,me){ee===void 0&&(ee=1),ne===void 0&&(ne=0),Z===void 0&&(Z=0),me===void 0&&(me=0);for(var ge=y(z,W,N,L,K,ee),oe=new Uint8Array(ge.length*4),ae=0;ae<ge.length;ae++)oe[ae*4+me]=ge[ae];d(Y,oe,ne,Z,z,W,1<<3-me,ie)}function x(z,W,N,L,K,ee){var Y=K-N,ie=ee-L,ne=Y*Y+ie*ie,Z=ne?Math.max(0,Math.min(1,((z-N)*Y+(W-L)*ie)/ne)):0,me=z-(N+Z*Y),ge=W-(L+Z*ie);return me*me+ge*ge}var w=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:v,generateIntoFramebuffer:T}),O="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",E="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",k=new Float32Array([0,0,2,0,0,2]),A=null,M=!1,D={},U=new WeakMap;function R(z){if(!M&&!q(z))throw new Error("WebGL generation not supported")}function P(z,W,N,L,K,ee,Y){if(ee===void 0&&(ee=1),Y===void 0&&(Y=null),!Y&&(Y=A,!Y)){var ie=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ie)throw new Error("OffscreenCanvas or DOM canvas not supported");Y=A=ie.getContext("webgl",{depth:!1})}R(Y);var ne=new Uint8Array(z*W*4);f(Y,function(oe){var ae=oe.gl,Ee=oe.withTexture,Re=oe.withTextureFramebuffer;Ee("readable",function($,ce){ae.texImage2D(ae.TEXTURE_2D,0,ae.RGBA,z,W,0,ae.RGBA,ae.UNSIGNED_BYTE,null),Re($,ce,function(ve){B(z,W,N,L,K,ee,ae,ve,0,0,0),ae.readPixels(0,0,z,W,ae.RGBA,ae.UNSIGNED_BYTE,ne)})})});for(var Z=new Uint8Array(z*W),me=0,ge=0;me<ne.length;me+=4)Z[ge++]=ne[me];return Z}function F(z,W,N,L,K,ee,Y,ie,ne,Z){ee===void 0&&(ee=1),ie===void 0&&(ie=0),ne===void 0&&(ne=0),Z===void 0&&(Z=0),B(z,W,N,L,K,ee,Y,null,ie,ne,Z)}function B(z,W,N,L,K,ee,Y,ie,ne,Z,me){ee===void 0&&(ee=1),ne===void 0&&(ne=0),Z===void 0&&(Z=0),me===void 0&&(me=0),R(Y);var ge=[];i(N,function(oe,ae,Ee,Re){ge.push(oe,ae,Ee,Re)}),ge=new Float32Array(ge),f(Y,function(oe){var ae=oe.gl,Ee=oe.isWebGL2,Re=oe.getExtension,$=oe.withProgram,ce=oe.withTexture,ve=oe.withTextureFramebuffer,le=oe.handleContextLoss;if(ce("rawDistances",function(fe,de){(z!==fe._lastWidth||W!==fe._lastHeight)&&ae.texImage2D(ae.TEXTURE_2D,0,ae.RGBA,fe._lastWidth=z,fe._lastHeight=W,0,ae.RGBA,ae.UNSIGNED_BYTE,null),$("main",O,C,function(ue){var Ce=ue.setAttribute,Te=ue.setUniform,we=!Ee&&Re("ANGLE_instanced_arrays"),Se=!Ee&&Re("EXT_blend_minmax");Ce("aUV",2,ae.STATIC_DRAW,0,k),Ce("aLineSegment",4,ae.DYNAMIC_DRAW,1,ge),Te.apply(void 0,["4f","uGlyphBounds"].concat(L)),Te("1f","uMaxDistance",K),Te("1f","uExponent",ee),ve(fe,de,function(Je){ae.enable(ae.BLEND),ae.colorMask(!0,!0,!0,!0),ae.viewport(0,0,z,W),ae.scissor(0,0,z,W),ae.blendFunc(ae.ONE,ae.ONE),ae.blendEquationSeparate(ae.FUNC_ADD,Ee?ae.MAX:Se.MAX_EXT),ae.clear(ae.COLOR_BUFFER_BIT),Ee?ae.drawArraysInstanced(ae.TRIANGLES,0,3,ge.length/4):we.drawArraysInstancedANGLE(ae.TRIANGLES,0,3,ge.length/4)})}),$("post",o,E,function(ue){ue.setAttribute("aUV",2,ae.STATIC_DRAW,0,k),ue.setUniform("1i","tex",de),ae.bindFramebuffer(ae.FRAMEBUFFER,ie),ae.disable(ae.BLEND),ae.colorMask(me===0,me===1,me===2,me===3),ae.viewport(ne,Z,z,W),ae.scissor(ne,Z,z,W),ae.drawArrays(ae.TRIANGLES,0,3)})}),ae.isContextLost())throw le(),new Error("webgl context lost")})}function q(z){var W=!z||z===A?D:z.canvas||z,N=U.get(W);if(N===void 0){M=!0;var L=null;try{var K=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ee=P(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,z);N=ee&&K.length===ee.length&&ee.every(function(Y,ie){return Y===K[ie]}),N||(L="bad trial run results",console.info(K,ee))}catch(Y){N=!1,L=Y.message}L&&console.warn("WebGL SDF generation not supported:",L),M=!1,U.set(W,N)}return N}var X=Object.freeze({__proto__:null,generate:P,generateIntoCanvas:F,generateIntoFramebuffer:B,isSupported:q});function J(z,W,N,L,K,ee){K===void 0&&(K=Math.max(L[2]-L[0],L[3]-L[1])/2),ee===void 0&&(ee=1);try{return P.apply(X,arguments)}catch(Y){return console.info("WebGL SDF generation failed, falling back to JS",Y),y.apply(w,arguments)}}function H(z,W,N,L,K,ee,Y,ie,ne,Z){K===void 0&&(K=Math.max(L[2]-L[0],L[3]-L[1])/2),ee===void 0&&(ee=1),ie===void 0&&(ie=0),ne===void 0&&(ne=0),Z===void 0&&(Z=0);try{return F.apply(X,arguments)}catch(me){return console.info("WebGL SDF generation failed, falling back to JS",me),v.apply(w,arguments)}}return e.forEachPathCommand=r,e.generate=J,e.generateIntoCanvas=H,e.javascript=w,e.pathToLineSegments=i,e.webgl=X,e.webglUtils=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return s}function Gw(){var s=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach(function(le,fe){n[le]=1<<fe+1,r[n[le]]=le}),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,u=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,c=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,h=n.S|n.WS|n.B|i|n.PDI|c,f=null;function d(){if(!f){f=new Map;var le=function(de){if(t.hasOwnProperty(de)){var ue=0;t[de].split(",").forEach(function(Ce){var Te=Ce.split("+"),we=Te[0],Se=Te[1];we=parseInt(we,36),Se=Se?parseInt(Se,36):0,f.set(ue+=we,n[de]);for(var Je=0;Je<Se;Je++)f.set(++ue,n[de])})}};for(var fe in t)le(fe)}}function m(le){return d(),f.get(le.codePointAt(0))||n.L}function _(le){return r[m(le)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(le,fe){var de=36,ue=0,Ce=new Map,Te=fe&&new Map,we;return le.split(",").forEach(function Se(Je){if(Je.indexOf("+")!==-1)for(var Ge=+Je;Ge--;)Se(we);else{we=Je;var Ae=Je.split(">"),We=Ae[0],et=Ae[1];We=String.fromCodePoint(ue+=parseInt(We,de)),et=String.fromCodePoint(ue+=parseInt(et,de)),Ce.set(We,et),fe&&Te.set(et,We)}}),{map:Ce,reverseMap:Te}}var T,x,w;function O(){if(!T){var le=v(y.pairs,!0),fe=le.map,de=le.reverseMap;T=fe,x=de,w=v(y.canonical,!1).map}}function C(le){return O(),T.get(le)||null}function E(le){return O(),x.get(le)||null}function k(le){return O(),w.get(le)||null}var A=n.L,M=n.R,D=n.EN,U=n.ES,R=n.ET,P=n.AN,F=n.CS,B=n.B,q=n.S,X=n.ON,J=n.BN,H=n.NSM,z=n.AL,W=n.LRO,N=n.RLO,L=n.LRE,K=n.RLE,ee=n.PDF,Y=n.LRI,ie=n.RLI,ne=n.FSI,Z=n.PDI;function me(le,fe){for(var de=125,ue=new Uint32Array(le.length),Ce=0;Ce<le.length;Ce++)ue[Ce]=m(le[Ce]);var Te=new Map;function we(fn,Gn){var qt=ue[fn];ue[fn]=Gn,Te.set(qt,Te.get(qt)-1),qt&u&&Te.set(u,Te.get(u)-1),Te.set(Gn,(Te.get(Gn)||0)+1),Gn&u&&Te.set(u,(Te.get(u)||0)+1)}for(var Se=new Uint8Array(le.length),Je=new Map,Ge=[],Ae=null,We=0;We<le.length;We++)Ae||Ge.push(Ae={start:We,end:le.length-1,level:fe==="rtl"?1:fe==="ltr"?0:ea(We,!1)}),ue[We]&B&&(Ae.end=We,Ae=null);for(var et=K|L|N|W|i|Z|ee|B,Lt=function(fn){return fn+(fn&1?1:2)},Be=function(fn){return fn+(fn&1?2:1)},gt=0;gt<Ge.length;gt++){Ae=Ge[gt];var Ye=[{_level:Ae.level,_override:0,_isolate:0}],Ie=void 0,it=0,ut=0,zt=0;Te.clear();for(var je=Ae.start;je<=Ae.end;je++){var bt=ue[je];if(Ie=Ye[Ye.length-1],Te.set(bt,(Te.get(bt)||0)+1),bt&u&&Te.set(u,(Te.get(u)||0)+1),bt&et)if(bt&(K|L)){Se[je]=Ie._level;var yn=(bt===K?Be:Lt)(Ie._level);yn<=de&&!it&&!ut?Ye.push({_level:yn,_override:0,_isolate:0}):it||ut++}else if(bt&(N|W)){Se[je]=Ie._level;var Zr=(bt===N?Be:Lt)(Ie._level);Zr<=de&&!it&&!ut?Ye.push({_level:Zr,_override:bt&N?M:A,_isolate:0}):it||ut++}else if(bt&i){bt&ne&&(bt=ea(je+1,!0)===1?ie:Y),Se[je]=Ie._level,Ie._override&&we(je,Ie._override);var Ls=(bt===ie?Be:Lt)(Ie._level);Ls<=de&&it===0&&ut===0?(zt++,Ye.push({_level:Ls,_override:0,_isolate:1,_isolInitIndex:je})):it++}else if(bt&Z){if(it>0)it--;else if(zt>0){for(ut=0;!Ye[Ye.length-1]._isolate;)Ye.pop();var Qr=Ye[Ye.length-1]._isolInitIndex;Qr!=null&&(Je.set(Qr,je),Je.set(je,Qr)),Ye.pop(),zt--}Ie=Ye[Ye.length-1],Se[je]=Ie._level,Ie._override&&we(je,Ie._override)}else bt&ee?(it===0&&(ut>0?ut--:!Ie._isolate&&Ye.length>1&&(Ye.pop(),Ie=Ye[Ye.length-1])),Se[je]=Ie._level):bt&B&&(Se[je]=Ae.level);else Se[je]=Ie._level,Ie._override&&bt!==J&&we(je,Ie._override)}for(var Nn=[],Fn=null,Ot=Ae.start;Ot<=Ae.end;Ot++){var mi=ue[Ot];if(!(mi&c)){var Mt=Se[Ot],Dt=mi&i,cr=mi===Z;Fn&&Mt===Fn._level?(Fn._end=Ot,Fn._endsWithIsolInit=Dt):Nn.push(Fn={_start:Ot,_end:Ot,_level:Mt,_startsWithPDI:cr,_endsWithIsolInit:Dt})}}for(var Ln=[],ot=0;ot<Nn.length;ot++){var jt=Nn[ot];if(!jt._startsWithPDI||jt._startsWithPDI&&!Je.has(jt._start)){for(var Qn=[Fn=jt],Bt=void 0;Fn&&Fn._endsWithIsolInit&&(Bt=Je.get(Fn._end))!=null;)for(var tn=ot+1;tn<Nn.length;tn++)if(Nn[tn]._start===Bt){Qn.push(Fn=Nn[tn]);break}for(var Tn=[],ds=0;ds<Qn.length;ds++)for(var hr=Qn[ds],zs=hr._start;zs<=hr._end;zs++)Tn.push(zs);for(var wf=Se[Tn[0]],Qu=Ae.level,Qi=Tn[0]-1;Qi>=0;Qi--)if(!(ue[Qi]&c)){Qu=Se[Qi];break}var al=Tn[Tn.length-1],xf=Se[al],Ku=Ae.level;if(!(ue[al]&i)){for(var jo=al+1;jo<=Ae.end;jo++)if(!(ue[jo]&c)){Ku=Se[jo];break}}Ln.push({_seqIndices:Tn,_sosType:Math.max(Qu,wf)%2?M:A,_eosType:Math.max(Ku,xf)%2?M:A})}}for(var ll=0;ll<Ln.length;ll++){var ul=Ln[ll],be=ul._seqIndices,Kr=ul._sosType,cl=ul._eosType,ps=Se[be[0]]&1?M:A;if(Te.get(H))for(var qo=0;qo<be.length;qo++){var Yo=be[qo];if(ue[Yo]&H){for(var ms=Kr,fr=qo-1;fr>=0;fr--)if(!(ue[be[fr]]&c)){ms=ue[be[fr]];break}we(Yo,ms&(i|Z)?X:ms)}}if(Te.get(D))for(var at=0;at<be.length;at++){var ct=be[at];if(ue[ct]&D)for(var dr=at-1;dr>=-1;dr--){var on=dr===-1?Kr:ue[be[dr]];if(on&o){on===z&&we(ct,P);break}}}if(Te.get(z))for(var un=0;un<be.length;un++){var gs=be[un];ue[gs]&z&&we(gs,M)}if(Te.get(U)||Te.get(F))for(var Dr=1;Dr<be.length-1;Dr++){var cn=be[Dr];if(ue[cn]&(U|F)){for(var Jr=0,Xo=0,Zo=Dr-1;Zo>=0&&(Jr=ue[be[Zo]],!!(Jr&c));Zo--);for(var gi=Dr+1;gi<be.length&&(Xo=ue[be[gi]],!!(Xo&c));gi++);Jr===Xo&&(ue[cn]===U?Jr===D:Jr&(D|P))&&we(cn,Jr)}}if(Te.get(D))for(var pr=0;pr<be.length;pr++){var mr=be[pr];if(ue[mr]&D){for(var Qo=pr-1;Qo>=0&&ue[be[Qo]]&(R|c);Qo--)we(be[Qo],D);for(pr++;pr<be.length&&ue[be[pr]]&(R|c|D);pr++)ue[be[pr]]!==D&&we(be[pr],D)}}if(Te.get(R)||Te.get(U)||Te.get(F))for(var Ki=0;Ki<be.length;Ki++){var Ju=be[Ki];if(ue[Ju]&(R|U|F)){we(Ju,X);for(var Bs=Ki-1;Bs>=0&&ue[be[Bs]]&c;Bs--)we(be[Bs],X);for(var Vs=Ki+1;Vs<be.length&&ue[be[Vs]]&c;Vs++)we(be[Vs],X)}}if(Te.get(D))for(var Gs=0,Ji=Kr;Gs<be.length;Gs++){var $u=be[Gs],hl=ue[$u];hl&D?Ji===A&&we($u,A):hl&o&&(Ji=hl)}if(Te.get(u)){var Ws=M|D|P,Ko=Ws|A,_s=[];{for(var _i=[],vs=0;vs<be.length;vs++)if(ue[be[vs]]&u){var Qe=le[be[vs]],fl=void 0;if(C(Qe)!==null)if(_i.length<63)_i.push({char:Qe,seqIndex:vs});else break;else if((fl=E(Qe))!==null)for(var Hs=_i.length-1;Hs>=0;Hs--){var Jo=_i[Hs].char;if(Jo===fl||Jo===E(k(Qe))||C(k(Jo))===Qe){_s.push([_i[Hs].seqIndex,vs]),_i.length=Hs;break}}}_s.sort(function(fn,Gn){return fn[0]-Gn[0]})}for(var dl=0;dl<_s.length;dl++){for(var ec=_s[dl],It=ec[0],$i=ec[1],tc=!1,zn=0,pl=It+1;pl<$i;pl++){var eo=be[pl];if(ue[eo]&Ko){tc=!0;var gr=ue[eo]&Ws?M:A;if(gr===ps){zn=gr;break}}}if(tc&&!zn){zn=Kr;for(var ml=It-1;ml>=0;ml--){var nc=be[ml];if(ue[nc]&Ko){var _r=ue[nc]&Ws?M:A;_r!==ps?zn=_r:zn=ps;break}}}if(zn){if(ue[be[It]]=ue[be[$i]]=zn,zn!==ps){for(var Bn=It+1;Bn<be.length;Bn++)if(!(ue[be[Bn]]&c)){m(le[be[Bn]])&H&&(ue[be[Bn]]=zn);break}}if(zn!==ps){for(var ys=$i+1;ys<be.length;ys++)if(!(ue[be[ys]]&c)){m(le[be[ys]])&H&&(ue[be[ys]]=zn);break}}}}for(var Pr=0;Pr<be.length;Pr++)if(ue[be[Pr]]&u){for(var gl=Pr,_l=Pr,Kn=Kr,to=Pr-1;to>=0;to--)if(ue[be[to]]&c)gl=to;else{Kn=ue[be[to]]&Ws?M:A;break}for(var no=cl,ro=Pr+1;ro<be.length;ro++)if(ue[be[ro]]&(u|c))_l=ro;else{no=ue[be[ro]]&Ws?M:A;break}for(var Vn=gl;Vn<=_l;Vn++)ue[be[Vn]]=Kn===no?Kn:ps;Pr=_l}}}for(var hn=Ae.start;hn<=Ae.end;hn++){var $o=Se[hn],$r=ue[hn];if($o&1?$r&(A|D|P)&&Se[hn]++:$r&M?Se[hn]++:$r&(P|D)&&(Se[hn]+=2),$r&c&&(Se[hn]=hn===0?Ae.level:Se[hn-1]),hn===Ae.end||m(le[hn])&(q|B))for(var vi=hn;vi>=0&&m(le[vi])&h;vi--)Se[vi]=Ae.level}}return{levels:Se,paragraphs:Ge};function ea(fn,Gn){for(var qt=fn;qt<le.length;qt++){var Yt=ue[qt];if(Yt&(M|z))return 1;if(Yt&(B|A)||Gn&&Yt===Z)return 0;if(Yt&i){var vr=rc(qt);qt=vr===-1?le.length:vr}}return 0}function rc(fn){for(var Gn=1,qt=fn+1;qt<le.length;qt++){var Yt=ue[qt];if(Yt&B)break;if(Yt&Z){if(--Gn===0)return qt}else Yt&i&&Gn++}return-1}}var ge="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",oe;function ae(){if(!oe){var le=v(ge,!0),fe=le.map,de=le.reverseMap;de.forEach(function(ue,Ce){fe.set(Ce,ue)}),oe=fe}}function Ee(le){return ae(),oe.get(le)||null}function Re(le,fe,de,ue){var Ce=le.length;de=Math.max(0,de==null?0:+de),ue=Math.min(Ce-1,ue==null?Ce-1:+ue);for(var Te=new Map,we=de;we<=ue;we++)if(fe[we]&1){var Se=Ee(le[we]);Se!==null&&Te.set(we,Se)}return Te}function $(le,fe,de,ue){var Ce=le.length;de=Math.max(0,de==null?0:+de),ue=Math.min(Ce-1,ue==null?Ce-1:+ue);var Te=[];return fe.paragraphs.forEach(function(we){var Se=Math.max(de,we.start),Je=Math.min(ue,we.end);if(Se<Je){for(var Ge=fe.levels.slice(Se,Je+1),Ae=Je;Ae>=Se&&m(le[Ae])&h;Ae--)Ge[Ae]=we.level;for(var We=we.level,et=1/0,Lt=0;Lt<Ge.length;Lt++){var Be=Ge[Lt];Be>We&&(We=Be),Be<et&&(et=Be|1)}for(var gt=We;gt>=et;gt--)for(var Ye=0;Ye<Ge.length;Ye++)if(Ge[Ye]>=gt){for(var Ie=Ye;Ye+1<Ge.length&&Ge[Ye+1]>=gt;)Ye++;Ye>Ie&&Te.push([Ie+Se,Ye+Se])}}}),Te}function ce(le,fe,de,ue){var Ce=ve(le,fe,de,ue),Te=[].concat(le);return Ce.forEach(function(we,Se){Te[Se]=(fe.levels[we]&1?Ee(le[we]):null)||le[we]}),Te.join("")}function ve(le,fe,de,ue){for(var Ce=$(le,fe,de,ue),Te=[],we=0;we<le.length;we++)Te[we]=we;return Ce.forEach(function(Se){for(var Je=Se[0],Ge=Se[1],Ae=Te.slice(Je,Ge+1),We=Ae.length;We--;)Te[Ge-We]=Ae[We]}),Te}return e.closingToOpeningBracket=E,e.getBidiCharType=m,e.getBidiCharTypeName=_,e.getCanonicalBracket=k,e.getEmbeddingLevels=me,e.getMirroredCharacter=Ee,e.getMirroredCharactersMap=Re,e.getReorderSegments=$,e.getReorderedIndices=ve,e.getReorderedString=ce,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return s}const q0=/\bvoid\s+main\s*\(\s*\)\s*{/g;function fp(s){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,r){let i=uS[r];return i?fp(i):n}return s.replace(e,t)}const En=[];for(let s=0;s<256;s++)En[s]=(s<16?"0":"")+s.toString(16);function Ww(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(En[s&255]+En[s>>8&255]+En[s>>16&255]+En[s>>24&255]+"-"+En[e&255]+En[e>>8&255]+"-"+En[e>>16&15|64]+En[e>>24&255]+"-"+En[t&63|128]+En[t>>8&255]+"-"+En[t>>16&255]+En[t>>24&255]+En[n&255]+En[n>>8&255]+En[n>>16&255]+En[n>>24&255]).toUpperCase()}const po=Object.assign||function(){let s=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},Hw=Date.now(),H_=new WeakMap,j_=new Map;let jw=1e10;function dp(s,e){const t=Zw(e);let n=H_.get(s);if(n||H_.set(s,n=Object.create(null)),n[t])return new n[t];const r=`_onBeforeCompile${t}`,i=function(h,f){s.onBeforeCompile.call(this,h,f);const d=this.customProgramCacheKey()+"|"+h.vertexShader+"|"+h.fragmentShader;let m=j_[d];if(!m){const _=qw(this,h,e,t);m=j_[d]=_}h.vertexShader=m.vertexShader,h.fragmentShader=m.fragmentShader,po(h.uniforms,this.uniforms),e.timeUniform&&(h.uniforms[e.timeUniform]={get value(){return Date.now()-Hw}}),this[r]&&this[r](h)},o=function(){return u(e.chained?s:s.clone())},u=function(h){const f=Object.create(h,c);return Object.defineProperty(f,"baseMaterial",{value:s}),Object.defineProperty(f,"id",{value:jw++}),f.uuid=Ww(),f.uniforms=po({},h.uniforms,e.uniforms),f.defines=po({},h.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=po({},h.extensions,e.extensions),f._listeners=void 0,f},c={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return i},set(h){this[r]=h}},copy:{writable:!0,configurable:!0,value:function(h){return s.copy.call(this,h),!s.isShaderMaterial&&!s.isDerivedMaterial&&(po(this.extensions,h.extensions),po(this.defines,h.defines),po(this.uniforms,rp.clone(h.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const h=new s.constructor;return u(h).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let h=this._depthMaterial;return h||(h=this._depthMaterial=dp(s.isDerivedMaterial?s.getDepthMaterial():new l0({depthPacking:vh}),e),h.defines.IS_DEPTH_MATERIAL="",h.uniforms=this.uniforms),h}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let h=this._distanceMaterial;return h||(h=this._distanceMaterial=dp(s.isDerivedMaterial?s.getDistanceMaterial():new lS,e),h.defines.IS_DISTANCE_MATERIAL="",h.uniforms=this.uniforms),h}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:h,_distanceMaterial:f}=this;h&&h.dispose(),f&&f.dispose(),s.dispose.call(this)}}};return n[t]=o,new o}function qw(s,{vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:u,vertexTransform:c,fragmentDefs:h,fragmentMainIntro:f,fragmentMainOutro:d,fragmentColorTransform:m,customRewriter:_,timeUniform:y}=n;if(i=i||"",o=o||"",u=u||"",h=h||"",f=f||"",d=d||"",(c||_)&&(e=fp(e)),(m||_)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=fp(t)),_){let v=_({vertexShader:e,fragmentShader:t});e=v.vertexShader,t=v.fragmentShader}if(m){let v=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,T=>(v.push(T),"")),d=`${m}
${v.join(`
`)}
${d}`}if(y){const v=`
uniform float ${y};
`;i=v+i,h=v+h}return c&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,i=`${i}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,T,x,w)=>/\battribute\s+vec[23]\s+$/.test(w.substr(0,x))?T:`troika_${T}_${r}`),s.map&&s.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=q_(e,r,i,o,u),t=q_(t,r,h,f,d),{vertexShader:e,fragmentShader:t}}function q_(s,e,t,n,r){return(n||r||t)&&(s=s.replace(q0,`
${t}
void troikaOrigMain${e}() {`),s+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${r}
}`),s}function Yw(s,e){return s==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Xw=0;const Y_=new Map;function Zw(s){const e=JSON.stringify(s,Yw);let t=Y_.get(e);return t==null&&Y_.set(e,t=++Xw),t}function Qw(s,e,t){const{defaultFontURL:n}=t,r=Object.create(null),i=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",c=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function h(w,O){function C(){const E=k=>{console.error(`Failure loading font ${w}${w===n?"":"; trying fallback"}`,k),w!==n&&(w=n,C())};try{const k=new XMLHttpRequest;k.open("get",w,!0),k.responseType="arraybuffer",k.onload=function(){if(k.status>=400)E(new Error(k.statusText));else if(k.status>0)try{const A=s(k.response);O(A)}catch(A){E(A)}},k.onerror=E,k.send()}catch(k){E(k)}}C()}function f(w,O){w||(w=n);let C=r[w];C?C.pending?C.pending.push(O):O(C):(r[w]={pending:[O]},h(w,E=>{let k=r[w].pending;r[w]=E,k.forEach(A=>A(E))}))}function d({text:w="",font:O=n,sdfGlyphSize:C=64,fontSize:E=1,letterSpacing:k=0,lineHeight:A="normal",maxWidth:M=i,direction:D,textAlign:U="left",textIndent:R=0,whiteSpace:P="normal",overflowWrap:F="normal",anchorX:B=0,anchorY:q=0,includeCaretPositions:X=!1,chunkedBoundsSize:J=8192,colorRanges:H=null},z,W=!1){const N=v(),L={fontLoad:0,typesetting:0};w.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),w=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),E=+E,k=+k,M=+M,A=A||"normal",R=+R,f(O,K=>{const ee=isFinite(M);let Y=null,ie=null,ne=null,Z=null,me=null,ge=null,oe=null,ae=0,Ee=0,Re=P!=="nowrap";const{ascender:$,descender:ce,unitsPerEm:ve,lineGap:le,capHeight:fe,xHeight:de}=K;L.fontLoad=v()-N;const ue=v(),Ce=E/ve;A==="normal"&&(A=($-ce+le)/ve),A=A*E;const Te=(A-($-ce)*Ce)/2,we=-($*Ce+Te),Se=Math.min(A,($-ce)*Ce),Je=($+ce)/2*Ce-Se/2;let Ge=R,Ae=new T;const We=[Ae];K.forEachGlyph(w,E,k,(Be,gt,Ye)=>{const Ie=w.charAt(Ye),it=Be.advanceWidth*Ce,ut=Ae.count;let zt;if("isEmpty"in Be||(Be.isWhitespace=!!Ie&&new RegExp(u).test(Ie),Be.canBreakAfter=!!Ie&&c.test(Ie),Be.isEmpty=Be.xMin===Be.xMax||Be.yMin===Be.yMax||o.test(Ie)),!Be.isWhitespace&&!Be.isEmpty&&Ee++,Re&&ee&&!Be.isWhitespace&&gt+it+Ge>M&&ut){if(Ae.glyphAt(ut-1).glyphObj.canBreakAfter)zt=new T,Ge=-gt;else for(let bt=ut;bt--;)if(bt===0&&F==="break-word"){zt=new T,Ge=-gt;break}else if(Ae.glyphAt(bt).glyphObj.canBreakAfter){zt=Ae.splitAt(bt+1);const yn=zt.glyphAt(0).x;Ge-=yn;for(let Zr=zt.count;Zr--;)zt.glyphAt(Zr).x-=yn;break}zt&&(Ae.isSoftWrapped=!0,Ae=zt,We.push(Ae),ae=M)}let je=Ae.glyphAt(Ae.count);je.glyphObj=Be,je.x=gt+Ge,je.width=it,je.charIndex=Ye,Ie===`
`&&(Ae=new T,We.push(Ae),Ge=-(gt+it+k*E)+R)}),We.forEach(Be=>{for(let gt=Be.count;gt--;){let{glyphObj:Ye,x:Ie,width:it}=Be.glyphAt(gt);if(!Ye.isWhitespace){Be.width=Ie+it,Be.width>ae&&(ae=Be.width);return}}});let et=0,Lt=0;if(B&&(typeof B=="number"?et=-B:typeof B=="string"&&(et=-ae*(B==="left"?0:B==="center"?.5:B==="right"?1:_(B)))),q){if(typeof q=="number")Lt=-q;else if(typeof q=="string"){let Be=We.length*A;Lt=q==="top"?0:q==="top-baseline"?-we:q==="top-cap"?-we-fe*Ce:q==="top-ex"?-we-de*Ce:q==="middle"?Be/2:q==="bottom"?Be:q==="bottom-baseline"?Be-Te+ce*Ce:_(q)*Be}}if(!W){const Be=e.getEmbeddingLevels(w,D);Y=new Uint16Array(Ee),ie=new Float32Array(Ee*2),ne={},ge=[i,i,-i,-i],oe=[];let gt=we;X&&(me=new Float32Array(w.length*3)),H&&(Z=new Uint8Array(Ee*3));let Ye=0,Ie=-1,it=-1,ut,zt;if(We.forEach((je,bt)=>{let{count:yn,width:Zr}=je;if(yn>0){let Ls=0;for(let Mt=yn;Mt--&&je.glyphAt(Mt).glyphObj.isWhitespace;)Ls++;let Qr=0,Nn=0;if(U==="center")Qr=(ae-Zr)/2;else if(U==="right")Qr=ae-Zr;else if(U==="justify"&&je.isSoftWrapped){let Mt=0;for(let Dt=yn-Ls;Dt--;)je.glyphAt(Dt).glyphObj.isWhitespace&&Mt++;Nn=(ae-Zr)/Mt}if(Nn||Qr){let Mt=0;for(let Dt=0;Dt<yn;Dt++){let cr=je.glyphAt(Dt);const Ln=cr.glyphObj;cr.x+=Qr+Mt,Nn!==0&&Ln.isWhitespace&&Dt<yn-Ls&&(Mt+=Nn,cr.width+=Nn)}}const Fn=e.getReorderSegments(w,Be,je.glyphAt(0).charIndex,je.glyphAt(je.count-1).charIndex);for(let Mt=0;Mt<Fn.length;Mt++){const[Dt,cr]=Fn[Mt];let Ln=1/0,ot=-1/0;for(let jt=0;jt<yn;jt++)if(je.glyphAt(jt).charIndex>=Dt){let Qn=jt,Bt=jt;for(;Bt<yn;Bt++){let tn=je.glyphAt(Bt);if(tn.charIndex>cr)break;Bt<yn-Ls&&(Ln=Math.min(Ln,tn.x),ot=Math.max(ot,tn.x+tn.width))}for(let tn=Qn;tn<Bt;tn++){const Tn=je.glyphAt(tn);Tn.x=ot-(Tn.x+Tn.width-Ln)}break}}let Ot;const mi=Mt=>Ot=Mt;for(let Mt=0;Mt<yn;Mt++){let Dt=je.glyphAt(Mt);Ot=Dt.glyphObj;const cr=Ot.index,Ln=Be.levels[Dt.charIndex]&1;if(Ln){const ot=e.getMirroredCharacter(w[Dt.charIndex]);ot&&K.forEachGlyph(ot,0,0,mi)}if(X){const{charIndex:ot}=Dt,jt=Dt.x+et,Qn=Dt.x+Dt.width+et;me[ot*3]=Ln?Qn:jt,me[ot*3+1]=Ln?jt:Qn,me[ot*3+2]=gt+Je+Lt;const Bt=ot-Ie;Bt>1&&y(me,Ie,Bt),Ie=ot}if(H){const{charIndex:ot}=Dt;for(;ot>it;)it++,H.hasOwnProperty(it)&&(zt=H[it])}if(!Ot.isWhitespace&&!Ot.isEmpty){const ot=Ye++;ne[cr]||(ne[cr]={path:Ot.path,pathBounds:[Ot.xMin,Ot.yMin,Ot.xMax,Ot.yMax]});const jt=Dt.x+et,Qn=gt+Lt;ie[ot*2]=jt,ie[ot*2+1]=Qn;const Bt=jt+Ot.xMin*Ce,tn=Qn+Ot.yMin*Ce,Tn=jt+Ot.xMax*Ce,ds=Qn+Ot.yMax*Ce;Bt<ge[0]&&(ge[0]=Bt),tn<ge[1]&&(ge[1]=tn),Tn>ge[2]&&(ge[2]=Tn),ds>ge[3]&&(ge[3]=ds),ot%J===0&&(ut={start:ot,end:ot,rect:[i,i,-i,-i]},oe.push(ut)),ut.end++;const hr=ut.rect;if(Bt<hr[0]&&(hr[0]=Bt),tn<hr[1]&&(hr[1]=tn),Tn>hr[2]&&(hr[2]=Tn),ds>hr[3]&&(hr[3]=ds),Y[ot]=cr,H){const zs=ot*3;Z[zs]=zt>>16&255,Z[zs+1]=zt>>8&255,Z[zs+2]=zt&255}}}}gt-=A}),me){const je=w.length-Ie;je>1&&y(me,Ie,je)}}L.typesetting=v()-ue,z({glyphIds:Y,glyphPositions:ie,glyphData:ne,caretPositions:me,caretHeight:Se,glyphColors:Z,chunkedBounds:oe,fontSize:E,unitsPerEm:ve,ascender:$*Ce,descender:ce*Ce,capHeight:fe*Ce,xHeight:de*Ce,lineHeight:A,topBaseline:we,blockBounds:[et,Lt-We.length*A,et+ae,Lt],visibleBounds:ge,timings:L})})}function m(w,O){d(w,C=>{const[E,k,A,M]=C.blockBounds;O({width:A-E,height:M-k})},{metricsOnly:!0})}function _(w){let O=w.match(/^([\d.]+)%$/),C=O?parseFloat(O[1]):NaN;return isNaN(C)?0:C/100}function y(w,O,C){const E=w[O*3],k=w[O*3+1],A=w[O*3+2],M=(k-E)/C;for(let D=0;D<C;D++){const U=(O+D)*3;w[U]=E+M*D,w[U+1]=E+M*(D+1),w[U+2]=A}}function v(){return(self.performance||Date).now()}function T(){this.data=[]}const x=["glyphObj","x","width","charIndex"];return T.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(w){let O=T.flyweight;return O.data=this.data,O.index=w,O},splitAt(w){let O=new T;return O.data=this.data.splice(w*x.length),O}},T.flyweight=x.reduce((w,O,C,E)=>(Object.defineProperty(w,O,{get(){return this.data[this.index*x.length+C]},set(k){this.data[this.index*x.length+C]=k}}),w),{data:null,index:0}),{typeset:d,measure:m,loadFont:f}}const bo=()=>(self.performance||Date).now(),tf=j0();let X_;function Kw(s,e,t,n,r,i,o,u,c,h,f=!0){return f?$w(s,e,t,n,r,i,o,u,c,h).then(null,d=>(X_||(console.warn("WebGL SDF generation failed, falling back to JS",d),X_=!0),Q_(s,e,t,n,r,i,o,u,c,h))):Q_(s,e,t,n,r,i,o,u,c,h)}const hh=[],Jw=5;let pp=0;function Y0(){const s=bo();for(;hh.length&&bo()-s<Jw;)hh.shift()();pp=hh.length?setTimeout(Y0,0):0}const $w=(...s)=>new Promise((e,t)=>{hh.push(()=>{const n=bo();try{tf.webgl.generateIntoCanvas(...s),e({timing:bo()-n})}catch(r){t(r)}}),pp||(pp=setTimeout(Y0,0))}),ex=4,tx=2e3,Z_={};let nx=0;function Q_(s,e,t,n,r,i,o,u,c,h){const f="TroikaTextSDFGenerator_JS_"+nx++%ex;let d=Z_[f];return d||(d=Z_[f]={workerModule:Fu({name:f,workerId:f,dependencies:[j0,bo],init(m,_){const y=m().javascript.generate;return function(...v){const T=_();return{textureData:y(...v),timing:_()-T}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(s,e,t,n,r,i).then(({textureData:m,timing:_})=>{const y=bo(),v=new Uint8Array(m.length*4);for(let T=0;T<m.length;T++)v[T*4+h]=m[T];return tf.webglUtils.renderImageData(o,v,u,c,s,e,1<<3-h),_+=bo()-y,--d.requests===0&&(d.idleTimer=setTimeout(()=>{Bw(f)},tx)),{timing:_}})}function rx(s){s._warm||(tf.webgl.isSupported(s),s._warm=!0)}const sx=tf.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function ix(){return typeof window>"u"&&(self.window=self),function(s){var e={parse:function(r){var i=e._bin,o=new Uint8Array(r);if(i.readASCII(o,0,4)=="ttcf"){var u=4;i.readUshort(o,u),u+=2,i.readUshort(o,u),u+=2;var c=i.readUint(o,u);u+=4;for(var h=[],f=0;f<c;f++){var d=i.readUint(o,u);u+=4,h.push(e._readFont(o,d))}return h}return[e._readFont(o,0)]},_readFont:function(r,i){var o=e._bin,u=i;o.readFixed(r,i),i+=4;var c=o.readUshort(r,i);i+=2,o.readUshort(r,i),i+=2,o.readUshort(r,i),i+=2,o.readUshort(r,i),i+=2;for(var h=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],f={_data:r,_offset:u},d={},m=0;m<c;m++){var _=o.readASCII(r,i,4);i+=4,o.readUint(r,i),i+=4;var y=o.readUint(r,i);i+=4;var v=o.readUint(r,i);i+=4,d[_]={offset:y,length:v}}for(m=0;m<h.length;m++){var T=h[m];d[T]&&(f[T.trim()]=e[T.trim()].parse(r,d[T].offset,d[T].length,f))}return f},_tabOffset:function(r,i,o){for(var u=e._bin,c=u.readUshort(r,o+4),h=o+12,f=0;f<c;f++){var d=u.readASCII(r,h,4);h+=4,u.readUint(r,h),h+=4;var m=u.readUint(r,h);if(h+=4,u.readUint(r,h),h+=4,d==i)return m}return 0}};e._bin={readFixed:function(r,i){return(r[i]<<8|r[i+1])+(r[i+2]<<8|r[i+3])/65540},readF2dot14:function(r,i){return e._bin.readShort(r,i)/16384},readInt:function(r,i){return e._bin._view(r).getInt32(i)},readInt8:function(r,i){return e._bin._view(r).getInt8(i)},readShort:function(r,i){return e._bin._view(r).getInt16(i)},readUshort:function(r,i){return e._bin._view(r).getUint16(i)},readUshorts:function(r,i,o){for(var u=[],c=0;c<o;c++)u.push(e._bin.readUshort(r,i+2*c));return u},readUint:function(r,i){return e._bin._view(r).getUint32(i)},readUint64:function(r,i){return 4294967296*e._bin.readUint(r,i)+e._bin.readUint(r,i+4)},readASCII:function(r,i,o){for(var u="",c=0;c<o;c++)u+=String.fromCharCode(r[i+c]);return u},readUnicode:function(r,i,o){for(var u="",c=0;c<o;c++){var h=r[i++]<<8|r[i++];u+=String.fromCharCode(h)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,i,o){var u=e._bin._tdec;return u&&i==0&&o==r.length?u.decode(r):e._bin.readASCII(r,i,o)},readBytes:function(r,i,o){for(var u=[],c=0;c<o;c++)u.push(r[i+c]);return u},readASCIIArray:function(r,i,o){for(var u=[],c=0;c<o;c++)u.push(String.fromCharCode(r[i+c]));return u},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,i,o,u,c){var h=e._bin,f={},d=i;h.readFixed(r,i),i+=4;var m=h.readUshort(r,i);i+=2;var _=h.readUshort(r,i);i+=2;var y=h.readUshort(r,i);return i+=2,f.scriptList=e._lctf.readScriptList(r,d+m),f.featureList=e._lctf.readFeatureList(r,d+_),f.lookupList=e._lctf.readLookupList(r,d+y,c),f},e._lctf.readLookupList=function(r,i,o){var u=e._bin,c=i,h=[],f=u.readUshort(r,i);i+=2;for(var d=0;d<f;d++){var m=u.readUshort(r,i);i+=2;var _=e._lctf.readLookupTable(r,c+m,o);h.push(_)}return h},e._lctf.readLookupTable=function(r,i,o){var u=e._bin,c=i,h={tabs:[]};h.ltype=u.readUshort(r,i),i+=2,h.flag=u.readUshort(r,i),i+=2;var f=u.readUshort(r,i);i+=2;for(var d=h.ltype,m=0;m<f;m++){var _=u.readUshort(r,i);i+=2;var y=o(r,d,c+_,h);h.tabs.push(y)}return h},e._lctf.numOfOnes=function(r){for(var i=0,o=0;o<32;o++)r>>>o&1&&i++;return i},e._lctf.readClassDef=function(r,i){var o=e._bin,u=[],c=o.readUshort(r,i);if(i+=2,c==1){var h=o.readUshort(r,i);i+=2;var f=o.readUshort(r,i);i+=2;for(var d=0;d<f;d++)u.push(h+d),u.push(h+d),u.push(o.readUshort(r,i)),i+=2}if(c==2){var m=o.readUshort(r,i);for(i+=2,d=0;d<m;d++)u.push(o.readUshort(r,i)),i+=2,u.push(o.readUshort(r,i)),i+=2,u.push(o.readUshort(r,i)),i+=2}return u},e._lctf.getInterval=function(r,i){for(var o=0;o<r.length;o+=3){var u=r[o],c=r[o+1];if(r[o+2],u<=i&&i<=c)return o}return-1},e._lctf.readCoverage=function(r,i){var o=e._bin,u={};u.fmt=o.readUshort(r,i),i+=2;var c=o.readUshort(r,i);return i+=2,u.fmt==1&&(u.tab=o.readUshorts(r,i,c)),u.fmt==2&&(u.tab=o.readUshorts(r,i,3*c)),u},e._lctf.coverageIndex=function(r,i){var o=r.tab;if(r.fmt==1)return o.indexOf(i);if(r.fmt==2){var u=e._lctf.getInterval(o,i);if(u!=-1)return o[u+2]+(i-o[u])}return-1},e._lctf.readFeatureList=function(r,i){var o=e._bin,u=i,c=[],h=o.readUshort(r,i);i+=2;for(var f=0;f<h;f++){var d=o.readASCII(r,i,4);i+=4;var m=o.readUshort(r,i);i+=2;var _=e._lctf.readFeatureTable(r,u+m);_.tag=d.trim(),c.push(_)}return c},e._lctf.readFeatureTable=function(r,i){var o=e._bin,u=i,c={},h=o.readUshort(r,i);i+=2,h>0&&(c.featureParams=u+h);var f=o.readUshort(r,i);i+=2,c.tab=[];for(var d=0;d<f;d++)c.tab.push(o.readUshort(r,i+2*d));return c},e._lctf.readScriptList=function(r,i){var o=e._bin,u=i,c={},h=o.readUshort(r,i);i+=2;for(var f=0;f<h;f++){var d=o.readASCII(r,i,4);i+=4;var m=o.readUshort(r,i);i+=2,c[d.trim()]=e._lctf.readScriptTable(r,u+m)}return c},e._lctf.readScriptTable=function(r,i){var o=e._bin,u=i,c={},h=o.readUshort(r,i);i+=2,c.default=e._lctf.readLangSysTable(r,u+h);var f=o.readUshort(r,i);i+=2;for(var d=0;d<f;d++){var m=o.readASCII(r,i,4);i+=4;var _=o.readUshort(r,i);i+=2,c[m.trim()]=e._lctf.readLangSysTable(r,u+_)}return c},e._lctf.readLangSysTable=function(r,i){var o=e._bin,u={};o.readUshort(r,i),i+=2,u.reqFeature=o.readUshort(r,i),i+=2;var c=o.readUshort(r,i);return i+=2,u.features=o.readUshorts(r,i,c),u},e.CFF={},e.CFF.parse=function(r,i,o){var u=e._bin;(r=new Uint8Array(r.buffer,i,o))[i=0],r[++i],r[++i],r[++i],i++;var c=[];i=e.CFF.readIndex(r,i,c);for(var h=[],f=0;f<c.length-1;f++)h.push(u.readASCII(r,i+c[f],c[f+1]-c[f]));i+=c[c.length-1];var d=[];i=e.CFF.readIndex(r,i,d);var m=[];for(f=0;f<d.length-1;f++)m.push(e.CFF.readDict(r,i+d[f],i+d[f+1]));i+=d[d.length-1];var _=m[0],y=[];i=e.CFF.readIndex(r,i,y);var v=[];for(f=0;f<y.length-1;f++)v.push(u.readASCII(r,i+y[f],y[f+1]-y[f]));if(i+=y[y.length-1],e.CFF.readSubrs(r,i,_),_.CharStrings){i=_.CharStrings,y=[],i=e.CFF.readIndex(r,i,y);var T=[];for(f=0;f<y.length-1;f++)T.push(u.readBytes(r,i+y[f],y[f+1]-y[f]));_.CharStrings=T}if(_.ROS){i=_.FDArray;var x=[];for(i=e.CFF.readIndex(r,i,x),_.FDArray=[],f=0;f<x.length-1;f++){var w=e.CFF.readDict(r,i+x[f],i+x[f+1]);e.CFF._readFDict(r,w,v),_.FDArray.push(w)}i+=x[x.length-1],i=_.FDSelect,_.FDSelect=[];var O=r[i];if(i++,O!=3)throw O;var C=u.readUshort(r,i);for(i+=2,f=0;f<C+1;f++)_.FDSelect.push(u.readUshort(r,i),r[i+2]),i+=3}return _.Encoding&&(_.Encoding=e.CFF.readEncoding(r,_.Encoding,_.CharStrings.length)),_.charset&&(_.charset=e.CFF.readCharset(r,_.charset,_.CharStrings.length)),e.CFF._readFDict(r,_,v),_},e.CFF._readFDict=function(r,i,o){var u;for(var c in i.Private&&(u=i.Private[1],i.Private=e.CFF.readDict(r,u,u+i.Private[0]),i.Private.Subrs&&e.CFF.readSubrs(r,u+i.Private.Subrs,i.Private)),i)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(i[c]=o[i[c]-426+35])},e.CFF.readSubrs=function(r,i,o){var u=e._bin,c=[];i=e.CFF.readIndex(r,i,c);var h,f=c.length;h=f<1240?107:f<33900?1131:32768,o.Bias=h,o.Subrs=[];for(var d=0;d<c.length-1;d++)o.Subrs.push(u.readBytes(r,i+c[d],c[d+1]-c[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,i){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==i)return o;return-1},e.CFF.glyphBySE=function(r,i){return i<0||i>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[i])},e.CFF.readEncoding=function(r,i,o){e._bin;var u=[".notdef"],c=r[i];if(i++,c!=0)throw"error: unknown encoding format: "+c;var h=r[i];i++;for(var f=0;f<h;f++)u.push(r[i+f]);return u},e.CFF.readCharset=function(r,i,o){var u=e._bin,c=[".notdef"],h=r[i];if(i++,h==0)for(var f=0;f<o;f++){var d=u.readUshort(r,i);i+=2,c.push(d)}else{if(h!=1&&h!=2)throw"error: format: "+h;for(;c.length<o;){d=u.readUshort(r,i),i+=2;var m=0;for(h==1?(m=r[i],i++):(m=u.readUshort(r,i),i+=2),f=0;f<=m;f++)c.push(d),d++}}return c},e.CFF.readIndex=function(r,i,o){var u=e._bin,c=u.readUshort(r,i)+1,h=r[i+=2];if(i++,h==1)for(var f=0;f<c;f++)o.push(r[i+f]);else if(h==2)for(f=0;f<c;f++)o.push(u.readUshort(r,i+2*f));else if(h==3)for(f=0;f<c;f++)o.push(16777215&u.readUint(r,i+3*f-1));else if(c!=1)throw"unsupported offset size: "+h+", count: "+c;return(i+=c*h)-1},e.CFF.getCharString=function(r,i,o){var u=e._bin,c=r[i],h=r[i+1];r[i+2],r[i+3],r[i+4];var f=1,d=null,m=null;c<=20&&(d=c,f=1),c==12&&(d=100*c+h,f=2),21<=c&&c<=27&&(d=c,f=1),c==28&&(m=u.readShort(r,i+1),f=3),29<=c&&c<=31&&(d=c,f=1),32<=c&&c<=246&&(m=c-139,f=1),247<=c&&c<=250&&(m=256*(c-247)+h+108,f=2),251<=c&&c<=254&&(m=256*-(c-251)-h-108,f=2),c==255&&(m=u.readInt(r,i+1)/65535,f=5),o.val=m??"o"+d,o.size=f},e.CFF.readCharString=function(r,i,o){for(var u=i+o,c=e._bin,h=[];i<u;){var f=r[i],d=r[i+1];r[i+2],r[i+3],r[i+4];var m=1,_=null,y=null;f<=20&&(_=f,m=1),f==12&&(_=100*f+d,m=2),f!=19&&f!=20||(_=f,m=2),21<=f&&f<=27&&(_=f,m=1),f==28&&(y=c.readShort(r,i+1),m=3),29<=f&&f<=31&&(_=f,m=1),32<=f&&f<=246&&(y=f-139,m=1),247<=f&&f<=250&&(y=256*(f-247)+d+108,m=2),251<=f&&f<=254&&(y=256*-(f-251)-d-108,m=2),f==255&&(y=c.readInt(r,i+1)/65535,m=5),h.push(y??"o"+_),i+=m}return h},e.CFF.readDict=function(r,i,o){for(var u=e._bin,c={},h=[];i<o;){var f=r[i],d=r[i+1];r[i+2],r[i+3],r[i+4];var m=1,_=null,y=null;if(f==28&&(y=u.readShort(r,i+1),m=3),f==29&&(y=u.readInt(r,i+1),m=5),32<=f&&f<=246&&(y=f-139,m=1),247<=f&&f<=250&&(y=256*(f-247)+d+108,m=2),251<=f&&f<=254&&(y=256*-(f-251)-d-108,m=2),f==255)throw y=u.readInt(r,i+1)/65535,m=5,"unknown number";if(f==30){var v=[];for(m=1;;){var T=r[i+m];m++;var x=T>>4,w=15&T;if(x!=15&&v.push(x),w!=15&&v.push(w),w==15)break}for(var O="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],E=0;E<v.length;E++)O+=C[v[E]];y=parseFloat(O)}f<=21&&(_=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],m=1,f==12&&(_=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],m=2)),_!=null?(c[_]=h.length==1?h[0]:h,h=[]):h.push(y),i+=m}return c},e.cmap={},e.cmap.parse=function(r,i,o){r=new Uint8Array(r.buffer,i,o),i=0;var u=e._bin,c={};u.readUshort(r,i),i+=2;var h=u.readUshort(r,i);i+=2;var f=[];c.tables=[];for(var d=0;d<h;d++){var m=u.readUshort(r,i);i+=2;var _=u.readUshort(r,i);i+=2;var y=u.readUint(r,i);i+=4;var v="p"+m+"e"+_,T=f.indexOf(y);if(T==-1){var x;T=c.tables.length,f.push(y);var w=u.readUshort(r,y);w==0?x=e.cmap.parse0(r,y):w==4?x=e.cmap.parse4(r,y):w==6?x=e.cmap.parse6(r,y):w==12?x=e.cmap.parse12(r,y):console.debug("unknown format: "+w,m,_,y),c.tables.push(x)}if(c[v]!=null)throw"multiple tables for one platform+encoding";c[v]=T}return c},e.cmap.parse0=function(r,i){var o=e._bin,u={};u.format=o.readUshort(r,i),i+=2;var c=o.readUshort(r,i);i+=2,o.readUshort(r,i),i+=2,u.map=[];for(var h=0;h<c-6;h++)u.map.push(r[i+h]);return u},e.cmap.parse4=function(r,i){var o=e._bin,u=i,c={};c.format=o.readUshort(r,i),i+=2;var h=o.readUshort(r,i);i+=2,o.readUshort(r,i),i+=2;var f=o.readUshort(r,i);i+=2;var d=f/2;c.searchRange=o.readUshort(r,i),i+=2,c.entrySelector=o.readUshort(r,i),i+=2,c.rangeShift=o.readUshort(r,i),i+=2,c.endCount=o.readUshorts(r,i,d),i+=2*d,i+=2,c.startCount=o.readUshorts(r,i,d),i+=2*d,c.idDelta=[];for(var m=0;m<d;m++)c.idDelta.push(o.readShort(r,i)),i+=2;for(c.idRangeOffset=o.readUshorts(r,i,d),i+=2*d,c.glyphIdArray=[];i<u+h;)c.glyphIdArray.push(o.readUshort(r,i)),i+=2;return c},e.cmap.parse6=function(r,i){var o=e._bin,u={};u.format=o.readUshort(r,i),i+=2,o.readUshort(r,i),i+=2,o.readUshort(r,i),i+=2,u.firstCode=o.readUshort(r,i),i+=2;var c=o.readUshort(r,i);i+=2,u.glyphIdArray=[];for(var h=0;h<c;h++)u.glyphIdArray.push(o.readUshort(r,i)),i+=2;return u},e.cmap.parse12=function(r,i){var o=e._bin,u={};u.format=o.readUshort(r,i),i+=2,i+=2,o.readUint(r,i),i+=4,o.readUint(r,i),i+=4;var c=o.readUint(r,i);i+=4,u.groups=[];for(var h=0;h<c;h++){var f=i+12*h,d=o.readUint(r,f+0),m=o.readUint(r,f+4),_=o.readUint(r,f+8);u.groups.push([d,m,_])}return u},e.glyf={},e.glyf.parse=function(r,i,o,u){for(var c=[],h=0;h<u.maxp.numGlyphs;h++)c.push(null);return c},e.glyf._parseGlyf=function(r,i){var o=e._bin,u=r._data,c=e._tabOffset(u,"glyf",r._offset)+r.loca[i];if(r.loca[i]==r.loca[i+1])return null;var h={};if(h.noc=o.readShort(u,c),c+=2,h.xMin=o.readShort(u,c),c+=2,h.yMin=o.readShort(u,c),c+=2,h.xMax=o.readShort(u,c),c+=2,h.yMax=o.readShort(u,c),c+=2,h.xMin>=h.xMax||h.yMin>=h.yMax)return null;if(h.noc>0){h.endPts=[];for(var f=0;f<h.noc;f++)h.endPts.push(o.readUshort(u,c)),c+=2;var d=o.readUshort(u,c);if(c+=2,u.length-c<d)return null;h.instructions=o.readBytes(u,c,d),c+=d;var m=h.endPts[h.noc-1]+1;for(h.flags=[],f=0;f<m;f++){var _=u[c];if(c++,h.flags.push(_),(8&_)!=0){var y=u[c];c++;for(var v=0;v<y;v++)h.flags.push(_),f++}}for(h.xs=[],f=0;f<m;f++){var T=(2&h.flags[f])!=0,x=(16&h.flags[f])!=0;T?(h.xs.push(x?u[c]:-u[c]),c++):x?h.xs.push(0):(h.xs.push(o.readShort(u,c)),c+=2)}for(h.ys=[],f=0;f<m;f++)T=(4&h.flags[f])!=0,x=(32&h.flags[f])!=0,T?(h.ys.push(x?u[c]:-u[c]),c++):x?h.ys.push(0):(h.ys.push(o.readShort(u,c)),c+=2);var w=0,O=0;for(f=0;f<m;f++)w+=h.xs[f],O+=h.ys[f],h.xs[f]=w,h.ys[f]=O}else{var C;h.parts=[];do{C=o.readUshort(u,c),c+=2;var E={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(h.parts.push(E),E.glyphIndex=o.readUshort(u,c),c+=2,1&C){var k=o.readShort(u,c);c+=2;var A=o.readShort(u,c);c+=2}else k=o.readInt8(u,c),c++,A=o.readInt8(u,c),c++;2&C?(E.m.tx=k,E.m.ty=A):(E.p1=k,E.p2=A),8&C?(E.m.a=E.m.d=o.readF2dot14(u,c),c+=2):64&C?(E.m.a=o.readF2dot14(u,c),c+=2,E.m.d=o.readF2dot14(u,c),c+=2):128&C&&(E.m.a=o.readF2dot14(u,c),c+=2,E.m.b=o.readF2dot14(u,c),c+=2,E.m.c=o.readF2dot14(u,c),c+=2,E.m.d=o.readF2dot14(u,c),c+=2)}while(32&C);if(256&C){var M=o.readUshort(u,c);for(c+=2,h.instr=[],f=0;f<M;f++)h.instr.push(u[c]),c++}}return h},e.GPOS={},e.GPOS.parse=function(r,i,o,u){return e._lctf.parse(r,i,o,u,e.GPOS.subt)},e.GPOS.subt=function(r,i,o,u){var c=e._bin,h=o,f={};if(f.fmt=c.readUshort(r,o),o+=2,i==1||i==2||i==3||i==7||i==8&&f.fmt<=2){var d=c.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,d+h)}if(i==1&&f.fmt==1){var m=c.readUshort(r,o);o+=2;var _=e._lctf.numOfOnes(m);m!=0&&(f.pos=e.GPOS.readValueRecord(r,o,m))}else if(i==2&&f.fmt>=1&&f.fmt<=2){m=c.readUshort(r,o),o+=2;var y=c.readUshort(r,o);o+=2,_=e._lctf.numOfOnes(m);var v=e._lctf.numOfOnes(y);if(f.fmt==1){f.pairsets=[];var T=c.readUshort(r,o);o+=2;for(var x=0;x<T;x++){var w=h+c.readUshort(r,o);o+=2;var O=c.readUshort(r,w);w+=2;for(var C=[],E=0;E<O;E++){var k=c.readUshort(r,w);w+=2,m!=0&&(P=e.GPOS.readValueRecord(r,w,m),w+=2*_),y!=0&&(F=e.GPOS.readValueRecord(r,w,y),w+=2*v),C.push({gid2:k,val1:P,val2:F})}f.pairsets.push(C)}}if(f.fmt==2){var A=c.readUshort(r,o);o+=2;var M=c.readUshort(r,o);o+=2;var D=c.readUshort(r,o);o+=2;var U=c.readUshort(r,o);for(o+=2,f.classDef1=e._lctf.readClassDef(r,h+A),f.classDef2=e._lctf.readClassDef(r,h+M),f.matrix=[],x=0;x<D;x++){var R=[];for(E=0;E<U;E++){var P=null,F=null;m!=0&&(P=e.GPOS.readValueRecord(r,o,m),o+=2*_),y!=0&&(F=e.GPOS.readValueRecord(r,o,y),o+=2*v),R.push({val1:P,val2:F})}f.matrix.push(R)}}}else{if(i==9&&f.fmt==1){var B=c.readUshort(r,o);o+=2;var q=c.readUint(r,o);if(o+=4,u.ltype==9)u.ltype=B;else if(u.ltype!=B)throw"invalid extension substitution";return e.GPOS.subt(r,u.ltype,h+q)}console.debug("unsupported GPOS table LookupType",i,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(r,i,o){var u=e._bin,c=[];return c.push(1&o?u.readShort(r,i):0),i+=1&o?2:0,c.push(2&o?u.readShort(r,i):0),i+=2&o?2:0,c.push(4&o?u.readShort(r,i):0),i+=4&o?2:0,c.push(8&o?u.readShort(r,i):0),i+=8&o?2:0,c},e.GSUB={},e.GSUB.parse=function(r,i,o,u){return e._lctf.parse(r,i,o,u,e.GSUB.subt)},e.GSUB.subt=function(r,i,o,u){var c=e._bin,h=o,f={};if(f.fmt=c.readUshort(r,o),o+=2,i!=1&&i!=4&&i!=5&&i!=6)return null;if(i==1||i==4||i==5&&f.fmt<=2||i==6&&f.fmt<=2){var d=c.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,h+d)}if(i==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=c.readShort(r,o),o+=2;else if(f.fmt==2){var m=c.readUshort(r,o);o+=2,f.newg=c.readUshorts(r,o,m),o+=2*f.newg.length}}else if(i==4){f.vals=[],m=c.readUshort(r,o),o+=2;for(var _=0;_<m;_++){var y=c.readUshort(r,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(r,h+y))}}else if(i==5&&f.fmt==2){if(f.fmt==2){var v=c.readUshort(r,o);o+=2,f.cDef=e._lctf.readClassDef(r,h+v),f.scset=[];var T=c.readUshort(r,o);for(o+=2,_=0;_<T;_++){var x=c.readUshort(r,o);o+=2,f.scset.push(x==0?null:e.GSUB.readSubClassSet(r,h+x))}}}else if(i==6&&f.fmt==3){if(f.fmt==3){for(_=0;_<3;_++){m=c.readUshort(r,o),o+=2;for(var w=[],O=0;O<m;O++)w.push(e._lctf.readCoverage(r,h+c.readUshort(r,o+2*O)));o+=2*m,_==0&&(f.backCvg=w),_==1&&(f.inptCvg=w),_==2&&(f.ahedCvg=w)}m=c.readUshort(r,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(r,o,m)}}else{if(i==7&&f.fmt==1){var C=c.readUshort(r,o);o+=2;var E=c.readUint(r,o);if(o+=4,u.ltype==9)u.ltype=C;else if(u.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,u.ltype,h+E)}console.debug("unsupported GSUB table LookupType",i,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(r,i){var o=e._bin.readUshort,u=i,c=[],h=o(r,i);i+=2;for(var f=0;f<h;f++){var d=o(r,i);i+=2,c.push(e.GSUB.readSubClassRule(r,u+d))}return c},e.GSUB.readSubClassRule=function(r,i){var o=e._bin.readUshort,u={},c=o(r,i),h=o(r,i+=2);i+=2,u.input=[];for(var f=0;f<c-1;f++)u.input.push(o(r,i)),i+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(r,i,h),u},e.GSUB.readSubstLookupRecords=function(r,i,o){for(var u=e._bin.readUshort,c=[],h=0;h<o;h++)c.push(u(r,i),u(r,i+2)),i+=4;return c},e.GSUB.readChainSubClassSet=function(r,i){var o=e._bin,u=i,c=[],h=o.readUshort(r,i);i+=2;for(var f=0;f<h;f++){var d=o.readUshort(r,i);i+=2,c.push(e.GSUB.readChainSubClassRule(r,u+d))}return c},e.GSUB.readChainSubClassRule=function(r,i){for(var o=e._bin,u={},c=["backtrack","input","lookahead"],h=0;h<c.length;h++){var f=o.readUshort(r,i);i+=2,h==1&&f--,u[c[h]]=o.readUshorts(r,i,f),i+=2*u[c[h]].length}return f=o.readUshort(r,i),i+=2,u.subst=o.readUshorts(r,i,2*f),i+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(r,i){var o=e._bin,u=i,c=[],h=o.readUshort(r,i);i+=2;for(var f=0;f<h;f++){var d=o.readUshort(r,i);i+=2,c.push(e.GSUB.readLigature(r,u+d))}return c},e.GSUB.readLigature=function(r,i){var o=e._bin,u={chain:[]};u.nglyph=o.readUshort(r,i),i+=2;var c=o.readUshort(r,i);i+=2;for(var h=0;h<c-1;h++)u.chain.push(o.readUshort(r,i)),i+=2;return u},e.head={},e.head.parse=function(r,i,o){var u=e._bin,c={};return u.readFixed(r,i),i+=4,c.fontRevision=u.readFixed(r,i),i+=4,u.readUint(r,i),i+=4,u.readUint(r,i),i+=4,c.flags=u.readUshort(r,i),i+=2,c.unitsPerEm=u.readUshort(r,i),i+=2,c.created=u.readUint64(r,i),i+=8,c.modified=u.readUint64(r,i),i+=8,c.xMin=u.readShort(r,i),i+=2,c.yMin=u.readShort(r,i),i+=2,c.xMax=u.readShort(r,i),i+=2,c.yMax=u.readShort(r,i),i+=2,c.macStyle=u.readUshort(r,i),i+=2,c.lowestRecPPEM=u.readUshort(r,i),i+=2,c.fontDirectionHint=u.readShort(r,i),i+=2,c.indexToLocFormat=u.readShort(r,i),i+=2,c.glyphDataFormat=u.readShort(r,i),i+=2,c},e.hhea={},e.hhea.parse=function(r,i,o){var u=e._bin,c={};return u.readFixed(r,i),i+=4,c.ascender=u.readShort(r,i),i+=2,c.descender=u.readShort(r,i),i+=2,c.lineGap=u.readShort(r,i),i+=2,c.advanceWidthMax=u.readUshort(r,i),i+=2,c.minLeftSideBearing=u.readShort(r,i),i+=2,c.minRightSideBearing=u.readShort(r,i),i+=2,c.xMaxExtent=u.readShort(r,i),i+=2,c.caretSlopeRise=u.readShort(r,i),i+=2,c.caretSlopeRun=u.readShort(r,i),i+=2,c.caretOffset=u.readShort(r,i),i+=2,i+=8,c.metricDataFormat=u.readShort(r,i),i+=2,c.numberOfHMetrics=u.readUshort(r,i),i+=2,c},e.hmtx={},e.hmtx.parse=function(r,i,o,u){for(var c=e._bin,h={aWidth:[],lsBearing:[]},f=0,d=0,m=0;m<u.maxp.numGlyphs;m++)m<u.hhea.numberOfHMetrics&&(f=c.readUshort(r,i),i+=2,d=c.readShort(r,i),i+=2),h.aWidth.push(f),h.lsBearing.push(d);return h},e.kern={},e.kern.parse=function(r,i,o,u){var c=e._bin,h=c.readUshort(r,i);if(i+=2,h==1)return e.kern.parseV1(r,i-2,o,u);var f=c.readUshort(r,i);i+=2;for(var d={glyph1:[],rval:[]},m=0;m<f;m++){i+=2,o=c.readUshort(r,i),i+=2;var _=c.readUshort(r,i);i+=2;var y=_>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;i=e.kern.readFormat0(r,i,d)}return d},e.kern.parseV1=function(r,i,o,u){var c=e._bin;c.readFixed(r,i),i+=4;var h=c.readUint(r,i);i+=4;for(var f={glyph1:[],rval:[]},d=0;d<h;d++){c.readUint(r,i),i+=4;var m=c.readUshort(r,i);i+=2,c.readUshort(r,i),i+=2;var _=m>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;i=e.kern.readFormat0(r,i,f)}return f},e.kern.readFormat0=function(r,i,o){var u=e._bin,c=-1,h=u.readUshort(r,i);i+=2,u.readUshort(r,i),i+=2,u.readUshort(r,i),i+=2,u.readUshort(r,i),i+=2;for(var f=0;f<h;f++){var d=u.readUshort(r,i);i+=2;var m=u.readUshort(r,i);i+=2;var _=u.readShort(r,i);i+=2,d!=c&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var y=o.rval[o.rval.length-1];y.glyph2.push(m),y.vals.push(_),c=d}return i},e.loca={},e.loca.parse=function(r,i,o,u){var c=e._bin,h=[],f=u.head.indexToLocFormat,d=u.maxp.numGlyphs+1;if(f==0)for(var m=0;m<d;m++)h.push(c.readUshort(r,i+(m<<1))<<1);if(f==1)for(m=0;m<d;m++)h.push(c.readUint(r,i+(m<<2)));return h},e.maxp={},e.maxp.parse=function(r,i,o){var u=e._bin,c={},h=u.readUint(r,i);return i+=4,c.numGlyphs=u.readUshort(r,i),i+=2,h==65536&&(c.maxPoints=u.readUshort(r,i),i+=2,c.maxContours=u.readUshort(r,i),i+=2,c.maxCompositePoints=u.readUshort(r,i),i+=2,c.maxCompositeContours=u.readUshort(r,i),i+=2,c.maxZones=u.readUshort(r,i),i+=2,c.maxTwilightPoints=u.readUshort(r,i),i+=2,c.maxStorage=u.readUshort(r,i),i+=2,c.maxFunctionDefs=u.readUshort(r,i),i+=2,c.maxInstructionDefs=u.readUshort(r,i),i+=2,c.maxStackElements=u.readUshort(r,i),i+=2,c.maxSizeOfInstructions=u.readUshort(r,i),i+=2,c.maxComponentElements=u.readUshort(r,i),i+=2,c.maxComponentDepth=u.readUshort(r,i),i+=2),c},e.name={},e.name.parse=function(r,i,o){var u=e._bin,c={};u.readUshort(r,i),i+=2;var h=u.readUshort(r,i);i+=2,u.readUshort(r,i);for(var f,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=i+=2,_=0;_<h;_++){var y=u.readUshort(r,i);i+=2;var v=u.readUshort(r,i);i+=2;var T=u.readUshort(r,i);i+=2;var x=u.readUshort(r,i);i+=2;var w=u.readUshort(r,i);i+=2;var O=u.readUshort(r,i);i+=2;var C,E=d[x],k=m+12*h+O;if(y==0)C=u.readUnicode(r,k,w/2);else if(y==3&&v==0)C=u.readUnicode(r,k,w/2);else if(v==0)C=u.readASCII(r,k,w);else if(v==1)C=u.readUnicode(r,k,w/2);else if(v==3)C=u.readUnicode(r,k,w/2);else{if(y!=1)throw"unknown encoding "+v+", platformID: "+y;C=u.readASCII(r,k,w),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var A="p"+y+","+T.toString(16);c[A]==null&&(c[A]={}),c[A][E!==void 0?E:x]=C,c[A]._lang=T}for(var M in c)if(c[M].postScriptName!=null&&c[M]._lang==1033)return c[M];for(var M in c)if(c[M].postScriptName!=null&&c[M]._lang==0)return c[M];for(var M in c)if(c[M].postScriptName!=null&&c[M]._lang==3084)return c[M];for(var M in c)if(c[M].postScriptName!=null)return c[M];for(var M in c){f=M;break}return console.debug("returning name table with languageID "+c[f]._lang),c[f]},e["OS/2"]={},e["OS/2"].parse=function(r,i,o){var u=e._bin.readUshort(r,i);i+=2;var c={};if(u==0)e["OS/2"].version0(r,i,c);else if(u==1)e["OS/2"].version1(r,i,c);else if(u==2||u==3||u==4)e["OS/2"].version2(r,i,c);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(r,i,c)}return c},e["OS/2"].version0=function(r,i,o){var u=e._bin;return o.xAvgCharWidth=u.readShort(r,i),i+=2,o.usWeightClass=u.readUshort(r,i),i+=2,o.usWidthClass=u.readUshort(r,i),i+=2,o.fsType=u.readUshort(r,i),i+=2,o.ySubscriptXSize=u.readShort(r,i),i+=2,o.ySubscriptYSize=u.readShort(r,i),i+=2,o.ySubscriptXOffset=u.readShort(r,i),i+=2,o.ySubscriptYOffset=u.readShort(r,i),i+=2,o.ySuperscriptXSize=u.readShort(r,i),i+=2,o.ySuperscriptYSize=u.readShort(r,i),i+=2,o.ySuperscriptXOffset=u.readShort(r,i),i+=2,o.ySuperscriptYOffset=u.readShort(r,i),i+=2,o.yStrikeoutSize=u.readShort(r,i),i+=2,o.yStrikeoutPosition=u.readShort(r,i),i+=2,o.sFamilyClass=u.readShort(r,i),i+=2,o.panose=u.readBytes(r,i,10),i+=10,o.ulUnicodeRange1=u.readUint(r,i),i+=4,o.ulUnicodeRange2=u.readUint(r,i),i+=4,o.ulUnicodeRange3=u.readUint(r,i),i+=4,o.ulUnicodeRange4=u.readUint(r,i),i+=4,o.achVendID=[u.readInt8(r,i),u.readInt8(r,i+1),u.readInt8(r,i+2),u.readInt8(r,i+3)],i+=4,o.fsSelection=u.readUshort(r,i),i+=2,o.usFirstCharIndex=u.readUshort(r,i),i+=2,o.usLastCharIndex=u.readUshort(r,i),i+=2,o.sTypoAscender=u.readShort(r,i),i+=2,o.sTypoDescender=u.readShort(r,i),i+=2,o.sTypoLineGap=u.readShort(r,i),i+=2,o.usWinAscent=u.readUshort(r,i),i+=2,o.usWinDescent=u.readUshort(r,i),i+=2},e["OS/2"].version1=function(r,i,o){var u=e._bin;return i=e["OS/2"].version0(r,i,o),o.ulCodePageRange1=u.readUint(r,i),i+=4,o.ulCodePageRange2=u.readUint(r,i),i+=4},e["OS/2"].version2=function(r,i,o){var u=e._bin;return i=e["OS/2"].version1(r,i,o),o.sxHeight=u.readShort(r,i),i+=2,o.sCapHeight=u.readShort(r,i),i+=2,o.usDefault=u.readUshort(r,i),i+=2,o.usBreak=u.readUshort(r,i),i+=2,o.usMaxContext=u.readUshort(r,i),i+=2},e["OS/2"].version5=function(r,i,o){var u=e._bin;return i=e["OS/2"].version2(r,i,o),o.usLowerOpticalPointSize=u.readUshort(r,i),i+=2,o.usUpperOpticalPointSize=u.readUshort(r,i),i+=2},e.post={},e.post.parse=function(r,i,o){var u=e._bin,c={};return c.version=u.readFixed(r,i),i+=4,c.italicAngle=u.readFixed(r,i),i+=4,c.underlinePosition=u.readShort(r,i),i+=2,c.underlineThickness=u.readShort(r,i),i+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,i){var o=r.cmap,u=-1;if(o.p0e4!=null?u=o.p0e4:o.p3e1!=null?u=o.p3e1:o.p1e0!=null?u=o.p1e0:o.p0e3!=null&&(u=o.p0e3),u==-1)throw"no familiar platform and encoding!";var c=o.tables[u];if(c.format==0)return i>=c.map.length?0:c.map[i];if(c.format==4){for(var h=-1,f=0;f<c.endCount.length;f++)if(i<=c.endCount[f]){h=f;break}return h==-1||c.startCount[h]>i?0:65535&(c.idRangeOffset[h]!=0?c.glyphIdArray[i-c.startCount[h]+(c.idRangeOffset[h]>>1)-(c.idRangeOffset.length-h)]:i+c.idDelta[h])}if(c.format==12){if(i>c.groups[c.groups.length-1][1])return 0;for(f=0;f<c.groups.length;f++){var d=c.groups[f];if(d[0]<=i&&i<=d[1])return d[2]+(i-d[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(r,i){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[i]){var u=r.SVG.entries[i];return u==null?o:(typeof u=="string"&&(u=e.SVG.toPath(u),r.SVG.entries[i]=u),u)}if(r.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},h=r.CFF,f=r.CFF.Private;if(h.ROS){for(var d=0;h.FDSelect[d+2]<=i;)d+=2;f=h.FDArray[h.FDSelect[d+1]].Private}e.U._drawCFF(r.CFF.CharStrings[i],c,h,f,o)}else r.glyf&&e.U._drawGlyf(i,r,o);return o},e.U._drawGlyf=function(r,i,o){var u=i.glyf[r];u==null&&(u=i.glyf[r]=e.glyf._parseGlyf(i,r)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,o):e.U._compoGlyph(u,i,o))},e.U._simpleGlyph=function(r,i){for(var o=0;o<r.noc;o++){for(var u=o==0?0:r.endPts[o-1]+1,c=r.endPts[o],h=u;h<=c;h++){var f=h==u?c:h-1,d=h==c?u:h+1,m=1&r.flags[h],_=1&r.flags[f],y=1&r.flags[d],v=r.xs[h],T=r.ys[h];if(h==u)if(m){if(!_){e.U.P.moveTo(i,v,T);continue}e.U.P.moveTo(i,r.xs[f],r.ys[f])}else _?e.U.P.moveTo(i,r.xs[f],r.ys[f]):e.U.P.moveTo(i,(r.xs[f]+v)/2,(r.ys[f]+T)/2);m?_&&e.U.P.lineTo(i,v,T):y?e.U.P.qcurveTo(i,v,T,r.xs[d],r.ys[d]):e.U.P.qcurveTo(i,v,T,(v+r.xs[d])/2,(T+r.ys[d])/2)}e.U.P.closePath(i)}},e.U._compoGlyph=function(r,i,o){for(var u=0;u<r.parts.length;u++){var c={cmds:[],crds:[]},h=r.parts[u];e.U._drawGlyf(h.glyphIndex,i,c);for(var f=h.m,d=0;d<c.crds.length;d+=2){var m=c.crds[d],_=c.crds[d+1];o.crds.push(m*f.a+_*f.b+f.tx),o.crds.push(m*f.c+_*f.d+f.ty)}for(d=0;d<c.cmds.length;d++)o.cmds.push(c.cmds[d])}},e.U._getGlyphClass=function(r,i){var o=e._lctf.getInterval(i,r);return o==-1?0:i[o+2]},e.U.getPairAdjustment=function(r,i,o){var u=!1;if(r.GPOS)for(var c=r.GPOS,h=c.lookupList,f=c.featureList,d=[],m=0;m<f.length;m++){var _=f[m];if(_.tag=="kern"){u=!0;for(var y=0;y<_.tab.length;y++)if(!d[_.tab[y]]){d[_.tab[y]]=!0;for(var v=h[_.tab[y]],T=0;T<v.tabs.length;T++)if(v.tabs[T]!=null){var x,w=v.tabs[T];if((!w.coverage||(x=e._lctf.coverageIndex(w.coverage,i))!=-1)&&v.ltype!=1){if(v.ltype==2){var O=null;if(w.fmt==1){var C=w.pairsets[x];for(m=0;m<C.length;m++)C[m].gid2==o&&(O=C[m])}else if(w.fmt==2){var E=e.U._getGlyphClass(i,w.classDef1),k=e.U._getGlyphClass(o,w.classDef2);O=w.matrix[E][k]}if(O){var A=0;return O.val1&&O.val1[2]&&(A+=O.val1[2]),O.val2&&O.val2[0]&&(A+=O.val2[0]),A}}}}}}}if(r.kern&&!u){var M=r.kern.glyph1.indexOf(i);if(M!=-1){var D=r.kern.rval[M].glyph2.indexOf(o);if(D!=-1)return r.kern.rval[M].vals[D]}}return 0},e.U._applySubs=function(r,i,o,u){for(var c=r.length-i-1,h=0;h<o.tabs.length;h++)if(o.tabs[h]!=null){var f,d=o.tabs[h];if(!d.coverage||(f=e._lctf.coverageIndex(d.coverage,r[i]))!=-1){if(o.ltype==1)r[i],d.fmt==1?r[i]=r[i]+d.delta:r[i]=d.newg[f];else if(o.ltype==4)for(var m=d.vals[f],_=0;_<m.length;_++){var y=m[_],v=y.chain.length;if(!(v>c)){for(var T=!0,x=0,w=0;w<v;w++){for(;r[i+x+(1+w)]==-1;)x++;y.chain[w]!=r[i+x+(1+w)]&&(T=!1)}if(T){for(r[i]=y.nglyph,w=0;w<v+x;w++)r[i+w+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var O=e._lctf.getInterval(d.cDef,r[i]),C=d.cDef[O+2],E=d.scset[C],k=0;k<E.length;k++){var A=E[k],M=A.input;if(!(M.length>c)){for(T=!0,w=0;w<M.length;w++){var D=e._lctf.getInterval(d.cDef,r[i+1+w]);if(O==-1&&d.cDef[D+2]!=M[w]){T=!1;break}}if(T){var U=A.substLookupRecords;for(_=0;_<U.length;_+=2)U[_],U[_+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(r,d.backCvg,i-d.backCvg.length)||!e.U._glsCovered(r,d.inptCvg,i)||!e.U._glsCovered(r,d.ahedCvg,i+d.inptCvg.length))continue;var R=d.lookupRec;for(k=0;k<R.length;k+=2){O=R[k];var P=u[R[k+1]];e.U._applySubs(r,i+O,P,u)}}}}},e.U._glsCovered=function(r,i,o){for(var u=0;u<i.length;u++)if(e._lctf.coverageIndex(i[u],r[o+u])==-1)return!1;return!0},e.U.glyphsToPath=function(r,i,o){for(var u={cmds:[],crds:[]},c=0,h=0;h<i.length;h++){var f=i[h];if(f!=-1){for(var d=h<i.length-1&&i[h+1]!=-1?i[h+1]:0,m=e.U.glyphToPath(r,f),_=0;_<m.crds.length;_+=2)u.crds.push(m.crds[_]+c),u.crds.push(m.crds[_+1]);for(o&&u.cmds.push(o),_=0;_<m.cmds.length;_++)u.cmds.push(m.cmds[_]);o&&u.cmds.push("X"),c+=r.hmtx.aWidth[f],h<i.length-1&&(c+=e.U.getPairAdjustment(r,f,d))}}return u},e.U.P={},e.U.P.moveTo=function(r,i,o){r.cmds.push("M"),r.crds.push(i,o)},e.U.P.lineTo=function(r,i,o){r.cmds.push("L"),r.crds.push(i,o)},e.U.P.curveTo=function(r,i,o,u,c,h,f){r.cmds.push("C"),r.crds.push(i,o,u,c,h,f)},e.U.P.qcurveTo=function(r,i,o,u,c){r.cmds.push("Q"),r.crds.push(i,o,u,c)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,i,o,u,c){for(var h=i.stack,f=i.nStems,d=i.haveWidth,m=i.width,_=i.open,y=0,v=i.x,T=i.y,x=0,w=0,O=0,C=0,E=0,k=0,A=0,M=0,D=0,U=0,R={val:0,size:0};y<r.length;){e.CFF.getCharString(r,y,R);var P=R.val;if(y+=R.size,P=="o1"||P=="o18")h.length%2!=0&&!d&&(m=h.shift()+u.nominalWidthX),f+=h.length>>1,h.length=0,d=!0;else if(P=="o3"||P=="o23")h.length%2!=0&&!d&&(m=h.shift()+u.nominalWidthX),f+=h.length>>1,h.length=0,d=!0;else if(P=="o4")h.length>1&&!d&&(m=h.shift()+u.nominalWidthX,d=!0),_&&e.U.P.closePath(c),T+=h.pop(),e.U.P.moveTo(c,v,T),_=!0;else if(P=="o5")for(;h.length>0;)v+=h.shift(),T+=h.shift(),e.U.P.lineTo(c,v,T);else if(P=="o6"||P=="o7")for(var F=h.length,B=P=="o6",q=0;q<F;q++){var X=h.shift();B?v+=X:T+=X,B=!B,e.U.P.lineTo(c,v,T)}else if(P=="o8"||P=="o24"){F=h.length;for(var J=0;J+6<=F;)x=v+h.shift(),w=T+h.shift(),O=x+h.shift(),C=w+h.shift(),v=O+h.shift(),T=C+h.shift(),e.U.P.curveTo(c,x,w,O,C,v,T),J+=6;P=="o24"&&(v+=h.shift(),T+=h.shift(),e.U.P.lineTo(c,v,T))}else{if(P=="o11")break;if(P=="o1234"||P=="o1235"||P=="o1236"||P=="o1237")P=="o1234"&&(w=T,O=(x=v+h.shift())+h.shift(),U=C=w+h.shift(),k=C,M=T,v=(A=(E=(D=O+h.shift())+h.shift())+h.shift())+h.shift(),e.U.P.curveTo(c,x,w,O,C,D,U),e.U.P.curveTo(c,E,k,A,M,v,T)),P=="o1235"&&(x=v+h.shift(),w=T+h.shift(),O=x+h.shift(),C=w+h.shift(),D=O+h.shift(),U=C+h.shift(),E=D+h.shift(),k=U+h.shift(),A=E+h.shift(),M=k+h.shift(),v=A+h.shift(),T=M+h.shift(),h.shift(),e.U.P.curveTo(c,x,w,O,C,D,U),e.U.P.curveTo(c,E,k,A,M,v,T)),P=="o1236"&&(x=v+h.shift(),w=T+h.shift(),O=x+h.shift(),U=C=w+h.shift(),k=C,A=(E=(D=O+h.shift())+h.shift())+h.shift(),M=k+h.shift(),v=A+h.shift(),e.U.P.curveTo(c,x,w,O,C,D,U),e.U.P.curveTo(c,E,k,A,M,v,T)),P=="o1237"&&(x=v+h.shift(),w=T+h.shift(),O=x+h.shift(),C=w+h.shift(),D=O+h.shift(),U=C+h.shift(),E=D+h.shift(),k=U+h.shift(),A=E+h.shift(),M=k+h.shift(),Math.abs(A-v)>Math.abs(M-T)?v=A+h.shift():T=M+h.shift(),e.U.P.curveTo(c,x,w,O,C,D,U),e.U.P.curveTo(c,E,k,A,M,v,T));else if(P=="o14"){if(h.length>0&&!d&&(m=h.shift()+o.nominalWidthX,d=!0),h.length==4){var H=h.shift(),z=h.shift(),W=h.shift(),N=h.shift(),L=e.CFF.glyphBySE(o,W),K=e.CFF.glyphBySE(o,N);e.U._drawCFF(o.CharStrings[L],i,o,u,c),i.x=H,i.y=z,e.U._drawCFF(o.CharStrings[K],i,o,u,c)}_&&(e.U.P.closePath(c),_=!1)}else if(P=="o19"||P=="o20")h.length%2!=0&&!d&&(m=h.shift()+u.nominalWidthX),f+=h.length>>1,h.length=0,d=!0,y+=f+7>>3;else if(P=="o21")h.length>2&&!d&&(m=h.shift()+u.nominalWidthX,d=!0),T+=h.pop(),v+=h.pop(),_&&e.U.P.closePath(c),e.U.P.moveTo(c,v,T),_=!0;else if(P=="o22")h.length>1&&!d&&(m=h.shift()+u.nominalWidthX,d=!0),v+=h.pop(),_&&e.U.P.closePath(c),e.U.P.moveTo(c,v,T),_=!0;else if(P=="o25"){for(;h.length>6;)v+=h.shift(),T+=h.shift(),e.U.P.lineTo(c,v,T);x=v+h.shift(),w=T+h.shift(),O=x+h.shift(),C=w+h.shift(),v=O+h.shift(),T=C+h.shift(),e.U.P.curveTo(c,x,w,O,C,v,T)}else if(P=="o26")for(h.length%2&&(v+=h.shift());h.length>0;)x=v,w=T+h.shift(),v=O=x+h.shift(),T=(C=w+h.shift())+h.shift(),e.U.P.curveTo(c,x,w,O,C,v,T);else if(P=="o27")for(h.length%2&&(T+=h.shift());h.length>0;)w=T,O=(x=v+h.shift())+h.shift(),C=w+h.shift(),v=O+h.shift(),T=C,e.U.P.curveTo(c,x,w,O,C,v,T);else if(P=="o10"||P=="o29"){var ee=P=="o10"?u:o;if(h.length==0)console.debug("error: empty stack");else{var Y=h.pop(),ie=ee.Subrs[Y+ee.Bias];i.x=v,i.y=T,i.nStems=f,i.haveWidth=d,i.width=m,i.open=_,e.U._drawCFF(ie,i,o,u,c),v=i.x,T=i.y,f=i.nStems,d=i.haveWidth,m=i.width,_=i.open}}else if(P=="o30"||P=="o31"){var ne=h.length,Z=(J=0,P=="o31");for(J+=ne-(F=-3&ne);J<F;)Z?(w=T,O=(x=v+h.shift())+h.shift(),T=(C=w+h.shift())+h.shift(),F-J==5?(v=O+h.shift(),J++):v=O,Z=!1):(x=v,w=T+h.shift(),O=x+h.shift(),C=w+h.shift(),v=O+h.shift(),F-J==5?(T=C+h.shift(),J++):T=C,Z=!0),e.U.P.curveTo(c,x,w,O,C,v,T),J+=4}else{if((P+"").charAt(0)=="o")throw console.debug("Unknown operation: "+P,r),P;h.push(P)}}}i.x=v,i.y=T,i.nStems=f,i.haveWidth=d,i.width=m,i.open=_};var t=e,n={Typr:t};return s.Typr=t,s.default=n,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function ox(){return function(s){var e=Uint8Array,t=Uint16Array,n=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(P,F){for(var B=new t(31),q=0;q<31;++q)B[q]=F+=1<<P[q-1];var X=new n(B[30]);for(q=1;q<30;++q)for(var J=B[q];J<B[q+1];++J)X[J]=J-B[q]<<5|q;return[B,X]},c=u(r,2),h=c[0],f=c[1];h[28]=258,f[258]=28;for(var d=u(i,0)[0],m=new t(32768),_=0;_<32768;++_){var y=(43690&_)>>>1|(21845&_)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,m[_]=((65280&y)>>>8|(255&y)<<8)>>>1}var v=function(P,F,B){for(var q=P.length,X=0,J=new t(F);X<q;++X)++J[P[X]-1];var H,z=new t(F);for(X=0;X<F;++X)z[X]=z[X-1]+J[X-1]<<1;if(B){H=new t(1<<F);var W=15-F;for(X=0;X<q;++X)if(P[X])for(var N=X<<4|P[X],L=F-P[X],K=z[P[X]-1]++<<L,ee=K|(1<<L)-1;K<=ee;++K)H[m[K]>>>W]=N}else for(H=new t(q),X=0;X<q;++X)P[X]&&(H[X]=m[z[P[X]-1]++]>>>15-P[X]);return H},T=new e(288);for(_=0;_<144;++_)T[_]=8;for(_=144;_<256;++_)T[_]=9;for(_=256;_<280;++_)T[_]=7;for(_=280;_<288;++_)T[_]=8;var x=new e(32);for(_=0;_<32;++_)x[_]=5;var w=v(T,9,1),O=v(x,5,1),C=function(P){for(var F=P[0],B=1;B<P.length;++B)P[B]>F&&(F=P[B]);return F},E=function(P,F,B){var q=F/8|0;return(P[q]|P[q+1]<<8)>>(7&F)&B},k=function(P,F){var B=F/8|0;return(P[B]|P[B+1]<<8|P[B+2]<<16)>>(7&F)},A=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(P,F,B){var q=new Error(F||A[P]);if(q.code=P,Error.captureStackTrace&&Error.captureStackTrace(q,M),!B)throw q;return q},D=function(P,F,B){var q=P.length;if(!q||B&&!B.l&&q<5)return F||new e(0);var X=!F||B,J=!B||B.i;B||(B={}),F||(F=new e(3*q));var H,z=function(Ie){var it=F.length;if(Ie>it){var ut=new e(Math.max(2*it,Ie));ut.set(F),F=ut}},W=B.f||0,N=B.p||0,L=B.b||0,K=B.l,ee=B.d,Y=B.m,ie=B.n,ne=8*q;do{if(!K){B.f=W=E(P,N,1);var Z=E(P,N+1,3);if(N+=3,!Z){var me=P[(de=((H=N)/8|0)+(7&H&&1)+4)-4]|P[de-3]<<8,ge=de+me;if(ge>q){J&&M(0);break}X&&z(L+me),F.set(P.subarray(de,ge),L),B.b=L+=me,B.p=N=8*ge;continue}if(Z==1)K=w,ee=O,Y=9,ie=5;else if(Z==2){var oe=E(P,N,31)+257,ae=E(P,N+10,15)+4,Ee=oe+E(P,N+5,31)+1;N+=14;for(var Re=new e(Ee),$=new e(19),ce=0;ce<ae;++ce)$[o[ce]]=E(P,N+3*ce,7);N+=3*ae;var ve=C($),le=(1<<ve)-1,fe=v($,ve,1);for(ce=0;ce<Ee;){var de,ue=fe[E(P,N,le)];if(N+=15&ue,(de=ue>>>4)<16)Re[ce++]=de;else{var Ce=0,Te=0;for(de==16?(Te=3+E(P,N,3),N+=2,Ce=Re[ce-1]):de==17?(Te=3+E(P,N,7),N+=3):de==18&&(Te=11+E(P,N,127),N+=7);Te--;)Re[ce++]=Ce}}var we=Re.subarray(0,oe),Se=Re.subarray(oe);Y=C(we),ie=C(Se),K=v(we,Y,1),ee=v(Se,ie,1)}else M(1);if(N>ne){J&&M(0);break}}X&&z(L+131072);for(var Je=(1<<Y)-1,Ge=(1<<ie)-1,Ae=N;;Ae=N){var We=(Ce=K[k(P,N)&Je])>>>4;if((N+=15&Ce)>ne){J&&M(0);break}if(Ce||M(2),We<256)F[L++]=We;else{if(We==256){Ae=N,K=null;break}var et=We-254;if(We>264){var Lt=r[ce=We-257];et=E(P,N,(1<<Lt)-1)+h[ce],N+=Lt}var Be=ee[k(P,N)&Ge],gt=Be>>>4;if(Be||M(3),N+=15&Be,Se=d[gt],gt>3&&(Lt=i[gt],Se+=k(P,N)&(1<<Lt)-1,N+=Lt),N>ne){J&&M(0);break}X&&z(L+131072);for(var Ye=L+et;L<Ye;L+=4)F[L]=F[L-Se],F[L+1]=F[L+1-Se],F[L+2]=F[L+2-Se],F[L+3]=F[L+3-Se];L=Ye}}B.l=K,B.p=Ae,B.b=L,K&&(W=1,B.m=Y,B.d=ee,B.n=ie)}while(!W);return L==F.length?F:function(Ie,it,ut){(it==null||it<0)&&(it=0),(ut==null||ut>Ie.length)&&(ut=Ie.length);var zt=new(Ie instanceof t?t:Ie instanceof n?n:e)(ut-it);return zt.set(Ie.subarray(it,ut)),zt}(F,0,L)},U=new e(0),R=typeof TextDecoder<"u"&&new TextDecoder;try{R.decode(U,{stream:!0})}catch{}return s.convert_streams=function(P){var F=new DataView(P),B=0;function q(){var oe=F.getUint16(B);return B+=2,oe}function X(){var oe=F.getUint32(B);return B+=4,oe}function J(oe){me.setUint16(ge,oe),ge+=2}function H(oe){me.setUint32(ge,oe),ge+=4}for(var z={signature:X(),flavor:X(),length:X(),numTables:q(),reserved:q(),totalSfntSize:X(),majorVersion:q(),minorVersion:q(),metaOffset:X(),metaLength:X(),metaOrigLength:X(),privOffset:X(),privLength:X()},W=0;Math.pow(2,W)<=z.numTables;)W++;W--;for(var N=16*Math.pow(2,W),L=16*z.numTables-N,K=12,ee=[],Y=0;Y<z.numTables;Y++)ee.push({tag:X(),offset:X(),compLength:X(),origLength:X(),origChecksum:X()}),K+=16;var ie,ne=new Uint8Array(12+16*ee.length+ee.reduce(function(oe,ae){return oe+ae.origLength+4},0)),Z=ne.buffer,me=new DataView(Z),ge=0;return H(z.flavor),J(z.numTables),J(N),J(W),J(L),ee.forEach(function(oe){H(oe.tag),H(oe.origChecksum),H(K),H(oe.origLength),oe.outOffset=K,(K+=oe.origLength)%4!=0&&(K+=4-K%4)}),ee.forEach(function(oe){var ae,Ee=P.slice(oe.offset,oe.offset+oe.compLength);if(oe.compLength!=oe.origLength){var Re=new Uint8Array(oe.origLength);ae=new Uint8Array(Ee,2),D(ae,Re)}else Re=new Uint8Array(Ee);ne.set(Re,oe.outOffset);var $=0;(K=oe.outOffset+oe.origLength)%4!=0&&($=4-K%4),ne.set(new Uint8Array($).buffer,oe.outOffset+oe.origLength),ie=K+$}),Z.slice(0,ie)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function ax(s,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,i=2,o=4,u=8,c=16,h=32;let f;function d(E){if(!f){const k={R:i,L:r,D:o,C:c,U:h,T:u};f=new Map;for(let A in n){let M=0;n[A].split(",").forEach(D=>{let[U,R]=D.split("+");U=parseInt(U,36),R=R?parseInt(R,36):0,f.set(M+=U,k[A]);for(let P=R;P--;)f.set(++M,k[A])})}}return f.get(E)||h}const m=1,_=2,y=3,v=4,T=[null,"isol","init","fina","medi"];function x(E){const k=new Uint8Array(E.length);let A=h,M=m,D=-1;for(let U=0;U<E.length;U++){const R=E.codePointAt(U);let P=d(R)|0,F=m;P&u||(A&(r|o|c)?P&(i|o|c)?(F=y,(M===m||M===y)&&k[D]++):P&(r|h)&&(M===_||M===v)&&k[D]--:A&(i|h)&&(M===_||M===v)&&k[D]--,M=k[U]=F,A=P,D=U,R>65535&&U++)}return k}function w(E,k){const A=[];for(let D=0;D<k.length;D++){const U=k.codePointAt(D);U>65535&&D++,A.push(s.U.codeToGlyph(E,U))}const M=E.GSUB;if(M){const{lookupList:D,featureList:U}=M;let R;const P=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,F=[];U.forEach(B=>{if(P.test(B.tag))for(let q=0;q<B.tab.length;q++){if(F[B.tab[q]])continue;F[B.tab[q]]=!0;const X=D[B.tab[q]],J=/^(isol|init|fina|medi)$/.test(B.tag);J&&!R&&(R=x(k));for(let H=0;H<A.length;H++)(!R||!J||T[R[H]]===B.tag)&&s.U._applySubs(A,H,X,D)}})}return A}function O(...E){for(let k=0;k<E.length;k++)if(typeof E[k]=="number")return E[k]}function C(E){const k=Object.create(null),A=E["OS/2"],M=E.hhea,D=E.head.unitsPerEm,U=O(A&&A.sTypoAscender,M&&M.ascender,D),R={unitsPerEm:D,ascender:U,descender:O(A&&A.sTypoDescender,M&&M.descender,0),capHeight:O(A&&A.sCapHeight,U),xHeight:O(A&&A.sxHeight,U),lineGap:O(A&&A.sTypoLineGap,M&&M.lineGap),forEachGlyph(P,F,B,q){let X=0;const J=1/R.unitsPerEm*F,H=w(E,P);let z=0,W=-1;return H.forEach((N,L)=>{if(N!==-1){let K=k[N];if(!K){const{cmds:ee,crds:Y}=s.U.glyphToPath(E,N);let ie="",ne=0;for(let ae=0,Ee=ee.length;ae<Ee;ae++){const Re=t[ee[ae]];ie+=ee[ae];for(let $=1;$<=Re;$++)ie+=($>1?",":"")+Y[ne++]}let Z,me,ge,oe;if(Y.length){Z=me=1/0,ge=oe=-1/0;for(let ae=0,Ee=Y.length;ae<Ee;ae+=2){let Re=Y[ae],$=Y[ae+1];Re<Z&&(Z=Re),$<me&&(me=$),Re>ge&&(ge=Re),$>oe&&(oe=$)}}else Z=ge=me=oe=0;K=k[N]={index:N,advanceWidth:E.hmtx.aWidth[N],xMin:Z,yMin:me,xMax:ge,yMax:oe,path:ie,pathCommandCount:ee.length}}W!==-1&&(X+=s.U.getPairAdjustment(E,W,N)*J),q.call(null,K,X,z),K.advanceWidth&&(X+=K.advanceWidth*J),B&&(X+=B*F),W=N}z+=P.codePointAt(z)>65535?2:1}),X}};return R}return function(k){const A=new Uint8Array(k,0,4),M=s._bin.readASCII(A,0,4);if(M==="wOFF")k=e(k);else if(M==="wOF2")throw new Error("woff2 fonts not supported");return C(s.parse(k)[0])}}const lx=Fu({name:"Typr Font Parser",dependencies:[ix,ox,ax],init(s,e,t){const n=s(),r=e();return t(n,r)}}),ba={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},ux=new Cr;function pa(){return(self.performance||Date).now()}const K_=Object.create(null);function X0(s,e){s=fx({},s);const t=pa();if(s.font=dx(s.font||ba.defaultFontURL),s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||ba.sdfGlyphSize,s.colorRanges!=null){let d={};for(let m in s.colorRanges)if(s.colorRanges.hasOwnProperty(m)){let _=s.colorRanges[m];typeof _!="number"&&(_=ux.set(_).getHex()),d[m]=_}s.colorRanges=d}Object.freeze(s);const{textureWidth:n,sdfExponent:r}=ba,{sdfGlyphSize:i}=s,o=n/i*4;let u=K_[i];if(!u){const d=document.createElement("canvas");d.width=n,d.height=i*256/o,u=K_[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:d,sdfTexture:new Xh(d,void 0,void 0,void 0,Fa,Fa),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,cx(u)}const{sdfTexture:c,sdfCanvas:h}=u;let f=u.glyphsByFont.get(s.font);f||u.glyphsByFont.set(s.font,f=new Map),mx(s).then(d=>{const{glyphIds:m,glyphPositions:_,fontSize:y,unitsPerEm:v,timings:T}=d,x=[],w=new Float32Array(m.length*4),O=y/v;let C=0,E=0;const k=pa();m.forEach((R,P)=>{let F=f.get(R);if(!F){const{path:J,pathBounds:H}=d.glyphData[R],z=Math.max(H[2]-H[0],H[3]-H[1])/i*(ba.sdfMargin*i+.5),W=u.glyphCount++,N=[H[0]-z,H[1]-z,H[2]+z,H[3]+z];f.set(R,F={path:J,atlasIndex:W,sdfViewBox:N}),x.push(F)}const{sdfViewBox:B}=F,q=_[E++],X=_[E++];w[C++]=q+B[0]*O,w[C++]=X+B[1]*O,w[C++]=q+B[2]*O,w[C++]=X+B[3]*O,m[P]=F.atlasIndex}),T.quads=(T.quads||0)+(pa()-k);const A=pa();T.sdf={};const M=h.height,D=Math.ceil(u.glyphCount/o),U=Math.pow(2,Math.ceil(Math.log2(D*i)));U>M&&(console.info(`Increasing SDF texture size ${M}->${U}`),sx(h,n,U),c.dispose()),Promise.all(x.map(R=>Z0(R,u,s.gpuAccelerateSDF).then(({timing:P})=>{T.sdf[R.atlasIndex]=P}))).then(()=>{x.length&&!u.contextLost&&(Q0(u),c.needsUpdate=!0),T.sdfTotal=pa()-A,T.total=pa()-t,e(Object.freeze({parameters:s,sdfTexture:c,sdfGlyphSize:i,sdfExponent:r,glyphBounds:w,glyphAtlasIndices:m,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{u.contextLost||rx(h)})}function Z0({path:s,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:r,contextLost:i},o){if(i)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:c}=ba,h=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),d=f%(u/n)*n,m=Math.floor(f/(u/n))*n,_=e%4;return Kw(n,n,s,t,h,c,r,d,m,_,o)}function cx(s){const e=s.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),s.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),s.contextLost=!1;const n=[];s.glyphsByFont.forEach(r=>{r.forEach(i=>{n.push(Z0(i,s,!0))})}),Promise.all(n).then(()=>{Q0(s),s.sdfTexture.needsUpdate=!0})})}function hx({font:s,characters:e,sdfGlyphSize:t},n){let r=Array.isArray(e)?e.join(`
`):""+e;X0({font:s,sdfGlyphSize:t,text:r},n)}function fx(s,e){for(let t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);return s}let Kc;function dx(s){return Kc||(Kc=typeof document>"u"?{}:document.createElement("a")),Kc.href=s,Kc.href}function Q0(s){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=s,{width:n,height:r}=e,i=s.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*r*4)&&(o=new Uint8Array(n*r*4),t.image={width:n,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),i.readPixels(0,0,n,r,i.RGBA,i.UNSIGNED_BYTE,o)}}const px=Fu({name:"Typesetter",dependencies:[ba,lx,Qw,Gw],init(s,e,t,n){const{defaultFontURL:r}=s;return t(e,n(),{defaultFontURL:r})}}),mx=Fu({name:"Typesetter",dependencies:[px],init(s){return function(e){return new Promise(t=>{s.typeset(e,t)})}},getTransferables(s){const e=[s.glyphPositions.buffer,s.glyphIds.buffer];return s.caretPositions&&e.push(s.caretPositions.buffer),s.glyphColors&&e.push(s.glyphColors.buffer),e}}),J_={};function gx(s){let e=J_[s];if(!e){const t=new qp(1,1,s,s),n=t.clone(),r=t.attributes,i=n.attributes,o=new Gp,u=r.uv.count;for(let c=0;c<u;c++)i.position.array[c*3]*=-1,i.normal.array[c*3+2]*=-1;["position","normal","uv"].forEach(c=>{o.setAttribute(c,new tp([...r[c].array,...i[c].array],r[c].itemSize))}),o.setIndex([...t.index.array,...n.index.array.map(c=>c+u)]),o.translate(.5,.5,0),e=J_[s]=o}return e}const _x="aTroikaGlyphBounds",$_="aTroikaGlyphIndex",vx="aTroikaGlyphColor";class yx extends o0{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new jp,this.boundingBox=new Zh}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Jl?t/2:0,e===So?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=gx(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){Pd(this,_x,e,4),Pd(this,$_,t,1),Pd(this,vx,i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:u,sin:c,cos:h}=Math,f=r/2,d=r*2,m=Math.abs(t),_=e[0]/m,y=e[2]/m,v=i((_+f)/d)!==i((y+f)/d)?-m:o(c(_)*m,c(y)*m),T=i((_-f)/d)!==i((y-f)/d)?m:u(c(_)*m,c(y)*m),x=i((_+r)/d)!==i((y+r)/d)?m*2:u(m-h(_)*m,m-h(y)*m);n.min.set(v,e[1],t<0?-x:0),n.max.set(T,e[3],t<0?0:x)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute($_).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function Pd(s,e,t,n){const r=s.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(s.setAttribute(e,new cS(t,n)),delete s._maxInstanceCount,s.dispose()):r&&s.deleteAttribute(e)}const Tx=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Sx=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,wx=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,xx=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Ex(s){const e=dp(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new pt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new zi(0,0,0,0)},uTroikaClipRect:{value:new zi(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new pt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Cr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new hS},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Tx,vertexTransform:Sx,fragmentDefs:wx,fragmentColorTransform:xx,customRewriter({vertexShader:t,fragmentShader:n}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(n)&&(n=n.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(q0,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Jp=new fS({color:16777215,side:So,transparent:!0}),ev=8421504,tv=new a0,Jc=new Ve,Rd=new Ve,jl=[],Cx=new Ve,Id="+x+y";function nv(s){return Array.isArray(s)?s[0]:s}let K0=()=>{const s=new Uu(new qp(1,1),Jp);return K0=()=>s,s},J0=()=>{const s=new Uu(new qp(1,1,32,1),Jp);return J0=()=>s,s};const bx={type:"syncstart"},Ox={type:"synccomplete"},$0=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],kx=$0.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let ey=class extends Uu{constructor(){const e=new yx;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=ev,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Id,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(bx),X0({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(r=>r&&r())})),this.dispatchEvent(Ox),e&&e()})))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=u0}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Jp.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=Ex(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return nv(this.material).getDepthMaterial()}get customDistanceMaterial(){return nv(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:u,blockBounds:c}=r;n.uTroikaSDFTexture.value=u,n.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(c),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let h=0,f=0,d=0,m,_,y,v=0,T=0;if(t){let{outlineWidth:w,outlineOffsetX:O,outlineOffsetY:C,outlineBlur:E,outlineOpacity:k}=this;h=this._parsePercent(w)||0,f=Math.max(0,this._parsePercent(E)||0),m=k,v=this._parsePercent(O)||0,T=this._parsePercent(C)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(y=this.strokeColor,n.uTroikaStrokeColor.value.set(y??ev),_=this.strokeOpacity,_==null&&(_=1)),m=this.fillOpacity;n.uTroikaDistanceOffset.value=h,n.uTroikaPositionOffset.value.set(v,T),n.uTroikaBlurRadius.value=f,n.uTroikaStrokeWidth.value=d,n.uTroikaStrokeOpacity.value=_,n.uTroikaFillOpacity.value=m??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let x=this.clipRect;if(x&&Array.isArray(x)&&x.length===4)n.uTroikaClipRect.value.fromArray(x);else{const w=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(c[0]-w,c[1]-w,c[2]+w,c[3]+w)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(i==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new Cr;(i!==u._input||typeof i=="object")&&u.set(u._input=i)}let o=this.orientation||Id;if(o!==e._orientation){let u=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let c=o!==Id&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,h,f,d,m]=c;Jc.set(0,0,0)[f]=h==="-"?1:-1,Rd.set(0,0,0)[m]=d==="-"?-1:1,tv.lookAt(Cx,Jc.cross(Rd),Rd),u.setFromMatrix4(tv)}else u.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new pt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new pt){return Jc.copy(e),this.localPositionToTextCoords(this.worldToLocal(Jc),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?J0():K0(),u=o.geometry,{position:c,uv:h}=u.attributes;for(let f=0;f<h.count;f++){let d=i[0]+h.getX(f)*(i[2]-i[0]);const m=i[1]+h.getY(f)*(i[3]-i[1]);let _=0;r&&(_=r-Math.cos(d/r)*r,d=Math.sin(d/r)*r),c.setXYZ(f,d,m,_)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,jl.length=0,o.raycast(e,jl);for(let f=0;f<jl.length;f++)jl[f].object=this,t.push(jl[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,kx.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};$0.forEach(s=>{const e="_private_"+s;Object.defineProperty(ey.prototype,s,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});function Ax(s,e,t=(n,r)=>n===r){if(s===e)return!0;if(!s||!e)return!1;const n=s.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(s[r],e[r]))return!1;return!0}const $c=[];function Mx(s,e,t=!1,n={}){for(const i of $c)if(Ax(e,i.keys,i.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return i.response;if(!t)throw i.promise}const r={keys:e,equal:n.equal,promise:s(...e).then(i=>r.response=i).then(()=>{n.lifespan&&n.lifespan>0&&setTimeout(()=>{const i=$c.indexOf(r);i!==-1&&$c.splice(i,1)},n.lifespan)}).catch(i=>r.error=i)};if($c.push(r),!t)throw r.promise}const Dx=(s,e,t)=>Mx(s,e,!1,t),VD=V.forwardRef(({anchorX:s="center",anchorY:e="middle",font:t,fontSize:n=1,children:r,characters:i,onSync:o,...u},c)=>{const h=wt(({invalidate:_})=>_),[f]=V.useState(()=>new ey),[d,m]=V.useMemo(()=>{const _=[];let y="";return V.Children.forEach(r,v=>{typeof v=="string"||typeof v=="number"?y+=v:_.push(v)}),[_,y]},[r]);return Dx(()=>new Promise(_=>hx({font:t,characters:i},_)),["troika-text",t,i]),V.useLayoutEffect(()=>void f.sync(()=>{h(),o&&o(f)})),V.useEffect(()=>()=>f.dispose(),[f]),V.createElement("primitive",ii({object:f,ref:c,font:t,text:m,anchorX:s,anchorY:e,fontSize:n},u),d)});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Ue={LEFT:1,RIGHT:2,MIDDLE:4},se=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),ma={NONE:0,IN:1,OUT:-1};function mo(s){return s.isPerspectiveCamera}function Mi(s){return s.isOrthographicCamera}const ga=Math.PI*2,rv=Math.PI/2,ty=1e-5,ql=Math.PI/180;function ns(s,e,t){return Math.max(e,Math.min(t,s))}function St(s,e=ty){return Math.abs(s)<e}function lt(s,e,t=ty){return St(s-e,t)}function sv(s,e){return Math.round(s/e)*e}function Yl(s){return isFinite(s)?s:s<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Xl(s){return Math.abs(s)<Number.MAX_VALUE?s:s*(1/0)}function eh(s,e,t,n,r=1/0,i){n=Math.max(1e-4,n);const o=2/n,u=o*i,c=1/(1+u+.48*u*u+.235*u*u*u);let h=s-e;const f=e,d=r*n;h=ns(h,-d,d),e=s-h;const m=(t.value+o*h)*i;t.value=(t.value-o*m)*c;let _=e+(h+m)*c;return f-s>0==_>f&&(_=f,t.value=(_-f)/i),_}function iv(s,e,t,n,r=1/0,i,o){n=Math.max(1e-4,n);const u=2/n,c=u*i,h=1/(1+c+.48*c*c+.235*c*c*c);let f=e.x,d=e.y,m=e.z,_=s.x-f,y=s.y-d,v=s.z-m;const T=f,x=d,w=m,O=r*n,C=O*O,E=_*_+y*y+v*v;if(E>C){const q=Math.sqrt(E);_=_/q*O,y=y/q*O,v=v/q*O}f=s.x-_,d=s.y-y,m=s.z-v;const k=(t.x+u*_)*i,A=(t.y+u*y)*i,M=(t.z+u*v)*i;t.x=(t.x-u*k)*h,t.y=(t.y-u*A)*h,t.z=(t.z-u*M)*h,o.x=f+(_+k)*h,o.y=d+(y+A)*h,o.z=m+(v+M)*h;const D=T-s.x,U=x-s.y,R=w-s.z,P=o.x-T,F=o.y-x,B=o.z-w;return D*P+U*F+R*B>0&&(o.x=T,o.y=x,o.z=w,t.x=(o.x-T)/i,t.y=(o.y-x)/i,t.z=(o.z-w)/i),o}function Ud(s,e){e.set(0,0),s.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=s.length,e.y/=s.length}function Nd(s,e){return Mi(s)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Px{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}const Rx="2.7.3",th=1/8,ny=typeof window<"u",Ix=ny&&/Mac/.test(navigator.platform),Ux=!(ny&&"PointerEvent"in window);let Pe,ov,nh,Fd,tr,He,rt,_a,Zl,bs,Os,go,av,lv,Br,Ql,va,uv,Ld,cv,zd,Bd,rh,Vd=class mp extends Px{static install(e){Pe=e.THREE,ov=Object.freeze(new Pe.Vector3(0,0,0)),nh=Object.freeze(new Pe.Vector3(0,1,0)),Fd=Object.freeze(new Pe.Vector3(0,0,1)),tr=new Pe.Vector2,He=new Pe.Vector3,rt=new Pe.Vector3,_a=new Pe.Vector3,Zl=new Pe.Vector3,bs=new Pe.Vector3,Os=new Pe.Vector3,go=new Pe.Vector3,av=new Pe.Vector3,lv=new Pe.Vector3,Br=new Pe.Spherical,Ql=new Pe.Spherical,va=new Pe.Box3,uv=new Pe.Box3,Ld=new Pe.Sphere,cv=new Pe.Quaternion,zd=new Pe.Quaternion,Bd=new Pe.Matrix4,rh=new Pe.Raycaster}static get ACTION(){return se}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=se.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=ma.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Pe.Vector3,this._focalOffsetVelocity=new Pe.Vector3,this._zoomVelocity={value:0},this._truckInternal=(C,E,k)=>{let A,M;if(mo(this._camera)){const D=He.copy(this._camera.position).sub(this._target),U=this._camera.getEffectiveFOV()*ql,R=D.length()*Math.tan(U*.5);A=this.truckSpeed*C*R/this._elementRect.height,M=this.truckSpeed*E*R/this._elementRect.height}else if(Mi(this._camera)){const D=this._camera;A=C*(D.right-D.left)/D.zoom/this._elementRect.width,M=E*(D.top-D.bottom)/D.zoom/this._elementRect.height}else return;this.verticalDragToForward?(k?this.setFocalOffset(this._focalOffsetEnd.x+A,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(A,0,!0),this.forward(-M,!0)):k?this.setFocalOffset(this._focalOffsetEnd.x+A,this._focalOffsetEnd.y+M,this._focalOffsetEnd.z,!0):this.truck(A,M,!0)},this._rotateInternal=(C,E)=>{const k=ga*this.azimuthRotateSpeed*C/this._elementRect.height,A=ga*this.polarRotateSpeed*E/this._elementRect.height;this.rotate(k,A,!0)},this._dollyInternal=(C,E,k)=>{const A=Math.pow(.95,-C*this.dollySpeed),M=this._sphericalEnd.radius,D=this._sphericalEnd.radius*A,U=ns(D,this.minDistance,this.maxDistance),R=U-D;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(D,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(R,!0),this._dollyToNoClamp(U,!0)):this._dollyToNoClamp(U,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?D:U)-M,this._dollyControlCoord.set(E,k)),this._lastDollyDirection=Math.sign(-C)},this._zoomInternal=(C,E,k)=>{const A=Math.pow(.95,C*this.dollySpeed),M=this._zoom,D=this._zoom*A;this.zoomTo(D,!0),this.dollyToCursor&&(this._changedZoom+=D-M,this._dollyControlCoord.set(E,k))},typeof Pe>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Pe.Quaternion().setFromUnitVectors(this._camera.up,nh),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=se.NONE,this._target=new Pe.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Pe.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Pe.Spherical().setFromVector3(He.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Pe.Vector3,new Pe.Vector3,new Pe.Vector3,new Pe.Vector3],this._updateNearPlaneCorners(),this._boundary=new Pe.Box3(new Pe.Vector3(-1/0,-1/0,-1/0),new Pe.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Pe.Vector2,this.mouseButtons={left:se.ROTATE,middle:se.DOLLY,right:se.TRUCK,wheel:mo(this._camera)?se.DOLLY:Mi(this._camera)?se.ZOOM:se.NONE},this.touches={one:se.TOUCH_ROTATE,two:mo(this._camera)?se.TOUCH_DOLLY_TRUCK:Mi(this._camera)?se.TOUCH_ZOOM_TRUCK:se.NONE,three:se.TOUCH_TRUCK};const n=new Pe.Vector2,r=new Pe.Vector2,i=new Pe.Vector2,o=C=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),M=C.clientX/A.width,D=C.clientY/A.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}const E=C.pointerType!=="mouse"?null:(C.buttons&Ue.LEFT)===Ue.LEFT?Ue.LEFT:(C.buttons&Ue.MIDDLE)===Ue.MIDDLE?Ue.MIDDLE:(C.buttons&Ue.RIGHT)===Ue.RIGHT?Ue.RIGHT:null;if(E!==null){const A=this._findPointerByMouseButton(E);A&&this._disposePointer(A)}if((C.buttons&Ue.LEFT)===Ue.LEFT&&this._lockedPointer)return;const k={pointerId:C.pointerId,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:E};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),this._isDragging=!0,v(C)},u=C=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),M=C.clientX/A.width,D=C.clientY/A.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}const E=(C.buttons&Ue.LEFT)===Ue.LEFT?Ue.LEFT:(C.buttons&Ue.MIDDLE)===Ue.MIDDLE?Ue.MIDDLE:(C.buttons&Ue.RIGHT)===Ue.RIGHT?Ue.RIGHT:null;if(E!==null){const A=this._findPointerByMouseButton(E);A&&this._disposePointer(A)}const k={pointerId:1,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:(C.buttons&Ue.LEFT)===Ue.LEFT?Ue.LEFT:(C.buttons&Ue.MIDDLE)===Ue.LEFT?Ue.MIDDLE:(C.buttons&Ue.RIGHT)===Ue.LEFT?Ue.RIGHT:null};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",h),this._domElement.ownerDocument.addEventListener("mouseup",d),this._isDragging=!0,v(C)},c=C=>{C.cancelable&&C.preventDefault();const E=C.pointerId,k=this._lockedPointer||this._findPointerById(E);if(k){if(k.clientX=C.clientX,k.clientY=C.clientY,k.deltaX=C.movementX,k.deltaY=C.movementY,this._state=0,C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(C.buttons&Ue.LEFT)===Ue.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(C.buttons&Ue.MIDDLE)===Ue.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(C.buttons&Ue.RIGHT)===Ue.RIGHT&&(this._state=this._state|this.mouseButtons.right);T()}},h=C=>{const E=this._lockedPointer||this._findPointerById(1);E&&(E.clientX=C.clientX,E.clientY=C.clientY,E.deltaX=C.movementX,E.deltaY=C.movementY,this._state=0,(this._lockedPointer||(C.buttons&Ue.LEFT)===Ue.LEFT)&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Ue.MIDDLE)===Ue.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Ue.RIGHT)===Ue.RIGHT&&(this._state=this._state|this.mouseButtons.right),T())},f=C=>{const E=this._findPointerById(C.pointerId);if(!(E&&E===this._lockedPointer)){if(E&&this._disposePointer(E),C.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=se.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=se.NONE;x()}},d=()=>{const C=this._findPointerById(1);C&&C===this._lockedPointer||(C&&this._disposePointer(C),this._state=se.NONE,x())};let m=-1;const _=C=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===se.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const D=this._domElement.getBoundingClientRect(),U=C.clientX/D.width,R=C.clientY/D.height;if(U<this._interactiveArea.left||U>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}if(C.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===se.ROTATE||this.mouseButtons.wheel===se.TRUCK){const D=performance.now();m-D<1e3&&this._getClientRect(this._elementRect),m=D}const E=Ix?-1:-3,k=C.deltaMode===1?C.deltaY/E:C.deltaY/(E*10),A=this.dollyToCursor?(C.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(C.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case se.ROTATE:{this._rotateInternal(C.deltaX,C.deltaY),this._isUserControllingRotate=!0;break}case se.TRUCK:{this._truckInternal(C.deltaX,C.deltaY,!1),this._isUserControllingTruck=!0;break}case se.OFFSET:{this._truckInternal(C.deltaX,C.deltaY,!0),this._isUserControllingOffset=!0;break}case se.DOLLY:{this._dollyInternal(-k,A,M),this._isUserControllingDolly=!0;break}case se.ZOOM:{this._zoomInternal(-k,A,M),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},y=C=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===mp.ACTION.NONE){const E=C instanceof PointerEvent?C.pointerId:(C instanceof MouseEvent,0),k=this._findPointerById(E);k&&this._disposePointer(k),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",d);return}C.preventDefault()}},v=C=>{if(!this._enabled)return;if(Ud(this._activePointers,tr),this._getClientRect(this._elementRect),n.copy(tr),r.copy(tr),this._activePointers.length>=2){const k=tr.x-this._activePointers[1].clientX,A=tr.y-this._activePointers[1].clientY,M=Math.sqrt(k*k+A*A);i.set(0,M);const D=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,U=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(D,U)}if(this._state=0,!C)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in C&&C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(C.buttons&Ue.LEFT)===Ue.LEFT&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Ue.MIDDLE)===Ue.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Ue.RIGHT)===Ue.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&se.ROTATE)===se.ROTATE||(this._state&se.TOUCH_ROTATE)===se.TOUCH_ROTATE||(this._state&se.TOUCH_DOLLY_ROTATE)===se.TOUCH_DOLLY_ROTATE||(this._state&se.TOUCH_ZOOM_ROTATE)===se.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&se.TRUCK)===se.TRUCK||(this._state&se.TOUCH_TRUCK)===se.TOUCH_TRUCK||(this._state&se.TOUCH_DOLLY_TRUCK)===se.TOUCH_DOLLY_TRUCK||(this._state&se.TOUCH_ZOOM_TRUCK)===se.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&se.DOLLY)===se.DOLLY||(this._state&se.TOUCH_DOLLY)===se.TOUCH_DOLLY||(this._state&se.TOUCH_DOLLY_TRUCK)===se.TOUCH_DOLLY_TRUCK||(this._state&se.TOUCH_DOLLY_OFFSET)===se.TOUCH_DOLLY_OFFSET||(this._state&se.TOUCH_DOLLY_ROTATE)===se.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&se.ZOOM)===se.ZOOM||(this._state&se.TOUCH_ZOOM)===se.TOUCH_ZOOM||(this._state&se.TOUCH_ZOOM_TRUCK)===se.TOUCH_ZOOM_TRUCK||(this._state&se.TOUCH_ZOOM_OFFSET)===se.TOUCH_ZOOM_OFFSET||(this._state&se.TOUCH_ZOOM_ROTATE)===se.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&se.OFFSET)===se.OFFSET||(this._state&se.TOUCH_OFFSET)===se.TOUCH_OFFSET||(this._state&se.TOUCH_DOLLY_OFFSET)===se.TOUCH_DOLLY_OFFSET||(this._state&se.TOUCH_ZOOM_OFFSET)===se.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},T=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Ud(this._activePointers,tr);const E=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,k=E?-E.deltaX:r.x-tr.x,A=E?-E.deltaY:r.y-tr.y;if(r.copy(tr),((this._state&se.ROTATE)===se.ROTATE||(this._state&se.TOUCH_ROTATE)===se.TOUCH_ROTATE||(this._state&se.TOUCH_DOLLY_ROTATE)===se.TOUCH_DOLLY_ROTATE||(this._state&se.TOUCH_ZOOM_ROTATE)===se.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(k,A),this._isUserControllingRotate=!0),(this._state&se.DOLLY)===se.DOLLY||(this._state&se.ZOOM)===se.ZOOM){const M=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,U=this.dollyDragInverted?-1:1;(this._state&se.DOLLY)===se.DOLLY?(this._dollyInternal(U*A*th,M,D),this._isUserControllingDolly=!0):(this._zoomInternal(U*A*th,M,D),this._isUserControllingZoom=!0)}if((this._state&se.TOUCH_DOLLY)===se.TOUCH_DOLLY||(this._state&se.TOUCH_ZOOM)===se.TOUCH_ZOOM||(this._state&se.TOUCH_DOLLY_TRUCK)===se.TOUCH_DOLLY_TRUCK||(this._state&se.TOUCH_ZOOM_TRUCK)===se.TOUCH_ZOOM_TRUCK||(this._state&se.TOUCH_DOLLY_OFFSET)===se.TOUCH_DOLLY_OFFSET||(this._state&se.TOUCH_ZOOM_OFFSET)===se.TOUCH_ZOOM_OFFSET||(this._state&se.TOUCH_DOLLY_ROTATE)===se.TOUCH_DOLLY_ROTATE||(this._state&se.TOUCH_ZOOM_ROTATE)===se.TOUCH_ZOOM_ROTATE){const M=tr.x-this._activePointers[1].clientX,D=tr.y-this._activePointers[1].clientY,U=Math.sqrt(M*M+D*D),R=i.y-U;i.set(0,U);const P=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,F=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&se.TOUCH_DOLLY)===se.TOUCH_DOLLY||(this._state&se.TOUCH_DOLLY_ROTATE)===se.TOUCH_DOLLY_ROTATE||(this._state&se.TOUCH_DOLLY_TRUCK)===se.TOUCH_DOLLY_TRUCK||(this._state&se.TOUCH_DOLLY_OFFSET)===se.TOUCH_DOLLY_OFFSET?(this._dollyInternal(R*th,P,F),this._isUserControllingDolly=!0):(this._zoomInternal(R*th,P,F),this._isUserControllingZoom=!0)}((this._state&se.TRUCK)===se.TRUCK||(this._state&se.TOUCH_TRUCK)===se.TOUCH_TRUCK||(this._state&se.TOUCH_DOLLY_TRUCK)===se.TOUCH_DOLLY_TRUCK||(this._state&se.TOUCH_ZOOM_TRUCK)===se.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(k,A,!1),this._isUserControllingTruck=!0),((this._state&se.OFFSET)===se.OFFSET||(this._state&se.TOUCH_OFFSET)===se.TOUCH_OFFSET||(this._state&se.TOUCH_DOLLY_OFFSET)===se.TOUCH_DOLLY_OFFSET||(this._state&se.TOUCH_ZOOM_OFFSET)===se.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(k,A,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},x=()=>{Ud(this._activePointers,tr),r.copy(tr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",w),this._domElement.ownerDocument.addEventListener("pointerlockerror",O),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",f),v())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",w),this._domElement.ownerDocument.removeEventListener("pointerlockerror",O))};const w=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},O=()=>{this.unlockPointer()};this._addAllEventListeners=C=>{this._domElement=C,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),Ux&&this._domElement.addEventListener("mousedown",u),this._domElement.addEventListener("pointercancel",f),this._domElement.addEventListener("wheel",_,{passive:!1}),this._domElement.addEventListener("contextmenu",y)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",u),this._domElement.removeEventListener("pointercancel",f),this._domElement.removeEventListener("wheel",_,{passive:!1}),this._domElement.removeEventListener("contextmenu",y),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("pointerup",f),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",w),this._domElement.ownerDocument.removeEventListener("pointerlockerror",O))},this.cancel=()=>{this._state!==se.NONE&&(this._state=se.NONE,this._activePointers.length=0,x())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=ns(e.width,0,1),this._interactiveArea.height=ns(e.height,0,1),this._interactiveArea.x=ns(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=ns(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=ns(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=ns(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||lt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&lt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=ma.NONE,this._changedDolly=0,this._dollyToNoClamp(ns(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),u=lt(o,this._spherical.radius);if(!(n>e)&&u)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const i=!t||lt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Zl).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||lt(this._target.x,this._targetEnd.x,this.restThreshold)&&lt(this._target.y,this._targetEnd.y,this.restThreshold)&&lt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=ns(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||lt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),bs.setFromMatrixColumn(this._camera.matrix,0),Os.setFromMatrixColumn(this._camera.matrix,1),bs.multiplyScalar(e),Os.multiplyScalar(-t);const r=He.copy(bs).add(Os),i=rt.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){He.setFromMatrixColumn(this._camera.matrix,0),He.crossVectors(this._camera.up,He),He.multiplyScalar(e);const n=rt.copy(this._targetEnd).add(He);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return He.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+He.x,this._targetEnd.y+He.y,this._targetEnd.z+He.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const i=He.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||lt(this._target.x,this._targetEnd.x,this.restThreshold)&&lt(this._target.y,this._targetEnd.y,this.restThreshold)&&lt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,r=!1){const u=He.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(u.x,u.y,u.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:u=0}={}){const c=[],h=e.isBox3?va.copy(e):va.setFromObject(e);h.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const f=sv(this._sphericalEnd.theta,rv),d=sv(this._sphericalEnd.phi,rv);c.push(this.rotateTo(f,d,t));const m=He.setFromSpherical(this._sphericalEnd).normalize(),_=cv.setFromUnitVectors(m,Fd),y=lt(Math.abs(m.y),1);y&&_.multiply(zd.setFromAxisAngle(nh,f)),_.multiply(this._yAxisUpSpaceInverse);const v=uv.makeEmpty();rt.copy(h.min).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.min).setX(h.max.x).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.min).setY(h.max.y).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.max).setZ(h.min.z).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.min).setZ(h.max.z).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.max).setY(h.min.y).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.max).setX(h.min.x).applyQuaternion(_),v.expandByPoint(rt),rt.copy(h.max).applyQuaternion(_),v.expandByPoint(rt),v.min.x-=r,v.min.y-=o,v.max.x+=i,v.max.y+=u,_.setFromUnitVectors(Fd,m),y&&_.premultiply(zd.invert()),_.premultiply(this._yAxisUpSpace);const T=v.getSize(He),x=v.getCenter(rt).applyQuaternion(_);if(mo(this._camera)){const w=this.getDistanceToFitBox(T.x,T.y,T.z,n);c.push(this.moveTo(x.x,x.y,x.z,t)),c.push(this.dollyTo(w,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(Mi(this._camera)){const w=this._camera,O=w.right-w.left,C=w.top-w.bottom,E=n?Math.max(O/T.x,C/T.y):Math.min(O/T.x,C/T.y);c.push(this.moveTo(x.x,x.y,x.z,t)),c.push(this.zoomTo(E,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const n=[],i=e instanceof Pe.Sphere?Ld.copy(e):mp.createBoundingSphere(e,Ld);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,t)),mo(this._camera)){const o=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(o,t))}else if(Mi(this._camera)){const o=this._camera.right-this._camera.left,u=this._camera.top-this._camera.bottom,c=2*i.radius,h=Math.min(o/c,u/c);n.push(this.zoomTo(h,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,o,u=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ma.NONE,this._changedDolly=0;const c=rt.set(r,i,o),h=He.set(e,t,n);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(h.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,u||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!u||lt(this._target.x,this._targetEnd.x,this.restThreshold)&&lt(this._target.y,this._targetEnd.y,this.restThreshold)&&lt(this._target.z,this._targetEnd.z,this.restThreshold)&&lt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&lt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&lt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,n,r,i,o,u,c,h,f,d,m,_,y=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ma.NONE,this._changedDolly=0;const v=He.set(r,i,o),T=rt.set(e,t,n);Br.setFromVector3(T.sub(v).applyQuaternion(this._yAxisUpSpace));const x=_a.set(f,d,m),w=rt.set(u,c,h);Ql.setFromVector3(w.sub(x).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(v.lerp(x,_));const O=Ql.theta-Br.theta,C=Ql.phi-Br.phi,E=Ql.radius-Br.radius;this._sphericalEnd.set(Br.radius+E*_,Br.phi+C*_,Br.theta+O*_),this.normalizeRotations(),this._needsUpdate=!0,y||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const k=!y||lt(this._target.x,this._targetEnd.x,this.restThreshold)&&lt(this._target.y,this._targetEnd.y,this.restThreshold)&&lt(this._target.z,this._targetEnd.z,this.restThreshold)&&lt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&lt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&lt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(k)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const i=this.getPosition(He),o=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=ns(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||lt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&lt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&lt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),bs.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Os.setFromMatrixColumn(this._camera.matrixWorldInverse,1),go.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=He.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);bs.multiplyScalar(o.x),Os.multiplyScalar(o.y),go.multiplyScalar(o.z),He.copy(bs).add(Os).add(go),He.z=He.z+i,this.dollyTo(i,!1),this.setFocalOffset(-He.x,He.y,-He.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Pe.Vector4,typeof e=="number"?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(Nd(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*ql,u=this._camera.aspect;return((r?i>u:i<u)?t:e/u)*.5/Math.tan(o*.5)+n*.5}getDistanceToFitSphere(e){if(Nd(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*ql,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:n;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Pe.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Pe.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Pe.Spherical?e:new Pe.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Pe.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ga,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ga),this._spherical.theta+=ga*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ga)}reset(e=!1){if(!lt(this._camera.up.x,this._cameraUp0.x)||!lt(this._camera.up.y,this._cameraUp0.y)||!lt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(He);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,nh),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=He.subVectors(this._target,this._camera.position).normalize(),t=rt.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(He);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=av.subVectors(this._targetEnd,this._target),o=lv.subVectors(this._focalOffsetEnd,this._focalOffset),u=this._zoomEnd-this._zoom;if(St(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=eh(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(St(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=eh(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(St(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=eh(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(St(i.x)&&St(i.y)&&St(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;iv(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(St(o.x)&&St(o.y)&&St(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;iv(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(St(u))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=eh(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(mo(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,m=this._camera,_=this._getCameraDirection(Zl),y=He.copy(_).cross(m.up).normalize();y.lengthSq()===0&&(y.x=1);const v=rt.crossVectors(y,_),T=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*ql*.5),w=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,O=_a.copy(this._targetEnd).add(y.multiplyScalar(this._dollyControlCoord.x*T*m.aspect)).add(v.multiplyScalar(this._dollyControlCoord.y*T)),C=He.copy(this._targetEnd).lerp(O,w),E=this._lastDollyDirection===ma.IN&&this._spherical.radius<=this.minDistance,k=this._lastDollyDirection===ma.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(E||k)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const M=rt.copy(_).multiplyScalar(-d);C.add(M)}this._boundary.clampPoint(C,C);const A=rt.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(A),this._changedDolly-=d,St(this._changedDolly)&&(this._changedDolly=0)}else if(Mi(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,m=this._camera,_=He.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),y=rt.set(0,0,-1).applyQuaternion(m.quaternion),v=_a.copy(_).add(y.multiplyScalar(-_.dot(m.up))),x=-(this._zoom-d-this._zoom)/this._zoom,w=this._getCameraDirection(Zl),O=this._targetEnd.dot(w),C=He.copy(this._targetEnd).lerp(v,x),E=C.dot(w),k=w.multiplyScalar(E-O);C.sub(k),this._boundary.clampPoint(C,C);const A=rt.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(A),this._changedZoom-=d,St(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!St(this._focalOffset.x)||!St(this._focalOffset.y)||!St(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),bs.setFromMatrixColumn(this._camera.matrix,0),Os.setFromMatrixColumn(this._camera.matrix,1),go.setFromMatrixColumn(this._camera.matrix,2),bs.multiplyScalar(this._focalOffset.x),Os.multiplyScalar(-this._focalOffset.y),go.multiplyScalar(this._focalOffset.z),He.copy(bs).add(Os).add(go),this._camera.position.add(He)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),He.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?(this.dispatchEvent({type:"update"}),St(t,this.restThreshold)&&St(n,this.restThreshold)&&St(r,this.restThreshold)&&St(i.x,this.restThreshold)&&St(i.y,this.restThreshold)&&St(i.z,this.restThreshold)&&St(o.x,this.restThreshold)&&St(o.y,this.restThreshold)&&St(o.z,this.restThreshold)&&St(u,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Yl(this.maxDistance),minZoom:this.minZoom,maxZoom:Yl(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Yl(this.maxPolarAngle),minAzimuthAngle:Yl(this.minAzimuthAngle),maxAzimuthAngle:Yl(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:He.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Xl(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Xl(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Xl(n.maxPolarAngle),this.minAzimuthAngle=Xl(n.minAzimuthAngle),this.maxAzimuthAngle=Xl(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),Br.setFromVector3(He.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Br.theta,Br.phi,t),this.dollyTo(Br.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Rx),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(r===0)return e;const i=rt.copy(t).add(e),u=this._boundary.clampPoint(i,_a).sub(i),c=u.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(n===0)return e.add(t).add(u);{const h=1+n*c/t.dot(u);return e.add(rt.copy(t).multiplyScalar(h)).add(u.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(mo(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*ql,r=Math.tan(n*.5)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(Mi(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||Nd(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(Zl);Bd.lookAt(ov,n,this._camera.up);for(let r=0;r<4;r++){const i=rt.copy(this._nearPlaneCorners[r]);i.applyMatrix4(Bd);const o=_a.addVectors(this._target,i);rh.set(o,n),rh.far=this._spherical.radius+1;const u=rh.intersectObjects(this.colliderMeshes);u.length!==0&&u[0].distance<e&&(e=u[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Pe.Sphere){const n=t,r=n.center;va.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&va.expandByObject(o)}),va.getCenter(r);let i=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const u=o,c=u.geometry.clone();c.applyMatrix4(u.matrixWorld);const f=c.attributes.position;for(let d=0,m=f.count;d<m;d++)He.fromBufferAttribute(f,d),i=Math.max(i,r.distanceToSquared(He))}),n.radius=Math.sqrt(i),n}};const GD=V.forwardRef((s,e)=>{V.useMemo(()=>{Vd.install({THREE:i0}),Kh({CameraControlsImpl:Vd})},[]);const{camera:t,domElement:n,makeDefault:r,onStart:i,onEnd:o,onChange:u,regress:c,...h}=s,f=wt(E=>E.camera),d=wt(E=>E.gl),m=wt(E=>E.invalidate),_=wt(E=>E.events),y=wt(E=>E.setEvents),v=wt(E=>E.set),T=wt(E=>E.get),x=wt(E=>E.performance),w=t||f,O=n||_.connected||d.domElement,C=V.useMemo(()=>new Vd(w),[w]);return Jh((E,k)=>{C.enabled&&C.update(k)},-1),V.useEffect(()=>(C.connect(O),()=>void C.disconnect()),[O,C]),V.useEffect(()=>{const E=M=>{m(),c&&x.regress(),u&&u(M)},k=M=>{i&&i(M)},A=M=>{o&&o(M)};return C.addEventListener("update",E),C.addEventListener("controlstart",k),C.addEventListener("controlend",A),()=>{C.removeEventListener("update",E),C.removeEventListener("controlstart",k),C.removeEventListener("controlend",A)}},[C,i,o,m,y,c,u]),V.useEffect(()=>{if(r){const E=T().controls;return v({controls:C}),()=>v({controls:E})}},[r,C]),V.createElement("primitive",ii({ref:e,object:C},h))}),ry=V.createContext(null),WD=V.forwardRef((s,e)=>{V.useMemo(()=>Kh({SegmentObject:Nx}),[]);const{limit:t=1e3,lineWidth:n=1,children:r,...i}=s,[o,u]=V.useState([]),[c]=V.useState(()=>new W0),[h]=V.useState(()=>new ef),[f]=V.useState(()=>new $h),[d]=V.useState(()=>new pt(512,512)),[m]=V.useState(()=>Array(t*6).fill(0)),[_]=V.useState(()=>Array(t*6).fill(0)),y=V.useMemo(()=>({subscribe:v=>(u(T=>[...T,v]),()=>u(T=>T.filter(x=>x.current!==v.current)))}),[]);return Jh(()=>{for(let T=0;T<t;T++){var v;const x=(v=o[T])==null?void 0:v.current;x&&(m[T*6+0]=x.start.x,m[T*6+1]=x.start.y,m[T*6+2]=x.start.z,m[T*6+3]=x.end.x,m[T*6+4]=x.end.y,m[T*6+5]=x.end.z,_[T*6+0]=x.color.r,_[T*6+1]=x.color.g,_[T*6+2]=x.color.b,_[T*6+3]=x.color.r,_[T*6+4]=x.color.g,_[T*6+5]=x.color.b)}f.setColors(_),f.setPositions(m),c.computeLineDistances()}),V.createElement("primitive",{object:c,ref:e},V.createElement("primitive",{object:f,attach:"geometry"}),V.createElement("primitive",ii({object:h,attach:"material",vertexColors:!0,resolution:d,linewidth:n},i)),V.createElement(ry.Provider,{value:y},r))});class Nx{constructor(){this.color=new Cr("white"),this.start=new Ve(0,0,0),this.end=new Ve(0,0,0)}}const hv=s=>s instanceof Ve?s:new Ve(...typeof s=="number"?[s,s,s]:s),HD=V.forwardRef(({color:s,start:e,end:t},n)=>{const r=V.useContext(ry);if(!r)throw"Segment must used inside Segments component.";const i=V.useRef(null);return V.useLayoutEffect(()=>r.subscribe(i),[]),V.createElement("segmentObject",{ref:Aw([i,n]),color:s,start:hv(e),end:hv(t)})});function jD({all:s,scene:e,camera:t}){const n=wt(({gl:o})=>o),r=wt(({camera:o})=>o),i=wt(({scene:o})=>o);return V.useLayoutEffect(()=>{const o=[];s&&(e||i).traverse(h=>{h.visible===!1&&(o.push(h),h.visible=!0)}),n.compile(e||i,t||r);const u=new dS(128);new pS(.01,1e5,u).update(n,e||i),u.dispose(),o.forEach(h=>h.visible=!1)},[]),null}function qD({pixelated:s}){const e=wt(o=>o.gl),t=wt(o=>o.internal.active),n=wt(o=>o.performance.current),r=wt(o=>o.viewport.initialDpr),i=wt(o=>o.setDpr);return V.useEffect(()=>{const o=e.domElement;return()=>{t&&i(r),s&&o&&(o.style.imageRendering="auto")}},[]),V.useEffect(()=>{i(n*r),s&&e.domElement&&(e.domElement.style.imageRendering=n===1?"auto":"pixelated")},[n]),null}function YD(){const s=wt(n=>n.get),e=wt(n=>n.setEvents),t=wt(n=>n.performance.current);return V.useEffect(()=>{const n=s().events.enabled;return()=>e({enabled:n})},[]),V.useEffect(()=>e({enabled:t===1}),[t]),null}const $p=V.createContext(null);function XD({children:s,enabled:e=!0}){const[t,n]=V.useState([]),r=V.useMemo(()=>({selected:t,select:n,enabled:e}),[t,n,e]);return La.jsx($p.Provider,{value:r,children:s})}function ZD({enabled:s=!1,children:e,...t}){const n=V.useRef(null),r=V.useContext($p);return V.useEffect(()=>{if(r&&s){let i=!1;const o=[];if(n.current.traverse(u=>{u.type==="Mesh"&&o.push(u),r.selected.indexOf(u)===-1&&(i=!0)}),i)return r.select(u=>[...u,...o]),()=>{r.select(u=>u.filter(c=>!o.includes(c)))}}},[s,e,r]),La.jsx("group",{ref:n,...t,children:e})}/**
 * postprocessing v6.33.4 build Sat Dec 02 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var sy="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Ze={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},iy="",gn="srgb",nf="srgb-linear",ri={NONE:0,DEPTH:1,CONVOLUTION:2},st={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},rf={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},sh={DEFAULT:0,ESKIL:1},oy=Number(Qh.replace(/\D+/g,"")),ay=oy>=152,Fx=new Map([[c0,nf],[h0,gn]]),Lx=new Map([[nf,c0],[gn,h0]]);function Va(s){return s===null?null:ay?s.outputColorSpace:Fx.get(s.outputEncoding)}function Ui(s,e){s!==null&&(ay?s.colorSpace=e:s.encoding=Lx.get(e))}function Lu(s){return oy<154?s.replace("colorspace_fragment","encodings_fragment"):s}var zx=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Bx="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Vx=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Gx=class extends us{constructor(s=new zi){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ne(null),texelSize:new Ne(new zi),scale:new Ne(1),kernel:new Ne(0)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zx,vertexShader:Bx}),this.fragmentShader=Lu(this.fragmentShader),this.setTexelSize(s.x,s.y),this.kernelSize=rf.MEDIUM}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.inputBuffer=s}get kernelSequence(){return Vx[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(s){this.uniforms.scale.value=s}getScale(){return this.uniforms.scale.value}setScale(s){this.uniforms.scale.value=s}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(s){this.uniforms.kernel.value=s}setKernel(s){this.kernel=s}setTexelSize(s,e){this.uniforms.texelSize.value.set(s,e,s*.5,e*.5)}setSize(s,e){const t=1/s,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},Wx=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,ly=class extends us{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ne(null),opacity:new Ne(1)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wx,vertexShader:sy}),this.fragmentShader=Lu(this.fragmentShader)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}getOpacity(s){return this.uniforms.opacity.value}setOpacity(s){this.uniforms.opacity.value=s}},Hx=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,jx=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,qx=class extends us{constructor(s=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ne(null),cameraNear:new Ne(.3),cameraFar:new Ne(1e3)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hx,vertexShader:jx}),this.depthBuffer=s,this.depthPacking=vh,this.copyCameraSettings(e)}set depthBuffer(s){this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,e=vh){this.depthBuffer=s,this.depthPacking=e}adoptCameraSettings(s){this.copyCameraSettings(s)}copyCameraSettings(s){s&&(this.uniforms.cameraNear.value=s.near,this.uniforms.cameraFar.value=s.far,s instanceof Iu?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Yx=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Xx="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Zx=class extends us{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ne(null),normalBuffer:new Ne(null),texelSize:new Ne(new pt)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Yx,vertexShader:Xx})}set depthBuffer(s){this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,e=el){this.depthBuffer=s,this.depthPacking=e}set normalBuffer(s){this.uniforms.normalBuffer.value=s,s!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(s){this.normalBuffer=s}setTexelSize(s,e){this.uniforms.texelSize.value.set(s,e)}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},Qx=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Kx="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Jx=class extends us{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ne(null),texelSize:new Ne(new pt)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Qx,vertexShader:Kx}),this.fragmentShader=Lu(this.fragmentShader)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},$x=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,e2="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",t2=class extends us{constructor(s,e,t,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Qh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ne(null),depthBuffer:new Ne(null),resolution:new Ne(new pt),texelSize:new Ne(new pt),cameraNear:new Ne(.3),cameraFar:new Ne(1e3),aspect:new Ne(1),time:new Ne(0)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),s&&this.setShaderParts(s),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(s){this.uniforms.depthBuffer.value=s}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,e=el){this.depthBuffer=s,this.depthPacking=e}setShaderData(s){this.setShaderParts(s.shaderParts),this.setDefines(s.defines),this.setUniforms(s.uniforms),this.setExtensions(s.extensions)}setShaderParts(s){return this.fragmentShader=$x.replace(st.FRAGMENT_HEAD,s.get(st.FRAGMENT_HEAD)||"").replace(st.FRAGMENT_MAIN_UV,s.get(st.FRAGMENT_MAIN_UV)||"").replace(st.FRAGMENT_MAIN_IMAGE,s.get(st.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=e2.replace(st.VERTEX_HEAD,s.get(st.VERTEX_HEAD)||"").replace(st.VERTEX_MAIN_SUPPORT,s.get(st.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Lu(this.fragmentShader),this.needsUpdate=!0,this}setDefines(s){for(const e of s.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(s){for(const e of s.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(s){this.extensions={};for(const e of s)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(s){this.encodeOutput!==s&&(s?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(s){return this.encodeOutput}setOutputEncodingEnabled(s){this.encodeOutput=s}get time(){return this.uniforms.time.value}set time(s){this.uniforms.time.value=s}setDeltaTime(s){this.uniforms.time.value+=s}adoptCameraSettings(s){this.copyCameraSettings(s)}copyCameraSettings(s){s&&(this.uniforms.cameraNear.value=s.near,this.uniforms.cameraFar.value=s.far,s instanceof Iu?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(s,e){const t=this.uniforms;t.resolution.value.set(s,e),t.texelSize.value.set(1/s,1/e),t.aspect.value=s/e}static get Section(){return st}},n2=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,r2=class extends us{constructor(s=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Qh.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ne(null),threshold:new Ne(0),smoothing:new Ne(1),range:new Ne(null)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:n2,vertexShader:sy}),this.colorOutput=s,this.luminanceRange=e}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get threshold(){return this.uniforms.threshold.value}set threshold(s){this.smoothing>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=s}getThreshold(){return this.threshold}setThreshold(s){this.threshold=s}get smoothing(){return this.uniforms.smoothing.value}set smoothing(s){this.threshold>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=s}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(s){this.smoothing=s}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(s){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(s){s?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(s){return this.colorOutput}setColorOutputEnabled(s){this.colorOutput=s}get useRange(){return this.luminanceRange!==null}set useRange(s){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(s){s!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=s,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(s){this.luminanceRange=s}},s2="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",i2="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",o2=class extends us{constructor(s=new pt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new Ne(null),texelSize:new Ne(new pt)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:s2,vertexShader:i2}),this.uniforms.texelSize.value.set(s.x,s.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}setTexelSize(s,e){this.uniforms.texelSize.value.set(s,e)}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},a2=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,l2="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",u2=class extends us{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ne(null),supportBuffer:new Ne(null),texelSize:new Ne(new pt),radius:new Ne(.85)},blending:hi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:a2,vertexShader:l2}),this.fragmentShader=Lu(this.fragmentShader)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}set supportBuffer(s){this.uniforms.supportBuffer.value=s}get radius(){return this.uniforms.radius.value}set radius(s){this.uniforms.radius.value=s}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},c2=new s0,Oi=null;function h2(){if(Oi===null){const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Oi=new Gp,Oi.setAttribute!==void 0?(Oi.setAttribute("position",new Wc(s,3)),Oi.setAttribute("uv",new Wc(e,2))):(Oi.addAttribute("position",new Wc(s,3)),Oi.addAttribute("uv",new Wc(e,2)))}return Oi}var Xn=class uy{constructor(e="Pass",t=new _h,n=c2){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Uu(h2(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new _h),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=el){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ar||t instanceof Wp||t instanceof Xh||t instanceof uy)&&this[e].dispose()}}},f2=class extends Xn{constructor(s,e=!0){super("CopyPass"),this.fullscreenMaterial=new ly,this.needsSwap=!1,this.renderTarget=s,s===void 0&&(this.renderTarget=new Ar(1,1,{minFilter:Fa,magFilter:Fa,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(s){this.autoResize=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(s){this.autoResize=s}render(s,e,t,n,r){this.fullscreenMaterial.inputBuffer=e.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,e){this.autoResize&&this.renderTarget.setSize(s,e)}initialize(s,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Ps?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":Va(s)===gn&&Ui(this.renderTarget.texture,gn))}},d2=class extends Xn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(s,e,t,n,r){const i=s.state.buffers.stencil;i.setLocked(!1),i.setTest(!1)}},fv=new Cr,em=class extends Xn{constructor(s=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=s,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(s,e,t){this.color=s,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(s){this.overrideClearColor=s}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(s){this.overrideClearAlpha=s}render(s,e,t,n,r){const i=this.overrideClearColor,o=this.overrideClearAlpha,u=s.getClearAlpha(),c=i!==null,h=o>=0;c?(s.getClearColor(fv),s.setClearColor(i,h?o:u)):h&&s.setClearAlpha(o),s.setRenderTarget(this.renderToScreen?null:e),s.clear(this.color,this.depth,this.stencil),c?s.setClearColor(fv,u):h&&s.setClearAlpha(u)}},sf=class extends Xn{constructor(s,e,t=null){super("RenderPass",s,e),this.needsSwap=!1,this.clearPass=new em,this.overrideMaterialManager=t===null?null:new pv(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get renderToScreen(){return super.renderToScreen}set renderToScreen(s){super.renderToScreen=s,this.clearPass.renderToScreen=s}get overrideMaterial(){const s=this.overrideMaterialManager;return s!==null?s.material:null}set overrideMaterial(s){const e=this.overrideMaterialManager;s!==null?e!==null?e.setMaterial(s):this.overrideMaterialManager=new pv(s):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(s){this.overrideMaterial=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getSelection(){return this.selection}setSelection(s){this.selection=s}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(s){this.ignoreBackground=s}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(s){this.skipShadowMapUpdate=s}getClearPass(){return this.clearPass}render(s,e,t,n,r){const i=this.scene,o=this.camera,u=this.selection,c=o.layers.mask,h=i.background,f=s.shadowMap.autoUpdate,d=this.renderToScreen?null:e;u!==null&&o.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(s.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(i.background=null),this.clearPass.enabled&&this.clearPass.render(s,e),s.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(s,i,o):s.render(i,o),o.layers.mask=c,i.background=h,s.shadowMap.autoUpdate=f}},p2=class extends Xn{constructor(s,e,{renderTarget:t,resolutionScale:n=1,width:r=$t.AUTO_SIZE,height:i=$t.AUTO_SIZE,resolutionX:o=r,resolutionY:u=i}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new sf(s,e,new l0({depthPacking:vh}));const c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0;const h=c.clearPass;h.overrideClearColor=new Cr(16777215),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ar(1,1,{minFilter:za,magFilter:za}),this.renderTarget.texture.name="DepthPass.Target");const f=this.resolution=new $t(this,o,u,n);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(s){this.renderPass.mainScene=s}set mainCamera(s){this.renderPass.mainCamera=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,e,t,n,r){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(s,i)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height)}},m2=class extends Xn{constructor({normalBuffer:s=null,resolutionScale:e=.5,width:t=$t.AUTO_SIZE,height:n=$t.AUTO_SIZE,resolutionX:r=t,resolutionY:i=n}={}){super("DepthDownsamplingPass");const o=new Zx;o.normalBuffer=s,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ar(1,1,{minFilter:za,magFilter:za,depthBuffer:!1,type:mS}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new $t(this,r,i,e);u.addEventListener("change",c=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(s,e=el){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=e}render(s,e,t,n,r){s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(s,e)}initialize(s,e,t){const n=s.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function dv(s,e,t){for(const n of e){const r="$1"+s+n.charAt(0).toUpperCase()+n.slice(1),i=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(i,r))}}function g2(s,e,t){let n=e.getFragmentShader(),r=e.getVertexShader();const i=n!==void 0&&/mainImage/.test(n),o=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&ri.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!i&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const u=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let h=c.get(st.FRAGMENT_HEAD)||"",f=c.get(st.FRAGMENT_MAIN_UV)||"",d=c.get(st.FRAGMENT_MAIN_IMAGE)||"",m=c.get(st.VERTEX_HEAD)||"",_=c.get(st.VERTEX_MAIN_SUPPORT)||"";const y=new Set,v=new Set;if(o&&(f+=`	${s}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);_+=`	${s}MainSupport(`,_+=w?`vUv);
`:`);
`;for(const O of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const C of O[1].split(/\s*,\s*/))t.varyings.add(C),y.add(C),v.add(C);for(const O of r.matchAll(u))v.add(O[1])}for(const w of n.matchAll(u))v.add(w[1]);for(const w of e.defines.keys())v.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of e.uniforms.keys())v.add(w);v.delete("while"),v.delete("for"),v.delete("if"),e.uniforms.forEach((w,O)=>t.uniforms.set(s+O.charAt(0).toUpperCase()+O.slice(1),w)),e.defines.forEach((w,O)=>t.defines.set(s+O.charAt(0).toUpperCase()+O.slice(1),w));const T=new Map([["fragment",n],["vertex",r]]);dv(s,v,t.defines),dv(s,v,T),n=T.get("fragment"),r=T.get("vertex");const x=e.blendMode;if(t.blendModes.set(x.blendFunction,x),i){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===gn?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==iy?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${s}MainImage(color0, UV, `,t.attributes&ri.DEPTH&&w.test(n)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const O=s+"BlendOpacity";t.uniforms.set(O,x.opacity),d+=`color0 = blend${x.blendFunction}(color0, color1, ${O});

	`,h+=`uniform float ${O};

`}if(h+=n+`
`,r!==null&&(m+=r+`
`),c.set(st.FRAGMENT_HEAD,h),c.set(st.FRAGMENT_MAIN_UV,f),c.set(st.FRAGMENT_MAIN_IMAGE,d),c.set(st.VERTEX_HEAD,m),c.set(st.VERTEX_MAIN_SUPPORT,_),e.extensions!==null)for(const w of e.extensions)t.extensions.add(w)}}var _2=class extends Xn{constructor(s,...e){super("EffectPass"),this.fullscreenMaterial=new t2(null,null,null,s),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(s){for(const e of this.effects)e.mainScene=s}set mainCamera(s){this.fullscreenMaterial.copyCameraSettings(s);for(const e of this.effects)e.mainCamera=s}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(s){this.fullscreenMaterial.encodeOutput=s}get dithering(){return this.fullscreenMaterial.dithering}set dithering(s){const e=this.fullscreenMaterial;e.dithering=s,e.needsUpdate=!0}setEffects(s){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=s.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const s=new b2;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Ze.DST)s.attributes|=o.getAttributes()&ri.DEPTH;else{if(s.attributes&o.getAttributes()&ri.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);g2("e"+e++,o,s)}let t=s.shaderParts.get(st.FRAGMENT_HEAD),n=s.shaderParts.get(st.FRAGMENT_MAIN_IMAGE),r=s.shaderParts.get(st.FRAGMENT_MAIN_UV);const i=/\bblend\b/g;for(const o of s.blendModes.values())t+=o.getShaderCode().replace(i,`blend${o.blendFunction}`)+`
`;s.attributes&ri.DEPTH?(s.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,s.colorSpace===gn&&(n+=`color0 = sRGBToLinear(color0);
	`),s.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,s.defines.set("UV","transformedUv")):s.defines.set("UV","vUv"),s.shaderParts.set(st.FRAGMENT_HEAD,t),s.shaderParts.set(st.FRAGMENT_MAIN_IMAGE,n),s.shaderParts.set(st.FRAGMENT_MAIN_UV,r);for(const[o,u]of s.shaderParts)u!==null&&s.shaderParts.set(o,u.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(s)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(s,e=el){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(s,e)}render(s,e,t,n,r){for(const i of this.effects)i.update(s,e,n);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=e.texture,i.time+=n*this.timeScale,s.setRenderTarget(this.renderToScreen?null:t),s.render(this.scene,this.camera)}}setSize(s,e){this.fullscreenMaterial.setSize(s,e);for(const t of this.effects)t.setSize(s,e)}initialize(s,e,t){this.renderer=s;for(const n of this.effects)n.initialize(s,e,t);this.updateMaterial(),t!==void 0&&t!==Ps&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const s of this.effects)s.removeEventListener("change",this.listener),s.dispose()}handleEvent(s){switch(s.type){case"change":this.recompile();break}}},cy=class extends Xn{constructor({kernelSize:s=rf.MEDIUM,resolutionScale:e=.5,width:t=$t.AUTO_SIZE,height:n=$t.AUTO_SIZE,resolutionX:r=t,resolutionY:i=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ar(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new $t(this,r,i,e);o.addEventListener("change",u=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Gx,this._blurMaterial.kernelSize=s,this.copyMaterial=new ly}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(s){this._blurMaterial=s}get dithering(){return this.copyMaterial.dithering}set dithering(s){this.copyMaterial.dithering=s}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(s){this.blurMaterial.kernelSize=s}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get scale(){return this.blurMaterial.scale}set scale(s){this.blurMaterial.scale=s}getScale(){return this.blurMaterial.scale}setScale(s){this.blurMaterial.scale=s}getKernelSize(){return this.kernelSize}setKernelSize(s){this.kernelSize=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,e,t,n,r){const i=this.scene,o=this.camera,u=this.renderTargetA,c=this.renderTargetB,h=this.blurMaterial,f=h.kernelSequence;let d=e;this.fullscreenMaterial=h;for(let m=0,_=f.length;m<_;++m){const y=m&1?c:u;h.kernel=f[m],h.inputBuffer=d.texture,s.setRenderTarget(y),s.render(i,o),d=y}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,s.setRenderTarget(this.renderToScreen?null:t),s.render(i,o)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e);const n=t.width,r=t.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(s,e)}initialize(s,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Ps?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):Va(s)===gn&&(Ui(this.renderTargetA.texture,gn),Ui(this.renderTargetB.texture,gn)))}static get AUTO_SIZE(){return $t.AUTO_SIZE}},v2=class extends Xn{constructor({renderTarget:s,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:r=$t.AUTO_SIZE,height:i=$t.AUTO_SIZE,resolutionX:o=r,resolutionY:u=i}={}){super("LuminancePass"),this.fullscreenMaterial=new r2(t,e),this.needsSwap=!1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new $t(this,o,u,n);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(s,e,t,n,r){const i=this.fullscreenMaterial;i.inputBuffer=e.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height)}initialize(s,e,t){t!==void 0&&t!==Ps&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},y2=class extends Xn{constructor(s,e){super("MaskPass",s,e),this.needsSwap=!1,this.clearPass=new em(!1,!1,!0),this.inverse=!1}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get inverted(){return this.inverse}set inverted(s){this.inverse=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(s){this.inverted=s}render(s,e,t,n,r){const i=s.getContext(),o=s.state.buffers,u=this.scene,c=this.camera,h=this.clearPass,f=this.inverted?0:1,d=1-f;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.stencil.setFunc(i.ALWAYS,f,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(s,null):(h.render(s,e),h.render(s,t))),this.renderToScreen?(s.setRenderTarget(null),s.render(u,c)):(s.setRenderTarget(e),s.render(u,c),s.setRenderTarget(t),s.render(u,c)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(i.EQUAL,1,4294967295),o.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.stencil.setLocked(!0)}},T2=class extends Xn{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Jx,this.upsamplingMaterial=new u2,this.resolution=new pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(s){if(this.levels!==s){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<s;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=s-1;t<n;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(s){this.upsamplingMaterial.radius=s}render(s,e,t,n,r){const{scene:i,camera:o}=this,{downsamplingMaterial:u,upsamplingMaterial:c}=this,{downsamplingMipmaps:h,upsamplingMipmaps:f}=this;let d=e;this.fullscreenMaterial=u;for(let m=0,_=h.length;m<_;++m){const y=h[m];u.setSize(d.width,d.height),u.inputBuffer=d.texture,s.setRenderTarget(y),s.render(i,o),d=y}this.fullscreenMaterial=c;for(let m=f.length-1;m>=0;--m){const _=f[m];c.setSize(d.width,d.height),c.inputBuffer=d.texture,c.supportBuffer=h[m].texture,s.setRenderTarget(_),s.render(i,o),d=_}}setSize(s,e){const t=this.resolution;t.set(s,e);let n=t.width,r=t.height;for(let i=0,o=this.downsamplingMipmaps.length;i<o;++i)n=Math.round(n*.5),r=Math.round(r*.5),this.downsamplingMipmaps[i].setSize(n,r),i<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[i].setSize(n,r)}initialize(s,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of n)r.texture.type=t;if(t!==Ps)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(Va(s)===gn)for(const r of n)Ui(r.texture,gn)}}dispose(){super.dispose();for(const s of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))s.dispose()}},S2=class extends Xn{constructor(s,e,{renderTarget:t,resolutionScale:n=1,width:r=$t.AUTO_SIZE,height:i=$t.AUTO_SIZE,resolutionX:o=r,resolutionY:u=i}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new sf(s,e,new gS);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const h=c.getClearPass();h.overrideClearColor=new Cr(7829503),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ar(1,1,{minFilter:za,magFilter:za}),this.renderTarget.texture.name="NormalPass.Target");const f=this.resolution=new $t(this,o,u,n);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(s){this.renderPass.mainScene=s}set mainCamera(s){this.renderPass.mainCamera=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,e,t,n,r){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(s,i,i)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height)}},w2=class extends Xn{constructor(s,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=s,this.input=e}setInput(s){this.input=s}render(s,e,t,n,r){const i=this.fullscreenMaterial.uniforms;e!==null&&i!==void 0&&i[this.input]!==void 0&&(i[this.input].value=e.texture),s.setRenderTarget(this.renderToScreen?null:t),s.render(this.scene,this.camera)}initialize(s,e,t){t!==void 0&&t!==Ps&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Gd=1/1e3,x2=1e3,E2=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(s){typeof document<"u"&&document.hidden!==void 0&&(s?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=s)}get delta(){return this._delta*Gd}get fixedDelta(){return this._fixedDelta*Gd}set fixedDelta(s){this._fixedDelta=s*x2}get elapsed(){return this._elapsed*Gd}update(s){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(s!==void 0?s:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(s){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},C2=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new f2,this.depthTexture=null,this.passes=[],this.timer=new E2,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new pt),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Ps&&Va(e)===gn&&(Ui(this.inputBuffer.texture,gn),Ui(this.outputBuffer.texture,gn),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,n,r)}}replaceRenderer(e,t=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new _S;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=vS,e.type=yS):e.type=TS,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const i=this.renderer,o=i===null?new pt:i.getDrawingBufferSize(new pt),u={minFilter:Fa,magFilter:Fa,stencilBuffer:t,depthBuffer:e,type:n},c=new Ar(o.width,o.height,u);return r>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=r),n===Ps&&Va(i)===gn&&Ui(c.texture,gn),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new pt),o=r.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,o,u),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(e of n)e.setDepthTexture(c)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(n!==-1&&t.splice(n,1).length>0){if(this.depthTexture!==null){const o=(c,h)=>c||h.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,u,c,h;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const f of this.passes)f.enabled&&(f.render(t,r,i,e,o),f.needsSwap&&(o&&(n.renderToScreen=f.renderToScreen,u=t.getContext(),c=t.state.buffers.stencil,c.setFunc(u.NOTEQUAL,1,4294967295),n.render(t,r,i,e,o),c.setFunc(u.EQUAL,1,4294967295)),h=r,r=i,i=h),f instanceof y2?o=!0:f instanceof d2&&(o=!1))}setSize(e,t,n){const r=this.renderer,i=r.getSize(new pt);(e===void 0||t===void 0)&&(e=i.width,t=i.height),(i.width!==e||i.height!==t)&&r.setSize(e,t,n);const o=r.getDrawingBufferSize(new pt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const u of this.passes)u.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},b2=class{constructor(){this.shaderParts=new Map([[st.FRAGMENT_HEAD,null],[st.FRAGMENT_MAIN_UV,null],[st.FRAGMENT_MAIN_IMAGE,null],[st.VERTEX_HEAD,null],[st.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ri.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=nf}},Wd=!1,pv=class{constructor(s=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(s),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case So:t=this.materialsFlatShadedDoubleSide;break;case Jl:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case So:t=this.materialsDoubleSide;break;case Jl:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(s){if(!(s instanceof us))return s.clone();const e=s.uniforms,t=new Map;for(const r in e){const i=e[r].value;i.isRenderTargetTexture&&(e[r].value=null,t.set(r,i))}const n=s.clone();for(const r of t)e[r[0]].value=r[1],n.uniforms[r[0]].value=r[1];return n}setMaterial(s){if(this.disposeMaterials(),this.material=s,s!==null){const e=this.materials=[this.cloneMaterial(s),this.cloneMaterial(s),this.cloneMaterial(s)];for(const t of e)t.uniforms=Object.assign({},s.uniforms),t.side=u0;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},s.uniforms),n.side=Jl,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},s.uniforms),n.side=So,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n.side=Jl,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n.side=So,n})}}render(s,e,t){const n=s.shadowMap.enabled;if(s.shadowMap.enabled=!1,Wd){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),s.render(e,t);for(const i of r)i[0].material=i[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,s.render(e,t),e.overrideMaterial=r}s.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const s=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of s)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Wd}static set workaroundEnabled(s){Wd=s}},ki=-1,$t=class extends Yp{constructor(s,e=ki,t=ki,n=1){super(),this.resizable=s,this.baseSize=new pt(1,1),this.preferredSize=new pt(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const s=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==ki?t.width=e.width:e.height!==ki?t.width=Math.round(e.height*(s.width/Math.max(s.height,1))):t.width=Math.round(s.width*n),e.height!==ki?t.height=e.height:e.width!==ki?t.height=Math.round(e.width/Math.max(s.width/Math.max(s.height,1),1)):t.height=Math.round(s.height*n)}get width(){return this.effectiveSize.width}set width(s){this.preferredWidth=s}get height(){return this.effectiveSize.height}set height(s){this.preferredHeight=s}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(s){this.s!==s&&(this.s=s,this.preferredSize.setScalar(ki),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(s){this.scale=s}get baseWidth(){return this.baseSize.width}set baseWidth(s){this.baseSize.width!==s&&(this.baseSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(s){this.baseWidth=s}get baseHeight(){return this.baseSize.height}set baseHeight(s){this.baseSize.height!==s&&(this.baseSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(s){this.baseHeight=s}setBaseSize(s,e){(this.baseSize.width!==s||this.baseSize.height!==e)&&(this.baseSize.set(s,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(s){this.preferredSize.width!==s&&(this.preferredSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(s){this.preferredWidth=s}get preferredHeight(){return this.preferredSize.height}set preferredHeight(s){this.preferredSize.height!==s&&(this.preferredSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(s){this.preferredHeight=s}setPreferredSize(s,e){(this.preferredSize.width!==s||this.preferredSize.height!==e)&&(this.preferredSize.set(s,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(s){this.s=s.scale,this.baseSize.set(s.baseWidth,s.baseHeight),this.preferredSize.set(s.preferredWidth,s.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ki}},O2=class extends Set{constructor(s,e=10){super(),this.l=e,this.exclusive=!1,s!==void 0&&this.set(s)}get layer(){return this.l}set layer(s){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(s);this.l=s}getLayer(){return this.layer}setLayer(s){this.layer=s}isExclusive(){return this.exclusive}setExclusive(s){this.exclusive=s}clear(){const s=this.layer;for(const e of this)e.layers.disable(s);return super.clear()}set(s){this.clear();for(const e of s)this.add(e);return this}indexOf(s){return this.has(s)?0:-1}add(s){return this.exclusive?s.layers.set(this.layer):s.layers.enable(this.layer),super.add(s)}delete(s){return this.has(s)&&s.layers.disable(this.layer),super.delete(s)}toggle(s){let e;return this.has(s)?(this.delete(s),e=!1):(this.add(s),e=!0),e}setVisible(s){for(const e of this)s?e.layers.enable(0):e.layers.disable(0);return this}},k2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",A2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",M2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",D2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",P2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",R2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",I2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",U2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",N2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",F2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",L2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",z2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",B2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",V2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",G2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",W2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",H2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",j2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",q2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Y2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",X2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Z2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Q2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",K2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",J2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",$2="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",eE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",tE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",nE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",rE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",sE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",iE="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",oE=new Map([[Ze.ADD,k2],[Ze.ALPHA,A2],[Ze.AVERAGE,M2],[Ze.COLOR,D2],[Ze.COLOR_BURN,P2],[Ze.COLOR_DODGE,R2],[Ze.DARKEN,I2],[Ze.DIFFERENCE,U2],[Ze.DIVIDE,N2],[Ze.DST,null],[Ze.EXCLUSION,F2],[Ze.HARD_LIGHT,L2],[Ze.HARD_MIX,z2],[Ze.HUE,B2],[Ze.INVERT,V2],[Ze.INVERT_RGB,G2],[Ze.LIGHTEN,W2],[Ze.LINEAR_BURN,H2],[Ze.LINEAR_DODGE,j2],[Ze.LINEAR_LIGHT,q2],[Ze.LUMINOSITY,Y2],[Ze.MULTIPLY,X2],[Ze.NEGATION,Z2],[Ze.NORMAL,Q2],[Ze.OVERLAY,K2],[Ze.PIN_LIGHT,J2],[Ze.REFLECT,$2],[Ze.SATURATION,eE],[Ze.SCREEN,tE],[Ze.SOFT_LIGHT,nE],[Ze.SRC,rE],[Ze.SUBTRACT,sE],[Ze.VIVID_LIGHT,iE]]),aE=class extends Yp{constructor(s,e=1){super(),this._blendFunction=s,this.opacity=new Ne(e)}getOpacity(){return this.opacity.value}setOpacity(s){this.opacity.value=s}get blendFunction(){return this._blendFunction}set blendFunction(s){this._blendFunction=s,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(s){this.blendFunction=s}getShaderCode(){return oE.get(this.blendFunction)}},au=class extends Yp{constructor(e,t,{attributes:n=ri.NONE,blendFunction:r=Ze.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:u=null,vertexShader:c=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=c,this.defines=i,this.uniforms=o,this.extensions=u,this.blendMode=new aE(r),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=nf,this._outputColorSpace=iy}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=el){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ar||t instanceof Wp||t instanceof Xh||t instanceof Xn)&&this[e].dispose()}}},lE=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,uE=class extends au{constructor({blendFunction:s=Ze.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:r=1,radius:i=.85,levels:o=8,kernelSize:u=rf.LARGE,resolutionScale:c=.5,width:h=$t.AUTO_SIZE,height:f=$t.AUTO_SIZE,resolutionX:d=h,resolutionY:m=f}={}){super("BloomEffect",lE,{blendFunction:s,uniforms:new Map([["map",new Ne(null)],["intensity",new Ne(r)]])}),this.renderTarget=new Ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new cy({kernelSize:u}),this.luminancePass=new v2({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new T2,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=i,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const _=this.resolution=new $t(this,d,m,c);_.addEventListener("change",y=>this.setSize(_.baseWidth,_.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get dithering(){return this.blurPass.dithering}set dithering(s){this.blurPass.dithering=s}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(s){this.blurPass.kernelSize=s}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(s){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(s){this.uniforms.get("intensity").value=s}getIntensity(){return this.intensity}setIntensity(s){this.intensity=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}update(s,e,t){const n=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(s,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,r.renderTarget):this.blurPass.render(s,r.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,e):this.blurPass.render(s,e,n)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(s,e),this.mipmapBlurPass.setSize(s,e)}initialize(s,e,t){this.blurPass.initialize(s,e,t),this.luminancePass.initialize(s,e,t),this.mipmapBlurPass.initialize(s,e,t),t!==void 0&&(this.renderTarget.texture.type=t,Va(s)===gn&&Ui(this.renderTarget.texture,gn))}},cE=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,hE="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",fE=class extends au{constructor(s,e,{blendFunction:t=Ze.SCREEN,patternTexture:n=null,patternScale:r=1,edgeStrength:i=1,pulseSpeed:o=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:c=2230538,kernelSize:h=rf.VERY_SMALL,blur:f=!1,xRay:d=!0,multisampling:m=0,resolutionScale:_=.5,width:y=$t.AUTO_SIZE,height:v=$t.AUTO_SIZE,resolutionX:T=y,resolutionY:x=v}={}){super("OutlineEffect",cE,{uniforms:new Map([["maskTexture",new Ne(null)],["edgeTexture",new Ne(null)],["edgeStrength",new Ne(i)],["visibleEdgeColor",new Ne(new Cr(u))],["hiddenEdgeColor",new Ne(new Cr(c))],["pulse",new Ne(1)],["patternScale",new Ne(r)],["patternTexture",new Ne(null)]])}),this.blendMode.addEventListener("change",E=>{this.blendMode.blendFunction===Ze.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=n,this.xRay=d,this.scene=s,this.camera=e,this.renderTargetMask=new Ar(1,1),this.renderTargetMask.samples=m,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Ar(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new em,this.clearPass.overrideClearColor=new Cr(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new p2(s,e),this.maskPass=new sf(s,e,new qx(this.depthPass.texture,e));const w=this.maskPass.clearPass;w.overrideClearColor=new Cr(16777215),w.overrideClearAlpha=1,this.blurPass=new cy({resolutionScale:_,resolutionX:T,resolutionY:x,kernelSize:h}),this.blurPass.enabled=f;const O=this.blurPass.resolution;O.addEventListener("change",E=>this.setSize(O.baseWidth,O.baseHeight)),this.outlinePass=new w2(new o2);const C=this.outlinePass.fullscreenMaterial;C.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new O2,this.selection.layer=10,this.pulseSpeed=o}set mainScene(s){this.scene=s,this.depthPass.mainScene=s,this.maskPass.mainScene=s}set mainCamera(s){this.camera=s,this.depthPass.mainCamera=s,this.maskPass.mainCamera=s,this.maskPass.overrideMaterial.copyCameraSettings(s)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(s){this.renderTargetMask.samples=s,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(s){this.uniforms.get("patternScale").value=s}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(s){this.uniforms.get("edgeStrength").value=s}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(s){this.uniforms.get("visibleEdgeColor").value=s}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(s){this.uniforms.get("hiddenEdgeColor").value=s}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(s){this.pulseSpeed=s}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get selectionLayer(){return this.selection.layer}set selectionLayer(s){this.selection.layer=s}get dithering(){return this.blurPass.dithering}set dithering(s){this.blurPass.dithering=s}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(s){this.blurPass.kernelSize=s}get blur(){return this.blurPass.enabled}set blur(s){this.blurPass.enabled=s}get xRay(){return this.defines.has("X_RAY")}set xRay(s){this.xRay!==s&&(s?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(s){this.xRay=s}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(s){s!==null?(s.wrapS=s.wrapT=SS,this.defines.set("USE_PATTERN","1"),this.setVertexShader(hE)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=s,this.setChanged()}setPatternTexture(s){this.patternTexture=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}setSelection(s){return this.selection.set(s),this}clearSelection(){return this.selection.clear(),this}selectObject(s){return this.selection.add(s),this}deselectObject(s){return this.selection.delete(s),this}update(s,e,t){const n=this.scene,r=this.camera,i=this.selection,u=this.uniforms.get("pulse"),c=n.background,h=r.layers.mask;(this.forceUpdate||i.size>0)&&(n.background=null,u.value=1,this.pulseSpeed>0&&(u.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,i.setVisible(!1),this.depthPass.render(s),i.setVisible(!0),r.layers.set(i.layer),this.maskPass.render(s,this.renderTargetMask),r.layers.mask=h,n.background=c,this.outlinePass.render(s,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(s,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=i.size>0}setSize(s,e){this.blurPass.setSize(s,e),this.renderTargetMask.setSize(s,e);const t=this.resolution;t.setBaseSize(s,e);const n=t.width,r=t.height;this.depthPass.setSize(n,r),this.renderTargetOutline.setSize(n,r),this.outlinePass.fullscreenMaterial.setSize(n,r)}initialize(s,e,t){this.blurPass.initialize(s,e,Ps),t!==void 0&&(this.depthPass.initialize(s,e,t),this.maskPass.initialize(s,e,t),this.outlinePass.initialize(s,e,t))}},dE=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,pE=class extends au{constructor({blendFunction:s,technique:e=sh.DEFAULT,eskil:t=!1,offset:n=.5,darkness:r=.5}={}){super("VignetteEffect",dE,{blendFunction:s,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Ne(n)],["darkness",new Ne(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(s){this.technique!==s&&(this.defines.set("VIGNETTE_TECHNIQUE",s.toFixed(0)),this.setChanged())}get eskil(){return this.technique===sh.ESKIL}set eskil(s){this.technique=s?sh.ESKIL:sh.DEFAULT}getTechnique(){return this.technique}setTechnique(s){this.technique=s}get offset(){return this.uniforms.get("offset").value}set offset(s){this.uniforms.get("offset").value=s}getOffset(){return this.offset}setOffset(s){this.offset=s}get darkness(){return this.uniforms.get("darkness").value}set darkness(s){this.uniforms.get("darkness").value=s}getDarkness(){return this.darkness}setDarkness(s){this.darkness=s}};const hy=V.createContext(null),mv=s=>(s.getAttributes()&ri.CONVOLUTION)===ri.CONVOLUTION,JD=sp.memo(V.forwardRef(({children:s,camera:e,scene:t,resolutionScale:n,enabled:r=!0,renderPriority:i=1,autoClear:o=!0,depthBuffer:u,disableNormalPass:c,stencilBuffer:h,multisampling:f=8,frameBufferType:d=wS},m)=>{const{gl:_,scene:y,camera:v,size:T}=wt(),x=t||y,w=e||v,[O,C,E]=V.useMemo(()=>{const D=Mw(),U=new C2(_,{depthBuffer:u,stencilBuffer:h,multisampling:f>0&&D?f:0,frameBufferType:d});U.addPass(new sf(x,w));let R=null,P=null;return c||(P=new S2(x,w),P.enabled=!1,U.addPass(P),n!==void 0&&D&&(R=new m2({normalBuffer:P.texture,resolutionScale:n}),R.enabled=!1,U.addPass(R))),[U,P,R]},[w,_,u,h,f,d,x,c,n]);V.useEffect(()=>O==null?void 0:O.setSize(T.width,T.height),[O,T]),Jh((D,U)=>{if(r){const R=_.autoClear;_.autoClear=o,h&&!o&&_.clearStencil(),O.render(U),_.autoClear=R}},r?i:0);const k=V.useRef(null),A=YS(k);V.useLayoutEffect(()=>{const D=[];if(k.current&&A.current&&O){const U=A.current.objects;for(let R=0;R<U.length;R++){const P=U[R];if(P instanceof au){const F=[P];if(!mv(P)){let q=null;for(;(q=U[R+1])instanceof au&&!mv(q);)F.push(q),R++}const B=new _2(w,...F);D.push(B)}else P instanceof Xn&&D.push(P)}for(const R of D)O==null||O.addPass(R);C&&(C.enabled=!0),E&&(E.enabled=!0)}return()=>{for(const U of D)O==null||O.removePass(U);C&&(C.enabled=!1),E&&(E.enabled=!1)}},[O,s,w,C,E,A]);const M=V.useMemo(()=>({composer:O,normalPass:C,downSamplingPass:E,resolutionScale:n,camera:w,scene:x}),[O,C,E,n,w,x]);return V.useImperativeHandle(m,()=>O,[O]),La.jsx(hy.Provider,{value:M,children:La.jsx("group",{ref:k,children:s})})})),gv=s=>typeof s=="object"&&s!=null&&"current"in s?s.current:s;let mE=0;const _v=new WeakMap,fy=(s,e)=>sp.forwardRef(function({blendFunction:n=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...i},o){let u=_v.get(s);if(!u){const f=`@react-three/postprocessing/${s.name}-${mE++}`;Kh({[f]:s}),_v.set(s,u=f)}const c=wt(f=>f.camera),h=sp.useMemo(()=>{var f,d;return[...(f=e==null?void 0:e.args)!=null?f:[],...(d=i.args)!=null?d:[{...e,...i}]]},[JSON.stringify(i)]);return La.jsx(u,{camera:c,"blendMode-blendFunction":n,"blendMode-opacity-value":r,...i,ref:o,args:h})}),$D=fy(uE,{blendFunction:Ze.ADD}),eP=V.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:n,patternTexture:r,edgeStrength:i,pulseSpeed:o,visibleEdgeColor:u,hiddenEdgeColor:c,width:h,height:f,kernelSize:d,blur:m,xRay:_,...y},v){const T=wt(E=>E.invalidate),{scene:x,camera:w}=V.useContext(hy),O=V.useMemo(()=>new fE(x,w,{blendFunction:n,patternTexture:r,edgeStrength:i,pulseSpeed:o,visibleEdgeColor:u,hiddenEdgeColor:c,width:h,height:f,kernelSize:d,blur:m,xRay:_,...y}),[n,m,w,i,f,c,d,r,o,x,u,h,_]),C=V.useContext($p);return V.useEffect(()=>{if(!C&&e)return O.selection.set(Array.isArray(e)?e.map(gv):[gv(e)]),T(),()=>{O.selection.clear(),T()}},[O,e,C,T]),V.useEffect(()=>{O.selectionLayer=t,T()},[O,T,t]),V.useRef(),V.useEffect(()=>{var E;if(C&&C.enabled&&(E=C.selected)!=null&&E.length)return O.selection.set(C.selected),T(),()=>{O.selection.clear(),T()}},[C,O.selection,T]),V.useEffect(()=>()=>{O.dispose()},[O]),La.jsx("primitive",{ref:v,object:O})}),tP=fy(pE),nP=5e3,gE={show:"#FF723C",clip:"#FFFF00",episode:"#FF7F50",guest:"#E066FF",topic:"#F8F8FF",Topic:"#F8F8FF",Organization:"#FF7F50"},rP=(s,e)=>{const t=gE[s]||"#F8F8FF";return e?t:parseInt(t.replace("#","0x"),16)},_E={isUserDragging:!1,isUserScrolling:!1,userMovedCamera:!1,isUserScrollingOnHtmlPanel:!1},sP=xS(s=>({..._E,setIsUserDragging:e=>s({isUserDragging:e}),setIsUserScrolling:e=>s({isUserScrolling:e}),setUserMovedCamera:e=>s({userMovedCamera:e}),setIsUserScrollingOnHtmlPanel:e=>s({isUserScrollingOnHtmlPanel:e})}));function ei(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function dy(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Or={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ga={duration:.5,overwrite:!1,delay:0},tm,Pn,Gt,Wr=1e8,yt=1/Wr,gp=Math.PI*2,vE=gp/4,yE=0,py=Math.sqrt,TE=Math.cos,SE=Math.sin,vn=function(e){return typeof e=="string"},Ht=function(e){return typeof e=="function"},oi=function(e){return typeof e=="number"},nm=function(e){return typeof e>"u"},Rs=function(e){return typeof e=="object"},rr=function(e){return e!==!1},rm=function(){return typeof window<"u"},ih=function(e){return Ht(e)||vn(e)},my=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Rn=Array.isArray,_p=/(?:-?\.?\d|\.)+/gi,gy=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Oa=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Hd=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_y=/[+-]=-?[.\d]+/,vy=/[^,'"\[\]\s]+/gi,wE=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt,Gr,vp,sm,Mr={},Th={},yy,Ty=function(e){return(Th=Ro(e,Mr))&&lr},im=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lu=function(e,t){return!t&&console.warn(e)},Sy=function(e,t){return e&&(Mr[e]=t)&&Th&&(Th[e]=t)||Mr},uu=function(){return 0},xE={suppressEvents:!0,isStart:!0,kill:!1},fh={suppressEvents:!0,kill:!1},EE={suppressEvents:!0},om={},Ni=[],yp={},wy,xr={},jd={},vv=30,dh=[],am="",lm=function(e){var t=e[0],n,r;if(Rs(t)||Ht(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=dh.length;r--&&!dh[r].targetTest(t););n=dh[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new qy(e[r],n)))||e.splice(r,1);return e},Oo=function(e){return e._gsap||lm(Hr(e))[0]._gsap},xy=function(e,t,n){return(n=e[t])&&Ht(n)?e[t]():nm(n)&&e.getAttribute&&e.getAttribute(t)||n},sr=function(e,t){return(e=e.split(",")).forEach(t)||e},Qt=function(e){return Math.round(e*1e5)/1e5||0},mn=function(e){return Math.round(e*1e7)/1e7||0},Pa=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},CE=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Sh=function(){var e=Ni.length,t=Ni.slice(0),n,r;for(yp={},Ni.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Ey=function(e,t,n,r){Ni.length&&!Pn&&Sh(),e.render(t,n,r||Pn&&t<0&&(e._initted||e._startAt)),Ni.length&&!Pn&&Sh()},Cy=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(vy).length<2?t:vn(e)?e.trim():e},by=function(e){return e},Yr=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},bE=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Ro=function(e,t){for(var n in t)e[n]=t[n];return e},yv=function s(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Rs(t[n])?s(e[n]||(e[n]={}),t[n]):t[n]);return e},wh=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},ru=function(e){var t=e.parent||Nt,n=e.keyframes?bE(Rn(e.keyframes)):Yr;if(rr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},OE=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},Oy=function(e,t,n,r,i){n===void 0&&(n="_first"),r===void 0&&(r="_last");var o=e[r],u;if(i)for(u=t[i];o&&o[i]>u;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},of=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Bi=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ko=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},kE=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Tp=function(e,t,n,r){return e._startAt&&(Pn?e._startAt.revert(fh):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},AE=function s(e){return!e||e._ts&&s(e.parent)},Tv=function(e){return e._repeat?Wa(e._tTime,e=e.duration()+e._rDelay)*e:0},Wa=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},xh=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},af=function(e){return e._end=mn(e._start+(e._tDur/Math.abs(e._ts||e._rts||yt)||0))},lf=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=mn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),af(e),n._dirty||ko(n,e)),e},ky=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=xh(e.rawTime(),t),(!t._dur||zu(0,t.totalDuration(),n)-t._tTime>yt)&&t.render(n,!0)),ko(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-yt}},As=function(e,t,n,r){return t.parent&&Bi(t),t._start=mn((oi(n)?n:n||e!==Nt?Vr(e,n,t):e._time)+t._delay),t._end=mn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Oy(e,t,"_first","_last",e._sort?"_start":0),Sp(t)||(e._recent=t),r||ky(e,t),e._ts<0&&lf(e,e._tTime),e},Ay=function(e,t){return(Mr.ScrollTrigger||im("scrollTrigger",t))&&Mr.ScrollTrigger.create(t,e)},My=function(e,t,n,r,i){if(cm(e,t,i),!e._initted)return 1;if(!n&&e._pt&&!Pn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&wy!==Er.frame)return Ni.push(e),e._lazy=[i,r],1},ME=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},Sp=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},DE=function(e,t,n,r){var i=e.ratio,o=t<0||!t&&(!e._start&&ME(e)&&!(!e._initted&&Sp(e))||(e._ts<0||e._dp._ts<0)&&!Sp(e))?0:1,u=e._rDelay,c=0,h,f,d;if(u&&e._repeat&&(c=zu(0,e._tDur,t),f=Wa(c,u),e._yoyo&&f&1&&(o=1-o),f!==Wa(e._tTime,u)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||Pn||r||e._zTime===yt||!t&&e._zTime){if(!e._initted&&My(e,t,r,n,c))return;for(d=e._zTime,e._zTime=t||(n?yt:0),n||(n=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,h=e._pt;h;)h.r(o,h.d),h=h._next;t<0&&Tp(e,t,n,!0),e._onUpdate&&!n&&br(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&br(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Bi(e,1),!n&&!Pn&&(br(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},PE=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Ha=function(e,t,n,r){var i=e._repeat,o=mn(t)||0,u=e._tTime/e._tDur;return u&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:mn(o*(i+1)+e._rDelay*i):o,u>0&&!r&&lf(e,e._tTime=e._tDur*u),e.parent&&af(e),n||ko(e.parent,e),e},Sv=function(e){return e instanceof qn?ko(e):Ha(e,e._dur)},RE={_start:0,endTime:uu,totalDuration:uu},Vr=function s(e,t,n){var r=e.labels,i=e._recent||RE,o=e.duration()>=Wr?i.endTime(!1):e._dur,u,c,h;return vn(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),h=t.substr(-1)==="%",u=t.indexOf("="),c==="<"||c===">"?(u>=0&&(t=t.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(u<0?i:n).totalDuration()/100:1)):u<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(u-1)+t.substr(u+1)),h&&n&&(c=c/100*(Rn(n)?n[0]:n).totalDuration()),u>1?s(e,t.substr(0,u-1),n)+c:o+c)):t==null?o:+t},su=function(e,t,n){var r=oi(t[1]),i=(r?2:1)+(e<2?0:1),o=t[i],u,c;if(r&&(o.duration=t[1]),o.parent=n,e){for(u=o,c=n;c&&!("immediateRender"in u);)u=c.vars.defaults||{},c=rr(c.vars.inherit)&&c.parent;o.immediateRender=rr(u.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new sn(t[0],o,t[i+1])},Yi=function(e,t){return e||e===0?t(e):t},zu=function(e,t,n){return n<e?e:n>t?t:n},Dn=function(e,t){return!vn(e)||!(t=wE.exec(e))?"":t[1]},IE=function(e,t,n){return Yi(n,function(r){return zu(e,t,r)})},wp=[].slice,Dy=function(e,t){return e&&Rs(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Rs(e[0]))&&!e.nodeType&&e!==Gr},UE=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var i;return vn(r)&&!t||Dy(r,1)?(i=n).push.apply(i,Hr(r)):n.push(r)})||n},Hr=function(e,t,n){return Gt&&!t&&Gt.selector?Gt.selector(e):vn(e)&&!n&&(vp||!ja())?wp.call((t||sm).querySelectorAll(e),0):Rn(e)?UE(e,n):Dy(e)?wp.call(e,0):e?[e]:[]},xp=function(e){return e=Hr(e)[0]||lu("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Hr(t,n.querySelectorAll?n:n===e?lu("Invalid scope")||sm.createElement("div"):e)}},Py=function(e){return e.sort(function(){return .5-Math.random()})},Ry=function(e){if(Ht(e))return e;var t=Rs(e)?e:{each:e},n=Ao(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},u=r>0&&r<1,c=isNaN(r)||u,h=t.axis,f=r,d=r;return vn(r)?f=d={center:.5,edges:.5,end:1}[r]||0:!u&&c&&(f=r[0],d=r[1]),function(m,_,y){var v=(y||t).length,T=o[v],x,w,O,C,E,k,A,M,D;if(!T){if(D=t.grid==="auto"?0:(t.grid||[1,Wr])[1],!D){for(A=-Wr;A<(A=y[D++].getBoundingClientRect().left)&&D<v;);D<v&&D--}for(T=o[v]=[],x=c?Math.min(D,v)*f-.5:r%D,w=D===Wr?0:c?v*d/D-.5:r/D|0,A=0,M=Wr,k=0;k<v;k++)O=k%D-x,C=w-(k/D|0),T[k]=E=h?Math.abs(h==="y"?C:O):py(O*O+C*C),E>A&&(A=E),E<M&&(M=E);r==="random"&&Py(T),T.max=A-M,T.min=M,T.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(D>v?v-1:h?h==="y"?v/D:D:Math.max(D,v/D))||0)*(r==="edges"?-1:1),T.b=v<0?i-v:i,T.u=Dn(t.amount||t.each)||0,n=n&&v<0?Wy(n):n}return v=(T[m]-T.min)/T.max||0,mn(T.b+(n?n(v):v)*T.v)+T.u}},Ep=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=mn(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(oi(n)?0:Dn(n))}},Iy=function(e,t){var n=Rn(e),r,i;return!n&&Rs(e)&&(r=n=e.radius||Wr,e.values?(e=Hr(e.values),(i=!oi(e[0]))&&(r*=r)):e=Ep(e.increment)),Yi(t,n?Ht(e)?function(o){return i=e(o),Math.abs(i-o)<=r?i:o}:function(o){for(var u=parseFloat(i?o.x:o),c=parseFloat(i?o.y:0),h=Wr,f=0,d=e.length,m,_;d--;)i?(m=e[d].x-u,_=e[d].y-c,m=m*m+_*_):m=Math.abs(e[d]-u),m<h&&(h=m,f=d);return f=!r||h<=r?e[f]:o,i||f===o||oi(o)?f:f+Dn(o)}:Ep(e))},Uy=function(e,t,n,r){return Yi(Rn(e)?!t:n===!0?!!(n=0):!r,function(){return Rn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},NE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(i,o){return o(i)},r)}},FE=function(e,t){return function(n){return e(parseFloat(n))+(t||Dn(n))}},LE=function(e,t,n){return Fy(e,t,0,1,n)},Ny=function(e,t,n){return Yi(n,function(r){return e[~~t(r)]})},zE=function s(e,t,n){var r=t-e;return Rn(e)?Ny(e,s(0,e.length),t):Yi(n,function(i){return(r+(i-e)%r)%r+e})},BE=function s(e,t,n){var r=t-e,i=r*2;return Rn(e)?Ny(e,s(0,e.length-1),t):Yi(n,function(o){return o=(i+(o-e)%i)%i||0,e+(o>r?i-o:o)})},cu=function(e){for(var t=0,n="",r,i,o,u;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),u=e.charAt(r+7)==="[",i=e.substr(r+7,o-r-7).match(u?vy:_p),n+=e.substr(t,r-t)+Uy(u?i:+i[0],u?0:+i[1],+i[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Fy=function(e,t,n,r,i){var o=t-e,u=r-n;return Yi(i,function(c){return n+((c-e)/o*u||0)})},VE=function s(e,t,n,r){var i=isNaN(e+t)?0:function(_){return(1-_)*e+_*t};if(!i){var o=vn(e),u={},c,h,f,d,m;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(Rn(e)&&!Rn(t)){for(f=[],d=e.length,m=d-2,h=1;h<d;h++)f.push(s(e[h-1],e[h]));d--,i=function(y){y*=d;var v=Math.min(m,~~y);return f[v](y-v)},n=t}else r||(e=Ro(Rn(e)?[]:{},e));if(!f){for(c in t)um.call(u,e,c,"get",t[c]);i=function(y){return dm(y,u)||(o?e.p:e)}}}return Yi(n,i)},wv=function(e,t,n){var r=e.labels,i=Wr,o,u,c;for(o in r)u=r[o]-t,u<0==!!n&&u&&i>(u=Math.abs(u))&&(c=o,i=u);return c},br=function(e,t,n){var r=e.vars,i=r[t],o=Gt,u=e._ctx,c,h,f;if(i)return c=r[t+"Params"],h=r.callbackScope||e,n&&Ni.length&&Sh(),u&&(Gt=u),f=c?i.apply(h,c):i.call(h),Gt=o,f},$l=function(e){return Bi(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Pn),e.progress()<1&&br(e,"onInterrupt"),e},ka,Ly=[],zy=function(e){if(rm()&&e){e=!e.name&&e.default||e;var t=e.name,n=Ht(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:uu,render:dm,add:um,kill:rC,modifier:nC,rawVars:0},o={targetTest:0,get:0,getSetter:fm,aliases:{},register:0};if(ja(),e!==r){if(xr[t])return;Yr(r,Yr(wh(e,i),o)),Ro(r.prototype,Ro(i,wh(e,o))),xr[r.prop=t]=r,e.targetTest&&(dh.push(r),om[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Sy(t,r),e.register&&e.register(lr,r,ir)}else e&&Ly.push(e)},vt=255,eu={aqua:[0,vt,vt],lime:[0,vt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,vt],navy:[0,0,128],white:[vt,vt,vt],olive:[128,128,0],yellow:[vt,vt,0],orange:[vt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[vt,0,0],pink:[vt,192,203],cyan:[0,vt,vt],transparent:[vt,vt,vt,0]},qd=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*vt+.5|0},By=function(e,t,n){var r=e?oi(e)?[e>>16,e>>8&vt,e&vt]:0:eu.black,i,o,u,c,h,f,d,m,_,y;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),eu[e])r=eu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),u=e.charAt(3),e="#"+i+i+o+o+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&vt,r&vt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&vt,e&vt]}else if(e.substr(0,3)==="hsl"){if(r=y=e.match(_p),!t)c=+r[0]%360/360,h=+r[1]/100,f=+r[2]/100,o=f<=.5?f*(h+1):f+h-f*h,i=f*2-o,r.length>3&&(r[3]*=1),r[0]=qd(c+1/3,i,o),r[1]=qd(c,i,o),r[2]=qd(c-1/3,i,o);else if(~e.indexOf("="))return r=e.match(gy),n&&r.length<4&&(r[3]=1),r}else r=e.match(_p)||eu.transparent;r=r.map(Number)}return t&&!y&&(i=r[0]/vt,o=r[1]/vt,u=r[2]/vt,d=Math.max(i,o,u),m=Math.min(i,o,u),f=(d+m)/2,d===m?c=h=0:(_=d-m,h=f>.5?_/(2-d-m):_/(d+m),c=d===i?(o-u)/_+(o<u?6:0):d===o?(u-i)/_+2:(i-o)/_+4,c*=60),r[0]=~~(c+.5),r[1]=~~(h*100+.5),r[2]=~~(f*100+.5)),n&&r.length<4&&(r[3]=1),r},Vy=function(e){var t=[],n=[],r=-1;return e.split(Fi).forEach(function(i){var o=i.match(Oa)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},xv=function(e,t,n){var r="",i=(e+r).match(Fi),o=t?"hsla(":"rgba(",u=0,c,h,f,d;if(!i)return e;if(i=i.map(function(m){return(m=By(m,t,1))&&o+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(f=Vy(e),c=n.c,c.join(r)!==f.c.join(r)))for(h=e.replace(Fi,"1").split(Oa),d=h.length-1;u<d;u++)r+=h[u]+(~c.indexOf(u)?i.shift()||o+"0,0,0,0)":(f.length?f:i.length?i:n).shift());if(!h)for(h=e.split(Fi),d=h.length-1;u<d;u++)r+=h[u]+i[u];return r+h[d]},Fi=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in eu)s+="|"+e+"\\b";return new RegExp(s+")","gi")}(),GE=/hsl[a]?\(/,Gy=function(e){var t=e.join(" "),n;if(Fi.lastIndex=0,Fi.test(t))return n=GE.test(t),e[1]=xv(e[1],n),e[0]=xv(e[0],n,Vy(e[1])),!0},hu,Er=function(){var s=Date.now,e=500,t=33,n=s(),r=n,i=1e3/240,o=i,u=[],c,h,f,d,m,_,y=function v(T){var x=s()-r,w=T===!0,O,C,E,k;if(x>e&&(n+=x-t),r+=x,E=r-n,O=E-o,(O>0||w)&&(k=++d.frame,m=E-d.time*1e3,d.time=E=E/1e3,o+=O+(O>=i?4:i-O),C=1),w||(c=h(v)),C)for(_=0;_<u.length;_++)u[_](E,m,k,T)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(T){return m/(1e3/(T||60))},wake:function(){yy&&(!vp&&rm()&&(Gr=vp=window,sm=Gr.document||{},Mr.gsap=lr,(Gr.gsapVersions||(Gr.gsapVersions=[])).push(lr.version),Ty(Th||Gr.GreenSockGlobals||!Gr.gsap&&Gr||{}),f=Gr.requestAnimationFrame,Ly.forEach(zy)),c&&d.sleep(),h=f||function(T){return setTimeout(T,o-d.time*1e3+1|0)},hu=1,y(2))},sleep:function(){(f?Gr.cancelAnimationFrame:clearTimeout)(c),hu=0,h=uu},lagSmoothing:function(T,x){e=T||1/0,t=Math.min(x||33,e)},fps:function(T){i=1e3/(T||240),o=d.time*1e3+i},add:function(T,x,w){var O=x?function(C,E,k,A){T(C,E,k,A),d.remove(O)}:T;return d.remove(T),u[w?"unshift":"push"](O),ja(),O},remove:function(T,x){~(x=u.indexOf(T))&&u.splice(x,1)&&_>=x&&_--},_listeners:u},d}(),ja=function(){return!hu&&Er.wake()},$e={},WE=/^[\d.\-M][\d.\-,\s]/,HE=/["']/g,jE=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],i=1,o=n.length,u,c,h;i<o;i++)c=n[i],u=i!==o-1?c.lastIndexOf(","):c.length,h=c.substr(0,u),t[r]=isNaN(h)?h.replace(HE,"").trim():+h,r=c.substr(u+1).trim();return t},qE=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},YE=function(e){var t=(e+"").split("("),n=$e[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[jE(t[1])]:qE(e).split(",").map(Cy)):$e._CE&&WE.test(e)?$e._CE("",e):n},Wy=function(e){return function(t){return 1-e(1-t)}},Hy=function s(e,t){for(var n=e._first,r;n;)n instanceof qn?s(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?s(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},Ao=function(e,t){return e&&(Ht(e)?e:$e[e]||YE(e))||t},Vo=function(e,t,n,r){n===void 0&&(n=function(c){return 1-t(1-c)}),r===void 0&&(r=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var i={easeIn:t,easeOut:n,easeInOut:r},o;return sr(e,function(u){$e[u]=Mr[u]=i,$e[o=u.toLowerCase()]=n;for(var c in i)$e[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=$e[u+"."+c]=i[c]}),i},jy=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Yd=function s(e,t,n){var r=t>=1?t:1,i=(n||(e?.3:.45))/(t<1?t:1),o=i/gp*(Math.asin(1/r)||0),u=function(f){return f===1?1:r*Math.pow(2,-10*f)*SE((f-o)*i)+1},c=e==="out"?u:e==="in"?function(h){return 1-u(1-h)}:jy(u);return i=gp/i,c.config=function(h,f){return s(e,h,f)},c},Xd=function s(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:jy(n);return r.config=function(i){return s(e,i)},r};sr("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;Vo(s+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});$e.Linear.easeNone=$e.none=$e.Linear.easeIn;Vo("Elastic",Yd("in"),Yd("out"),Yd());(function(s,e){var t=1/e,n=2*t,r=2.5*t,i=function(u){return u<t?s*u*u:u<n?s*Math.pow(u-1.5/e,2)+.75:u<r?s*(u-=2.25/e)*u+.9375:s*Math.pow(u-2.625/e,2)+.984375};Vo("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);Vo("Expo",function(s){return s?Math.pow(2,10*(s-1)):0});Vo("Circ",function(s){return-(py(1-s*s)-1)});Vo("Sine",function(s){return s===1?1:-TE(s*vE)+1});Vo("Back",Xd("in"),Xd("out"),Xd());$e.SteppedEase=$e.steps=Mr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0,o=1-yt;return function(u){return((r*zu(0,o,u)|0)+i)*n}}};Ga.ease=$e["quad.out"];sr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return am+=s+","+s+"Params,"});var qy=function(e,t){this.id=yE++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:xy,this.set=t?t.getSetter:fm},fu=function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ha(this,+t.duration,1,1),this.data=t.data,Gt&&(this._ctx=Gt,Gt.data.push(this)),hu||Er.wake()}var e=s.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Ha(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(ja(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(lf(this,n),!i._dp||i.parent||ky(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&As(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===yt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Ey(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Tv(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Tv(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,r):this._repeat?Wa(this._tTime,i)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-yt?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?xh(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-yt?0:this._rts,this.totalTime(zu(-Math.abs(this._delay),this._tDur,i),r!==!1),af(this),kE(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ja(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==yt&&(this._tTime-=yt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&As(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(rr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xh(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=EE);var r=Pn;return Pn=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Pn=r,this},e.globalTime=function(n){for(var r=this,i=arguments.length?n:r.rawTime();r;)i=r._start+i/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Sv(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Sv(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Vr(this,n),rr(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,rr(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-yt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-yt,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=r&&i<this.endTime(!0)-yt)},e.eventCallback=function(n,r,i){var o=this.vars;return arguments.length>1?(r?(o[n]=r,i&&(o[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(i){var o=Ht(n)?n:by,u=function(){var h=r.then;r.then=null,Ht(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=h),i(o),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?u():r._prom=u})},e.kill=function(){$l(this)},s}();Yr(fu.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-yt,_prom:0,_ps:!1,_rts:1});var qn=function(s){dy(e,s);function e(n,r){var i;return n===void 0&&(n={}),i=s.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=rr(n.sortChildren),Nt&&As(n.parent||Nt,ei(i),r),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&Ay(ei(i),n.scrollTrigger),i}var t=e.prototype;return t.to=function(r,i,o){return su(0,arguments,this),this},t.from=function(r,i,o){return su(1,arguments,this),this},t.fromTo=function(r,i,o,u){return su(2,arguments,this),this},t.set=function(r,i,o){return i.duration=0,i.parent=this,ru(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new sn(r,i,Vr(this,o),1),this},t.call=function(r,i,o){return As(this,sn.delayedCall(0,r,i),o)},t.staggerTo=function(r,i,o,u,c,h,f){return o.duration=i,o.stagger=o.stagger||u,o.onComplete=h,o.onCompleteParams=f,o.parent=this,new sn(r,o,Vr(this,c)),this},t.staggerFrom=function(r,i,o,u,c,h,f){return o.runBackwards=1,ru(o).immediateRender=rr(o.immediateRender),this.staggerTo(r,i,o,u,c,h,f)},t.staggerFromTo=function(r,i,o,u,c,h,f,d){return u.startAt=o,ru(u).immediateRender=rr(u.immediateRender),this.staggerTo(r,i,u,c,h,f,d)},t.render=function(r,i,o){var u=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=r<=0?0:mn(r),d=this._zTime<0!=r<0&&(this._initted||!h),m,_,y,v,T,x,w,O,C,E,k,A;if(this!==Nt&&f>c&&r>=0&&(f=c),f!==this._tTime||o||d){if(u!==this._time&&h&&(f+=this._time-u,r+=this._time-u),m=f,C=this._start,O=this._ts,x=!O,d&&(h||(u=this._zTime),(r||!i)&&(this._zTime=r)),this._repeat){if(k=this._yoyo,T=h+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(T*100+r,i,o);if(m=mn(f%T),f===c?(v=this._repeat,m=h):(v=~~(f/T),v&&v===f/T&&(m=h,v--),m>h&&(m=h)),E=Wa(this._tTime,T),!u&&this._tTime&&E!==v&&this._tTime-E*T-this._dur<=0&&(E=v),k&&v&1&&(m=h-m,A=1),v!==E&&!this._lock){var M=k&&E&1,D=M===(k&&v&1);if(v<E&&(M=!M),u=M?0:f%h?h:f,this._lock=1,this.render(u||(A?0:mn(v*T)),i,!h)._lock=0,this._tTime=f,!i&&this.parent&&br(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),u&&u!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,D&&(this._lock=2,u=M?h:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;Hy(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=PE(this,mn(u),mn(m)),w&&(f-=m-(m=w._start))),this._tTime=f,this._time=m,this._act=!O,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,u=0),!u&&m&&!i&&!v&&(br(this,"onStart"),this._tTime!==f))return this;if(m>=u&&r>=0)for(_=this._first;_;){if(y=_._next,(_._act||m>=_._start)&&_._ts&&w!==_){if(_.parent!==this)return this.render(r,i,o);if(_.render(_._ts>0?(m-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(m-_._start)*_._ts,i,o),m!==this._time||!this._ts&&!x){w=0,y&&(f+=this._zTime=-yt);break}}_=y}else{_=this._last;for(var U=r<0?r:m;_;){if(y=_._prev,(_._act||U<=_._end)&&_._ts&&w!==_){if(_.parent!==this)return this.render(r,i,o);if(_.render(_._ts>0?(U-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(U-_._start)*_._ts,i,o||Pn&&(_._initted||_._startAt)),m!==this._time||!this._ts&&!x){w=0,y&&(f+=this._zTime=U?-yt:yt);break}}_=y}}if(w&&!i&&(this.pause(),w.render(m>=u?0:-yt)._zTime=m>=u?1:-1,this._ts))return this._start=C,af(this),this.render(r,i,o);this._onUpdate&&!i&&br(this,"onUpdate",!0),(f===c&&this._tTime>=this.totalDuration()||!f&&u)&&(C===this._start||Math.abs(O)!==Math.abs(this._ts))&&(this._lock||((r||!h)&&(f===c&&this._ts>0||!f&&this._ts<0)&&Bi(this,1),!i&&!(r<0&&!u)&&(f||u||!c)&&(br(this,f===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,i){var o=this;if(oi(i)||(i=Vr(this,i,r)),!(r instanceof fu)){if(Rn(r))return r.forEach(function(u){return o.add(u,i)}),this;if(vn(r))return this.addLabel(r,i);if(Ht(r))r=sn.delayedCall(0,r);else return this}return this!==r?As(this,r,i):this},t.getChildren=function(r,i,o,u){r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),u===void 0&&(u=-Wr);for(var c=[],h=this._first;h;)h._start>=u&&(h instanceof sn?i&&c.push(h):(o&&c.push(h),r&&c.push.apply(c,h.getChildren(!0,i,o)))),h=h._next;return c},t.getById=function(r){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===r)return i[o]},t.remove=function(r){return vn(r)?this.removeLabel(r):Ht(r)?this.killTweensOf(r):(of(this,r),r===this._recent&&(this._recent=this._last),ko(this))},t.totalTime=function(r,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=mn(Er.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),s.prototype.totalTime.call(this,r,i),this._forcing=0,this):this._tTime},t.addLabel=function(r,i){return this.labels[r]=Vr(this,i),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,i,o){var u=sn.delayedCall(0,i||uu,o);return u.data="isPause",this._hasPause=1,As(this,u,Vr(this,r))},t.removePause=function(r){var i=this._first;for(r=Vr(this,r);i;)i._start===r&&i.data==="isPause"&&Bi(i),i=i._next},t.killTweensOf=function(r,i,o){for(var u=this.getTweensOf(r,o),c=u.length;c--;)Pi!==u[c]&&u[c].kill(r,i);return this},t.getTweensOf=function(r,i){for(var o=[],u=Hr(r),c=this._first,h=oi(i),f;c;)c instanceof sn?CE(c._targets,u)&&(h?(!Pi||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&o.push(c):(f=c.getTweensOf(u,i)).length&&o.push.apply(o,f),c=c._next;return o},t.tweenTo=function(r,i){i=i||{};var o=this,u=Vr(o,r),c=i,h=c.startAt,f=c.onStart,d=c.onStartParams,m=c.immediateRender,_,y=sn.to(o,Yr({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:i.duration||Math.abs((u-(h&&"time"in h?h.time:o._time))/o.timeScale())||yt,onStart:function(){if(o.pause(),!_){var T=i.duration||Math.abs((u-(h&&"time"in h?h.time:o._time))/o.timeScale());y._dur!==T&&Ha(y,T,0,1).render(y._time,!0,!0),_=1}f&&f.apply(y,d||[])}},i));return m?y.render(0):y},t.tweenFromTo=function(r,i,o){return this.tweenTo(i,Yr({startAt:{time:Vr(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),wv(this,Vr(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),wv(this,Vr(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+yt)},t.shiftChildren=function(r,i,o){o===void 0&&(o=0);for(var u=this._first,c=this.labels,h;u;)u._start>=o&&(u._start+=r,u._end+=r),u=u._next;if(i)for(h in c)c[h]>=o&&(c[h]+=r);return ko(this)},t.invalidate=function(r){var i=this._first;for(this._lock=0;i;)i.invalidate(r),i=i._next;return s.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ko(this)},t.totalDuration=function(r){var i=0,o=this,u=o._last,c=Wr,h,f,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;u;)h=u._prev,u._dirty&&u.totalDuration(),f=u._start,f>c&&o._sort&&u._ts&&!o._lock?(o._lock=1,As(o,u,f-u._delay,1)._lock=0):c=f,f<0&&u._ts&&(i-=f,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),c=0),u._end>i&&u._ts&&(i=u._end),u=h;Ha(o,o===Nt&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Nt._ts&&(Ey(Nt,xh(r,Nt)),wy=Er.frame),Er.frame>=vv){vv+=Or.autoSleep||120;var i=Nt._first;if((!i||!i._ts)&&Or.autoSleep&&Er._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Er.sleep()}}},e}(fu);Yr(qn.prototype,{_lock:0,_hasPause:0,_forcing:0});var XE=function(e,t,n,r,i,o,u){var c=new ir(this._pt,e,t,0,1,Jy,null,i),h=0,f=0,d,m,_,y,v,T,x,w;for(c.b=n,c.e=r,n+="",r+="",(x=~r.indexOf("random("))&&(r=cu(r)),o&&(w=[n,r],o(w,e,t),n=w[0],r=w[1]),m=n.match(Hd)||[];d=Hd.exec(r);)y=d[0],v=r.substring(h,d.index),_?_=(_+1)%5:v.substr(-5)==="rgba("&&(_=1),y!==m[f++]&&(T=parseFloat(m[f-1])||0,c._pt={_next:c._pt,p:v||f===1?v:",",s:T,c:y.charAt(1)==="="?Pa(T,y)-T:parseFloat(y)-T,m:_&&_<4?Math.round:0},h=Hd.lastIndex);return c.c=h<r.length?r.substring(h,r.length):"",c.fp=u,(_y.test(r)||x)&&(c.e=0),this._pt=c,c},um=function(e,t,n,r,i,o,u,c,h,f){Ht(r)&&(r=r(i||0,e,o));var d=e[t],m=n!=="get"?n:Ht(d)?h?e[t.indexOf("set")||!Ht(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():d,_=Ht(d)?h?$E:Qy:hm,y;if(vn(r)&&(~r.indexOf("random(")&&(r=cu(r)),r.charAt(1)==="="&&(y=Pa(m,r)+(Dn(m)||0),(y||y===0)&&(r=y))),!f||m!==r||Cp)return!isNaN(m*r)&&r!==""?(y=new ir(this._pt,e,t,+m||0,r-(m||0),typeof d=="boolean"?tC:Ky,0,_),h&&(y.fp=h),u&&y.modifier(u,this,e),this._pt=y):(!d&&!(t in e)&&im(t,r),XE.call(this,e,t,m,r,_,c||Or.stringFilter,h))},ZE=function(e,t,n,r,i){if(Ht(e)&&(e=iu(e,i,t,n,r)),!Rs(e)||e.style&&e.nodeType||Rn(e)||my(e))return vn(e)?iu(e,i,t,n,r):e;var o={},u;for(u in e)o[u]=iu(e[u],i,t,n,r);return o},Yy=function(e,t,n,r,i,o){var u,c,h,f;if(xr[e]&&(u=new xr[e]).init(i,u.rawVars?t[e]:ZE(t[e],r,i,o,n),n,r,o)!==!1&&(n._pt=c=new ir(n._pt,i,e,0,1,u.render,u,0,u.priority),n!==ka))for(h=n._ptLookup[n._targets.indexOf(i)],f=u._props.length;f--;)h[u._props[f]]=c;return u},Pi,Cp,cm=function s(e,t,n){var r=e.vars,i=r.ease,o=r.startAt,u=r.immediateRender,c=r.lazy,h=r.onUpdate,f=r.runBackwards,d=r.yoyoEase,m=r.keyframes,_=r.autoRevert,y=e._dur,v=e._startAt,T=e._targets,x=e.parent,w=x&&x.data==="nested"?x.vars.targets:T,O=e._overwrite==="auto"&&!tm,C=e.timeline,E,k,A,M,D,U,R,P,F,B,q,X,J;if(C&&(!m||!i)&&(i="none"),e._ease=Ao(i,Ga.ease),e._yEase=d?Wy(Ao(d===!0?i:d,Ga.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!C&&!!r.runBackwards,!C||m&&!r.stagger){if(P=T[0]?Oo(T[0]).harness:0,X=P&&r[P.prop],E=wh(r,om),v&&(v._zTime<0&&v.progress(1),t<0&&f&&u&&!_?v.render(-1,!0):v.revert(f&&y?fh:xE),v._lazy=0),o){if(Bi(e._startAt=sn.set(T,Yr({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!v&&rr(c),startAt:null,delay:0,onUpdate:h&&function(){return br(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Pn||!u&&!_)&&e._startAt.revert(fh),u&&y&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&y&&!v){if(t&&(u=!1),A=Yr({overwrite:!1,data:"isFromStart",lazy:u&&!v&&rr(c),immediateRender:u,stagger:0,parent:x},E),X&&(A[P.prop]=X),Bi(e._startAt=sn.set(T,A)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Pn?e._startAt.revert(fh):e._startAt.render(-1,!0)),e._zTime=t,!u)s(e._startAt,yt,yt);else if(!t)return}for(e._pt=e._ptCache=0,c=y&&rr(c)||c&&!y,k=0;k<T.length;k++){if(D=T[k],R=D._gsap||lm(T)[k]._gsap,e._ptLookup[k]=B={},yp[R.id]&&Ni.length&&Sh(),q=w===T?k:w.indexOf(D),P&&(F=new P).init(D,X||E,e,q,w)!==!1&&(e._pt=M=new ir(e._pt,D,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(H){B[H]=M}),F.priority&&(U=1)),!P||X)for(A in E)xr[A]&&(F=Yy(A,E,e,q,D,w))?F.priority&&(U=1):B[A]=M=um.call(e,D,A,"get",E[A],q,w,0,r.stringFilter);e._op&&e._op[k]&&e.kill(D,e._op[k]),O&&e._pt&&(Pi=e,Nt.killTweensOf(D,B,e.globalTime(t)),J=!e.parent,Pi=0),e._pt&&c&&(yp[R.id]=1)}U&&$y(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!J,m&&t<=0&&C.render(Wr,!0,!0)},QE=function(e,t,n,r,i,o,u,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],f,d,m,_;if(!h)for(h=e._ptCache[t]=[],m=e._ptLookup,_=e._targets.length;_--;){if(f=m[_][t],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==t&&f.fp!==t;)f=f._next;if(!f)return Cp=1,e.vars[t]="+=0",cm(e,u),Cp=0,c?lu(t+" not eligible for reset"):1;h.push(f)}for(_=h.length;_--;)d=h[_],f=d._pt||d,f.s=(r||r===0)&&!i?r:f.s+(r||0)+o*f.c,f.c=n-f.s,d.e&&(d.e=Qt(n)+Dn(d.e)),d.b&&(d.b=f.s+Dn(d.b))},KE=function(e,t){var n=e[0]?Oo(e[0]).harness:0,r=n&&n.aliases,i,o,u,c;if(!r)return t;i=Ro({},t);for(o in r)if(o in i)for(c=r[o].split(","),u=c.length;u--;)i[c[u]]=i[o];return i},JE=function(e,t,n,r){var i=t.ease||r||"power1.inOut",o,u;if(Rn(t))u=n[e]||(n[e]=[]),t.forEach(function(c,h){return u.push({t:h/(t.length-1)*100,v:c,e:i})});else for(o in t)u=n[o]||(n[o]=[]),o==="ease"||u.push({t:parseFloat(e),v:t[o],e:i})},iu=function(e,t,n,r,i){return Ht(e)?e.call(t,n,r,i):vn(e)&&~e.indexOf("random(")?cu(e):e},Xy=am+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Zy={};sr(Xy+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return Zy[s]=1});var sn=function(s){dy(e,s);function e(n,r,i,o){var u;typeof r=="number"&&(i.duration=r,r=i,i=null),u=s.call(this,o?r:ru(r))||this;var c=u.vars,h=c.duration,f=c.delay,d=c.immediateRender,m=c.stagger,_=c.overwrite,y=c.keyframes,v=c.defaults,T=c.scrollTrigger,x=c.yoyoEase,w=r.parent||Nt,O=(Rn(n)||my(n)?oi(n[0]):"length"in r)?[n]:Hr(n),C,E,k,A,M,D,U,R;if(u._targets=O.length?lm(O):lu("GSAP target "+n+" not found. https://gsap.com",!Or.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=_,y||m||ih(h)||ih(f)){if(r=u.vars,C=u.timeline=new qn({data:"nested",defaults:v||{},targets:w&&w.data==="nested"?w.vars.targets:O}),C.kill(),C.parent=C._dp=ei(u),C._start=0,m||ih(h)||ih(f)){if(A=O.length,U=m&&Ry(m),Rs(m))for(M in m)~Xy.indexOf(M)&&(R||(R={}),R[M]=m[M]);for(E=0;E<A;E++)k=wh(r,Zy),k.stagger=0,x&&(k.yoyoEase=x),R&&Ro(k,R),D=O[E],k.duration=+iu(h,ei(u),E,D,O),k.delay=(+iu(f,ei(u),E,D,O)||0)-u._delay,!m&&A===1&&k.delay&&(u._delay=f=k.delay,u._start+=f,k.delay=0),C.to(D,k,U?U(E,D,O):0),C._ease=$e.none;C.duration()?h=f=0:u.timeline=0}else if(y){ru(Yr(C.vars.defaults,{ease:"none"})),C._ease=Ao(y.ease||r.ease||"none");var P=0,F,B,q;if(Rn(y))y.forEach(function(X){return C.to(O,X,">")}),C.duration();else{k={};for(M in y)M==="ease"||M==="easeEach"||JE(M,y[M],k,y.easeEach);for(M in k)for(F=k[M].sort(function(X,J){return X.t-J.t}),P=0,E=0;E<F.length;E++)B=F[E],q={ease:B.e,duration:(B.t-(E?F[E-1].t:0))/100*h},q[M]=B.v,C.to(O,q,P),P+=q.duration;C.duration()<h&&C.to({},{duration:h-C.duration()})}}h||u.duration(h=C.duration())}else u.timeline=0;return _===!0&&!tm&&(Pi=ei(u),Nt.killTweensOf(O),Pi=0),As(w,ei(u),i),r.reversed&&u.reverse(),r.paused&&u.paused(!0),(d||!h&&!y&&u._start===mn(w._time)&&rr(d)&&AE(ei(u))&&w.data!=="nested")&&(u._tTime=-yt,u.render(Math.max(0,-f)||0)),T&&Ay(ei(u),T),u}var t=e.prototype;return t.render=function(r,i,o){var u=this._time,c=this._tDur,h=this._dur,f=r<0,d=r>c-yt&&!f?c:r<yt?0:r,m,_,y,v,T,x,w,O,C;if(!h)DE(this,r,i,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(m=d,O=this.timeline,this._repeat){if(v=h+this._rDelay,this._repeat<-1&&f)return this.totalTime(v*100+r,i,o);if(m=mn(d%v),d===c?(y=this._repeat,m=h):(y=~~(d/v),y&&y===mn(d/v)&&(m=h,y--),m>h&&(m=h)),x=this._yoyo&&y&1,x&&(C=this._yEase,m=h-m),T=Wa(this._tTime,v),m===u&&!o&&this._initted&&y===T)return this._tTime=d,this;y!==T&&(O&&this._yEase&&Hy(O,x),this.vars.repeatRefresh&&!x&&!this._lock&&this._time!==h&&this._initted&&(this._lock=o=1,this.render(mn(v*y),!0).invalidate()._lock=0))}if(!this._initted){if(My(this,f?r:m,o,i,d))return this._tTime=0,this;if(u!==this._time&&!(o&&this.vars.repeatRefresh&&y!==T))return this;if(h!==this._dur)return this.render(r,i,o)}if(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(C||this._ease)(m/h),this._from&&(this.ratio=w=1-w),m&&!u&&!i&&!y&&(br(this,"onStart"),this._tTime!==d))return this;for(_=this._pt;_;)_.r(w,_.d),_=_._next;O&&O.render(r<0?r:!m&&x?-yt:O._dur*O._ease(m/this._dur),i,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!i&&(f&&Tp(this,r,i,o),br(this,"onUpdate")),this._repeat&&y!==T&&this.vars.onRepeat&&!i&&this.parent&&br(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(f&&!this._onUpdate&&Tp(this,r,!0,!0),(r||!h)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Bi(this,1),!i&&!(f&&!u)&&(d||u||x)&&(br(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),s.prototype.invalidate.call(this,r)},t.resetTo=function(r,i,o,u,c){hu||Er.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||cm(this,h),f=this._ease(h/this._dur),QE(this,r,i,o,u,f,h,c)?this.resetTo(r,i,o,u,1):(lf(this,0),this.parent||Oy(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,i){if(i===void 0&&(i="all"),!r&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?$l(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,i,Pi&&Pi.vars.overwrite!==!0)._first||$l(this),this.parent&&o!==this.timeline.totalDuration()&&Ha(this,this._dur*this.timeline._tDur/o,0,1),this}var u=this._targets,c=r?Hr(r):u,h=this._ptLookup,f=this._pt,d,m,_,y,v,T,x;if((!i||i==="all")&&OE(u,c))return i==="all"&&(this._pt=0),$l(this);for(d=this._op=this._op||[],i!=="all"&&(vn(i)&&(v={},sr(i,function(w){return v[w]=1}),i=v),i=KE(u,i)),x=u.length;x--;)if(~c.indexOf(u[x])){m=h[x],i==="all"?(d[x]=i,y=m,_={}):(_=d[x]=d[x]||{},y=i);for(v in y)T=m&&m[v],T&&((!("kill"in T.d)||T.d.kill(v)===!0)&&of(this,T,"_pt"),delete m[v]),_!=="all"&&(_[v]=1)}return this._initted&&!this._pt&&f&&$l(this),this},e.to=function(r,i){return new e(r,i,arguments[2])},e.from=function(r,i){return su(1,arguments)},e.delayedCall=function(r,i,o,u){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:u})},e.fromTo=function(r,i,o){return su(2,arguments)},e.set=function(r,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(r,i)},e.killTweensOf=function(r,i,o){return Nt.killTweensOf(r,i,o)},e}(fu);Yr(sn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});sr("staggerTo,staggerFrom,staggerFromTo",function(s){sn[s]=function(){var e=new qn,t=wp.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var hm=function(e,t,n){return e[t]=n},Qy=function(e,t,n){return e[t](n)},$E=function(e,t,n,r){return e[t](r.fp,n)},eC=function(e,t,n){return e.setAttribute(t,n)},fm=function(e,t){return Ht(e[t])?Qy:nm(e[t])&&e.setAttribute?eC:hm},Ky=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},tC=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Jy=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},dm=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},nC=function(e,t,n,r){for(var i=this._pt,o;i;)o=i._next,i.p===r&&i.modifier(e,t,n),i=o},rC=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?of(this,t,"_pt"):t.dep||(n=1),t=r;return!n},sC=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},$y=function(e){for(var t=e._pt,n,r,i,o;t;){for(n=t._next,r=i;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:i=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=i},ir=function(){function s(t,n,r,i,o,u,c,h,f){this.t=n,this.s=i,this.c=o,this.p=r,this.r=u||Ky,this.d=c||this,this.set=h||hm,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(n,r,i){this.mSet=this.mSet||this.set,this.set=sC,this.m=n,this.mt=i,this.tween=r},s}();sr(am+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return om[s]=1});Mr.TweenMax=Mr.TweenLite=sn;Mr.TimelineLite=Mr.TimelineMax=qn;Nt=new qn({sortChildren:!1,defaults:Ga,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Or.stringFilter=Gy;var Mo=[],ph={},iC=[],Ev=0,oC=0,Zd=function(e){return(ph[e]||iC).map(function(t){return t()})},bp=function(){var e=Date.now(),t=[];e-Ev>2&&(Zd("matchMediaInit"),Mo.forEach(function(n){var r=n.queries,i=n.conditions,o,u,c,h;for(u in r)o=Gr.matchMedia(r[u]).matches,o&&(c=1),o!==i[u]&&(i[u]=o,h=1);h&&(n.revert(),c&&t.push(n))}),Zd("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),Ev=e,Zd("matchMedia"))},e1=function(){function s(t,n){this.selector=n&&xp(n),this.data=[],this._r=[],this.isReverted=!1,this.id=oC++,t&&this.add(t)}var e=s.prototype;return e.add=function(n,r,i){Ht(n)&&(i=r,r=n,n=Ht);var o=this,u=function(){var h=Gt,f=o.selector,d;return h&&h!==o&&h.data.push(o),i&&(o.selector=xp(i)),Gt=o,d=r.apply(o,arguments),Ht(d)&&o._r.push(d),Gt=h,o.selector=f,o.isReverted=!1,d};return o.last=u,n===Ht?u(o,function(c){return o.add(null,c)}):n?o[n]=u:u},e.ignore=function(n){var r=Gt;Gt=null,n(this),Gt=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof s?n.push.apply(n,r.getTweens()):r instanceof sn&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var i=this;if(n?function(){for(var u=i.getTweens(),c=i.data.length,h;c--;)h=i.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(f){return u.splice(u.indexOf(f),1)}));for(u.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,d){return d.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),c=i.data.length;c--;)h=i.data[c],h instanceof qn?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof sn)&&h.revert&&h.revert(n);i._r.forEach(function(f){return f(n,i)}),i.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),r)for(var o=Mo.length;o--;)Mo[o].id===this.id&&Mo.splice(o,1)},e.revert=function(n){this.kill(n||{})},s}(),aC=function(){function s(t){this.contexts=[],this.scope=t}var e=s.prototype;return e.add=function(n,r,i){Rs(n)||(n={matches:n});var o=new e1(0,i||this.scope),u=o.conditions={},c,h,f;Gt&&!o.selector&&(o.selector=Gt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(h in n)h==="all"?f=1:(c=Gr.matchMedia(n[h]),c&&(Mo.indexOf(o)<0&&Mo.push(o),(u[h]=c.matches)&&(f=1),c.addListener?c.addListener(bp):c.addEventListener("change",bp)));return f&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},s}(),Eh={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return zy(r)})},timeline:function(e){return new qn(e)},getTweensOf:function(e,t){return Nt.getTweensOf(e,t)},getProperty:function(e,t,n,r){vn(e)&&(e=Hr(e)[0]);var i=Oo(e||{}).get,o=n?by:Cy;return n==="native"&&(n=""),e&&(t?o((xr[t]&&xr[t].get||i)(e,t,n,r)):function(u,c,h){return o((xr[u]&&xr[u].get||i)(e,u,c,h))})},quickSetter:function(e,t,n){if(e=Hr(e),e.length>1){var r=e.map(function(f){return lr.quickSetter(f,t,n)}),i=r.length;return function(f){for(var d=i;d--;)r[d](f)}}e=e[0]||{};var o=xr[t],u=Oo(e),c=u.harness&&(u.harness.aliases||{})[t]||t,h=o?function(f){var d=new o;ka._pt=0,d.init(e,n?f+n:f,ka,0,[e]),d.render(1,d),ka._pt&&dm(1,ka)}:u.set(e,c);return o?h:function(f){return h(e,c,n?f+n:f,u,1)}},quickTo:function(e,t,n){var r,i=lr.to(e,Ro((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(c,h,f){return i.resetTo(t,c,h,f)};return o.tween=i,o},isTweening:function(e){return Nt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ao(e.ease,Ga.ease)),yv(Ga,e||{})},config:function(e){return yv(Or,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(u){return u&&!xr[u]&&!Mr[u]&&lu(t+" effect requires "+u+" plugin.")}),jd[t]=function(u,c,h){return n(Hr(u),Yr(c||{},i),h)},o&&(qn.prototype[t]=function(u,c,h){return this.add(jd[t](u,Rs(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){$e[e]=Ao(t)},parseEase:function(e,t){return arguments.length?Ao(e,t):$e},getById:function(e){return Nt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new qn(e),r,i;for(n.smoothChildTiming=rr(e.smoothChildTiming),Nt.remove(n),n._dp=0,n._time=n._tTime=Nt._time,r=Nt._first;r;)i=r._next,(t||!(!r._dur&&r instanceof sn&&r.vars.onComplete===r._targets[0]))&&As(n,r,r._start-r._delay),r=i;return As(Nt,n,0),n},context:function(e,t){return e?new e1(e,t):Gt},matchMedia:function(e){return new aC(e)},matchMediaRefresh:function(){return Mo.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||bp()},addEventListener:function(e,t){var n=ph[e]||(ph[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=ph[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:zE,wrapYoyo:BE,distribute:Ry,random:Uy,snap:Iy,normalize:LE,getUnit:Dn,clamp:IE,splitColor:By,toArray:Hr,selector:xp,mapRange:Fy,pipe:NE,unitize:FE,interpolate:VE,shuffle:Py},install:Ty,effects:jd,ticker:Er,updateRoot:qn.updateRoot,plugins:xr,globalTimeline:Nt,core:{PropTween:ir,globals:Sy,Tween:sn,Timeline:qn,Animation:fu,getCache:Oo,_removeLinkedListItem:of,reverting:function(){return Pn},context:function(e){return e&&Gt&&(Gt.data.push(e),e._ctx=Gt),Gt},suppressOverwrites:function(e){return tm=e}}};sr("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Eh[s]=sn[s]});Er.add(qn.updateRoot);ka=Eh.to({},{duration:0});var lC=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},uC=function(e,t){var n=e._targets,r,i,o;for(r in t)for(i=n.length;i--;)o=e._ptLookup[i][r],o&&(o=o.d)&&(o._pt&&(o=lC(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[i],r))},Qd=function(e,t){return{name:e,rawVars:1,init:function(r,i,o){o._onInit=function(u){var c,h;if(vn(i)&&(c={},sr(i,function(f){return c[f]=1}),i=c),t){c={};for(h in i)c[h]=t(i[h]);i=c}uC(u,i)}}}},lr=Eh.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,u,c;this.tween=n;for(o in t)c=e.getAttribute(o)||"",u=this.add(e,"setAttribute",(c||0)+"",t[o],r,i,0,0,o),u.op=o,u.b=c,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Pn?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Qd("roundProps",Ep),Qd("modifiers"),Qd("snap",Iy))||Eh;sn.version=qn.version=lr.version="3.12.4";yy=1;rm()&&ja();$e.Power0;$e.Power1;$e.Power2;$e.Power3;$e.Power4;$e.Linear;$e.Quad;$e.Cubic;$e.Quart;$e.Quint;$e.Strong;$e.Elastic;$e.Back;$e.SteppedEase;$e.Bounce;$e.Sine;$e.Expo;$e.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Cv,Ri,Ra,pm,xo,bv,mm,cC=function(){return typeof window<"u"},ai={},yo=180/Math.PI,Ia=Math.PI/180,ya=Math.atan2,Ov=1e8,gm=/([A-Z])/g,hC=/(left|right|width|margin|padding|x)/i,fC=/[\s,\(]\S/,Ms={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Op=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},dC=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},pC=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},mC=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},t1=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},n1=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},gC=function(e,t,n){return e.style[t]=n},_C=function(e,t,n){return e.style.setProperty(t,n)},vC=function(e,t,n){return e._gsap[t]=n},yC=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},TC=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},SC=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},Ft="transform",or=Ft+"Origin",wC=function s(e,t){var n=this,r=this.target,i=r.style,o=r._gsap;if(e in ai&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Ms[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return n.tfm[u]=ni(r,u)}):this.tfm[e]=o.x?o[e]:ni(r,e),e===or&&(this.tfm.zOrigin=o.zOrigin);else return Ms.transform.split(",").forEach(function(u){return s.call(n,u,t)});if(this.props.indexOf(Ft)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(or,t,"")),e=Ft}(i||t)&&this.props.push(e,t,i[e])},r1=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},xC=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?t[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(gm,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=mm(),(!i||!i.isStart)&&!n[Ft]&&(r1(n),r.zOrigin&&n[or]&&(n[or]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},s1=function(e,t){var n={target:e,props:[],revert:xC,save:wC};return e._gsap||lr.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},i1,kp=function(e,t){var n=Ri.createElementNS?Ri.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ri.createElement(e);return n&&n.style?n:Ri.createElement(e)},Ds=function s(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(gm,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&s(e,qa(t)||t,1)||""},kv="O,Moz,ms,Ms,Webkit".split(","),qa=function(e,t,n){var r=t||xo,i=r.style,o=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(kv[o]+e in i););return o<0?null:(o===3?"ms":o>=0?kv[o]:"")+e},Ap=function(){cC()&&window.document&&(Cv=window,Ri=Cv.document,Ra=Ri.documentElement,xo=kp("div")||{style:{}},kp("div"),Ft=qa(Ft),or=Ft+"Origin",xo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",i1=!!qa("perspective"),mm=lr.core.reverting,pm=1)},Kd=function s(e){var t=kp("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,i=this.style.cssText,o;if(Ra.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=s}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Ra.removeChild(t),this.style.cssText=i,o},Av=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},o1=function(e){var t;try{t=e.getBBox()}catch{t=Kd.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Kd||(t=Kd.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Av(e,["x","cx","x1"])||0,y:+Av(e,["y","cy","y1"])||0,width:0,height:0}:t},a1=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&o1(e))},Io=function(e,t){if(t){var n=e.style,r;t in ai&&t!==or&&(t=Ft),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(gm,"-$1").toLowerCase())):n.removeAttribute(t)}},Ii=function(e,t,n,r,i,o){var u=new ir(e._pt,t,n,0,1,o?n1:t1);return e._pt=u,u.b=r,u.e=i,e._props.push(n),u},Mv={deg:1,rad:1,turn:1},EC={grid:1,flex:1},Vi=function s(e,t,n,r){var i=parseFloat(n)||0,o=(n+"").trim().substr((i+"").length)||"px",u=xo.style,c=hC.test(t),h=e.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(c?"Width":"Height"),d=100,m=r==="px",_=r==="%",y,v,T,x;if(r===o||!i||Mv[r]||Mv[o])return i;if(o!=="px"&&!m&&(i=s(e,t,n,"px")),x=e.getCTM&&a1(e),(_||o==="%")&&(ai[t]||~t.indexOf("adius")))return y=x?e.getBBox()[c?"width":"height"]:e[f],Qt(_?i/y*d:i/100*y);if(u[c?"width":"height"]=d+(m?o:r),v=~t.indexOf("adius")||r==="em"&&e.appendChild&&!h?e:e.parentNode,x&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===Ri||!v.appendChild)&&(v=Ri.body),T=v._gsap,T&&_&&T.width&&c&&T.time===Er.time&&!T.uncache)return Qt(i/T.width*d);if(_&&(t==="height"||t==="width")){var w=e.style[t];e.style[t]=d+r,y=e[f],w?e.style[t]=w:Io(e,t)}else(_||o==="%")&&!EC[Ds(v,"display")]&&(u.position=Ds(e,"position")),v===e&&(u.position="static"),v.appendChild(xo),y=xo[f],v.removeChild(xo),u.position="absolute";return c&&_&&(T=Oo(v),T.time=Er.time,T.width=v[f]),Qt(m?y*i/d:y&&i?d/y*i:0)},ni=function(e,t,n,r){var i;return pm||Ap(),t in Ms&&t!=="transform"&&(t=Ms[t],~t.indexOf(",")&&(t=t.split(",")[0])),ai[t]&&t!=="transform"?(i=pu(e,r),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:bh(Ds(e,or))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||r||~(i+"").indexOf("calc("))&&(i=Ch[t]&&Ch[t](e,t,n)||Ds(e,t)||xy(e,t)||(t==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Vi(e,t,i,n)+n:i},CC=function(e,t,n,r){if(!n||n==="none"){var i=qa(t,e,1),o=i&&Ds(e,i,1);o&&o!==n?(t=i,n=o):t==="borderColor"&&(n=Ds(e,"borderTopColor"))}var u=new ir(this._pt,e.style,t,0,1,Jy),c=0,h=0,f,d,m,_,y,v,T,x,w,O,C,E;if(u.b=n,u.e=r,n+="",r+="",r==="auto"&&(v=e.style[t],e.style[t]=r,r=Ds(e,t)||r,v?e.style[t]=v:Io(e,t)),f=[n,r],Gy(f),n=f[0],r=f[1],m=n.match(Oa)||[],E=r.match(Oa)||[],E.length){for(;d=Oa.exec(r);)T=d[0],w=r.substring(c,d.index),y?y=(y+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(y=1),T!==(v=m[h++]||"")&&(_=parseFloat(v)||0,C=v.substr((_+"").length),T.charAt(1)==="="&&(T=Pa(_,T)+C),x=parseFloat(T),O=T.substr((x+"").length),c=Oa.lastIndex-O.length,O||(O=O||Or.units[t]||C,c===r.length&&(r+=O,u.e+=O)),C!==O&&(_=Vi(e,t,v,O)||0),u._pt={_next:u._pt,p:w||h===1?w:",",s:_,c:x-_,m:y&&y<4||t==="zIndex"?Math.round:0});u.c=c<r.length?r.substring(c,r.length):""}else u.r=t==="display"&&r==="none"?n1:t1;return _y.test(r)&&(u.e=0),this._pt=u,u},Dv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},bC=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=Dv[n]||n,t[1]=Dv[r]||r,t.join(" ")},OC=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,i=t.u,o=n._gsap,u,c,h;if(i==="all"||i===!0)r.cssText="",c=1;else for(i=i.split(","),h=i.length;--h>-1;)u=i[h],ai[u]&&(c=1,u=u==="transformOrigin"?or:Ft),Io(n,u);c&&(Io(n,Ft),o&&(o.svg&&n.removeAttribute("transform"),pu(n,1),o.uncache=1,r1(r)))}},Ch={clearProps:function(e,t,n,r,i){if(i.data!=="isFromStart"){var o=e._pt=new ir(e._pt,t,n,0,0,OC);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},du=[1,0,0,1,0,0],l1={},u1=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Pv=function(e){var t=Ds(e,Ft);return u1(t)?du:t.substr(7).match(gy).map(Qt)},_m=function(e,t){var n=e._gsap||Oo(e),r=e.style,i=Pv(e),o,u,c,h;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?du:i):(i===du&&!e.offsetParent&&e!==Ra&&!n.svg&&(c=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(h=1,u=e.nextElementSibling,Ra.appendChild(e)),i=Pv(e),c?r.display=c:Io(e,"display"),h&&(u?o.insertBefore(e,u):o?o.appendChild(e):Ra.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},Mp=function(e,t,n,r,i,o){var u=e._gsap,c=i||_m(e,!0),h=u.xOrigin||0,f=u.yOrigin||0,d=u.xOffset||0,m=u.yOffset||0,_=c[0],y=c[1],v=c[2],T=c[3],x=c[4],w=c[5],O=t.split(" "),C=parseFloat(O[0])||0,E=parseFloat(O[1])||0,k,A,M,D;n?c!==du&&(A=_*T-y*v)&&(M=C*(T/A)+E*(-v/A)+(v*w-T*x)/A,D=C*(-y/A)+E*(_/A)-(_*w-y*x)/A,C=M,E=D):(k=o1(e),C=k.x+(~O[0].indexOf("%")?C/100*k.width:C),E=k.y+(~(O[1]||O[0]).indexOf("%")?E/100*k.height:E)),r||r!==!1&&u.smooth?(x=C-h,w=E-f,u.xOffset=d+(x*_+w*v)-x,u.yOffset=m+(x*y+w*T)-w):u.xOffset=u.yOffset=0,u.xOrigin=C,u.yOrigin=E,u.smooth=!!r,u.origin=t,u.originIsAbsolute=!!n,e.style[or]="0px 0px",o&&(Ii(o,u,"xOrigin",h,C),Ii(o,u,"yOrigin",f,E),Ii(o,u,"xOffset",d,u.xOffset),Ii(o,u,"yOffset",m,u.yOffset)),e.setAttribute("data-svg-origin",C+" "+E)},pu=function(e,t){var n=e._gsap||new qy(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,i=n.scaleX<0,o="px",u="deg",c=getComputedStyle(e),h=Ds(e,or)||"0",f,d,m,_,y,v,T,x,w,O,C,E,k,A,M,D,U,R,P,F,B,q,X,J,H,z,W,N,L,K,ee,Y;return f=d=m=v=T=x=w=O=C=0,_=y=1,n.svg=!!(e.getCTM&&a1(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[Ft]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Ft]!=="none"?c[Ft]:"")),r.scale=r.rotate=r.translate="none"),A=_m(e,n.svg),n.svg&&(n.uncache?(H=e.getBBox(),h=n.xOrigin-H.x+"px "+(n.yOrigin-H.y)+"px",J=""):J=!t&&e.getAttribute("data-svg-origin"),Mp(e,J||h,!!J||n.originIsAbsolute,n.smooth!==!1,A)),E=n.xOrigin||0,k=n.yOrigin||0,A!==du&&(R=A[0],P=A[1],F=A[2],B=A[3],f=q=A[4],d=X=A[5],A.length===6?(_=Math.sqrt(R*R+P*P),y=Math.sqrt(B*B+F*F),v=R||P?ya(P,R)*yo:0,w=F||B?ya(F,B)*yo+v:0,w&&(y*=Math.abs(Math.cos(w*Ia))),n.svg&&(f-=E-(E*R+k*F),d-=k-(E*P+k*B))):(Y=A[6],K=A[7],W=A[8],N=A[9],L=A[10],ee=A[11],f=A[12],d=A[13],m=A[14],M=ya(Y,L),T=M*yo,M&&(D=Math.cos(-M),U=Math.sin(-M),J=q*D+W*U,H=X*D+N*U,z=Y*D+L*U,W=q*-U+W*D,N=X*-U+N*D,L=Y*-U+L*D,ee=K*-U+ee*D,q=J,X=H,Y=z),M=ya(-F,L),x=M*yo,M&&(D=Math.cos(-M),U=Math.sin(-M),J=R*D-W*U,H=P*D-N*U,z=F*D-L*U,ee=B*U+ee*D,R=J,P=H,F=z),M=ya(P,R),v=M*yo,M&&(D=Math.cos(M),U=Math.sin(M),J=R*D+P*U,H=q*D+X*U,P=P*D-R*U,X=X*D-q*U,R=J,q=H),T&&Math.abs(T)+Math.abs(v)>359.9&&(T=v=0,x=180-x),_=Qt(Math.sqrt(R*R+P*P+F*F)),y=Qt(Math.sqrt(X*X+Y*Y)),M=ya(q,X),w=Math.abs(M)>2e-4?M*yo:0,C=ee?1/(ee<0?-ee:ee):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!u1(Ds(e,Ft)),J&&e.setAttribute("transform",J))),Math.abs(w)>90&&Math.abs(w)<270&&(i?(_*=-1,w+=v<=0?180:-180,v+=v<=0?180:-180):(y*=-1,w+=w<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=Qt(_),n.scaleY=Qt(y),n.rotation=Qt(v)+u,n.rotationX=Qt(T)+u,n.rotationY=Qt(x)+u,n.skewX=w+u,n.skewY=O+u,n.transformPerspective=C+o,(n.zOrigin=parseFloat(h.split(" ")[2])||!t&&n.zOrigin||0)&&(r[or]=bh(h)),n.xOffset=n.yOffset=0,n.force3D=Or.force3D,n.renderTransform=n.svg?AC:i1?c1:kC,n.uncache=0,n},bh=function(e){return(e=e.split(" "))[0]+" "+e[1]},Jd=function(e,t,n){var r=Dn(t);return Qt(parseFloat(t)+parseFloat(Vi(e,"x",n+"px",r)))+r},kC=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,c1(e,t)},_o="0deg",Kl="0px",vo=") ",c1=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,u=n.y,c=n.z,h=n.rotation,f=n.rotationY,d=n.rotationX,m=n.skewX,_=n.skewY,y=n.scaleX,v=n.scaleY,T=n.transformPerspective,x=n.force3D,w=n.target,O=n.zOrigin,C="",E=x==="auto"&&e&&e!==1||x===!0;if(O&&(d!==_o||f!==_o)){var k=parseFloat(f)*Ia,A=Math.sin(k),M=Math.cos(k),D;k=parseFloat(d)*Ia,D=Math.cos(k),o=Jd(w,o,A*D*-O),u=Jd(w,u,-Math.sin(k)*-O),c=Jd(w,c,M*D*-O+O)}T!==Kl&&(C+="perspective("+T+vo),(r||i)&&(C+="translate("+r+"%, "+i+"%) "),(E||o!==Kl||u!==Kl||c!==Kl)&&(C+=c!==Kl||E?"translate3d("+o+", "+u+", "+c+") ":"translate("+o+", "+u+vo),h!==_o&&(C+="rotate("+h+vo),f!==_o&&(C+="rotateY("+f+vo),d!==_o&&(C+="rotateX("+d+vo),(m!==_o||_!==_o)&&(C+="skew("+m+", "+_+vo),(y!==1||v!==1)&&(C+="scale("+y+", "+v+vo),w.style[Ft]=C||"translate(0, 0)"},AC=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,u=n.y,c=n.rotation,h=n.skewX,f=n.skewY,d=n.scaleX,m=n.scaleY,_=n.target,y=n.xOrigin,v=n.yOrigin,T=n.xOffset,x=n.yOffset,w=n.forceCSS,O=parseFloat(o),C=parseFloat(u),E,k,A,M,D;c=parseFloat(c),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,c+=f),c||h?(c*=Ia,h*=Ia,E=Math.cos(c)*d,k=Math.sin(c)*d,A=Math.sin(c-h)*-m,M=Math.cos(c-h)*m,h&&(f*=Ia,D=Math.tan(h-f),D=Math.sqrt(1+D*D),A*=D,M*=D,f&&(D=Math.tan(f),D=Math.sqrt(1+D*D),E*=D,k*=D)),E=Qt(E),k=Qt(k),A=Qt(A),M=Qt(M)):(E=d,M=m,k=A=0),(O&&!~(o+"").indexOf("px")||C&&!~(u+"").indexOf("px"))&&(O=Vi(_,"x",o,"px"),C=Vi(_,"y",u,"px")),(y||v||T||x)&&(O=Qt(O+y-(y*E+v*A)+T),C=Qt(C+v-(y*k+v*M)+x)),(r||i)&&(D=_.getBBox(),O=Qt(O+r/100*D.width),C=Qt(C+i/100*D.height)),D="matrix("+E+","+k+","+A+","+M+","+O+","+C+")",_.setAttribute("transform",D),w&&(_.style[Ft]=D)},MC=function(e,t,n,r,i){var o=360,u=vn(i),c=parseFloat(i)*(u&&~i.indexOf("rad")?yo:1),h=c-r,f=r+h+"deg",d,m;return u&&(d=i.split("_")[1],d==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),d==="cw"&&h<0?h=(h+o*Ov)%o-~~(h/o)*o:d==="ccw"&&h>0&&(h=(h-o*Ov)%o-~~(h/o)*o)),e._pt=m=new ir(e._pt,t,n,r,h,dC),m.e=f,m.u="deg",e._props.push(n),m},Rv=function(e,t){for(var n in t)e[n]=t[n];return e},DC=function(e,t,n){var r=Rv({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=n.style,u,c,h,f,d,m,_,y;r.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[Ft]=t,u=pu(n,1),Io(n,Ft),n.setAttribute("transform",h)):(h=getComputedStyle(n)[Ft],o[Ft]=t,u=pu(n,1),o[Ft]=h);for(c in ai)h=r[c],f=u[c],h!==f&&i.indexOf(c)<0&&(_=Dn(h),y=Dn(f),d=_!==y?Vi(n,c,h,y):parseFloat(h),m=parseFloat(f),e._pt=new ir(e._pt,u,c,d,m-d,Op),e._pt.u=y||0,e._props.push(c));Rv(u,r)};sr("padding,margin,Width,Radius",function(s,e){var t="Top",n="Right",r="Bottom",i="Left",o=(e<3?[t,n,r,i]:[t+i,t+n,r+n,r+i]).map(function(u){return e<2?s+u:"border"+u+s});Ch[e>1?"border"+s:s]=function(u,c,h,f,d){var m,_;if(arguments.length<4)return m=o.map(function(y){return ni(u,y,h)}),_=m.join(" "),_.split(m[0]).length===5?m[0]:_;m=(f+"").split(" "),_={},o.forEach(function(y,v){return _[y]=m[v]=m[v]||m[(v-1)/2|0]}),u.init(c,_,d)}});var h1={name:"css",register:Ap,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o=this._props,u=e.style,c=n.vars.startAt,h,f,d,m,_,y,v,T,x,w,O,C,E,k,A,M;pm||Ap(),this.styles=this.styles||s1(e),M=this.styles.props,this.tween=n;for(v in t)if(v!=="autoRound"&&(f=t[v],!(xr[v]&&Yy(v,t,n,r,e,i)))){if(_=typeof f,y=Ch[v],_==="function"&&(f=f.call(n,r,e,i),_=typeof f),_==="string"&&~f.indexOf("random(")&&(f=cu(f)),y)y(this,e,v,f,n)&&(A=1);else if(v.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(v)+"").trim(),f+="",Fi.lastIndex=0,Fi.test(h)||(T=Dn(h),x=Dn(f)),x?T!==x&&(h=Vi(e,v,h,x)+x):T&&(f+=T),this.add(u,"setProperty",h,f,r,i,0,0,v),o.push(v),M.push(v,0,u[v]);else if(_!=="undefined"){if(c&&v in c?(h=typeof c[v]=="function"?c[v].call(n,r,e,i):c[v],vn(h)&&~h.indexOf("random(")&&(h=cu(h)),Dn(h+"")||h==="auto"||(h+=Or.units[v]||Dn(ni(e,v))||""),(h+"").charAt(1)==="="&&(h=ni(e,v))):h=ni(e,v),m=parseFloat(h),w=_==="string"&&f.charAt(1)==="="&&f.substr(0,2),w&&(f=f.substr(2)),d=parseFloat(f),v in Ms&&(v==="autoAlpha"&&(m===1&&ni(e,"visibility")==="hidden"&&d&&(m=0),M.push("visibility",0,u.visibility),Ii(this,u,"visibility",m?"inherit":"hidden",d?"inherit":"hidden",!d)),v!=="scale"&&v!=="transform"&&(v=Ms[v],~v.indexOf(",")&&(v=v.split(",")[0]))),O=v in ai,O){if(this.styles.save(v),C||(E=e._gsap,E.renderTransform&&!t.parseTransform||pu(e,t.parseTransform),k=t.smoothOrigin!==!1&&E.smooth,C=this._pt=new ir(this._pt,u,Ft,0,1,E.renderTransform,E,0,-1),C.dep=1),v==="scale")this._pt=new ir(this._pt,E,"scaleY",E.scaleY,(w?Pa(E.scaleY,w+d):d)-E.scaleY||0,Op),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){M.push(or,0,u[or]),f=bC(f),E.svg?Mp(e,f,0,k,0,this):(x=parseFloat(f.split(" ")[2])||0,x!==E.zOrigin&&Ii(this,E,"zOrigin",E.zOrigin,x),Ii(this,u,v,bh(h),bh(f)));continue}else if(v==="svgOrigin"){Mp(e,f,1,k,0,this);continue}else if(v in l1){MC(this,E,v,m,w?Pa(m,w+f):f);continue}else if(v==="smoothOrigin"){Ii(this,E,"smooth",E.smooth,f);continue}else if(v==="force3D"){E[v]=f;continue}else if(v==="transform"){DC(this,f,e);continue}}else v in u||(v=qa(v)||v);if(O||(d||d===0)&&(m||m===0)&&!fC.test(f)&&v in u)T=(h+"").substr((m+"").length),d||(d=0),x=Dn(f)||(v in Or.units?Or.units[v]:T),T!==x&&(m=Vi(e,v,h,x)),this._pt=new ir(this._pt,O?E:u,v,m,(w?Pa(m,w+d):d)-m,!O&&(x==="px"||v==="zIndex")&&t.autoRound!==!1?mC:Op),this._pt.u=x||0,T!==x&&x!=="%"&&(this._pt.b=h,this._pt.r=pC);else if(v in u)CC.call(this,e,v,h,w?w+f:f);else if(v in e)this.add(e,v,h||e[v],w?w+f:f,r,i);else if(v!=="parseTransform"){im(v,f);continue}O||(v in u?M.push(v,0,u[v]):M.push(v,1,h||e[v])),o.push(v)}}A&&$y(this)},render:function(e,t){if(t.tween._time||!mm())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:ni,aliases:Ms,getSetter:function(e,t,n){var r=Ms[t];return r&&r.indexOf(",")<0&&(t=r),t in ai&&t!==or&&(e._gsap.x||ni(e,"x"))?n&&bv===n?t==="scale"?yC:vC:(bv=n||{})&&(t==="scale"?TC:SC):e.style&&!nm(e.style[t])?gC:~t.indexOf("-")?_C:fm(e,t)},core:{_removeProperty:Io,_getMatrix:_m}};lr.utils.checkPrefix=qa;lr.core.getStyleSaver=s1;(function(s,e,t,n){var r=sr(s+","+e+","+t,function(i){ai[i]=1});sr(e,function(i){Or.units[i]="deg",l1[i]=1}),Ms[r[13]]=s+","+e,sr(n,function(i){var o=i.split(":");Ms[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");sr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Or.units[s]="px"});lr.registerPlugin(h1);var PC=lr.registerPlugin(h1)||lr;PC.core.Tween;const f1="14.8.49",Iv=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),Uv=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Dp=(s,e)=>({startTime:e,type:"setValue",value:s}),d1=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),p1=(s,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-s)/r),Aa=s=>s.type==="exponentialRampToValue",Oh=s=>s.type==="linearRampToValue",Di=s=>Aa(s)||Oh(s),vm=s=>s.type==="setValue",ti=s=>s.type==="setValueCurve",kh=(s,e,t,n)=>{const r=s[e];return r===void 0?n:Di(r)||vm(r)?r.value:ti(r)?r.values[r.values.length-1]:p1(t,kh(s,e-1,r.startTime,n),r)},Nv=(s,e,t,n,r)=>t===void 0?[n.insertTime,r]:Di(t)?[t.endTime,t.value]:vm(t)?[t.startTime,t.value]:ti(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,kh(s,e-1,t.startTime,r)],Pp=s=>s.type==="cancelAndHold",Rp=s=>s.type==="cancelScheduledValues",Ai=s=>Pp(s)||Rp(s)?s.cancelTime:Aa(s)||Oh(s)?s.endTime:s.startTime,Fv=(s,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((s-e)/(n-e)):0,Lv=(s,e,t,{endTime:n,value:r})=>t+(s-e)/(n-e)*(r-t),RC=(s,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?s[t]:(1-(e-t))*s[t]+(1-(n-e))*s[n]},IC=(s,{duration:e,startTime:t,values:n})=>{const r=(s-t)/e*(n.length-1);return RC(n,r)},oh=s=>s.type==="setTarget";class UC{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Ai(e);if(Pp(e)||Rp(e)){const n=this._automationEvents.findIndex(i=>Rp(e)&&ti(i)?i.startTime+i.duration>=t:Ai(i)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Pp(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Di(r)){if(i!==void 0&&oh(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:ti(i)?i.startTime+i.duration:Ai(i),u=i===void 0?this._defaultValue:ti(i)?i.values[i.values.length-1]:i.value,c=Aa(r)?Fv(t,o,u,r):Lv(t,o,u,r),h=Aa(r)?Iv(c,t,this._currenTime):Uv(c,t,this._currenTime);this._automationEvents.push(h)}if(i!==void 0&&oh(i)&&this._automationEvents.push(Dp(this.getValue(t),t)),i!==void 0&&ti(i)&&i.startTime+i.duration>t){const o=t-i.startTime,u=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*u)),h=o/(c-1)*u,f=i.values.slice(0,c);if(h<1)for(let d=1;d<c;d+=1){const m=h*d%1;f[d]=i.values[d-1]*(1-m)+i.values[d]*m}this._automationEvents[this._automationEvents.length-1]=d1(f,i.startTime,o)}}}else{const n=this._automationEvents.findIndex(o=>Ai(o)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&ti(r)&&Ai(r)+r.duration>t)return!1;const i=Aa(e)?Iv(e.value,e.endTime,this._currenTime):Oh(e)?Uv(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(i);else{if(ti(e)&&t+e.duration>Ai(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Ai(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];oh(r)&&n.unshift(Dp(kh(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Ai(o)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&oh(i)&&(n===void 0||!Di(n)||n.insertTime>e))return p1(e,kh(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&vm(i)&&(n===void 0||!Di(n)))return i.value;if(i!==void 0&&ti(i)&&(n===void 0||!Di(n)||i.startTime+i.duration>e))return e<i.startTime+i.duration?IC(e,i):i.values[i.values.length-1];if(i!==void 0&&Di(i)&&(n===void 0||!Di(n)))return i.value;if(n!==void 0&&Aa(n)){const[o,u]=Nv(this._automationEvents,r,i,n,this._defaultValue);return Fv(e,o,u,n)}if(n!==void 0&&Oh(n)){const[o,u]=Nv(this._automationEvents,r,i,n,this._defaultValue);return Lv(e,o,u,n)}return this._defaultValue}}const NC=s=>({cancelTime:s,type:"cancelAndHold"}),FC=s=>({cancelTime:s,type:"cancelScheduledValues"}),LC=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),zC=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),BC=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),VC=()=>new DOMException("","AbortError"),GC=s=>(e,t,[n,r,i],o)=>{s(e[r],[t,n,i],u=>u[0]===t&&u[1]===n,o)},WC=s=>(e,t,n)=>{const r=[];for(let i=0;i<n.numberOfInputs;i+=1)r.push(new Set);s.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},HC=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Ya=new WeakSet,m1=new WeakMap,ym=new WeakMap,g1=new WeakMap,Tm=new WeakMap,uf=new WeakMap,_1=new WeakMap,Ip=new WeakMap,Up=new WeakMap,Np=new WeakMap,v1={construct(){return v1}},jC=s=>{try{const e=new Proxy(s,v1);new e}catch{return!1}return!0},zv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Bv=(s,e)=>{const t=[];let n=s.replace(/^[\s]+/,""),r=n.match(zv);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(zv)}return[t.join(";"),n]},Vv=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Gv=s=>{if(!jC(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},qC=(s,e,t,n,r,i,o,u,c,h,f,d,m)=>{let _=0;return(y,v,T={credentials:"omit"})=>{const x=f.get(y);if(x!==void 0&&x.has(v))return Promise.resolve();const w=h.get(y);if(w!==void 0){const E=w.get(v);if(E!==void 0)return E}const O=i(y),C=O.audioWorklet===void 0?r(v).then(([E,k])=>{const[A,M]=Bv(E,k),D=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${M}
})})(window,'_AWGS')`;return t(D)}).then(()=>{const E=m._AWGS.pop();if(E===void 0)throw new SyntaxError;n(O.currentTime,O.sampleRate,()=>E(class{},void 0,(k,A)=>{if(k.trim()==="")throw e();const M=Up.get(O);if(M!==void 0){if(M.has(k))throw e();Gv(A),Vv(A.parameterDescriptors),M.set(k,A)}else Gv(A),Vv(A.parameterDescriptors),Up.set(O,new Map([[k,A]]))},O.sampleRate,void 0,void 0))}):Promise.all([r(v),Promise.resolve(s(d,d))]).then(([[E,k],A])=>{const M=_+1;_=M;const[D,U]=Bv(E,k),B=`${D};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${M}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([B],{type:"application/javascript; charset=utf-8"}),X=URL.createObjectURL(q);return O.audioWorklet.addModule(X,T).then(()=>{if(u(O))return O;const J=o(O);return J.audioWorklet.addModule(X,T).then(()=>J)}).then(J=>{if(c===null)throw new SyntaxError;try{new c(J,`__sac${M}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(X))});return w===void 0?h.set(y,new Map([[v,C]])):w.set(v,C),C.then(()=>{const E=f.get(y);E===void 0?f.set(y,new Set([v])):E.add(v)}).finally(()=>{const E=h.get(y);E!==void 0&&E.delete(v)}),C}},as=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},cf=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return s.delete(n),n},y1=(s,e,t,n)=>{const r=as(s,e),i=cf(r,o=>o[0]===t&&o[1]===n);return r.size===0&&s.delete(e),i},Bu=s=>as(_1,s),Xa=s=>{if(Ya.has(s))throw new Error("The AudioNode is already stored.");Ya.add(s),Bu(s).forEach(e=>e(!0))},T1=s=>"port"in s,Vu=s=>{if(!Ya.has(s))throw new Error("The AudioNode is not stored.");Ya.delete(s),Bu(s).forEach(e=>e(!1))},Fp=(s,e)=>{!T1(s)&&e.every(t=>t.size===0)&&Vu(s)},YC=(s,e,t,n,r,i,o,u,c,h,f,d,m)=>{const _=new WeakMap;return(y,v,T,x,w)=>{const{activeInputs:O,passiveInputs:C}=i(v),{outputs:E}=i(y),k=u(y),A=M=>{const D=c(v),U=c(y);if(M){const R=y1(C,y,T,x);s(O,y,R,!1),!w&&!d(y)&&t(U,D,T,x),m(v)&&Xa(v)}else{const R=n(O,y,T,x);e(C,x,R,!1),!w&&!d(y)&&r(U,D,T,x);const P=o(v);if(P===0)f(v)&&Fp(v,O);else{const F=_.get(v);F!==void 0&&clearTimeout(F),_.set(v,setTimeout(()=>{f(v)&&Fp(v,O)},P*1e3))}}};return h(E,[v,T,x],M=>M[0]===v&&M[1]===T&&M[2]===x,!0)?(k.add(A),f(y)?s(O,y,[T,x,A],!0):e(C,x,[y,T,A],!0),!0):!1}},XC=s=>(e,t,[n,r,i],o)=>{const u=e.get(n);u===void 0?e.set(n,new Set([[r,t,i]])):s(u,[r,t,i],c=>c[0]===r&&c[1]===t,o)},ZC=s=>(e,t)=>{const n=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},QC=s=>(e,t)=>{s(e).add(t)},KC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},JC=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=r(u),f={...KC,...c},d=n(h,f),m=i(h)?e():null;super(u,!1,d,m),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(u){this._nativeAnalyserNode.fftSize=u}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(u){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=u,!(u>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(u){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=u,!(this._nativeAnalyserNode.maxDecibels>u))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(u){this._nativeAnalyserNode.smoothingTimeConstant=u}getByteFrequencyData(u){this._nativeAnalyserNode.getByteFrequencyData(u)}getByteTimeDomainData(u){this._nativeAnalyserNode.getByteTimeDomainData(u)}getFloatFrequencyData(u){this._nativeAnalyserNode.getFloatFrequencyData(u)}getFloatTimeDomainData(u){this._nativeAnalyserNode.getFloatTimeDomainData(u)}},Un=(s,e)=>s.context===e,$C=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let u=e(i);if(!Un(u,o)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,fftSize:u.fftSize,maxDecibels:u.maxDecibels,minDecibels:u.minDecibels,smoothingTimeConstant:u.smoothingTimeConstant};u=s(o,h)}return n.set(o,u),await t(i,o,u),u};return{render(i,o){const u=n.get(o);return u!==void 0?Promise.resolve(u):r(i,o)}}},Ah=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Us=()=>new DOMException("","IndexSizeError"),Sm=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(n){throw n.code===12?Us():n}})(s.getChannelData)},eb={numberOfChannels:1},tb=(s,e,t,n,r,i,o,u)=>{let c=null;return class S1{constructor(f){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:m,sampleRate:_}={...eb,...f};c===null&&(c=new r(1,1,44100));const y=n!==null&&e(i,i)?new n({length:d,numberOfChannels:m,sampleRate:_}):c.createBuffer(m,d,_);if(y.numberOfChannels===0)throw t();return typeof y.copyFromChannel!="function"?(o(y),Sm(y)):e(Ah,()=>Ah(y))||u(y),s.add(y),y}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===S1.prototype||s.has(f)}}},nr=-34028234663852886e22,jn=-nr,si=s=>Ya.has(s),nb={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},rb=(s,e,t,n,r,i,o,u)=>class extends s{constructor(h,f){const d=i(h),m={...nb,...f},_=r(d,m),y=o(d),v=y?e():null;super(h,!1,_,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=_,this._onended=null,this._playbackRate=t(this,y,_.playbackRate,jn,nr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeAudioBufferSourceNode.onended=f;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===f?h:d}get playbackRate(){return this._playbackRate}start(h=0,f=0,d){if(this._nativeAudioBufferSourceNode.start(h,f,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[h,f]:[h,f,d]),this.context.state!=="closed"){Xa(this);const m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),si(this)&&Vu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},sb=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,u=null;const c=async(h,f)=>{let d=t(h);const m=Un(d,f);if(!m){const _={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(f,_),o!==null&&d.start(...o),u!==null&&d.stop(u)}return i.set(f,d),m?await s(f,h.playbackRate,d.playbackRate):await n(f,h.playbackRate,d.playbackRate),await r(h,f,d),d};return{set start(h){o=h},set stop(h){u=h},render(h,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):c(h,f)}}},ib=s=>"playbackRate"in s,ob=s=>"frequency"in s&&"gain"in s,ab=s=>"offset"in s,lb=s=>!("frequency"in s)&&"gain"in s,ub=s=>"detune"in s&&"frequency"in s,cb=s=>"pan"in s,Yn=s=>as(m1,s),Gu=s=>as(g1,s),Lp=(s,e)=>{const{activeInputs:t}=Yn(s);t.forEach(r=>r.forEach(([i])=>{e.includes(s)||Lp(i,[...e,s])}));const n=ib(s)?[s.playbackRate]:T1(s)?Array.from(s.parameters.values()):ob(s)?[s.Q,s.detune,s.frequency,s.gain]:ab(s)?[s.offset]:lb(s)?[s.gain]:ub(s)?[s.detune,s.frequency]:cb(s)?[s.pan]:[];for(const r of n){const i=Gu(r);i!==void 0&&i.activeInputs.forEach(([o])=>Lp(o,e))}si(s)&&Vu(s)},w1=s=>{Lp(s.destination,[])},hb=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),fb=(s,e,t,n,r,i,o,u,c)=>class extends s{constructor(f={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(f)}catch(y){throw y.code===12&&y.message==="sampleRate is not in range"?t():y}if(d===null)throw n();if(!hb(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&d.sampleRate!==f.sampleRate)throw t();super(d,2);const{latencyHint:m}=f,{sampleRate:_}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:m==="balanced"?512/_:m==="interactive"||m===void 0?256/_:m==="playback"?1024/_:Math.max(2,Math.min(128,Math.round(m*_/128)))*128/_,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const y=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",y)};d.addEventListener("statechange",y)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),w1(this)}))}createMediaElementSource(f){return new r(this,{mediaElement:f})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(f){return new o(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new u(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,d)=>{const m=()=>{this._nativeAudioContext.removeEventListener("statechange",m),this._nativeAudioContext.state==="running"?f():this.resume().then(f,d)};this._nativeAudioContext.addEventListener("statechange",m)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?e():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?e():f})}},db=(s,e,t,n,r,i,o,u)=>class extends s{constructor(h,f){const d=i(h),m=o(d),_=r(d,f,m),y=m?e(u):null;super(h,!1,_,y),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=_}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},pb=s=>{const e=new WeakMap,t=async(n,r)=>{const i=r.destination;return e.set(r,i),await s(n,r,i),i};return{render(n,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(n,r)}}},mb=(s,e,t,n,r,i,o,u)=>(c,h)=>{const f=h.listener,d=()=>{const E=new Float32Array(1),k=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(h);let M=!1,D=[0,0,-1,0,1,0],U=[0,0,0];const R=()=>{if(M)return;M=!0;const q=n(h,256,9,0);q.onaudioprocess=({inputBuffer:X})=>{const J=[i(X,E,0),i(X,E,1),i(X,E,2),i(X,E,3),i(X,E,4),i(X,E,5)];J.some((z,W)=>z!==D[W])&&(f.setOrientation(...J),D=J);const H=[i(X,E,6),i(X,E,7),i(X,E,8)];H.some((z,W)=>z!==U[W])&&(f.setPosition(...H),U=H)},k.connect(q)},P=q=>X=>{X!==D[q]&&(D[q]=X,f.setOrientation(...D))},F=q=>X=>{X!==U[q]&&(U[q]=X,f.setPosition(...U))},B=(q,X,J)=>{const H=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X});H.connect(k,0,q),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return X}});const z=s({context:c},A,H.offset,jn,nr);return u(z,"value",W=>()=>W.call(z),W=>N=>{try{W.call(z,N)}catch(L){if(L.code!==9)throw L}R(),A&&J(N)}),z.cancelAndHoldAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.cancelAndHoldAtTime),z.cancelScheduledValues=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.cancelScheduledValues),z.exponentialRampToValueAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.exponentialRampToValueAtTime),z.linearRampToValueAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.linearRampToValueAtTime),z.setTargetAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.setTargetAtTime),z.setValueAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.setValueAtTime),z.setValueCurveAtTime=(W=>A?()=>{throw r()}:(...N)=>{const L=W.apply(z,N);return R(),L})(z.setValueCurveAtTime),z};return{forwardX:B(0,0,P(0)),forwardY:B(1,0,P(1)),forwardZ:B(2,-1,P(2)),positionX:B(6,0,F(0)),positionY:B(7,0,F(1)),positionZ:B(8,0,F(2)),upX:B(3,0,P(3)),upY:B(4,1,P(4)),upZ:B(5,0,P(5))}},{forwardX:m,forwardY:_,forwardZ:y,positionX:v,positionY:T,positionZ:x,upX:w,upY:O,upZ:C}=f.forwardX===void 0?d():f;return{get forwardX(){return m},get forwardY(){return _},get forwardZ(){return y},get positionX(){return v},get positionY(){return T},get positionZ(){return x},get upX(){return w},get upY(){return O},get upZ(){return C}}},Mh=s=>"context"in s,Wu=s=>Mh(s[0]),Go=(s,e,t,n)=>{for(const r of s)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},Wv=(s,e,[t,n],r)=>{Go(s,[e,t,n],i=>i[0]===e&&i[1]===t,r)},Hv=(s,[e,t,n],r)=>{const i=s.get(e);i===void 0?s.set(e,new Set([[t,n]])):Go(i,[t,n],o=>o[0]===t,r)},nl=s=>"inputs"in s,Dh=(s,e,t,n)=>{if(nl(e)){const r=e.inputs[n];return s.connect(r,t,0),[r,t,0]}return s.connect(e,t,n),[e,t,n]},x1=(s,e,t)=>{for(const n of s)if(n[0]===e&&n[1]===t)return s.delete(n),n;return null},gb=(s,e,t)=>cf(s,n=>n[0]===e&&n[1]===t),E1=(s,e)=>{if(!Bu(s).delete(e))throw new Error("Missing the expected event listener.")},C1=(s,e,t)=>{const n=as(s,e),r=cf(n,i=>i[0]===t);return n.size===0&&s.delete(e),r},Ph=(s,e,t,n)=>{nl(e)?s.disconnect(e.inputs[n],t,0):s.disconnect(e,t,n)},At=s=>as(ym,s),mu=s=>as(Tm,s),Uo=s=>Ip.has(s),mh=s=>!Ya.has(s),jv=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=s.createScriptProcessor(256,1,1),r=s.createGain(),i=s.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const u=s.createBufferSource();u.buffer=i,u.loop=!0,u.connect(n).connect(s.destination),u.connect(r),u.disconnect(r),n.onaudioprocess=c=>{const h=c.inputBuffer.getChannelData(0);Array.prototype.some.call(h,f=>f===1)?t(!0):t(!1),u.stop(),n.onaudioprocess=null,u.disconnect(n),n.disconnect(s.destination)},u.start()}}),$d=(s,e)=>{const t=new Map;for(const n of s)for(const r of n){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((n,r)=>e(r,n))},Rh=s=>"context"in s,_b=s=>{const e=new Map;s.connect=(t=>(n,r=0,i=0)=>{const o=Rh(n)?t(n,r,i):t(n,r),u=e.get(n);return u===void 0?e.set(n,[{input:i,output:r}]):u.every(c=>c.input!==i||c.output!==r)&&u.push({input:i,output:r}),o})(s.connect.bind(s)),s.disconnect=(t=>(n,r,i)=>{if(t.apply(s),n===void 0)e.clear();else if(typeof n=="number")for(const[o,u]of e){const c=u.filter(h=>h.output!==n);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(n))if(r===void 0)e.delete(n);else{const o=e.get(n);if(o!==void 0){const u=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));u.length===0?e.delete(n):e.set(n,u)}}for(const[o,u]of e)u.forEach(c=>{Rh(o)?s.connect(o,c.output,c.input):s.connect(o,c.output)})})(s.disconnect)},vb=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=Gu(e),{outputs:o}=Yn(s),u=Bu(s),c=h=>{const f=At(s),d=mu(e);if(h){const m=C1(i,s,t);Wv(r,s,m,!1),!n&&!Uo(s)&&f.connect(d,t)}else{const m=gb(r,s,t);Hv(i,m,!1),!n&&!Uo(s)&&f.disconnect(d,t)}};return Go(o,[e,t],h=>h[0]===e&&h[1]===t,!0)?(u.add(c),si(s)?Wv(r,s,[t,c],!0):Hv(i,[s,t,c],!0),!0):!1},yb=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=Yn(e),o=x1(r[n],s,t);return o===null?[y1(i,s,t,n)[2],!1]:[o[2],!0]},Tb=(s,e,t)=>{const{activeInputs:n,passiveInputs:r}=Gu(e),i=x1(n,s,t);return i===null?[C1(r,s,t)[1],!1]:[i[2],!0]},wm=(s,e,t,n,r)=>{const[i,o]=yb(s,t,n,r);if(i!==null&&(E1(s,i),o&&!e&&!Uo(s)&&Ph(At(s),At(t),n,r)),si(t)){const{activeInputs:u}=Yn(t);Fp(t,u)}},xm=(s,e,t,n)=>{const[r,i]=Tb(s,t,n);r!==null&&(E1(s,r),i&&!e&&!Uo(s)&&At(s).disconnect(mu(t),n))},Sb=(s,e)=>{const t=Yn(s),n=[];for(const r of t.outputs)Wu(r)?wm(s,e,...r):xm(s,e,...r),n.push(r[0]);return t.outputs.clear(),n},wb=(s,e,t)=>{const n=Yn(s),r=[];for(const i of n.outputs)i[1]===t&&(Wu(i)?wm(s,e,...i):xm(s,e,...i),r.push(i[0]),n.outputs.delete(i));return r},xb=(s,e,t,n,r)=>{const i=Yn(s);return Array.from(i.outputs).filter(o=>o[0]===t&&(n===void 0||o[1]===n)&&(r===void 0||o[2]===r)).map(o=>(Wu(o)?wm(s,e,...o):xm(s,e,...o),i.outputs.delete(o),o[0]))},Eb=(s,e,t,n,r,i,o,u,c,h,f,d,m,_,y,v)=>class extends h{constructor(x,w,O,C){super(O),this._context=x,this._nativeAudioNode=O;const E=f(x);d(E)&&t(jv,()=>jv(E,v))!==!0&&_b(O),ym.set(this,O),_1.set(this,new Set),x.state!=="closed"&&w&&Xa(this),s(this,C,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,w=0,O=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const C=f(this._context),E=y(C);if(m(x)||_(x))throw i();if(Mh(x)){const M=At(x);try{const U=Dh(this._nativeAudioNode,M,w,O),R=mh(this);(E||R)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!R&&mh(x)&&Xa(x)}catch(U){throw U.code===12?i():U}if(e(this,x,w,O,E)){const U=c([this],x);$d(U,n(E))}return x}const k=mu(x);if(k.name==="playbackRate"&&k.maxValue===1024)throw o();try{this._nativeAudioNode.connect(k,w),(E||mh(this))&&this._nativeAudioNode.disconnect(k,w)}catch(M){throw M.code===12?i():M}if(vb(this,x,w,E)){const M=c([this],x);$d(M,n(E))}}disconnect(x,w,O){let C;const E=f(this._context),k=y(E);if(x===void 0)C=Sb(this,k);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw r();C=wb(this,k,x)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||Mh(x)&&O!==void 0&&(O<0||O>=x.numberOfInputs))throw r();if(C=xb(this,k,x,w,O),C.length===0)throw i()}for(const A of C){const M=c([this],A);$d(M,u)}}},Cb=(s,e,t,n,r,i,o,u,c,h,f,d,m)=>(_,y,v,T=null,x=null)=>{const w=v.value,O=new UC(w),C=y?n(O):null,E={get defaultValue(){return w},get maxValue(){return T===null?v.maxValue:T},get minValue(){return x===null?v.minValue:x},get value(){return v.value},set value(k){v.value=k,E.setValueAtTime(k,_.context.currentTime)},cancelAndHoldAtTime(k){if(typeof v.cancelAndHoldAtTime=="function")C===null&&O.flush(_.context.currentTime),O.add(r(k)),v.cancelAndHoldAtTime(k);else{const A=Array.from(O).pop();C===null&&O.flush(_.context.currentTime),O.add(r(k));const M=Array.from(O).pop();v.cancelScheduledValues(k),A!==M&&M!==void 0&&(M.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(M.value,M.endTime):M.type==="linearRampToValue"?v.linearRampToValueAtTime(M.value,M.endTime):M.type==="setValue"?v.setValueAtTime(M.value,M.startTime):M.type==="setValueCurve"&&v.setValueCurveAtTime(M.values,M.startTime,M.duration))}return E},cancelScheduledValues(k){return C===null&&O.flush(_.context.currentTime),O.add(i(k)),v.cancelScheduledValues(k),E},exponentialRampToValueAtTime(k,A){if(k===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const M=_.context.currentTime;return C===null&&O.flush(M),Array.from(O).length===0&&(O.add(h(w,M)),v.setValueAtTime(w,M)),O.add(o(k,A)),v.exponentialRampToValueAtTime(k,A),E},linearRampToValueAtTime(k,A){const M=_.context.currentTime;return C===null&&O.flush(M),Array.from(O).length===0&&(O.add(h(w,M)),v.setValueAtTime(w,M)),O.add(u(k,A)),v.linearRampToValueAtTime(k,A),E},setTargetAtTime(k,A,M){return C===null&&O.flush(_.context.currentTime),O.add(c(k,A,M)),v.setTargetAtTime(k,A,M),E},setValueAtTime(k,A){return C===null&&O.flush(_.context.currentTime),O.add(h(k,A)),v.setValueAtTime(k,A),E},setValueCurveAtTime(k,A,M){const D=k instanceof Float32Array?k:new Float32Array(k);if(d!==null&&d.name==="webkitAudioContext"){const U=A+M,R=_.context.sampleRate,P=Math.ceil(A*R),F=Math.floor(U*R),B=F-P,q=new Float32Array(B);for(let J=0;J<B;J+=1){const H=(D.length-1)/M*((P+J)/R-A),z=Math.floor(H),W=Math.ceil(H);q[J]=z===W?D[z]:(1-(H-z))*D[z]+(1-(W-H))*D[W]}C===null&&O.flush(_.context.currentTime),O.add(f(q,A,M)),v.setValueCurveAtTime(q,A,M);const X=F/R;X<U&&m(E,q[q.length-1],X),m(E,D[D.length-1],U)}else C===null&&O.flush(_.context.currentTime),O.add(f(D,A,M)),v.setValueCurveAtTime(D,A,M);return E}};return t.set(E,v),e.set(E,_),s(E,C),E},bb=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:i}=t;e.setTargetAtTime(r,n,i)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,n)}else throw new Error("Can't apply an unknown automation.")}});class b1{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ob={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},kb=(s,e,t,n,r,i,o,u,c,h,f,d,m,_)=>class extends e{constructor(v,T,x){var w;const O=u(v),C=c(O),E=f({...Ob,...x});m(E);const k=Up.get(O),A=k==null?void 0:k.get(T),M=C||O.state!=="closed"?O:(w=o(O))!==null&&w!==void 0?w:O,D=r(M,C?null:v.baseLatency,h,T,A,E),U=C?n(T,E,A):null;super(v,!0,D,U);const R=[];D.parameters.forEach((F,B)=>{const q=t(this,C,F);R.push([B,q])}),this._nativeAudioWorkletNode=D,this._onprocessorerror=null,this._parameters=new b1(R),C&&s(O,this);const{activeInputs:P}=i(this);d(D,P)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){const T=typeof v=="function"?_(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=T;const x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===T?v:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Ih(s,e,t,n,r){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],n,r);else{const i=s.getChannelData(n);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const O1=(s,e,t,n,r)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],n,r):e[t].byteLength!==0&&s.getChannelData(n).set(e[t],r)},Uh=(s,e)=>{const t=[];for(let n=0;n<s;n+=1){const r=[],i=typeof e=="number"?e:e[n];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Ab=(s,e)=>{const t=as(Np,s),n=At(e);return as(t,n)},Mb=async(s,e,t,n,r,i,o)=>{const u=e===null?Math.ceil(s.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,h=r.reduce((T,x)=>T+x,0),f=h===0?null:t.createBuffer(h,u,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=Yn(s),m=await Ab(t,s),_=Uh(n.numberOfInputs,n.channelCount),y=Uh(n.numberOfOutputs,r),v=Array.from(s.parameters.keys()).reduce((T,x)=>({...T,[x]:new Float32Array(128)}),{});for(let T=0;T<u;T+=128){if(n.numberOfInputs>0&&e!==null)for(let x=0;x<n.numberOfInputs;x+=1)for(let w=0;w<n.channelCount;w+=1)Ih(e,_[x],w,w,T);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:x},w)=>{Ih(e,v,x,c+w,T)});for(let x=0;x<n.numberOfInputs;x+=1)for(let w=0;w<r[x];w+=1)y[x][w].byteLength===0&&(y[x][w]=new Float32Array(128));try{const x=_.map((O,C)=>d.activeInputs[C].size===0?[]:O),w=o(T/t.sampleRate,t.sampleRate,()=>m.process(x,y,v));if(f!==null)for(let O=0,C=0;O<n.numberOfOutputs;O+=1){for(let E=0;E<r[O];E+=1)O1(f,y[O],E,C+E,T);C+=r[O]}if(!w)break}catch(x){s.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return f},Db=(s,e,t,n,r,i,o,u,c,h,f,d,m,_,y,v)=>(T,x,w)=>{const O=new WeakMap;let C=null;const E=async(k,A)=>{let M=f(k),D=null;const U=Un(M,A),R=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(d===null){const P=R.reduce((X,J)=>X+J,0),F=r(A,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),B=[];for(let X=0;X<k.numberOfOutputs;X+=1)B.push(n(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[X]}));const q=o(A,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});q.connect=e.bind(null,B),q.disconnect=c.bind(null,B),D=[F,B,q]}else U||(M=new d(A,T));if(O.set(A,D===null?M:D[2]),D!==null){if(C===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=k.channelCount*k.numberOfInputs,H=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,z=J+H;C=Mb(k,z===0?null:await(async()=>{const N=new m(z,Math.ceil(k.context.length/128)*128,A.sampleRate),L=[],K=[];for(let ie=0;ie<x.numberOfInputs;ie+=1)L.push(o(N,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),K.push(r(N,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const ee=await Promise.all(Array.from(k.parameters.values()).map(async ie=>{const ne=i(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ie.value});return await _(N,ie,ne.offset),ne})),Y=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+H)});for(let ie=0;ie<x.numberOfInputs;ie+=1){L[ie].connect(K[ie]);for(let ne=0;ne<x.channelCount;ne+=1)K[ie].connect(Y,ne,ie*x.channelCount+ne)}for(const[ie,ne]of ee.entries())ne.connect(Y,0,J+ie),ne.start(0);return Y.connect(N.destination),await Promise.all(L.map(ie=>y(k,N,ie))),v(N)})(),A,x,R,w,h)}const P=await C,F=t(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[B,q,X]=D;P!==null&&(F.buffer=P,F.start(0)),F.connect(B);for(let J=0,H=0;J<k.numberOfOutputs;J+=1){const z=q[J];for(let W=0;W<R[J];W+=1)B.connect(z,H+W,W);H+=R[J]}return X}if(U)for(const[P,F]of k.parameters.entries())await s(A,F,M.parameters.get(P));else for(const[P,F]of k.parameters.entries())await _(A,F,M.parameters.get(P));return await y(k,A,M),M};return{render(k,A){u(A,k);const M=O.get(A);return M!==void 0?Promise.resolve(M):E(k,A)}}},Pb=(s,e,t,n,r,i,o,u,c,h,f,d,m,_,y,v,T,x,w,O)=>class extends y{constructor(E,k){super(E,k),this._nativeContext=E,this._audioWorklet=s===void 0?void 0:{addModule:(A,M)=>s(this,A,M)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(E,k,A){return new t({length:k,numberOfChannels:E,sampleRate:A})}createBufferSource(){return new n(this)}createChannelMerger(E=6){return new i(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new o(this,{numberOfOutputs:E})}createConstantSource(){return new u(this)}createConvolver(){return new c(this)}createDelay(E=1){return new f(this,{maxDelayTime:E})}createDynamicsCompressor(){return new d(this)}createGain(){return new m(this)}createIIRFilter(E,k){return new _(this,{feedback:k,feedforward:E})}createOscillator(){return new v(this)}createPanner(){return new T(this)}createPeriodicWave(E,k,A={disableNormalization:!1}){return new x(this,{...A,imag:k,real:E})}createStereoPanner(){return new w(this)}createWaveShaper(){return new O(this)}decodeAudioData(E,k,A){return h(this._nativeContext,E).then(M=>(typeof k=="function"&&k(M),M),M=>{throw typeof A=="function"&&A(M),M})}},Rb={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ib=(s,e,t,n,r,i,o,u)=>class extends s{constructor(h,f){const d=i(h),m={...Rb,...f},_=r(d,m),y=o(d),v=y?t():null;super(h,!1,_,v),this._Q=e(this,y,_.Q,jn,nr),this._detune=e(this,y,_.detune,1200*Math.log2(jn),-1200*Math.log2(jn)),this._frequency=e(this,y,_.frequency,h.sampleRate/2,0),this._gain=e(this,y,_.gain,40*Math.log10(jn),nr),this._nativeBiquadFilterNode=_,u(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,f,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,f,d)}catch(m){throw m.code===11?n():m}if(h.length!==f.length||f.length!==d.length)throw n()}},Ub=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(u,c)=>{let h=t(u);const f=Un(h,c);if(!f){const d={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(c,d)}return i.set(c,h),f?(await s(c,u.Q,h.Q),await s(c,u.detune,h.detune),await s(c,u.frequency,h.frequency),await s(c,u.gain,h.gain)):(await n(c,u.Q,h.Q),await n(c,u.detune,h.detune),await n(c,u.frequency,h.frequency),await n(c,u.gain,h.gain)),await r(u,c,h),h};return{render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(u,c)}}},Nb=(s,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const i=s.get(t);if(i!==void 0)return i;try{const o=n();return o instanceof Promise?(s.set(t,o),o.catch(()=>!1).then(u=>(s.delete(t),e.set(t,u),u))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},Fb={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Lb=(s,e,t,n,r)=>class extends s{constructor(o,u){const c=n(o),h={...Fb,...u},f=t(c,h),d=r(c)?e():null;super(o,!1,f,d)}},zb=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let u=e(i);if(!Un(u,o)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=s(o,h)}return n.set(o,u),await t(i,o,u),u};return{render(i,o){const u=n.get(o);return u!==void 0?Promise.resolve(u):r(i,o)}}},Bb={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Vb=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=n(u),f=i({...Bb,...c}),d=t(h,f),m=r(h)?e():null;super(u,!1,d,m)}},Gb=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let u=e(i);if(!Un(u,o)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=s(o,h)}return n.set(o,u),await t(i,o,u),u};return{render(i,o){const u=n.get(o);return u!==void 0?Promise.resolve(u):r(i,o)}}},Wb=s=>(e,t,n)=>s(t,e,n),Hb=s=>(e,t,n=0,r=0)=>{const i=e[n];if(i===void 0)throw s();return Rh(t)?i.connect(t,0,r):i.connect(t,0)},jb=s=>(e,t)=>{const n=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},qb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Yb=(s,e,t,n,r,i,o)=>class extends s{constructor(c,h){const f=r(c),d={...qb,...h},m=n(f,d),_=i(f),y=_?t():null;super(c,!1,m,y),this._constantSourceNodeRenderer=y,this._nativeConstantSourceNode=m,this._offset=e(this,_,m.offset,jn,nr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=h;const f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===h?c:f}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Xa(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),si(this)&&Vu(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},Xb=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,u=null;const c=async(h,f)=>{let d=t(h);const m=Un(d,f);if(!m){const _={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(f,_),o!==null&&d.start(o),u!==null&&d.stop(u)}return i.set(f,d),m?await s(f,h.offset,d.offset):await n(f,h.offset,d.offset),await r(h,f,d),d};return{set start(h){o=h},set stop(h){u=h},render(h,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):c(h,f)}}},Zb=s=>e=>(s[0]=e,s[0]),Qb={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Kb=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=n(u),f={...Qb,...c},d=t(h,f),_=r(h)?e():null;super(u,!1,d,_),this._isBufferNullified=!1,this._nativeConvolverNode=d,f.buffer!==null&&i(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(u){if(this._nativeConvolverNode.buffer=u,u===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(u){this._nativeConvolverNode.normalize=u}},Jb=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let u=e(i);if(!Un(u,o)){const h={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize};u=s(o,h)}return n.set(o,u),nl(u)?await t(i,o,u.inputs[0]):await t(i,o,u),u};return{render(i,o){const u=n.get(o);return u!==void 0?Promise.resolve(u):r(i,o)}}},$b=(s,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(i){throw i.name==="SyntaxError"?s():i}},eO=()=>new DOMException("","DataCloneError"),qv=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(s,[s])}catch{}finally{r()}})},tO=(s,e,t,n,r,i,o,u,c,h,f)=>(d,m)=>{const _=o(d)?d:i(d);if(r.has(m)){const y=t();return Promise.reject(y)}try{r.add(m)}catch{}return e(c,()=>c(_))?_.decodeAudioData(m).then(y=>(qv(m).catch(()=>{}),e(u,()=>u(y))||f(y),s.add(y),y)):new Promise((y,v)=>{const T=async()=>{try{await qv(m)}catch{}},x=w=>{v(w),T()};try{_.decodeAudioData(m,w=>{typeof w.copyFromChannel!="function"&&(h(w),Sm(w)),s.add(w),T().then(()=>y(w))},w=>{x(w===null?n():w)})}catch(w){x(w)}})},nO=(s,e,t,n,r,i,o,u)=>(c,h)=>{const f=e.get(c);if(f===void 0)throw new Error("Missing the expected cycle count.");const d=i(c.context),m=u(d);if(f===h){if(e.delete(c),!m&&o(c)){const _=n(c),{outputs:y}=t(c);for(const v of y)if(Wu(v)){const T=n(v[0]);s(_,T,v[1],v[2])}else{const T=r(v[0]);_.connect(T,v[1])}}}else e.set(c,f-h)},rO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},sO=(s,e,t,n,r,i,o)=>class extends s{constructor(c,h){const f=r(c),d={...rO,...h},m=n(f,d),_=i(f),y=_?t(d.maxDelayTime):null;super(c,!1,m,y),this._delayTime=e(this,_,m.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},iO=(s,e,t,n,r)=>i=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const d=Un(f,h);if(!d){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:i};f=e(h,m)}return o.set(h,f),d?await s(h,c.delayTime,f.delayTime):await n(h,c.delayTime,f.delayTime),await r(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},oO=s=>(e,t,n,r)=>s(e[r],i=>i[0]===t&&i[1]===n),aO=s=>(e,t)=>{s(e).delete(t)},lO=s=>"delayTime"in s,uO=(s,e,t)=>function n(r,i){const o=Mh(i)?i:t(s,i);if(lO(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:u}=e(o);return Array.from(u).map(c=>n([...r,o],c[0])).reduce((c,h)=>c.concat(h),[])},ah=(s,e,t)=>{const n=e[t];if(n===void 0)throw s();return n},cO=s=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?ah(s,e,t).disconnect():Rh(t)?n===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?ah(s,e,n).disconnect(t,0):ah(s,e,n).disconnect(t,0,r):n===void 0?e.forEach(i=>i.disconnect(t)):ah(s,e,n).disconnect(t,0),hO={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},fO=(s,e,t,n,r,i,o,u)=>class extends s{constructor(h,f){const d=i(h),m={...hO,...f},_=n(d,m),y=o(d),v=y?t():null;super(h,!1,_,v),this._attack=e(this,y,_.attack),this._knee=e(this,y,_.knee),this._nativeDynamicsCompressorNode=_,this._ratio=e(this,y,_.ratio),this._release=e(this,y,_.release),this._threshold=e(this,y,_.threshold),u(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=f,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},dO=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(u,c)=>{let h=t(u);const f=Un(h,c);if(!f){const d={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(c,d)}return i.set(c,h),f?(await s(c,u.attack,h.attack),await s(c,u.knee,h.knee),await s(c,u.ratio,h.ratio),await s(c,u.release,h.release),await s(c,u.threshold,h.threshold)):(await n(c,u.attack,h.attack),await n(c,u.knee,h.knee),await n(c,u.ratio,h.ratio),await n(c,u.release,h.release),await n(c,u.threshold,h.threshold)),await r(u,c,h),h};return{render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(u,c)}}},pO=()=>new DOMException("","EncodingError"),mO=s=>e=>new Promise((t,n)=>{if(s===null){n(new SyntaxError);return}const r=s.document.head;if(r===null)n(new SyntaxError);else{const i=s.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),u=URL.createObjectURL(o),c=s.onerror,h=()=>{s.onerror=c,URL.revokeObjectURL(u)};s.onerror=(f,d,m,_,y)=>{if(d===u||d===s.location.href&&m===1&&_===1)return h(),n(y),!1;if(c!==null)return c(f,d,m,_,y)},i.onerror=()=>{h(),n(new SyntaxError)},i.onload=()=>{h(),t()},i.src=u,i.type="module",r.appendChild(i)}}),gO=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let i=this._listeners.get(n);i===void 0&&(i=s(this,n),typeof n=="function"&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const i=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},_O=s=>(e,t,n)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},vO=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},yO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},TO=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=r(u),f={...yO,...c},d=n(h,f),m=i(h),_=m?t():null;super(u,!1,d,_),this._gain=e(this,m,d.gain,jn,nr)}get gain(){return this._gain}},SO=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(u,c)=>{let h=t(u);const f=Un(h,c);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(c,d)}return i.set(c,h),f?await s(c,u.gain,h.gain):await n(c,u.gain,h.gain),await r(u,c,h),h};return{render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(u,c)}}},wO=(s,e)=>t=>e(s,t),xO=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},EO=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},CO=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},bO=s=>e=>s.get(e),_n=()=>new DOMException("","InvalidStateError"),OO=s=>e=>{const t=s.get(e);if(t===void 0)throw _n();return t},kO=(s,e)=>t=>{let n=s.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),s.set(t,n),n},AO=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},hf=()=>new DOMException("","InvalidAccessError"),MO=s=>{s.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw hf();return e.call(s,t,n,r)})(s.getFrequencyResponse)},DO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},PO=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=n(u),f=r(h),d={...DO,...c},m=e(h,f?null:u.baseLatency,d),_=f?t(d.feedback,d.feedforward):null;super(u,!1,m,_),MO(m),this._nativeIIRFilterNode=m,i(this,1)}getFrequencyResponse(u,c,h){return this._nativeIIRFilterNode.getFrequencyResponse(u,c,h)}},k1=(s,e,t,n,r,i,o,u,c,h,f)=>{const d=h.length;let m=u;for(let _=0;_<d;_+=1){let y=t[0]*h[_];for(let v=1;v<r;v+=1){const T=m-v&c-1;y+=t[v]*i[T],y-=s[v]*o[T]}for(let v=r;v<n;v+=1)y+=t[v]*i[m-v&c-1];for(let v=r;v<e;v+=1)y-=s[v]*o[m-v&c-1];i[m]=h[_],o[m]=y,m=m+1&c-1,f[_]=y}return m},RO=(s,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=n instanceof Float64Array?n:new Float64Array(n),o=r.length,u=i.length,c=Math.min(o,u);if(r[0]!==1){for(let y=0;y<o;y+=1)i[y]/=r[0];for(let y=1;y<u;y+=1)r[y]/=r[0]}const h=32,f=new Float32Array(h),d=new Float32Array(h),m=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),_=s.numberOfChannels;for(let y=0;y<_;y+=1){const v=s.getChannelData(y),T=m.getChannelData(y);f.fill(0),d.fill(0),k1(r,o,i,u,c,f,d,0,h,v,T)}return m},IO=(s,e,t,n,r)=>(i,o)=>{const u=new WeakMap;let c=null;const h=async(f,d)=>{let m=null,_=e(f);const y=Un(_,d);if(d.createIIRFilter===void 0?m=s(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(_=d.createIIRFilter(o,i)),u.set(d,m===null?_:m),m!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const T=new t(f.context.destination.channelCount,f.context.length,d.sampleRate);c=(async()=>{await n(f,T,T.destination);const x=await r(T);return RO(x,d,i,o)})()}const v=await c;return m.buffer=v,m.start(0),m}return await n(f,d,_),_};return{render(f,d){const m=u.get(d);return m!==void 0?Promise.resolve(m):h(f,d)}}},UO=(s,e,t,n,r,i)=>o=>(u,c)=>{const h=s.get(u);if(h===void 0){if(!o&&i(u)){const f=n(u),{outputs:d}=t(u);for(const m of d)if(Wu(m)){const _=n(m[0]);e(f,_,m[1],m[2])}else{const _=r(m[0]);f.disconnect(_,m[1])}}s.set(u,c)}else s.set(u,h+c)},NO=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},FO=(s,e)=>t=>s.has(t)||e(t),LO=(s,e)=>t=>s.has(t)||e(t),zO=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},BO=s=>e=>s!==null&&e instanceof s,VO=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,GO=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,WO=(s,e)=>t=>s(t)||e(t),HO=s=>e=>s!==null&&e instanceof s,jO=s=>s!==null&&s.isSecureContext,qO=(s,e,t,n)=>class extends s{constructor(i,o){const u=t(i),c=e(u,o);if(n(u))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},YO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},XO=(s,e,t,n)=>class extends s{constructor(i,o){const u=t(i);if(n(u))throw new TypeError;const c={...YO,...o},h=e(u,c);super(i,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},ZO=(s,e,t,n)=>class extends s{constructor(i,o){const u=t(i),c=e(u,o);if(n(u))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},QO=(s,e,t)=>class extends s{constructor(r,i){const o=t(r),u=e(o,i);super(r,!0,u,null)}},KO=(s,e,t,n,r,i)=>class extends t{constructor(u,c){super(u),this._nativeContext=u,uf.set(this,u),n(u)&&r.set(u,new Set),this._destination=new s(this,c),this._listener=e(this,u),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(u){const c=typeof u=="function"?i(this,u):null;this._nativeContext.onstatechange=c;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===c?u:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},gu=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},JO=(s,e)=>(t,n,r)=>{const i=new Set;return t.connect=(o=>(u,c=0,h=0)=>{const f=i.size===0;if(e(u))return o.call(t,u,c,h),s(i,[u,c,h],d=>d[0]===u&&d[1]===c&&d[2]===h,!0),f&&n(),u;o.call(t,u,c),s(i,[u,c],d=>d[0]===u&&d[1]===c,!0),f&&n()})(t.connect),t.disconnect=(o=>(u,c,h)=>{const f=i.size>0;if(u===void 0)o.apply(t),i.clear();else if(typeof u=="number"){o.call(t,u);for(const m of i)m[1]===u&&i.delete(m)}else{e(u)?o.call(t,u,c,h):o.call(t,u,c);for(const m of i)m[0]===u&&(c===void 0||m[1]===c)&&(h===void 0||m[2]===h)&&i.delete(m)}const d=i.size===0;f&&d&&r()})(t.disconnect),t},Rt=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t]&&(s[t]=n)},ln=(s,e)=>{Rt(s,e,"channelCount"),Rt(s,e,"channelCountMode"),Rt(s,e,"channelInterpretation")},Yv=s=>typeof s.getFloatTimeDomainData=="function",$O=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const n=Math.max(t.length,s.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},ek=(s,e)=>(t,n)=>{const r=t.createAnalyser();if(ln(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Rt(r,n,"fftSize"),Rt(r,n,"maxDecibels"),Rt(r,n,"minDecibels"),Rt(r,n,"smoothingTimeConstant"),s(Yv,()=>Yv(r))||$O(r),r},tk=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,Wt=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t].value&&(s[t].value=n)},nk=s=>{s.start=(e=>{let t=!1;return(n=0,r=0,i)=>{if(t)throw _n();e.call(s,n,r,i),t=!0}})(s.start)},Em=s=>{s.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,n,r)})(s.start)},Cm=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},rk=(s,e,t,n,r,i,o,u,c,h,f)=>(d,m)=>{const _=d.createBufferSource();return ln(_,m),Wt(_,m,"playbackRate"),Rt(_,m,"buffer"),Rt(_,m,"loop"),Rt(_,m,"loopEnd"),Rt(_,m,"loopStart"),e(t,()=>t(d))||nk(_),e(n,()=>n(d))||c(_),e(r,()=>r(d))||h(_,d),e(i,()=>i(d))||Em(_),e(o,()=>o(d))||f(_,d),e(u,()=>u(d))||Cm(_),s(d,_),_},sk=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,ik=(s,e)=>(t,n,r)=>{const i=t.destination;if(i.channelCount!==n)try{i.channelCount=n}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:n});const o=s(t,{channelCount:n,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",u=>()=>u.call(o),u=>c=>{u.call(o,c);try{i.channelCount=c}catch(h){if(c>i.maxChannelCount)throw h}}),e(o,"channelCountMode",u=>()=>u.call(o),u=>c=>{u.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",u=>()=>u.call(o),u=>c=>{u.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},ok=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,ak=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},lk=(s,e,t,n,r)=>(i,o,u,c,h,f)=>{if(u!==null)try{const d=new u(i,c,f),m=new Map;let _=null;if(Object.defineProperties(d,{channelCount:{get:()=>f.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>_,set:y=>{typeof _=="function"&&d.removeEventListener("processorerror",_),_=typeof y=="function"?y:null,typeof _=="function"&&d.addEventListener("processorerror",_)}}}),d.addEventListener=(y=>(...v)=>{if(v[0]==="processorerror"){const T=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(T!==null){const x=m.get(v[1]);x!==void 0?v[1]=x:(v[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),T(w)):T(new ErrorEvent(v[0],{...w}))},m.set(T,v[1]))}}return y.call(d,"error",v[1],v[2]),y.call(d,...v)})(d.addEventListener),d.removeEventListener=(y=>(...v)=>{if(v[0]==="processorerror"){const T=m.get(v[1]);T!==void 0&&(m.delete(v[1]),v[1]=T)}return y.call(d,"error",v[1],v[2]),y.call(d,v[0],v[1],v[2])})(d.removeEventListener),f.numberOfOutputs!==0){const y=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(y).connect(i.destination),r(d,()=>y.disconnect(),()=>y.connect(i.destination))}return d}catch(d){throw d.code===11?n():d}if(h===void 0)throw n();return ak(f),e(i,o,h,f)},A1=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),uk=s=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:i})=>{n.close(),r.close(),e(i)},n.onmessageerror=({data:i})=>{n.close(),r.close(),t(i)},r.postMessage(s)}),ck=async(s,e)=>{const t=await uk(e);return new s(t)},hk=(s,e,t,n)=>{let r=Np.get(s);r===void 0&&(r=new WeakMap,Np.set(s,r));const i=ck(t,n);return r.set(e,i),i},fk=(s,e,t,n,r,i,o,u,c,h,f,d,m)=>(_,y,v,T)=>{if(T.numberOfInputs===0&&T.numberOfOutputs===0)throw c();const x=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(x.some($=>$<1))throw c();if(x.length!==T.numberOfOutputs)throw e();if(T.channelCountMode!=="explicit")throw c();const w=T.channelCount*T.numberOfInputs,O=x.reduce(($,ce)=>$+ce,0),C=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(w+C>6||O>6)throw c();const E=new MessageChannel,k=[],A=[];for(let $=0;$<T.numberOfInputs;$+=1)k.push(o(_,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),A.push(r(_,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const M=[];if(v.parameterDescriptors!==void 0)for(const{defaultValue:$,maxValue:ce,minValue:ve,name:le}of v.parameterDescriptors){const fe=i(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:T.parameterData[le]!==void 0?T.parameterData[le]:$===void 0?0:$});Object.defineProperties(fe.offset,{defaultValue:{get:()=>$===void 0?0:$},maxValue:{get:()=>ce===void 0?jn:ce},minValue:{get:()=>ve===void 0?nr:ve}}),M.push(fe)}const D=n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+C)}),U=A1(y,_.sampleRate),R=u(_,U,w+C,Math.max(1,O)),P=r(_,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),F=[];for(let $=0;$<T.numberOfOutputs;$+=1)F.push(n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[$]}));for(let $=0;$<T.numberOfInputs;$+=1){k[$].connect(A[$]);for(let ce=0;ce<T.channelCount;ce+=1)A[$].connect(D,ce,$*T.channelCount+ce)}const B=new b1(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:$},ce)=>{const ve=M[ce];return ve.connect(D,0,w+ce),ve.start(0),[$,ve.offset]}));D.connect(R);let q=T.channelInterpretation,X=null;const J=T.numberOfOutputs===0?[R]:F,H={get bufferSize(){return U},get channelCount(){return T.channelCount},set channelCount($){throw t()},get channelCountMode(){return T.channelCountMode},set channelCountMode($){throw t()},get channelInterpretation(){return q},set channelInterpretation($){for(const ce of k)ce.channelInterpretation=$;q=$},get context(){return R.context},get inputs(){return k},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get onprocessorerror(){return X},set onprocessorerror($){typeof X=="function"&&H.removeEventListener("processorerror",X),X=typeof $=="function"?$:null,typeof X=="function"&&H.addEventListener("processorerror",X)},get parameters(){return B},get port(){return E.port2},addEventListener(...$){return R.addEventListener($[0],$[1],$[2])},connect:s.bind(null,J),disconnect:h.bind(null,J),dispatchEvent(...$){return R.dispatchEvent($[0])},removeEventListener(...$){return R.removeEventListener($[0],$[1],$[2])}},z=new Map;E.port1.addEventListener=($=>(...ce)=>{if(ce[0]==="message"){const ve=typeof ce[1]=="function"?ce[1]:typeof ce[1]=="object"&&ce[1]!==null&&typeof ce[1].handleEvent=="function"?ce[1].handleEvent:null;if(ve!==null){const le=z.get(ce[1]);le!==void 0?ce[1]=le:(ce[1]=fe=>{f(_.currentTime,_.sampleRate,()=>ve(fe))},z.set(ve,ce[1]))}}return $.call(E.port1,ce[0],ce[1],ce[2])})(E.port1.addEventListener),E.port1.removeEventListener=($=>(...ce)=>{if(ce[0]==="message"){const ve=z.get(ce[1]);ve!==void 0&&(z.delete(ce[1]),ce[1]=ve)}return $.call(E.port1,ce[0],ce[1],ce[2])})(E.port1.removeEventListener);let W=null;Object.defineProperty(E.port1,"onmessage",{get:()=>W,set:$=>{typeof W=="function"&&E.port1.removeEventListener("message",W),W=typeof $=="function"?$:null,typeof W=="function"&&(E.port1.addEventListener("message",W),E.port1.start())}}),v.prototype.port=E.port1;let N=null;hk(_,H,v,T).then($=>N=$);const K=Uh(T.numberOfInputs,T.channelCount),ee=Uh(T.numberOfOutputs,x),Y=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce(($,{name:ce})=>({...$,[ce]:new Float32Array(128)}),{});let ie=!0;const ne=()=>{T.numberOfOutputs>0&&R.disconnect(P);for(let $=0,ce=0;$<T.numberOfOutputs;$+=1){const ve=F[$];for(let le=0;le<x[$];le+=1)P.disconnect(ve,ce+le,le);ce+=x[$]}},Z=new Map;R.onaudioprocess=({inputBuffer:$,outputBuffer:ce})=>{if(N!==null){const ve=d(H);for(let le=0;le<U;le+=128){for(let fe=0;fe<T.numberOfInputs;fe+=1)for(let de=0;de<T.channelCount;de+=1)Ih($,K[fe],de,de,le);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:fe},de)=>{Ih($,Y,fe,w+de,le)});for(let fe=0;fe<T.numberOfInputs;fe+=1)for(let de=0;de<x[fe];de+=1)ee[fe][de].byteLength===0&&(ee[fe][de]=new Float32Array(128));try{const fe=K.map((ue,Ce)=>{if(ve[Ce].size>0)return Z.set(Ce,U/128),ue;const we=Z.get(Ce);return we===void 0?[]:(ue.every(Se=>Se.every(Je=>Je===0))&&(we===1?Z.delete(Ce):Z.set(Ce,we-1)),ue)});ie=f(_.currentTime+le/_.sampleRate,_.sampleRate,()=>N.process(fe,ee,Y));for(let ue=0,Ce=0;ue<T.numberOfOutputs;ue+=1){for(let Te=0;Te<x[ue];Te+=1)O1(ce,ee[ue],Te,Ce+Te,le);Ce+=x[ue]}}catch(fe){ie=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:fe.colno,filename:fe.filename,lineno:fe.lineno,message:fe.message}))}if(!ie){for(let fe=0;fe<T.numberOfInputs;fe+=1){k[fe].disconnect(A[fe]);for(let de=0;de<T.channelCount;de+=1)A[le].disconnect(D,de,fe*T.channelCount+de)}if(v.parameterDescriptors!==void 0){const fe=v.parameterDescriptors.length;for(let de=0;de<fe;de+=1){const ue=M[de];ue.disconnect(D,0,w+de),ue.stop()}}D.disconnect(R),R.onaudioprocess=null,me?ne():ae();break}}}};let me=!1;const ge=o(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),oe=()=>R.connect(ge).connect(_.destination),ae=()=>{R.disconnect(ge),ge.disconnect()},Ee=()=>{if(ie){ae(),T.numberOfOutputs>0&&R.connect(P);for(let $=0,ce=0;$<T.numberOfOutputs;$+=1){const ve=F[$];for(let le=0;le<x[$];le+=1)P.connect(ve,ce+le,le);ce+=x[$]}}me=!0},Re=()=>{ie&&(oe(),ne()),me=!1};return oe(),m(H,Ee,Re)},M1=(s,e)=>{const t=s.createBiquadFilter();return ln(t,e),Wt(t,e,"Q"),Wt(t,e,"detune"),Wt(t,e,"frequency"),Wt(t,e,"gain"),Rt(t,e,"type"),t},dk=(s,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,r),ln(r,n),r},pk=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw _n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw _n()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw _n()}})},Hu=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return ln(t,e),pk(t),t},mk=(s,e,t,n,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const u=i.createConstantSource();return ln(u,o),Wt(u,o,"offset"),e(n,()=>n(i))||Em(u),e(r,()=>r(i))||Cm(u),s(i,u),u},rl=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),gk=(s,e,t,n)=>(r,{offset:i,...o})=>{const u=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(r,{...o,gain:i}),f=u.getChannelData(0);f[0]=1,f[1]=1,c.buffer=u,c.loop=!0;const d={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(y){h.channelCount=y},get channelCountMode(){return h.channelCountMode},set channelCountMode(y){h.channelCountMode=y},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(y){h.channelInterpretation=y},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return c.onended},set onended(y){c.onended=y},addEventListener(...y){return c.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return c.dispatchEvent(y[0])},removeEventListener(...y){return c.removeEventListener(y[0],y[1],y[2])},start(y=0){c.start.call(c,y)},stop(y=0){c.stop.call(c,y)}},m=()=>c.connect(h),_=()=>c.disconnect(h);return s(r,c),n(rl(d,h),m,_)},_k=(s,e)=>(t,n)=>{const r=t.createConvolver();if(ln(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Rt(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw s();return i.call(r,o)}),n.channelCountMode==="max"))throw s();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw s();return i.call(r,o)}),r},D1=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return ln(t,e),Wt(t,e,"delayTime"),t},vk=s=>(e,t)=>{const n=e.createDynamicsCompressor();if(ln(n,t),t.channelCount>2||t.channelCountMode==="max")throw s();return Wt(n,t,"attack"),Wt(n,t,"knee"),Wt(n,t,"ratio"),Wt(n,t,"release"),Wt(n,t,"threshold"),n},ur=(s,e)=>{const t=s.createGain();return ln(t,e),Wt(t,e,"gain"),t},yk=s=>(e,t,n)=>{if(e.createIIRFilter===void 0)return s(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return ln(r,n),r};function Tk(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function Sk(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Xv(s,e){let t=[0,0];for(let n=s.length-1;n>=0;n-=1)t=Sk(t,e),t[0]+=s[n];return t}const wk=(s,e,t,n)=>(r,i,{channelCount:o,channelCountMode:u,channelInterpretation:c,feedback:h,feedforward:f})=>{const d=A1(i,r.sampleRate),m=h instanceof Float64Array?h:new Float64Array(h),_=f instanceof Float64Array?f:new Float64Array(f),y=m.length,v=_.length,T=Math.min(y,v);if(y===0||y>20)throw n();if(m[0]===0)throw e();if(v===0||v>20)throw n();if(_[0]===0)throw e();if(m[0]!==1){for(let M=0;M<v;M+=1)_[M]/=m[0];for(let M=1;M<y;M+=1)m[M]/=m[0]}const x=t(r,d,o,o);x.channelCount=o,x.channelCountMode=u,x.channelInterpretation=c;const w=32,O=[],C=[],E=[];for(let M=0;M<o;M+=1){O.push(0);const D=new Float32Array(w),U=new Float32Array(w);D.fill(0),U.fill(0),C.push(D),E.push(U)}x.onaudioprocess=M=>{const D=M.inputBuffer,U=M.outputBuffer,R=D.numberOfChannels;for(let P=0;P<R;P+=1){const F=D.getChannelData(P),B=U.getChannelData(P);O[P]=k1(m,y,_,v,T,C[P],E[P],O[P],w,F,B)}};const k=r.sampleRate/2;return rl({get bufferSize(){return d},get channelCount(){return x.channelCount},set channelCount(M){x.channelCount=M},get channelCountMode(){return x.channelCountMode},set channelCountMode(M){x.channelCountMode=M},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(M){x.channelInterpretation=M},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...M){return x.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return x.dispatchEvent(M[0])},getFrequencyResponse(M,D,U){if(M.length!==D.length||D.length!==U.length)throw s();const R=M.length;for(let P=0;P<R;P+=1){const F=-Math.PI*(M[P]/k),B=[Math.cos(F),Math.sin(F)],q=Xv(_,B),X=Xv(m,B),J=Tk(q,X);D[P]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),U[P]=Math.atan2(J[1],J[0])}},removeEventListener(...M){return x.removeEventListener(M[0],M[1],M[2])}},x)},xk=(s,e)=>s.createMediaElementSource(e.mediaElement),Ek=(s,e)=>{const t=s.createMediaStreamDestination();return ln(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Ck=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const n=t.slice(0,1),r=s.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},bk=(s,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),i=t.createMediaStreamSource(r);if(n.kind!=="audio")throw s();if(e(t))throw new TypeError;return i},Ok=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,kk=(s,e,t,n,r,i)=>(o,u)=>{const c=o.createOscillator();return ln(c,u),Wt(c,u,"detune"),Wt(c,u,"frequency"),u.periodicWave!==void 0?c.setPeriodicWave(u.periodicWave):Rt(c,u,"type"),e(t,()=>t(o))||Em(c),e(n,()=>n(o))||i(c,o),e(r,()=>r(o))||Cm(c),s(o,c),c},Ak=s=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?s(e,t):(ln(n,t),Wt(n,t,"orientationX"),Wt(n,t,"orientationY"),Wt(n,t,"orientationZ"),Wt(n,t,"positionX"),Wt(n,t,"positionY"),Wt(n,t,"positionZ"),Rt(n,t,"coneInnerAngle"),Rt(n,t,"coneOuterAngle"),Rt(n,t,"coneOuterGain"),Rt(n,t,"distanceModel"),Rt(n,t,"maxDistance"),Rt(n,t,"panningModel"),Rt(n,t,"refDistance"),Rt(n,t,"rolloffFactor"),n)},Mk=(s,e,t,n,r,i,o,u,c,h)=>(f,{coneInnerAngle:d,coneOuterAngle:m,coneOuterGain:_,distanceModel:y,maxDistance:v,orientationX:T,orientationY:x,orientationZ:w,panningModel:O,positionX:C,positionY:E,positionZ:k,refDistance:A,rolloffFactor:M,...D})=>{const U=f.createPanner();if(D.channelCount>2||D.channelCountMode==="max")throw o();ln(U,D);const R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},P=t(f,{...R,channelInterpretation:"speakers",numberOfInputs:6}),F=n(f,{...D,gain:1}),B=n(f,{...R,gain:1}),q=n(f,{...R,gain:0}),X=n(f,{...R,gain:0}),J=n(f,{...R,gain:0}),H=n(f,{...R,gain:0}),z=n(f,{...R,gain:0}),W=r(f,256,6,1),N=i(f,{...R,curve:new Float32Array([1,1]),oversample:"none"});let L=[T,x,w],K=[C,E,k];const ee=new Float32Array(1);W.onaudioprocess=({inputBuffer:Z})=>{const me=[c(Z,ee,0),c(Z,ee,1),c(Z,ee,2)];me.some((oe,ae)=>oe!==L[ae])&&(U.setOrientation(...me),L=me);const ge=[c(Z,ee,3),c(Z,ee,4),c(Z,ee,5)];ge.some((oe,ae)=>oe!==K[ae])&&(U.setPosition(...ge),K=ge)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0});const Y={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(Z){if(Z>2)throw o();F.channelCount=Z,U.channelCount=Z},get channelCountMode(){return U.channelCountMode},set channelCountMode(Z){if(Z==="max")throw o();F.channelCountMode=Z,U.channelCountMode=Z},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(Z){F.channelInterpretation=Z,U.channelInterpretation=Z},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(Z){U.coneInnerAngle=Z},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(Z){U.coneOuterAngle=Z},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(Z){if(Z<0||Z>1)throw e();U.coneOuterGain=Z},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(Z){U.distanceModel=Z},get inputs(){return[F]},get maxDistance(){return U.maxDistance},set maxDistance(Z){if(Z<0)throw new RangeError;U.maxDistance=Z},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return q.gain},get orientationZ(){return X.gain},get panningModel(){return U.panningModel},set panningModel(Z){U.panningModel=Z},get positionX(){return J.gain},get positionY(){return H.gain},get positionZ(){return z.gain},get refDistance(){return U.refDistance},set refDistance(Z){if(Z<0)throw new RangeError;U.refDistance=Z},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(Z){if(Z<0)throw new RangeError;U.rolloffFactor=Z},addEventListener(...Z){return F.addEventListener(Z[0],Z[1],Z[2])},dispatchEvent(...Z){return F.dispatchEvent(Z[0])},removeEventListener(...Z){return F.removeEventListener(Z[0],Z[1],Z[2])}};d!==Y.coneInnerAngle&&(Y.coneInnerAngle=d),m!==Y.coneOuterAngle&&(Y.coneOuterAngle=m),_!==Y.coneOuterGain&&(Y.coneOuterGain=_),y!==Y.distanceModel&&(Y.distanceModel=y),v!==Y.maxDistance&&(Y.maxDistance=v),T!==Y.orientationX.value&&(Y.orientationX.value=T),x!==Y.orientationY.value&&(Y.orientationY.value=x),w!==Y.orientationZ.value&&(Y.orientationZ.value=w),O!==Y.panningModel&&(Y.panningModel=O),C!==Y.positionX.value&&(Y.positionX.value=C),E!==Y.positionY.value&&(Y.positionY.value=E),k!==Y.positionZ.value&&(Y.positionZ.value=k),A!==Y.refDistance&&(Y.refDistance=A),M!==Y.rolloffFactor&&(Y.rolloffFactor=M),(L[0]!==1||L[1]!==0||L[2]!==0)&&U.setOrientation(...L),(K[0]!==0||K[1]!==0||K[2]!==0)&&U.setPosition(...K);const ie=()=>{F.connect(U),s(F,N,0,0),N.connect(B).connect(P,0,0),N.connect(q).connect(P,0,1),N.connect(X).connect(P,0,2),N.connect(J).connect(P,0,3),N.connect(H).connect(P,0,4),N.connect(z).connect(P,0,5),P.connect(W).connect(f.destination)},ne=()=>{F.disconnect(U),u(F,N,0,0),N.disconnect(B),B.disconnect(P),N.disconnect(q),q.disconnect(P),N.disconnect(X),X.disconnect(P),N.disconnect(J),J.disconnect(P),N.disconnect(H),H.disconnect(P),N.disconnect(z),z.disconnect(P),P.disconnect(W),W.disconnect(f.destination)};return h(rl(Y,U),ie,ne)},Dk=s=>(e,{disableNormalization:t,imag:n,real:r})=>{const i=n instanceof Float32Array?n:new Float32Array(n),o=r instanceof Float32Array?r:new Float32Array(r),u=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(n).length<2)throw s();return u},ju=(s,e,t,n)=>s.createScriptProcessor(e,t,n),Pk=(s,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,n);const i=t.createStereoPanner();return ln(i,n),Wt(i,n,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Rk=(s,e,t,n,r,i)=>{const u=new Float32Array([1,1]),c=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...h,oversample:"none"},d=(y,v,T,x)=>{const w=new Float32Array(16385),O=new Float32Array(16385);for(let D=0;D<16385;D+=1){const U=D/16384*c;w[D]=Math.cos(U),O[D]=Math.sin(U)}const C=t(y,{...h,gain:0}),E=n(y,{...f,curve:w}),k=n(y,{...f,curve:u}),A=t(y,{...h,gain:0}),M=n(y,{...f,curve:O});return{connectGraph(){v.connect(C),v.connect(k.inputs===void 0?k:k.inputs[0]),v.connect(A),k.connect(T),T.connect(E.inputs===void 0?E:E.inputs[0]),T.connect(M.inputs===void 0?M:M.inputs[0]),E.connect(C.gain),M.connect(A.gain),C.connect(x,0,0),A.connect(x,0,1)},disconnectGraph(){v.disconnect(C),v.disconnect(k.inputs===void 0?k:k.inputs[0]),v.disconnect(A),k.disconnect(T),T.disconnect(E.inputs===void 0?E:E.inputs[0]),T.disconnect(M.inputs===void 0?M:M.inputs[0]),E.disconnect(C.gain),M.disconnect(A.gain),C.disconnect(x,0,0),A.disconnect(x,0,1)}}},m=(y,v,T,x)=>{const w=new Float32Array(16385),O=new Float32Array(16385),C=new Float32Array(16385),E=new Float32Array(16385),k=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>k){const H=(J-k)/(16384-k)*c;w[J]=Math.cos(H),O[J]=Math.sin(H),C[J]=0,E[J]=1}else{const H=J/(16384-k)*c;w[J]=1,O[J]=0,C[J]=Math.cos(H),E[J]=Math.sin(H)}const A=e(y,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),M=t(y,{...h,gain:0}),D=n(y,{...f,curve:w}),U=t(y,{...h,gain:0}),R=n(y,{...f,curve:O}),P=n(y,{...f,curve:u}),F=t(y,{...h,gain:0}),B=n(y,{...f,curve:C}),q=t(y,{...h,gain:0}),X=n(y,{...f,curve:E});return{connectGraph(){v.connect(A),v.connect(P.inputs===void 0?P:P.inputs[0]),A.connect(M,0),A.connect(U,0),A.connect(F,1),A.connect(q,1),P.connect(T),T.connect(D.inputs===void 0?D:D.inputs[0]),T.connect(R.inputs===void 0?R:R.inputs[0]),T.connect(B.inputs===void 0?B:B.inputs[0]),T.connect(X.inputs===void 0?X:X.inputs[0]),D.connect(M.gain),R.connect(U.gain),B.connect(F.gain),X.connect(q.gain),M.connect(x,0,0),F.connect(x,0,0),U.connect(x,0,1),q.connect(x,0,1)},disconnectGraph(){v.disconnect(A),v.disconnect(P.inputs===void 0?P:P.inputs[0]),A.disconnect(M,0),A.disconnect(U,0),A.disconnect(F,1),A.disconnect(q,1),P.disconnect(T),T.disconnect(D.inputs===void 0?D:D.inputs[0]),T.disconnect(R.inputs===void 0?R:R.inputs[0]),T.disconnect(B.inputs===void 0?B:B.inputs[0]),T.disconnect(X.inputs===void 0?X:X.inputs[0]),D.disconnect(M.gain),R.disconnect(U.gain),B.disconnect(F.gain),X.disconnect(q.gain),M.disconnect(x,0,0),F.disconnect(x,0,0),U.disconnect(x,0,1),q.disconnect(x,0,1)}}},_=(y,v,T,x,w)=>{if(v===1)return d(y,T,x,w);if(v===2)return m(y,T,x,w);throw r()};return(y,{channelCount:v,channelCountMode:T,pan:x,...w})=>{if(T==="max")throw r();const O=s(y,{...w,channelCount:1,channelCountMode:T,numberOfInputs:2}),C=t(y,{...w,channelCount:v,channelCountMode:T,gain:1}),E=t(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x});let{connectGraph:k,disconnectGraph:A}=_(y,v,C,E,O);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const M={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(P){C.channelCount!==P&&(D&&A(),{connectGraph:k,disconnectGraph:A}=_(y,P,C,E,O),D&&k()),C.channelCount=P},get channelCountMode(){return C.channelCountMode},set channelCountMode(P){if(P==="clamped-max"||P==="max")throw r();C.channelCountMode=P},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(P){C.channelInterpretation=P},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return E.gain},addEventListener(...P){return C.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return C.dispatchEvent(P[0])},removeEventListener(...P){return C.removeEventListener(P[0],P[1],P[2])}};let D=!1;const U=()=>{k(),D=!0},R=()=>{A(),D=!1};return i(rl(M,O),U,R)}},Ik=(s,e,t,n,r,i,o)=>(u,c)=>{const h=u.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&u.createGain().gain.automationRate===void 0)return t(u,c);ln(h,c);const f=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(f!==null&&f.length<2)throw e();Rt(h,{curve:f},"curve"),Rt(h,c,"oversample");let d=null,m=!1;return o(h,"curve",v=>()=>v.call(h),v=>T=>(v.call(h,T),m&&(n(T)&&d===null?d=s(u,h):!n(T)&&d!==null&&(d(),d=null)),T)),r(h,()=>{m=!0,n(h.curve)&&(d=s(u,h))},()=>{m=!1,d!==null&&(d(),d=null)})},Uk=(s,e,t,n,r)=>(i,{curve:o,oversample:u,...c})=>{const h=i.createWaveShaper(),f=i.createWaveShaper();ln(h,c),ln(f,c);const d=t(i,{...c,gain:1}),m=t(i,{...c,gain:-1}),_=t(i,{...c,gain:1}),y=t(i,{...c,gain:-1});let v=null,T=!1,x=null;const w={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(E){d.channelCount=E,m.channelCount=E,h.channelCount=E,_.channelCount=E,f.channelCount=E,y.channelCount=E},get channelCountMode(){return h.channelCountMode},set channelCountMode(E){d.channelCountMode=E,m.channelCountMode=E,h.channelCountMode=E,_.channelCountMode=E,f.channelCountMode=E,y.channelCountMode=E},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(E){d.channelInterpretation=E,m.channelInterpretation=E,h.channelInterpretation=E,_.channelInterpretation=E,f.channelInterpretation=E,y.channelInterpretation=E},get context(){return h.context},get curve(){return x},set curve(E){if(E!==null&&E.length<2)throw e();if(E===null)h.curve=E,f.curve=E;else{const k=E.length,A=new Float32Array(k+2-k%2),M=new Float32Array(k+2-k%2);A[0]=E[0],M[0]=-E[k-1];const D=Math.ceil((k+1)/2),U=(k+1)/2-1;for(let R=1;R<D;R+=1){const P=R/D*U,F=Math.floor(P),B=Math.ceil(P);A[R]=F===B?E[F]:(1-(P-F))*E[F]+(1-(B-P))*E[B],M[R]=F===B?-E[k-1-F]:-((1-(P-F))*E[k-1-F])-(1-(B-P))*E[k-1-B]}A[D]=k%2===1?E[D-1]:(E[D-2]+E[D-1])/2,h.curve=A,f.curve=M}x=E,T&&(n(x)&&v===null?v=s(i,d):v!==null&&(v(),v=null))},get inputs(){return[d]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(E){h.oversample=E,f.oversample=E},addEventListener(...E){return d.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return d.dispatchEvent(E[0])},removeEventListener(...E){return d.removeEventListener(E[0],E[1],E[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),u!==w.oversample&&(w.oversample=u);const O=()=>{d.connect(h).connect(_),d.connect(m).connect(f).connect(y).connect(_),T=!0,n(x)&&(v=s(i,d))},C=()=>{d.disconnect(h),h.disconnect(_),d.disconnect(m),m.disconnect(f),f.disconnect(y),y.disconnect(_),T=!1,v!==null&&(v(),v=null)};return r(rl(w,_),O,C)},Zn=()=>new DOMException("","NotSupportedError"),Nk={numberOfChannels:1},Fk=(s,e,t,n,r)=>class extends s{constructor(o,u,c){let h;if(typeof o=="number"&&u!==void 0&&c!==void 0)h={length:u,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")h=o;else throw new Error("The given parameters are not valid.");const{length:f,numberOfChannels:d,sampleRate:m}={...Nk,...h},_=n(d,f,m);e(gu,()=>gu(_))||_.addEventListener("statechange",(()=>{let y=0;const v=T=>{this._state==="running"&&(y>0?(_.removeEventListener("statechange",v),T.stopImmediatePropagation(),this._waitForThePromiseToSettle(T)):y+=1)};return v})()),super(_,d),this._length=f,this._nativeOfflineAudioContext=_,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,w1(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Lk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},zk=(s,e,t,n,r,i,o)=>class extends s{constructor(c,h){const f=r(c),d={...Lk,...h},m=t(f,d),_=i(f),y=_?n():null,v=c.sampleRate/2;super(c,!1,m,y),this._detune=e(this,_,m.detune,153600,-153600),this._frequency=e(this,_,m.frequency,v,-v),this._nativeOscillatorNode=m,this._onended=null,this._oscillatorNodeRenderer=y,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=h;const f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===h?c:f}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Xa(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),si(this)&&Vu(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Bk=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,u=null,c=null;const h=async(f,d)=>{let m=t(f);const _=Un(m,d);if(!_){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,periodicWave:o===null?void 0:o,type:m.type};m=e(d,y),u!==null&&m.start(u),c!==null&&m.stop(c)}return i.set(d,m),_?(await s(d,f.detune,m.detune),await s(d,f.frequency,m.frequency)):(await n(d,f.detune,m.detune),await n(d,f.frequency,m.frequency)),await r(f,d,m),m};return{set periodicWave(f){o=f},set start(f){u=f},set stop(f){c=f},render(f,d){const m=i.get(d);return m!==void 0?Promise.resolve(m):h(f,d)}}},Vk={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Gk=(s,e,t,n,r,i,o)=>class extends s{constructor(c,h){const f=r(c),d={...Vk,...h},m=t(f,d),_=i(f),y=_?n():null;super(c,!1,m,y),this._nativePannerNode=m,this._orientationX=e(this,_,m.orientationX,jn,nr),this._orientationY=e(this,_,m.orientationY,jn,nr),this._orientationZ=e(this,_,m.orientationZ,jn,nr),this._positionX=e(this,_,m.positionX,jn,nr),this._positionY=e(this,_,m.positionY,jn,nr),this._positionZ=e(this,_,m.positionZ,jn,nr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Wk=(s,e,t,n,r,i,o,u,c,h)=>()=>{const f=new WeakMap;let d=null;const m=async(_,y)=>{let v=null,T=i(_);const x={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation},w={...x,coneInnerAngle:T.coneInnerAngle,coneOuterAngle:T.coneOuterAngle,coneOuterGain:T.coneOuterGain,distanceModel:T.distanceModel,maxDistance:T.maxDistance,panningModel:T.panningModel,refDistance:T.refDistance,rolloffFactor:T.rolloffFactor},O=Un(T,y);if("bufferSize"in T)v=n(y,{...x,gain:1});else if(!O){const C={...w,orientationX:T.orientationX.value,orientationY:T.orientationY.value,orientationZ:T.orientationZ.value,positionX:T.positionX.value,positionY:T.positionY.value,positionZ:T.positionZ.value};T=r(y,C)}if(f.set(y,v===null?T:v),v!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const R=new o(6,_.context.length,y.sampleRate),P=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});P.connect(R.destination),d=(async()=>{const F=await Promise.all([_.orientationX,_.orientationY,_.orientationZ,_.positionX,_.positionY,_.positionZ].map(async(B,q)=>{const X=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await u(R,B,X.offset),X}));for(let B=0;B<6;B+=1)F[B].connect(P,0,B),F[B].start(0);return h(R)})()}const C=await d,E=n(y,{...x,gain:1});await c(_,y,E);const k=[];for(let R=0;R<C.numberOfChannels;R+=1)k.push(C.getChannelData(R));let A=[k[0][0],k[1][0],k[2][0]],M=[k[3][0],k[4][0],k[5][0]],D=n(y,{...x,gain:1}),U=r(y,{...w,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:M[0],positionY:M[1],positionZ:M[2]});E.connect(D).connect(U.inputs[0]),U.connect(v);for(let R=128;R<C.length;R+=128){const P=[k[0][R],k[1][R],k[2][R]],F=[k[3][R],k[4][R],k[5][R]];if(P.some((B,q)=>B!==A[q])||F.some((B,q)=>B!==M[q])){A=P,M=F;const B=R/y.sampleRate;D.gain.setValueAtTime(0,B),D=n(y,{...x,gain:0}),U=r(y,{...w,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),D.gain.setValueAtTime(1,B),E.connect(D).connect(U.inputs[0]),U.connect(v)}}return v}return O?(await s(y,_.orientationX,T.orientationX),await s(y,_.orientationY,T.orientationY),await s(y,_.orientationZ,T.orientationZ),await s(y,_.positionX,T.positionX),await s(y,_.positionY,T.positionY),await s(y,_.positionZ,T.positionZ)):(await u(y,_.orientationX,T.orientationX),await u(y,_.orientationY,T.orientationY),await u(y,_.orientationZ,T.orientationZ),await u(y,_.positionX,T.positionX),await u(y,_.positionY,T.positionY),await u(y,_.positionZ,T.positionZ)),nl(T)?await c(_,y,T.inputs[0]):await c(_,y,T),T};return{render(_,y){const v=f.get(y);return v!==void 0?Promise.resolve(v):m(_,y)}}},Hk={disableNormalization:!1},jk=(s,e,t,n)=>class P1{constructor(i,o){const u=e(i),c=n({...Hk,...o}),h=s(u,c);return t.add(h),h}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===P1.prototype||t.has(i)}},qk=(s,e)=>(t,n,r)=>(s(n).replay(r),e(n,t,r)),Yk=(s,e,t)=>async(n,r,i)=>{const o=s(n);await Promise.all(o.activeInputs.map((u,c)=>Array.from(u).map(async([h,f])=>{const m=await e(h).render(h,r),_=n.context.destination;!t(h)&&(n!==_||!t(n))&&m.connect(i,f,c)})).reduce((u,c)=>[...u,...c],[]))},Xk=(s,e,t)=>async(n,r,i)=>{const o=e(n);await Promise.all(Array.from(o.activeInputs).map(async([u,c])=>{const f=await s(u).render(u,r);t(u)||f.connect(i,c)}))},Zk=(s,e,t,n)=>r=>s(gu,()=>gu(r))?Promise.resolve(s(n,n)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=u=>{o.disconnect(),i(u.renderedBuffer)},o.connect(r.destination),r.startRendering()}),Qk=s=>(e,t)=>{s.set(e,t)},Kk=s=>(e,t)=>s.set(e,t),Jk=(s,e,t,n,r,i,o,u)=>(c,h)=>t(c).render(c,h).then(()=>Promise.all(Array.from(n(h)).map(f=>t(f).render(f,h)))).then(()=>r(h)).then(f=>(typeof f.copyFromChannel!="function"?(o(f),Sm(f)):e(i,()=>i(f))||u(f),s.add(f),f)),$k={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},eA=(s,e,t,n,r,i)=>class extends s{constructor(u,c){const h=r(u),f={...$k,...c},d=t(h,f),m=i(h),_=m?n():null;super(u,!1,d,_),this._pan=e(this,m,d.pan)}get pan(){return this._pan}},tA=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(u,c)=>{let h=t(u);const f=Un(h,c);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(c,d)}return i.set(c,h),f?await s(c,u.pan,h.pan):await n(c,u.pan,h.pan),nl(h)?await r(u,c,h.inputs[0]):await r(u,c,h),h};return{render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):o(u,c)}}},nA=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},rA=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await n.audioWorklet.addModule(r);const u=new s(n,"a",{numberOfOutputs:0}),c=n.createOscillator();u.port.onmessage=()=>i=!0,u.onprocessorerror=()=>o=!0,c.connect(u),c.start(0),await n.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},sA=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},iA=()=>new DOMException("","UnknownError"),oA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},aA=(s,e,t,n,r,i,o)=>class extends s{constructor(c,h){const f=r(c),d={...oA,...h},m=t(f,d),y=i(f)?n():null;super(c,!0,m,y),this._isCurveNullified=!1,this._nativeWaveShaperNode=m,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},lA=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let u=e(i);if(!Un(u,o)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample};u=s(o,h)}return n.set(o,u),nl(u)?await t(i,o,u.inputs[0]):await t(i,o,u),u};return{render(i,o){const u=n.get(o);return u!==void 0?Promise.resolve(u):r(i,o)}}},uA=()=>typeof window>"u"?null:window,cA=(s,e)=>t=>{t.copyFromChannel=(n,r,i=0)=>{const o=s(i),u=s(r);if(u>=t.numberOfChannels)throw e();const c=t.length,h=t.getChannelData(u),f=n.length;for(let d=o<0?-o:0;d+o<c&&d<f;d+=1)n[d]=h[d+o]},t.copyToChannel=(n,r,i=0)=>{const o=s(i),u=s(r);if(u>=t.numberOfChannels)throw e();const c=t.length,h=t.getChannelData(u),f=n.length;for(let d=o<0?-o:0;d+o<c&&d<f;d+=1)h[d+o]=n[d]}},hA=s=>e=>{e.copyFromChannel=(t=>(n,r,i=0)=>{const o=s(i),u=s(r);if(o<e.length)return t.call(e,n,u,o)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,i=0)=>{const o=s(i),u=s(r);if(o<e.length)return t.call(e,n,u,o)})(e.copyToChannel)},fA=s=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),s(e,"buffer",r=>()=>{const i=r.call(e);return i===n?null:i},r=>i=>r.call(e,i===null?n:i))},dA=(s,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const r=t.createBufferSource();e(n,()=>{const u=n.numberOfInputs;for(let c=0;c<u;c+=1)r.connect(n,0,c)},()=>r.disconnect(n))},R1=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),I1=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},qu=(s,e,t,n)=>{let r=s;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(s,e,{get:t(i),set:n(o)})},pA=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),mA=s=>({...s,channelCount:s.numberOfOutputs}),gA=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},U1=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;U1(s,e,t+1e-7)}},_A=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},vA=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},yA=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},bm=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},N1=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Om=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},TA=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},SA=s=>{s.start=(e=>(t=0,n=0,r)=>{const i=s.buffer,o=i===null?n:Math.min(i.duration,n);i!==null&&o>i.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,o,r)})(s.start)},F1=(s,e)=>{const t=e.createGain();s.connect(t);const n=(r=>()=>{r.call(s,t),s.removeEventListener("ended",n)})(s.disconnect);s.addEventListener("ended",n),rl(s,t),s.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(s,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(s,o),i=!0}})(s.stop)},sl=(s,e)=>t=>{const n={value:s};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},wA=GC(Go),xA=XC(Go),EA=oO(cf),L1=new WeakMap,CA=EO(L1),hs=Nb(new Map,new WeakMap),Is=uA(),z1=ek(hs,Us),km=xO(Yn),Cn=Yk(Yn,km,Uo),bA=$C(z1,At,Cn),Et=OO(uf),fi=Ok(Is),mt=HO(fi),B1=new WeakMap,V1=gO(sl),Yu=sk(Is),Am=BO(Yu),Mm=VO(Is),G1=GO(Is),_u=ok(Is),en=Eb(WC(m1),YC(wA,xA,Dh,EA,Ph,Yn,CA,Bu,At,Go,si,Uo,mh),hs,UO(Ip,Ph,Yn,At,mu,si),Us,hf,Zn,nO(Dh,Ip,Yn,At,mu,Et,si,mt),uO(B1,Yn,as),V1,Et,Am,Mm,G1,mt,_u),OA=JC(en,bA,Us,z1,Et,mt),Dm=new WeakSet,Zv=tk(Is),W1=Zb(new Uint32Array(1)),Pm=cA(W1,Us),Rm=hA(W1),H1=tb(Dm,hs,Zn,Zv,fi,nA(Zv),Pm,Rm),ff=ZC(ur),j1=Xk(km,Gu,Uo),Ns=Wb(j1),il=rk(ff,hs,_A,vA,yA,bm,N1,Om,SA,fA(qu),F1),Fs=qk(CO(Gu),j1),kA=sb(Ns,il,At,Fs,Cn),fs=Cb(HC(g1),B1,Tm,bb,NC,FC,LC,zC,BC,Dp,d1,Yu,U1),AA=rb(en,kA,fs,_n,il,Et,mt,sl),MA=db(en,pb,Us,_n,ik(ur,qu),Et,mt,Cn),DA=Ub(Ns,M1,At,Fs,Cn),Wo=Kk(L1),PA=Ib(en,fs,DA,hf,M1,Et,mt,Wo),Xi=JO(Go,Mm),RA=dA(_n,Xi),Zi=dk(Yu,RA),IA=zb(Zi,At,Cn),UA=Lb(en,IA,Zi,Et,mt),NA=Gb(Hu,At,Cn),FA=Vb(en,NA,Hu,Et,mt,mA),LA=gk(ff,il,ur,Xi),ol=mk(ff,hs,LA,bm,Om),zA=Xb(Ns,ol,At,Fs,Cn),BA=Yb(en,fs,zA,ol,Et,mt,sl),q1=_k(Zn,qu),VA=Jb(q1,At,Cn),GA=Kb(en,VA,q1,Et,mt,Wo),WA=iO(Ns,D1,At,Fs,Cn),HA=sO(en,fs,WA,D1,Et,mt,Wo),Y1=vk(Zn),jA=dO(Ns,Y1,At,Fs,Cn),qA=fO(en,fs,jA,Y1,Zn,Et,mt,Wo),YA=SO(Ns,ur,At,Fs,Cn),XA=TO(en,fs,YA,ur,Et,mt),ZA=wk(hf,_n,ju,Zn),df=Zk(hs,ur,ju,sA(ur,fi)),QA=IO(il,At,fi,Cn,df),KA=yk(ZA),JA=PO(en,KA,QA,Et,mt,Wo),$A=mb(fs,Zi,ol,ju,Zn,R1,mt,qu),X1=new WeakMap,eM=KO(MA,$A,V1,mt,X1,sl),Z1=kk(ff,hs,bm,N1,Om,F1),tM=Bk(Ns,Z1,At,Fs,Cn),nM=zk(en,fs,Z1,tM,Et,mt,sl),Q1=jb(il),rM=Uk(Q1,_n,ur,I1,Xi),pf=Ik(Q1,_n,rM,I1,Xi,Yu,qu),sM=Mk(Dh,_n,Zi,ur,ju,pf,Zn,Ph,R1,Xi),K1=Ak(sM),iM=Wk(Ns,Zi,ol,ur,K1,At,fi,Fs,Cn,df),oM=Gk(en,fs,K1,iM,Et,mt,Wo),aM=Dk(Us),lM=jk(aM,Et,new WeakSet,gA),uM=Rk(Zi,Hu,ur,pf,Zn,Xi),J1=Pk(uM,Zn),cM=tA(Ns,J1,At,Fs,Cn),hM=eA(en,fs,J1,cM,Et,mt),fM=lA(pf,At,Cn),dM=aA(en,_n,pf,fM,Et,mt,Wo),$1=jO(Is),Im=_O(Is),eT=new WeakMap,pM=kO(eT,fi),mM=$1?qC(hs,Zn,mO(Is),Im,vO(VC),Et,pM,mt,_u,new WeakMap,new WeakMap,rA(_u,fi),Is):void 0,gM=WO(Am,mt),_M=tO(Dm,hs,eO,pO,new WeakSet,Et,gM,Ah,gu,Pm,Rm),tT=Pb(mM,OA,H1,AA,PA,UA,FA,BA,GA,_M,HA,qA,XA,JA,eM,nM,oM,lM,hM,dM),vM=qO(en,xk,Et,mt),yM=XO(en,Ek,Et,mt),TM=ZO(en,Ck,Et,mt),SM=bk(_n,mt),wM=QO(en,SM,Et),xM=fb(tT,_n,Zn,iA,vM,yM,TM,wM,Yu),Um=AO(X1),EM=QC(Um),nT=Hb(Us),CM=aO(Um),rT=cO(Us),sT=new WeakMap,bM=wO(sT,as),OM=fk(nT,Us,_n,Zi,Hu,ol,ur,ju,Zn,rT,Im,bM,Xi),kM=lk(_n,OM,ur,Zn,Xi),AM=Db(Ns,nT,il,Zi,Hu,ol,ur,CM,rT,Im,At,_u,fi,Fs,Cn,df),MM=bO(eT),DM=Qk(sT),Qv=$1?kb(EM,en,fs,AM,kM,Yn,MM,Et,mt,_u,pA,DM,TA,sl):void 0,PM=$b(Zn,fi),RM=Jk(Dm,hs,km,Um,df,Ah,Pm,Rm),IM=Fk(tT,hs,_n,PM,RM),UM=NO(uf,Am),NM=FO(ym,Mm),FM=LO(Tm,G1),LM=zO(uf,mt);function kr(s){return typeof s>"u"}function Ke(s){return!kr(s)}function zM(s){return typeof s=="function"}function Gi(s){return typeof s=="number"}function Do(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function BM(s){return typeof s=="boolean"}function os(s){return Array.isArray(s)}function li(s){return typeof s=="string"}function lh(s){return li(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function Fe(s,e){if(!s)throw new Error(e)}function ls(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function iT(s){!s.isOffline&&s.state!=="running"&&Nm('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let oT=!1,Kv=!1;function Jv(s){oT=s}function VM(s){kr(s)&&oT&&!Kv&&(Kv=!0,Nm("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let aT=console;function GM(...s){aT.log(...s)}function Nm(...s){aT.warn(...s)}function WM(s){return new xM(s)}function HM(s,e,t){return new IM(s,e,t)}const Po=typeof self=="object"?self:null,jM=Po&&(Po.hasOwnProperty("AudioContext")||Po.hasOwnProperty("webkitAudioContext"));function qM(s,e,t){return Fe(Ke(Qv),"This node only works in a secure context (https or localhost)"),new Qv(s,e,t)}class YM{constructor(e,t,n,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function No(s){return FM(s)}function Li(s){return NM(s)}function gh(s){return LM(s)}function xa(s){return UM(s)}function XM(s){return s instanceof H1}function ZM(s,e){return s==="value"||No(e)||Li(e)||XM(e)}function Ua(s,...e){if(!e.length)return s;const t=e.shift();if(Do(s)&&Do(t))for(const n in t)ZM(n,t[n])?s[n]=t[n]:Do(t[n])?(s[n]||Object.assign(s,{[n]:{}}),Ua(s[n],t[n])):Object.assign(s,{[n]:t[n]});return Ua(s,...e)}function QM(s,e){return s.length===e.length&&s.every((t,n)=>e[n]===t)}function he(s,e,t=[],n){const r={},i=Array.from(e);if(Do(i[0])&&n&&!Reflect.has(i[0],n)&&(Object.keys(i[0]).some(u=>Reflect.has(s,u))||(Ua(r,{[n]:i[0]}),t.splice(t.indexOf(n),1),i.shift())),i.length===1&&Do(i[0]))Ua(r,i[0]);else for(let o=0;o<t.length;o++)Ke(i[o])&&(r[t[o]]=i[o]);return Ua(s,r)}function KM(s){return s.constructor.getDefaults()}function Na(s,e){return kr(s)?e:s}function Ma(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class di{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Po&&this.toString()===Po.TONE_DEBUG_CLASS)&&GM(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}di.version=f1;const Fm=1e-6;function Za(s,e){return s>e+Fm}function zp(s,e){return Za(s,e)||rs(s,e)}function Nh(s,e){return s+Fm<e}function rs(s,e){return Math.abs(s-e)<Fm}function JM(s,e,t){return Math.max(Math.min(s,t),e)}class qr extends di{constructor(){super(),this.name="Timeline",this._timeline=[];const e=he(qr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Fe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Fe(zp(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(rs(this._timeline[t].time,e)){for(let n=t;n>=0&&rs(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&zp(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<i;){let o=Math.floor(n+(i-n)/2);const u=this._timeline[o],c=this._timeline[o+1];if(rs(u[t],e)){for(let h=o;h<this._timeline.length;h++){const f=this._timeline[h];if(rs(f[t],e))o=h;else break}return o}else{if(Nh(u[t],e)&&Za(c[t],e))return o;Za(u[t],e)?i=o:n=o+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,r,i)):r===-1&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&rs(this._timeline[n].time,e)){let r=n;for(let i=n;i>=0&&rs(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const lT=[];function mf(s){lT.push(s)}function $M(s){lT.forEach(e=>e(s))}const uT=[];function gf(s){uT.push(s)}function eD(s){uT.forEach(e=>e(s))}class Xu extends di{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{kr(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(kr(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(kr(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,i=n.length;r<i;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Xu.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class cT extends Xu{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Zu extends cT{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new qr,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=he(Zu.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=WM({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new YM(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||($M(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Fe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Fe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Fe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Fe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Fe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Fe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Fe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return qM(this.rawContext,e,t)}addAudioWorkletModule(e){return Jt(this,void 0,void 0,function*(){Fe(Ke(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Jt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return xa(this._context)?this._context.resume():Promise.resolve()}close(){return Jt(this,void 0,void 0,function*(){xa(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&eD(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:i+t})};return r(),n}}class tD extends cT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Jt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ct(s,e){os(e)?e.forEach(t=>Ct(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function Lm(s,e){os(e)?e.forEach(t=>Lm(s,t)):Object.defineProperty(s,e,{writable:!0})}const ht=()=>{};class ft extends di{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ht;const e=he(ft.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,li(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ht,onload:ht,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ss().sampleRate}set(e){return e instanceof ft?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Jt(this,void 0,void 0,function*(){const t=ft.load(e).then(n=>{this.set(n),this.onload(this)});ft.downloads.push(t);try{yield t}finally{const n=ft.downloads.indexOf(t);ft.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=os(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,i=ss(),o=i.createBuffer(n,r,i.sampleRate),u=!t&&n===1?[e]:e;for(let c=0;c<n;c++)o.copyToChannel(u[c],c);return this._buffer=o,this}toMono(e){if(Gi(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(Gi(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Fe(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);Fe(n<r,"The start time must be less than the end time");const i=r-n,o=ss().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let u=0;u<this.numberOfChannels;u++)o.copyToChannel(this.getChannelData(u).subarray(n,r),u);return new ft(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ft().fromArray(e)}static fromUrl(e){return Jt(this,void 0,void 0,function*(){return yield new ft().load(e)})}static load(e){return Jt(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let h=c[0];for(const f of c)if(ft.supportsType(f)){h=f;break}e=e.replace(t[0],h)}const n=ft.baseUrl===""||ft.baseUrl.endsWith("/")?ft.baseUrl:ft.baseUrl+"/",r=document.createElement("a");r.href=n+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield ss().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return Jt(this,void 0,void 0,function*(){for(yield Promise.resolve();ft.downloads.length;)yield ft.downloads[0]})}}ft.baseUrl="";ft.downloads=[];class _f extends Zu{constructor(){super({clockSource:"offline",context:gh(arguments[0])?arguments[0]:HM(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:gh(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=gh(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Jt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Jt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new ft(t)})}close(){return Promise.resolve()}}const hT=new tD;let Eo=hT;function ss(){return Eo===hT&&jM&&nD(new Zu),Eo}function nD(s,e=!1){e&&Eo.dispose(),xa(s)?Eo=new Zu(s):gh(s)?Eo=new _f(s):Eo=s}function rD(){return Eo.resume()}if(Po&&!Po.TONE_SILENCE_LOGGING){const e=` * Tone.js v${f1} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function sD(s){return Math.pow(10,s/20)}function iD(s){return 20*(Math.log(s)/Math.LN10)}function fT(s){return Math.pow(2,s/12)}let vf=440;function oD(){return vf}function aD(s){vf=s}function Bp(s){return Math.round(dT(s))}function dT(s){return 69+12*Math.log2(s/vf)}function lD(s){return vf*Math.pow(2,(s-69)/12)}class zm extends di{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof zm&&this.fromType(this._val),kr(this._val))return this._noArg();if(li(this._val)&&kr(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Do(this._val)){let e=0;for(const t in this._val)if(Ke(this._val[t])){const n=this._val[t],r=new this.constructor(this.context,t).valueOf()*n;e+=r}return e}if(Ke(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return li(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class is extends zm{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new is(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),u=Math.round(r/n)*n-r;return r+u*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let n=t[0],r=new is(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new is(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(n=i,r=o)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Bp(this.toFrequency())}_now(){return this.context.now()}}class jr extends is{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return oD()}static set A4(e){aD(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:jr.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=uD[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:jr.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new jr(this.context,this.valueOf()*fT(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Bp(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/jr.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),cD[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return lD(e)}static ftom(e){return Bp(e)}}const uD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},cD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class ou extends is{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ar extends di{constructor(){super();const e=he(ar.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ss()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return VM(e),new is(this.context,e).toSeconds()}toFrequency(e){return new jr(this.context,e).toFrequency()}toTicks(e){return new ou(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{kr(e[n])&&delete t[n]}),t}get(){const e=KM(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];Ke(n)&&Ke(n.value)&&Ke(n.setValueAtTime)?e[t]=n.value:n instanceof ar?e[t]=n._getPartialProperties(e[t]):os(n)||Gi(n)||li(n)||BM(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ke(this[t])&&(this[t]&&Ke(this[t].value)&&Ke(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof ar?this[t].set(e[t]):this[t]=e[t])}),this}}class Bm extends qr{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return ls(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class dt extends ar{constructor(){super(he(dt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=he(dt.getDefaults(),arguments,["param","units","convert"]);for(Fe(Ke(e.param)&&(No(e.param)||e.param instanceof dt),"param must be an AudioParam");!No(e.param);)e.param=e.param._param;this._swappable=Ke(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new qr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ke(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ar.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ke(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ke(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ke(this.maxValue)&&Ke(this.minValue)&&ls(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?sD(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?iD(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return Fe(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let u;o===null?u=this._initialValue:u=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,u,r.value,r.constant,t))}else if(n===null)i=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const u=this._events.getBefore(r.time);u===null?o=this._initialValue:o=u.value}n.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,n.time,n.value,t):i=this._exponentialInterpolate(r.time,o,n.time,n.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return Fe(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=rs(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return Fe(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);Fe(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),Fe(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=n/(e.length-1);for(let u=1;u<e.length;u++){const c=this._fromType(e[u])*r;this.linearRampToValueAtTime(this._toType(c),t+u*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Fe(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));Fe(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),i=this._events.getAfter(t);return r&&rs(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),i=r?r.time:t+2,o=(i-t)/10;for(let u=t;u<i;u+=o)e.linearRampToValueAtTime(this.getValueAtTime(u),u)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){Fe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,i){return n+(t-n)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,n,r,i){return t+(r-t)*((i-e)/(n-e))}_exponentialInterpolate(e,t,n,r,i){return t*Math.pow(r/t,(i-e)/(n-e))}}class De extends ar{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ke(this.input)?No(this.input)||this.input instanceof dt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ke(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ke(e)&&(e instanceof De||Li(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Fe(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return Wi(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Nm("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return hD(this,e,t,n),this}chain(...e){return vu(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ke(this.input)&&(this.input instanceof De?this.input.dispose():Li(this.input)&&this.input.disconnect()),Ke(this.output)&&(this.output instanceof De?this.output.dispose():Li(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function vu(...s){const e=s.shift();s.reduce((t,n)=>(t instanceof De?t.connect(n):Li(t)&&Wi(t,n),n),e)}function Wi(s,e,t=0,n=0){for(Fe(Ke(s),"Cannot connect from undefined node"),Fe(Ke(e),"Cannot connect to undefined node"),(e instanceof De||Li(e))&&Fe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Fe(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof De||e instanceof dt;)Ke(e.input)&&(e=e.input);for(;s instanceof De;)Ke(s.output)&&(s=s.output);No(e)?s.connect(e,t):s.connect(e,t,n)}function hD(s,e,t=0,n=0){if(Ke(e))for(;e instanceof De;)e=e.input;for(;!Li(s);)Ke(s.output)&&(s=s.output);No(e)?s.disconnect(e,t):Li(e)?s.disconnect(e,t,n):s.disconnect()}class Tt extends De{constructor(){super(he(Tt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=he(Tt.getDefaults(),arguments,["gain","units"]);this.gain=new dt({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ct(this,"gain")}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Qa extends De{constructor(e){super(e),this.onended=ht,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Tt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(De.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ht})}_startGain(e,t=1){Fe(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Fe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ht&&(this.onended(this),this.onended=ht,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Fe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ht,this}}class Fh extends Qa{constructor(){super(he(Fh.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=he(Fh.getDefaults(),arguments,["offset"]);Wi(this._source,this._gainNode),this.offset=new dt({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Qa.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class xt extends De{constructor(){super(he(xt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=he(xt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Fh({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return Vm(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Vm(s,e,t,n){(e instanceof dt||No(e)||e instanceof xt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof xt&&(e.overridden=!0)),Wi(s,e,t,n)}class Lh extends dt{constructor(){super(he(Lh.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new qr(1/0),this._multiplier=1;const e=he(Lh.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(dt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/n,1));for(let u=0;u<=o;u++){const c=n*u+t,h=this._exponentialApproach(i.time,i.value,r,n,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let u=0;u<=i;u++){const c=o*u+r.time,h=this._exponentialInterpolate(r.time,r.value,t,n,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(kr(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),u=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+u)/o,h=(-r-u)/o;return(c>0?c:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class zh extends xt{constructor(){super(he(zh.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=he(zh.getDefaults(),arguments,["value"]);this.input=this._param=new Lh({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(xt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Bh extends ar{constructor(){super(he(Bh.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Bm,this._tickOffset=new qr,this._ticksAtTime=new qr,this._secondsAtTime=new qr;const e=he(Bh.getDefaults(),arguments,["frequency"]);this.frequency=new zh({context:this.context,units:e.units,value:e.frequency}),Ct(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ar.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),Ke(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||n,u=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,h=>{let f=o.time;const d=this._tickOffset.get(h.time);d&&d.time>=o.time&&(u=d.ticks,f=d.time),o.state==="started"&&h.state!=="started"&&(u+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(f),h.time!=i.time&&(c={state:h.state,time:h.time,ticks:u})),o=h}),this._state.remove(i),c&&this._ticksAtTime.add(c),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,u=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let h=i.time;const f=this._tickOffset.get(c.time);f&&f.time>=i.time&&(o=f.seconds,h=f.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-h,c.time!=n.time&&(u={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(n),u&&this._secondsAtTime.add(u),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(n.time,r.time),o=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,n),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),u=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),h=u-c;let f=Math.ceil(h)-h;f=rs(f,1)?0:f;let d=this.frequency.getTimeOfTick(u+f);for(;d<t;){try{n(d,Math.round(this.getTicksAtTime(d)))}catch(m){i=m;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class yu extends ar{constructor(){super(he(yu.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ht,this._lastUpdate=0,this._state=new Bm("stopped"),this._boundLoop=this._loop.bind(this);const e=he(yu.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Bh({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ct(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ar.getDefaults(),{callback:ht,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){iT(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Xu.mixin(yu);class Gm extends di{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=he(Gm.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ht,onload:ht,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Fe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=ht,r=ht){return li(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ft(this.baseUrl+t,n,r))):this._buffers.set(e.toString(),new ft(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Da extends ou{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class fD extends ar{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new qr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}mf(s=>{s.draw=new fD({context:s})});gf(s=>{s.draw.dispose()});class dD extends di{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Fe(Ke(e.time),"Events must have a time property"),Fe(Ke(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new pD(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class pD{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Hi extends De{constructor(){super(he(Hi.getDefaults(),arguments,["volume"])),this.name="Volume";const e=he(Hi.getDefaults(),arguments,["volume"]);this.input=this.output=new Tt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ct(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let mD=class Vp extends De{constructor(){super(he(Vp.getDefaults(),arguments)),this.name="Destination",this.input=new Hi({context:this.context}),this.output=new Tt({context:this.context}),this.volume=this.input.volume;const e=he(Vp.getDefaults(),arguments);vu(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),vu(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};mf(s=>{s.destination=new mD({context:s})});gf(s=>{s.destination.dispose()});class gD extends di{constructor(e){super(),this.name="TimelineValue",this._timeline=new qr({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class ui extends De{constructor(){super(Object.assign(he(ui.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return Vm(this,e,t,n),this}}class Fo extends ui{constructor(){super(Object.assign(he(Fo.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=he(Fo.getDefaults(),arguments,["mapping","length"]);os(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):zM(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(xt.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;n[r]=e(o,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));Fe(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Tu extends ui{constructor(){super(Object.assign(he(Tu.getDefaults(),arguments,["value"]))),this.name="Pow";const e=he(Tu.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Fo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(ui.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ji{constructor(e,t){this.id=ji._eventId++,this._remainderTime=0;const n=Object.assign(ji.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:ht,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ji._eventId=0;class Wm extends ji{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Wm.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ji.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Nh(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Da(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Nh(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Da(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Za(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Su extends ar{constructor(){super(he(Su.getDefaults(),arguments)),this.name="Transport",this._loop=new gD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new qr,this._repeatedEvents=new dD,this._syncedSignals=[],this._swingAmount=0;const e=he(Su.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new yu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ct(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ar.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Da(this.context,this._swingTicks*2/3).toSeconds()*r}Jv(!0),this._timeline.forEachAtTime(t,n=>n.invoke(e)),Jv(!1)}schedule(e,t){const n=new ji(this,{callback:e,time:new ou(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const i=new Wm(this,{callback:e,duration:new is(this.context,r).toTicks(),interval:new is(this.context,t).toTicks(),time:new ou(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new ji(this,{callback:e,once:!0,time:new ou(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Da(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let n;return Ke(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){os(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new is(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new is(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Da(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Da(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const n=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(n)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,h=new Tt(c),f=new Tu(-1),d=new Tt(c);r.chain(h,f,d),r=d,i=1/i,o=[h,f,d]}t||(e.getValueAtTime(n)!==0?t=e.getValueAtTime(n)/i:t=0);const u=new Tt(t);return r.connect(u),u.connect(e._param),o.push(u),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(r=>r.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Lm(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Xu.mixin(Su);mf(s=>{s.transport=new Su({context:s})});gf(s=>{s.transport.dispose()});class In extends De{constructor(e){super(e),this.input=void 0,this._state=new Bm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ht,this._syncedStop=ht,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Hi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ct(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,onstop:ht,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=kr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Fe(Za(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Na(t,0)),i.duration=n?this.toSeconds(n):void 0);const o=this.context.transport.schedule(u=>{this._start(u,t,n)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else iT(this.context),this._start(r,t,n);return this}stop(e){let t=kr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ke(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Za(t,0)){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ht,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ka extends Qa{constructor(){super(he(Ka.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=he(Ka.getDefaults(),arguments,["url","onload"]);Wi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new dt({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ft(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Qa.getDefaults(),{url:new ft,loop:!1,loopEnd:0,loopStart:0,onload:ht,onerror:ht,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){Fe(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Na(t,this.loopStart):t=Na(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const u=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),h=u-c;zp(o,u)&&(o=(o-c)%h+c),rs(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Nh(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ke(n)){let u=this.toSeconds(n);u=Math.max(u,0),this.stop(i+u)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class wu extends In{constructor(){super(he(wu.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=he(wu.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(In.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Fe(e in $v,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=$v[this._type];this._source=new Ka({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Ta=44100*5,ep=2,$s={brown:null,pink:null,white:null},$v={get brown(){if(!$s.brown){const s=[];for(let e=0;e<ep;e++){const t=new Float32Array(Ta);s[e]=t;let n=0;for(let r=0;r<Ta;r++){const i=Math.random()*2-1;t[r]=(n+.02*i)/1.02,n=t[r],t[r]*=3.5}}$s.brown=new ft().fromArray(s)}return $s.brown},get pink(){if(!$s.pink){const s=[];for(let e=0;e<ep;e++){const t=new Float32Array(Ta);s[e]=t;let n,r,i,o,u,c,h;n=r=i=o=u=c=h=0;for(let f=0;f<Ta;f++){const d=Math.random()*2-1;n=.99886*n+d*.0555179,r=.99332*r+d*.0750759,i=.969*i+d*.153852,o=.8665*o+d*.3104856,u=.55*u+d*.5329522,c=-.7616*c-d*.016898,t[f]=n+r+i+o+u+c+h+d*.5362,t[f]*=.11,h=d*.115926}}$s.pink=new ft().fromArray(s)}return $s.pink},get white(){if(!$s.white){const s=[];for(let e=0;e<ep;e++){const t=new Float32Array(Ta);s[e]=t;for(let n=0;n<Ta;n++)t[n]=Math.random()*2-1}$s.white=new ft().fromArray(s)}return $s.white}};function Ho(s,e){return Jt(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,n=new _f(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Vh extends Qa{constructor(){super(he(Vh.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=he(Vh.getDefaults(),arguments,["frequency","type"]);Wi(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new dt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new dt({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ct(this,["frequency","detune"])}static getDefaults(){return Object.assign(Qa.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Kt extends In{constructor(){super(he(Kt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=he(Kt.getDefaults(),arguments,["frequency","type"]);this.frequency=new xt({context:this.context,units:"frequency",value:e.frequency}),Ct(this,"frequency"),this.detune=new xt({context:this.context,units:"cents",value:e.detune}),Ct(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(In.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Vh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Kt._periodicWaveCache.find(t=>t.phase===this._phase&&QM(t.partials,this._partials));{const e=Kt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(Ke(n)){const{partials:r,wave:i}=n;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Kt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Kt._periodicWaveCache.length>100&&Kt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){ls(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let u=1;if(e==="custom"){if(u=this._partials.length+1,this._partialCount=this._partials.length,r=u,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(u=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],u=Math.max(u,2),r=u):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const h=2/(c*Math.PI);let f;switch(e){case"sine":f=c<=u?1:0,this._partials[c-1]=f;break;case"square":f=c&1?2*h:0,this._partials[c-1]=f;break;case"sawtooth":f=h*(c&1?1:-1),this._partials[c-1]=f;break;case"triangle":c&1?f=2*(h*h)*(c-1>>1&1?-1:1):f=0,this._partials[c-1]=f;break;case"custom":f=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}f!==0?(i[c]=-f*Math.sin(t*c),o[c]=f*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,n){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*n)+t[o]*Math.sin(o*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)n=Math.max(this._inverseFFT(e,t,o/i*r),n);return JM(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Kt._periodicWaveCache=[];class _D extends ui{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Fo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qi extends xt{constructor(){super(Object.assign(he(qi.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=he(qi.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Tt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(xt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class xu extends In{constructor(){super(he(xu.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new _D({context:this.context}),this._modulationNode=new Tt({context:this.context});const e=he(xu.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qi({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ct(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Eu extends In{constructor(){super(he(Eu.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Tt({context:this.context,gain:0});const e=he(Eu.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Kt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new xt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qi({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new qi({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ct(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ja extends In{constructor(){super(he(Ja.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Tt({context:this.context,gain:0}),this._thresh=new Fo({context:this.context,mapping:t=>t<=0?-1:1});const e=he(Ja.getDefaults(),arguments,["frequency","width"]);this.width=new xt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ct(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(In.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Cu extends In{constructor(){super(he(Cu.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=he(Cu.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new xt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new xt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ct(this,["frequency","detune"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+n*i)}}get count(){return this._oscillators.length}set count(e){if(ls(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Kt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ht});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class bu extends In{constructor(){super(he(bu.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qi({context:this.context,value:2});const e=he(bu.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ja({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ct(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(In.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const e0={am:xu,fat:Cu,fm:Eu,oscillator:Kt,pulse:Ja,pwm:bu};class Lo extends In{constructor(){super(he(Lo.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=he(Lo.getDefaults(),arguments,["frequency","type"]);this.frequency=new xt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new xt({context:this.context,units:"cents",value:e.detune}),Ct(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Kt.getDefaults(),Eu.getDefaults(),xu.getDefaults(),Cu.getDefaults(),Ja.getDefaults(),bu.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=e0[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof e0[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Gi(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Gi(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&li(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Jt(this,void 0,void 0,function*(){return Ho(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Hm extends xt{constructor(){super(Object.assign(he(Hm.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Tt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,vu(this._constantSource,this._sum)}static getDefaults(){return Object.assign(xt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Gh extends ui{constructor(){super(Object.assign(he(Gh.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=he(Gh.getDefaults(),arguments,["min","max"]);this._mult=this.input=new qi({context:this.context,value:e.max-e.min}),this._add=this.output=new Hm({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(ui.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function pT(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){ls(i,s,e),t.set(this,i)}})}}function pi(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){ls(this.toSeconds(i),s,e),t.set(this,i)}})}}class Ou extends In{constructor(){super(he(Ou.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=he(Ou.getDefaults(),arguments,["url","onload"]);this._buffer=new ft({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(In.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ht,onerror:ht,playbackRate:1,reverse:!1})}load(e){return Jt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ht){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=Na(t,this._loopStart):t=Na(t,0);const r=this.toSeconds(t),i=n;n=Na(n,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(n);o=o/this._playbackRate,e=this.toSeconds(e);const u=new Ka({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&kr(i)?u.start(e,r):u.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&ls(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&ls(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}cs([pi(0)],Ou.prototype,"fadeIn",void 0);cs([pi(0)],Ou.prototype,"fadeOut",void 0);class vD extends ui{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Fo({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Xr extends De{constructor(){super(he(Xr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new xt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=he(Xr.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(De.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(li(e))return e;{let n;for(n in uh)if(uh[n][t]===e)return n;return e}}_setCurve(e,t,n){if(li(n)&&Reflect.has(uh,n)){const r=uh[n];Do(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(os(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const u=1/r;r=(1-o)/u}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let u=this._attackCurve;for(let c=1;c<u.length;c++)if(u[c-1]<=o&&o<=u[c]){u=this._attackCurve.slice(c),u[0]=o;break}this._sig.setValueCurveAtTime(u,e,r,t)}if(i&&this.sustain<1){const u=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(u,i+c):this._sig.exponentialApproachValueAtTime(u,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(Fe(os(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return Vm(this,e,t,n),this}asArray(e=1024){return Jt(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new _f(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,u=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/u,decay:t*this.toSeconds(this.decay)/u,release:t*this.toSeconds(this.release)/u,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/u,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}cs([pi(0)],Xr.prototype,"attack",void 0);cs([pi(0)],Xr.prototype,"decay",void 0);cs([pT(0,1)],Xr.prototype,"sustain",void 0);cs([pi(0)],Xr.prototype,"release",void 0);const uh=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const m=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=m/10+t*.83}r[128-1]=1;const o=[],u=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*u)/u;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/(128-1);const m=Math.pow(t,3)*4+.2,_=Math.cos(m*Math.PI*2*t);h[e]=Math.abs(_*(1-t))}function f(m){const _=new Array(m.length);for(let y=0;y<m.length;y++)_[y]=1-m[y];return _}function d(m){return m.slice(0).reverse()}return{bounce:{In:f(h),Out:h},cosine:{In:n,Out:d(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:f(r)},sine:{In:c,Out:f(c)},step:{In:o,Out:f(o)}}})();class zo extends De{constructor(){super(he(zo.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=he(zo.getDefaults(),arguments);this._volume=this.output=new Hi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ct(this,"volume")}static getDefaults(){return Object.assign(De.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(u=>{r[t]=u,n.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ci extends zo{constructor(){super(he(ci.getDefaults(),arguments));const e=he(ci.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(zo.getDefaults(),{detune:0,onsilence:ht,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof jr?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}cs([pi(0)],ci.prototype,"portamento",void 0);class yf extends Xr{constructor(){super(he(yf.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Tt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ku extends ci{constructor(){super(he(ku.getDefaults(),arguments)),this.name="Synth";const e=he(ku.getDefaults(),arguments);this.oscillator=new Lo(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new yf(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ct(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ci.getDefaults(),{envelope:Object.assign(Ma(Xr.getDefaults(),Object.keys(De.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ma(Lo.getDefaults(),[...Object.keys(In.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Au extends De{constructor(){super(he(Au.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=he(Au.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new dt({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new dt({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new dt({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new dt({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(De.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Fe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const n=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class $a extends De{constructor(){super(he($a.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._filters=[];const e=he($a.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new xt({context:this.context,units:"positive",value:e.Q}),this.frequency=new xt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new xt({context:this.context,units:"cents",value:e.detune}),this.gain=new xt({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ct(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(De.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Fe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Gi(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let r=n.indexOf(t);Fe(r!==-1,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new Au({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,vu(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Au({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>n[o]*=i)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Lm(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Mu extends Xr{constructor(){super(he(Mu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=he(Mu.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Tu({context:this.context,value:e.exponent}),this._scale=this.output=new Gh({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Xr.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);ls(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Du extends ci{constructor(){super(he(Du.getDefaults(),arguments)),this.name="MonoSynth";const e=he(Du.getDefaults(),arguments);this.oscillator=new Lo(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new $a(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Mu(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new yf(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ct(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(ci.getDefaults(),{envelope:Object.assign(Ma(Xr.getDefaults(),Object.keys(De.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Ma($a.getDefaults(),Object.keys(De.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Ma(Mu.getDefaults(),Object.keys(De.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Ma(Lo.getDefaults(),Object.keys(In.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Pu extends ku{constructor(){super(he(Pu.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=he(Pu.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ct(this,["oscillator","envelope"])}static getDefaults(){return Ua(ci.getDefaults(),ku.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof jr?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}cs([pT(0)],Pu.prototype,"octaves",void 0);cs([pi(0)],Pu.prototype,"pitchDecay",void 0);const mT=new Set;function jm(s){mT.add(s)}function gT(s,e){const t=`registerProcessor("${s}", ${e})`;mT.add(t)}const yD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;jm(yD);const TD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;jm(TD);const SD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;jm(SD);const wD="feedback-comb-filter",xD=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;gT(wD,xD);class Ru extends zo{constructor(){super(he(Ru.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=he(Ru.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(Fe(lh(n)||Gi(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),lh(n)){const i=new jr(this.context,n).toMidi();t[i]=e.urls[n]}else Gi(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Gm({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(zo.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ht,onerror:ht,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=dT(new jr(this.context,r).toFrequency()),o=Math.round(i),u=i-o,c=this._findClosest(o),h=o-c,f=this._buffers.get(h),d=fT(c+u),m=new Ka({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);m.start(t,0,f.duration/d,n),os(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(m),m.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const _=this._activeSources.get(o),y=_.indexOf(m);y!==-1&&_.splice(y,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new jr(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const i=this.toSeconds(n);return this.triggerAttack(e,i,r),os(t)?(Fe(os(e),"notes must be an array when duration is array"),e.forEach((o,u)=>{const c=t[Math.min(u,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(Fe(lh(e)||isFinite(e),`note must be a pitch or midi: ${e}`),lh(e)){const r=new jr(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}cs([pi(0)],Ru.prototype,"attack",void 0);cs([pi(0)],Ru.prototype,"release",void 0);class Wh extends De{constructor(){super(Object.assign(he(Wh.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new vD({context:this.context}),this.a=new Tt({context:this.context,gain:0}),this.b=new Tt({context:this.context,gain:0}),this.output=new Tt({context:this.context}),this._internalChannels=[this.a,this.b];const e=he(Wh.getDefaults(),arguments,["fade"]);this.fade=new xt({context:this.context,units:"normalRange",value:e.fade}),Ct(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Wi(this._split,this.a.gain,0),Wi(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(De.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class t0 extends De{constructor(e){super(e),this.name="Effect",this._dryWet=new Wh({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Tt({context:this.context}),this.effectReturn=new Tt({context:this.context}),this.input=new Tt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ct(this,"wet")}static getDefaults(){return Object.assign(De.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Hh extends De{constructor(){super(Object.assign(he(Hh.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=he(Hh.getDefaults(),arguments,["pan"]);this.pan=new dt({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ct(this,"pan")}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const ED="bit-crusher",CD=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;gT(ED,CD);class jh extends De{constructor(){super(he(jh.getDefaults(),arguments,["channels"])),this.name="Merge";const e=he(jh.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(De.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class qh extends t0{constructor(){super(he(qh.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=he(qh.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(t0.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),ls(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),ls(e,0),this._preDelay=e,this.generate()}generate(){return Jt(this,void 0,void 0,function*(){const e=this.ready,t=new _f(2,this._decay+this._preDelay,this.context.sampleRate),n=new wu({context:t}),r=new wu({context:t}),i=new jh({context:t});n.connect(i,0,0),r.connect(i,0,1);const o=new Tt({context:t}).toDestination();i.connect(o),n.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const u=t.render();return this.ready=u.then(ht),yield e,this._convolver.buffer=(yield u).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Zt extends De{constructor(){super(he(Zt.getDefaults(),arguments,["solo"])),this.name="Solo";const e=he(Zt.getDefaults(),arguments,["solo"]);this.input=this.output=new Tt({context:this.context}),Zt._allSolos.has(this.context)||Zt._allSolos.set(this.context,new Set),Zt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(De.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Zt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Zt._soloed.has(this.context)||Zt._soloed.set(this.context,new Set),Zt._soloed.get(this.context).add(this)}_removeSolo(){Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).delete(this)}_isSoloed(){return Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).has(this)}_noSolos(){return!Zt._soloed.has(this.context)||Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Zt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Zt._allSolos=new Map;Zt._soloed=new Map;class Yh extends De{constructor(){super(he(Yh.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=he(Yh.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Hh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Hi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ct(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class To extends De{constructor(){super(he(To.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=he(To.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Zt({solo:e.solo,context:this.context}),this._panVol=this.output=new Yh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ct(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return To.buses.has(e)||To.buses.set(e,new Tt({context:this.context})),To.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new Tt({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}To.buses=new Map;class bD extends De{constructor(){super(...arguments),this.name="Listener",this.positionX=new dt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new dt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new dt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new dt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new dt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new dt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new dt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new dt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new dt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(De.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}mf(s=>{s.listener=new bD({context:s})});gf(s=>{s.listener.dispose()});ss().transport;const qm=ss().destination;ss().destination;ss().listener;ss().draw;ss();const Ym=new $a(900,"highpass"),_T=new Hi(-6);_T.chain(Ym,qm);const OD=new qh(3).connect(_T),Tf=new Du({envelope:{attack:0,decay:.9,sustain:.2,release:.1}});Tf.oscillator.type="triangle2";Tf.volume.value=-6;Tf.chain(Ym,qm);const Sf=new Du({envelope:{attack:.4,decay:.9,sustain:.7,release:.6}}).connect(OD);Sf.oscillator.type="triangle";Sf.volume.value=-6;Sf.chain(Ym,qm);function kD(){return Math.floor((Math.random()-.5)*20)}let n0=!1;const RP=async(s=0)=>{n0||(await rD(),n0=!0);try{if(s>2e3)Sf.triggerAttackRelease(60,.3);else if(s>1e3){let e=310;e+=kD(),Tf.triggerAttackRelease(e,.001)}}catch(e){console.warn(e)}};export{qD as A,$D as B,UD as C,gE as D,JD as E,ND as H,zD as L,eP as O,jD as P,$t as R,ZD as S,VD as T,nP as U,tP as V,R0 as a,Jh as b,DD as c,PD as d,Kh as e,RD as f,sP as g,PC as h,GD as i,rP as j,HD as k,WD as l,Aw as m,LD as n,YD as o,RP as p,FD as q,XD as r,Ze as s,wt as u};
