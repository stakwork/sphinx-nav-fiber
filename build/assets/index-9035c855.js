import{Y as E,Z as C,j as e,X as c,r as a,a0 as O,aP as R}from"./index-32144865.js";import{u as B,aA as b,az as _,bO as p,aS as z,cs as I,cu as L,bY as x,ca as M}from"./index-a820256c.js";import{T as k}from"./toastMessage-ef227247.js";import{S as A}from"./Skeleton-d791a65b.js";const P=()=>e.jsx(c,{children:e.jsx(c,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(c,{align:"center",direction:"row",children:e.jsx(D,{children:"Remove node"})})})}),D=E(C)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,S=i=>{x(e.jsx(k,{message:i}),{icon:!1,position:x.POSITION.BOTTOM_CENTER,type:i===R?"success":"error"})},F=()=>{const{close:i}=B("removeNode"),[d,r]=a.useState(!1),[y,f]=b(s=>[s.removeNode,s.setSelectedNode]),[j,m]=a.useState(!1),[o,T]=a.useState(),[u,h]=a.useState(),t=_(),l=()=>{i()};a.useEffect(()=>{(async()=>{if(t){m(!0);try{if(t.type==="topic"){const{data:n}=await I({search:t==null?void 0:t.name}),w=n.find(N=>N.topic===t.name);h(w)}else T(t)}catch(n){console.log(n)}finally{m(!1)}}})()},[t]);const v=async()=>{r(!0);try{S("Topic node removal coming soon"),f(null),l()}catch(s){console.warn(s)}finally{r(!1)}},g=async()=>{let s="";if(o!=null&&o.ref_id)s=o.ref_id;else if(o!=null&&o.id)s=o.id;else return;r(!0);try{await L(s),y(o),f(null),S("Removed Node"),l()}catch(n){console.warn(n)}finally{r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),j?e.jsx(A,{}):e.jsxs(c,{direction:"row",justify:"space-between",children:[e.jsx(p,{color:"secondary",onClick:l,size:"medium",variant:"outlined",children:"Cancel"}),e.jsxs(p,{disabled:d||!o&&!u,onClick:o&&!u?g:v,size:"medium",variant:"text",children:["Confirm",d&&e.jsx(z,{color:O.BLUE_PRESS_STATE,size:10})]})]})]})},Z=()=>e.jsx(M,{id:"removeNode",kind:"small",preventOutsideClose:!0,children:e.jsx(F,{})});export{Z as RemoveNodeModal};
