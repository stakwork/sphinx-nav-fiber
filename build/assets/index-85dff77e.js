import{r as S,F as Rv,g as jp,_ as bt,aJ as vb,R as j,j as N,D as _b,$ as T5,W as Mv,Y as Ki,a0 as Qn,X as wn,N as yb,aK as E5,aL as C5,aM as O5,c as k5,Z as wi,aN as A5,Q as R5}from"./index-eaef4030.js";import{L as vg,T as jf,R as M5,U as Es,B as Pv,M as $p,C as xr,a as P5,O as Dv,P as $f,b as mc,c as _g,N as D5,A as I5,W as N5,d as xb,e as L5,f as F5,V as U5,g as Te,h as Ct,i as z5,j as wb,D as Bo,k as od,F as B5,l as Vp,I as bb,m as Yd,n as m0,o as Ql,p as j5,q as Iv,r as Qi,s as g0,t as $y,v as Hp,w as Zo,x as ol,y as $5,z as al,E as Nv,G as Sb,H as Zd,J as V5,K as H5,Q as Tb,X as gc,Y as qu,Z as W5,_ as G5,$ as q5,a0 as Lv,a1 as Wp,a2 as gt,a3 as Qu,a4 as Y5,a5 as Fd,a6 as Z5,a7 as X5,a8 as Fv,a9 as li,aa as vc,ab as K5,ac as Nc,ad as Q5,ae as J5,af as e4,ag as t4,ah as n4,ai as qe,aj as r4,ak as go,al as Eb,am as Cb,an as Ia,ao as i4,ap as Vy,aq as Na,ar as s4,as as o4,at as a4,au as l4,av as c4,aw as Ji,ax as Le,ay as u4,az as Vf,aA as Uv,aB as Ob,aC as f4,aD as kb,aE as Ab,aF as h4,aG as d4,aH as zv,aI as Yu,aJ as p4,aK as m4,aL as g4,aM as v4,aN as Rb,aO as _4,aP as y4}from"./index-0b92b853.js";import{T as x4,f as Hy}from"./index-df871ecf.js";const w4=["top","right","bottom","left"],Xo=Math.min,ni=Math.max,Xd=Math.round,ad=Math.floor,Ko=n=>({x:n,y:n}),b4={left:"right",right:"left",bottom:"top",top:"bottom"},S4={start:"end",end:"start"};function v0(n,e,t){return ni(n,Xo(e,t))}function oo(n,e){return typeof n=="function"?n(e):n}function ao(n){return n.split("-")[0]}function Lc(n){return n.split("-")[1]}function Bv(n){return n==="x"?"y":"x"}function jv(n){return n==="y"?"height":"width"}function Fc(n){return["top","bottom"].includes(ao(n))?"y":"x"}function $v(n){return Bv(Fc(n))}function T4(n,e,t){t===void 0&&(t=!1);const r=Lc(n),i=$v(n),s=jv(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Kd(o)),[o,Kd(o)]}function E4(n){const e=Kd(n);return[_0(n),e,_0(e)]}function _0(n){return n.replace(/start|end/g,e=>S4[e])}function C4(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function O4(n,e,t,r){const i=Lc(n);let s=C4(ao(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(_0)))),s}function Kd(n){return n.replace(/left|right|bottom|top/g,e=>b4[e])}function k4(n){return{top:0,right:0,bottom:0,left:0,...n}}function Mb(n){return typeof n!="number"?k4(n):{top:n,right:n,bottom:n,left:n}}function Qd(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function Wy(n,e,t){let{reference:r,floating:i}=n;const s=Fc(e),o=$v(e),a=jv(o),l=ao(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Lc(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const A4=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=Wy(c,r,l),p=r,m={},v=0;for(let _=0;_<a.length;_++){const{name:y,fn:w}=a[_],{x:b,y:C,data:O,reset:T}=await w({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});if(u=b??u,d=C??d,m={...m,[y]:{...m[y],...O}},T&&v<=50){v++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):T.rects),{x:u,y:d}=Wy(c,p,l)),_=-1;continue}}return{x:u,y:d,placement:p,strategy:i,middlewareData:m}};async function cf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=oo(e,n),v=Mb(m),y=a[p?d==="floating"?"reference":"floating":d],w=Qd(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{...o.floating,x:r,y:i}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},T=Qd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:C,strategy:l}):b);return{top:(w.top-T.top+v.top)/O.y,bottom:(T.bottom-w.bottom+v.bottom)/O.y,left:(w.left-T.left+v.left)/O.x,right:(T.right-w.right+v.right)/O.x}}const Gy=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=oo(n,e)||{};if(c==null)return{};const d=Mb(u),p={x:t,y:r},m=$v(i),v=jv(m),_=await o.getDimensions(c),y=m==="y",w=y?"top":"left",b=y?"bottom":"right",C=y?"clientHeight":"clientWidth",O=s.reference[v]+s.reference[m]-p[m]-s.floating[v],T=p[m]-s.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=A?A[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=a.floating[C]||s.floating[v]);const R=O/2-T/2,P=k/2-_[v]/2-1,L=Xo(d[w],P),I=Xo(d[b],P),D=L,B=k-_[v]-I,z=k/2-_[v]/2+R,V=v0(D,z,B),$=!l.arrow&&Lc(i)!=null&&z!=V&&s.reference[v]/2-(z<D?L:I)-_[v]/2<0,K=$?z<D?z-D:z-B:0;return{[m]:p[m]+K,data:{[m]:V,centerOffset:z-V-K,...$&&{alignmentOffset:K}},reset:$}}}),R4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...y}=oo(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const w=ao(i),b=ao(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(b||!_?[Kd(a)]:E4(a));!p&&v!=="none"&&O.push(...O4(a,_,v,C));const T=[a,...O],A=await cf(e,y),k=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&k.push(A[w]),d){const D=T4(i,o,C);k.push(A[D[0]],A[D[1]])}if(R=[...R,{placement:i,overflows:k}],!k.every(D=>D<=0)){var P,L;const D=(((P=s.flip)==null?void 0:P.index)||0)+1,B=T[D];if(B)return{data:{index:D,overflows:R},reset:{placement:B}};let z=(L=R.filter(V=>V.overflows[0]<=0).sort((V,$)=>V.overflows[1]-$.overflows[1])[0])==null?void 0:L.placement;if(!z)switch(m){case"bestFit":{var I;const V=(I=R.map($=>[$.placement,$.overflows.filter(K=>K>0).reduce((K,G)=>K+G,0)]).sort(($,K)=>$[1]-K[1])[0])==null?void 0:I[0];V&&(z=V);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function qy(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Yy(n){return w4.some(e=>n[e]>=0)}const M4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=oo(n,e);switch(r){case"referenceHidden":{const s=await cf(e,{...i,elementContext:"reference"}),o=qy(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Yy(o)}}}case"escaped":{const s=await cf(e,{...i,altBoundary:!0}),o=qy(s,t.floating);return{data:{escapedOffsets:o,escaped:Yy(o)}}}default:return{}}}}};async function P4(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ao(t),a=Lc(t),l=Fc(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=oo(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const D4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await P4(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},I4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:w,y:b}=y;return{x:w,y:b}}},...l}=oo(n,e),c={x:t,y:r},u=await cf(e,l),d=Fc(ao(i)),p=Bv(d);let m=c[p],v=c[d];if(s){const y=p==="y"?"top":"left",w=p==="y"?"bottom":"right",b=m+u[y],C=m-u[w];m=v0(b,m,C)}if(o){const y=d==="y"?"top":"left",w=d==="y"?"bottom":"right",b=v+u[y],C=v-u[w];v=v0(b,v,C)}const _=a.fn({...e,[p]:m,[d]:v});return{..._,data:{x:_.x-t,y:_.y-r}}}}},N4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=oo(n,e),u={x:t,y:r},d=Fc(i),p=Bv(d);let m=u[p],v=u[d];const _=oo(a,e),y=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const C=p==="y"?"height":"width",O=s.reference[p]-s.floating[C]+y.mainAxis,T=s.reference[p]+s.reference[C]-y.mainAxis;m<O?m=O:m>T&&(m=T)}if(c){var w,b;const C=p==="y"?"width":"height",O=["top","left"].includes(ao(i)),T=s.reference[d]-s.floating[C]+(O&&((w=o.offset)==null?void 0:w[d])||0)+(O?0:y.crossAxis),A=s.reference[d]+s.reference[C]+(O?0:((b=o.offset)==null?void 0:b[d])||0)-(O?y.crossAxis:0);v<T?v=T:v>A&&(v=A)}return{[p]:m,[d]:v}}}},L4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=oo(n,e),l=await cf(e,a),c=ao(t),u=Lc(t),d=Fc(t)==="y",{width:p,height:m}=r.floating;let v,_;c==="top"||c==="bottom"?(v=c,_=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,v=u==="end"?"top":"bottom");const y=m-l[v],w=p-l[_],b=!e.middlewareData.shift;let C=y,O=w;if(d){const A=p-l.left-l.right;O=u||b?Xo(w,A):A}else{const A=m-l.top-l.bottom;C=u||b?Xo(y,A):A}if(b&&!u){const A=ni(l.left,0),k=ni(l.right,0),R=ni(l.top,0),P=ni(l.bottom,0);d?O=p-2*(A!==0||k!==0?A+k:ni(l.left,l.right)):C=m-2*(R!==0||P!==0?R+P:ni(l.top,l.bottom))}await o({...e,availableWidth:O,availableHeight:C});const T=await i.getDimensions(s.floating);return p!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Qo(n){return Pb(n)?(n.nodeName||"").toLowerCase():"#document"}function si(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function vo(n){var e;return(e=(Pb(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Pb(n){return n instanceof Node||n instanceof si(n).Node}function lo(n){return n instanceof Element||n instanceof si(n).Element}function Cs(n){return n instanceof HTMLElement||n instanceof si(n).HTMLElement}function Zy(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof si(n).ShadowRoot}function Hf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Mi(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function F4(n){return["table","td","th"].includes(Qo(n))}function Vv(n){const e=Hv(),t=Mi(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function U4(n){let e=_c(n);for(;Cs(e)&&!Gp(e);){if(Vv(e))return e;e=_c(e)}return null}function Hv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gp(n){return["html","body","#document"].includes(Qo(n))}function Mi(n){return si(n).getComputedStyle(n)}function qp(n){return lo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function _c(n){if(Qo(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Zy(n)&&n.host||vo(n);return Zy(e)?e.host:e}function Db(n){const e=_c(n);return Gp(e)?n.ownerDocument?n.ownerDocument.body:n.body:Cs(e)&&Hf(e)?e:Db(e)}function uf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Db(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=si(i);return s?e.concat(o,o.visualViewport||[],Hf(i)?i:[],o.frameElement&&t?uf(o.frameElement):[]):e.concat(i,uf(i,[],t))}function Ib(n){const e=Mi(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Cs(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Xd(t)!==s||Xd(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function Wv(n){return lo(n)?n:n.contextElement}function lc(n){const e=Wv(n);if(!Cs(e))return Ko(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Ib(e);let o=(s?Xd(t.width):t.width)/r,a=(s?Xd(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const z4=Ko(0);function Nb(n){const e=si(n);return!Hv()||!e.visualViewport?z4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function B4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==si(n)?!1:e}function Ka(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Wv(n);let o=Ko(1);e&&(r?lo(r)&&(o=lc(r)):o=lc(n));const a=B4(s,t,r)?Nb(s):Ko(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const p=si(s),m=r&&lo(r)?si(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const _=lc(v),y=v.getBoundingClientRect(),w=Mi(v),b=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*_.x,C=y.top+(v.clientTop+parseFloat(w.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,d*=_.y,l+=b,c+=C,v=si(v).frameElement}}return Qd({width:u,height:d,x:l,y:c})}function j4(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Cs(t),s=vo(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=Ko(1);const l=Ko(0);if((i||!i&&r!=="fixed")&&((Qo(t)!=="body"||Hf(s))&&(o=qp(t)),Cs(t))){const c=Ka(t);a=lc(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function $4(n){return Array.from(n.getClientRects())}function Lb(n){return Ka(vo(n)).left+qp(n).scrollLeft}function V4(n){const e=vo(n),t=qp(n),r=n.ownerDocument.body,i=ni(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ni(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Lb(n);const a=-t.scrollTop;return Mi(r).direction==="rtl"&&(o+=ni(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function H4(n,e){const t=si(n),r=vo(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Hv();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function W4(n,e){const t=Ka(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Cs(n)?lc(n):Ko(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Xy(n,e,t){let r;if(e==="viewport")r=H4(n,t);else if(e==="document")r=V4(vo(n));else if(lo(e))r=W4(e,t);else{const i=Nb(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return Qd(r)}function Fb(n,e){const t=_c(n);return t===e||!lo(t)||Gp(t)?!1:Mi(t).position==="fixed"||Fb(t,e)}function G4(n,e){const t=e.get(n);if(t)return t;let r=uf(n,[],!1).filter(a=>lo(a)&&Qo(a)!=="body"),i=null;const s=Mi(n).position==="fixed";let o=s?_c(n):n;for(;lo(o)&&!Gp(o);){const a=Mi(o),l=Vv(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hf(o)&&!l&&Fb(n,o))?r=r.filter(u=>u!==o):i=a,o=_c(o)}return e.set(n,r),r}function q4(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?G4(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const d=Xy(e,u,i);return c.top=ni(d.top,c.top),c.right=Xo(d.right,c.right),c.bottom=Xo(d.bottom,c.bottom),c.left=ni(d.left,c.left),c},Xy(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Y4(n){return Ib(n)}function Z4(n,e,t){const r=Cs(e),i=vo(e),s=t==="fixed",o=Ka(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ko(0);if(r||!r&&!s)if((Qo(e)!=="body"||Hf(i))&&(a=qp(e)),r){const c=Ka(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=Lb(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ky(n,e){return!Cs(n)||Mi(n).position==="fixed"?null:e?e(n):n.offsetParent}function Ub(n,e){const t=si(n);if(!Cs(n))return t;let r=Ky(n,e);for(;r&&F4(r)&&Mi(r).position==="static";)r=Ky(r,e);return r&&(Qo(r)==="html"||Qo(r)==="body"&&Mi(r).position==="static"&&!Vv(r))?t:r||U4(n)||t}const X4=async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||Ub,s=this.getDimensions;return{reference:Z4(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}};function K4(n){return Mi(n).direction==="rtl"}const Q4={convertOffsetParentRelativeRectToViewportRelativeRect:j4,getDocumentElement:vo,getClippingRect:q4,getOffsetParent:Ub,getElementRects:X4,getClientRects:$4,getDimensions:Y4,getScale:lc,isElement:lo,isRTL:K4};function J4(n,e){let t=null,r;const i=vo(n);function s(){clearTimeout(r),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:p}=n.getBoundingClientRect();if(a||e(),!d||!p)return;const m=ad(u),v=ad(i.clientWidth-(c+d)),_=ad(i.clientHeight-(u+p)),y=ad(c),b={rootMargin:-m+"px "+-v+"px "+-_+"px "+-y+"px",threshold:ni(0,Xo(1,l))||1};let C=!0;function O(T){const A=T[0].intersectionRatio;if(A!==l){if(!C)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},100)}C=!1}try{t=new IntersectionObserver(O,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(O,b)}t.observe(n)}return o(!0),s}function eO(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Wv(n),u=i||s?[...c?uf(c):[],...uf(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),s&&w.addEventListener("resize",t)});const d=c&&a?J4(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(w=>{let[b]=w;b&&b.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?Ka(n):null;l&&y();function y(){const w=Ka(n);_&&(w.x!==_.x||w.y!==_.y||w.width!==_.width||w.height!==_.height)&&t(),_=w,v=requestAnimationFrame(y)}return t(),()=>{u.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),d&&d(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const tO=(n,e,t)=>{const r=new Map,i={platform:Q4,...t},s={...i.platform,_c:r};return A4(n,e,{...i,platform:s})},nO=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Gy({element:r.current,padding:i}).fn(t):{}:r?Gy({element:r,padding:i}).fn(t):{}}}};var Ud=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Jd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!Jd(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Jd(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function zb(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Qy(n,e){const t=zb(n);return Math.round(e*t)/t}function Jy(n){const e=S.useRef(n);return Ud(()=>{e.current=n}),e}function rO(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=S.useState(r);Jd(p,r)||m(r);const[v,_]=S.useState(null),[y,w]=S.useState(null),b=S.useCallback($=>{$!=A.current&&(A.current=$,_($))},[_]),C=S.useCallback($=>{$!==k.current&&(k.current=$,w($))},[w]),O=s||v,T=o||y,A=S.useRef(null),k=S.useRef(null),R=S.useRef(u),P=Jy(l),L=Jy(i),I=S.useCallback(()=>{if(!A.current||!k.current)return;const $={placement:e,strategy:t,middleware:p};L.current&&($.platform=L.current),tO(A.current,k.current,$).then(K=>{const G={...K,isPositioned:!0};D.current&&!Jd(R.current,G)&&(R.current=G,Rv.flushSync(()=>{d(G)}))})},[p,e,t,L]);Ud(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const D=S.useRef(!1);Ud(()=>(D.current=!0,()=>{D.current=!1}),[]),Ud(()=>{if(O&&(A.current=O),T&&(k.current=T),O&&T){if(P.current)return P.current(O,T,I);I()}},[O,T,I,P]);const B=S.useMemo(()=>({reference:A,floating:k,setReference:b,setFloating:C}),[b,C]),z=S.useMemo(()=>({reference:O,floating:T}),[O,T]),V=S.useMemo(()=>{const $={position:t,left:0,top:0};if(!z.floating)return $;const K=Qy(z.floating,u.x),G=Qy(z.floating,u.y);return a?{...$,transform:"translate("+K+"px, "+G+"px)",...zb(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:G}},[t,a,z.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:I,refs:B,elements:z,floatingStyles:V}),[u,I,B,z,V])}var Bb={exports:{}},ll={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ll.ConcurrentRoot=1;ll.ContinuousEventPriority=4;ll.DefaultEventPriority=16;ll.DiscreteEventPriority=1;ll.IdleEventPriority=536870912;ll.LegacyRoot=0;Bb.exports=ll;var Jl=Bb.exports;function iO(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const sO=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),e2=sO?S.useEffect:S.useLayoutEffect;function oO(n){const e=typeof n=="function"?iO(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=S.useReducer(y=>y+1,0),o=e.getState(),a=S.useRef(o),l=S.useRef(r),c=S.useRef(i),u=S.useRef(!1),d=S.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),e2(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=S.useRef(o);e2(()=>{const y=()=>{try{const b=e.getState(),C=l.current(b);c.current(d.current,C)||(a.current=b,d.current=C,s())}catch{u.current=!0,s()}},w=e.subscribe(y);return e.getState()!==v.current&&y(),w},[]);const _=m?p:d.current;return S.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var jb={exports:{}},$b={exports:{}},Vb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,H){var q=G.length;G.push(H);e:for(;0<q;){var F=q-1>>>1,W=G[F];if(0<i(W,H))G[F]=H,G[q]=W,q=F;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var H=G[0],q=G.pop();if(q!==H){G[0]=q;e:for(var F=0,W=G.length,ee=W>>>1;F<ee;){var ne=2*(F+1)-1,Z=G[ne],oe=ne+1,re=G[oe];if(0>i(Z,q))oe<W&&0>i(re,Z)?(G[F]=re,G[oe]=q,F=oe):(G[F]=Z,G[ne]=q,F=ne);else if(oe<W&&0>i(re,q))G[F]=re,G[oe]=q,F=oe;else break e}}return H}function i(G,H){var q=G.sortIndex-H.sortIndex;return q!==0?q:G.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var H=t(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=G)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(c)}}function O(G){if(_=!1,C(G),!v)if(t(l)!==null)v=!0,$(T);else{var H=t(c);H!==null&&K(O,H.startTime-G)}}function T(G,H){v=!1,_&&(_=!1,w(R),R=-1),m=!0;var q=p;try{for(C(H),d=t(l);d!==null&&(!(d.expirationTime>H)||G&&!I());){var F=d.callback;if(typeof F=="function"){d.callback=null,p=d.priorityLevel;var W=F(d.expirationTime<=H);H=n.unstable_now(),typeof W=="function"?d.callback=W:d===t(l)&&r(l),C(H)}else r(l);d=t(l)}if(d!==null)var ee=!0;else{var ne=t(c);ne!==null&&K(O,ne.startTime-H),ee=!1}return ee}finally{d=null,p=q,m=!1}}var A=!1,k=null,R=-1,P=5,L=-1;function I(){return!(n.unstable_now()-L<P)}function D(){if(k!==null){var G=n.unstable_now();L=G;var H=!0;try{H=k(!0,G)}finally{H?B():(A=!1,k=null)}}else A=!1}var B;if(typeof b=="function")B=function(){b(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=D,B=function(){V.postMessage(null)}}else B=function(){y(D,0)};function $(G){k=G,A||(A=!0,B())}function K(G,H){R=y(function(){G(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,$(T))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var q=p;p=H;try{return G()}finally{p=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,H){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=p;p=G;try{return H()}finally{p=q}},n.unstable_scheduleCallback=function(G,H,q){var F=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?F+q:F):q=F,G){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,G={id:u++,callback:H,priorityLevel:G,startTime:q,expirationTime:W,sortIndex:-1},q>F?(G.sortIndex=q,e(c,G),t(l)===null&&G===t(c)&&(_?(w(R),R=-1):_=!0,K(O,q-F))):(G.sortIndex=W,e(l,G),v||m||(v=!0,$(T))),G},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(G){var H=p;return function(){var q=p;p=H;try{return G.apply(this,arguments)}finally{p=q}}}})(Vb);$b.exports=Vb;var y0=$b.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=function(e){var t={},r=S,i=y0,s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),T=Symbol.iterator;function A(f){return f===null||typeof f!="object"?null:(f=T&&f[T]||f["@@iterator"],typeof f=="function"?f:null)}function k(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case y:return"Suspense";case w:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case v:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case _:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case b:return h=f.displayName||null,h!==null?h:k(f.type)||"Memo";case C:h=f._payload,f=f._init;try{return k(f(h))}catch{}}return null}function R(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function P(f){var h=f,g=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(g=h.return),f=h.return;while(f)}return h.tag===3?g:null}function L(f){if(P(f)!==f)throw Error(o(188))}function I(f){var h=f.alternate;if(!h){if(h=P(f),h===null)throw Error(o(188));return h!==f?null:f}for(var g=f,x=h;;){var E=g.return;if(E===null)break;var M=E.alternate;if(M===null){if(x=E.return,x!==null){g=x;continue}break}if(E.child===M.child){for(M=E.child;M;){if(M===g)return L(E),f;if(M===x)return L(E),h;M=M.sibling}throw Error(o(188))}if(g.return!==x.return)g=E,x=M;else{for(var U=!1,Y=E.child;Y;){if(Y===g){U=!0,g=E,x=M;break}if(Y===x){U=!0,x=E,g=M;break}Y=Y.sibling}if(!U){for(Y=M.child;Y;){if(Y===g){U=!0,g=M,x=E;break}if(Y===x){U=!0,x=M,g=E;break}Y=Y.sibling}if(!U)throw Error(o(189))}}if(g.alternate!==x)throw Error(o(190))}if(g.tag!==3)throw Error(o(188));return g.stateNode.current===g?f:h}function D(f){return f=I(f),f!==null?B(f):null}function B(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=B(f);if(h!==null)return h;f=f.sibling}return null}function z(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=z(f);if(h!==null)return h}f=f.sibling}return null}var V=Array.isArray,$=e.getPublicInstance,K=e.getRootHostContext,G=e.getChildHostContext,H=e.prepareForCommit,q=e.resetAfterCommit,F=e.createInstance,W=e.appendInitialChild,ee=e.finalizeInitialChildren,ne=e.prepareUpdate,Z=e.shouldSetTextContent,oe=e.createTextInstance,re=e.scheduleTimeout,Q=e.cancelTimeout,_e=e.noTimeout,xe=e.isPrimaryRenderer,ce=e.supportsMutation,ue=e.supportsPersistence,Ee=e.supportsHydration,Ie=e.getInstanceFromNode,J=e.preparePortalMount,de=e.getCurrentEventPriority,be=e.detachDeletedInstance,fe=e.supportsMicrotasks,ge=e.scheduleMicrotask,me=e.supportsTestSelectors,he=e.findFiberRoot,Ae=e.getBoundingRect,ie=e.getTextContent,pe=e.isHiddenSubtree,we=e.matchAccessibilityRole,Be=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,Re=e.appendChild,He=e.appendChildToContainer,it=e.commitTextUpdate,It=e.commitMount,Ge=e.commitUpdate,ut=e.insertBefore,Ze=e.insertInContainerBefore,Fe=e.removeChild,ot=e.removeChildFromContainer,ct=e.resetTextContent,Vt=e.hideInstance,Je=e.hideTextInstance,zt=e.unhideInstance,zn=e.unhideTextInstance,Ni=e.clearContainer,Ds=e.cloneInstance,Li=e.createContainerChildSet,ar=e.appendChildToContainerChildSet,lr=e.finalizeContainerChildren,Bt=e.replaceContainerChildren,bo=e.cloneHiddenInstance,Ht=e.cloneHiddenTextInstance,Wt=e.canHydrateInstance,$r=e.canHydrateTextInstance,cr=e.canHydrateSuspenseInstance,vt=e.isSuspenseInstancePending,cn=e.isSuspenseInstanceFallback,Er=e.registerSuspenseInstanceRetry,nn=e.getNextHydratableSibling,_n=e.getFirstHydratableChild,Bn=e.getFirstHydratableChildWithinContainer,is=e.getFirstHydratableChildWithinSuspenseInstance,Vr=e.hydrateInstance,Is=e.hydrateTextInstance,bm=e.hydrateSuspenseInstance,ph=e.getNextHydratableInstanceAfterSuspenseInstance,ua=e.commitHydratedContainer,Zc=e.commitHydratedSuspenseInstance,Sm=e.clearSuspenseBoundary,mh=e.clearSuspenseBoundaryFromContainer,pl=e.shouldDeleteUnhydratedTailInstances,Xc=e.didNotMatchHydratedContainerTextInstance,Kc=e.didNotMatchHydratedTextInstance,Me;function Fi(f){if(Me===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);Me=h&&h[1]||""}return`
`+Me+f}var Qc=!1;function ss(f,h){if(!f||Qc)return"";Qc=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ye){var x=ye}Reflect.construct(f,[],h)}else{try{h.call()}catch(ye){x=ye}f.call(h.prototype)}else{try{throw Error()}catch(ye){x=ye}f()}}catch(ye){if(ye&&x&&typeof ye.stack=="string"){for(var E=ye.stack.split(`
`),M=x.stack.split(`
`),U=E.length-1,Y=M.length-1;1<=U&&0<=Y&&E[U]!==M[Y];)Y--;for(;1<=U&&0<=Y;U--,Y--)if(E[U]!==M[Y]){if(U!==1||Y!==1)do if(U--,Y--,0>Y||E[U]!==M[Y]){var ae=`
`+E[U].replace(" at new "," at ");return f.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",f.displayName)),ae}while(1<=U&&0<=Y);break}}}finally{Qc=!1,Error.prepareStackTrace=g}return(f=f?f.displayName||f.name:"")?Fi(f):""}var ml=Object.prototype.hasOwnProperty,gl=[],os=-1;function Hr(f){return{current:f}}function _t(f){0>os||(f.current=gl[os],gl[os]=null,os--)}function xt(f,h){os++,gl[os]=f.current,f.current=h}var Wr={},Sn=Hr(Wr),kn=Hr(!1),as=Wr;function ui(f,h){var g=f.type.contextTypes;if(!g)return Wr;var x=f.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===h)return x.__reactInternalMemoizedMaskedChildContext;var E={},M;for(M in g)E[M]=h[M];return x&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=E),E}function An(f){return f=f.childContextTypes,f!=null}function Ui(){_t(kn),_t(Sn)}function vl(f,h,g){if(Sn.current!==Wr)throw Error(o(168));xt(Sn,h),xt(kn,g)}function _l(f,h,g){var x=f.stateNode;if(h=h.childContextTypes,typeof x.getChildContext!="function")return g;x=x.getChildContext();for(var E in x)if(!(E in h))throw Error(o(108,R(f)||"Unknown",E));return s({},g,x)}function So(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Wr,as=Sn.current,xt(Sn,f),xt(kn,kn.current),!0}function Gr(f,h,g){var x=f.stateNode;if(!x)throw Error(o(169));g?(f=_l(f,h,as),x.__reactInternalMemoizedMergedChildContext=f,_t(kn),_t(Sn),xt(Sn,f)):_t(kn),xt(kn,g)}var qr=Math.clz32?Math.clz32:gh,yl=Math.log,fa=Math.LN2;function gh(f){return f>>>=0,f===0?32:31-(yl(f)/fa|0)|0}var Ns=64,Ls=4194304;function Fs(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function ha(f,h){var g=f.pendingLanes;if(g===0)return 0;var x=0,E=f.suspendedLanes,M=f.pingedLanes,U=g&268435455;if(U!==0){var Y=U&~E;Y!==0?x=Fs(Y):(M&=U,M!==0&&(x=Fs(M)))}else U=g&~E,U!==0?x=Fs(U):M!==0&&(x=Fs(M));if(x===0)return 0;if(h!==0&&h!==x&&!(h&E)&&(E=x&-x,M=h&-h,E>=M||E===16&&(M&4194240)!==0))return h;if(x&4&&(x|=g&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=x;0<h;)g=31-qr(h),E=1<<g,x|=f[g],h&=~E;return x}function vh(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jc(f,h){for(var g=f.suspendedLanes,x=f.pingedLanes,E=f.expirationTimes,M=f.pendingLanes;0<M;){var U=31-qr(M),Y=1<<U,ae=E[U];ae===-1?(!(Y&g)||Y&x)&&(E[U]=vh(Y,h)):ae<=h&&(f.expiredLanes|=Y),M&=~Y}}function Us(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function xl(f){for(var h=[],g=0;31>g;g++)h.push(f);return h}function ls(f,h,g){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-qr(h),f[h]=g}function To(f,h){var g=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var x=f.eventTimes;for(f=f.expirationTimes;0<g;){var E=31-qr(g),M=1<<E;h[E]=0,x[E]=-1,f[E]=-1,g&=~M}}function cs(f,h){var g=f.entangledLanes|=h;for(f=f.entanglements;g;){var x=31-qr(g),E=1<<x;E&h|f[x]&h&&(f[x]|=h),g&=~E}}var rt=0;function eu(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var zs=i.unstable_scheduleCallback,wl=i.unstable_cancelCallback,tu=i.unstable_shouldYield,_h=i.unstable_requestPaint,Yt=i.unstable_now,da=i.unstable_ImmediatePriority,yh=i.unstable_UserBlockingPriority,ur=i.unstable_NormalPriority,nu=i.unstable_IdlePriority,pa=null,Yr=null;function ru(f){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(pa,f,void 0,(f.current.flags&128)===128)}catch{}}function xh(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Zr=typeof Object.is=="function"?Object.is:xh,fr=null,us=!1,fi=!1;function iu(f){fr===null?fr=[f]:fr.push(f)}function su(f){us=!0,iu(f)}function Cr(){if(!fi&&fr!==null){fi=!0;var f=0,h=rt;try{var g=fr;for(rt=1;f<g.length;f++){var x=g[f];do x=x(!0);while(x!==null)}fr=null,us=!1}catch(E){throw fr!==null&&(fr=fr.slice(f+1)),zs(da,Cr),E}finally{rt=h,fi=!1}}return null}var ma=a.ReactCurrentBatchConfig;function ga(f,h){if(Zr(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var g=Object.keys(f),x=Object.keys(h);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var E=g[x];if(!ml.call(h,E)||!Zr(f[E],h[E]))return!1}return!0}function va(f){switch(f.tag){case 5:return Fi(f.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return f=ss(f.type,!1),f;case 11:return f=ss(f.type.render,!1),f;case 1:return f=ss(f.type,!0),f;default:return""}}function hr(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var g in f)h[g]===void 0&&(h[g]=f[g]);return h}return h}var Rn=Hr(null),bl=null,zi=null,Eo=null;function Sl(){Eo=zi=bl=null}function wh(f,h,g){xe?(xt(Rn,h._currentValue),h._currentValue=g):(xt(Rn,h._currentValue2),h._currentValue2=g)}function Mn(f){var h=Rn.current;_t(Rn),xe?f._currentValue=h:f._currentValue2=h}function dr(f,h,g){for(;f!==null;){var x=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),f===g)break;f=f.return}}function un(f,h){bl=f,Eo=zi=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Jr=!0),f.firstContext=null)}function fn(f){var h=xe?f._currentValue:f._currentValue2;if(Eo!==f)if(f={context:f,memoizedValue:h,next:null},zi===null){if(bl===null)throw Error(o(308));zi=f,bl.dependencies={lanes:0,firstContext:f}}else zi=zi.next=f;return h}var Xr=null,Co=!1;function Tm(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m_(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Bs(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Oo(f,h){var g=f.updateQueue;g!==null&&(g=g.shared,yn!==null&&f.mode&1&&!(nt&2)?(f=g.interleaved,f===null?(h.next=h,Xr===null?Xr=[g]:Xr.push(g)):(h.next=f.next,f.next=h),g.interleaved=h):(f=g.pending,f===null?h.next=h:(h.next=f.next,f.next=h),g.pending=h))}function bh(f,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var x=h.lanes;x&=f.pendingLanes,g|=x,h.lanes=g,cs(f,g)}}function g_(f,h){var g=f.updateQueue,x=f.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var E=null,M=null;if(g=g.firstBaseUpdate,g!==null){do{var U={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};M===null?E=M=U:M=M.next=U,g=g.next}while(g!==null);M===null?E=M=h:M=M.next=h}else E=M=h;g={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:M,shared:x.shared,effects:x.effects},f.updateQueue=g;return}f=g.lastBaseUpdate,f===null?g.firstBaseUpdate=h:f.next=h,g.lastBaseUpdate=h}function Sh(f,h,g,x){var E=f.updateQueue;Co=!1;var M=E.firstBaseUpdate,U=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var ae=Y,ye=ae.next;ae.next=null,U===null?M=ye:U.next=ye,U=ae;var Oe=f.alternate;Oe!==null&&(Oe=Oe.updateQueue,Y=Oe.lastBaseUpdate,Y!==U&&(Y===null?Oe.firstBaseUpdate=ye:Y.next=ye,Oe.lastBaseUpdate=ae))}if(M!==null){var Xe=E.baseState;U=0,Oe=ye=ae=null,Y=M;do{var Ue=Y.lane,At=Y.eventTime;if((x&Ue)===Ue){Oe!==null&&(Oe=Oe.next={eventTime:At,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var De=f,Zn=Y;switch(Ue=h,At=g,Zn.tag){case 1:if(De=Zn.payload,typeof De=="function"){Xe=De.call(At,Xe,Ue);break e}Xe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Zn.payload,Ue=typeof De=="function"?De.call(At,Xe,Ue):De,Ue==null)break e;Xe=s({},Xe,Ue);break e;case 2:Co=!0}}Y.callback!==null&&Y.lane!==0&&(f.flags|=64,Ue=E.effects,Ue===null?E.effects=[Y]:Ue.push(Y))}else At={eventTime:At,lane:Ue,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Oe===null?(ye=Oe=At,ae=Xe):Oe=Oe.next=At,U|=Ue;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;Ue=Y,Y=Ue.next,Ue.next=null,E.lastBaseUpdate=Ue,E.shared.pending=null}}while(1);if(Oe===null&&(ae=Xe),E.baseState=ae,E.firstBaseUpdate=ye,E.lastBaseUpdate=Oe,h=E.shared.interleaved,h!==null){E=h;do U|=E.lane,E=E.next;while(E!==h)}else M===null&&(E.shared.lanes=0);Pl|=U,f.lanes=U,f.memoizedState=Xe}}function v_(f,h,g){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var x=f[h],E=x.callback;if(E!==null){if(x.callback=null,x=g,typeof E!="function")throw Error(o(191,E));E.call(x)}}}var __=new r.Component().refs;function Em(f,h,g,x){h=f.memoizedState,g=g(x,h),g=g==null?h:s({},h,g),f.memoizedState=g,f.lanes===0&&(f.updateQueue.baseState=g)}var Th={isMounted:function(f){return(f=f._reactInternals)?P(f)===f:!1},enqueueSetState:function(f,h,g){f=f._reactInternals;var x=mr(),E=Ro(f),M=Bs(x,E);M.payload=h,g!=null&&(M.callback=g),Oo(f,M),h=gi(f,E,x),h!==null&&bh(h,f,E)},enqueueReplaceState:function(f,h,g){f=f._reactInternals;var x=mr(),E=Ro(f),M=Bs(x,E);M.tag=1,M.payload=h,g!=null&&(M.callback=g),Oo(f,M),h=gi(f,E,x),h!==null&&bh(h,f,E)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var g=mr(),x=Ro(f),E=Bs(g,x);E.tag=2,h!=null&&(E.callback=h),Oo(f,E),h=gi(f,x,g),h!==null&&bh(h,f,x)}};function y_(f,h,g,x,E,M,U){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(x,M,U):h.prototype&&h.prototype.isPureReactComponent?!ga(g,x)||!ga(E,M):!0}function x_(f,h,g){var x=!1,E=Wr,M=h.contextType;return typeof M=="object"&&M!==null?M=fn(M):(E=An(h)?as:Sn.current,x=h.contextTypes,M=(x=x!=null)?ui(f,E):Wr),h=new h(g,M),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Th,f.stateNode=h,h._reactInternals=f,x&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=E,f.__reactInternalMemoizedMaskedChildContext=M),h}function w_(f,h,g,x){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,x),h.state!==f&&Th.enqueueReplaceState(h,h.state,null)}function Cm(f,h,g,x){var E=f.stateNode;E.props=g,E.state=f.memoizedState,E.refs=__,Tm(f);var M=h.contextType;typeof M=="object"&&M!==null?E.context=fn(M):(M=An(h)?as:Sn.current,E.context=ui(f,M)),E.state=f.memoizedState,M=h.getDerivedStateFromProps,typeof M=="function"&&(Em(f,h,M,g),E.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&Th.enqueueReplaceState(E,E.state,null),Sh(f,g,E,x),E.state=f.memoizedState),typeof E.componentDidMount=="function"&&(f.flags|=4194308)}var Tl=[],El=0,Eh=null,Ch=0,hi=[],di=0,_a=null,js=1,$s="";function ya(f,h){Tl[El++]=Ch,Tl[El++]=Eh,Eh=f,Ch=h}function b_(f,h,g){hi[di++]=js,hi[di++]=$s,hi[di++]=_a,_a=f;var x=js;f=$s;var E=32-qr(x)-1;x&=~(1<<E),g+=1;var M=32-qr(h)+E;if(30<M){var U=E-E%5;M=(x&(1<<U)-1).toString(32),x>>=U,E-=U,js=1<<32-qr(h)+E|g<<E|x,$s=M+f}else js=1<<M|g<<E|x,$s=f}function Om(f){f.return!==null&&(ya(f,1),b_(f,1,0))}function km(f){for(;f===Eh;)Eh=Tl[--El],Tl[El]=null,Ch=Tl[--El],Tl[El]=null;for(;f===_a;)_a=hi[--di],hi[di]=null,$s=hi[--di],hi[di]=null,js=hi[--di],hi[di]=null}var Kr=null,Qr=null,Gt=!1,ou=!1,Bi=null;function S_(f,h){var g=vi(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=f,h=f.deletions,h===null?(f.deletions=[g],f.flags|=16):h.push(g)}function T_(f,h){switch(f.tag){case 5:return h=Wt(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,Kr=f,Qr=_n(h),!0):!1;case 6:return h=$r(h,f.pendingProps),h!==null?(f.stateNode=h,Kr=f,Qr=null,!0):!1;case 13:if(h=cr(h),h!==null){var g=_a!==null?{id:js,overflow:$s}:null;return f.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=vi(18,null,null,0),g.stateNode=h,g.return=f,f.child=g,Kr=f,Qr=null,!0}return!1;default:return!1}}function Am(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Rm(f){if(Gt){var h=Qr;if(h){var g=h;if(!T_(f,h)){if(Am(f))throw Error(o(418));h=nn(g);var x=Kr;h&&T_(f,h)?S_(x,g):(f.flags=f.flags&-4097|2,Gt=!1,Kr=f)}}else{if(Am(f))throw Error(o(418));f.flags=f.flags&-4097|2,Gt=!1,Kr=f}}}function E_(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Kr=f}function au(f){if(!Ee||f!==Kr)return!1;if(!Gt)return E_(f),Gt=!0,!1;if(f.tag!==3&&(f.tag!==5||pl(f.type)&&!Z(f.type,f.memoizedProps))){var h=Qr;if(h){if(Am(f)){for(f=Qr;f;)f=nn(f);throw Error(o(418))}for(;h;)S_(f,h),h=nn(h)}}if(E_(f),f.tag===13){if(!Ee)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Qr=ph(f)}else Qr=Kr?nn(f.stateNode):null;return!0}function Cl(){Ee&&(Qr=Kr=null,ou=Gt=!1)}function Mm(f){Bi===null?Bi=[f]:Bi.push(f)}function lu(f,h,g){if(f=g.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(o(309));var x=g.stateNode}if(!x)throw Error(o(147,f));var E=x,M=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===M?h.ref:(h=function(U){var Y=E.refs;Y===__&&(Y=E.refs={}),U===null?delete Y[M]:Y[M]=U},h._stringRef=M,h)}if(typeof f!="string")throw Error(o(284));if(!g._owner)throw Error(o(290,f))}return f}function Oh(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function C_(f){var h=f._init;return h(f._payload)}function O_(f){function h(te,X){if(f){var se=te.deletions;se===null?(te.deletions=[X],te.flags|=16):se.push(X)}}function g(te,X){if(!f)return null;for(;X!==null;)h(te,X),X=X.sibling;return null}function x(te,X){for(te=new Map;X!==null;)X.key!==null?te.set(X.key,X):te.set(X.index,X),X=X.sibling;return te}function E(te,X){return te=Po(te,X),te.index=0,te.sibling=null,te}function M(te,X,se){return te.index=se,f?(se=te.alternate,se!==null?(se=se.index,se<X?(te.flags|=2,X):se):(te.flags|=2,X)):(te.flags|=1048576,X)}function U(te){return f&&te.alternate===null&&(te.flags|=2),te}function Y(te,X,se,Ce){return X===null||X.tag!==6?(X=pg(se,te.mode,Ce),X.return=te,X):(X=E(X,se),X.return=te,X)}function ae(te,X,se,Ce){var Pe=se.type;return Pe===u?Oe(te,X,se.props.children,Ce,se.key):X!==null&&(X.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&C_(Pe)===X.type)?(Ce=E(X,se.props),Ce.ref=lu(te,X,se),Ce.return=te,Ce):(Ce=id(se.type,se.key,se.props,null,te.mode,Ce),Ce.ref=lu(te,X,se),Ce.return=te,Ce)}function ye(te,X,se,Ce){return X===null||X.tag!==4||X.stateNode.containerInfo!==se.containerInfo||X.stateNode.implementation!==se.implementation?(X=mg(se,te.mode,Ce),X.return=te,X):(X=E(X,se.children||[]),X.return=te,X)}function Oe(te,X,se,Ce,Pe){return X===null||X.tag!==7?(X=Ca(se,te.mode,Ce,Pe),X.return=te,X):(X=E(X,se),X.return=te,X)}function Xe(te,X,se){if(typeof X=="string"&&X!==""||typeof X=="number")return X=pg(""+X,te.mode,se),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case l:return se=id(X.type,X.key,X.props,null,te.mode,se),se.ref=lu(te,null,X),se.return=te,se;case c:return X=mg(X,te.mode,se),X.return=te,X;case C:var Ce=X._init;return Xe(te,Ce(X._payload),se)}if(V(X)||A(X))return X=Ca(X,te.mode,se,null),X.return=te,X;Oh(te,X)}return null}function Ue(te,X,se,Ce){var Pe=X!==null?X.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Pe!==null?null:Y(te,X,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return se.key===Pe?ae(te,X,se,Ce):null;case c:return se.key===Pe?ye(te,X,se,Ce):null;case C:return Pe=se._init,Ue(te,X,Pe(se._payload),Ce)}if(V(se)||A(se))return Pe!==null?null:Oe(te,X,se,Ce,null);Oh(te,se)}return null}function At(te,X,se,Ce,Pe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return te=te.get(se)||null,Y(X,te,""+Ce,Pe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case l:return te=te.get(Ce.key===null?se:Ce.key)||null,ae(X,te,Ce,Pe);case c:return te=te.get(Ce.key===null?se:Ce.key)||null,ye(X,te,Ce,Pe);case C:var et=Ce._init;return At(te,X,se,et(Ce._payload),Pe)}if(V(Ce)||A(Ce))return te=te.get(se)||null,Oe(X,te,Ce,Pe,null);Oh(X,Ce)}return null}function De(te,X,se,Ce){for(var Pe=null,et=null,Ke=X,ft=X=0,Dn=null;Ke!==null&&ft<se.length;ft++){Ke.index>ft?(Dn=Ke,Ke=null):Dn=Ke.sibling;var ht=Ue(te,Ke,se[ft],Ce);if(ht===null){Ke===null&&(Ke=Dn);break}f&&Ke&&ht.alternate===null&&h(te,Ke),X=M(ht,X,ft),et===null?Pe=ht:et.sibling=ht,et=ht,Ke=Dn}if(ft===se.length)return g(te,Ke),Gt&&ya(te,ft),Pe;if(Ke===null){for(;ft<se.length;ft++)Ke=Xe(te,se[ft],Ce),Ke!==null&&(X=M(Ke,X,ft),et===null?Pe=Ke:et.sibling=Ke,et=Ke);return Gt&&ya(te,ft),Pe}for(Ke=x(te,Ke);ft<se.length;ft++)Dn=At(Ke,te,ft,se[ft],Ce),Dn!==null&&(f&&Dn.alternate!==null&&Ke.delete(Dn.key===null?ft:Dn.key),X=M(Dn,X,ft),et===null?Pe=Dn:et.sibling=Dn,et=Dn);return f&&Ke.forEach(function(Do){return h(te,Do)}),Gt&&ya(te,ft),Pe}function Zn(te,X,se,Ce){var Pe=A(se);if(typeof Pe!="function")throw Error(o(150));if(se=Pe.call(se),se==null)throw Error(o(151));for(var et=Pe=null,Ke=X,ft=X=0,Dn=null,ht=se.next();Ke!==null&&!ht.done;ft++,ht=se.next()){Ke.index>ft?(Dn=Ke,Ke=null):Dn=Ke.sibling;var Do=Ue(te,Ke,ht.value,Ce);if(Do===null){Ke===null&&(Ke=Dn);break}f&&Ke&&Do.alternate===null&&h(te,Ke),X=M(Do,X,ft),et===null?Pe=Do:et.sibling=Do,et=Do,Ke=Dn}if(ht.done)return g(te,Ke),Gt&&ya(te,ft),Pe;if(Ke===null){for(;!ht.done;ft++,ht=se.next())ht=Xe(te,ht.value,Ce),ht!==null&&(X=M(ht,X,ft),et===null?Pe=ht:et.sibling=ht,et=ht);return Gt&&ya(te,ft),Pe}for(Ke=x(te,Ke);!ht.done;ft++,ht=se.next())ht=At(Ke,te,ft,ht.value,Ce),ht!==null&&(f&&ht.alternate!==null&&Ke.delete(ht.key===null?ft:ht.key),X=M(ht,X,ft),et===null?Pe=ht:et.sibling=ht,et=ht);return f&&Ke.forEach(function(S5){return h(te,S5)}),Gt&&ya(te,ft),Pe}function _i(te,X,se,Ce){if(typeof se=="object"&&se!==null&&se.type===u&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case l:e:{for(var Pe=se.key,et=X;et!==null;){if(et.key===Pe){if(Pe=se.type,Pe===u){if(et.tag===7){g(te,et.sibling),X=E(et,se.props.children),X.return=te,te=X;break e}}else if(et.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&C_(Pe)===et.type){g(te,et.sibling),X=E(et,se.props),X.ref=lu(te,et,se),X.return=te,te=X;break e}g(te,et);break}else h(te,et);et=et.sibling}se.type===u?(X=Ca(se.props.children,te.mode,Ce,se.key),X.return=te,te=X):(Ce=id(se.type,se.key,se.props,null,te.mode,Ce),Ce.ref=lu(te,X,se),Ce.return=te,te=Ce)}return U(te);case c:e:{for(et=se.key;X!==null;){if(X.key===et)if(X.tag===4&&X.stateNode.containerInfo===se.containerInfo&&X.stateNode.implementation===se.implementation){g(te,X.sibling),X=E(X,se.children||[]),X.return=te,te=X;break e}else{g(te,X);break}else h(te,X);X=X.sibling}X=mg(se,te.mode,Ce),X.return=te,te=X}return U(te);case C:return et=se._init,_i(te,X,et(se._payload),Ce)}if(V(se))return De(te,X,se,Ce);if(A(se))return Zn(te,X,se,Ce);Oh(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,X!==null&&X.tag===6?(g(te,X.sibling),X=E(X,se),X.return=te,te=X):(g(te,X),X=pg(se,te.mode,Ce),X.return=te,te=X),U(te)):g(te,X)}return _i}var Ol=O_(!0),k_=O_(!1),cu={},pi=Hr(cu),uu=Hr(cu),kl=Hr(cu);function fs(f){if(f===cu)throw Error(o(174));return f}function Pm(f,h){xt(kl,h),xt(uu,f),xt(pi,cu),f=K(h),_t(pi),xt(pi,f)}function Al(){_t(pi),_t(uu),_t(kl)}function A_(f){var h=fs(kl.current),g=fs(pi.current);h=G(g,f.type,h),g!==h&&(xt(uu,f),xt(pi,h))}function Dm(f){uu.current===f&&(_t(pi),_t(uu))}var Zt=Hr(0);function kh(f){for(var h=f;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||vt(g)||cn(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Im=[];function Nm(){for(var f=0;f<Im.length;f++){var h=Im[f];xe?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Im.length=0}var Ah=a.ReactCurrentDispatcher,mi=a.ReactCurrentBatchConfig,Rl=0,rn=null,Gn=null,Pn=null,Rh=!1,fu=!1,hu=0,Y3=0;function qn(){throw Error(o(321))}function Lm(f,h){if(h===null)return!1;for(var g=0;g<h.length&&g<f.length;g++)if(!Zr(f[g],h[g]))return!1;return!0}function Fm(f,h,g,x,E,M){if(Rl=M,rn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ah.current=f===null||f.memoizedState===null?Q3:J3,f=g(x,E),fu){M=0;do{if(fu=!1,hu=0,25<=M)throw Error(o(301));M+=1,Pn=Gn=null,h.updateQueue=null,Ah.current=e5,f=g(x,E)}while(fu)}if(Ah.current=Nh,h=Gn!==null&&Gn.next!==null,Rl=0,Pn=Gn=rn=null,Rh=!1,h)throw Error(o(300));return f}function Um(){var f=hu!==0;return hu=0,f}function Vs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?rn.memoizedState=Pn=f:Pn=Pn.next=f,Pn}function hs(){if(Gn===null){var f=rn.alternate;f=f!==null?f.memoizedState:null}else f=Gn.next;var h=Pn===null?rn.memoizedState:Pn.next;if(h!==null)Pn=h,Gn=f;else{if(f===null)throw Error(o(310));Gn=f,f={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Pn===null?rn.memoizedState=Pn=f:Pn=Pn.next=f}return Pn}function xa(f,h){return typeof h=="function"?h(f):h}function Mh(f){var h=hs(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=f;var x=Gn,E=x.baseQueue,M=g.pending;if(M!==null){if(E!==null){var U=E.next;E.next=M.next,M.next=U}x.baseQueue=E=M,g.pending=null}if(E!==null){M=E.next,x=x.baseState;var Y=U=null,ae=null,ye=M;do{var Oe=ye.lane;if((Rl&Oe)===Oe)ae!==null&&(ae=ae.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),x=ye.hasEagerState?ye.eagerState:f(x,ye.action);else{var Xe={lane:Oe,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};ae===null?(Y=ae=Xe,U=x):ae=ae.next=Xe,rn.lanes|=Oe,Pl|=Oe}ye=ye.next}while(ye!==null&&ye!==M);ae===null?U=x:ae.next=Y,Zr(x,h.memoizedState)||(Jr=!0),h.memoizedState=x,h.baseState=U,h.baseQueue=ae,g.lastRenderedState=x}if(f=g.interleaved,f!==null){E=f;do M=E.lane,rn.lanes|=M,Pl|=M,E=E.next;while(E!==f)}else E===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Ph(f){var h=hs(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=f;var x=g.dispatch,E=g.pending,M=h.memoizedState;if(E!==null){g.pending=null;var U=E=E.next;do M=f(M,U.action),U=U.next;while(U!==E);Zr(M,h.memoizedState)||(Jr=!0),h.memoizedState=M,h.baseQueue===null&&(h.baseState=M),g.lastRenderedState=M}return[M,x]}function R_(){}function M_(f,h){var g=rn,x=hs(),E=h(),M=!Zr(x.memoizedState,E);if(M&&(x.memoizedState=E,Jr=!0),x=x.queue,pu(I_.bind(null,g,x,f),[f]),x.getSnapshot!==h||M||Pn!==null&&Pn.memoizedState.tag&1){if(g.flags|=2048,du(9,D_.bind(null,g,x,E,h),void 0,null),yn===null)throw Error(o(349));Rl&30||P_(g,h,E)}return E}function P_(f,h,g){f.flags|=16384,f={getSnapshot:h,value:g},h=rn.updateQueue,h===null?(h={lastEffect:null,stores:null},rn.updateQueue=h,h.stores=[f]):(g=h.stores,g===null?h.stores=[f]:g.push(f))}function D_(f,h,g,x){h.value=g,h.getSnapshot=x,N_(h)&&gi(f,1,-1)}function I_(f,h,g){return g(function(){N_(h)&&gi(f,1,-1)})}function N_(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!Zr(f,g)}catch{return!0}}function zm(f){var h=Vs();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:f},h.queue=f,f=f.dispatch=K3.bind(null,rn,f),[h.memoizedState,f]}function du(f,h,g,x){return f={tag:f,create:h,destroy:g,deps:x,next:null},h=rn.updateQueue,h===null?(h={lastEffect:null,stores:null},rn.updateQueue=h,h.lastEffect=f.next=f):(g=h.lastEffect,g===null?h.lastEffect=f.next=f:(x=g.next,g.next=f,f.next=x,h.lastEffect=f)),f}function L_(){return hs().memoizedState}function Dh(f,h,g,x){var E=Vs();rn.flags|=f,E.memoizedState=du(1|h,g,void 0,x===void 0?null:x)}function Ih(f,h,g,x){var E=hs();x=x===void 0?null:x;var M=void 0;if(Gn!==null){var U=Gn.memoizedState;if(M=U.destroy,x!==null&&Lm(x,U.deps)){E.memoizedState=du(h,g,M,x);return}}rn.flags|=f,E.memoizedState=du(1|h,g,M,x)}function Bm(f,h){return Dh(8390656,8,f,h)}function pu(f,h){return Ih(2048,8,f,h)}function F_(f,h){return Ih(4,2,f,h)}function U_(f,h){return Ih(4,4,f,h)}function z_(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function B_(f,h,g){return g=g!=null?g.concat([f]):null,Ih(4,4,z_.bind(null,h,f),g)}function jm(){}function j_(f,h){var g=hs();h=h===void 0?null:h;var x=g.memoizedState;return x!==null&&h!==null&&Lm(h,x[1])?x[0]:(g.memoizedState=[f,h],f)}function $_(f,h){var g=hs();h=h===void 0?null:h;var x=g.memoizedState;return x!==null&&h!==null&&Lm(h,x[1])?x[0]:(f=f(),g.memoizedState=[f,h],f)}function Z3(f,h){var g=rt;rt=g!==0&&4>g?g:4,f(!0);var x=mi.transition;mi.transition={};try{f(!1),h()}finally{rt=g,mi.transition=x}}function V_(){return hs().memoizedState}function X3(f,h,g){var x=Ro(f);g={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null},H_(f)?W_(h,g):(G_(f,h,g),g=mr(),f=gi(f,x,g),f!==null&&q_(f,h,x))}function K3(f,h,g){var x=Ro(f),E={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null};if(H_(f))W_(h,E);else{G_(f,h,E);var M=f.alternate;if(f.lanes===0&&(M===null||M.lanes===0)&&(M=h.lastRenderedReducer,M!==null))try{var U=h.lastRenderedState,Y=M(U,g);if(E.hasEagerState=!0,E.eagerState=Y,Zr(Y,U))return}catch{}finally{}g=mr(),f=gi(f,x,g),f!==null&&q_(f,h,x)}}function H_(f){var h=f.alternate;return f===rn||h!==null&&h===rn}function W_(f,h){fu=Rh=!0;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}function G_(f,h,g){yn!==null&&f.mode&1&&!(nt&2)?(f=h.interleaved,f===null?(g.next=g,Xr===null?Xr=[h]:Xr.push(h)):(g.next=f.next,f.next=g),h.interleaved=g):(f=h.pending,f===null?g.next=g:(g.next=f.next,f.next=g),h.pending=g)}function q_(f,h,g){if(g&4194240){var x=h.lanes;x&=f.pendingLanes,g|=x,h.lanes=g,cs(f,g)}}var Nh={readContext:fn,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},Q3={readContext:fn,useCallback:function(f,h){return Vs().memoizedState=[f,h===void 0?null:h],f},useContext:fn,useEffect:Bm,useImperativeHandle:function(f,h,g){return g=g!=null?g.concat([f]):null,Dh(4194308,4,z_.bind(null,h,f),g)},useLayoutEffect:function(f,h){return Dh(4194308,4,f,h)},useInsertionEffect:function(f,h){return Dh(4,2,f,h)},useMemo:function(f,h){var g=Vs();return h=h===void 0?null:h,f=f(),g.memoizedState=[f,h],f},useReducer:function(f,h,g){var x=Vs();return h=g!==void 0?g(h):h,x.memoizedState=x.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},x.queue=f,f=f.dispatch=X3.bind(null,rn,f),[x.memoizedState,f]},useRef:function(f){var h=Vs();return f={current:f},h.memoizedState=f},useState:zm,useDebugValue:jm,useDeferredValue:function(f){var h=zm(f),g=h[0],x=h[1];return Bm(function(){var E=mi.transition;mi.transition={};try{x(f)}finally{mi.transition=E}},[f]),g},useTransition:function(){var f=zm(!1),h=f[0];return f=Z3.bind(null,f[1]),Vs().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,g){var x=rn,E=Vs();if(Gt){if(g===void 0)throw Error(o(407));g=g()}else{if(g=h(),yn===null)throw Error(o(349));Rl&30||P_(x,h,g)}E.memoizedState=g;var M={value:g,getSnapshot:h};return E.queue=M,Bm(I_.bind(null,x,M,f),[f]),x.flags|=2048,du(9,D_.bind(null,x,M,g,h),void 0,null),g},useId:function(){var f=Vs(),h=yn.identifierPrefix;if(Gt){var g=$s,x=js;g=(x&~(1<<32-qr(x)-1)).toString(32)+g,h=":"+h+"R"+g,g=hu++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=Y3++,h=":"+h+"r"+g.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},J3={readContext:fn,useCallback:j_,useContext:fn,useEffect:pu,useImperativeHandle:B_,useInsertionEffect:F_,useLayoutEffect:U_,useMemo:$_,useReducer:Mh,useRef:L_,useState:function(){return Mh(xa)},useDebugValue:jm,useDeferredValue:function(f){var h=Mh(xa),g=h[0],x=h[1];return pu(function(){var E=mi.transition;mi.transition={};try{x(f)}finally{mi.transition=E}},[f]),g},useTransition:function(){var f=Mh(xa)[0],h=hs().memoizedState;return[f,h]},useMutableSource:R_,useSyncExternalStore:M_,useId:V_,unstable_isNewReconciler:!1},e5={readContext:fn,useCallback:j_,useContext:fn,useEffect:pu,useImperativeHandle:B_,useInsertionEffect:F_,useLayoutEffect:U_,useMemo:$_,useReducer:Ph,useRef:L_,useState:function(){return Ph(xa)},useDebugValue:jm,useDeferredValue:function(f){var h=Ph(xa),g=h[0],x=h[1];return pu(function(){var E=mi.transition;mi.transition={};try{x(f)}finally{mi.transition=E}},[f]),g},useTransition:function(){var f=Ph(xa)[0],h=hs().memoizedState;return[f,h]},useMutableSource:R_,useSyncExternalStore:M_,useId:V_,unstable_isNewReconciler:!1};function $m(f,h){try{var g="",x=h;do g+=va(x),x=x.return;while(x);var E=g}catch(M){E=`
Error generating stack: `+M.message+`
`+M.stack}return{value:f,source:h,stack:E}}function Vm(f,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var t5=typeof WeakMap=="function"?WeakMap:Map;function Y_(f,h,g){g=Bs(-1,g),g.tag=3,g.payload={element:null};var x=h.value;return g.callback=function(){Kh||(Kh=!0,ag=x),Vm(f,h)},g}function Z_(f,h,g){g=Bs(-1,g),g.tag=3;var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var E=h.value;g.payload=function(){return x(E)},g.callback=function(){Vm(f,h)}}var M=f.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(g.callback=function(){Vm(f,h),typeof x!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})}),g}function X_(f,h,g){var x=f.pingCache;if(x===null){x=f.pingCache=new t5;var E=new Set;x.set(h,E)}else E=x.get(h),E===void 0&&(E=new Set,x.set(h,E));E.has(g)||(E.add(g),f=m5.bind(null,f,h,g),h.then(f,f))}function K_(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function Q_(f,h,g,x,E){return f.mode&1?(f.flags|=65536,f.lanes=E,f):(f===h?f.flags|=65536:(f.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Bs(-1,1),h.tag=2,Oo(g,h))),g.lanes|=1),f)}function ds(f){f.flags|=4}function J_(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var mu,gu,Lh,Fh;if(ce)mu=function(f,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)W(f,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},gu=function(){},Lh=function(f,h,g,x,E){if(f=f.memoizedProps,f!==x){var M=h.stateNode,U=fs(pi.current);g=ne(M,g,f,x,E,U),(h.updateQueue=g)&&ds(h)}},Fh=function(f,h,g,x){g!==x&&ds(h)};else if(ue){mu=function(f,h,g,x){for(var E=h.child;E!==null;){if(E.tag===5){var M=E.stateNode;g&&x&&(M=bo(M,E.type,E.memoizedProps,E)),W(f,M)}else if(E.tag===6)M=E.stateNode,g&&x&&(M=Ht(M,E.memoizedProps,E)),W(f,M);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)M=E.child,M!==null&&(M.return=E),mu(f,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ey=function(f,h,g,x){for(var E=h.child;E!==null;){if(E.tag===5){var M=E.stateNode;g&&x&&(M=bo(M,E.type,E.memoizedProps,E)),ar(f,M)}else if(E.tag===6)M=E.stateNode,g&&x&&(M=Ht(M,E.memoizedProps,E)),ar(f,M);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)M=E.child,M!==null&&(M.return=E),ey(f,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};gu=function(f,h){var g=h.stateNode;if(!J_(f,h)){f=g.containerInfo;var x=Li(f);ey(x,h,!1,!1),g.pendingChildren=x,ds(h),lr(f,x)}},Lh=function(f,h,g,x,E){var M=f.stateNode,U=f.memoizedProps;if((f=J_(f,h))&&U===x)h.stateNode=M;else{var Y=h.stateNode,ae=fs(pi.current),ye=null;U!==x&&(ye=ne(Y,g,U,x,E,ae)),f&&ye===null?h.stateNode=M:(M=Ds(M,ye,g,U,x,h,f,Y),ee(M,g,x,E,ae)&&ds(h),h.stateNode=M,f?ds(h):mu(M,h,!1,!1))}},Fh=function(f,h,g,x){g!==x?(f=fs(kl.current),g=fs(pi.current),h.stateNode=oe(x,f,g,h),ds(h)):h.stateNode=f.stateNode}}else gu=function(){},Lh=function(){},Fh=function(){};function vu(f,h){if(!Gt)switch(f.tailMode){case"hidden":h=f.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?f.tail=null:g.sibling=null;break;case"collapsed":g=f.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:x.sibling=null}}function Yn(f){var h=f.alternate!==null&&f.alternate.child===f.child,g=0,x=0;if(h)for(var E=f.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=f,E=E.sibling;else for(E=f.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=f,E=E.sibling;return f.subtreeFlags|=x,f.childLanes=g,h}function n5(f,h,g){var x=h.pendingProps;switch(km(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(h),null;case 1:return An(h.type)&&Ui(),Yn(h),null;case 3:return x=h.stateNode,Al(),_t(kn),_t(Sn),Nm(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(au(h)?ds(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Bi!==null&&(ug(Bi),Bi=null))),gu(f,h),Yn(h),null;case 5:Dm(h),g=fs(kl.current);var E=h.type;if(f!==null&&h.stateNode!=null)Lh(f,h,E,x,g),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!x){if(h.stateNode===null)throw Error(o(166));return Yn(h),null}if(f=fs(pi.current),au(h)){if(!Ee)throw Error(o(175));f=Vr(h.stateNode,h.type,h.memoizedProps,g,f,h,!ou),h.updateQueue=f,f!==null&&ds(h)}else{var M=F(E,x,g,f,h);mu(M,h,!1,!1),h.stateNode=M,ee(M,E,x,g,f)&&ds(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Yn(h),null;case 6:if(f&&h.stateNode!=null)Fh(f,h,f.memoizedProps,x);else{if(typeof x!="string"&&h.stateNode===null)throw Error(o(166));if(f=fs(kl.current),g=fs(pi.current),au(h)){if(!Ee)throw Error(o(176));if(f=h.stateNode,x=h.memoizedProps,(g=Is(f,x,h,!ou))&&(E=Kr,E!==null))switch(M=(E.mode&1)!==0,E.tag){case 3:Xc(E.stateNode.containerInfo,f,x,M);break;case 5:Kc(E.type,E.memoizedProps,E.stateNode,f,x,M)}g&&ds(h)}else h.stateNode=oe(x,f,g,h)}return Yn(h),null;case 13:if(_t(Zt),x=h.memoizedState,Gt&&Qr!==null&&h.mode&1&&!(h.flags&128)){for(f=Qr;f;)f=nn(f);return Cl(),h.flags|=98560,h}if(x!==null&&x.dehydrated!==null){if(x=au(h),f===null){if(!x)throw Error(o(318));if(!Ee)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));bm(f,h)}else Cl(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Yn(h),null}return Bi!==null&&(ug(Bi),Bi=null),h.flags&128?(h.lanes=g,h):(x=x!==null,g=!1,f===null?au(h):g=f.memoizedState!==null,x&&!g&&(h.child.flags|=8192,h.mode&1&&(f===null||Zt.current&1?Tn===0&&(Tn=3):hg())),h.updateQueue!==null&&(h.flags|=4),Yn(h),null);case 4:return Al(),gu(f,h),f===null&&J(h.stateNode.containerInfo),Yn(h),null;case 10:return Mn(h.type._context),Yn(h),null;case 17:return An(h.type)&&Ui(),Yn(h),null;case 19:if(_t(Zt),E=h.memoizedState,E===null)return Yn(h),null;if(x=(h.flags&128)!==0,M=E.rendering,M===null)if(x)vu(E,!1);else{if(Tn!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(M=kh(f),M!==null){for(h.flags|=128,vu(E,!1),f=M.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=g,x=h.child;x!==null;)g=x,E=f,g.flags&=14680066,M=g.alternate,M===null?(g.childLanes=0,g.lanes=E,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=M.childLanes,g.lanes=M.lanes,g.child=M.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=M.memoizedProps,g.memoizedState=M.memoizedState,g.updateQueue=M.updateQueue,g.type=M.type,E=M.dependencies,g.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),x=x.sibling;return xt(Zt,Zt.current&1|2),h.child}f=f.sibling}E.tail!==null&&Yt()>og&&(h.flags|=128,x=!0,vu(E,!1),h.lanes=4194304)}else{if(!x)if(f=kh(M),f!==null){if(h.flags|=128,x=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),vu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Gt)return Yn(h),null}else 2*Yt()-E.renderingStartTime>og&&g!==1073741824&&(h.flags|=128,x=!0,vu(E,!1),h.lanes=4194304);E.isBackwards?(M.sibling=h.child,h.child=M):(f=E.last,f!==null?f.sibling=M:h.child=M,E.last=M)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=Yt(),h.sibling=null,f=Zt.current,xt(Zt,x?f&1|2:f&1),h):(Yn(h),null);case 22:case 23:return fg(),x=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==x&&(h.flags|=8192),x&&h.mode&1?ei&1073741824&&(Yn(h),ce&&h.subtreeFlags&6&&(h.flags|=8192)):Yn(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var r5=a.ReactCurrentOwner,Jr=!1;function pr(f,h,g,x){h.child=f===null?k_(h,null,g,x):Ol(h,f.child,g,x)}function ty(f,h,g,x,E){g=g.render;var M=h.ref;return un(h,E),x=Fm(f,h,g,x,M,E),g=Um(),f!==null&&!Jr?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~E,Hs(f,h,E)):(Gt&&g&&Om(h),h.flags|=1,pr(f,h,x,E),h.child)}function ny(f,h,g,x,E){if(f===null){var M=g.type;return typeof M=="function"&&!dg(M)&&M.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=M,ry(f,h,M,x,E)):(f=id(g.type,null,x,h,h.mode,E),f.ref=h.ref,f.return=h,h.child=f)}if(M=f.child,!(f.lanes&E)){var U=M.memoizedProps;if(g=g.compare,g=g!==null?g:ga,g(U,x)&&f.ref===h.ref)return Hs(f,h,E)}return h.flags|=1,f=Po(M,x),f.ref=h.ref,f.return=h,h.child=f}function ry(f,h,g,x,E){if(f!==null&&ga(f.memoizedProps,x)&&f.ref===h.ref)if(Jr=!1,(f.lanes&E)!==0)f.flags&131072&&(Jr=!0);else return h.lanes=f.lanes,Hs(f,h,E);return Hm(f,h,g,x,E)}function iy(f,h,g){var x=h.pendingProps,E=x.children,M=f!==null?f.memoizedState:null;if(x.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},xt(Ml,ei),ei|=g;else if(g&1073741824)h.memoizedState={baseLanes:0,cachePool:null},x=M!==null?M.baseLanes:g,xt(Ml,ei),ei|=x;else return f=M!==null?M.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,xt(Ml,ei),ei|=f,null;else M!==null?(x=M.baseLanes|g,h.memoizedState=null):x=g,xt(Ml,ei),ei|=x;return pr(f,h,E,g),h.child}function sy(f,h){var g=h.ref;(f===null&&g!==null||f!==null&&f.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function Hm(f,h,g,x,E){var M=An(g)?as:Sn.current;return M=ui(h,M),un(h,E),g=Fm(f,h,g,x,M,E),x=Um(),f!==null&&!Jr?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~E,Hs(f,h,E)):(Gt&&x&&Om(h),h.flags|=1,pr(f,h,g,E),h.child)}function oy(f,h,g,x,E){if(An(g)){var M=!0;So(h)}else M=!1;if(un(h,E),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),x_(h,g,x),Cm(h,g,x,E),x=!0;else if(f===null){var U=h.stateNode,Y=h.memoizedProps;U.props=Y;var ae=U.context,ye=g.contextType;typeof ye=="object"&&ye!==null?ye=fn(ye):(ye=An(g)?as:Sn.current,ye=ui(h,ye));var Oe=g.getDerivedStateFromProps,Xe=typeof Oe=="function"||typeof U.getSnapshotBeforeUpdate=="function";Xe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Y!==x||ae!==ye)&&w_(h,U,x,ye),Co=!1;var Ue=h.memoizedState;U.state=Ue,Sh(h,x,U,E),ae=h.memoizedState,Y!==x||Ue!==ae||kn.current||Co?(typeof Oe=="function"&&(Em(h,g,Oe,x),ae=h.memoizedState),(Y=Co||y_(h,g,Y,x,Ue,ae,ye))?(Xe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(h.flags|=4194308)):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=ae),U.props=x,U.state=ae,U.context=ye,x=Y):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{U=h.stateNode,m_(f,h),Y=h.memoizedProps,ye=h.type===h.elementType?Y:hr(h.type,Y),U.props=ye,Xe=h.pendingProps,Ue=U.context,ae=g.contextType,typeof ae=="object"&&ae!==null?ae=fn(ae):(ae=An(g)?as:Sn.current,ae=ui(h,ae));var At=g.getDerivedStateFromProps;(Oe=typeof At=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Y!==Xe||Ue!==ae)&&w_(h,U,x,ae),Co=!1,Ue=h.memoizedState,U.state=Ue,Sh(h,x,U,E);var De=h.memoizedState;Y!==Xe||Ue!==De||kn.current||Co?(typeof At=="function"&&(Em(h,g,At,x),De=h.memoizedState),(ye=Co||y_(h,g,ye,x,Ue,De,ae)||!1)?(Oe||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,De,ae),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,De,ae)),typeof U.componentDidUpdate=="function"&&(h.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof U.componentDidUpdate!="function"||Y===f.memoizedProps&&Ue===f.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&Ue===f.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=De),U.props=x,U.state=De,U.context=ae,x=ye):(typeof U.componentDidUpdate!="function"||Y===f.memoizedProps&&Ue===f.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&Ue===f.memoizedState||(h.flags|=1024),x=!1)}return Wm(f,h,g,x,M,E)}function Wm(f,h,g,x,E,M){sy(f,h);var U=(h.flags&128)!==0;if(!x&&!U)return E&&Gr(h,g,!1),Hs(f,h,M);x=h.stateNode,r5.current=h;var Y=U&&typeof g.getDerivedStateFromError!="function"?null:x.render();return h.flags|=1,f!==null&&U?(h.child=Ol(h,f.child,null,M),h.child=Ol(h,null,Y,M)):pr(f,h,Y,M),h.memoizedState=x.state,E&&Gr(h,g,!0),h.child}function ay(f){var h=f.stateNode;h.pendingContext?vl(f,h.pendingContext,h.pendingContext!==h.context):h.context&&vl(f,h.context,!1),Pm(f,h.containerInfo)}function ly(f,h,g,x,E){return Cl(),Mm(E),h.flags|=256,pr(f,h,g,x),h.child}var Uh={dehydrated:null,treeContext:null,retryLane:0};function zh(f){return{baseLanes:f,cachePool:null}}function cy(f,h,g){var x=h.pendingProps,E=Zt.current,M=!1,U=(h.flags&128)!==0,Y;if((Y=U)||(Y=f!==null&&f.memoizedState===null?!1:(E&2)!==0),Y?(M=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(E|=1),xt(Zt,E&1),f===null)return Rm(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?cn(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(E=x.children,f=x.fallback,M?(x=h.mode,M=h.child,E={mode:"hidden",children:E},!(x&1)&&M!==null?(M.childLanes=0,M.pendingProps=E):M=sd(E,x,0,null),f=Ca(f,x,g,null),M.return=h,f.return=h,M.sibling=f,h.child=M,h.child.memoizedState=zh(g),h.memoizedState=Uh,f):Gm(h,E));if(E=f.memoizedState,E!==null){if(Y=E.dehydrated,Y!==null){if(U)return h.flags&256?(h.flags&=-257,Bh(f,h,g,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(M=x.fallback,E=h.mode,x=sd({mode:"visible",children:x.children},E,0,null),M=Ca(M,E,g,null),M.flags|=2,x.return=h,M.return=h,x.sibling=M,h.child=x,h.mode&1&&Ol(h,f.child,null,g),h.child.memoizedState=zh(g),h.memoizedState=Uh,M);if(!(h.mode&1))h=Bh(f,h,g,null);else if(cn(Y))h=Bh(f,h,g,Error(o(419)));else if(x=(g&f.childLanes)!==0,Jr||x){if(x=yn,x!==null){switch(g&-g){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}x=M&(x.suspendedLanes|g)?0:M,x!==0&&x!==E.retryLane&&(E.retryLane=x,gi(f,x,-1))}hg(),h=Bh(f,h,g,Error(o(421)))}else vt(Y)?(h.flags|=128,h.child=f.child,h=g5.bind(null,f),Er(Y,h),h=null):(g=E.treeContext,Ee&&(Qr=is(Y),Kr=h,Gt=!0,Bi=null,ou=!1,g!==null&&(hi[di++]=js,hi[di++]=$s,hi[di++]=_a,js=g.id,$s=g.overflow,_a=h)),h=Gm(h,h.pendingProps.children),h.flags|=4096);return h}return M?(x=fy(f,h,x.children,x.fallback,g),M=h.child,E=f.child.memoizedState,M.memoizedState=E===null?zh(g):{baseLanes:E.baseLanes|g,cachePool:null},M.childLanes=f.childLanes&~g,h.memoizedState=Uh,x):(g=uy(f,h,x.children,g),h.memoizedState=null,g)}return M?(x=fy(f,h,x.children,x.fallback,g),M=h.child,E=f.child.memoizedState,M.memoizedState=E===null?zh(g):{baseLanes:E.baseLanes|g,cachePool:null},M.childLanes=f.childLanes&~g,h.memoizedState=Uh,x):(g=uy(f,h,x.children,g),h.memoizedState=null,g)}function Gm(f,h){return h=sd({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function uy(f,h,g,x){var E=f.child;return f=E.sibling,g=Po(E,{mode:"visible",children:g}),!(h.mode&1)&&(g.lanes=x),g.return=h,g.sibling=null,f!==null&&(x=h.deletions,x===null?(h.deletions=[f],h.flags|=16):x.push(f)),h.child=g}function fy(f,h,g,x,E){var M=h.mode;f=f.child;var U=f.sibling,Y={mode:"hidden",children:g};return!(M&1)&&h.child!==f?(g=h.child,g.childLanes=0,g.pendingProps=Y,h.deletions=null):(g=Po(f,Y),g.subtreeFlags=f.subtreeFlags&14680064),U!==null?x=Po(U,x):(x=Ca(x,M,E,null),x.flags|=2),x.return=h,g.return=h,g.sibling=x,h.child=g,x}function Bh(f,h,g,x){return x!==null&&Mm(x),Ol(h,f.child,null,g),f=Gm(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function hy(f,h,g){f.lanes|=h;var x=f.alternate;x!==null&&(x.lanes|=h),dr(f.return,h,g)}function qm(f,h,g,x,E){var M=f.memoizedState;M===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:E}:(M.isBackwards=h,M.rendering=null,M.renderingStartTime=0,M.last=x,M.tail=g,M.tailMode=E)}function dy(f,h,g){var x=h.pendingProps,E=x.revealOrder,M=x.tail;if(pr(f,h,x.children,g),x=Zt.current,x&2)x=x&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&hy(f,g,h);else if(f.tag===19)hy(f,g,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}x&=1}if(xt(Zt,x),!(h.mode&1))h.memoizedState=null;else switch(E){case"forwards":for(g=h.child,E=null;g!==null;)f=g.alternate,f!==null&&kh(f)===null&&(E=g),g=g.sibling;g=E,g===null?(E=h.child,h.child=null):(E=g.sibling,g.sibling=null),qm(h,!1,E,g,M);break;case"backwards":for(g=null,E=h.child,h.child=null;E!==null;){if(f=E.alternate,f!==null&&kh(f)===null){h.child=E;break}f=E.sibling,E.sibling=g,g=E,E=f}qm(h,!0,g,null,M);break;case"together":qm(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Hs(f,h,g){if(f!==null&&(h.dependencies=f.dependencies),Pl|=h.lanes,!(g&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,g=Po(f,f.pendingProps),h.child=g,g.return=h;f.sibling!==null;)f=f.sibling,g=g.sibling=Po(f,f.pendingProps),g.return=h;g.sibling=null}return h.child}function i5(f,h,g){switch(h.tag){case 3:ay(h),Cl();break;case 5:A_(h);break;case 1:An(h.type)&&So(h);break;case 4:Pm(h,h.stateNode.containerInfo);break;case 10:wh(h,h.type._context,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(xt(Zt,Zt.current&1),h.flags|=128,null):g&h.child.childLanes?cy(f,h,g):(xt(Zt,Zt.current&1),f=Hs(f,h,g),f!==null?f.sibling:null);xt(Zt,Zt.current&1);break;case 19:if(x=(g&h.childLanes)!==0,f.flags&128){if(x)return dy(f,h,g);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),xt(Zt,Zt.current),x)break;return null;case 22:case 23:return h.lanes=0,iy(f,h,g)}return Hs(f,h,g)}function s5(f,h){switch(km(h),h.tag){case 1:return An(h.type)&&Ui(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return Al(),_t(kn),_t(Sn),Nm(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return Dm(h),null;case 13:if(_t(Zt),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Cl()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return _t(Zt),null;case 4:return Al(),null;case 10:return Mn(h.type._context),null;case 22:case 23:return fg(),null;case 24:return null;default:return null}}var jh=!1,wa=!1,o5=typeof WeakSet=="function"?WeakSet:Set,Se=null;function $h(f,h){var g=f.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(x){Ar(f,h,x)}else g.current=null}function Ym(f,h,g){try{g()}catch(x){Ar(f,h,x)}}var py=!1;function a5(f,h){for(H(f.containerInfo),Se=h;Se!==null;)if(f=Se,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,Se=h;else for(;Se!==null;){f=Se;try{var g=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,E=g.memoizedState,M=f.stateNode,U=M.getSnapshotBeforeUpdate(f.elementType===f.type?x:hr(f.type,x),E);M.__reactInternalSnapshotBeforeUpdate=U}break;case 3:ce&&Ni(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Ar(f,f.return,Y)}if(h=f.sibling,h!==null){h.return=f.return,Se=h;break}Se=f.return}return g=py,py=!1,g}function ba(f,h,g){var x=h.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&f)===f){var M=E.destroy;E.destroy=void 0,M!==void 0&&Ym(h,g,M)}E=E.next}while(E!==x)}}function _u(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&f)===f){var x=g.create;g.destroy=x()}g=g.next}while(g!==h)}}function Zm(f){var h=f.ref;if(h!==null){var g=f.stateNode;switch(f.tag){case 5:f=$(g);break;default:f=g}typeof h=="function"?h(f):h.current=f}}function my(f,h,g){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(pa,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var x=f=f.next;do{var E=x,M=E.destroy;E=E.tag,M!==void 0&&(E&2||E&4)&&Ym(h,g,M),x=x.next}while(x!==f)}break;case 1:if($h(h,g),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(U){Ar(h,g,U)}break;case 5:$h(h,g);break;case 4:ce?wy(f,h,g):ue&&ue&&(h=h.stateNode.containerInfo,g=Li(h),Bt(h,g))}}function gy(f,h,g){for(var x=h;;)if(my(f,x,g),x.child===null||ce&&x.tag===4){if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else x.child.return=x,x=x.child}function vy(f){var h=f.alternate;h!==null&&(f.alternate=null,vy(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&be(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function _y(f){return f.tag===5||f.tag===3||f.tag===4}function yy(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||_y(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function xy(f){if(ce){e:{for(var h=f.return;h!==null;){if(_y(h))break e;h=h.return}throw Error(o(160))}var g=h;switch(g.tag){case 5:h=g.stateNode,g.flags&32&&(ct(h),g.flags&=-33),g=yy(f),Km(f,g,h);break;case 3:case 4:h=g.stateNode.containerInfo,g=yy(f),Xm(f,g,h);break;default:throw Error(o(161))}}}function Xm(f,h,g){var x=f.tag;if(x===5||x===6)f=f.stateNode,h?Ze(g,f,h):He(g,f);else if(x!==4&&(f=f.child,f!==null))for(Xm(f,h,g),f=f.sibling;f!==null;)Xm(f,h,g),f=f.sibling}function Km(f,h,g){var x=f.tag;if(x===5||x===6)f=f.stateNode,h?ut(g,f,h):Re(g,f);else if(x!==4&&(f=f.child,f!==null))for(Km(f,h,g),f=f.sibling;f!==null;)Km(f,h,g),f=f.sibling}function wy(f,h,g){for(var x=h,E=!1,M,U;;){if(!E){E=x.return;e:for(;;){if(E===null)throw Error(o(160));switch(M=E.stateNode,E.tag){case 5:U=!1;break e;case 3:M=M.containerInfo,U=!0;break e;case 4:M=M.containerInfo,U=!0;break e}E=E.return}E=!0}if(x.tag===5||x.tag===6)gy(f,x,g),U?ot(M,x.stateNode):Fe(M,x.stateNode);else if(x.tag===18)U?mh(M,x.stateNode):Sm(M,x.stateNode);else if(x.tag===4){if(x.child!==null){M=x.stateNode.containerInfo,U=!0,x.child.return=x,x=x.child;continue}}else if(my(f,x,g),x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return,x.tag===4&&(E=!1)}x.sibling.return=x.return,x=x.sibling}}function Qm(f,h){if(ce){switch(h.tag){case 0:case 11:case 14:case 15:ba(3,h,h.return),_u(3,h),ba(5,h,h.return);return;case 1:return;case 5:var g=h.stateNode;if(g!=null){var x=h.memoizedProps;f=f!==null?f.memoizedProps:x;var E=h.type,M=h.updateQueue;h.updateQueue=null,M!==null&&Ge(g,M,E,f,x,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));g=h.memoizedProps,it(h.stateNode,f!==null?f.memoizedProps:g,g);return;case 3:Ee&&f!==null&&f.memoizedState.isDehydrated&&ua(h.stateNode.containerInfo);return;case 12:return;case 13:Vh(h);return;case 19:Vh(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:ba(3,h,h.return),_u(3,h),ba(5,h,h.return);return;case 12:return;case 13:Vh(h);return;case 19:Vh(h);return;case 3:Ee&&f!==null&&f.memoizedState.isDehydrated&&ua(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(ue){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Bt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Vh(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var g=f.stateNode;g===null&&(g=f.stateNode=new o5),h.forEach(function(x){var E=v5.bind(null,f,x);g.has(x)||(g.add(x),x.then(E,E))})}}function l5(f,h){for(Se=h;Se!==null;){h=Se;var g=h.deletions;if(g!==null)for(var x=0;x<g.length;x++){var E=g[x];try{var M=f;ce?wy(M,E,h):gy(M,E,h);var U=E.alternate;U!==null&&(U.return=null),E.return=null}catch(Pe){Ar(E,h,Pe)}}if(g=h.child,h.subtreeFlags&12854&&g!==null)g.return=h,Se=g;else for(;Se!==null;){h=Se;try{var Y=h.flags;if(Y&32&&ce&&ct(h.stateNode),Y&512){var ae=h.alternate;if(ae!==null){var ye=ae.ref;ye!==null&&(typeof ye=="function"?ye(null):ye.current=null)}}if(Y&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Oe=h.alternate;(Oe===null||Oe.memoizedState===null)&&(sg=Yt())}break;case 22:var Xe=h.memoizedState!==null,Ue=h.alternate,At=Ue!==null&&Ue.memoizedState!==null;if(g=h,ce){e:if(x=g,E=Xe,M=null,ce)for(var De=x;;){if(De.tag===5){if(M===null){M=De;var Zn=De.stateNode;E?Vt(Zn):zt(De.stateNode,De.memoizedProps)}}else if(De.tag===6){if(M===null){var _i=De.stateNode;E?Je(_i):zn(_i,De.memoizedProps)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===x)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===x)break;for(;De.sibling===null;){if(De.return===null||De.return===x)break e;M===De&&(M=null),De=De.return}M===De&&(M=null),De.sibling.return=De.return,De=De.sibling}}if(Xe&&!At&&g.mode&1){Se=g;for(var te=g.child;te!==null;){for(g=Se=te;Se!==null;){x=Se;var X=x.child;switch(x.tag){case 0:case 11:case 14:case 15:ba(4,x,x.return);break;case 1:$h(x,x.return);var se=x.stateNode;if(typeof se.componentWillUnmount=="function"){var Ce=x.return;try{se.props=x.memoizedProps,se.state=x.memoizedState,se.componentWillUnmount()}catch(Pe){Ar(x,Ce,Pe)}}break;case 5:$h(x,x.return);break;case 22:if(x.memoizedState!==null){Ty(g);continue}}X!==null?(X.return=x,Se=X):Ty(g)}te=te.sibling}}}switch(Y&4102){case 2:xy(h),h.flags&=-3;break;case 6:xy(h),h.flags&=-3,Qm(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Qm(h.alternate,h);break;case 4:Qm(h.alternate,h)}}catch(Pe){Ar(h,h.return,Pe)}if(g=h.sibling,g!==null){g.return=h.return,Se=g;break}Se=h.return}}}function c5(f,h,g){Se=f,by(f)}function by(f,h,g){for(var x=(f.mode&1)!==0;Se!==null;){var E=Se,M=E.child;if(E.tag===22&&x){var U=E.memoizedState!==null||jh;if(!U){var Y=E.alternate,ae=Y!==null&&Y.memoizedState!==null||wa;Y=jh;var ye=wa;if(jh=U,(wa=ae)&&!ye)for(Se=E;Se!==null;)U=Se,ae=U.child,U.tag===22&&U.memoizedState!==null?Ey(E):ae!==null?(ae.return=U,Se=ae):Ey(E);for(;M!==null;)Se=M,by(M),M=M.sibling;Se=E,jh=Y,wa=ye}Sy(f)}else E.subtreeFlags&8772&&M!==null?(M.return=E,Se=M):Sy(f)}}function Sy(f){for(;Se!==null;){var h=Se;if(h.flags&8772){var g=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:wa||_u(5,h);break;case 1:var x=h.stateNode;if(h.flags&4&&!wa)if(g===null)x.componentDidMount();else{var E=h.elementType===h.type?g.memoizedProps:hr(h.type,g.memoizedProps);x.componentDidUpdate(E,g.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var M=h.updateQueue;M!==null&&v_(h,M,x);break;case 3:var U=h.updateQueue;if(U!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=$(h.child.stateNode);break;case 1:g=h.child.stateNode}v_(h,U,g)}break;case 5:var Y=h.stateNode;g===null&&h.flags&4&&It(Y,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&h.memoizedState===null){var ae=h.alternate;if(ae!==null){var ye=ae.memoizedState;if(ye!==null){var Oe=ye.dehydrated;Oe!==null&&Zc(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}wa||h.flags&512&&Zm(h)}catch(Xe){Ar(h,h.return,Xe)}}if(h===f){Se=null;break}if(g=h.sibling,g!==null){g.return=h.return,Se=g;break}Se=h.return}}function Ty(f){for(;Se!==null;){var h=Se;if(h===f){Se=null;break}var g=h.sibling;if(g!==null){g.return=h.return,Se=g;break}Se=h.return}}function Ey(f){for(;Se!==null;){var h=Se;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{_u(4,h)}catch(ae){Ar(h,g,ae)}break;case 1:var x=h.stateNode;if(typeof x.componentDidMount=="function"){var E=h.return;try{x.componentDidMount()}catch(ae){Ar(h,E,ae)}}var M=h.return;try{Zm(h)}catch(ae){Ar(h,M,ae)}break;case 5:var U=h.return;try{Zm(h)}catch(ae){Ar(h,U,ae)}}}catch(ae){Ar(h,h.return,ae)}if(h===f){Se=null;break}var Y=h.sibling;if(Y!==null){Y.return=h.return,Se=Y;break}Se=h.return}}var Hh=0,Wh=1,Gh=2,qh=3,Yh=4;if(typeof Symbol=="function"&&Symbol.for){var yu=Symbol.for;Hh=yu("selector.component"),Wh=yu("selector.has_pseudo_class"),Gh=yu("selector.role"),qh=yu("selector.test_id"),Yh=yu("selector.text")}function Jm(f){var h=Ie(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=he(f),f===null)throw Error(o(362));return f.stateNode.current}function eg(f,h){switch(h.$$typeof){case Hh:if(f.type===h.value)return!0;break;case Wh:e:{h=h.value,f=[f,0];for(var g=0;g<f.length;){var x=f[g++],E=f[g++],M=h[E];if(x.tag!==5||!pe(x)){for(;M!=null&&eg(x,M);)E++,M=h[E];if(E===h.length){h=!0;break e}else for(x=x.child;x!==null;)f.push(x,E),x=x.sibling}}h=!1}return h;case Gh:if(f.tag===5&&we(f.stateNode,h.value))return!0;break;case Yh:if((f.tag===5||f.tag===6)&&(f=ie(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case qh:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function tg(f){switch(f.$$typeof){case Hh:return"<"+(k(f.value)||"Unknown")+">";case Wh:return":has("+(tg(f)||"")+")";case Gh:return'[role="'+f.value+'"]';case Yh:return'"'+f.value+'"';case qh:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function Cy(f,h){var g=[];f=[f,0];for(var x=0;x<f.length;){var E=f[x++],M=f[x++],U=h[M];if(E.tag!==5||!pe(E)){for(;U!=null&&eg(E,U);)M++,U=h[M];if(M===h.length)g.push(E);else for(E=E.child;E!==null;)f.push(E,M),E=E.sibling}}return g}function ng(f,h){if(!me)throw Error(o(363));f=Jm(f),f=Cy(f,h),h=[],f=Array.from(f);for(var g=0;g<f.length;){var x=f[g++];if(x.tag===5)pe(x)||h.push(x.stateNode);else for(x=x.child;x!==null;)f.push(x),x=x.sibling}return h}var u5=Math.ceil,Zh=a.ReactCurrentDispatcher,rg=a.ReactCurrentOwner,hn=a.ReactCurrentBatchConfig,nt=0,yn=null,xn=null,jn=0,ei=0,Ml=Hr(0),Tn=0,xu=null,Pl=0,Xh=0,ig=0,wu=null,Or=null,sg=0,og=1/0;function Dl(){og=Yt()+500}var Kh=!1,ag=null,ko=null,Qh=!1,Ao=null,Jh=0,bu=0,lg=null,ed=-1,td=0;function mr(){return nt&6?Yt():ed!==-1?ed:ed=Yt()}function Ro(f){return f.mode&1?nt&2&&jn!==0?jn&-jn:ma.transition!==null?(td===0&&(f=Ns,Ns<<=1,!(Ns&4194240)&&(Ns=64),td=f),td):(f=rt,f!==0?f:de()):1}function gi(f,h,g){if(50<bu)throw bu=0,lg=null,Error(o(185));var x=nd(f,h);return x===null?null:(ls(x,h,g),(!(nt&2)||x!==yn)&&(x===yn&&(!(nt&2)&&(Xh|=h),Tn===4&&Mo(x,jn)),kr(x,g),h===1&&nt===0&&!(f.mode&1)&&(Dl(),us&&Cr())),x)}function nd(f,h){f.lanes|=h;var g=f.alternate;for(g!==null&&(g.lanes|=h),g=f,f=f.return;f!==null;)f.childLanes|=h,g=f.alternate,g!==null&&(g.childLanes|=h),g=f,f=f.return;return g.tag===3?g.stateNode:null}function kr(f,h){var g=f.callbackNode;Jc(f,h);var x=ha(f,f===yn?jn:0);if(x===0)g!==null&&wl(g),f.callbackNode=null,f.callbackPriority=0;else if(h=x&-x,f.callbackPriority!==h){if(g!=null&&wl(g),h===1)f.tag===0?su(ky.bind(null,f)):iu(ky.bind(null,f)),fe?ge(function(){nt===0&&Cr()}):zs(da,Cr),g=null;else{switch(eu(x)){case 1:g=da;break;case 4:g=yh;break;case 16:g=ur;break;case 536870912:g=nu;break;default:g=ur}g=Fy(g,Oy.bind(null,f))}f.callbackPriority=h,f.callbackNode=g}}function Oy(f,h){if(ed=-1,td=0,nt&6)throw Error(o(327));var g=f.callbackNode;if(Ea()&&f.callbackNode!==g)return null;var x=ha(f,f===yn?jn:0);if(x===0)return null;if(x&30||x&f.expiredLanes||h)h=rd(f,x);else{h=x;var E=nt;nt|=2;var M=My();(yn!==f||jn!==h)&&(Dl(),Sa(f,h));do try{d5();break}catch(Y){Ry(f,Y)}while(1);Sl(),Zh.current=M,nt=E,xn!==null?h=0:(yn=null,jn=0,h=Tn)}if(h!==0){if(h===2&&(E=Us(f),E!==0&&(x=E,h=cg(f,E))),h===1)throw g=xu,Sa(f,0),Mo(f,x),kr(f,Yt()),g;if(h===6)Mo(f,x);else{if(E=f.current.alternate,!(x&30)&&!f5(E)&&(h=rd(f,x),h===2&&(M=Us(f),M!==0&&(x=M,h=cg(f,M))),h===1))throw g=xu,Sa(f,0),Mo(f,x),kr(f,Yt()),g;switch(f.finishedWork=E,f.finishedLanes=x,h){case 0:case 1:throw Error(o(345));case 2:Ta(f,Or);break;case 3:if(Mo(f,x),(x&130023424)===x&&(h=sg+500-Yt(),10<h)){if(ha(f,0)!==0)break;if(E=f.suspendedLanes,(E&x)!==x){mr(),f.pingedLanes|=f.suspendedLanes&E;break}f.timeoutHandle=re(Ta.bind(null,f,Or),h);break}Ta(f,Or);break;case 4:if(Mo(f,x),(x&4194240)===x)break;for(h=f.eventTimes,E=-1;0<x;){var U=31-qr(x);M=1<<U,U=h[U],U>E&&(E=U),x&=~M}if(x=E,x=Yt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*u5(x/1960))-x,10<x){f.timeoutHandle=re(Ta.bind(null,f,Or),x);break}Ta(f,Or);break;case 5:Ta(f,Or);break;default:throw Error(o(329))}}}return kr(f,Yt()),f.callbackNode===g?Oy.bind(null,f):null}function cg(f,h){var g=wu;return f.current.memoizedState.isDehydrated&&(Sa(f,h).flags|=256),f=rd(f,h),f!==2&&(h=Or,Or=g,h!==null&&ug(h)),f}function ug(f){Or===null?Or=f:Or.push.apply(Or,f)}function f5(f){for(var h=f;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var x=0;x<g.length;x++){var E=g[x],M=E.getSnapshot;E=E.value;try{if(!Zr(M(),E))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Mo(f,h){for(h&=~ig,h&=~Xh,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var g=31-qr(h),x=1<<g;f[g]=-1,h&=~x}}function ky(f){if(nt&6)throw Error(o(327));Ea();var h=ha(f,0);if(!(h&1))return kr(f,Yt()),null;var g=rd(f,h);if(f.tag!==0&&g===2){var x=Us(f);x!==0&&(h=x,g=cg(f,x))}if(g===1)throw g=xu,Sa(f,0),Mo(f,h),kr(f,Yt()),g;if(g===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,Ta(f,Or),kr(f,Yt()),null}function Ay(f){Ao!==null&&Ao.tag===0&&!(nt&6)&&Ea();var h=nt;nt|=1;var g=hn.transition,x=rt;try{if(hn.transition=null,rt=1,f)return f()}finally{rt=x,hn.transition=g,nt=h,!(nt&6)&&Cr()}}function fg(){ei=Ml.current,_t(Ml)}function Sa(f,h){f.finishedWork=null,f.finishedLanes=0;var g=f.timeoutHandle;if(g!==_e&&(f.timeoutHandle=_e,Q(g)),xn!==null)for(g=xn.return;g!==null;){var x=g;switch(km(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ui();break;case 3:Al(),_t(kn),_t(Sn),Nm();break;case 5:Dm(x);break;case 4:Al();break;case 13:_t(Zt);break;case 19:_t(Zt);break;case 10:Mn(x.type._context);break;case 22:case 23:fg()}g=g.return}if(yn=f,xn=f=Po(f.current,null),jn=ei=h,Tn=0,xu=null,ig=Xh=Pl=0,Or=wu=null,Xr!==null){for(h=0;h<Xr.length;h++)if(g=Xr[h],x=g.interleaved,x!==null){g.interleaved=null;var E=x.next,M=g.pending;if(M!==null){var U=M.next;M.next=E,x.next=U}g.pending=x}Xr=null}return f}function Ry(f,h){do{var g=xn;try{if(Sl(),Ah.current=Nh,Rh){for(var x=rn.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}Rh=!1}if(Rl=0,Pn=Gn=rn=null,fu=!1,hu=0,rg.current=null,g===null||g.return===null){Tn=1,xu=h,xn=null;break}e:{var M=f,U=g.return,Y=g,ae=h;if(h=jn,Y.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var ye=ae,Oe=Y,Xe=Oe.tag;if(!(Oe.mode&1)&&(Xe===0||Xe===11||Xe===15)){var Ue=Oe.alternate;Ue?(Oe.updateQueue=Ue.updateQueue,Oe.memoizedState=Ue.memoizedState,Oe.lanes=Ue.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var At=K_(U);if(At!==null){At.flags&=-257,Q_(At,U,Y,M,h),At.mode&1&&X_(M,ye,h),h=At,ae=ye;var De=h.updateQueue;if(De===null){var Zn=new Set;Zn.add(ae),h.updateQueue=Zn}else De.add(ae);break e}else{if(!(h&1)){X_(M,ye,h),hg();break e}ae=Error(o(426))}}else if(Gt&&Y.mode&1){var _i=K_(U);if(_i!==null){!(_i.flags&65536)&&(_i.flags|=256),Q_(_i,U,Y,M,h),Mm(ae);break e}}M=ae,Tn!==4&&(Tn=2),wu===null?wu=[M]:wu.push(M),ae=$m(ae,Y),Y=U;do{switch(Y.tag){case 3:Y.flags|=65536,h&=-h,Y.lanes|=h;var te=Y_(Y,ae,h);g_(Y,te);break e;case 1:M=ae;var X=Y.type,se=Y.stateNode;if(!(Y.flags&128)&&(typeof X.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(ko===null||!ko.has(se)))){Y.flags|=65536,h&=-h,Y.lanes|=h;var Ce=Z_(Y,M,h);g_(Y,Ce);break e}}Y=Y.return}while(Y!==null)}Dy(g)}catch(Pe){h=Pe,xn===g&&g!==null&&(xn=g=g.return);continue}break}while(1)}function My(){var f=Zh.current;return Zh.current=Nh,f===null?Nh:f}function hg(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),yn===null||!(Pl&268435455)&&!(Xh&268435455)||Mo(yn,jn)}function rd(f,h){var g=nt;nt|=2;var x=My();yn===f&&jn===h||Sa(f,h);do try{h5();break}catch(E){Ry(f,E)}while(1);if(Sl(),nt=g,Zh.current=x,xn!==null)throw Error(o(261));return yn=null,jn=0,Tn}function h5(){for(;xn!==null;)Py(xn)}function d5(){for(;xn!==null&&!tu();)Py(xn)}function Py(f){var h=Ly(f.alternate,f,ei);f.memoizedProps=f.pendingProps,h===null?Dy(f):xn=h,rg.current=null}function Dy(f){var h=f;do{var g=h.alternate;if(f=h.return,h.flags&32768){if(g=s5(g,h),g!==null){g.flags&=32767,xn=g;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Tn=6,xn=null;return}}else if(g=n5(g,h,ei),g!==null){xn=g;return}if(h=h.sibling,h!==null){xn=h;return}xn=h=f}while(h!==null);Tn===0&&(Tn=5)}function Ta(f,h){var g=rt,x=hn.transition;try{hn.transition=null,rt=1,p5(f,h,g)}finally{hn.transition=x,rt=g}return null}function p5(f,h,g){do Ea();while(Ao!==null);if(nt&6)throw Error(o(327));var x=f.finishedWork,E=f.finishedLanes;if(x===null)return null;if(f.finishedWork=null,f.finishedLanes=0,x===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var M=x.lanes|x.childLanes;if(To(f,M),f===yn&&(xn=yn=null,jn=0),!(x.subtreeFlags&2064)&&!(x.flags&2064)||Qh||(Qh=!0,Fy(ur,function(){return Ea(),null})),M=(x.flags&15990)!==0,x.subtreeFlags&15990||M){M=hn.transition,hn.transition=null;var U=rt;rt=1;var Y=nt;nt|=4,rg.current=null,a5(f,x),l5(f,x),q(f.containerInfo),f.current=x,c5(x),_h(),nt=Y,rt=U,hn.transition=M}else f.current=x;if(Qh&&(Qh=!1,Ao=f,Jh=E),M=f.pendingLanes,M===0&&(ko=null),ru(x.stateNode),kr(f,Yt()),h!==null)for(g=f.onRecoverableError,x=0;x<h.length;x++)g(h[x]);if(Kh)throw Kh=!1,f=ag,ag=null,f;return Jh&1&&f.tag!==0&&Ea(),M=f.pendingLanes,M&1?f===lg?bu++:(bu=0,lg=f):bu=0,Cr(),null}function Ea(){if(Ao!==null){var f=eu(Jh),h=hn.transition,g=rt;try{if(hn.transition=null,rt=16>f?16:f,Ao===null)var x=!1;else{if(f=Ao,Ao=null,Jh=0,nt&6)throw Error(o(331));var E=nt;for(nt|=4,Se=f.current;Se!==null;){var M=Se,U=M.child;if(Se.flags&16){var Y=M.deletions;if(Y!==null){for(var ae=0;ae<Y.length;ae++){var ye=Y[ae];for(Se=ye;Se!==null;){var Oe=Se;switch(Oe.tag){case 0:case 11:case 15:ba(8,Oe,M)}var Xe=Oe.child;if(Xe!==null)Xe.return=Oe,Se=Xe;else for(;Se!==null;){Oe=Se;var Ue=Oe.sibling,At=Oe.return;if(vy(Oe),Oe===ye){Se=null;break}if(Ue!==null){Ue.return=At,Se=Ue;break}Se=At}}}var De=M.alternate;if(De!==null){var Zn=De.child;if(Zn!==null){De.child=null;do{var _i=Zn.sibling;Zn.sibling=null,Zn=_i}while(Zn!==null)}}Se=M}}if(M.subtreeFlags&2064&&U!==null)U.return=M,Se=U;else e:for(;Se!==null;){if(M=Se,M.flags&2048)switch(M.tag){case 0:case 11:case 15:ba(9,M,M.return)}var te=M.sibling;if(te!==null){te.return=M.return,Se=te;break e}Se=M.return}}var X=f.current;for(Se=X;Se!==null;){U=Se;var se=U.child;if(U.subtreeFlags&2064&&se!==null)se.return=U,Se=se;else e:for(U=X;Se!==null;){if(Y=Se,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:_u(9,Y)}}catch(Pe){Ar(Y,Y.return,Pe)}if(Y===U){Se=null;break e}var Ce=Y.sibling;if(Ce!==null){Ce.return=Y.return,Se=Ce;break e}Se=Y.return}}if(nt=E,Cr(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(pa,f)}catch{}x=!0}return x}finally{rt=g,hn.transition=h}}return!1}function Iy(f,h,g){h=$m(g,h),h=Y_(f,h,1),Oo(f,h),h=mr(),f=nd(f,1),f!==null&&(ls(f,1,h),kr(f,h))}function Ar(f,h,g){if(f.tag===3)Iy(f,f,g);else for(;h!==null;){if(h.tag===3){Iy(h,f,g);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ko===null||!ko.has(x))){f=$m(g,f),f=Z_(h,f,1),Oo(h,f),f=mr(),h=nd(h,1),h!==null&&(ls(h,1,f),kr(h,f));break}}h=h.return}}function m5(f,h,g){var x=f.pingCache;x!==null&&x.delete(h),h=mr(),f.pingedLanes|=f.suspendedLanes&g,yn===f&&(jn&g)===g&&(Tn===4||Tn===3&&(jn&130023424)===jn&&500>Yt()-sg?Sa(f,0):ig|=g),kr(f,h)}function Ny(f,h){h===0&&(f.mode&1?(h=Ls,Ls<<=1,!(Ls&130023424)&&(Ls=4194304)):h=1);var g=mr();f=nd(f,h),f!==null&&(ls(f,h,g),kr(f,g))}function g5(f){var h=f.memoizedState,g=0;h!==null&&(g=h.retryLane),Ny(f,g)}function v5(f,h){var g=0;switch(f.tag){case 13:var x=f.stateNode,E=f.memoizedState;E!==null&&(g=E.retryLane);break;case 19:x=f.stateNode;break;default:throw Error(o(314))}x!==null&&x.delete(h),Ny(f,g)}var Ly;Ly=function(f,h,g){if(f!==null)if(f.memoizedProps!==h.pendingProps||kn.current)Jr=!0;else{if(!(f.lanes&g)&&!(h.flags&128))return Jr=!1,i5(f,h,g);Jr=!!(f.flags&131072)}else Jr=!1,Gt&&h.flags&1048576&&b_(h,Ch,h.index);switch(h.lanes=0,h.tag){case 2:var x=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var E=ui(h,Sn.current);un(h,g),E=Fm(null,h,x,f,E,g);var M=Um();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,An(x)?(M=!0,So(h)):M=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Tm(h),E.updater=Th,h.stateNode=E,E._reactInternals=h,Cm(h,x,f,g),h=Wm(null,h,x,!0,M,g)):(h.tag=0,Gt&&M&&Om(h),pr(null,h,E,g),h=h.child),h;case 16:x=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,E=x._init,x=E(x._payload),h.type=x,E=h.tag=y5(x),f=hr(x,f),E){case 0:h=Hm(null,h,x,f,g);break e;case 1:h=oy(null,h,x,f,g);break e;case 11:h=ty(null,h,x,f,g);break e;case 14:h=ny(null,h,x,hr(x.type,f),g);break e}throw Error(o(306,x,""))}return h;case 0:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:hr(x,E),Hm(f,h,x,E,g);case 1:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:hr(x,E),oy(f,h,x,E,g);case 3:e:{if(ay(h),f===null)throw Error(o(387));x=h.pendingProps,M=h.memoizedState,E=M.element,m_(f,h),Sh(h,x,null,g);var U=h.memoizedState;if(x=U.element,Ee&&M.isDehydrated)if(M={element:x,isDehydrated:!1,cache:U.cache,transitions:U.transitions},h.updateQueue.baseState=M,h.memoizedState=M,h.flags&256){E=Error(o(423)),h=ly(f,h,x,g,E);break e}else if(x!==E){E=Error(o(424)),h=ly(f,h,x,g,E);break e}else for(Ee&&(Qr=Bn(h.stateNode.containerInfo),Kr=h,Gt=!0,Bi=null,ou=!1),g=k_(h,null,x,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Cl(),x===E){h=Hs(f,h,g);break e}pr(f,h,x,g)}h=h.child}return h;case 5:return A_(h),f===null&&Rm(h),x=h.type,E=h.pendingProps,M=f!==null?f.memoizedProps:null,U=E.children,Z(x,E)?U=null:M!==null&&Z(x,M)&&(h.flags|=32),sy(f,h),pr(f,h,U,g),h.child;case 6:return f===null&&Rm(h),null;case 13:return cy(f,h,g);case 4:return Pm(h,h.stateNode.containerInfo),x=h.pendingProps,f===null?h.child=Ol(h,null,x,g):pr(f,h,x,g),h.child;case 11:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:hr(x,E),ty(f,h,x,E,g);case 7:return pr(f,h,h.pendingProps,g),h.child;case 8:return pr(f,h,h.pendingProps.children,g),h.child;case 12:return pr(f,h,h.pendingProps.children,g),h.child;case 10:e:{if(x=h.type._context,E=h.pendingProps,M=h.memoizedProps,U=E.value,wh(h,x,U),M!==null)if(Zr(M.value,U)){if(M.children===E.children&&!kn.current){h=Hs(f,h,g);break e}}else for(M=h.child,M!==null&&(M.return=h);M!==null;){var Y=M.dependencies;if(Y!==null){U=M.child;for(var ae=Y.firstContext;ae!==null;){if(ae.context===x){if(M.tag===1){ae=Bs(-1,g&-g),ae.tag=2;var ye=M.updateQueue;if(ye!==null){ye=ye.shared;var Oe=ye.pending;Oe===null?ae.next=ae:(ae.next=Oe.next,Oe.next=ae),ye.pending=ae}}M.lanes|=g,ae=M.alternate,ae!==null&&(ae.lanes|=g),dr(M.return,g,h),Y.lanes|=g;break}ae=ae.next}}else if(M.tag===10)U=M.type===h.type?null:M.child;else if(M.tag===18){if(U=M.return,U===null)throw Error(o(341));U.lanes|=g,Y=U.alternate,Y!==null&&(Y.lanes|=g),dr(U,g,h),U=M.sibling}else U=M.child;if(U!==null)U.return=M;else for(U=M;U!==null;){if(U===h){U=null;break}if(M=U.sibling,M!==null){M.return=U.return,U=M;break}U=U.return}M=U}pr(f,h,E.children,g),h=h.child}return h;case 9:return E=h.type,x=h.pendingProps.children,un(h,g),E=fn(E),x=x(E),h.flags|=1,pr(f,h,x,g),h.child;case 14:return x=h.type,E=hr(x,h.pendingProps),E=hr(x.type,E),ny(f,h,x,E,g);case 15:return ry(f,h,h.type,h.pendingProps,g);case 17:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:hr(x,E),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,An(x)?(f=!0,So(h)):f=!1,un(h,g),x_(h,x,E),Cm(h,x,E,g),Wm(null,h,x,!0,f,g);case 19:return dy(f,h,g);case 22:return iy(f,h,g)}throw Error(o(156,h.tag))};function Fy(f,h){return zs(f,h)}function _5(f,h,g,x){this.tag=f,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(f,h,g,x){return new _5(f,h,g,x)}function dg(f){return f=f.prototype,!(!f||!f.isReactComponent)}function y5(f){if(typeof f=="function")return dg(f)?1:0;if(f!=null){if(f=f.$$typeof,f===_)return 11;if(f===b)return 14}return 2}function Po(f,h){var g=f.alternate;return g===null?(g=vi(f.tag,h,f.key,f.mode),g.elementType=f.elementType,g.type=f.type,g.stateNode=f.stateNode,g.alternate=f,f.alternate=g):(g.pendingProps=h,g.type=f.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=f.flags&14680064,g.childLanes=f.childLanes,g.lanes=f.lanes,g.child=f.child,g.memoizedProps=f.memoizedProps,g.memoizedState=f.memoizedState,g.updateQueue=f.updateQueue,h=f.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=f.sibling,g.index=f.index,g.ref=f.ref,g}function id(f,h,g,x,E,M){var U=2;if(x=f,typeof f=="function")dg(f)&&(U=1);else if(typeof f=="string")U=5;else e:switch(f){case u:return Ca(g.children,E,M,h);case d:U=8,E|=8;break;case p:return f=vi(12,g,h,E|2),f.elementType=p,f.lanes=M,f;case y:return f=vi(13,g,h,E),f.elementType=y,f.lanes=M,f;case w:return f=vi(19,g,h,E),f.elementType=w,f.lanes=M,f;case O:return sd(g,E,M,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:U=10;break e;case v:U=9;break e;case _:U=11;break e;case b:U=14;break e;case C:U=16,x=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=vi(U,g,h,E),h.elementType=f,h.type=x,h.lanes=M,h}function Ca(f,h,g,x){return f=vi(7,f,x,h),f.lanes=g,f}function sd(f,h,g,x){return f=vi(22,f,x,h),f.elementType=O,f.lanes=g,f.stateNode={},f}function pg(f,h,g){return f=vi(6,f,null,h),f.lanes=g,f}function mg(f,h,g){return h=vi(4,f.children!==null?f.children:[],f.key,h),h.lanes=g,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function x5(f,h,g,x,E){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=_e,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=x,this.onRecoverableError=E,Ee&&(this.mutableSourceEagerHydrationData=null)}function Uy(f,h,g,x,E,M,U,Y,ae){return f=new x5(f,h,g,Y,ae),h===1?(h=1,M===!0&&(h|=8)):h=0,M=vi(3,null,null,h),f.current=M,M.stateNode=f,M.memoizedState={element:x,isDehydrated:g,cache:null,transitions:null},Tm(M),f}function zy(f){if(!f)return Wr;f=f._reactInternals;e:{if(P(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(An(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var g=f.type;if(An(g))return _l(f,g,h)}return h}function By(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=D(h),f===null?null:f.stateNode}function jy(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var g=f.retryLane;f.retryLane=g!==0&&g<h?g:h}}function gg(f,h){jy(f,h),(f=f.alternate)&&jy(f,h)}function w5(f){return f=D(f),f===null?null:f.stateNode}function b5(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var h=mr();gi(f,134217728,h),gg(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=mr(),g=Ro(f);gi(f,g,h),gg(f,g)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var g=Fs(h.pendingLanes);g!==0&&(cs(h,g|1),kr(h,Yt()),!(nt&6)&&(Dl(),Cr()))}break;case 13:var x=mr();Ay(function(){return gi(f,1,x)}),gg(f,1)}},t.batchedUpdates=function(f,h){var g=nt;nt|=1;try{return f(h)}finally{nt=g,nt===0&&(Dl(),us&&Cr())}},t.createComponentSelector=function(f){return{$$typeof:Hh,value:f}},t.createContainer=function(f,h,g,x,E,M,U){return Uy(f,h,!1,null,g,x,E,M,U)},t.createHasPseudoClassSelector=function(f){return{$$typeof:Wh,value:f}},t.createHydrationContainer=function(f,h,g,x,E,M,U,Y,ae){return f=Uy(g,x,!0,f,E,M,U,Y,ae),f.context=zy(null),g=f.current,x=mr(),E=Ro(g),M=Bs(x,E),M.callback=h??null,Oo(g,M),f.current.lanes=E,ls(f,E,x),kr(f,x),f},t.createPortal=function(f,h,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:f,containerInfo:h,implementation:g}},t.createRoleSelector=function(f){return{$$typeof:Gh,value:f}},t.createTestNameSelector=function(f){return{$$typeof:qh,value:f}},t.createTextSelector=function(f){return{$$typeof:Yh,value:f}},t.deferredUpdates=function(f){var h=rt,g=hn.transition;try{return hn.transition=null,rt=16,f()}finally{rt=h,hn.transition=g}},t.discreteUpdates=function(f,h,g,x,E){var M=rt,U=hn.transition;try{return hn.transition=null,rt=1,f(h,g,x,E)}finally{rt=M,hn.transition=U,nt===0&&Dl()}},t.findAllNodes=ng,t.findBoundingRects=function(f,h){if(!me)throw Error(o(363));h=ng(f,h),f=[];for(var g=0;g<h.length;g++)f.push(Ae(h[g]));for(h=f.length-1;0<h;h--){g=f[h];for(var x=g.x,E=x+g.width,M=g.y,U=M+g.height,Y=h-1;0<=Y;Y--)if(h!==Y){var ae=f[Y],ye=ae.x,Oe=ye+ae.width,Xe=ae.y,Ue=Xe+ae.height;if(x>=ye&&M>=Xe&&E<=Oe&&U<=Ue){f.splice(h,1);break}else if(x!==ye||g.width!==ae.width||Ue<M||Xe>U){if(!(M!==Xe||g.height!==ae.height||Oe<x||ye>E)){ye>x&&(ae.width+=ye-x,ae.x=x),Oe<E&&(ae.width=E-ye),f.splice(h,1);break}}else{Xe>M&&(ae.height+=Xe-M,ae.y=M),Ue<U&&(ae.height=U-Xe),f.splice(h,1);break}}}return f},t.findHostInstance=By,t.findHostInstanceWithNoPortals=function(f){return f=I(f),f=f!==null?z(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return By(f)},t.flushControlled=function(f){var h=nt;nt|=1;var g=hn.transition,x=rt;try{hn.transition=null,rt=1,f()}finally{rt=x,hn.transition=g,nt=h,nt===0&&(Dl(),Cr())}},t.flushPassiveEffects=Ea,t.flushSync=Ay,t.focusWithin=function(f,h){if(!me)throw Error(o(363));for(f=Jm(f),h=Cy(f,h),h=Array.from(h),f=0;f<h.length;){var g=h[f++];if(!pe(g)){if(g.tag===5&&Be(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return rt},t.getFindAllNodesFailureDescription=function(f,h){if(!me)throw Error(o(363));var g=0,x=[];f=[Jm(f),0];for(var E=0;E<f.length;){var M=f[E++],U=f[E++],Y=h[U];if((M.tag!==5||!pe(M))&&(eg(M,Y)&&(x.push(tg(Y)),U++,U>g&&(g=U)),U<h.length))for(M=M.child;M!==null;)f.push(M,U),M=M.sibling}if(g<h.length){for(f=[];g<h.length;g++)f.push(tg(h[g]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return $(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:w5,findFiberByHostInstance:f.findFiberByHostInstance||b5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{pa=h.inject(f),Yr=h}catch{}f=!!h.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,h,g,x){if(!me)throw Error(o(363));f=ng(f,h);var E=Ne(f,g,x).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(f,h){var g=h._getVersion;g=g(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,g]:f.mutableSourceEagerHydrationData.push(h,g)},t.runWithPriority=function(f,h){var g=rt;try{return rt=f,h()}finally{rt=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,h,g,x){var E=h.current,M=mr(),U=Ro(E);return g=zy(g),h.context===null?h.context=g:h.pendingContext=g,h=Bs(M,U),h.payload={element:f},x=x===void 0?null:x,x!==null&&(h.callback=x),Oo(E,h),f=gi(E,U,M),f!==null&&bh(f,E,U),U},t};jb.exports=aO;var lO=jb.exports;const cO=jp(lO),uO=n=>typeof n=="object"&&typeof n.then=="function",La=[];function Hb(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Wb(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of La)if(Hb(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=La.indexOf(i);s!==-1&&La.splice(s,1)},promise:(uO(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(La.push(i),!t)throw i.promise}const fO=(n,e,t)=>Wb(n,e,!1,t),hO=(n,e,t)=>void Wb(n,e,!0,t),dO=n=>{if(n===void 0||n.length===0)La.splice(0,La.length);else{const e=La.find(t=>Hb(n,t.keys,t.equal));e&&e.remove()}},Gv={},Wf=n=>void Object.assign(Gv,n);function pO(n,e){function t(u,{args:d=[],attach:p,...m},v){let _=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=m.object;y=Zl(w,{type:u,root:v,attach:p,primitive:!0})}else{const w=Gv[_];if(!w)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");y=Zl(new w(...d),{type:u,root:v,attach:p,memoizedProps:{args:d}})}return y.__r3f.attach===void 0&&(y instanceof Pv?y.__r3f.attach="geometry":y instanceof $p&&(y.__r3f.attach="material")),_!=="inject"&&wg(y,m),y}function r(u,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?xg(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||Zl(d,{}),d.__r3f.parent=u,w0(d),Xl(d)}}function i(u,d,p){let m=!1;if(d){var v,_;if((v=d.__r3f)!=null&&v.attach)xg(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const y=u.children.filter(b=>b!==d),w=y.indexOf(p);u.children=[...y.slice(0,w),d,...y.slice(w)],m=!0}m||(_=u.__r3f)==null||_.objects.push(d),d.__r3f||Zl(d,{}),d.__r3f.parent=u,w0(d),Xl(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,v,_;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(O=>O!==d)),(v=d.__r3f)!=null&&v.attach)s2(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var y;u.remove(d),(y=d.__r3f)!=null&&y.root&&SO(d.__r3f.root,d)}const b=(_=d.__r3f)==null?void 0:_.primitive,C=!b&&(p===void 0?d.dispose!==null:p);if(!b){var w;s((w=d.__r3f)==null?void 0:w.objects,d,C),s(d.children,d,C)}if(delete d.__r3f,C&&d.dispose&&d.type!=="Scene"){const O=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?y0.unstable_scheduleCallback(y0.unstable_IdlePriority,O):O()}Xl(u)}}function a(u,d,p,m){var v;const _=(v=u.__r3f)==null?void 0:v.parent;if(!_)return;const y=t(d,p,u.__r3f.root);if(u.children){for(const w of u.children)w.__r3f&&r(y,w);u.children=u.children.filter(w=>!w.__r3f)}u.__r3f.objects.forEach(w=>r(y,w)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(_,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(w=>{w!==null&&(w.stateNode=y,w.ref&&(typeof w.ref=="function"?w.ref(y):w.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:cO({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:w,...b}=m,{args:C=[],children:O,...T}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((k,R)=>k!==C[R]))return[!0];const A=Qb(u,b,T,!0);return A.changes.length?[!1,A]:null}},commitUpdate(u,[d,p],m,v,_,y){d?a(u,m,_,y):wg(u,p)},commitMount(u,d,p,m){var v;const _=(v=u.__r3f)!=null?v:{};u.raycast&&_.handlers&&_.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Zl(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&s2(m,u,p),u.isObject3D&&(u.visible=!1),Xl(u)},unhideInstance(u,d){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&xg(v,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Xl(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Jl.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jt.fun(performance.now)?performance.now:jt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:wg}}var t2,n2;const yg=n=>"colorSpace"in n||"outputColorSpace"in n,Gb=()=>{var n;return(n=Gv.ColorManagement)!=null?n:null},qb=n=>n&&n.isOrthographicCamera,mO=n=>n&&n.hasOwnProperty("current"),Uc=typeof window<"u"&&((t2=window.document)!=null&&t2.createElement||((n2=window.navigator)==null?void 0:n2.product)==="ReactNative")?S.useLayoutEffect:S.useEffect;function Yb(n){const e=S.useRef(n);return Uc(()=>void(e.current=n),[n]),e}function gO({set:n}){return Uc(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Zb extends S.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Zb.getDerivedStateFromError=()=>({error:!0});const Xb="__default",r2=new Map,vO=n=>n&&!!n.memoized&&!!n.changes;function Kb(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Su=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},jt={obj:n=>n===Object(n)&&!jt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jt.str(n)||jt.num(n))return n===e;const s=jt.obj(n);if(s&&r==="reference")return n===e;const o=jt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!jt.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(jt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function _O(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function yO(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Zl(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function x0(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const i2=/-\d+$/;function xg(n,e,t){if(jt.str(t)){if(i2.test(t)){const s=t.replace(i2,""),{target:o,key:a}=x0(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=x0(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function s2(n,e,t){var r,i;if(jt.str(t)){const{target:s,key:o}=x0(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Qb(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=n==null?void 0:n.__r3f)!=null?u:{},p=Object.entries(i),m=[];if(c){const _=Object.keys(l);for(let y=0;y<_.length;y++)i.hasOwnProperty(_[y])||p.unshift([_[y],Xb+"remove"])}p.forEach(([_,y])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&_==="object"||jt.equ(y,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return m.push([_,y,!0,[]]);let b=[];_.includes("-")&&(b=_.split("-")),m.push([_,y,!1,b]);for(const C in i){const O=i[C];C.startsWith(`${_}-`)&&m.push([C,O,!1,C.split("-")])}});const v={...i};return d.memoizedProps&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:m}}const xO=typeof process<"u"&&!1;function wg(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=vO(e)?e:Qb(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,_,y]=c[p];if(yg(n)){const O="srgb",T="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?O:T):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?O:T)}let w=n,b=w[m];if(y.length&&(b=y.reduce((C,O)=>C[O],n),!(b&&b.set))){const[C,...O]=y.reverse();w=O.reverse().reduce((T,A)=>T[A],n),m=C}if(v===Xb+"remove")if(w.constructor){let C=r2.get(w.constructor);C||(C=new w.constructor,r2.set(w.constructor,C)),v=C[m]}else v=0;if(_)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(b&&b.set&&(b.copy||b instanceof vg)){if(Array.isArray(v))b.fromArray?b.fromArray(v):b.set(...v);else if(b.copy&&v&&v.constructor&&(xO?b.constructor.name===v.constructor.name:b.constructor===v.constructor))b.copy(v);else if(v!==void 0){const C=b instanceof xr;!C&&b.setScalar?b.setScalar(v):b instanceof vg&&v instanceof vg?b.mask=v.mask:b.set(v),!Gb()&&!a.linear&&C&&b.convertSRGBToLinear()}}else if(w[m]=v,w[m]instanceof jf&&w[m].format===M5&&w[m].type===Es){const C=w[m];yg(C)&&yg(a.gl)?C.colorSpace=a.gl.outputColorSpace:C.encoding=a.gl.outputEncoding}Xl(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&w0(n),n}function Xl(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function w0(n){n.onUpdate==null||n.onUpdate(n)}function wO(n,e){n.manual||(qb(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function ld(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function bO(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jl.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jl.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jl.ContinuousEventPriority;default:return Jl.DefaultEventPriority}}function Jb(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function SO(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Jb(t.capturedMap,e,r,i)})}function TO(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let w=0;w<m.length;w++){const b=Su(m[w]);b&&(b.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(w){const b=Su(w);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var C;b.events.compute==null||b.events.compute(l,b,(C=b.previousRoot)==null?void 0:C.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(w,!0):[]}let _=m.flatMap(v).sort((w,b)=>{const C=Su(w.object),O=Su(b.object);return!C||!O?w.distance-b.distance:O.events.priority-C.events.priority||w.distance-b.distance}).filter(w=>{const b=ld(w);return d.has(b)?!1:(d.add(b),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const w of _){let b=w.object;for(;b;){var y;(y=b.__r3f)!=null&&y.eventCount&&p.push({...w,eventObject:b}),b=b.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let w of u.internal.capturedMap.get(l.pointerId).values())d.has(ld(w.intersection))||p.push(w.intersection);return p}function i(l,c,u,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=Su(v.object)||p,{raycaster:y,pointer:w,camera:b,internal:C}=_,O=new Te(w.x,w.y,0).unproject(b),T=L=>{var I,D;return(I=(D=C.capturedMap.get(L))==null?void 0:D.has(v.eventObject))!=null?I:!1},A=L=>{const I={intersection:v,target:c.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(v.eventObject,I):C.capturedMap.set(L,new Map([[v.eventObject,I]])),c.target.setPointerCapture(L)},k=L=>{const I=C.capturedMap.get(L);I&&Jb(C.capturedMap,v.eventObject,I,L)};let R={};for(let L in c){let I=c[L];typeof I!="function"&&(R[L]=I)}let P={...v,...R,pointer:w,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:O,ray:y.ray,camera:b,stopPropagation(){const L="pointerId"in c&&C.capturedMap.get(c.pointerId);if((!L||L.has(v.eventObject))&&(P.stopped=m.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(I=>I.eventObject===v.eventObject))){const I=l.slice(0,l.indexOf(v));s([...I,v])}},target:{hasPointerCapture:T,setPointerCapture:A,releasePointerCapture:k},currentTarget:{hasPointerCapture:T,setPointerCapture:A,releasePointerCapture:k},nativeEvent:c};if(d(P),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(ld(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(u,m?t:void 0),w=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=y.map(C=>C.eventObject)),v&&!y.length&&w<=2&&(o(u,p.interaction),d&&d(u)),m&&s(y);function b(C){const O=C.eventObject,T=O.__r3f,A=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const k=ld(C),R=p.hovered.get(k);R?R.stopped&&C.stopPropagation():(p.hovered.set(k,C),A.onPointerOver==null||A.onPointerOver(C),A.onPointerEnter==null||A.onPointerEnter(C))}A.onPointerMove==null||A.onPointerMove(C)}else{const k=A[l];k?(!v||p.initialHits.includes(O))&&(o(u,p.interaction.filter(R=>!p.initialHits.includes(R))),k(C)):v&&p.initialHits.includes(O)&&o(u,p.interaction.filter(R=>!p.initialHits.includes(R)))}}i(y,u,w,b)}}return{handlePointer:a}}const eS=n=>!!(n!=null&&n.render),tS=S.createContext(null),EO=(n,e)=>{const t=oO((a,l)=>{const c=new Te,u=new Te,d=new Te;function p(w=l().camera,b=u,C=l().size){const{width:O,height:T,top:A,left:k}=C,R=O/T;b instanceof Te?d.copy(b):d.set(...b);const P=w.getWorldPosition(c).distanceTo(d);if(qb(w))return{width:O/w.zoom,height:T/w.zoom,top:A,left:k,factor:1,distance:P,aspect:R};{const L=w.fov*Math.PI/180,I=2*Math.tan(L/2)*P,D=I*(O/T);return{width:D,height:I,top:A,left:k,factor:O/D,distance:P,aspect:R}}}let m;const v=w=>a(b=>({performance:{...b.performance,current:w}})),_=new Ct;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>n(l(),w),advance:(w,b)=>e(w,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new z5,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();m&&clearTimeout(m),w.performance.current!==w.performance.min&&v(w.performance.min),m=setTimeout(()=>v(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:w=>a(b=>({...b,events:{...b.events,...w}})),setSize:(w,b,C,O,T)=>{const A=l().camera,k={width:w,height:b,top:O||0,left:T||0,updateStyle:C};a(R=>({size:k,viewport:{...R.viewport,...p(A,u,k)}}))},setDpr:w=>a(b=>{const C=Kb(w);return{viewport:{...b.viewport,dpr:C,initialDpr:b.viewport.initialDpr||C}}}),setFrameloop:(w="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,w!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:S.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,b,C)=>{const O=l().internal;return O.priority=O.priority+(b>0?1:0),O.subscribers.push({ref:w,priority:b,store:C}),O.subscribers=O.subscribers.sort((T,A)=>T.priority-A.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(b>0?1:0),T.subscribers=T.subscribers.filter(A=>A.ref!==w))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,wO(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function qv(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let cd,nS=new Set,rS=new Set,iS=new Set;const CO=n=>qv(n,nS),OO=n=>qv(n,rS),kO=n=>qv(n,iS);function bg(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Tu(n,e){switch(n){case"before":return bg(nS,e);case"after":return bg(rS,e);case"tail":return bg(iS,e)}}let Sg,Tg;function Eg(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Sg=e.internal.subscribers,cd=0;cd<Sg.length;cd++)Tg=Sg[cd],Tg.ref.current(Tg.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function AO(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Tu("before",l);for(const u of n.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=Eg(l,i))}if(Tu("after",l),t===0)return Tu("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return n.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&Tu("before",l),u)Eg(l,u,d);else for(const p of n.values())Eg(l,p.store.getState());c&&Tu("after",l)}return{loop:s,invalidate:o,advance:a}}function RO(n){const e=S.useRef(null);return Uc(()=>void(e.current=n.current.__r3f),[n]),e}function sS(){const n=S.useContext(tS);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function mt(n=t=>t,e){return sS()(n,e)}function Cn(n,e=0){const t=sS(),r=t.getState().internal.subscribe,i=Yb(n);return Uc(()=>r(i,e,t),[e,r,t]),null}const o2=new WeakMap;function oS(n,e){return function(t,...r){let i=o2.get(t);return i||(i=new t,o2.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,_O(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function Gf(n,e,t,r){const i=Array.isArray(e)?e:[e],s=fO(oS(t,r),[n,...i],{equal:jt.equ});return Array.isArray(e)?s:s[0]}Gf.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return hO(oS(t),[n,...r])};Gf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return dO([n,...t])};const yc=new Map,{invalidate:a2,advance:l2}=AO(yc),{reconciler:ep,applyProps:Il}=pO(yc,bO),Nl={objects:"shallow",strict:!1},MO=(n,e)=>{const t=typeof n=="function"?n(e):n;return eS(t)?t:new N5({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function PO(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function DO(n){const e=yc.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||EO(a2,l2),o=t||ep.createContainer(s,Jl.ConcurrentRoot,null,!1,null,"",i,null);e||yc.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:v,onCreated:_,shadows:y=!1,linear:w=!1,flat:b=!1,legacy:C=!1,orthographic:O=!1,frameloop:T="always",dpr:A=[1,2],performance:k,raycaster:R,camera:P,onPointerMissed:L}=u,I=s.getState(),D=I.gl;I.gl||I.set({gl:D=MO(d,n)});let B=I.raycaster;B||I.set({raycaster:B=new P5});const{params:z,...V}=R||{};if(jt.equ(V,B,Nl)||Il(B,{...V}),jt.equ(z,B.params,Nl)||Il(B,{params:{...B.params,...z}}),!I.camera||I.camera===c&&!jt.equ(c,P,Nl)){c=P;const W=P instanceof xb,ee=W?P:O?new Dv(0,0,0,0,.1,1e3):new $f(75,0,.1,1e3);W||(ee.position.z=5,P&&Il(ee,P),!I.camera&&!(P!=null&&P.rotation)&&ee.lookAt(0,0,0)),I.set({camera:ee}),B.camera=ee}if(!I.scene){let W;m instanceof mc?W=m:(W=new mc,m&&Il(W,m)),I.set({scene:Zl(W)})}if(!I.xr){var $;const W=(Z,oe)=>{const re=s.getState();re.frameloop!=="never"&&l2(Z,!0,re,oe)},ee=()=>{const Z=s.getState();Z.gl.xr.enabled=Z.gl.xr.isPresenting,Z.gl.xr.setAnimationLoop(Z.gl.xr.isPresenting?W:null),Z.gl.xr.isPresenting||a2(Z)},ne={connect(){const Z=s.getState().gl;Z.xr.addEventListener("sessionstart",ee),Z.xr.addEventListener("sessionend",ee)},disconnect(){const Z=s.getState().gl;Z.xr.removeEventListener("sessionstart",ee),Z.xr.removeEventListener("sessionend",ee)}};typeof(($=D.xr)==null?void 0:$.addEventListener)=="function"&&ne.connect(),I.set({xr:ne})}if(D.shadowMap){const W=D.shadowMap.enabled,ee=D.shadowMap.type;if(D.shadowMap.enabled=!!y,jt.boo(y))D.shadowMap.type=_g;else if(jt.str(y)){var K;const ne={basic:L5,percentage:F5,soft:_g,variance:U5};D.shadowMap.type=(K=ne[y])!=null?K:_g}else jt.obj(y)&&Object.assign(D.shadowMap,y);(W!==D.shadowMap.enabled||ee!==D.shadowMap.type)&&(D.shadowMap.needsUpdate=!0)}const G=Gb();G&&("enabled"in G?G.enabled=!C:"legacyMode"in G&&(G.legacyMode=C)),Il(D,{outputEncoding:w?3e3:3001,toneMapping:b?D5:I5}),I.legacy!==C&&I.set(()=>({legacy:C})),I.linear!==w&&I.set(()=>({linear:w})),I.flat!==b&&I.set(()=>({flat:b})),d&&!jt.fun(d)&&!eS(d)&&!jt.equ(d,D,Nl)&&Il(D,d),v&&!I.events.handlers&&I.set({events:v(s)});const F=PO(n,p);return jt.equ(F,I.size,Nl)||I.setSize(F.width,F.height,F.updateStyle,F.top,F.left),A&&I.viewport.dpr!==Kb(A)&&I.setDpr(A),I.frameloop!==T&&I.setFrameloop(T),I.onPointerMissed||I.set({onPointerMissed:L}),k&&!jt.equ(k,I.performance,Nl)&&I.set(W=>({performance:{...W.performance,...k}})),a=_,l=!0,this},render(u){return l||this.configure(),ep.updateContainer(S.createElement(IO,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){aS(n)}}}function IO({store:n,children:e,onCreated:t,rootElement:r}){return Uc(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),S.createElement(tS.Provider,{value:n},e)}function aS(n,e){const t=yc.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),ep.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),yO(i),yc.delete(n),e&&e(n)}catch{}},500)})}}ep.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:S.version});function b0(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}b0.debounce=b0;var NO=b0;const c2=jp(NO);function LO(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=S.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=S.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=S.useRef(!1);S.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,v]=S.useMemo(()=>{const b=()=>{if(!l.current.element)return;const{left:C,top:O,width:T,height:A,bottom:k,right:R,x:P,y:L}=l.current.element.getBoundingClientRect(),I={left:C,top:O,width:T,height:A,bottom:k,right:R,x:P,y:L};l.current.element instanceof HTMLElement&&i&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),d.current&&!BO(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[b,u?c2(b,u):b,c?c2(b,c):b]},[a,i,c,u]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(b=>b.addEventListener("scroll",v,{capture:!0,passive:!0})))}const w=b=>{!b||b===l.current.element||(_(),l.current.element=b,l.current.scrollContainers=lS(b),y())};return UO(v,!!t),FO(m),S.useEffect(()=>{_(),y()},[t,v,m]),S.useEffect(()=>_,[]),[w,o,p]}function FO(n){S.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function UO(n,e){S.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function lS(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...lS(n.parentElement)]}const zO=["x","y","top","bottom","left","right","width","height"],BO=(n,e)=>zO.every(t=>n[t]===e[t]);var jO=Object.defineProperty,$O=Object.defineProperties,VO=Object.getOwnPropertyDescriptors,u2=Object.getOwnPropertySymbols,HO=Object.prototype.hasOwnProperty,WO=Object.prototype.propertyIsEnumerable,f2=(n,e,t)=>e in n?jO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,h2=(n,e)=>{for(var t in e||(e={}))HO.call(e,t)&&f2(n,t,e[t]);if(u2)for(var t of u2(e))WO.call(e,t)&&f2(n,t,e[t]);return n},GO=(n,e)=>$O(n,VO(e));function cS(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=cS(r,e,t);if(i)return i;r=e?null:r.sibling}}function uS(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Yv=uS(S.createContext(null));class fS extends S.Component{render(){return S.createElement(Yv.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:d2,ReactCurrentDispatcher:p2}=S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function qO(){const n=S.useContext(Yv);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=S.useId();return S.useMemo(()=>{for(const r of[d2==null?void 0:d2.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=cS(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function YO(){var n,e;const t=qO(),[r]=S.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==Yv&&!r.has(s)&&r.set(s,(e=p2==null?void 0:p2.current)==null?void 0:e.readContext(uS(s))),i=i.return}return r}function ZO(){const n=YO();return S.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>S.createElement(e,null,S.createElement(t.Provider,GO(h2({},r),{value:n.get(t)}))),e=>S.createElement(fS,h2({},e))),[n])}const Cg={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function XO(n){const{handlePointer:e}=TO(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Cg).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=Cg[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Cg[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const KO=S.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=XO,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:w,camera:b,scene:C,onPointerMissed:O,onCreated:T,...A},k){S.useMemo(()=>Wf(wb),[]);const R=ZO(),[P,L]=LO({scroll:!0,debounce:{scroll:50,resize:0},...r}),I=S.useRef(null),D=S.useRef(null);S.useImperativeHandle(k,()=>I.current);const B=Yb(O),[z,V]=S.useState(!1),[$,K]=S.useState(!1);if(z)throw z;if($)throw $;const G=S.useRef(null);Uc(()=>{const q=I.current;L.width>0&&L.height>0&&q&&(G.current||(G.current=DO(q)),G.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:w,camera:b,scene:C,size:L,onPointerMissed:(...F)=>B.current==null?void 0:B.current(...F),onCreated:F=>{F.events.connect==null||F.events.connect(a?mO(a)?a.current:a:D.current),l&&F.setEvents({compute:(W,ee)=>{const ne=W[l+"X"],Z=W[l+"Y"];ee.pointer.set(ne/ee.size.width*2-1,-(Z/ee.size.height)*2+1),ee.raycaster.setFromCamera(ee.pointer,ee.camera)}}),T==null||T(F)}}),G.current.render(S.createElement(R,null,S.createElement(Zb,{set:K},S.createElement(S.Suspense,{fallback:S.createElement(gO,{set:V})},e)))))}),S.useEffect(()=>{const q=I.current;if(q)return()=>aS(q)},[]);const H=a?"none":"auto";return S.createElement("div",bt({ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...i}},A),S.createElement("div",{ref:P,style:{width:"100%",height:"100%"}},S.createElement("canvas",{ref:I,style:{display:"block"}},t)))}),hS=S.forwardRef(function(e,t){return S.createElement(fS,null,S.createElement(KO,bt({},e,{ref:t})))}),qf=new Te,Zv=new Te,QO=new Te;function JO(n,e,t){const r=qf.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function ek(n,e){const t=qf.setFromMatrixPosition(n.matrixWorld),r=Zv.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(QO);return i.angleTo(s)>Math.PI/2}function tk(n,e,t,r){const i=qf.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function nk(n,e){if(e instanceof Dv)return e.zoom;if(e instanceof $f){const t=qf.setFromMatrixPosition(n.matrixWorld),r=Zv.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function rk(n,e,t){if(e instanceof $f||e instanceof Dv){const r=qf.setFromMatrixPosition(n.matrixWorld),i=Zv.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const S0=n=>Math.abs(n)<1e-10?0:n;function dS(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=S0(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const ik=(n=>e=>dS(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),sk=(n=>(e,t)=>dS(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function ok(n){return n&&typeof n=="object"&&"current"in n}const Xv=S.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:v,material:_,geometry:y,zIndexRange:w=[16777271,0],calculatePosition:b=JO,as:C="div",wrapperClass:O,pointerEvents:T="auto",...A},k)=>{const{gl:R,camera:P,scene:L,size:I,raycaster:D,events:B,viewport:z}=mt(),[V]=S.useState(()=>document.createElement(C)),$=S.useRef(),K=S.useRef(null),G=S.useRef(0),H=S.useRef([0,0]),q=S.useRef(null),F=S.useRef(null),W=(a==null?void 0:a.current)||B.connected||R.domElement.parentNode,ee=S.useRef(null),ne=S.useRef(!1),Z=S.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&ok(d[0]),[d]);S.useLayoutEffect(()=>{const xe=R.domElement;d&&d==="blending"?(xe.style.zIndex=`${Math.floor(w[0]/2)}`,xe.style.position="absolute",xe.style.pointerEvents="none"):(xe.style.zIndex=null,xe.style.position=null,xe.style.pointerEvents=null)},[d]),S.useLayoutEffect(()=>{if(K.current){const xe=$.current=vb(V);if(L.updateMatrixWorld(),u)V.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ce=b(K.current,P,I);V.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ce[0]}px,${ce[1]}px,0);transform-origin:0 0;`}return W&&(i?W.prepend(V):W.appendChild(V)),()=>{W&&W.removeChild(V),xe.unmount()}}},[W,u]),S.useLayoutEffect(()=>{O&&(V.className=O)},[O]);const oe=S.useMemo(()=>u?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...t},[t,s,o,I,u]),re=S.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);S.useLayoutEffect(()=>{if(ne.current=!1,u){var xe;(xe=$.current)==null||xe.render(S.createElement("div",{ref:q,style:oe},S.createElement("div",{ref:F,style:re},S.createElement("div",{ref:k,className:r,style:t,children:n}))))}else{var ce;(ce=$.current)==null||ce.render(S.createElement("div",{ref:k,style:oe,className:r,children:n}))}});const Q=S.useRef(!0);Cn(xe=>{if(K.current){P.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const ce=u?H.current:b(K.current,P,I);if(u||Math.abs(G.current-P.zoom)>e||Math.abs(H.current[0]-ce[0])>e||Math.abs(H.current[1]-ce[1])>e){const ue=ek(K.current,P);let Ee=!1;Z&&(d!=="blending"?Ee=[L]:Array.isArray(d)&&(Ee=d.map(be=>be.current)));const Ie=Q.current;if(Ee){const be=tk(K.current,P,D,Ee);Q.current=be&&!ue}else Q.current=!ue;Ie!==Q.current&&(p?p(!Q.current):V.style.display=Q.current?"block":"none");const J=Math.floor(w[0]/2),de=d?Z?[w[0],J]:[J-1,0]:w;if(V.style.zIndex=`${rk(K.current,P,de)}`,u){const[be,fe]=[I.width/2,I.height/2],ge=P.projectionMatrix.elements[5]*fe,{isOrthographicCamera:me,top:he,left:Ae,bottom:ie,right:pe}=P,we=ik(P.matrixWorldInverse),Be=me?`scale(${ge})translate(${S0(-(pe+Ae)/2)}px,${S0((he+ie)/2)}px)`:`translateZ(${ge}px)`;let Ne=K.current.matrixWorld;c&&(Ne=P.matrixWorldInverse.clone().transpose().copyPosition(Ne).scale(K.current.scale),Ne.elements[3]=Ne.elements[7]=Ne.elements[11]=0,Ne.elements[15]=1),V.style.width=I.width+"px",V.style.height=I.height+"px",V.style.perspective=me?"":`${ge}px`,q.current&&F.current&&(q.current.style.transform=`${Be}${we}translate(${be}px,${fe}px)`,F.current.style.transform=sk(Ne,1/((l||10)/400)))}else{const be=l===void 0?1:nk(K.current,P)*l;V.style.transform=`translate3d(${ce[0]}px,${ce[1]}px,0) scale(${be})`}H.current=ce,G.current=P.zoom}}if(!Z&&ee.current&&!ne.current)if(u){if(q.current){const ce=q.current.children[0];if(ce!=null&&ce.clientWidth&&ce!=null&&ce.clientHeight){const{isOrthographicCamera:ue}=P;if(ue||y)A.scale&&(Array.isArray(A.scale)?A.scale instanceof Te?ee.current.scale.copy(A.scale.clone().divideScalar(1)):ee.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):ee.current.scale.setScalar(1/A.scale));else{const Ee=(l||10)/400,Ie=ce.clientWidth*Ee,J=ce.clientHeight*Ee;ee.current.scale.set(Ie,J,1)}ne.current=!0}}}else{const ce=V.children[0];if(ce!=null&&ce.clientWidth&&ce!=null&&ce.clientHeight){const ue=1/z.factor,Ee=ce.clientWidth*ue,Ie=ce.clientHeight*ue;ee.current.scale.set(Ee,Ie,1),ne.current=!0}ee.current.lookAt(xe.camera.position)}});const _e=S.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return S.createElement("group",bt({},A,{ref:K}),d&&!Z&&S.createElement("mesh",{castShadow:m,receiveShadow:v,ref:ee},y||S.createElement("planeGeometry",null),_||S.createElement("shaderMaterial",{side:Bo,vertexShader:_e.vertexShader,fragmentShader:_e.fragmentShader})))});function ak(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const lk=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),m2=lk?S.useEffect:S.useLayoutEffect;function ck(n){const e=typeof n=="function"?ak(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=S.useReducer(y=>y+1,0),o=e.getState(),a=S.useRef(o),l=S.useRef(r),c=S.useRef(i),u=S.useRef(!1),d=S.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),m2(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=S.useRef(o);m2(()=>{const y=()=>{try{const b=e.getState(),C=l.current(b);c.current(d.current,C)||(a.current=b,d.current=C,s())}catch{u.current=!0,s()}},w=e.subscribe(y);return e.getState()!==v.current&&y(),w},[]);const _=m?p:d.current;return S.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}let Eu=0;const uk=ck(n=>(od.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Eu)/(r-Eu)*100})},od.onLoad=()=>{n({active:!1})},od.onError=e=>n(t=>({errors:[...t.errors,e]})),od.onProgress=(e,t,r)=>{t===r&&(Eu=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Eu)/(r-Eu)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),fk=n=>`Loading ${n.toFixed(2)}%`;function hk({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:r,dataInterpolation:i=fk,initialState:s=o=>o}){const{active:o,progress:a}=uk(),l=S.useRef(0),c=S.useRef(0),u=S.useRef(null),[d,p]=S.useState(s(o));S.useEffect(()=>{let v;return o!==d&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[d,o]);const m=S.useCallback(()=>{u.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=i(l.current),l.current<a&&(c.current=requestAnimationFrame(m)))},[i,a]);return S.useEffect(()=>(m(),()=>cancelAnimationFrame(c.current)),[m]),d?S.createElement("div",{style:{...ud.container,opacity:o?1:0,...n}},S.createElement("div",null,S.createElement("div",{style:{...ud.inner,...e}},S.createElement("div",{style:{...ud.bar,transform:`scaleX(${a/100})`,...t}}),S.createElement("span",{ref:u,style:{...ud.data,...r}})))):null}const ud={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Kv(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function dk(n,e,t){return Math.max(e,Math.min(n,t))}const tr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function g2(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function v2(n,e,t,r=.15){return r===0?dk(n,e,t):n<e?-g2(e-n,t-e,r)+e:n>t?+g2(n-t,t-e,r)+t:n}function pk(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[v2(e,s,o,r),v2(t,a,l,i)]}function mk(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gk(n){var e=mk(n,"string");return typeof e=="symbol"?e:String(e)}function Mr(n,e,t){return e=gk(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function en(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(t),!0).forEach(function(r){Mr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const pS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function y2(n){return n?n[0].toUpperCase()+n.slice(1):""}const vk=["enter","leave"];function _k(n=!1,e){return n&&!vk.includes(e)}function yk(n,e="",t=!1){const r=pS[n],i=r&&r[e]||e;return"on"+y2(n)+y2(i)+(_k(t,i)?"Capture":"")}const xk=["gotpointercapture","lostpointercapture"];function wk(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=xk.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function bk(n,e=""){const t=pS[n],r=t&&t[e]||e;return n+r}function Yp(n){return"touches"in n}function mS(n){return Yp(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Sk(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function Tk(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function gS(n){return Yp(n)?Tk(n)[0]:n}function Ek(n){return Sk(n).map(e=>e.identifier)}function Og(n){const e=gS(n);return Yp(n)?e.identifier:e.pointerId}function x2(n){const e=gS(n);return[e.clientX,e.clientY]}function Ck(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function tp(n,...e){return typeof n=="function"?n(...e):n}function Ok(){}function kk(...n){return n.length===0?Ok:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function w2(n,e){return Object.assign({},e,n||{})}const Ak=32;class Rk{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?tp(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Ck(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const A=t._delta.map(Math.abs);tr.addTo(t._distance,A)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:u,values:d}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[A,k]=d;p[0]=u[0]!==!1?A-u[0]:0,p[1]=u[1]!==!1?k-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=tp(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[_,y]=t.offset,[[w,b],[C,O]]=t._bounds;t.overflow=[_<w?-1:_>b?1:0,y<C?-1:y>O?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const T=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=pk(t._bounds,t.offset,T),t.delta=tr.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>Ak)){t.delta=tr.sub(t.offset,m);const A=t.delta.map(Math.abs);tr.addTo(t.distance,A),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[A[0]/s,A[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(en(en(en({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Mk([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class Pk extends Rk{constructor(...e){super(...e),Mr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=tr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=tr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[mS(e)]:r.axisThreshold;t.axis=Mk(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Dk=n=>n,b2=.15,vS={enabled(n=!0){return n},eventOptions(n,e,t){return en(en({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[b2,b2];case!1:return[0,0];default:return tr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return tr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||Dk},threshold(n){return tr.toVector(n,0)}},Ik=0,Yf=en(en({},vS),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Ik){return n},bounds(n={}){if(typeof n=="function")return s=>Yf.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),S2={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Nk extends Pk{constructor(...e){super(...e),Mr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=Yf.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=Og(e),r._pointerActive=!0,this.computeValues(x2(e)),this.computeInitial(),t.preventScrollAxis&&mS(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=Og(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=x2(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=tr.sub(s,t._values),this.computeValues(s)),tr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=Og(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[d,p]=r.swipe.velocity,[m,v]=r.swipe.distance,_=r.swipe.duration;if(t.elapsedTime<_){const y=Math.abs(a/t.timeDelta),w=Math.abs(l/t.timeDelta);y>d&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),w>p&&Math.abs(u)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Lk(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=S2[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,tr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in S2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Lk(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Zf=typeof window<"u"&&window.document&&window.document.createElement;function _S(){return Zf&&"ontouchstart"in window}function Fk(){return _S()||Zf&&window.navigator.maxTouchPoints>1}function Uk(){return Zf&&"onpointerdown"in window}function zk(){return Zf&&"exitPointerLock"in window.document}function Bk(){try{return"constructor"in GestureEvent}catch{return!1}}const Ei={isBrowser:Zf,gesture:Bk(),touch:_S(),touchscreen:Fk(),pointer:Uk(),pointerLock:zk()},jk=250,$k=180,Vk=.5,Hk=50,Wk=250,Gk=10,T2={mouse:0,touch:0,pen:8},qk=en(en({},Yf),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ei.pointerLock,Ei.touch&&t?"touch":this.pointerLock?"mouse":Ei.pointer&&!i?"pointer":Ei.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?jk:void 0,!(!Ei.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=tr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=Vk,distance:e=Hk,duration:t=Wk}={}){return{velocity:this.transform(tr.toVector(n)),distance:this.transform(tr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return $k;case!1:return 0;default:return n}},axisThreshold(n){return n?en(en({},T2),n):T2},keyboardDisplacement(n=Gk){return n}});en(en({},vS),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Ei.touch&&Ei.gesture)return"gesture";if(Ei.touch&&r)return"touch";if(Ei.touchscreen){if(Ei.pointer)return"pointer";if(Ei.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=w2(tp(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=w2(tp(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",tr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});en(en({},Yf),{},{mouseOnly:(n=!0)=>n});en(en({},Yf),{},{mouseOnly:(n=!0)=>n});const yS=new Map,T0=new Map;function Yk(n){yS.set(n.key,n.engine),T0.set(n.key,n.resolver)}const Zk={key:"drag",engine:Nk,resolver:qk};function Xk(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Kk(n,e){if(n==null)return{};var t=Xk(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const Qk={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ei.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},Jk=["target","eventOptions","window","enabled","transform"];function zd(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=zd(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function eA(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=Kk(r,Jk);if(t.shared=zd({target:i,eventOptions:s,window:o,enabled:a,transform:l},Qk),e){const u=T0.get(e);t[e]=zd(en({shared:t.shared},c),u)}else for(const u in c){const d=T0.get(u);d&&(t[u]=zd(en({shared:t.shared},c[u]),d))}return t}class xS{constructor(e,t){Mr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=bk(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=en(en({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class tA{constructor(){Mr(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class nA{constructor(e){Mr(this,"gestures",new Set),Mr(this,"_targetEventStore",new xS(this)),Mr(this,"gestureEventStores",{}),Mr(this,"gestureTimeoutStores",{}),Mr(this,"handlers",{}),Mr(this,"config",{}),Mr(this,"pointerIds",new Set),Mr(this,"touchIds",new Set),Mr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),rA(this,e)}setEventIds(e){if(Yp(e))return this.touchIds=new Set(Ek(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=eA(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=E2(r,a.eventOptions,!!i);if(a.enabled){const c=yS.get(o);new c(this,e,o).bind(l)}}const s=E2(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](en(en({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=kk(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=wk(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Ll(n,e){n.gestures.add(e),n.gestureEventStores[e]=new xS(n,e),n.gestureTimeoutStores[e]=new tA}function rA(n,e){e.drag&&Ll(n,"drag"),e.wheel&&Ll(n,"wheel"),e.scroll&&Ll(n,"scroll"),e.move&&Ll(n,"move"),e.pinch&&Ll(n,"pinch"),e.hover&&Ll(n,"hover")}const E2=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:yk(r,i,u);t&&d&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function iA(n,e={},t,r){const i=j.useMemo(()=>new nA(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),j.useEffect(i.effect.bind(i)),j.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function sA(n,e){return Yk(Zk),iA({drag:n},e||{},"drag")}let Cu;function oA(){var n;if(Cu!==void 0)return Cu;try{let e;const t=document.createElement("canvas");return Cu=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),Cu}catch{return Cu=!1}}function aA(n){let e=0;for(let r in n.attributes){const i=n.getAttribute(r);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}const t=n.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}const kg=new B5,Ag=new Te,Fl=new Te,ji=new Te,Ws=new Te,ps=new Te,Gs=new Te,qs=new Te,Ou=new Te,ku=new Te,Au=new Te,fd=new Te,Ru=new Te,Mu=new Te,Pu=new Te;class lA{constructor(e,t,r){this.camera=e,this.scene=t,this.startPoint=new Te,this.endPoint=new Te,this.collection=[],this.deep=r||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(kg,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Fl.copy(e),Fl.x=Math.min(e.x,t.x),Fl.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),ji.setFromMatrixPosition(this.camera.matrixWorld),Ws.copy(Fl),ps.set(t.x,Fl.y,0),Gs.copy(t),qs.set(Fl.x,t.y,0),Ws.unproject(this.camera),ps.unproject(this.camera),Gs.unproject(this.camera),qs.unproject(this.camera),Ru.copy(Ws).sub(ji),Mu.copy(ps).sub(ji),Pu.copy(Gs).sub(ji),Ru.normalize(),Mu.normalize(),Pu.normalize(),Ru.multiplyScalar(this.deep),Mu.multiplyScalar(this.deep),Pu.multiplyScalar(this.deep),Ru.add(ji),Mu.add(ji),Pu.add(ji);var r=kg.planes;r[0].setFromCoplanarPoints(ji,Ws,ps),r[1].setFromCoplanarPoints(ji,ps,Gs),r[2].setFromCoplanarPoints(Gs,qs,ji),r[3].setFromCoplanarPoints(qs,Ws,ji),r[4].setFromCoplanarPoints(ps,Gs,qs),r[5].setFromCoplanarPoints(Pu,Mu,Ru),r[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const i=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);Ws.set(i,s,-1),ps.set(o,s,-1),Gs.set(o,a,-1),qs.set(i,a,-1),Ou.set(i,s,1),ku.set(o,s,1),Au.set(o,a,1),fd.set(i,a,1),Ws.unproject(this.camera),ps.unproject(this.camera),Gs.unproject(this.camera),qs.unproject(this.camera),Ou.unproject(this.camera),ku.unproject(this.camera),Au.unproject(this.camera),fd.unproject(this.camera);var r=kg.planes;r[0].setFromCoplanarPoints(Ws,Ou,ku),r[1].setFromCoplanarPoints(ps,ku,Au),r[2].setFromCoplanarPoints(Au,fd,qs),r[3].setFromCoplanarPoints(fd,Ou,Ws),r[4].setFromCoplanarPoints(ps,Gs,qs),r[5].setFromCoplanarPoints(Au,ku,Ou),r[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),Ag.copy(t.geometry.boundingSphere.center),Ag.applyMatrix4(t.matrixWorld),e.containsPoint(Ag)&&this.collection.push(t)),t.children.length>0)for(let r=0;r<t.children.length;r++)this.searchChildInFrustum(e,t.children[r])}}const C2=new Vp,hd=new Te;class Zp extends bb{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Yd(e,3)),this.setAttribute("uv",new Yd(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new m0(t,6,1);return this.setAttribute("instanceStart",new Ql(r,3,0)),this.setAttribute("instanceEnd",new Ql(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new m0(t,6,1);return this.setAttribute("instanceColorStart",new Ql(r,3,0)),this.setAttribute("instanceColorEnd",new Ql(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new j5(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vp);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),C2.setFromBufferAttribute(t),this.boundingBox.union(C2))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Iv),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)hd.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(hd)),hd.fromBufferAttribute(t,s),i=Math.max(i,r.distanceToSquared(hd));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class wS extends Zp{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,r=new Float32Array(2*t);for(let i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const t=e.length-3,r=new Float32Array(2*t);for(let i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Xp extends Qi{constructor(e){super({type:"LineMaterial",uniforms:g0.clone(g0.merge([$y.common,$y.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ct(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(Hp.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const O2=new Te,k2=new Te,$n=new Zo,Vn=new Zo,ms=new Zo,Rg=new Te,Mg=new ol,Xn=new $5,A2=new Te,dd=new Vp,pd=new Iv,gs=new Zo;let xs,E0,bS,Ba;function R2(n,e,t){return gs.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),gs.multiplyScalar(1/gs.w),gs.x=Ba/t.width,gs.y=Ba/t.height,gs.applyMatrix4(n.projectionMatrixInverse),gs.multiplyScalar(1/gs.w),Math.abs(Math.max(gs.x,gs.y))}function cA(n,e){for(let t=0,r=E0.count;t<r;t++){Xn.start.fromBufferAttribute(E0,t),Xn.end.fromBufferAttribute(bS,t);const i=new Te,s=new Te;xs.distanceSqToSegment(Xn.start,Xn.end,s,i),s.distanceTo(i)<Ba*.5&&e.push({point:s,pointOnLine:i,distance:xs.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function uA(n,e,t){const r=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;xs.at(1,ms),ms.w=1,ms.applyMatrix4(e.matrixWorldInverse),ms.applyMatrix4(r),ms.multiplyScalar(1/ms.w),ms.x*=s.x/2,ms.y*=s.y/2,ms.z=0,Rg.copy(ms),Mg.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,p=l.count;d<p;d++){if($n.fromBufferAttribute(l,d),Vn.fromBufferAttribute(c,d),$n.w=1,Vn.w=1,$n.applyMatrix4(Mg),Vn.applyMatrix4(Mg),$n.z>u&&Vn.z>u)continue;if($n.z>u){const b=$n.z-Vn.z,C=($n.z-u)/b;$n.lerp(Vn,C)}else if(Vn.z>u){const b=Vn.z-$n.z,C=(Vn.z-u)/b;Vn.lerp($n,C)}$n.applyMatrix4(r),Vn.applyMatrix4(r),$n.multiplyScalar(1/$n.w),Vn.multiplyScalar(1/Vn.w),$n.x*=s.x/2,$n.y*=s.y/2,Vn.x*=s.x/2,Vn.y*=s.y/2,Xn.start.copy($n),Xn.start.z=0,Xn.end.copy(Vn),Xn.end.z=0;const v=Xn.closestPointToPointParameter(Rg,!0);Xn.at(v,A2);const _=Nv.lerp($n.z,Vn.z,v),y=_>=-1&&_<=1,w=Rg.distanceTo(A2)<Ba*.5;if(y&&w){Xn.start.fromBufferAttribute(l,d),Xn.end.fromBufferAttribute(c,d),Xn.start.applyMatrix4(o),Xn.end.applyMatrix4(o);const b=new Te,C=new Te;xs.distanceSqToSegment(Xn.start,Xn.end,C,b),t.push({point:C,pointOnLine:b,distance:xs.origin.distanceTo(C),object:n,face:null,faceIndex:d,uv:null,uv2:null})}}}class SS extends al{constructor(e=new Zp,t=new Xp({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)O2.fromBufferAttribute(t,o),k2.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+O2.distanceTo(k2);const s=new m0(i,2,1);return e.setAttribute("instanceDistanceStart",new Ql(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ql(s,1,1)),this}raycast(e,t){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;xs=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Ba=l.linewidth+s,E0=a.attributes.instanceStart,bS=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),pd.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=Ba*.5;else{const d=Math.max(i.near,pd.distanceToPoint(xs.origin));c=R2(i,d,l.resolution)}if(pd.radius+=c,xs.intersectsSphere(pd)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),dd.copy(a.boundingBox).applyMatrix4(o);let u;if(r)u=Ba*.5;else{const d=Math.max(i.near,dd.distanceToPoint(xs.origin));u=R2(i,d,l.resolution)}dd.expandByScalar(u),xs.intersectsBox(dd)!==!1&&(r?cA(this,t):uA(this,i,t))}}class TS extends SS{constructor(e=new wS,t=new Xp({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}function fA(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const hA=S.createContext([]);function dA({box:n,multiple:e,children:t,onChange:r,border:i="1px solid #55aaff",backgroundColor:s="rgba(75, 160, 255, 0.1)",filter:o=l=>l,...a}){const{setEvents:l,camera:c,raycaster:u,gl:d,controls:p,size:m,get:v}=mt(),[_,y]=S.useState(!1),[w,b]=S.useReducer((A,{object:k,shift:R})=>k===void 0?[]:Array.isArray(k)?k:R?A.includes(k)?A.filter(P=>P!==k):[k,...A]:A[0]===k?[]:[k],[]);S.useEffect(()=>void(r==null?void 0:r(w)),[w]);const C=S.useCallback(A=>{A.stopPropagation(),b({object:o([A.object])[0],shift:e&&A.shiftKey})},[]),O=S.useCallback(A=>!_&&b({}),[_]),T=S.useRef(null);return S.useEffect(()=>{if(!n||!e)return;const A=new lA(c,T.current),k=document.createElement("div");k.style.pointerEvents="none",k.style.border=i,k.style.backgroundColor=s,k.style.position="fixed";const R=new Ct,P=new Ct,L=new Ct,I=v().events.enabled,D=p==null?void 0:p.enabled;let B=!1;function z(W,ee){const{offsetX:ne,offsetY:Z}=W,{width:oe,height:re}=m;ee.set(ne/oe*2-1,-(Z/re)*2+1)}function V(W){var ee;p&&(p.enabled=!1),l({enabled:!1}),B=!0,(ee=d.domElement.parentElement)==null||ee.appendChild(k),k.style.left=`${W.clientX}px`,k.style.top=`${W.clientY}px`,k.style.width="0px",k.style.height="0px",R.x=W.clientX,R.y=W.clientY}function $(W){L.x=Math.max(R.x,W.clientX),L.y=Math.max(R.y,W.clientY),P.x=Math.min(R.x,W.clientX),P.y=Math.min(R.y,W.clientY),k.style.left=`${P.x}px`,k.style.top=`${P.y}px`,k.style.width=`${L.x-P.x}px`,k.style.height=`${L.y-P.y}px`}function K(){if(B){var W;p&&(p.enabled=D),l({enabled:I}),B=!1,(W=k.parentElement)==null||W.removeChild(k)}}function G(W){W.shiftKey&&(V(W),z(W,A.startPoint))}let H=[];function q(W){if(B){$(W),z(W,A.endPoint);const ee=A.select().sort(ne=>ne.uuid).filter(ne=>ne.isMesh);fA(ee,H)||(H=ee,b({object:o(ee)}))}}function F(W){B&&K()}return document.addEventListener("pointerdown",G,{passive:!0}),document.addEventListener("pointermove",q,{passive:!0,capture:!0}),document.addEventListener("pointerup",F,{passive:!0}),()=>{document.removeEventListener("pointerdown",G),document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",F)}},[m.width,m.height,u,c,p,d]),S.createElement("group",bt({ref:T,onClick:C,onPointerOver:()=>y(!0),onPointerOut:()=>y(!1),onPointerMissed:O},a),S.createElement(hA.Provider,{value:w},t))}const pA=S.forwardRef(function({points:e,color:t="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){const u=mt(v=>v.size),d=S.useMemo(()=>o?new SS:new TS,[o]),[p]=S.useState(()=>new Xp),m=S.useMemo(()=>{const v=o?new Zp:new wS,_=e.map(y=>{const w=Array.isArray(y);return y instanceof Te?[y.x,y.y,y.z]:y instanceof Ct?[y.x,y.y,0]:w&&y.length===3?[y[0],y[1],y[2]]:w&&y.length===2?[y[0],y[1],0]:y});if(v.setPositions(_.flat()),r){const y=r.map(w=>w instanceof xr?w.toArray():w);v.setColors(y.flat())}return v},[e,o,r]);return S.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),S.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),S.useEffect(()=>()=>m.dispose(),[m]),S.createElement("primitive",bt({object:d,ref:c},l),S.createElement("primitive",{object:m,attach:"geometry"}),S.createElement("primitive",bt({object:p,attach:"material",color:t,vertexColors:!!r,resolution:[u.width,u.height],linewidth:i??s,dashed:a},l)))});function mA(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(p){return p&&p.isWorkerModule&&(e(p,function(m){if(m instanceof Error)throw m}),p=n[p.id].value),p}),c=r("<"+a+">.init",c),u&&(u=r("<"+a+">.getTransferables",u));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:d,getTransferables:u},s(d)}catch(p){p&&p.noLog||console.error(p),s(p)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(d){return s(d instanceof Error?d:new Error(""+d))}):u(c)}catch(d){s(d)}function u(d){try{var p=n[a].getTransferables&&n[a].getTransferables(d);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),s(d,p)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function gA(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var ES=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return ES=function(){return n},n},vA=0,_A=0,Pg=!1,Ju=Object.create(null),ef=Object.create(null),C0=Object.create(null);function Xf(n){if((!n||typeof n.init!="function")&&!Pg)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!ES())return gA(n);i==null&&(i="#default");var s="workerModule"+ ++vA,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(Pg=!0,c=Xf({workerId:i,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+Bd(c)+`
)}`}),Pg=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=M2(i,"registerModule",l.workerModuleData);var d=function(){a=null,ef[i].delete(d)};(ef[i]||(ef[i]=new Set)).add(d)}return a.then(function(p){var m=p.isCallable;if(m)return M2(i,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Bd(t),getTransferables:r&&Bd(r)},l}function yA(n){ef[n]&&ef[n].forEach(function(e){e()}),Ju[n]&&(Ju[n].terminate(),delete Ju[n])}function Bd(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function xA(n){var e=Ju[n];if(!e){var t=Bd(mA);e=Ju[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=C0[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete C0[s],o(i)}}return e}function M2(n,e,t){return new Promise(function(r,i){var s=++_A;C0[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},xA(n).postMessage({messageId:s,action:e,data:t})})}function CS(){var n=function(e){function t(H,q,F,W,ee,ne,Z,oe){var re=1-Z;oe.x=re*re*H+2*re*Z*F+Z*Z*ee,oe.y=re*re*q+2*re*Z*W+Z*Z*ne}function r(H,q,F,W,ee,ne,Z,oe,re,Q){var _e=1-re;Q.x=_e*_e*_e*H+3*_e*_e*re*F+3*_e*re*re*ee+re*re*re*Z,Q.y=_e*_e*_e*q+3*_e*_e*re*W+3*_e*re*re*ne+re*re*re*oe}function i(H,q){for(var F=/([MLQCZ])([^MLQCZ]*)/g,W,ee,ne,Z,oe;W=F.exec(H);){var re=W[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Q){return parseFloat(Q)});switch(W[1]){case"M":Z=ee=re[0],oe=ne=re[1];break;case"L":(re[0]!==Z||re[1]!==oe)&&q("L",Z,oe,Z=re[0],oe=re[1]);break;case"Q":{q("Q",Z,oe,Z=re[2],oe=re[3],re[0],re[1]);break}case"C":{q("C",Z,oe,Z=re[4],oe=re[5],re[0],re[1],re[2],re[3]);break}case"Z":(Z!==ee||oe!==ne)&&q("L",Z,oe,ee,ne);break}}}function s(H,q,F){F===void 0&&(F=16);var W={x:0,y:0};i(H,function(ee,ne,Z,oe,re,Q,_e,xe,ce){switch(ee){case"L":q(ne,Z,oe,re);break;case"Q":{for(var ue=ne,Ee=Z,Ie=1;Ie<F;Ie++)t(ne,Z,Q,_e,oe,re,Ie/(F-1),W),q(ue,Ee,W.x,W.y),ue=W.x,Ee=W.y;break}case"C":{for(var J=ne,de=Z,be=1;be<F;be++)r(ne,Z,Q,_e,xe,ce,oe,re,be/(F-1),W),q(J,de,W.x,W.y),J=W.x,de=W.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(H,q){var F=H.getContext?H.getContext("webgl",c):H,W=l.get(F);if(!W){let _e=function(J){var de=ne[J];if(!de&&(de=ne[J]=F.getExtension(J),!de))throw new Error(J+" not supported");return de},xe=function(J,de){var be=F.createShader(de);return F.shaderSource(be,J),F.compileShader(be),be},ce=function(J,de,be,fe){if(!Z[J]){var ge={},me={},he=F.createProgram();F.attachShader(he,xe(de,F.VERTEX_SHADER)),F.attachShader(he,xe(be,F.FRAGMENT_SHADER)),F.linkProgram(he),Z[J]={program:he,transaction:function(ie){F.useProgram(he),ie({setUniform:function(we,Be){for(var Ne=[],Re=arguments.length-2;Re-- >0;)Ne[Re]=arguments[Re+2];var He=me[Be]||(me[Be]=F.getUniformLocation(he,Be));F["uniform"+we].apply(F,[He].concat(Ne))},setAttribute:function(we,Be,Ne,Re,He){var it=ge[we];it||(it=ge[we]={buf:F.createBuffer(),loc:F.getAttribLocation(he,we),data:null}),F.bindBuffer(F.ARRAY_BUFFER,it.buf),F.vertexAttribPointer(it.loc,Be,F.FLOAT,!1,0,0),F.enableVertexAttribArray(it.loc),ee?F.vertexAttribDivisor(it.loc,Re):_e("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(it.loc,Re),He!==it.data&&(F.bufferData(F.ARRAY_BUFFER,He,Ne),it.data=He)}})}}}Z[J].transaction(fe)},ue=function(J,de){re++;try{F.activeTexture(F.TEXTURE0+re);var be=oe[J];be||(be=oe[J]=F.createTexture(),F.bindTexture(F.TEXTURE_2D,be),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST)),F.bindTexture(F.TEXTURE_2D,be),de(be,re)}finally{re--}},Ee=function(J,de,be){var fe=F.createFramebuffer();Q.push(fe),F.bindFramebuffer(F.FRAMEBUFFER,fe),F.activeTexture(F.TEXTURE0+de),F.bindTexture(F.TEXTURE_2D,J),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,J,0);try{be(fe)}finally{F.deleteFramebuffer(fe),F.bindFramebuffer(F.FRAMEBUFFER,Q[--Q.length-1]||null)}},Ie=function(){ne={},Z={},oe={},re=-1,Q.length=0};var ee=typeof WebGL2RenderingContext<"u"&&F instanceof WebGL2RenderingContext,ne={},Z={},oe={},re=-1,Q=[];F.canvas.addEventListener("webglcontextlost",function(J){Ie(),J.preventDefault()},!1),l.set(F,W={gl:F,isWebGL2:ee,getExtension:_e,withProgram:ce,withTexture:ue,withTextureFramebuffer:Ee,handleContextLoss:Ie})}q(W)}function d(H,q,F,W,ee,ne,Z,oe){Z===void 0&&(Z=15),oe===void 0&&(oe=null),u(H,function(re){var Q=re.gl,_e=re.withProgram,xe=re.withTexture;xe("copy",function(ce,ue){Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,ee,ne,0,Q.RGBA,Q.UNSIGNED_BYTE,q),_e("copy",o,a,function(Ee){var Ie=Ee.setUniform,J=Ee.setAttribute;J("aUV",2,Q.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ie("1i","image",ue),Q.bindFramebuffer(Q.FRAMEBUFFER,oe||null),Q.disable(Q.BLEND),Q.colorMask(Z&8,Z&4,Z&2,Z&1),Q.viewport(F,W,ee,ne),Q.scissor(F,W,ee,ne),Q.drawArrays(Q.TRIANGLES,0,3)})})})}function p(H,q,F){var W=H.width,ee=H.height;u(H,function(ne){var Z=ne.gl,oe=new Uint8Array(W*ee*4);Z.readPixels(0,0,W,ee,Z.RGBA,Z.UNSIGNED_BYTE,oe),H.width=q,H.height=F,d(Z,oe,0,0,W,ee)})}var m=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:p});function v(H,q,F,W,ee,ne){ne===void 0&&(ne=1);var Z=new Uint8Array(H*q),oe=W[2]-W[0],re=W[3]-W[1],Q=[];s(F,function(J,de,be,fe){Q.push({x1:J,y1:de,x2:be,y2:fe,minX:Math.min(J,be),minY:Math.min(de,fe),maxX:Math.max(J,be),maxY:Math.max(de,fe)})}),Q.sort(function(J,de){return J.maxX-de.maxX});for(var _e=0;_e<H;_e++)for(var xe=0;xe<q;xe++){var ce=Ee(W[0]+oe*(_e+.5)/H,W[1]+re*(xe+.5)/q),ue=Math.pow(1-Math.abs(ce)/ee,ne)/2;ce<0&&(ue=1-ue),ue=Math.max(0,Math.min(255,Math.round(ue*255))),Z[xe*H+_e]=ue}return Z;function Ee(J,de){for(var be=1/0,fe=1/0,ge=Q.length;ge--;){var me=Q[ge];if(me.maxX+fe<=J)break;if(J+fe>me.minX&&de-fe<me.maxY&&de+fe>me.minY){var he=w(J,de,me.x1,me.y1,me.x2,me.y2);he<be&&(be=he,fe=Math.sqrt(be))}}return Ie(J,de)&&(fe=-fe),fe}function Ie(J,de){for(var be=0,fe=Q.length;fe--;){var ge=Q[fe];if(ge.maxX<=J)break;var me=ge.y1>de!=ge.y2>de&&J<(ge.x2-ge.x1)*(de-ge.y1)/(ge.y2-ge.y1)+ge.x1;me&&(be+=ge.y1<ge.y2?1:-1)}return be!==0}}function _(H,q,F,W,ee,ne,Z,oe,re,Q){ne===void 0&&(ne=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0),y(H,q,F,W,ee,ne,Z,null,oe,re,Q)}function y(H,q,F,W,ee,ne,Z,oe,re,Q,_e){ne===void 0&&(ne=1),re===void 0&&(re=0),Q===void 0&&(Q=0),_e===void 0&&(_e=0);for(var xe=v(H,q,F,W,ee,ne),ce=new Uint8Array(xe.length*4),ue=0;ue<xe.length;ue++)ce[ue*4+_e]=xe[ue];d(Z,ce,re,Q,H,q,1<<3-_e,oe)}function w(H,q,F,W,ee,ne){var Z=ee-F,oe=ne-W,re=Z*Z+oe*oe,Q=re?Math.max(0,Math.min(1,((H-F)*Z+(q-W)*oe)/re)):0,_e=H-(F+Q*Z),xe=q-(W+Q*oe);return _e*_e+xe*xe}var b=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:_,generateIntoFramebuffer:y}),C="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",O="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),k=null,R=!1,P={},L=new WeakMap;function I(H){if(!R&&!V(H))throw new Error("WebGL generation not supported")}function D(H,q,F,W,ee,ne,Z){if(ne===void 0&&(ne=1),Z===void 0&&(Z=null),!Z&&(Z=k,!Z)){var oe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!oe)throw new Error("OffscreenCanvas or DOM canvas not supported");Z=k=oe.getContext("webgl",{depth:!1})}I(Z);var re=new Uint8Array(H*q*4);u(Z,function(ce){var ue=ce.gl,Ee=ce.withTexture,Ie=ce.withTextureFramebuffer;Ee("readable",function(J,de){ue.texImage2D(ue.TEXTURE_2D,0,ue.RGBA,H,q,0,ue.RGBA,ue.UNSIGNED_BYTE,null),Ie(J,de,function(be){z(H,q,F,W,ee,ne,ue,be,0,0,0),ue.readPixels(0,0,H,q,ue.RGBA,ue.UNSIGNED_BYTE,re)})})});for(var Q=new Uint8Array(H*q),_e=0,xe=0;_e<re.length;_e+=4)Q[xe++]=re[_e];return Q}function B(H,q,F,W,ee,ne,Z,oe,re,Q){ne===void 0&&(ne=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0),z(H,q,F,W,ee,ne,Z,null,oe,re,Q)}function z(H,q,F,W,ee,ne,Z,oe,re,Q,_e){ne===void 0&&(ne=1),re===void 0&&(re=0),Q===void 0&&(Q=0),_e===void 0&&(_e=0),I(Z);var xe=[];s(F,function(ce,ue,Ee,Ie){xe.push(ce,ue,Ee,Ie)}),xe=new Float32Array(xe),u(Z,function(ce){var ue=ce.gl,Ee=ce.isWebGL2,Ie=ce.getExtension,J=ce.withProgram,de=ce.withTexture,be=ce.withTextureFramebuffer,fe=ce.handleContextLoss;if(de("rawDistances",function(ge,me){(H!==ge._lastWidth||q!==ge._lastHeight)&&ue.texImage2D(ue.TEXTURE_2D,0,ue.RGBA,ge._lastWidth=H,ge._lastHeight=q,0,ue.RGBA,ue.UNSIGNED_BYTE,null),J("main",C,O,function(he){var Ae=he.setAttribute,ie=he.setUniform,pe=!Ee&&Ie("ANGLE_instanced_arrays"),we=!Ee&&Ie("EXT_blend_minmax");Ae("aUV",2,ue.STATIC_DRAW,0,A),Ae("aLineSegment",4,ue.DYNAMIC_DRAW,1,xe),ie.apply(void 0,["4f","uGlyphBounds"].concat(W)),ie("1f","uMaxDistance",ee),ie("1f","uExponent",ne),be(ge,me,function(Be){ue.enable(ue.BLEND),ue.colorMask(!0,!0,!0,!0),ue.viewport(0,0,H,q),ue.scissor(0,0,H,q),ue.blendFunc(ue.ONE,ue.ONE),ue.blendEquationSeparate(ue.FUNC_ADD,Ee?ue.MAX:we.MAX_EXT),ue.clear(ue.COLOR_BUFFER_BIT),Ee?ue.drawArraysInstanced(ue.TRIANGLES,0,3,xe.length/4):pe.drawArraysInstancedANGLE(ue.TRIANGLES,0,3,xe.length/4)})}),J("post",o,T,function(he){he.setAttribute("aUV",2,ue.STATIC_DRAW,0,A),he.setUniform("1i","tex",me),ue.bindFramebuffer(ue.FRAMEBUFFER,oe),ue.disable(ue.BLEND),ue.colorMask(_e===0,_e===1,_e===2,_e===3),ue.viewport(re,Q,H,q),ue.scissor(re,Q,H,q),ue.drawArrays(ue.TRIANGLES,0,3)})}),ue.isContextLost())throw fe(),new Error("webgl context lost")})}function V(H){var q=!H||H===k?P:H.canvas||H,F=L.get(q);if(F===void 0){R=!0;var W=null;try{var ee=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ne=D(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,H);F=ne&&ee.length===ne.length&&ne.every(function(Z,oe){return Z===ee[oe]}),F||(W="bad trial run results",console.info(ee,ne))}catch(Z){F=!1,W=Z.message}W&&console.warn("WebGL SDF generation not supported:",W),R=!1,L.set(q,F)}return F}var $=Object.freeze({__proto__:null,generate:D,generateIntoCanvas:B,generateIntoFramebuffer:z,isSupported:V});function K(H,q,F,W,ee,ne){ee===void 0&&(ee=Math.max(W[2]-W[0],W[3]-W[1])/2),ne===void 0&&(ne=1);try{return D.apply($,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),v.apply(b,arguments)}}function G(H,q,F,W,ee,ne,Z,oe,re,Q){ee===void 0&&(ee=Math.max(W[2]-W[0],W[3]-W[1])/2),ne===void 0&&(ne=1),oe===void 0&&(oe=0),re===void 0&&(re=0),Q===void 0&&(Q=0);try{return B.apply($,arguments)}catch(_e){return console.info("WebGL SDF generation failed, falling back to JS",_e),_.apply(b,arguments)}}return e.forEachPathCommand=i,e.generate=K,e.generateIntoCanvas=G,e.javascript=b,e.pathToLineSegments=s,e.webgl=$,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function wA(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(fe,ge){r[fe]=1<<ge+1,i[r[fe]]=fe}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|s|r.PDI|l,u=null;function d(){if(!u){u=new Map;var fe=function(me){if(t.hasOwnProperty(me)){var he=0;t[me].split(",").forEach(function(Ae){var ie=Ae.split("+"),pe=ie[0],we=ie[1];pe=parseInt(pe,36),we=we?parseInt(we,36):0,u.set(he+=pe,r[me]);for(var Be=0;Be<we;Be++)u.set(++he,r[me])})}};for(var ge in t)fe(ge)}}function p(fe){return d(),u.get(fe.codePointAt(0))||r.L}function m(fe){return i[p(fe)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(fe,ge){var me=36,he=0,Ae=new Map,ie=ge&&new Map,pe;return fe.split(",").forEach(function we(Be){if(Be.indexOf("+")!==-1)for(var Ne=+Be;Ne--;)we(pe);else{pe=Be;var Re=Be.split(">"),He=Re[0],it=Re[1];He=String.fromCodePoint(he+=parseInt(He,me)),it=String.fromCodePoint(he+=parseInt(it,me)),Ae.set(He,it),ge&&ie.set(it,He)}}),{map:Ae,reverseMap:ie}}var y,w,b;function C(){if(!y){var fe=_(v.pairs,!0),ge=fe.map,me=fe.reverseMap;y=ge,w=me,b=_(v.canonical,!1).map}}function O(fe){return C(),y.get(fe)||null}function T(fe){return C(),w.get(fe)||null}function A(fe){return C(),b.get(fe)||null}var k=r.L,R=r.R,P=r.EN,L=r.ES,I=r.ET,D=r.AN,B=r.CS,z=r.B,V=r.S,$=r.ON,K=r.BN,G=r.NSM,H=r.AL,q=r.LRO,F=r.RLO,W=r.LRE,ee=r.RLE,ne=r.PDF,Z=r.LRI,oe=r.RLI,re=r.FSI,Q=r.PDI;function _e(fe,ge){for(var me=125,he=new Uint32Array(fe.length),Ae=0;Ae<fe.length;Ae++)he[Ae]=p(fe[Ae]);var ie=new Map;function pe(Mn,dr){var un=he[Mn];he[Mn]=dr,ie.set(un,ie.get(un)-1),un&a&&ie.set(a,ie.get(a)-1),ie.set(dr,(ie.get(dr)||0)+1),dr&a&&ie.set(a,(ie.get(a)||0)+1)}for(var we=new Uint8Array(fe.length),Be=new Map,Ne=[],Re=null,He=0;He<fe.length;He++)Re||Ne.push(Re={start:He,end:fe.length-1,level:ge==="rtl"?1:ge==="ltr"?0:Sl(He,!1)}),he[He]&z&&(Re.end=He,Re=null);for(var it=ee|W|F|q|s|Q|ne|z,It=function(Mn){return Mn+(Mn&1?1:2)},Ge=function(Mn){return Mn+(Mn&1?2:1)},ut=0;ut<Ne.length;ut++){Re=Ne[ut];var Ze=[{_level:Re.level,_override:0,_isolate:0}],Fe=void 0,ot=0,ct=0,Vt=0;ie.clear();for(var Je=Re.start;Je<=Re.end;Je++){var zt=he[Je];if(Fe=Ze[Ze.length-1],ie.set(zt,(ie.get(zt)||0)+1),zt&a&&ie.set(a,(ie.get(a)||0)+1),zt&it)if(zt&(ee|W)){we[Je]=Fe._level;var zn=(zt===ee?Ge:It)(Fe._level);zn<=me&&!ot&&!ct?Ze.push({_level:zn,_override:0,_isolate:0}):ot||ct++}else if(zt&(F|q)){we[Je]=Fe._level;var Ni=(zt===F?Ge:It)(Fe._level);Ni<=me&&!ot&&!ct?Ze.push({_level:Ni,_override:zt&F?R:k,_isolate:0}):ot||ct++}else if(zt&s){zt&re&&(zt=Sl(Je+1,!0)===1?oe:Z),we[Je]=Fe._level,Fe._override&&pe(Je,Fe._override);var Ds=(zt===oe?Ge:It)(Fe._level);Ds<=me&&ot===0&&ct===0?(Vt++,Ze.push({_level:Ds,_override:0,_isolate:1,_isolInitIndex:Je})):ot++}else if(zt&Q){if(ot>0)ot--;else if(Vt>0){for(ct=0;!Ze[Ze.length-1]._isolate;)Ze.pop();var Li=Ze[Ze.length-1]._isolInitIndex;Li!=null&&(Be.set(Li,Je),Be.set(Je,Li)),Ze.pop(),Vt--}Fe=Ze[Ze.length-1],we[Je]=Fe._level,Fe._override&&pe(Je,Fe._override)}else zt&ne?(ot===0&&(ct>0?ct--:!Fe._isolate&&Ze.length>1&&(Ze.pop(),Fe=Ze[Ze.length-1])),we[Je]=Fe._level):zt&z&&(we[Je]=Re.level);else we[Je]=Fe._level,Fe._override&&zt!==K&&pe(Je,Fe._override)}for(var ar=[],lr=null,Bt=Re.start;Bt<=Re.end;Bt++){var bo=he[Bt];if(!(bo&l)){var Ht=we[Bt],Wt=bo&s,$r=bo===Q;lr&&Ht===lr._level?(lr._end=Bt,lr._endsWithIsolInit=Wt):ar.push(lr={_start:Bt,_end:Bt,_level:Ht,_startsWithPDI:$r,_endsWithIsolInit:Wt})}}for(var cr=[],vt=0;vt<ar.length;vt++){var cn=ar[vt];if(!cn._startsWithPDI||cn._startsWithPDI&&!Be.has(cn._start)){for(var Er=[lr=cn],nn=void 0;lr&&lr._endsWithIsolInit&&(nn=Be.get(lr._end))!=null;)for(var _n=vt+1;_n<ar.length;_n++)if(ar[_n]._start===nn){Er.push(lr=ar[_n]);break}for(var Bn=[],is=0;is<Er.length;is++)for(var Vr=Er[is],Is=Vr._start;Is<=Vr._end;Is++)Bn.push(Is);for(var bm=we[Bn[0]],ph=Re.level,ua=Bn[0]-1;ua>=0;ua--)if(!(he[ua]&l)){ph=we[ua];break}var Zc=Bn[Bn.length-1],Sm=we[Zc],mh=Re.level;if(!(he[Zc]&s)){for(var pl=Zc+1;pl<=Re.end;pl++)if(!(he[pl]&l)){mh=we[pl];break}}cr.push({_seqIndices:Bn,_sosType:Math.max(ph,bm)%2?R:k,_eosType:Math.max(mh,Sm)%2?R:k})}}for(var Xc=0;Xc<cr.length;Xc++){var Kc=cr[Xc],Me=Kc._seqIndices,Fi=Kc._sosType,Qc=Kc._eosType,ss=we[Me[0]]&1?R:k;if(ie.get(G))for(var ml=0;ml<Me.length;ml++){var gl=Me[ml];if(he[gl]&G){for(var os=Fi,Hr=ml-1;Hr>=0;Hr--)if(!(he[Me[Hr]]&l)){os=he[Me[Hr]];break}pe(gl,os&(s|Q)?$:os)}}if(ie.get(P))for(var _t=0;_t<Me.length;_t++){var xt=Me[_t];if(he[xt]&P)for(var Wr=_t-1;Wr>=-1;Wr--){var Sn=Wr===-1?Fi:he[Me[Wr]];if(Sn&o){Sn===H&&pe(xt,D);break}}}if(ie.get(H))for(var kn=0;kn<Me.length;kn++){var as=Me[kn];he[as]&H&&pe(as,R)}if(ie.get(L)||ie.get(B))for(var ui=1;ui<Me.length-1;ui++){var An=Me[ui];if(he[An]&(L|B)){for(var Ui=0,vl=0,_l=ui-1;_l>=0&&(Ui=he[Me[_l]],!!(Ui&l));_l--);for(var So=ui+1;So<Me.length&&(vl=he[Me[So]],!!(vl&l));So++);Ui===vl&&(he[An]===L?Ui===P:Ui&(P|D))&&pe(An,Ui)}}if(ie.get(P))for(var Gr=0;Gr<Me.length;Gr++){var qr=Me[Gr];if(he[qr]&P){for(var yl=Gr-1;yl>=0&&he[Me[yl]]&(I|l);yl--)pe(Me[yl],P);for(Gr++;Gr<Me.length&&he[Me[Gr]]&(I|l|P);Gr++)he[Me[Gr]]!==P&&pe(Me[Gr],P)}}if(ie.get(I)||ie.get(L)||ie.get(B))for(var fa=0;fa<Me.length;fa++){var gh=Me[fa];if(he[gh]&(I|L|B)){pe(gh,$);for(var Ns=fa-1;Ns>=0&&he[Me[Ns]]&l;Ns--)pe(Me[Ns],$);for(var Ls=fa+1;Ls<Me.length&&he[Me[Ls]]&l;Ls++)pe(Me[Ls],$)}}if(ie.get(P))for(var Fs=0,ha=Fi;Fs<Me.length;Fs++){var vh=Me[Fs],Jc=he[vh];Jc&P?ha===k&&pe(vh,k):Jc&o&&(ha=Jc)}if(ie.get(a)){var Us=R|P|D,xl=Us|k,ls=[];{for(var To=[],cs=0;cs<Me.length;cs++)if(he[Me[cs]]&a){var rt=fe[Me[cs]],eu=void 0;if(O(rt)!==null)if(To.length<63)To.push({char:rt,seqIndex:cs});else break;else if((eu=T(rt))!==null)for(var zs=To.length-1;zs>=0;zs--){var wl=To[zs].char;if(wl===eu||wl===T(A(rt))||O(A(wl))===rt){ls.push([To[zs].seqIndex,cs]),To.length=zs;break}}}ls.sort(function(Mn,dr){return Mn[0]-dr[0]})}for(var tu=0;tu<ls.length;tu++){for(var _h=ls[tu],Yt=_h[0],da=_h[1],yh=!1,ur=0,nu=Yt+1;nu<da;nu++){var pa=Me[nu];if(he[pa]&xl){yh=!0;var Yr=he[pa]&Us?R:k;if(Yr===ss){ur=Yr;break}}}if(yh&&!ur){ur=Fi;for(var ru=Yt-1;ru>=0;ru--){var xh=Me[ru];if(he[xh]&xl){var Zr=he[xh]&Us?R:k;Zr!==ss?ur=Zr:ur=ss;break}}}if(ur){if(he[Me[Yt]]=he[Me[da]]=ur,ur!==ss){for(var fr=Yt+1;fr<Me.length;fr++)if(!(he[Me[fr]]&l)){p(fe[Me[fr]])&G&&(he[Me[fr]]=ur);break}}if(ur!==ss){for(var us=da+1;us<Me.length;us++)if(!(he[Me[us]]&l)){p(fe[Me[us]])&G&&(he[Me[us]]=ur);break}}}}for(var fi=0;fi<Me.length;fi++)if(he[Me[fi]]&a){for(var iu=fi,su=fi,Cr=Fi,ma=fi-1;ma>=0;ma--)if(he[Me[ma]]&l)iu=ma;else{Cr=he[Me[ma]]&Us?R:k;break}for(var ga=Qc,va=fi+1;va<Me.length;va++)if(he[Me[va]]&(a|l))su=va;else{ga=he[Me[va]]&Us?R:k;break}for(var hr=iu;hr<=su;hr++)he[Me[hr]]=Cr===ga?Cr:ss;fi=su}}}for(var Rn=Re.start;Rn<=Re.end;Rn++){var bl=we[Rn],zi=he[Rn];if(bl&1?zi&(k|P|D)&&we[Rn]++:zi&R?we[Rn]++:zi&(D|P)&&(we[Rn]+=2),zi&l&&(we[Rn]=Rn===0?Re.level:we[Rn-1]),Rn===Re.end||p(fe[Rn])&(V|z))for(var Eo=Rn;Eo>=0&&p(fe[Eo])&c;Eo--)we[Eo]=Re.level}}return{levels:we,paragraphs:Ne};function Sl(Mn,dr){for(var un=Mn;un<fe.length;un++){var fn=he[un];if(fn&(R|H))return 1;if(fn&(z|k)||dr&&fn===Q)return 0;if(fn&s){var Xr=wh(un);un=Xr===-1?fe.length:Xr}}return 0}function wh(Mn){for(var dr=1,un=Mn+1;un<fe.length;un++){var fn=he[un];if(fn&z)break;if(fn&Q){if(--dr===0)return un}else fn&s&&dr++}return-1}}var xe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ce;function ue(){if(!ce){var fe=_(xe,!0),ge=fe.map,me=fe.reverseMap;me.forEach(function(he,Ae){ge.set(Ae,he)}),ce=ge}}function Ee(fe){return ue(),ce.get(fe)||null}function Ie(fe,ge,me,he){var Ae=fe.length;me=Math.max(0,me==null?0:+me),he=Math.min(Ae-1,he==null?Ae-1:+he);for(var ie=new Map,pe=me;pe<=he;pe++)if(ge[pe]&1){var we=Ee(fe[pe]);we!==null&&ie.set(pe,we)}return ie}function J(fe,ge,me,he){var Ae=fe.length;me=Math.max(0,me==null?0:+me),he=Math.min(Ae-1,he==null?Ae-1:+he);var ie=[];return ge.paragraphs.forEach(function(pe){var we=Math.max(me,pe.start),Be=Math.min(he,pe.end);if(we<Be){for(var Ne=ge.levels.slice(we,Be+1),Re=Be;Re>=we&&p(fe[Re])&c;Re--)Ne[Re]=pe.level;for(var He=pe.level,it=1/0,It=0;It<Ne.length;It++){var Ge=Ne[It];Ge>He&&(He=Ge),Ge<it&&(it=Ge|1)}for(var ut=He;ut>=it;ut--)for(var Ze=0;Ze<Ne.length;Ze++)if(Ne[Ze]>=ut){for(var Fe=Ze;Ze+1<Ne.length&&Ne[Ze+1]>=ut;)Ze++;Ze>Fe&&ie.push([Fe+we,Ze+we])}}}),ie}function de(fe,ge,me,he){var Ae=be(fe,ge,me,he),ie=[].concat(fe);return Ae.forEach(function(pe,we){ie[we]=(ge.levels[pe]&1?Ee(fe[pe]):null)||fe[pe]}),ie.join("")}function be(fe,ge,me,he){for(var Ae=J(fe,ge,me,he),ie=[],pe=0;pe<fe.length;pe++)ie[pe]=pe;return Ae.forEach(function(we){for(var Be=we[0],Ne=we[1],Re=ie.slice(Be,Ne+1),He=Re.length;He--;)ie[Ne-He]=Re[He]}),ie}return e.closingToOpeningBracket=T,e.getBidiCharType=p,e.getBidiCharTypeName=m,e.getCanonicalBracket=A,e.getEmbeddingLevels=_e,e.getMirroredCharacter=Ee,e.getMirroredCharactersMap=Ie,e.getReorderSegments=J,e.getReorderedIndices=be,e.getReorderedString=de,e.openingToClosingBracket=O,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const OS=/\bvoid\s+main\s*\(\s*\)\s*{/g;function O0(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=H5[i];return s?O0(s):r}return n.replace(e,t)}const Hn=[];for(let n=0;n<256;n++)Hn[n]=(n<16?"0":"")+n.toString(16);function bA(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hn[n&255]+Hn[n>>8&255]+Hn[n>>16&255]+Hn[n>>24&255]+"-"+Hn[e&255]+Hn[e>>8&255]+"-"+Hn[e>>16&15|64]+Hn[e>>24&255]+"-"+Hn[t&63|128]+Hn[t>>8&255]+"-"+Hn[t>>16&255]+Hn[t>>24&255]+Hn[r&255]+Hn[r>>8&255]+Hn[r>>16&255]+Hn[r>>24&255]).toUpperCase()}const Oa=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},SA=Date.now(),P2=new WeakMap,D2=new Map;let TA=1e10;function k0(n,e){const t=kA(e);let r=P2.get(n);if(r||P2.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let p=D2[d];if(!p){const m=EA(this,c,e,t);p=D2[d]=m}c.vertexShader=p.vertexShader,c.fragmentShader=p.fragmentShader,Oa(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-SA}}),this[i]&&this[i](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:TA++}),u.uuid=bA(),u.uniforms=Oa({},c.uniforms,e.uniforms),u.defines=Oa({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=Oa({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Oa(this.extensions,c.extensions),Oa(this.defines,c.defines),Oa(this.uniforms,g0.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=k0(n.isDerivedMaterial?n.getDepthMaterial():new Sb({depthPacking:Zd}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=k0(n.isDerivedMaterial?n.getDistanceMaterial():new V5,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function EA(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:m,timeUniform:v}=r;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",d=d||"",(l||m)&&(e=O0(e)),(p||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=O0(t)),m){let _=m({vertexShader:e,fragmentShader:t});e=_.vertexShader,t=_.fragmentShader}if(p){let _=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(_.push(y),"")),d=`${p}
${_.join(`
`)}
${d}`}if(v){const _=`
uniform float ${v};
`;s=_+s,c=_+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,y,w,b)=>/\battribute\s+vec[23]\s+$/.test(b.substr(0,w))?y:`troika_${y}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=I2(e,i,s,o,a),t=I2(t,i,c,u,d),{vertexShader:e,fragmentShader:t}}function I2(n,e,t,r,i){return(r||i||t)&&(n=n.replace(OS,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function CA(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let OA=0;const N2=new Map;function kA(n){const e=JSON.stringify(n,CA);let t=N2.get(e);return t==null&&N2.set(e,t=++OA),t}function AA(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(b,C){function O(){const T=A=>{console.error(`Failure loading font ${b}${b===r?"":"; trying fallback"}`,A),b!==r&&(b=r,O())};try{const A=new XMLHttpRequest;A.open("get",b,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status>=400)T(new Error(A.statusText));else if(A.status>0)try{const k=n(A.response);C(k)}catch(k){T(k)}},A.onerror=T,A.send()}catch(A){T(A)}}O()}function u(b,C){b||(b=r);let O=i[b];O?O.pending?O.pending.push(C):C(O):(i[b]={pending:[C]},c(b,T=>{let A=i[b].pending;i[b]=T,A.forEach(k=>k(T))}))}function d({text:b="",font:C=r,sdfGlyphSize:O=64,fontSize:T=1,letterSpacing:A=0,lineHeight:k="normal",maxWidth:R=s,direction:P,textAlign:L="left",textIndent:I=0,whiteSpace:D="normal",overflowWrap:B="normal",anchorX:z=0,anchorY:V=0,includeCaretPositions:$=!1,chunkedBoundsSize:K=8192,colorRanges:G=null},H,q=!1){const F=_(),W={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,A=+A,R=+R,k=k||"normal",I=+I,u(C,ee=>{const ne=isFinite(R);let Z=null,oe=null,re=null,Q=null,_e=null,xe=null,ce=null,ue=0,Ee=0,Ie=D!=="nowrap";const{ascender:J,descender:de,unitsPerEm:be,lineGap:fe,capHeight:ge,xHeight:me}=ee;W.fontLoad=_()-F;const he=_(),Ae=T/be;k==="normal"&&(k=(J-de+fe)/be),k=k*T;const ie=(k-(J-de)*Ae)/2,pe=-(J*Ae+ie),we=Math.min(k,(J-de)*Ae),Be=(J+de)/2*Ae-we/2;let Ne=I,Re=new y;const He=[Re];ee.forEachGlyph(b,T,A,(Ge,ut,Ze)=>{const Fe=b.charAt(Ze),ot=Ge.advanceWidth*Ae,ct=Re.count;let Vt;if("isEmpty"in Ge||(Ge.isWhitespace=!!Fe&&new RegExp(a).test(Fe),Ge.canBreakAfter=!!Fe&&l.test(Fe),Ge.isEmpty=Ge.xMin===Ge.xMax||Ge.yMin===Ge.yMax||o.test(Fe)),!Ge.isWhitespace&&!Ge.isEmpty&&Ee++,Ie&&ne&&!Ge.isWhitespace&&ut+ot+Ne>R&&ct){if(Re.glyphAt(ct-1).glyphObj.canBreakAfter)Vt=new y,Ne=-ut;else for(let zt=ct;zt--;)if(zt===0&&B==="break-word"){Vt=new y,Ne=-ut;break}else if(Re.glyphAt(zt).glyphObj.canBreakAfter){Vt=Re.splitAt(zt+1);const zn=Vt.glyphAt(0).x;Ne-=zn;for(let Ni=Vt.count;Ni--;)Vt.glyphAt(Ni).x-=zn;break}Vt&&(Re.isSoftWrapped=!0,Re=Vt,He.push(Re),ue=R)}let Je=Re.glyphAt(Re.count);Je.glyphObj=Ge,Je.x=ut+Ne,Je.width=ot,Je.charIndex=Ze,Fe===`
`&&(Re=new y,He.push(Re),Ne=-(ut+ot+A*T)+I)}),He.forEach(Ge=>{for(let ut=Ge.count;ut--;){let{glyphObj:Ze,x:Fe,width:ot}=Ge.glyphAt(ut);if(!Ze.isWhitespace){Ge.width=Fe+ot,Ge.width>ue&&(ue=Ge.width);return}}});let it=0,It=0;if(z&&(typeof z=="number"?it=-z:typeof z=="string"&&(it=-ue*(z==="left"?0:z==="center"?.5:z==="right"?1:m(z)))),V){if(typeof V=="number")It=-V;else if(typeof V=="string"){let Ge=He.length*k;It=V==="top"?0:V==="top-baseline"?-pe:V==="top-cap"?-pe-ge*Ae:V==="top-ex"?-pe-me*Ae:V==="middle"?Ge/2:V==="bottom"?Ge:V==="bottom-baseline"?Ge-ie+de*Ae:m(V)*Ge}}if(!q){const Ge=e.getEmbeddingLevels(b,P);Z=new Uint16Array(Ee),oe=new Float32Array(Ee*2),re={},xe=[s,s,-s,-s],ce=[];let ut=pe;$&&(_e=new Float32Array(b.length*3)),G&&(Q=new Uint8Array(Ee*3));let Ze=0,Fe=-1,ot=-1,ct,Vt;if(He.forEach((Je,zt)=>{let{count:zn,width:Ni}=Je;if(zn>0){let Ds=0;for(let Ht=zn;Ht--&&Je.glyphAt(Ht).glyphObj.isWhitespace;)Ds++;let Li=0,ar=0;if(L==="center")Li=(ue-Ni)/2;else if(L==="right")Li=ue-Ni;else if(L==="justify"&&Je.isSoftWrapped){let Ht=0;for(let Wt=zn-Ds;Wt--;)Je.glyphAt(Wt).glyphObj.isWhitespace&&Ht++;ar=(ue-Ni)/Ht}if(ar||Li){let Ht=0;for(let Wt=0;Wt<zn;Wt++){let $r=Je.glyphAt(Wt);const cr=$r.glyphObj;$r.x+=Li+Ht,ar!==0&&cr.isWhitespace&&Wt<zn-Ds&&(Ht+=ar,$r.width+=ar)}}const lr=e.getReorderSegments(b,Ge,Je.glyphAt(0).charIndex,Je.glyphAt(Je.count-1).charIndex);for(let Ht=0;Ht<lr.length;Ht++){const[Wt,$r]=lr[Ht];let cr=1/0,vt=-1/0;for(let cn=0;cn<zn;cn++)if(Je.glyphAt(cn).charIndex>=Wt){let Er=cn,nn=cn;for(;nn<zn;nn++){let _n=Je.glyphAt(nn);if(_n.charIndex>$r)break;nn<zn-Ds&&(cr=Math.min(cr,_n.x),vt=Math.max(vt,_n.x+_n.width))}for(let _n=Er;_n<nn;_n++){const Bn=Je.glyphAt(_n);Bn.x=vt-(Bn.x+Bn.width-cr)}break}}let Bt;const bo=Ht=>Bt=Ht;for(let Ht=0;Ht<zn;Ht++){let Wt=Je.glyphAt(Ht);Bt=Wt.glyphObj;const $r=Bt.index,cr=Ge.levels[Wt.charIndex]&1;if(cr){const vt=e.getMirroredCharacter(b[Wt.charIndex]);vt&&ee.forEachGlyph(vt,0,0,bo)}if($){const{charIndex:vt}=Wt,cn=Wt.x+it,Er=Wt.x+Wt.width+it;_e[vt*3]=cr?Er:cn,_e[vt*3+1]=cr?cn:Er,_e[vt*3+2]=ut+Be+It;const nn=vt-Fe;nn>1&&v(_e,Fe,nn),Fe=vt}if(G){const{charIndex:vt}=Wt;for(;vt>ot;)ot++,G.hasOwnProperty(ot)&&(Vt=G[ot])}if(!Bt.isWhitespace&&!Bt.isEmpty){const vt=Ze++;re[$r]||(re[$r]={path:Bt.path,pathBounds:[Bt.xMin,Bt.yMin,Bt.xMax,Bt.yMax]});const cn=Wt.x+it,Er=ut+It;oe[vt*2]=cn,oe[vt*2+1]=Er;const nn=cn+Bt.xMin*Ae,_n=Er+Bt.yMin*Ae,Bn=cn+Bt.xMax*Ae,is=Er+Bt.yMax*Ae;nn<xe[0]&&(xe[0]=nn),_n<xe[1]&&(xe[1]=_n),Bn>xe[2]&&(xe[2]=Bn),is>xe[3]&&(xe[3]=is),vt%K===0&&(ct={start:vt,end:vt,rect:[s,s,-s,-s]},ce.push(ct)),ct.end++;const Vr=ct.rect;if(nn<Vr[0]&&(Vr[0]=nn),_n<Vr[1]&&(Vr[1]=_n),Bn>Vr[2]&&(Vr[2]=Bn),is>Vr[3]&&(Vr[3]=is),Z[vt]=$r,G){const Is=vt*3;Q[Is]=Vt>>16&255,Q[Is+1]=Vt>>8&255,Q[Is+2]=Vt&255}}}}ut-=k}),_e){const Je=b.length-Fe;Je>1&&v(_e,Fe,Je)}}W.typesetting=_()-he,H({glyphIds:Z,glyphPositions:oe,glyphData:re,caretPositions:_e,caretHeight:we,glyphColors:Q,chunkedBounds:ce,fontSize:T,unitsPerEm:be,ascender:J*Ae,descender:de*Ae,capHeight:ge*Ae,xHeight:me*Ae,lineHeight:k,topBaseline:pe,blockBounds:[it,It-He.length*k,it+ue,It],visibleBounds:xe,timings:W})})}function p(b,C){d(b,O=>{const[T,A,k,R]=O.blockBounds;C({width:k-T,height:R-A})},{metricsOnly:!0})}function m(b){let C=b.match(/^([\d.]+)%$/),O=C?parseFloat(C[1]):NaN;return isNaN(O)?0:O/100}function v(b,C,O){const T=b[C*3],A=b[C*3+1],k=b[C*3+2],R=(A-T)/O;for(let P=0;P<O;P++){const L=(C+P)*3;b[L]=T+R*P,b[L+1]=T+R*(P+1),b[L+2]=k}}function _(){return(self.performance||Date).now()}function y(){this.data=[]}const w=["glyphObj","x","width","charIndex"];return y.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/w.length)},glyphAt(b){let C=y.flyweight;return C.data=this.data,C.index=b,C},splitAt(b){let C=new y;return C.data=this.data.splice(b*w.length),C}},y.flyweight=w.reduce((b,C,O,T)=>(Object.defineProperty(b,C,{get(){return this.data[this.index*w.length+O]},set(A){this.data[this.index*w.length+O]=A}}),b),{data:null,index:0}),{typeset:d,measure:p,loadFont:u}}const ja=()=>(self.performance||Date).now(),Kp=CS();let L2;function RA(n,e,t,r,i,s,o,a,l,c,u=!0){return u?PA(n,e,t,r,i,s,o,a,l,c).then(null,d=>(L2||(console.warn("WebGL SDF generation failed, falling back to JS",d),L2=!0),U2(n,e,t,r,i,s,o,a,l,c))):U2(n,e,t,r,i,s,o,a,l,c)}const jd=[],MA=5;let A0=0;function kS(){const n=ja();for(;jd.length&&ja()-n<MA;)jd.shift()();A0=jd.length?setTimeout(kS,0):0}const PA=(...n)=>new Promise((e,t)=>{jd.push(()=>{const r=ja();try{Kp.webgl.generateIntoCanvas(...n),e({timing:ja()-r})}catch(i){t(i)}}),A0||(A0=setTimeout(kS,0))}),DA=4,IA=2e3,F2={};let NA=0;function U2(n,e,t,r,i,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+NA++%DA;let d=F2[u];return d||(d=F2[u]={workerModule:Xf({name:u,workerId:u,dependencies:[CS,ja],init(p,m){const v=p().javascript.generate;return function(..._){const y=m();return{textureData:v(..._),timing:m()-y}}},getTransferables(p){return[p.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(n,e,t,r,i,s).then(({textureData:p,timing:m})=>{const v=ja(),_=new Uint8Array(p.length*4);for(let y=0;y<p.length;y++)_[y*4+c]=p[y];return Kp.webglUtils.renderImageData(o,_,a,l,n,e,1<<3-c),m+=ja()-v,--d.requests===0&&(d.idleTimer=setTimeout(()=>{yA(u)},IA)),{timing:m}})}function LA(n){n._warm||(Kp.webgl.isSupported(n),n._warm=!0)}const FA=Kp.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function UA(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:a},d={},p=0;p<l;p++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var v=o.readUint(i,s);s+=4;var _=o.readUint(i,s);s+=4,d[m]={offset:v,length:_}}for(p=0;p<c.length;p++){var y=c[p];d[y]&&(u[y.trim()]=e[y.trim()].parse(i,d[y].offset,d[y].length,u))}return u},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),c=o+12,u=0;u<l;u++){var d=a.readASCII(i,c,4);c+=4,a.readUint(i,c),c+=4;var p=a.readUint(i,c);if(c+=4,a.readUint(i,c),c+=4,d==s)return p}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var c=i[s++]<<8|i[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var c=e._bin,u={},d=s;c.readFixed(i,s),s+=4;var p=c.readUshort(i,s);s+=2;var m=c.readUshort(i,s);s+=2;var v=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,d+p),u.featureList=e._lctf.readFeatureList(i,d+m),u.lookupList=e._lctf.readLookupList(i,d+v,l),u},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var p=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+p,o);c.push(m)}return c},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(i,s),s+=2,c.flag=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;for(var d=c.ltype,p=0;p<u;p++){var m=a.readUshort(i,s);s+=2;var v=o(i,d,l+m,c);c.tabs.push(v)}return c},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var c=o.readUshort(i,s);s+=2;var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(i,s)),s+=2}if(l==2){var p=o.readUshort(i,s);for(s+=2,d=0;d<p;d++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var p=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+p);m.tag=d.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(i,s);s+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(o.readUshort(i,s+2*d));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var p=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(i,a+p)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+c);var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var p=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[p.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(i,s,d);var p=[];for(u=0;u<d.length-1;u++)p.push(e.CFF.readDict(i,s+d[u],s+d[u+1]));s+=d[d.length-1];var m=p[0],v=[];s=e.CFF.readIndex(i,s,v);var _=[];for(u=0;u<v.length-1;u++)_.push(a.readASCII(i,s+v[u],v[u+1]-v[u]));if(s+=v[v.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,v=[],s=e.CFF.readIndex(i,s,v);var y=[];for(u=0;u<v.length-1;u++)y.push(a.readBytes(i,s+v[u],v[u+1]-v[u]));m.CharStrings=y}if(m.ROS){s=m.FDArray;var w=[];for(s=e.CFF.readIndex(i,s,w),m.FDArray=[],u=0;u<w.length-1;u++){var b=e.CFF.readDict(i,s+w[u],s+w[u+1]);e.CFF._readFDict(i,b,_),m.FDArray.push(b)}s+=w[w.length-1],s=m.FDSelect,m.FDSelect=[];var C=i[s];if(s++,C!=3)throw C;var O=a.readUshort(i,s);for(s+=2,u=0;u<O+1;u++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,_),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(i,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)a.push(i[s+u]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<o;u++){var d=a.readUshort(i,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(i,s),s+=2;var p=0;for(c==1?(p=i[s],s++):(p=a.readUshort(i,s),s+=2),u=0;u<=p;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,d=null,p=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(p=a.readShort(i,s+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(p=l-139,u=1),247<=l&&l<=250&&(p=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(p=256*-(l-251)-c-108,u=2),l==255&&(p=a.readInt(i,s+1)/65535,u=5),o.val=p??"o"+d,o.size=u},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var p=1,m=null,v=null;u<=20&&(m=u,p=1),u==12&&(m=100*u+d,p=2),u!=19&&u!=20||(m=u,p=2),21<=u&&u<=27&&(m=u,p=1),u==28&&(v=l.readShort(i,s+1),p=3),29<=u&&u<=31&&(m=u,p=1),32<=u&&u<=246&&(v=u-139,p=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,p=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,p=2),u==255&&(v=l.readInt(i,s+1)/65535,p=5),c.push(v??"o"+m),s+=p}return c},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var p=1,m=null,v=null;if(u==28&&(v=a.readShort(i,s+1),p=3),u==29&&(v=a.readInt(i,s+1),p=5),32<=u&&u<=246&&(v=u-139,p=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,p=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,p=2),u==255)throw v=a.readInt(i,s+1)/65535,p=5,"unknown number";if(u==30){var _=[];for(p=1;;){var y=i[s+p];p++;var w=y>>4,b=15&y;if(w!=15&&_.push(w),b!=15&&_.push(b),b==15)break}for(var C="",O=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<_.length;T++)C+=O[_[T]];v=parseFloat(C)}u<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],p=1,u==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],p=2)),m!=null?(l[m]=c.length==1?c[0]:c,c=[]):c.push(v),s+=p}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var p=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var v=a.readUint(i,s);s+=4;var _="p"+p+"e"+m,y=u.indexOf(v);if(y==-1){var w;y=l.tables.length,u.push(v);var b=a.readUshort(i,v);b==0?w=e.cmap.parse0(i,v):b==4?w=e.cmap.parse4(i,v):b==6?w=e.cmap.parse6(i,v):b==12?w=e.cmap.parse12(i,v):console.debug("unknown format: "+b,p,m,v),l.tables.push(w)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=y}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(i[s+c]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;var d=u/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(i,s,d),s+=2*d,l.idDelta=[];for(var p=0;p<d;p++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,d=o.readUint(i,u+0),p=o.readUint(i,u+4),m=o.readUint(i,u+8);a.groups.push([d,p,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var p=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<p;u++){var m=a[l];if(l++,c.flags.push(m),(8&m)!=0){var v=a[l];l++;for(var _=0;_<v;_++)c.flags.push(m),u++}}for(c.xs=[],u=0;u<p;u++){var y=(2&c.flags[u])!=0,w=(16&c.flags[u])!=0;y?(c.xs.push(w?a[l]:-a[l]),l++):w?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<p;u++)y=(4&c.flags[u])!=0,w=(32&c.flags[u])!=0,y?(c.ys.push(w?a[l]:-a[l]),l++):w?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var b=0,C=0;for(u=0;u<p;u++)b+=c.xs[u],C+=c.ys[u],c.xs[u]=b,c.ys[u]=C}else{var O;c.parts=[];do{O=o.readUshort(a,l),l+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(T),T.glyphIndex=o.readUshort(a,l),l+=2,1&O){var A=o.readShort(a,l);l+=2;var k=o.readShort(a,l);l+=2}else A=o.readInt8(a,l),l++,k=o.readInt8(a,l),l++;2&O?(T.m.tx=A,T.m.ty=k):(T.p1=A,T.p2=k),8&O?(T.m.a=T.m.d=o.readF2dot14(a,l),l+=2):64&O?(T.m.a=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2):128&O&&(T.m.a=o.readF2dot14(a,l),l+=2,T.m.b=o.readF2dot14(a,l),l+=2,T.m.c=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2)}while(32&O);if(256&O){var R=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<R;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,d+c)}if(s==1&&u.fmt==1){var p=l.readUshort(i,o);o+=2;var m=e._lctf.numOfOnes(p);p!=0&&(u.pos=e.GPOS.readValueRecord(i,o,p))}else if(s==2&&u.fmt>=1&&u.fmt<=2){p=l.readUshort(i,o),o+=2;var v=l.readUshort(i,o);o+=2,m=e._lctf.numOfOnes(p);var _=e._lctf.numOfOnes(v);if(u.fmt==1){u.pairsets=[];var y=l.readUshort(i,o);o+=2;for(var w=0;w<y;w++){var b=c+l.readUshort(i,o);o+=2;var C=l.readUshort(i,b);b+=2;for(var O=[],T=0;T<C;T++){var A=l.readUshort(i,b);b+=2,p!=0&&(D=e.GPOS.readValueRecord(i,b,p),b+=2*m),v!=0&&(B=e.GPOS.readValueRecord(i,b,v),b+=2*_),O.push({gid2:A,val1:D,val2:B})}u.pairsets.push(O)}}if(u.fmt==2){var k=l.readUshort(i,o);o+=2;var R=l.readUshort(i,o);o+=2;var P=l.readUshort(i,o);o+=2;var L=l.readUshort(i,o);for(o+=2,u.classDef1=e._lctf.readClassDef(i,c+k),u.classDef2=e._lctf.readClassDef(i,c+R),u.matrix=[],w=0;w<P;w++){var I=[];for(T=0;T<L;T++){var D=null,B=null;p!=0&&(D=e.GPOS.readValueRecord(i,o,p),o+=2*m),v!=0&&(B=e.GPOS.readValueRecord(i,o,v),o+=2*_),I.push({val1:D,val2:B})}u.matrix.push(I)}}}else{if(s==9&&u.fmt==1){var z=l.readUshort(i,o);o+=2;var V=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=z;else if(a.ltype!=z)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,c+V)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,c+d)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,o),o+=2;else if(u.fmt==2){var p=l.readUshort(i,o);o+=2,u.newg=l.readUshorts(i,o,p),o+=2*u.newg.length}}else if(s==4){u.vals=[],p=l.readUshort(i,o),o+=2;for(var m=0;m<p;m++){var v=l.readUshort(i,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+v))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var _=l.readUshort(i,o);o+=2,u.cDef=e._lctf.readClassDef(i,c+_),u.scset=[];var y=l.readUshort(i,o);for(o+=2,m=0;m<y;m++){var w=l.readUshort(i,o);o+=2,u.scset.push(w==0?null:e.GSUB.readSubClassSet(i,c+w))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(m=0;m<3;m++){p=l.readUshort(i,o),o+=2;for(var b=[],C=0;C<p;C++)b.push(e._lctf.readCoverage(i,c+l.readUshort(i,o+2*C)));o+=2*p,m==0&&(u.backCvg=b),m==1&&(u.inptCvg=b),m==2&&(u.ahedCvg=b)}p=l.readUshort(i,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,o,p)}}else{if(s==7&&u.fmt==1){var O=l.readUshort(i,o);o+=2;var T=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=O;else if(a.ltype!=O)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,c+T)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],c=o(i,s);s+=2;for(var u=0;u<c;u++){var d=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+d))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),c=o(i,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+d))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(i,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(i,s,u),s+=2*a[l[c]].length}return u=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+d))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,p=0;p<a.maxp.numGlyphs;p++)p<a.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,d=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,o,a);var u=l.readUshort(i,s);s+=2;for(var d={glyph1:[],rval:[]},p=0;p<u;p++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var v=m>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(i,s,d)}return d},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(i,s),s+=4;var p=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var d=a.readUshort(i,s);s+=2;var p=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(p),v.vals.push(m),l=d}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(u==0)for(var p=0;p<d;p++)c.push(l.readUshort(i,s+(p<<1))<<1);if(u==1)for(p=0;p<d;p++)c.push(l.readUint(i,s+(p<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},c=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=s+=2,m=0;m<c;m++){var v=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var b=a.readUshort(i,s);s+=2;var C=a.readUshort(i,s);s+=2;var O,T=d[w],A=p+12*c+C;if(v==0)O=a.readUnicode(i,A,b/2);else if(v==3&&_==0)O=a.readUnicode(i,A,b/2);else if(_==0)O=a.readASCII(i,A,b);else if(_==1)O=a.readUnicode(i,A,b/2);else if(_==3)O=a.readUnicode(i,A,b/2);else{if(v!=1)throw"unknown encoding "+_+", platformID: "+v;O=a.readASCII(i,A,b),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var k="p"+v+","+y.toString(16);l[k]==null&&(l[k]={}),l[k][T!==void 0?T:w]=O,l[k]._lang=y}for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==1033)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==0)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==3084)return l[R];for(var R in l)if(l[R].postScriptName!=null)return l[R];for(var R in l){u=R;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,d=c==l?a:c+1,p=1&i.flags[c],m=1&i.flags[u],v=1&i.flags[d],_=i.xs[c],y=i.ys[c];if(c==a)if(p){if(!m){e.U.P.moveTo(s,_,y);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else m?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+_)/2,(i.ys[u]+y)/2);p?m&&e.U.P.lineTo(s,_,y):v?e.U.P.qcurveTo(s,_,y,i.xs[d],i.ys[d]):e.U.P.qcurveTo(s,_,y,(_+i.xs[d])/2,(y+i.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},c=i.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var p=l.crds[d],m=l.crds[d+1];o.crds.push(p*u.a+m*u.b+u.tx),o.crds.push(p*u.c+m*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,d=[],p=0;p<u.length;p++){var m=u[p];if(m.tag=="kern"){a=!0;for(var v=0;v<m.tab.length;v++)if(!d[m.tab[v]]){d[m.tab[v]]=!0;for(var _=c[m.tab[v]],y=0;y<_.tabs.length;y++)if(_.tabs[y]!=null){var w,b=_.tabs[y];if((!b.coverage||(w=e._lctf.coverageIndex(b.coverage,s))!=-1)&&_.ltype!=1){if(_.ltype==2){var C=null;if(b.fmt==1){var O=b.pairsets[w];for(p=0;p<O.length;p++)O[p].gid2==o&&(C=O[p])}else if(b.fmt==2){var T=e.U._getGlyphClass(s,b.classDef1),A=e.U._getGlyphClass(o,b.classDef2);C=b.matrix[T][A]}if(C){var k=0;return C.val1&&C.val1[2]&&(k+=C.val1[2]),C.val2&&C.val2[0]&&(k+=C.val2[0]),k}}}}}}}if(i.kern&&!a){var R=i.kern.glyph1.indexOf(s);if(R!=-1){var P=i.kern.rval[R].glyph2.indexOf(o);if(P!=-1)return i.kern.rval[R].vals[P]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,d=o.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,i[s]))!=-1){if(o.ltype==1)i[s],d.fmt==1?i[s]=i[s]+d.delta:i[s]=d.newg[u];else if(o.ltype==4)for(var p=d.vals[u],m=0;m<p.length;m++){var v=p[m],_=v.chain.length;if(!(_>l)){for(var y=!0,w=0,b=0;b<_;b++){for(;i[s+w+(1+b)]==-1;)w++;v.chain[b]!=i[s+w+(1+b)]&&(y=!1)}if(y){for(i[s]=v.nglyph,b=0;b<_+w;b++)i[s+b+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var C=e._lctf.getInterval(d.cDef,i[s]),O=d.cDef[C+2],T=d.scset[O],A=0;A<T.length;A++){var k=T[A],R=k.input;if(!(R.length>l)){for(y=!0,b=0;b<R.length;b++){var P=e._lctf.getInterval(d.cDef,i[s+1+b]);if(C==-1&&d.cDef[P+2]!=R[b]){y=!1;break}}if(y){var L=k.substLookupRecords;for(m=0;m<L.length;m+=2)L[m],L[m+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(i,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(i,d.inptCvg,s)||!e.U._glsCovered(i,d.ahedCvg,s+d.inptCvg.length))continue;var I=d.lookupRec;for(A=0;A<I.length;A+=2){C=I[A];var D=a[I[A+1]];e.U._applySubs(i,s+C,D,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,p=e.U.glyphToPath(i,u),m=0;m<p.crds.length;m+=2)a.crds.push(p.crds[m]+l),a.crds.push(p.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<p.cmds.length;m++)a.cmds.push(p.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,d))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,c,u){i.cmds.push("C"),i.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var c=s.stack,u=s.nStems,d=s.haveWidth,p=s.width,m=s.open,v=0,_=s.x,y=s.y,w=0,b=0,C=0,O=0,T=0,A=0,k=0,R=0,P=0,L=0,I={val:0,size:0};v<i.length;){e.CFF.getCharString(i,v,I);var D=I.val;if(v+=I.size,D=="o1"||D=="o18")c.length%2!=0&&!d&&(p=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(D=="o3"||D=="o23")c.length%2!=0&&!d&&(p=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(D=="o4")c.length>1&&!d&&(p=c.shift()+a.nominalWidthX,d=!0),m&&e.U.P.closePath(l),y+=c.pop(),e.U.P.moveTo(l,_,y),m=!0;else if(D=="o5")for(;c.length>0;)_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y);else if(D=="o6"||D=="o7")for(var B=c.length,z=D=="o6",V=0;V<B;V++){var $=c.shift();z?_+=$:y+=$,z=!z,e.U.P.lineTo(l,_,y)}else if(D=="o8"||D=="o24"){B=c.length;for(var K=0;K+6<=B;)w=_+c.shift(),b=y+c.shift(),C=w+c.shift(),O=b+c.shift(),_=C+c.shift(),y=O+c.shift(),e.U.P.curveTo(l,w,b,C,O,_,y),K+=6;D=="o24"&&(_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y))}else{if(D=="o11")break;if(D=="o1234"||D=="o1235"||D=="o1236"||D=="o1237")D=="o1234"&&(b=y,C=(w=_+c.shift())+c.shift(),L=O=b+c.shift(),A=O,R=y,_=(k=(T=(P=C+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,w,b,C,O,P,L),e.U.P.curveTo(l,T,A,k,R,_,y)),D=="o1235"&&(w=_+c.shift(),b=y+c.shift(),C=w+c.shift(),O=b+c.shift(),P=C+c.shift(),L=O+c.shift(),T=P+c.shift(),A=L+c.shift(),k=T+c.shift(),R=A+c.shift(),_=k+c.shift(),y=R+c.shift(),c.shift(),e.U.P.curveTo(l,w,b,C,O,P,L),e.U.P.curveTo(l,T,A,k,R,_,y)),D=="o1236"&&(w=_+c.shift(),b=y+c.shift(),C=w+c.shift(),L=O=b+c.shift(),A=O,k=(T=(P=C+c.shift())+c.shift())+c.shift(),R=A+c.shift(),_=k+c.shift(),e.U.P.curveTo(l,w,b,C,O,P,L),e.U.P.curveTo(l,T,A,k,R,_,y)),D=="o1237"&&(w=_+c.shift(),b=y+c.shift(),C=w+c.shift(),O=b+c.shift(),P=C+c.shift(),L=O+c.shift(),T=P+c.shift(),A=L+c.shift(),k=T+c.shift(),R=A+c.shift(),Math.abs(k-_)>Math.abs(R-y)?_=k+c.shift():y=R+c.shift(),e.U.P.curveTo(l,w,b,C,O,P,L),e.U.P.curveTo(l,T,A,k,R,_,y));else if(D=="o14"){if(c.length>0&&!d&&(p=c.shift()+o.nominalWidthX,d=!0),c.length==4){var G=c.shift(),H=c.shift(),q=c.shift(),F=c.shift(),W=e.CFF.glyphBySE(o,q),ee=e.CFF.glyphBySE(o,F);e.U._drawCFF(o.CharStrings[W],s,o,a,l),s.x=G,s.y=H,e.U._drawCFF(o.CharStrings[ee],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(D=="o19"||D=="o20")c.length%2!=0&&!d&&(p=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,v+=u+7>>3;else if(D=="o21")c.length>2&&!d&&(p=c.shift()+a.nominalWidthX,d=!0),y+=c.pop(),_+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,y),m=!0;else if(D=="o22")c.length>1&&!d&&(p=c.shift()+a.nominalWidthX,d=!0),_+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,y),m=!0;else if(D=="o25"){for(;c.length>6;)_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y);w=_+c.shift(),b=y+c.shift(),C=w+c.shift(),O=b+c.shift(),_=C+c.shift(),y=O+c.shift(),e.U.P.curveTo(l,w,b,C,O,_,y)}else if(D=="o26")for(c.length%2&&(_+=c.shift());c.length>0;)w=_,b=y+c.shift(),_=C=w+c.shift(),y=(O=b+c.shift())+c.shift(),e.U.P.curveTo(l,w,b,C,O,_,y);else if(D=="o27")for(c.length%2&&(y+=c.shift());c.length>0;)b=y,C=(w=_+c.shift())+c.shift(),O=b+c.shift(),_=C+c.shift(),y=O,e.U.P.curveTo(l,w,b,C,O,_,y);else if(D=="o10"||D=="o29"){var ne=D=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var Z=c.pop(),oe=ne.Subrs[Z+ne.Bias];s.x=_,s.y=y,s.nStems=u,s.haveWidth=d,s.width=p,s.open=m,e.U._drawCFF(oe,s,o,a,l),_=s.x,y=s.y,u=s.nStems,d=s.haveWidth,p=s.width,m=s.open}}else if(D=="o30"||D=="o31"){var re=c.length,Q=(K=0,D=="o31");for(K+=re-(B=-3&re);K<B;)Q?(b=y,C=(w=_+c.shift())+c.shift(),y=(O=b+c.shift())+c.shift(),B-K==5?(_=C+c.shift(),K++):_=C,Q=!1):(w=_,b=y+c.shift(),C=w+c.shift(),O=b+c.shift(),_=C+c.shift(),B-K==5?(y=O+c.shift(),K++):y=O,Q=!0),e.U.P.curveTo(l,w,b,C,O,_,y),K+=4}else{if((D+"").charAt(0)=="o")throw console.debug("Unknown operation: "+D,i),D;c.push(D)}}}s.x=_,s.y=y,s.nStems=u,s.haveWidth=d,s.width=p,s.open=m};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function zA(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(D,B){for(var z=new t(31),V=0;V<31;++V)z[V]=B+=1<<D[V-1];var $=new r(z[30]);for(V=1;V<30;++V)for(var K=z[V];K<z[V+1];++K)$[K]=K-z[V]<<5|V;return[z,$]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=a(s,0)[0],p=new t(32768),m=0;m<32768;++m){var v=(43690&m)>>>1|(21845&m)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,p[m]=((65280&v)>>>8|(255&v)<<8)>>>1}var _=function(D,B,z){for(var V=D.length,$=0,K=new t(B);$<V;++$)++K[D[$]-1];var G,H=new t(B);for($=0;$<B;++$)H[$]=H[$-1]+K[$-1]<<1;if(z){G=new t(1<<B);var q=15-B;for($=0;$<V;++$)if(D[$])for(var F=$<<4|D[$],W=B-D[$],ee=H[D[$]-1]++<<W,ne=ee|(1<<W)-1;ee<=ne;++ee)G[p[ee]>>>q]=F}else for(G=new t(V),$=0;$<V;++$)D[$]&&(G[$]=p[H[D[$]-1]++]>>>15-D[$]);return G},y=new e(288);for(m=0;m<144;++m)y[m]=8;for(m=144;m<256;++m)y[m]=9;for(m=256;m<280;++m)y[m]=7;for(m=280;m<288;++m)y[m]=8;var w=new e(32);for(m=0;m<32;++m)w[m]=5;var b=_(y,9,1),C=_(w,5,1),O=function(D){for(var B=D[0],z=1;z<D.length;++z)D[z]>B&&(B=D[z]);return B},T=function(D,B,z){var V=B/8|0;return(D[V]|D[V+1]<<8)>>(7&B)&z},A=function(D,B){var z=B/8|0;return(D[z]|D[z+1]<<8|D[z+2]<<16)>>(7&B)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(D,B,z){var V=new Error(B||k[D]);if(V.code=D,Error.captureStackTrace&&Error.captureStackTrace(V,R),!z)throw V;return V},P=function(D,B,z){var V=D.length;if(!V||z&&!z.l&&V<5)return B||new e(0);var $=!B||z,K=!z||z.i;z||(z={}),B||(B=new e(3*V));var G,H=function(Fe){var ot=B.length;if(Fe>ot){var ct=new e(Math.max(2*ot,Fe));ct.set(B),B=ct}},q=z.f||0,F=z.p||0,W=z.b||0,ee=z.l,ne=z.d,Z=z.m,oe=z.n,re=8*V;do{if(!ee){z.f=q=T(D,F,1);var Q=T(D,F+1,3);if(F+=3,!Q){var _e=D[(me=((G=F)/8|0)+(7&G&&1)+4)-4]|D[me-3]<<8,xe=me+_e;if(xe>V){K&&R(0);break}$&&H(W+_e),B.set(D.subarray(me,xe),W),z.b=W+=_e,z.p=F=8*xe;continue}if(Q==1)ee=b,ne=C,Z=9,oe=5;else if(Q==2){var ce=T(D,F,31)+257,ue=T(D,F+10,15)+4,Ee=ce+T(D,F+5,31)+1;F+=14;for(var Ie=new e(Ee),J=new e(19),de=0;de<ue;++de)J[o[de]]=T(D,F+3*de,7);F+=3*ue;var be=O(J),fe=(1<<be)-1,ge=_(J,be,1);for(de=0;de<Ee;){var me,he=ge[T(D,F,fe)];if(F+=15&he,(me=he>>>4)<16)Ie[de++]=me;else{var Ae=0,ie=0;for(me==16?(ie=3+T(D,F,3),F+=2,Ae=Ie[de-1]):me==17?(ie=3+T(D,F,7),F+=3):me==18&&(ie=11+T(D,F,127),F+=7);ie--;)Ie[de++]=Ae}}var pe=Ie.subarray(0,ce),we=Ie.subarray(ce);Z=O(pe),oe=O(we),ee=_(pe,Z,1),ne=_(we,oe,1)}else R(1);if(F>re){K&&R(0);break}}$&&H(W+131072);for(var Be=(1<<Z)-1,Ne=(1<<oe)-1,Re=F;;Re=F){var He=(Ae=ee[A(D,F)&Be])>>>4;if((F+=15&Ae)>re){K&&R(0);break}if(Ae||R(2),He<256)B[W++]=He;else{if(He==256){Re=F,ee=null;break}var it=He-254;if(He>264){var It=i[de=He-257];it=T(D,F,(1<<It)-1)+c[de],F+=It}var Ge=ne[A(D,F)&Ne],ut=Ge>>>4;if(Ge||R(3),F+=15&Ge,we=d[ut],ut>3&&(It=s[ut],we+=A(D,F)&(1<<It)-1,F+=It),F>re){K&&R(0);break}$&&H(W+131072);for(var Ze=W+it;W<Ze;W+=4)B[W]=B[W-we],B[W+1]=B[W+1-we],B[W+2]=B[W+2-we],B[W+3]=B[W+3-we];W=Ze}}z.l=ee,z.p=Re,z.b=W,ee&&(q=1,z.m=Z,z.d=ne,z.n=oe)}while(!q);return W==B.length?B:function(Fe,ot,ct){(ot==null||ot<0)&&(ot=0),(ct==null||ct>Fe.length)&&(ct=Fe.length);var Vt=new(Fe instanceof t?t:Fe instanceof r?r:e)(ct-ot);return Vt.set(Fe.subarray(ot,ct)),Vt}(B,0,W)},L=new e(0),I=typeof TextDecoder<"u"&&new TextDecoder;try{I.decode(L,{stream:!0})}catch{}return n.convert_streams=function(D){var B=new DataView(D),z=0;function V(){var ce=B.getUint16(z);return z+=2,ce}function $(){var ce=B.getUint32(z);return z+=4,ce}function K(ce){_e.setUint16(xe,ce),xe+=2}function G(ce){_e.setUint32(xe,ce),xe+=4}for(var H={signature:$(),flavor:$(),length:$(),numTables:V(),reserved:V(),totalSfntSize:$(),majorVersion:V(),minorVersion:V(),metaOffset:$(),metaLength:$(),metaOrigLength:$(),privOffset:$(),privLength:$()},q=0;Math.pow(2,q)<=H.numTables;)q++;q--;for(var F=16*Math.pow(2,q),W=16*H.numTables-F,ee=12,ne=[],Z=0;Z<H.numTables;Z++)ne.push({tag:$(),offset:$(),compLength:$(),origLength:$(),origChecksum:$()}),ee+=16;var oe,re=new Uint8Array(12+16*ne.length+ne.reduce(function(ce,ue){return ce+ue.origLength+4},0)),Q=re.buffer,_e=new DataView(Q),xe=0;return G(H.flavor),K(H.numTables),K(F),K(q),K(W),ne.forEach(function(ce){G(ce.tag),G(ce.origChecksum),G(ee),G(ce.origLength),ce.outOffset=ee,(ee+=ce.origLength)%4!=0&&(ee+=4-ee%4)}),ne.forEach(function(ce){var ue,Ee=D.slice(ce.offset,ce.offset+ce.compLength);if(ce.compLength!=ce.origLength){var Ie=new Uint8Array(ce.origLength);ue=new Uint8Array(Ee,2),P(ue,Ie)}else Ie=new Uint8Array(Ee);re.set(Ie,ce.outOffset);var J=0;(ee=ce.outOffset+ce.origLength)%4!=0&&(J=4-ee%4),re.set(new Uint8Array(J).buffer,ce.outOffset+ce.origLength),oe=ee+J}),Q.slice(0,oe)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function BA(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,c=32;let u;function d(T){if(!u){const A={R:s,L:i,D:o,C:l,U:c,T:a};u=new Map;for(let k in r){let R=0;r[k].split(",").forEach(P=>{let[L,I]=P.split("+");L=parseInt(L,36),I=I?parseInt(I,36):0,u.set(R+=L,A[k]);for(let D=I;D--;)u.set(++R,A[k])})}}return u.get(T)||c}const p=1,m=2,v=3,_=4,y=[null,"isol","init","fina","medi"];function w(T){const A=new Uint8Array(T.length);let k=c,R=p,P=-1;for(let L=0;L<T.length;L++){const I=T.codePointAt(L);let D=d(I)|0,B=p;D&a||(k&(i|o|l)?D&(s|o|l)?(B=v,(R===p||R===v)&&A[P]++):D&(i|c)&&(R===m||R===_)&&A[P]--:k&(s|c)&&(R===m||R===_)&&A[P]--,R=A[L]=B,k=D,P=L,I>65535&&L++)}return A}function b(T,A){const k=[];for(let P=0;P<A.length;P++){const L=A.codePointAt(P);L>65535&&P++,k.push(n.U.codeToGlyph(T,L))}const R=T.GSUB;if(R){const{lookupList:P,featureList:L}=R;let I;const D=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,B=[];L.forEach(z=>{if(D.test(z.tag))for(let V=0;V<z.tab.length;V++){if(B[z.tab[V]])continue;B[z.tab[V]]=!0;const $=P[z.tab[V]],K=/^(isol|init|fina|medi)$/.test(z.tag);K&&!I&&(I=w(A));for(let G=0;G<k.length;G++)(!I||!K||y[I[G]]===z.tag)&&n.U._applySubs(k,G,$,P)}})}return k}function C(...T){for(let A=0;A<T.length;A++)if(typeof T[A]=="number")return T[A]}function O(T){const A=Object.create(null),k=T["OS/2"],R=T.hhea,P=T.head.unitsPerEm,L=C(k&&k.sTypoAscender,R&&R.ascender,P),I={unitsPerEm:P,ascender:L,descender:C(k&&k.sTypoDescender,R&&R.descender,0),capHeight:C(k&&k.sCapHeight,L),xHeight:C(k&&k.sxHeight,L),lineGap:C(k&&k.sTypoLineGap,R&&R.lineGap),forEachGlyph(D,B,z,V){let $=0;const K=1/I.unitsPerEm*B,G=b(T,D);let H=0,q=-1;return G.forEach((F,W)=>{if(F!==-1){let ee=A[F];if(!ee){const{cmds:ne,crds:Z}=n.U.glyphToPath(T,F);let oe="",re=0;for(let ue=0,Ee=ne.length;ue<Ee;ue++){const Ie=t[ne[ue]];oe+=ne[ue];for(let J=1;J<=Ie;J++)oe+=(J>1?",":"")+Z[re++]}let Q,_e,xe,ce;if(Z.length){Q=_e=1/0,xe=ce=-1/0;for(let ue=0,Ee=Z.length;ue<Ee;ue+=2){let Ie=Z[ue],J=Z[ue+1];Ie<Q&&(Q=Ie),J<_e&&(_e=J),Ie>xe&&(xe=Ie),J>ce&&(ce=J)}}else Q=xe=_e=ce=0;ee=A[F]={index:F,advanceWidth:T.hmtx.aWidth[F],xMin:Q,yMin:_e,xMax:xe,yMax:ce,path:oe,pathCommandCount:ne.length}}q!==-1&&($+=n.U.getPairAdjustment(T,q,F)*K),V.call(null,ee,$,H),ee.advanceWidth&&($+=ee.advanceWidth*K),z&&($+=z*B),q=F}H+=D.codePointAt(H)>65535?2:1}),$}};return I}return function(A){const k=new Uint8Array(A,0,4),R=n._bin.readASCII(k,0,4);if(R==="wOFF")A=e(A);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return O(n.parse(A)[0])}}const jA=Xf({name:"Typr Font Parser",dependencies:[UA,zA,BA],init(n,e,t){const r=n(),i=e();return t(r,i)}}),ec={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},$A=new xr;function Ul(){return(self.performance||Date).now()}const z2=Object.create(null);function AS(n,e){n=WA({},n);const t=Ul();if(n.font=GA(n.font||ec.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||ec.sdfGlyphSize,n.colorRanges!=null){let d={};for(let p in n.colorRanges)if(n.colorRanges.hasOwnProperty(p)){let m=n.colorRanges[p];typeof m!="number"&&(m=$A.set(m).getHex()),d[p]=m}n.colorRanges=d}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=ec,{sdfGlyphSize:s}=n,o=r/s*4;let a=z2[s];if(!a){const d=document.createElement("canvas");d.width=r,d.height=s*256/o,a=z2[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:d,sdfTexture:new jf(d,void 0,void 0,void 0,gc,gc),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,VA(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(n.font);u||a.glyphsByFont.set(n.font,u=new Map),YA(n).then(d=>{const{glyphIds:p,glyphPositions:m,fontSize:v,unitsPerEm:_,timings:y}=d,w=[],b=new Float32Array(p.length*4),C=v/_;let O=0,T=0;const A=Ul();p.forEach((I,D)=>{let B=u.get(I);if(!B){const{path:K,pathBounds:G}=d.glyphData[I],H=Math.max(G[2]-G[0],G[3]-G[1])/s*(ec.sdfMargin*s+.5),q=a.glyphCount++,F=[G[0]-H,G[1]-H,G[2]+H,G[3]+H];u.set(I,B={path:K,atlasIndex:q,sdfViewBox:F}),w.push(B)}const{sdfViewBox:z}=B,V=m[T++],$=m[T++];b[O++]=V+z[0]*C,b[O++]=$+z[1]*C,b[O++]=V+z[2]*C,b[O++]=$+z[3]*C,p[D]=B.atlasIndex}),y.quads=(y.quads||0)+(Ul()-A);const k=Ul();y.sdf={};const R=c.height,P=Math.ceil(a.glyphCount/o),L=Math.pow(2,Math.ceil(Math.log2(P*s)));L>R&&(console.info(`Increasing SDF texture size ${R}->${L}`),FA(c,r,L),l.dispose()),Promise.all(w.map(I=>RS(I,a,n.gpuAccelerateSDF).then(({timing:D})=>{y.sdf[I.atlasIndex]=D}))).then(()=>{w.length&&!a.contextLost&&(MS(a),l.needsUpdate=!0),y.sdfTotal=Ul()-k,y.total=Ul()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:b,glyphAtlasIndices:p,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{a.contextLost||LA(c)})}function RS({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=ec,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),d=u%(a/r)*r,p=Math.floor(u/(a/r))*r,m=e%4;return RA(r,r,n,t,c,l,i,d,p,m,o)}function VA(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(RS(s,n,!0))})}),Promise.all(r).then(()=>{MS(n),n.sdfTexture.needsUpdate=!0})})}function HA({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;AS({font:n,sdfGlyphSize:t,text:i},r)}function WA(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let md;function GA(n){return md||(md=typeof document>"u"?{}:document.createElement("a")),md.href=n,md.href}function MS(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const qA=Xf({name:"Typesetter",dependencies:[ec,jA,AA,wA],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),YA=Xf({name:"Typesetter",dependencies:[qA],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),B2={};function ZA(n){let e=B2[n];if(!e){const t=new Lv(1,1,n,n),r=t.clone(),i=t.attributes,s=r.attributes,o=new Pv,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Yd([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...t.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=B2[n]=o}return e}const XA="aTroikaGlyphBounds",j2="aTroikaGlyphIndex",KA="aTroikaGlyphColor";class QA extends bb{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Iv,this.boundingBox=new Vp}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===qu?t/2:0,e===Bo?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=ZA(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){Dg(this,XA,e,4),Dg(this,j2,t,1),Dg(this,KA,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=i/2,d=i*2,p=Math.abs(t),m=e[0]/p,v=e[2]/p,_=s((m+u)/d)!==s((v+u)/d)?-p:o(l(m)*p,l(v)*p),y=s((m-u)/d)!==s((v-u)/d)?p:a(l(m)*p,l(v)*p),w=s((m+i)/d)!==s((v+i)/d)?p*2:a(p-c(m)*p,p-c(v)*p);r.min.set(_,e[1],t<0?-w:0),r.max.set(y,e[3],t<0?0:w)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(j2).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function Dg(n,e,t,r){const i=n.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(n.setAttribute(e,new W5(t,r)),delete n._maxInstanceCount,n.dispose()):i&&n.deleteAttribute(e)}const JA=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,eR=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,tR=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,nR=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function rR(n){const e=k0(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ct},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Zo(0,0,0,0)},uTroikaClipRect:{value:new Zo(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ct},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new xr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new G5},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:JA,vertexTransform:eR,fragmentDefs:tR,fragmentColorTransform:nR,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(OS,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Qv=new q5({color:16777215,side:Bo,transparent:!0}),$2=8421504,V2=new ol,gd=new Te,Ig=new Te,Du=[],iR=new Te,Ng="+x+y";function H2(n){return Array.isArray(n)?n[0]:n}let PS=()=>{const n=new al(new Lv(1,1),Qv);return PS=()=>n,n},DS=()=>{const n=new al(new Lv(1,1,32,1),Qv);return DS=()=>n,n};const sR={type:"syncstart"},oR={type:"synccomplete"},IS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],aR=IS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let NS=class extends al{constructor(){const e=new QA;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=$2,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Ng,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(sR),AS({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(oR),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Tb}onAfterRender(e,t,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Qv.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=rR(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return H2(this.material).getDepthMaterial()}get customDistanceMaterial(){return H2(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let c=0,u=0,d=0,p,m,v,_=0,y=0;if(t){let{outlineWidth:b,outlineOffsetX:C,outlineOffsetY:O,outlineBlur:T,outlineOpacity:A}=this;c=this._parsePercent(b)||0,u=Math.max(0,this._parsePercent(T)||0),p=A,_=this._parsePercent(C)||0,y=this._parsePercent(O)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(v=this.strokeColor,r.uTroikaStrokeColor.value.set(v??$2),m=this.strokeOpacity,m==null&&(m=1)),p=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(_,y),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=d,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=p??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)r.uTroikaClipRect.value.fromArray(w);else{const b=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-b,l[1]-b,l[2]+b,l[3]+b)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new xr;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||Ng;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==Ng&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,d,p]=l;gd.set(0,0,0)[u]=c==="-"?1:-1,Ig.set(0,0,0)[p]=d==="-"?-1:1,V2.lookAt(iR,gd.cross(Ig),Ig),a.setFromMatrix4(V2)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ct){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new Ct){return gd.copy(e),this.localPositionToTextCoords(this.worldToLocal(gd),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?DS():PS(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let d=s[0]+c.getX(u)*(s[2]-s[0]);const p=s[1]+c.getY(u)*(s[3]-s[1]);let m=0;i&&(m=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),l.setXYZ(u,d,p,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Du.length=0,o.raycast(e,Du);for(let u=0;u<Du.length;u++)Du[u].object=this,t.push(Du[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,aR.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};IS.forEach(n=>{const e="_private_"+n;Object.defineProperty(NS.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});function lR(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}const vd=[];function cR(n,e,t=!1,r={}){for(const s of vd)if(lR(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,promise:n(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=vd.indexOf(i);s!==-1&&vd.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(vd.push(i),!t)throw i.promise}const uR=(n,e,t)=>cR(n,e,!1,t),R0=S.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:r=1,children:i,characters:s,onSync:o,...a},l)=>{const c=mt(({invalidate:m})=>m),[u]=S.useState(()=>new NS),[d,p]=S.useMemo(()=>{const m=[];let v="";return S.Children.forEach(i,_=>{typeof _=="string"||typeof _=="number"?v+=_:m.push(_)}),[m,v]},[i]);return uR(()=>new Promise(m=>HA({font:t,characters:s},m)),["troika-text",t,s]),S.useLayoutEffect(()=>void u.sync(()=>{c(),o&&o(u)})),S.useEffect(()=>()=>u.dispose(),[u]),S.createElement("primitive",bt({object:u,ref:l,font:t,text:p,anchorX:n,anchorY:e,fontSize:r},a),d)}),W2=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function $a(n,e){const t=mt(i=>i.gl),r=Gf(Wp,W2(n)?Object.values(n):n);if(S.useLayoutEffect(()=>{e==null||e(r)},[e]),S.useEffect(()=>{(Array.isArray(r)?r:[r]).forEach(t.initTexture)},[t,r]),W2(n)){const i=Object.keys(n),s={};return i.forEach(o=>Object.assign(s,{[o]:r[i.indexOf(o)]})),s}else return r}$a.preload=n=>Gf.preload(Wp,n);$a.clear=n=>Gf.clear(Wp,n);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const We={LEFT:1,RIGHT:2,MIDDLE:4},le=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),zl={NONE:0,IN:1,OUT:-1};function ka(n){return n.isPerspectiveCamera}function Fo(n){return n.isOrthographicCamera}const Bl=Math.PI*2,G2=Math.PI/2,LS=1e-5,Iu=Math.PI/180;function $i(n,e,t){return Math.max(e,Math.min(t,n))}function Nt(n,e=LS){return Math.abs(n)<e}function yt(n,e,t=LS){return Nt(n-e,t)}function q2(n,e){return Math.round(n/e)*e}function Nu(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Lu(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function _d(n,e,t,r,i=1/0,s){r=Math.max(1e-4,r);const o=2/r,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const u=e,d=i*r;c=$i(c,-d,d),e=n-c;const p=(t.value+o*c)*s;t.value=(t.value-o*p)*l;let m=e+(c+p)*l;return u-n>0==m>u&&(m=u,t.value=(m-u)/s),m}function Y2(n,e,t,r,i=1/0,s,o){r=Math.max(1e-4,r);const a=2/r,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,d=e.y,p=e.z,m=n.x-u,v=n.y-d,_=n.z-p;const y=u,w=d,b=p,C=i*r,O=C*C,T=m*m+v*v+_*_;if(T>O){const V=Math.sqrt(T);m=m/V*C,v=v/V*C,_=_/V*C}u=n.x-m,d=n.y-v,p=n.z-_;const A=(t.x+a*m)*s,k=(t.y+a*v)*s,R=(t.z+a*_)*s;t.x=(t.x-a*A)*c,t.y=(t.y-a*k)*c,t.z=(t.z-a*R)*c,o.x=u+(m+A)*c,o.y=d+(v+k)*c,o.z=p+(_+R)*c;const P=y-n.x,L=w-n.y,I=b-n.z,D=o.x-y,B=o.y-w,z=o.z-b;return P*D+L*B+I*z>0&&(o.x=y,o.y=w,o.z=b,t.x=(o.x-y)/s,t.y=(o.y-w)/s,t.z=(o.z-b)/s),o}function Lg(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Fg(n,e){return Fo(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class fR{constructor(){this._listeners={}}addEventListener(e,t){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e)}}}const hR="2.7.3",yd=1/8,FS=typeof window<"u",dR=FS&&/Mac/.test(navigator.platform),pR=!(FS&&"PointerEvent"in window);let $e,Z2,xd,Ug,Rr,Qe,dt,jl,Fu,vs,_s,Aa,X2,K2,yi,Uu,$l,Q2,zg,J2,Bg,jg,wd,$g=class M0 extends fR{static install(e){$e=e.THREE,Z2=Object.freeze(new $e.Vector3(0,0,0)),xd=Object.freeze(new $e.Vector3(0,1,0)),Ug=Object.freeze(new $e.Vector3(0,0,1)),Rr=new $e.Vector2,Qe=new $e.Vector3,dt=new $e.Vector3,jl=new $e.Vector3,Fu=new $e.Vector3,vs=new $e.Vector3,_s=new $e.Vector3,Aa=new $e.Vector3,X2=new $e.Vector3,K2=new $e.Vector3,yi=new $e.Spherical,Uu=new $e.Spherical,$l=new $e.Box3,Q2=new $e.Box3,zg=new $e.Sphere,J2=new $e.Quaternion,Bg=new $e.Quaternion,jg=new $e.Matrix4,wd=new $e.Raycaster}static get ACTION(){return le}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=le.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=zl.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new $e.Vector3,this._focalOffsetVelocity=new $e.Vector3,this._zoomVelocity={value:0},this._truckInternal=(O,T,A)=>{let k,R;if(ka(this._camera)){const P=Qe.copy(this._camera.position).sub(this._target),L=this._camera.getEffectiveFOV()*Iu,I=P.length()*Math.tan(L*.5);k=this.truckSpeed*O*I/this._elementRect.height,R=this.truckSpeed*T*I/this._elementRect.height}else if(Fo(this._camera)){const P=this._camera;k=O*(P.right-P.left)/P.zoom/this._elementRect.width,R=T*(P.top-P.bottom)/P.zoom/this._elementRect.height}else return;this.verticalDragToForward?(A?this.setFocalOffset(this._focalOffsetEnd.x+k,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(k,0,!0),this.forward(-R,!0)):A?this.setFocalOffset(this._focalOffsetEnd.x+k,this._focalOffsetEnd.y+R,this._focalOffsetEnd.z,!0):this.truck(k,R,!0)},this._rotateInternal=(O,T)=>{const A=Bl*this.azimuthRotateSpeed*O/this._elementRect.height,k=Bl*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(A,k,!0)},this._dollyInternal=(O,T,A)=>{const k=Math.pow(.95,-O*this.dollySpeed),R=this._sphericalEnd.radius,P=this._sphericalEnd.radius*k,L=$i(P,this.minDistance,this.maxDistance),I=L-P;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(P,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(I,!0),this._dollyToNoClamp(L,!0)):this._dollyToNoClamp(L,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?P:L)-R,this._dollyControlCoord.set(T,A)),this._lastDollyDirection=Math.sign(-O)},this._zoomInternal=(O,T,A)=>{const k=Math.pow(.95,O*this.dollySpeed),R=this._zoom,P=this._zoom*k;this.zoomTo(P,!0),this.dollyToCursor&&(this._changedZoom+=P-R,this._dollyControlCoord.set(T,A))},typeof $e>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new $e.Quaternion().setFromUnitVectors(this._camera.up,xd),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=le.NONE,this._target=new $e.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new $e.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new $e.Spherical().setFromVector3(Qe.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new $e.Vector3,new $e.Vector3,new $e.Vector3,new $e.Vector3],this._updateNearPlaneCorners(),this._boundary=new $e.Box3(new $e.Vector3(-1/0,-1/0,-1/0),new $e.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new $e.Vector2,this.mouseButtons={left:le.ROTATE,middle:le.DOLLY,right:le.TRUCK,wheel:ka(this._camera)?le.DOLLY:Fo(this._camera)?le.ZOOM:le.NONE},this.touches={one:le.TOUCH_ROTATE,two:ka(this._camera)?le.TOUCH_DOLLY_TRUCK:Fo(this._camera)?le.TOUCH_ZOOM_TRUCK:le.NONE,three:le.TOUCH_TRUCK};const r=new $e.Vector2,i=new $e.Vector2,s=new $e.Vector2,o=O=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const k=this._domElement.getBoundingClientRect(),R=O.clientX/k.width,P=O.clientY/k.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||P<this._interactiveArea.top||P>this._interactiveArea.bottom)return}const T=O.pointerType!=="mouse"?null:(O.buttons&We.LEFT)===We.LEFT?We.LEFT:(O.buttons&We.MIDDLE)===We.MIDDLE?We.MIDDLE:(O.buttons&We.RIGHT)===We.RIGHT?We.RIGHT:null;if(T!==null){const k=this._findPointerByMouseButton(T);k&&this._disposePointer(k)}if((O.buttons&We.LEFT)===We.LEFT&&this._lockedPointer)return;const A={pointerId:O.pointerId,clientX:O.clientX,clientY:O.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,_(O)},a=O=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const k=this._domElement.getBoundingClientRect(),R=O.clientX/k.width,P=O.clientY/k.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||P<this._interactiveArea.top||P>this._interactiveArea.bottom)return}const T=(O.buttons&We.LEFT)===We.LEFT?We.LEFT:(O.buttons&We.MIDDLE)===We.MIDDLE?We.MIDDLE:(O.buttons&We.RIGHT)===We.RIGHT?We.RIGHT:null;if(T!==null){const k=this._findPointerByMouseButton(T);k&&this._disposePointer(k)}const A={pointerId:1,clientX:O.clientX,clientY:O.clientY,deltaX:0,deltaY:0,mouseButton:(O.buttons&We.LEFT)===We.LEFT?We.LEFT:(O.buttons&We.MIDDLE)===We.LEFT?We.MIDDLE:(O.buttons&We.RIGHT)===We.LEFT?We.RIGHT:null};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",d),this._isDragging=!0,_(O)},l=O=>{O.cancelable&&O.preventDefault();const T=O.pointerId,A=this._lockedPointer||this._findPointerById(T);if(A){if(A.clientX=O.clientX,A.clientY=O.clientY,A.deltaX=O.movementX,A.deltaY=O.movementY,this._state=0,O.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(O.buttons&We.LEFT)===We.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(O.buttons&We.MIDDLE)===We.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(O.buttons&We.RIGHT)===We.RIGHT&&(this._state=this._state|this.mouseButtons.right);y()}},c=O=>{const T=this._lockedPointer||this._findPointerById(1);T&&(T.clientX=O.clientX,T.clientY=O.clientY,T.deltaX=O.movementX,T.deltaY=O.movementY,this._state=0,(this._lockedPointer||(O.buttons&We.LEFT)===We.LEFT)&&(this._state=this._state|this.mouseButtons.left),(O.buttons&We.MIDDLE)===We.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(O.buttons&We.RIGHT)===We.RIGHT&&(this._state=this._state|this.mouseButtons.right),y())},u=O=>{const T=this._findPointerById(O.pointerId);if(!(T&&T===this._lockedPointer)){if(T&&this._disposePointer(T),O.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=le.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=le.NONE;w()}},d=()=>{const O=this._findPointerById(1);O&&O===this._lockedPointer||(O&&this._disposePointer(O),this._state=le.NONE,w())};let p=-1;const m=O=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===le.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),L=O.clientX/P.width,I=O.clientY/P.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||I<this._interactiveArea.top||I>this._interactiveArea.bottom)return}if(O.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===le.ROTATE||this.mouseButtons.wheel===le.TRUCK){const P=performance.now();p-P<1e3&&this._getClientRect(this._elementRect),p=P}const T=dR?-1:-3,A=O.deltaMode===1?O.deltaY/T:O.deltaY/(T*10),k=this.dollyToCursor?(O.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(O.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case le.ROTATE:{this._rotateInternal(O.deltaX,O.deltaY),this._isUserControllingRotate=!0;break}case le.TRUCK:{this._truckInternal(O.deltaX,O.deltaY,!1),this._isUserControllingTruck=!0;break}case le.OFFSET:{this._truckInternal(O.deltaX,O.deltaY,!0),this._isUserControllingOffset=!0;break}case le.DOLLY:{this._dollyInternal(-A,k,R),this._isUserControllingDolly=!0;break}case le.ZOOM:{this._zoomInternal(-A,k,R),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},v=O=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===M0.ACTION.NONE){const T=O instanceof PointerEvent?O.pointerId:(O instanceof MouseEvent,0),A=this._findPointerById(T);A&&this._disposePointer(A),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",d);return}O.preventDefault()}},_=O=>{if(!this._enabled)return;if(Lg(this._activePointers,Rr),this._getClientRect(this._elementRect),r.copy(Rr),i.copy(Rr),this._activePointers.length>=2){const A=Rr.x-this._activePointers[1].clientX,k=Rr.y-this._activePointers[1].clientY,R=Math.sqrt(A*A+k*k);s.set(0,R);const P=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,L=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(P,L)}if(this._state=0,!O)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in O&&O.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(O.buttons&We.LEFT)===We.LEFT&&(this._state=this._state|this.mouseButtons.left),(O.buttons&We.MIDDLE)===We.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(O.buttons&We.RIGHT)===We.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&le.ROTATE)===le.ROTATE||(this._state&le.TOUCH_ROTATE)===le.TOUCH_ROTATE||(this._state&le.TOUCH_DOLLY_ROTATE)===le.TOUCH_DOLLY_ROTATE||(this._state&le.TOUCH_ZOOM_ROTATE)===le.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&le.TRUCK)===le.TRUCK||(this._state&le.TOUCH_TRUCK)===le.TOUCH_TRUCK||(this._state&le.TOUCH_DOLLY_TRUCK)===le.TOUCH_DOLLY_TRUCK||(this._state&le.TOUCH_ZOOM_TRUCK)===le.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&le.DOLLY)===le.DOLLY||(this._state&le.TOUCH_DOLLY)===le.TOUCH_DOLLY||(this._state&le.TOUCH_DOLLY_TRUCK)===le.TOUCH_DOLLY_TRUCK||(this._state&le.TOUCH_DOLLY_OFFSET)===le.TOUCH_DOLLY_OFFSET||(this._state&le.TOUCH_DOLLY_ROTATE)===le.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&le.ZOOM)===le.ZOOM||(this._state&le.TOUCH_ZOOM)===le.TOUCH_ZOOM||(this._state&le.TOUCH_ZOOM_TRUCK)===le.TOUCH_ZOOM_TRUCK||(this._state&le.TOUCH_ZOOM_OFFSET)===le.TOUCH_ZOOM_OFFSET||(this._state&le.TOUCH_ZOOM_ROTATE)===le.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&le.OFFSET)===le.OFFSET||(this._state&le.TOUCH_OFFSET)===le.TOUCH_OFFSET||(this._state&le.TOUCH_DOLLY_OFFSET)===le.TOUCH_DOLLY_OFFSET||(this._state&le.TOUCH_ZOOM_OFFSET)===le.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},y=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Lg(this._activePointers,Rr);const T=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,A=T?-T.deltaX:i.x-Rr.x,k=T?-T.deltaY:i.y-Rr.y;if(i.copy(Rr),((this._state&le.ROTATE)===le.ROTATE||(this._state&le.TOUCH_ROTATE)===le.TOUCH_ROTATE||(this._state&le.TOUCH_DOLLY_ROTATE)===le.TOUCH_DOLLY_ROTATE||(this._state&le.TOUCH_ZOOM_ROTATE)===le.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(A,k),this._isUserControllingRotate=!0),(this._state&le.DOLLY)===le.DOLLY||(this._state&le.ZOOM)===le.ZOOM){const R=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,P=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,L=this.dollyDragInverted?-1:1;(this._state&le.DOLLY)===le.DOLLY?(this._dollyInternal(L*k*yd,R,P),this._isUserControllingDolly=!0):(this._zoomInternal(L*k*yd,R,P),this._isUserControllingZoom=!0)}if((this._state&le.TOUCH_DOLLY)===le.TOUCH_DOLLY||(this._state&le.TOUCH_ZOOM)===le.TOUCH_ZOOM||(this._state&le.TOUCH_DOLLY_TRUCK)===le.TOUCH_DOLLY_TRUCK||(this._state&le.TOUCH_ZOOM_TRUCK)===le.TOUCH_ZOOM_TRUCK||(this._state&le.TOUCH_DOLLY_OFFSET)===le.TOUCH_DOLLY_OFFSET||(this._state&le.TOUCH_ZOOM_OFFSET)===le.TOUCH_ZOOM_OFFSET||(this._state&le.TOUCH_DOLLY_ROTATE)===le.TOUCH_DOLLY_ROTATE||(this._state&le.TOUCH_ZOOM_ROTATE)===le.TOUCH_ZOOM_ROTATE){const R=Rr.x-this._activePointers[1].clientX,P=Rr.y-this._activePointers[1].clientY,L=Math.sqrt(R*R+P*P),I=s.y-L;s.set(0,L);const D=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,B=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&le.TOUCH_DOLLY)===le.TOUCH_DOLLY||(this._state&le.TOUCH_DOLLY_ROTATE)===le.TOUCH_DOLLY_ROTATE||(this._state&le.TOUCH_DOLLY_TRUCK)===le.TOUCH_DOLLY_TRUCK||(this._state&le.TOUCH_DOLLY_OFFSET)===le.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*yd,D,B),this._isUserControllingDolly=!0):(this._zoomInternal(I*yd,D,B),this._isUserControllingZoom=!0)}((this._state&le.TRUCK)===le.TRUCK||(this._state&le.TOUCH_TRUCK)===le.TOUCH_TRUCK||(this._state&le.TOUCH_DOLLY_TRUCK)===le.TOUCH_DOLLY_TRUCK||(this._state&le.TOUCH_ZOOM_TRUCK)===le.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(A,k,!1),this._isUserControllingTruck=!0),((this._state&le.OFFSET)===le.OFFSET||(this._state&le.TOUCH_OFFSET)===le.TOUCH_OFFSET||(this._state&le.TOUCH_DOLLY_OFFSET)===le.TOUCH_DOLLY_OFFSET||(this._state&le.TOUCH_ZOOM_OFFSET)===le.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(A,k,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},w=()=>{Lg(this._activePointers,Rr),i.copy(Rr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",b),this._domElement.ownerDocument.addEventListener("pointerlockerror",C),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),_())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",b),this._domElement.ownerDocument.removeEventListener("pointerlockerror",C))};const b=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},C=()=>{this.unlockPointer()};this._addAllEventListeners=O=>{this._domElement=O,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),pR&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",v)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",v),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",b),this._domElement.ownerDocument.removeEventListener("pointerlockerror",C))},this.cancel=()=>{this._state!==le.NONE&&(this._state=le.NONE,this._activePointers.length=0,w())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=$i(e.width,0,1),this._interactiveArea.height=$i(e.height,0,1),this._interactiveArea.x=$i(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=$i(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,r=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,r)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,r=!1){this._isUserControllingRotate=!1;const i=$i(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=$i(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!r||yt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=zl.NONE,this._changedDolly=0,this._dollyToNoClamp($i(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=yt(o,this._spherical.radius);if(!(r>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||yt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Fu).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const r=!t||yt(this._target.x,this._targetEnd.x,this.restThreshold)&&yt(this._target.y,this._targetEnd.y,this.restThreshold)&&yt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=$i(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const r=!t||yt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(e,t,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,r)}truck(e,t,r=!1){this._camera.updateMatrix(),vs.setFromMatrixColumn(this._camera.matrix,0),_s.setFromMatrixColumn(this._camera.matrix,1),vs.multiplyScalar(e),_s.multiplyScalar(-t);const i=Qe.copy(vs).add(_s),s=dt.copy(this._targetEnd).add(i);return this.moveTo(s.x,s.y,s.z,r)}forward(e,t=!1){Qe.setFromMatrixColumn(this._camera.matrix,0),Qe.crossVectors(this._camera.up,Qe),Qe.multiplyScalar(e);const r=dt.copy(this._targetEnd).add(Qe);return this.moveTo(r.x,r.y,r.z,t)}elevate(e,t=!1){return Qe.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Qe.x,this._targetEnd.y+Qe.y,this._targetEnd.z+Qe.z,t)}moveTo(e,t,r,i=!1){this._isUserControllingTruck=!1;const s=Qe.set(e,t,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const o=!i||yt(this._target.x,this._targetEnd.x,this.restThreshold)&&yt(this._target.y,this._targetEnd.y,this.restThreshold)&&yt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,r,i=!1){const a=Qe.set(e,t,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,i)}fitToBox(e,t,{cover:r=!1,paddingLeft:i=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?$l.copy(e):$l.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=q2(this._sphericalEnd.theta,G2),d=q2(this._sphericalEnd.phi,G2);l.push(this.rotateTo(u,d,t));const p=Qe.setFromSpherical(this._sphericalEnd).normalize(),m=J2.setFromUnitVectors(p,Ug),v=yt(Math.abs(p.y),1);v&&m.multiply(Bg.setFromAxisAngle(xd,u)),m.multiply(this._yAxisUpSpaceInverse);const _=Q2.makeEmpty();dt.copy(c.min).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.min).setX(c.max.x).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.min).setY(c.max.y).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.max).setZ(c.min.z).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.min).setZ(c.max.z).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.max).setY(c.min.y).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.max).setX(c.min.x).applyQuaternion(m),_.expandByPoint(dt),dt.copy(c.max).applyQuaternion(m),_.expandByPoint(dt),_.min.x-=i,_.min.y-=o,_.max.x+=s,_.max.y+=a,m.setFromUnitVectors(Ug,p),v&&m.premultiply(Bg.invert()),m.premultiply(this._yAxisUpSpace);const y=_.getSize(Qe),w=_.getCenter(dt).applyQuaternion(m);if(ka(this._camera)){const b=this.getDistanceToFitBox(y.x,y.y,y.z,r);l.push(this.moveTo(w.x,w.y,w.z,t)),l.push(this.dollyTo(b,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Fo(this._camera)){const b=this._camera,C=b.right-b.left,O=b.top-b.bottom,T=r?Math.max(C/y.x,O/y.y):Math.min(C/y.x,O/y.y);l.push(this.moveTo(w.x,w.y,w.z,t)),l.push(this.zoomTo(T,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const r=[],s=e instanceof $e.Sphere?zg.copy(e):M0.createBoundingSphere(e,zg);if(r.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),ka(this._camera)){const o=this.getDistanceToFitSphere(s.radius);r.push(this.dollyTo(o,t))}else if(Fo(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);r.push(this.zoomTo(c,t))}return r.push(this.setFocalOffset(0,0,0,t)),Promise.all(r)}setLookAt(e,t,r,i,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zl.NONE,this._changedDolly=0;const l=dt.set(i,s,o),c=Qe.set(e,t,r);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||yt(this._target.x,this._targetEnd.x,this.restThreshold)&&yt(this._target.y,this._targetEnd.y,this.restThreshold)&&yt(this._target.z,this._targetEnd.z,this.restThreshold)&&yt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&yt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,r,i,s,o,a,l,c,u,d,p,m,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zl.NONE,this._changedDolly=0;const _=Qe.set(i,s,o),y=dt.set(e,t,r);yi.setFromVector3(y.sub(_).applyQuaternion(this._yAxisUpSpace));const w=jl.set(u,d,p),b=dt.set(a,l,c);Uu.setFromVector3(b.sub(w).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(_.lerp(w,m));const C=Uu.theta-yi.theta,O=Uu.phi-yi.phi,T=Uu.radius-yi.radius;this._sphericalEnd.set(yi.radius+T*m,yi.phi+O*m,yi.theta+C*m),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const A=!v||yt(this._target.x,this._targetEnd.x,this.restThreshold)&&yt(this._target.y,this._targetEnd.y,this.restThreshold)&&yt(this._target.z,this._targetEnd.z,this.restThreshold)&&yt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&yt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&yt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(A)}setPosition(e,t,r,i=!1){return this.setLookAt(e,t,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,t,r,i=!1){const s=this.getPosition(Qe),o=this.setLookAt(s.x,s.y,s.z,e,t,r,i);return this._sphericalEnd.phi=$i(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,r,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,r),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const s=!i||yt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&yt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&yt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,r){this._camera.updateMatrixWorld(),vs.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_s.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Aa.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=Qe.set(e,t,r),s=i.distanceTo(this._camera.position),o=i.sub(this._camera.position);vs.multiplyScalar(o.x),_s.multiplyScalar(o.y),Aa.multiplyScalar(o.z),Qe.copy(vs).add(_s).add(Aa),Qe.z=Qe.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Qe.x,Qe.y,-Qe.z,!1),this.moveTo(e,t,r,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,r,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new $e.Vector4,typeof e=="number"?this._viewport.set(e,t,r,i):this._viewport.copy(e)}getDistanceToFitBox(e,t,r,i=!1){if(Fg(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Iu,a=this._camera.aspect;return((i?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+r*.5}getDistanceToFitSphere(e){if(Fg(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Iu,r=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?t:r;return e/Math.sin(i*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new $e.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new $e.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof $e.Spherical?e:new $e.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new $e.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Bl,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Bl),this._spherical.theta+=Bl*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Bl)}reset(e=!1){if(!yt(this._camera.up.x,this._cameraUp0.x)||!yt(this._camera.up.y,this._cameraUp0.y)||!yt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(Qe);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,xd),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Qe.subVectors(this._target,this._camera.position).normalize(),t=dt.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(Qe);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,s=X2.subVectors(this._targetEnd,this._target),o=K2.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Nt(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=_d(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(Nt(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=_d(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(Nt(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=_d(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(Nt(s.x)&&Nt(s.y)&&Nt(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Y2(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Nt(o.x)&&Nt(o.y)&&Nt(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Y2(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Nt(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=_d(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(ka(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,p=this._camera,m=this._getCameraDirection(Fu),v=Qe.copy(m).cross(p.up).normalize();v.lengthSq()===0&&(v.x=1);const _=dt.crossVectors(v,m),y=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*Iu*.5),b=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,C=jl.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*y*p.aspect)).add(_.multiplyScalar(this._dollyControlCoord.y*y)),O=Qe.copy(this._targetEnd).lerp(C,b),T=this._lastDollyDirection===zl.IN&&this._spherical.radius<=this.minDistance,A=this._lastDollyDirection===zl.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(T||A)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const R=dt.copy(m).multiplyScalar(-d);O.add(R)}this._boundary.clampPoint(O,O);const k=dt.subVectors(O,this._targetEnd);this._targetEnd.copy(O),this._target.add(k),this._changedDolly-=d,Nt(this._changedDolly)&&(this._changedDolly=0)}else if(Fo(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,p=this._camera,m=Qe.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),v=dt.set(0,0,-1).applyQuaternion(p.quaternion),_=jl.copy(m).add(v.multiplyScalar(-m.dot(p.up))),w=-(this._zoom-d-this._zoom)/this._zoom,b=this._getCameraDirection(Fu),C=this._targetEnd.dot(b),O=Qe.copy(this._targetEnd).lerp(_,w),T=O.dot(b),A=b.multiplyScalar(T-C);O.sub(A),this._boundary.clampPoint(O,O);const k=dt.subVectors(O,this._targetEnd);this._targetEnd.copy(O),this._target.add(k),this._changedZoom-=d,Nt(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Nt(this._focalOffset.x)||!Nt(this._focalOffset.y)||!Nt(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),vs.setFromMatrixColumn(this._camera.matrix,0),_s.setFromMatrixColumn(this._camera.matrix,1),Aa.setFromMatrixColumn(this._camera.matrix,2),vs.multiplyScalar(this._focalOffset.x),_s.multiplyScalar(-this._focalOffset.y),Aa.multiplyScalar(this._focalOffset.z),Qe.copy(vs).add(_s).add(Aa),this._camera.position.add(Qe)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Qe.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Nt(t,this.restThreshold)&&Nt(r,this.restThreshold)&&Nt(i,this.restThreshold)&&Nt(s.x,this.restThreshold)&&Nt(s.y,this.restThreshold)&&Nt(s.z,this.restThreshold)&&Nt(o.x,this.restThreshold)&&Nt(o.y,this.restThreshold)&&Nt(o.z,this.restThreshold)&&Nt(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Nu(this.maxDistance),minZoom:this.minZoom,maxZoom:Nu(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Nu(this.maxPolarAngle),minAzimuthAngle:Nu(this.minAzimuthAngle),maxAzimuthAngle:Nu(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Qe.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const r=JSON.parse(e);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=Lu(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=Lu(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=Lu(r.maxPolarAngle),this.minAzimuthAngle=Lu(r.minAzimuthAngle),this.maxAzimuthAngle=Lu(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],t),yi.setFromVector3(Qe.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(yi.theta,yi.phi,t),this.dollyTo(yi.radius,t),this.zoomTo(r.zoom,t),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",hR),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,r){const i=t.lengthSq();if(i===0)return e;const s=dt.copy(t).add(e),a=this._boundary.clampPoint(s,jl).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===i)return e;if(r===0)return e.add(t).add(a);{const c=1+r*l/t.dot(a);return e.add(dt.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(ka(this._camera)){const e=this._camera,t=e.near,r=e.getEffectiveFOV()*Iu,i=Math.tan(r*.5)*t,s=i*e.aspect;this._nearPlaneCorners[0].set(-s,-i,0),this._nearPlaneCorners[1].set(s,-i,0),this._nearPlaneCorners[2].set(s,i,0),this._nearPlaneCorners[3].set(-s,i,0)}else if(Fo(this._camera)){const e=this._camera,t=1/e.zoom,r=e.left*t,i=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(r,s,0),this._nearPlaneCorners[1].set(i,s,0),this._nearPlaneCorners[2].set(i,o,0),this._nearPlaneCorners[3].set(r,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||Fg(this._camera,"_collisionTest"))return e;const r=this._getTargetDirection(Fu);jg.lookAt(Z2,r,this._camera.up);for(let i=0;i<4;i++){const s=dt.copy(this._nearPlaneCorners[i]);s.applyMatrix4(jg);const o=jl.addVectors(this._target,s);wd.set(o,r),wd.far=this._spherical.radius+1;const a=wd.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const r=()=>{this.removeEventListener("rest",r),t()};this.addEventListener("rest",r)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new $e.Sphere){const r=t,i=r.center;$l.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&$l.expandByObject(o)}),$l.getCenter(i);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let d=0,p=u.count;d<p;d++)Qe.fromBufferAttribute(u,d),s=Math.max(s,i.distanceToSquared(Qe))}),r.radius=Math.sqrt(s),r}};const mR=S.forwardRef((n,e)=>{S.useMemo(()=>{$g.install({THREE:wb}),Wf({CameraControlsImpl:$g})},[]);const{camera:t,domElement:r,makeDefault:i,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,u=mt(T=>T.camera),d=mt(T=>T.gl),p=mt(T=>T.invalidate),m=mt(T=>T.events),v=mt(T=>T.setEvents),_=mt(T=>T.set),y=mt(T=>T.get),w=mt(T=>T.performance),b=t||u,C=r||m.connected||d.domElement,O=S.useMemo(()=>new $g(b),[b]);return Cn((T,A)=>{O.enabled&&O.update(A)},-1),S.useEffect(()=>(O.connect(C),()=>void O.disconnect()),[C,O]),S.useEffect(()=>{const T=R=>{p(),l&&w.regress(),a&&a(R)},A=R=>{s&&s(R)},k=R=>{o&&o(R)};return O.addEventListener("update",T),O.addEventListener("controlstart",A),O.addEventListener("controlend",k),()=>{O.removeEventListener("update",T),O.removeEventListener("controlstart",A),O.removeEventListener("controlend",k)}},[O,s,o,p,v,l,a]),S.useEffect(()=>{if(i){const T=y().controls;return _({controls:O}),()=>_({controls:T})}},[i,O]),S.createElement("primitive",bt({ref:e,object:O},c))});gt.func.isRequired,gt.arrayOf(gt.oneOfType([gt.element,gt.func])).isRequired;const ex=new ol,tx=new ol,bd=[],zu=new al;class gR extends Y5{constructor(){super(),this.color=new xr("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const r=this.instance.current;if(!r||!r.geometry||!r.material)return;zu.geometry=r.geometry;const i=r.matrixWorld,s=r.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>r.count)){r.getMatrixAt(s,ex),tx.multiplyMatrices(i,ex),zu.matrixWorld=tx,r.material instanceof $p?zu.material.side=r.material.side:zu.material.side=r.material[0].side,zu.raycast(e,bd);for(let o=0,a=bd.length;o<a;o++){const l=bd[o];l.instanceId=s,l.object=this,t.push(l)}bd.length=0}}}const US=S.createContext(null),nx=new ol,rx=new ol,vR=new ol,ix=new Te,sx=new Fd,ox=new Te,zS=S.forwardRef(({context:n,children:e,...t},r)=>{S.useMemo(()=>Wf({PositionMesh:gR}),[]);const i=S.useRef(),{subscribe:s,getParent:o}=S.useContext(n||US);return S.useLayoutEffect(()=>s(i),[]),S.createElement("positionMesh",bt({instance:o(),instanceKey:i,ref:Kv([r,i])},t),e)}),_R=S.forwardRef(({children:n,range:e,limit:t=1e3,frames:r=1/0,...i},s)=>{const[{context:o,instance:a}]=S.useState(()=>{const y=S.createContext(null);return{context:y,instance:S.forwardRef((w,b)=>S.createElement(zS,bt({context:y},w,{ref:b})))}}),l=S.useRef(null),[c,u]=S.useState([]),[[d,p]]=S.useState(()=>{const y=new Float32Array(t*16);for(let w=0;w<t;w++)vR.identity().toArray(y,w*16);return[y,new Float32Array([...new Array(t*3)].map(()=>1))]});S.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let m=0,v=0;Cn(()=>{if(r===1/0||m<r){l.current.updateMatrix(),l.current.updateMatrixWorld(),nx.copy(l.current.matrixWorld).invert(),v=Math.min(t,e!==void 0?e:t,c.length),l.current.count=v,l.current.instanceMatrix.updateRange.count=v*16,l.current.instanceColor.updateRange.count=v*3;for(let y=0;y<c.length;y++){const w=c[y].current;w.matrixWorld.decompose(ix,sx,ox),rx.compose(ix,sx,ox).premultiply(nx),rx.toArray(d,y*16),l.current.instanceMatrix.needsUpdate=!0,w.color.toArray(p,y*3),l.current.instanceColor.needsUpdate=!0}m++}});const _=S.useMemo(()=>({getParent:()=>l,subscribe:y=>(u(w=>[...w,y]),()=>u(w=>w.filter(b=>b.current!==y.current)))}),[]);return S.createElement("instancedMesh",bt({userData:{instances:c},matrixAutoUpdate:!1,ref:Kv([s,l]),args:[null,null,0],raycast:()=>null},i),S.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:d.length/16,array:d,itemSize:16,usage:Qu}),S.createElement("instancedBufferAttribute",{attach:"instanceColor",count:p.length/3,array:p,itemSize:3,usage:Qu}),typeof n=="function"?S.createElement(o.Provider,{value:_},n(a)):S.createElement(US.Provider,{value:_},n))}),BS=S.createContext(null),jS=S.forwardRef((n,e)=>{S.useMemo(()=>Wf({SegmentObject:yR}),[]);const{limit:t=1e3,lineWidth:r=1,children:i,...s}=n,[o,a]=S.useState([]),[l]=S.useState(()=>new TS),[c]=S.useState(()=>new Xp),[u]=S.useState(()=>new Zp),[d]=S.useState(()=>new Ct(512,512)),[p]=S.useState(()=>Array(t*6).fill(0)),[m]=S.useState(()=>Array(t*6).fill(0)),v=S.useMemo(()=>({subscribe:_=>(a(y=>[...y,_]),()=>a(y=>y.filter(w=>w.current!==_.current)))}),[]);return Cn(()=>{for(let y=0;y<t;y++){var _;const w=(_=o[y])==null?void 0:_.current;w&&(p[y*6+0]=w.start.x,p[y*6+1]=w.start.y,p[y*6+2]=w.start.z,p[y*6+3]=w.end.x,p[y*6+4]=w.end.y,p[y*6+5]=w.end.z,m[y*6+0]=w.color.r,m[y*6+1]=w.color.g,m[y*6+2]=w.color.b,m[y*6+3]=w.color.r,m[y*6+4]=w.color.g,m[y*6+5]=w.color.b)}u.setColors(m),u.setPositions(p),l.computeLineDistances()}),S.createElement("primitive",{object:l,ref:e},S.createElement("primitive",{object:u,attach:"geometry"}),S.createElement("primitive",bt({object:c,attach:"material",vertexColors:!0,resolution:d,linewidth:r},s)),S.createElement(BS.Provider,{value:v},i))});class yR{constructor(){this.color=new xr("white"),this.start=new Te(0,0,0),this.end=new Te(0,0,0)}}const ax=n=>n instanceof Te?n:new Te(...typeof n=="number"?[n,n,n]:n),xR=S.forwardRef(({color:n,start:e,end:t},r)=>{const i=S.useContext(BS);if(!i)throw"Segment must used inside Segments component.";const s=S.useRef(null);return S.useLayoutEffect(()=>i.subscribe(s),[]),S.createElement("segmentObject",{ref:Kv([s,r]),color:n,start:ax(e),end:ax(t)})});function wR({all:n,scene:e,camera:t}){const r=mt(({gl:o})=>o),i=mt(({camera:o})=>o),s=mt(({scene:o})=>o);return S.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),r.compile(e||s,t||i);const a=new Z5(128);new X5(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function bR({pixelated:n}){const e=mt(o=>o.gl),t=mt(o=>o.internal.active),r=mt(o=>o.performance.current),i=mt(o=>o.viewport.initialDpr),s=mt(o=>o.setDpr);return S.useEffect(()=>{const o=e.domElement;return()=>{t&&s(i),n&&o&&(o.style.imageRendering="auto")}},[]),S.useEffect(()=>{s(r*i),n&&e.domElement&&(e.domElement.style.imageRendering=r===1?"auto":"pixelated")},[r]),null}function SR(){const n=mt(r=>r.get),e=mt(r=>r.setEvents),t=mt(r=>r.performance.current);return S.useEffect(()=>{const r=n().events.enabled;return()=>e({enabled:r})},[]),S.useEffect(()=>e({enabled:t===1}),[t]),null}const Jv=S.createContext(null);function TR({children:n,enabled:e=!0}){const[t,r]=S.useState([]),i=S.useMemo(()=>({selected:t,select:r,enabled:e}),[t,r,e]);return N.jsx(Jv.Provider,{value:i,children:n})}function ER({enabled:n=!1,children:e,...t}){const r=S.useRef(null),i=S.useContext(Jv);return S.useEffect(()=>{if(i&&n){let s=!1;const o=[];if(r.current.traverse(a=>{a.type==="Mesh"&&o.push(a),i.selected.indexOf(a)===-1&&(s=!0)}),s)return i.select(a=>[...a,...o]),()=>{i.select(a=>a.filter(l=>!o.includes(l)))}}},[n,e,i]),N.jsx("group",{ref:r,...t,children:e})}/**
 * postprocessing v6.33.4 build Sat Dec 02 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var $S="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",tt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},VS="",Ln="srgb",Qp="srgb-linear",no={NONE:0,DEPTH:1,CONVOLUTION:2},pt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Jp={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Sd={DEFAULT:0,ESKIL:1},HS=Number(Hp.replace(/\D+/g,"")),WS=HS>=152,CR=new Map([[Eb,Qp],[Cb,Ln]]),OR=new Map([[Qp,Eb],[Ln,Cb]]);function xc(n){return n===null?null:WS?n.outputColorSpace:CR.get(n.outputEncoding)}function Ho(n,e){n!==null&&(WS?n.colorSpace=e:n.encoding=OR.get(e))}function Kf(n){return HS<154?n.replace("colorspace_fragment","encodings_fragment"):n}var kR=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,AR="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",RR=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],MR=class extends Qi{constructor(n=new Zo){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new Zo),scale:new qe(1),kernel:new qe(0)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kR,vertexShader:AR}),this.fragmentShader=Kf(this.fragmentShader),this.setTexelSize(n.x,n.y),this.kernelSize=Jp.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return RR[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},PR=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,GS=class extends Qi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new qe(null),opacity:new qe(1)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:PR,vertexShader:$S}),this.fragmentShader=Kf(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},DR=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,IR=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,NR=class extends Qi{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qe(null),cameraNear:new qe(.3),cameraFar:new qe(1e3)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:DR,vertexShader:IR}),this.depthBuffer=n,this.depthPacking=Zd,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Zd){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof $f?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},LR=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,FR="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",UR=class extends Qi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qe(null),normalBuffer:new qe(null),texelSize:new qe(new Ct)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:LR,vertexShader:FR})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Nc){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},zR=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,BR="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",jR=class extends Qi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new Ct)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zR,vertexShader:BR}),this.fragmentShader=Kf(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},$R=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,VR="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",HR=class extends Qi{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Hp.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new qe(null),depthBuffer:new qe(null),resolution:new qe(new Ct),texelSize:new qe(new Ct),cameraNear:new qe(.3),cameraFar:new qe(1e3),aspect:new qe(1),time:new qe(0)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Nc){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=$R.replace(pt.FRAGMENT_HEAD,n.get(pt.FRAGMENT_HEAD)||"").replace(pt.FRAGMENT_MAIN_UV,n.get(pt.FRAGMENT_MAIN_UV)||"").replace(pt.FRAGMENT_MAIN_IMAGE,n.get(pt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=VR.replace(pt.VERTEX_HEAD,n.get(pt.VERTEX_HEAD)||"").replace(pt.VERTEX_MAIN_SUPPORT,n.get(pt.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Kf(this.fragmentShader),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof $f?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return pt}},WR=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,GR=class extends Qi{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Hp.replace(/\D+/g,"")},uniforms:{inputBuffer:new qe(null),threshold:new qe(0),smoothing:new qe(1),range:new qe(null)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:WR,vertexShader:$S}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},qR="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",YR="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",ZR=class extends Qi{constructor(n=new Ct){super({name:"OutlineMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new Ct)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qR,vertexShader:YR}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},XR=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,KR="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",QR=class extends Qi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new qe(null),supportBuffer:new qe(null),texelSize:new qe(new Ct),radius:new qe(.85)},blending:go,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:XR,vertexShader:KR}),this.fragmentShader=Kf(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},JR=new xb,Io=null;function eM(){if(Io===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Io=new Pv,Io.setAttribute!==void 0?(Io.setAttribute("position",new Ia(n,3)),Io.setAttribute("uv",new Ia(e,2))):(Io.addAttribute("position",new Ia(n,3)),Io.addAttribute("uv",new Ia(e,2)))}return Io}var Sr=class qS{constructor(e="Pass",t=new mc,r=JR){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new al(eM(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new mc),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Nc){}render(e,t,r,i,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof li||t instanceof $p||t instanceof jf||t instanceof qS)&&this[e].dispose()}}},tM=class extends Sr{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new GS,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new li(1,1,{minFilter:gc,magFilter:gc,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Es?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":xc(n)===Ln&&Ho(this.renderTarget.texture,Ln))}},nM=class extends Sr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},lx=new xr,e1=class extends Sr{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,c=o>=0;l?(n.getClearColor(lx),n.setClearColor(s,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(lx,a):c&&n.setClearAlpha(a)}},em=class extends Sr{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new e1,this.overrideMaterialManager=t===null?null:new ux(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new ux(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,u=n.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=c,n.shadowMap.autoUpdate=u}},rM=class extends Sr{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=tn.AUTO_SIZE,height:s=tn.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new em(n,e,new Sb({depthPacking:Zd}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const c=l.clearPass;c.overrideClearColor=new xr(16777215),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new li(1,1,{minFilter:vc,magFilter:vc}),this.renderTarget.texture.name="DepthPass.Target");const u=this.resolution=new tn(this,o,a,r);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},iM=class extends Sr{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=tn.AUTO_SIZE,height:r=tn.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new UR;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new li(1,1,{minFilter:vc,magFilter:vc,depthBuffer:!1,type:K5}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new tn(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Nc){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function cx(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function sM(n,e,t){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(t.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&no.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(pt.FRAGMENT_HEAD)||"",u=l.get(pt.FRAGMENT_MAIN_UV)||"",d=l.get(pt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(pt.VERTEX_HEAD)||"",m=l.get(pt.VERTEX_MAIN_SUPPORT)||"";const v=new Set,_=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const b=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);m+=`	${n}MainSupport(`,m+=b?`vUv);
`:`);
`;for(const C of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const O of C[1].split(/\s*,\s*/))t.varyings.add(O),v.add(O),_.add(O);for(const C of i.matchAll(a))_.add(C[1])}for(const b of r.matchAll(a))_.add(b[1]);for(const b of e.defines.keys())_.add(b.replace(/\([\w\s,]*\)/g,""));for(const b of e.uniforms.keys())_.add(b);_.delete("while"),_.delete("for"),_.delete("if"),e.uniforms.forEach((b,C)=>t.uniforms.set(n+C.charAt(0).toUpperCase()+C.slice(1),b)),e.defines.forEach((b,C)=>t.defines.set(n+C.charAt(0).toUpperCase()+C.slice(1),b));const y=new Map([["fragment",r],["vertex",i]]);cx(n,_,t.defines),cx(n,_,y),r=y.get("fragment"),i=y.get("vertex");const w=e.blendMode;if(t.blendModes.set(w.blendFunction,w),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===Ln?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==VS?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const b=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${n}MainImage(color0, UV, `,t.attributes&no.DEPTH&&b.test(r)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const C=n+"BlendOpacity";t.uniforms.set(C,w.opacity),d+=`color0 = blend${w.blendFunction}(color0, color1, ${C});

	`,c+=`uniform float ${C};

`}if(c+=r+`
`,i!==null&&(p+=i+`
`),l.set(pt.FRAGMENT_HEAD,c),l.set(pt.FRAGMENT_MAIN_UV,u),l.set(pt.FRAGMENT_MAIN_IMAGE,d),l.set(pt.VERTEX_HEAD,p),l.set(pt.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const b of e.extensions)t.extensions.add(b)}}var oM=class extends Sr{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new HR(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new mM;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===tt.DST)n.attributes|=o.getAttributes()&no.DEPTH;else{if(n.attributes&o.getAttributes()&no.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);sM("e"+e++,o,n)}let t=n.shaderParts.get(pt.FRAGMENT_HEAD),r=n.shaderParts.get(pt.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get(pt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&no.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Ln&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(pt.FRAGMENT_HEAD,t),n.shaderParts.set(pt.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(pt.FRAGMENT_MAIN_UV,i);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Nc){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Es&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},YS=class extends Sr{constructor({kernelSize:n=Jp.MEDIUM,resolutionScale:e=.5,width:t=tn.AUTO_SIZE,height:r=tn.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new li(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new tn(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new MR,this._blurMaterial.kernelSize=n,this.copyMaterial=new GS}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let d=e;this.fullscreenMaterial=c;for(let p=0,m=u.length;p<m;++p){const v=p&1?l:a;c.kernel=u[p],c.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Es?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):xc(n)===Ln&&(Ho(this.renderTargetA.texture,Ln),Ho(this.renderTargetB.texture,Ln)))}static get AUTO_SIZE(){return tn.AUTO_SIZE}},aM=class extends Sr{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=tn.AUTO_SIZE,height:s=tn.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new GR(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new li(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new tn(this,o,a,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Es&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},lM=class extends Sr{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new e1(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},cM=class extends Sr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new li(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new jR,this.upsamplingMaterial=new QR,this.resolution=new Ct}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let d=e;this.fullscreenMaterial=a;for(let p=0,m=c.length;p<m;++p){const v=c[p];a.setSize(d.width,d.height),a.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=l;for(let p=u.length-1;p>=0;--p){const m=u[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[p].texture,n.setRenderTarget(m),n.render(s,o),d=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==Es)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(xc(n)===Ln)for(const i of r)Ho(i.texture,Ln)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},uM=class extends Sr{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=tn.AUTO_SIZE,height:s=tn.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new em(n,e,new Q5);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new xr(7829503),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new li(1,1,{minFilter:vc,magFilter:vc}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new tn(this,o,a,r);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},fM=class extends Sr{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,r,i){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==Es&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Vg=1/1e3,hM=1e3,dM=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*Vg}get fixedDelta(){return this._fixedDelta*Vg}set fixedDelta(n){this._fixedDelta=n*hM}get elapsed(){return this._elapsed*Vg}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},pM=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new tM,this.depthTexture=null,this.passes=[],this.timer=new dM,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new Ct),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Es&&xc(e)===Ln&&(Ho(this.inputBuffer.texture,Ln),Ho(this.outputBuffer.texture,Ln),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new J5;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=e4,e.type=t4):e.type=n4,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const s=this.renderer,o=s===null?new Ct:s.getDrawingBufferSize(new Ct),a={minFilter:gc,magFilter:gc,stencilBuffer:t,depthBuffer:e,type:r},l=new li(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===Es&&xc(s)===Ln&&Ho(l.texture,Ln),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Ct),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,c)=>l||c.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,c;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const u of this.passes)u.enabled&&(u.render(t,i,s,e,o),u.needsSwap&&(o&&(r.renderToScreen=u.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),c=i,i=s,s=c),u instanceof lM?o=!0:u instanceof nM&&(o=!1))}setSize(e,t,r){const i=this.renderer,s=i.getSize(new Ct);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&i.setSize(e,t,r);const o=i.getDrawingBufferSize(new Ct);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},mM=class{constructor(){this.shaderParts=new Map([[pt.FRAGMENT_HEAD,null],[pt.FRAGMENT_MAIN_UV,null],[pt.FRAGMENT_MAIN_IMAGE,null],[pt.VERTEX_HEAD,null],[pt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=no.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Qp}},Hg=!1,ux=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Bo:t=this.materialsFlatShadedDoubleSide;break;case qu:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Bo:t=this.materialsDoubleSide;break;case qu:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Qi))return n.clone();const e=n.uniforms,t=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,t.set(i,s))}const r=n.clone();for(const i of t)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Tb;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=qu,r}),this.materialsDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Bo,r}),this.materialsFlatShaded=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=qu,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Bo,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Hg){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Hg}static set workaroundEnabled(n){Hg=n}},No=-1,tn=class extends Fv{constructor(n,e=No,t=No,r=1){super(),this.resizable=n,this.baseSize=new Ct(1,1),this.preferredSize=new Ct(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Ct,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==No?t.width=e.width:e.height!==No?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==No?t.height=e.height:e.width!==No?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(No),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return No}},gM=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},vM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",_M="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",yM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",xM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",wM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",bM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",SM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",TM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",EM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",CM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",OM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",kM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",AM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",RM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",MM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",PM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",DM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",IM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",NM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",LM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",FM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",UM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",zM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",BM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",jM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",$M="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",VM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",HM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",WM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",GM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",qM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",YM="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",ZM=new Map([[tt.ADD,vM],[tt.ALPHA,_M],[tt.AVERAGE,yM],[tt.COLOR,xM],[tt.COLOR_BURN,wM],[tt.COLOR_DODGE,bM],[tt.DARKEN,SM],[tt.DIFFERENCE,TM],[tt.DIVIDE,EM],[tt.DST,null],[tt.EXCLUSION,CM],[tt.HARD_LIGHT,OM],[tt.HARD_MIX,kM],[tt.HUE,AM],[tt.INVERT,RM],[tt.INVERT_RGB,MM],[tt.LIGHTEN,PM],[tt.LINEAR_BURN,DM],[tt.LINEAR_DODGE,IM],[tt.LINEAR_LIGHT,NM],[tt.LUMINOSITY,LM],[tt.MULTIPLY,FM],[tt.NEGATION,UM],[tt.NORMAL,zM],[tt.OVERLAY,BM],[tt.PIN_LIGHT,jM],[tt.REFLECT,$M],[tt.SATURATION,VM],[tt.SCREEN,HM],[tt.SOFT_LIGHT,WM],[tt.SRC,GM],[tt.SUBTRACT,qM],[tt.VIVID_LIGHT,YM]]),XM=class extends Fv{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new qe(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return ZM.get(this.blendFunction)}},ff=class extends Fv{constructor(e,t,{attributes:r=no.NONE,blendFunction:i=tt.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=o,this.extensions=a,this.blendMode=new XM(i),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=Qp,this._outputColorSpace=VS}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Nc){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof li||t instanceof $p||t instanceof jf||t instanceof Sr)&&this[e].dispose()}}},KM=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,QM=class extends ff{constructor({blendFunction:n=tt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Jp.LARGE,resolutionScale:l=.5,width:c=tn.AUTO_SIZE,height:u=tn.AUTO_SIZE,resolutionX:d=c,resolutionY:p=u}={}){super("BloomEffect",KM,{blendFunction:n,uniforms:new Map([["map",new qe(null)],["intensity",new qe(i)]])}),this.renderTarget=new li(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new YS({kernelSize:a}),this.luminancePass=new aM({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new cM,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new tn(this,d,p,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,xc(n)===Ln&&Ho(this.renderTarget.texture,Ln))}},JM=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,eP="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",tP=class extends ff{constructor(n,e,{blendFunction:t=tt.SCREEN,patternTexture:r=null,patternScale:i=1,edgeStrength:s=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:l=2230538,kernelSize:c=Jp.VERY_SMALL,blur:u=!1,xRay:d=!0,multisampling:p=0,resolutionScale:m=.5,width:v=tn.AUTO_SIZE,height:_=tn.AUTO_SIZE,resolutionX:y=v,resolutionY:w=_}={}){super("OutlineEffect",JM,{uniforms:new Map([["maskTexture",new qe(null)],["edgeTexture",new qe(null)],["edgeStrength",new qe(s)],["visibleEdgeColor",new qe(new xr(a))],["hiddenEdgeColor",new qe(new xr(l))],["pulse",new qe(1)],["patternScale",new qe(i)],["patternTexture",new qe(null)]])}),this.blendMode.addEventListener("change",T=>{this.blendMode.blendFunction===tt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=r,this.xRay=d,this.scene=n,this.camera=e,this.renderTargetMask=new li(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new li(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new e1,this.clearPass.overrideClearColor=new xr(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new rM(n,e),this.maskPass=new em(n,e,new NR(this.depthPass.texture,e));const b=this.maskPass.clearPass;b.overrideClearColor=new xr(16777215),b.overrideClearAlpha=1,this.blurPass=new YS({resolutionScale:m,resolutionX:y,resolutionY:w,kernelSize:c}),this.blurPass.enabled=u;const C=this.blurPass.resolution;C.addEventListener("change",T=>this.setSize(C.baseWidth,C.baseHeight)),this.outlinePass=new fM(new ZR);const O=this.outlinePass.fullscreenMaterial;O.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new gM,this.selection.layer=10,this.pulseSpeed=o}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=r4,this.defines.set("USE_PATTERN","1"),this.setVertexShader(eP)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const r=this.scene,i=this.camera,s=this.selection,a=this.uniforms.get("pulse"),l=r.background,c=i.layers.mask;(this.forceUpdate||s.size>0)&&(r.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),i.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),i.layers.mask=c,r.background=l,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.depthPass.setSize(r,i),this.renderTargetOutline.setSize(r,i),this.outlinePass.fullscreenMaterial.setSize(r,i)}initialize(n,e,t){this.blurPass.initialize(n,e,Es),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}},nP=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,rP=class extends ff{constructor({blendFunction:n,technique:e=Sd.DEFAULT,eskil:t=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",nP,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new qe(r)],["darkness",new qe(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Sd.ESKIL}set eskil(n){this.technique=n?Sd.ESKIL:Sd.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};const ZS=S.createContext(null),fx=n=>(n.getAttributes()&no.CONVOLUTION)===no.CONVOLUTION,iP=j.memo(S.forwardRef(({children:n,camera:e,scene:t,resolutionScale:r,enabled:i=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:l,stencilBuffer:c,multisampling:u=8,frameBufferType:d=i4},p)=>{const{gl:m,scene:v,camera:_,size:y}=mt(),w=t||v,b=e||_,[C,O,T]=S.useMemo(()=>{const P=oA(),L=new pM(m,{depthBuffer:a,stencilBuffer:c,multisampling:u>0&&P?u:0,frameBufferType:d});L.addPass(new em(w,b));let I=null,D=null;return l||(D=new uM(w,b),D.enabled=!1,L.addPass(D),r!==void 0&&P&&(I=new iM({normalBuffer:D.texture,resolutionScale:r}),I.enabled=!1,L.addPass(I))),[L,D,I]},[b,m,a,c,u,d,w,l,r]);S.useEffect(()=>C==null?void 0:C.setSize(y.width,y.height),[C,y]),Cn((P,L)=>{if(i){const I=m.autoClear;m.autoClear=o,c&&!o&&m.clearStencil(),C.render(L),m.autoClear=I}},i?s:0);const A=S.useRef(null),k=RO(A);S.useLayoutEffect(()=>{const P=[];if(A.current&&k.current&&C){const L=k.current.objects;for(let I=0;I<L.length;I++){const D=L[I];if(D instanceof ff){const B=[D];if(!fx(D)){let V=null;for(;(V=L[I+1])instanceof ff&&!fx(V);)B.push(V),I++}const z=new oM(b,...B);P.push(z)}else D instanceof Sr&&P.push(D)}for(const I of P)C==null||C.addPass(I);O&&(O.enabled=!0),T&&(T.enabled=!0)}return()=>{for(const L of P)C==null||C.removePass(L);O&&(O.enabled=!1),T&&(T.enabled=!1)}},[C,n,b,O,T,k]);const R=S.useMemo(()=>({composer:C,normalPass:O,downSamplingPass:T,resolutionScale:r,camera:b,scene:w}),[C,O,T,r,b,w]);return S.useImperativeHandle(p,()=>C,[C]),N.jsx(ZS.Provider,{value:R,children:N.jsx("group",{ref:A,children:n})})})),hx=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let sP=0;const dx=new WeakMap,XS=(n,e)=>j.forwardRef(function({blendFunction:r=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...s},o){let a=dx.get(n);if(!a){const u=`@react-three/postprocessing/${n.name}-${sP++}`;Wf({[u]:n}),dx.set(n,a=u)}const l=mt(u=>u.camera),c=j.useMemo(()=>{var u,d;return[...(u=e==null?void 0:e.args)!=null?u:[],...(d=s.args)!=null?d:[{...e,...s}]]},[JSON.stringify(s)]);return N.jsx(a,{camera:l,"blendMode-blendFunction":r,"blendMode-opacity-value":i,...s,ref:o,args:c})}),oP=XS(QM,{blendFunction:tt.ADD}),aP=S.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:c,height:u,kernelSize:d,blur:p,xRay:m,...v},_){const y=mt(T=>T.invalidate),{scene:w,camera:b}=S.useContext(ZS),C=S.useMemo(()=>new tP(w,b,{blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:c,height:u,kernelSize:d,blur:p,xRay:m,...v}),[r,p,b,s,u,l,d,i,o,w,a,c,m]),O=S.useContext(Jv);return S.useEffect(()=>{if(!O&&e)return C.selection.set(Array.isArray(e)?e.map(hx):[hx(e)]),y(),()=>{C.selection.clear(),y()}},[C,e,O,y]),S.useEffect(()=>{C.selectionLayer=t,y()},[C,y,t]),S.useRef(),S.useEffect(()=>{var T;if(O&&O.enabled&&(T=O.selected)!=null&&T.length)return C.selection.set(O.selected),y(),()=>{C.selection.clear(),y()}},[O,C.selection,y]),S.useEffect(()=>()=>{C.dispose()},[C]),N.jsx("primitive",{ref:_,object:C})}),lP=XS(rP);function cP(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function KS(...n){return e=>n.forEach(t=>cP(t,e))}function zc(...n){return S.useCallback(KS(...n),n)}const QS=S.forwardRef((n,e)=>{const{children:t,...r}=n,i=S.Children.toArray(t),s=i.find(uP);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(P0,bt({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(P0,bt({},r,{ref:e}),t)});QS.displayName="Slot";const P0=S.forwardRef((n,e)=>{const{children:t,...r}=n;return S.isValidElement(t)?S.cloneElement(t,{...fP(r,t.props),ref:e?KS(e,t.ref):t.ref}):S.Children.count(t)>1?S.Children.only(null):null});P0.displayName="SlotClone";const JS=({children:n})=>S.createElement(S.Fragment,null,n);function uP(n){return S.isValidElement(n)&&n.type===JS}function fP(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const hP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cl=hP.reduce((n,e)=>{const t=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?QS:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,bt({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function dP(n,e){n&&Rv.flushSync(()=>n.dispatchEvent(e))}const pP=S.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?_b.createPortal(S.createElement(cl.div,bt({},i,{ref:e})),r):null}),mP=pP;var px=Object.prototype.hasOwnProperty;function hf(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&hf(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(px.call(n,t)&&++r&&!px.call(e,t)||!(t in e)||!hf(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function Qf(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var tm=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};tm.prototype._test=function(e){var t=this.fn;try{cc(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return cc(this.modifiers.slice(),t,this)(e)}catch{return!1}};tm.prototype._check=function(e){try{cc(this.modifiers.slice(),this.fn,this)(e)}catch{if(cc(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!cc(this.modifiers.slice(),this.fn,this)(e))throw null};tm.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){tT(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function eT(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function cc(n,e,t){if(n.length){var r=n.shift(),i=cc(n,e,t);return r.perform(i,t)}else return eT(e)}function tT(n,e,t){if(n.length){var r=n.shift(),i=tT(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(eT(e,"async")(s))}}var gP=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},t1=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Os=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Os.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new tm(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};Os.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new gP(t,e.simple,e.async)),this};Os.prototype._clone=function(){return new Os(this.chain.slice(),this.nextRuleModifiers.slice())};Os.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Os.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new t1(r,e,i))}}),t};Os.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new t1(t,e,r)}})};Os.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){nT(e,t.chain.slice(),r,i)})};function nT(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){nT(n,e,t,r)},function(s){r(new t1(i,n,s))})}else t(n)}var mx=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function vP(n,e){return e===void 0&&(e=!1),{simple:function(t){return mx(t,e)||n.check(t)===void 0},async:function(t){return mx(t,e)||n.testAsync(t)}}}function Ir(){return typeof Proxy<"u"?rT(new Os):D0(new Os)}var df={};Ir.extend=function(n){Object.assign(df,n)};Ir.clearCustomRules=function(){df={}};function rT(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=rT(n._clone());if(r in np)return i._applyModifier(np[r],r);if(r in df)return i._applyRule(df[r],r);if(r in I0)return i._applyRule(I0[r],r)}})}function D0(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=D0(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},t=e(I0,n),r=e(df,t);return Object.keys(np).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=D0(r._clone());return s._applyModifier(np[i],i)}})}),r}var np={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Td(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Td(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Td(e).every(n)}},async:function(n){return function(e){return Promise.all(Td(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return gx(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return gx(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function gx(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Td(n){return typeof n=="string"?n.split(""):n}var I0={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||_P;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Vl("string")},boolean:function(){return Vl("boolean")},undefined:function(){return Vl("undefined")},null:function(){return Vl("null")},array:function(){return Vl("array")},object:function(){return Vl("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return yP(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:vP};function Vl(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function _P(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function yP(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var St="colors",gr="sizes",ke="space",xP={gap:ke,gridGap:ke,columnGap:ke,gridColumnGap:ke,rowGap:ke,gridRowGap:ke,inset:ke,insetBlock:ke,insetBlockEnd:ke,insetBlockStart:ke,insetInline:ke,insetInlineEnd:ke,insetInlineStart:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,marginBlock:ke,marginBlockEnd:ke,marginBlockStart:ke,marginInline:ke,marginInlineEnd:ke,marginInlineStart:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,paddingBlock:ke,paddingBlockEnd:ke,paddingBlockStart:ke,paddingInline:ke,paddingInlineEnd:ke,paddingInlineStart:ke,top:ke,right:ke,bottom:ke,left:ke,scrollMargin:ke,scrollMarginTop:ke,scrollMarginRight:ke,scrollMarginBottom:ke,scrollMarginLeft:ke,scrollMarginX:ke,scrollMarginY:ke,scrollMarginBlock:ke,scrollMarginBlockEnd:ke,scrollMarginBlockStart:ke,scrollMarginInline:ke,scrollMarginInlineEnd:ke,scrollMarginInlineStart:ke,scrollPadding:ke,scrollPaddingTop:ke,scrollPaddingRight:ke,scrollPaddingBottom:ke,scrollPaddingLeft:ke,scrollPaddingX:ke,scrollPaddingY:ke,scrollPaddingBlock:ke,scrollPaddingBlockEnd:ke,scrollPaddingBlockStart:ke,scrollPaddingInline:ke,scrollPaddingInlineEnd:ke,scrollPaddingInlineStart:ke,fontSize:"fontSizes",background:St,backgroundColor:St,backgroundImage:St,borderImage:St,border:St,borderBlock:St,borderBlockEnd:St,borderBlockStart:St,borderBottom:St,borderBottomColor:St,borderColor:St,borderInline:St,borderInlineEnd:St,borderInlineStart:St,borderLeft:St,borderLeftColor:St,borderRight:St,borderRightColor:St,borderTop:St,borderTopColor:St,caretColor:St,color:St,columnRuleColor:St,fill:St,outline:St,outlineColor:St,stroke:St,textDecorationColor:St,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:gr,minBlockSize:gr,maxBlockSize:gr,inlineSize:gr,minInlineSize:gr,maxInlineSize:gr,width:gr,minWidth:gr,maxWidth:gr,height:gr,minHeight:gr,maxHeight:gr,flexBasis:gr,gridTemplateColumns:gr,gridTemplateRows:gr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},wP=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Bc=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,wP))(e);return i in n?n[i]:n[i]=t(e,...r)}},Va=Symbol.for("sxs.internal"),n1=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),vx=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:bP}=Object.prototype,N0=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),SP=/\s+(?![^()]*\))/,Hl=n=>e=>n(...typeof e=="string"?String(e).split(SP):[e]),_x={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Hl((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Hl((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Hl((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Hl((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Hl((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Hl((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},Wg=/([\d.]+)([^]*)/,TP=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,EP=(n,e)=>n in CP&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${N0(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${N0(n)}:${r}fit-content`)+s):String(e),CP={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},co=n=>n?n+"-":"",iT=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?co(e)+(a.includes("$")?"":co(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),OP=/\s*,\s*(?![^()]*\))/,kP=Object.prototype.toString,tc=(n,e,t,r,i)=>{let s,o,a;const l=(c,u,d)=>{let p,m;const v=_=>{for(p in _){const b=p.charCodeAt(0)===64,C=b&&Array.isArray(_[p])?_[p]:[_[p]];for(m of C){const O=/[A-Z]/.test(w=p)?w:w.replace(/-[^]/g,A=>A[1].toUpperCase()),T=typeof m=="object"&&m&&m.toString===kP&&(!r.utils[O]||!u.length);if(O in r.utils&&!T){const A=r.utils[O];if(A!==o){o=A,v(A(m)),o=null;continue}}else if(O in _x){const A=_x[O];if(A!==a){a=A,v(A(m)),a=null;continue}}if(b&&(y=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(A,k,R,P,L,I)=>{const D=Wg.test(k),B=.0625*(D?-1:1),[z,V]=D?[P,k]:[k,P];return"("+(R[0]==="="?"":R[0]===">"===D?"max-":"min-")+z+":"+(R[0]!=="="&&R.length===1?V.replace(Wg,($,K,G)=>Number(K)+B*(R===">"?1:-1)+G):V)+(L?") and ("+(L[0]===">"?"min-":"max-")+z+":"+(L.length===1?I.replace(Wg,($,K,G)=>Number(K)+B*(L===">"?-1:1)+G):I):"")+")"})),T){const A=b?d.concat(p):[...d],k=b?[...u]:TP(u,p.split(OP));s!==void 0&&i(yx(...s)),s=void 0,l(m,k,A)}else s===void 0&&(s=[[],u,d]),p=b||p.charCodeAt(0)!==36?p:`--${co(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=T?m:typeof m=="number"?m&&O in AP?String(m)+"px":String(m):iT(EP(O,m??""),r.prefix,r.themeMap[O]),s[0].push(`${b?`${p} `:`${N0(p)}:`}${m}`)}}var y,w};v(c),s!==void 0&&i(yx(...s)),s=void 0};l(n,e,t)},yx=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,AP={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},xx=n=>String.fromCharCode(n+(n>25?39:97)),Ha=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=xx(t%52)+r;return xx(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Zu=["themed","global","styled","onevar","resonevar","allvar","inline"],RP=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},MP=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(RP(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=Zu[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:d,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Zu.length-1;a>=0;--a){const l=Zu[a];if(!o[l]){const c=Zu[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}PP(o[l])}};return r(),e},PP=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Bu=Symbol(),DP=Bc(),wx=(n,e)=>DP(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Va]){r.type==null&&(r.type=i[Va].type);for(const s of i[Va].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(IP(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),NP(n,r,e)}),IP=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${co(i.prefix)}c-${Ha(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){u=l,d=p,bP.call(u,d)||(l[p]="undefined");const m=n[p];for(const v in m){const _={[p]:String(v)};String(v)==="undefined"&&c.push(p);const y=m[v],w=[_,y,!vx(y)];o.push(w)}}var u,d;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const y in v)v[y]=String(v[y]);const _=[v,m,!vx(m)];a.push(_)}return[s,r,o,a,l,c]},NP=(n,e,t)=>{const[r,i,s,o]=LP(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function p(){for(let m=0;m<p[Bu].length;m++){const[v,_]=p[Bu][m];d.rules[v].apply(_)}return p[Bu]=[],null}return p[Bu]=[],p.rules={},Zu.forEach(m=>p.rules[m]={apply:v=>p[Bu].push([m,v])}),p})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||FP;const{css:p,...m}=d,v={};for(const w in s)if(delete m[w],w in d){let b=d[w];typeof b=="object"&&b?v[w]={"@initial":s[w],...b}:(b=String(b),v[w]=b!=="undefined"||o.has(w)?b:s[w])}else v[w]=s[w];const _=new Set([...i]);for(const[w,b,C,O]of e.composers){t.rules.styled.cache.has(w)||(t.rules.styled.cache.add(w),tc(b,[`.${w}`],[],n,k=>{l.styled.apply(k)}));const T=bx(C,v,n.media),A=bx(O,v,n.media,!0);for(const k of T)if(k!==void 0)for(const[R,P,L]of k){const I=`${w}-${Ha(P)}-${R}`;_.add(I);const D=(L?t.rules.resonevar:t.rules.onevar).cache,B=L?l.resonevar:l.onevar;D.has(I)||(D.add(I),tc(P,[`.${I}`],[],n,z=>{B.apply(z)}))}for(const k of A)if(k!==void 0)for(const[R,P]of k){const L=`${w}-${Ha(P)}-${R}`;_.add(L),t.rules.allvar.cache.has(L)||(t.rules.allvar.cache.add(L),tc(P,[`.${L}`],[],n,I=>{l.allvar.apply(I)}))}}if(typeof p=="object"&&p){const w=`${r}-i${Ha(p)}-css`;_.add(w),t.rules.inline.cache.has(w)||(t.rules.inline.cache.add(w),tc(p,[`.${w}`],[],n,b=>{l.inline.apply(b)}))}for(const w of String(d.className||"").trim().split(/\s+/))w&&_.add(w);const y=m.className=[..._].join(" ");return{type:e.type,className:y,selector:c,props:m,toString:()=>y,deferredInjector:a}};return n1(u,{className:r,selector:c,[Va]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},LP=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},bx=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let p=e[l];if(p!==d){if(typeof p!="object"||!p)continue e;{let m,v,_=0;for(const y in p){if(d===String(p[y])){if(y!=="@initial"){const w=y.slice(1);(v=v||[]).push(w in t?t[w]:y.replace(/^@media ?/,"")),u=!0}c+=_,m=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},FP={},UP=Bc(),zP=(n,e)=>UP(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Ha(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}tc(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return n1(r,{toString:r})}),BP=Bc(),jP=(n,e)=>BP(n,()=>t=>{const r=`${co(n.prefix)}k-${Ha(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];tc(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return n1(i,{get name(){return i()},toString:i})}),$P=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+co(this.prefix)+co(this.scale)+this.token}toString(){return this.computedValue}},VP=Bc(),HP=(n,e)=>VP(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${co(n.prefix)}t-${Ha(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${co(n.prefix)}${l}-${c}`,d=iT(String(r[l][c]),n.prefix,l);s[l][c]=new $P(c,d,l,n.prefix),o.push(`${u}:${d}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),WP=Bc(),Sx,GP=Bc(),sT=n=>{const e=(t=>{let r=!1;const i=WP(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...xP},utils:typeof s.utils=="object"&&s.utils||{}},d=MP(l),p={css:wx(u,d),globalCss:zP(u,d),keyframes:jP(u,d),createTheme:HP(u,d),reset(){d.reset(),p.theme.toString()},theme:{},sheet:d,config:u,prefix:o,getCssText:d.toString,toString:d.toString};return String(p.theme=p.createTheme(c)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>GP(t,()=>{const i=wx(t,r);return(...s)=>{const o=i(...s),a=o[Va].type,l=j.forwardRef((c,u)=>{const d=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=u,m?j.createElement(j.Fragment,null,j.createElement(d,p),j.createElement(m,null)):j.createElement(d,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Va]=o[Va],l}}))(e),e},qP=()=>Sx||(Sx=sT()),On=(...n)=>qP().styled(...n);function Js(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function oT(n,e=[]){let t=[];function r(s,o){const a=S.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:p,children:m,...v}=d,_=(p==null?void 0:p[n][l])||a,y=S.useMemo(()=>v,Object.values(v));return S.createElement(_.Provider,{value:y},m)}function u(d,p){const m=(p==null?void 0:p[n][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return S.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,YP(i,...e)]}function YP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function jc(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function ZP(n,e=globalThis==null?void 0:globalThis.document){const t=jc(n);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const L0="dismissableLayer.update",XP="dismissableLayer.pointerDownOutside",KP="dismissableLayer.focusOutside";let Tx;const QP=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),JP=S.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=S.useContext(QP),[d,p]=S.useState(null),m=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=S.useState({}),_=zc(e,R=>p(R)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(w),C=d?y.indexOf(d):-1,O=u.layersWithOutsidePointerEventsDisabled.size>0,T=C>=b,A=e9(R=>{const P=R.target,L=[...u.branches].some(I=>I.contains(P));!T||L||(s==null||s(R),a==null||a(R),R.defaultPrevented||l==null||l())},m),k=t9(R=>{const P=R.target;[...u.branches].some(I=>I.contains(P))||(o==null||o(R),a==null||a(R),R.defaultPrevented||l==null||l())},m);return ZP(R=>{C===u.layers.size-1&&(i==null||i(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),S.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Tx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ex(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Tx)}},[d,m,r,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ex())},[d,u]),S.useEffect(()=>{const R=()=>v({});return document.addEventListener(L0,R),()=>document.removeEventListener(L0,R)},[]),S.createElement(cl.div,bt({},c,{ref:_,style:{pointerEvents:O?T?"auto":"none":void 0,...n.style},onFocusCapture:Js(n.onFocusCapture,k.onFocusCapture),onBlurCapture:Js(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Js(n.onPointerDownCapture,A.onPointerDownCapture)}))});function e9(n,e=globalThis==null?void 0:globalThis.document){const t=jc(n),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){aT(XP,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function t9(n,e=globalThis==null?void 0:globalThis.document){const t=jc(n),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&aT(KP,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ex(){const n=new CustomEvent(L0);document.dispatchEvent(n)}function aT(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?dP(i,s):i.dispatchEvent(s)}const wc=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},n9=T5["useId".toString()]||(()=>{});let r9=0;function i9(n){const[e,t]=S.useState(n9());return wc(()=>{n||t(r=>r??String(r9++))},[n]),n||(e?`radix-${e}`:"")}const s9=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return S.createElement(cl.svg,bt({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:S.createElement("polygon",{points:"0,0 30,0 15,10"}))}),o9=s9;function a9(n){const[e,t]=S.useState(void 0);return wc(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const lT="Popper",[cT,uT]=oT(lT),[l9,fT]=cT(lT),c9=n=>{const{__scopePopper:e,children:t}=n,[r,i]=S.useState(null);return S.createElement(l9,{scope:e,anchor:r,onAnchorChange:i},t)},u9="PopperAnchor",f9=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=fT(u9,t),o=S.useRef(null),a=zc(e,o);return S.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:S.createElement(cl.div,bt({},i,{ref:a}))}),hT="PopperContent",[h9,d9]=cT(hT),p9=S.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:_=0,avoidCollisions:y=!0,collisionBoundary:w=[],collisionPadding:b=0,sticky:C="partial",hideWhenDetached:O=!1,updatePositionStrategy:T="optimized",onPlaced:A,...k}=n,R=fT(hT,u),[P,L]=S.useState(null),I=zc(e,J=>L(J)),[D,B]=S.useState(null),z=a9(D),V=(t=z==null?void 0:z.width)!==null&&t!==void 0?t:0,$=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,K=d+(m!=="center"?"-"+m:""),G=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},H=Array.isArray(w)?w:[w],q=H.length>0,F={padding:G,boundary:H.filter(_9),altBoundary:q},{refs:W,floatingStyles:ee,placement:ne,isPositioned:Z,middlewareData:oe}=rO({strategy:"fixed",placement:K,whileElementsMounted:(...J)=>eO(...J,{animationFrame:T==="always"}),elements:{reference:R.anchor},middleware:[D4({mainAxis:p+$,alignmentAxis:v}),y&&I4({mainAxis:!0,crossAxis:!1,limiter:C==="partial"?N4():void 0,...F}),y&&R4({...F}),L4({...F,apply:({elements:J,rects:de,availableWidth:be,availableHeight:fe})=>{const{width:ge,height:me}=de.reference,he=J.floating.style;he.setProperty("--radix-popper-available-width",`${be}px`),he.setProperty("--radix-popper-available-height",`${fe}px`),he.setProperty("--radix-popper-anchor-width",`${ge}px`),he.setProperty("--radix-popper-anchor-height",`${me}px`)}}),D&&nO({element:D,padding:_}),y9({arrowWidth:V,arrowHeight:$}),O&&M4({strategy:"referenceHidden",...F})]}),[re,Q]=dT(ne),_e=jc(A);wc(()=>{Z&&(_e==null||_e())},[Z,_e]);const xe=(i=oe.arrow)===null||i===void 0?void 0:i.x,ce=(s=oe.arrow)===null||s===void 0?void 0:s.y,ue=((o=oe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Ee,Ie]=S.useState();return wc(()=>{P&&Ie(window.getComputedStyle(P).zIndex)},[P]),S.createElement("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:Z?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(a=oe.transformOrigin)===null||a===void 0?void 0:a.x,(l=oe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},S.createElement(h9,{scope:u,placedSide:re,onArrowChange:B,arrowX:xe,arrowY:ce,shouldHideArrow:ue},S.createElement(cl.div,bt({"data-side":re,"data-align":Q},k,{ref:I,style:{...k.style,animation:Z?void 0:"none",opacity:(c=oe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),m9="PopperArrow",g9={top:"bottom",right:"left",bottom:"top",left:"right"},v9=S.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=d9(m9,r),o=g9[s.placedSide];return S.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},S.createElement(o9,bt({},i,{ref:t,style:{...i.style,display:"block"}})))});function _9(n){return n!==null}const y9=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=d?0:n.arrowWidth,m=d?0:n.arrowHeight,[v,_]=dT(a),y={start:"0%",center:"50%",end:"100%"}[_],w=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,b=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let C="",O="";return v==="bottom"?(C=d?y:`${w}px`,O=`${-m}px`):v==="top"?(C=d?y:`${w}px`,O=`${l.floating.height+m}px`):v==="right"?(C=`${-m}px`,O=d?y:`${b}px`):v==="left"&&(C=`${l.floating.width+m}px`,O=d?y:`${b}px`),{data:{x:C,y:O}}}});function dT(n){const[e,t="center"]=n.split("-");return[e,t]}const x9=c9,w9=f9,b9=p9,S9=v9;function T9(n,e){return S.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const pT=n=>{const{present:e,children:t}=n,r=E9(e),i=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),s=zc(r.ref,i.ref);return typeof t=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};pT.displayName="Presence";function E9(n){const[e,t]=S.useState(),r=S.useRef({}),i=S.useRef(n),s=S.useRef("none"),o=n?"mounted":"unmounted",[a,l]=T9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Ed(r.current);s.current=a==="mounted"?c:"none"},[a]),wc(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,m=Ed(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),wc(()=>{if(e){const c=d=>{const m=Ed(r.current).includes(d.animationName);d.target===e&&m&&Rv.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Ed(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Ed(n){return(n==null?void 0:n.animationName)||"none"}function C9({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=O9({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=jc(t),l=S.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function O9({defaultProp:n,onChange:e}){const t=S.useState(n),[r]=t,i=S.useRef(r),s=jc(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const k9=S.forwardRef((n,e)=>S.createElement(cl.span,bt({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),A9=k9,[nm,iW]=oT("Tooltip",[uT]),rm=uT(),R9="TooltipProvider",F0="tooltip.open",[sW,r1]=nm(R9),i1="Tooltip",[M9,im]=nm(i1),P9=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=r1(i1,n.__scopeTooltip),c=rm(e),[u,d]=S.useState(null),p=i9(),m=S.useRef(0),v=o??l.disableHoverableContent,_=a??l.delayDuration,y=S.useRef(!1),[w=!1,b]=C9({prop:r,defaultProp:i,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(F0))):l.onClose(),s==null||s(k)}}),C=S.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),O=S.useCallback(()=>{window.clearTimeout(m.current),y.current=!1,b(!0)},[b]),T=S.useCallback(()=>{window.clearTimeout(m.current),b(!1)},[b]),A=S.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,b(!0)},_)},[_,b]);return S.useEffect(()=>()=>window.clearTimeout(m.current),[]),S.createElement(x9,c,S.createElement(M9,{scope:e,contentId:p,open:w,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayed?A():O()},[l.isOpenDelayed,A,O]),onTriggerLeave:S.useCallback(()=>{v?T():window.clearTimeout(m.current)},[T,v]),onOpen:O,onClose:T,disableHoverableContent:v},t))},Cx="TooltipTrigger",D9=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=im(Cx,t),s=r1(Cx,t),o=rm(t),a=S.useRef(null),l=zc(e,a,i.onTriggerChange),c=S.useRef(!1),u=S.useRef(!1),d=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),S.createElement(w9,bt({asChild:!0},o),S.createElement(cl.button,bt({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Js(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Js(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Js(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Js(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Js(n.onBlur,i.onClose),onClick:Js(n.onClick,i.onClose)})))}),I9="TooltipPortal",[oW,N9]=nm(I9,{forceMount:void 0}),pf="TooltipContent",L9=S.forwardRef((n,e)=>{const t=N9(pf,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=im(pf,n.__scopeTooltip);return S.createElement(pT,{present:r||o.open},o.disableHoverableContent?S.createElement(mT,bt({side:i},s,{ref:e})):S.createElement(F9,bt({side:i},s,{ref:e})))}),F9=S.forwardRef((n,e)=>{const t=im(pf,n.__scopeTooltip),r=r1(pf,n.__scopeTooltip),i=S.useRef(null),s=zc(e,i),[o,a]=S.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,p=S.useCallback(()=>{a(null),d(!1)},[d]),m=S.useCallback((v,_)=>{const y=v.currentTarget,w={x:v.clientX,y:v.clientY},b=$9(w,y.getBoundingClientRect()),C=V9(w,b),O=H9(_.getBoundingClientRect()),T=G9([...C,...O]);a(T),d(!0)},[d]);return S.useEffect(()=>()=>p(),[p]),S.useEffect(()=>{if(l&&u){const v=y=>m(y,u),_=y=>m(y,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",_)}}},[l,u,m,p]),S.useEffect(()=>{if(o){const v=_=>{const y=_.target,w={x:_.clientX,y:_.clientY},b=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),C=!W9(w,o);b?p():C&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,p]),S.createElement(mT,bt({},n,{ref:s}))}),[U9,z9]=nm(i1,{isInside:!1}),mT=S.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=im(pf,t),c=rm(t),{onClose:u}=l;return S.useEffect(()=>(document.addEventListener(F0,u),()=>document.removeEventListener(F0,u)),[u]),S.useEffect(()=>{if(l.trigger){const d=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),S.createElement(JP,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},S.createElement(b9,bt({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),S.createElement(JS,null,r),S.createElement(U9,{scope:t,isInside:!0},S.createElement(A9,{id:l.contentId,role:"tooltip"},i||r))))}),B9="TooltipArrow",j9=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=rm(t);return z9(B9,t).isInside?null:S.createElement(S9,bt({},i,r,{ref:e}))});function $9(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function V9(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function H9(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function W9(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function G9(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),q9(e)}function q9(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Y9=P9,Z9=D9,X9=L9,K9=j9;function Q9(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Ot(n,e){if(n==null)return{};var t=Q9(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Kt;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Kt||(Kt={}));const J9={[Kt.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Kt.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Kt.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Kt.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Kt.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Kt.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Kt.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Kt.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Kt.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Kt.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Kt.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function gT(n,e,...t){const[r,...i]=J9[e](...t);console[n]("LEVA: "+r,...i)}const to=gT.bind(null,"warn"),eD=gT.bind(null,"log"),tD=["value"],nD=["schema"],rD=["value"],vT=[],Qa={};function Ox(n){let{value:e}=n,t=Ot(n,tD);for(let r of vT){const i=r(e,t);if(i)return i}}function _o(n,e){let{schema:t}=e,r=Ot(e,nD);if(n in Qa){to(Kt.ALREADY_REGISTERED_TYPE,n);return}vT.push((i,s)=>t(i,s)&&n),Qa[n]=r}function Gg(n,e,t,r){const{normalize:i}=Qa[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Ot(e,rD);return{value:s,settings:o}}function iD(n,e,t,r,i,s){const{sanitize:o}=Qa[n];return o?o(e,t,r,i,s):e}function kx(n,e,t){const{format:r}=Qa[n];return r?r(e,t):e}function sD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ax(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ax(Object(t),!0).forEach(function(r){sD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ax(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Jo=(n,e,t)=>n>t?t:n<e?e:n,oD=n=>{if(n===""||typeof n=="number")return n;try{const e=Uo(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},aD=Math.log(10);function Rx(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/aD)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const rp=(n,e,t)=>t===e?0:(Jo(n,e,t)-e)/(t-e),ip=(n,e,t)=>n*(t-e)+e,lD=()=>"_"+Math.random().toString(36).substr(2,9),Mx=/\(([0-9+\-*/^ .]+)\)/,Px=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Dx=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Ix=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Nx=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Lx=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Uo(n){if(isNaN(Number(n)))if(Mx.test(n)){const e=n.replace(Mx,(t,r)=>String(Uo(r)));return Uo(e)}else if(Px.test(n)){const e=n.replace(Px,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Uo(e)}else if(Dx.test(n)){const e=n.replace(Dx,(t,r,i)=>String(Number(r)*Number(i)));return Uo(e)}else if(Ix.test(n)){const e=n.replace(Ix,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Uo(e)}else if(Nx.test(n)){const e=n.replace(Nx,(t,r,i)=>String(Number(r)+Number(i)));return Uo(e)}else if(Lx.test(n)){const e=n.replace(Lx,(t,r,i)=>String(Number(r)-Number(i)));return Uo(e)}else return Number(n);return Number(n)}function cD(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function uD(n,e){const t=Ve({},n);return e.forEach(r=>r in n&&delete t[r]),t}function fD(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function _T(n){return Object.prototype.toString.call(n)==="[object Object]"}const hD=n=>_T(n)&&Object.keys(n).length===0;let Gi;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Gi||(Gi={}));let Yi;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Yi||(Yi={}));const dD=["type","__customInput"],pD=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],mD=["type"];function yT(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Ve({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:T,__customInput:A}=n,k=Ot(n,dD);return yT(A,e,k,T)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:d,onChange:p,onEditStart:m,onEditEnd:v,transient:_}=n,y=Ot(n,pD),w=Ve({render:o,key:e,label:a??e,hint:d,transient:_??!!p,onEditStart:m,onEditEnd:v,disabled:u,optional:l,order:c},t);let{type:b}=y,C=Ot(y,mD);if(b=r??b,b in Gi)return{type:b,input:C,options:w};let O;return r&&_T(C)&&"value"in C?O=C.value:O=hD(C)?void 0:C,{type:b,input:O,options:Ve(Ve({},w),{},{onChange:p,optional:(i=w.optional)!==null&&i!==void 0?i:!1,disabled:(s=w.disabled)!==null&&s!==void 0?s:!1})}}function gD(n,e,t,r){const i=yT(n,e),{type:s,input:o,options:a}=i;if(s)return s in Gi?i:{type:s,input:Gg(s,o,t,r),options:a};let l=Ox(o);return l?{type:l,input:Gg(l,o,t,r),options:a}:(l=Ox({value:o}),l?{type:l,input:Gg(l,{value:o},t,r),options:a}:!1)}function Fx(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=xT({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const vD=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function xT({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=iD(n,o,t,e,i,s)}catch(l){throw new vD(`The value \`${r}\` did not result in a correct value.`,e,l)}return hf(a,e)?e:a}const wT=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},bT=n=>n.shiftKey?5:n.altKey?1/5:1;function _D(n,e){const t=console.error;console.error=()=>{},_b.render(n,e),console.error=t}const yD=["value"],xD=["min","max"],wD=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},ST=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Jo(i,e,t);return r?s+r:s},bD=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},TT=n=>{let{value:e}=n,t=Ot(n,yD);const{min:r=-1/0,max:i=1/0}=t,s=Ot(t,xD);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Jo(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?Rx(l)*10:Rx(o);l=l||c/10;const u=Math.round(Jo(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Ve({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},ET=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var CT=Object.freeze({__proto__:null,schema:wD,sanitize:ST,format:bD,normalize:TT,sanitizeStep:ET});function ln(){return ln=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ln.apply(this,arguments)}const OT=S.createContext({});function sr(){return S.useContext(OT)}const s1=S.createContext(null),kT=S.createContext(null),AT=S.createContext(null);function Jf(){return S.useContext(kT)}function SD(){return S.useContext(AT)}const RT=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Cd(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const ju={$inputStyle:()=>n=>Cd(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Cd(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Cd(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Cd(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ze,css:aW,createTheme:TD,globalCss:ED,keyframes:lW}=sT({prefix:"leva",theme:RT(),utils:Ve(Ve({},ju),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":ju.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":ju.$focusStyle()(n)}),$hover:n=>({"&:hover":ju.$hoverStyle()(n)}),$active:n=>({"&:active":ju.$activeStyle()(n)})})}),CD=ED({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function OD(n){const e=RT();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=TD(e);return{theme:e,className:t.className}}function ro(n,e){const{theme:t}=S.useContext(s1);if(!(n in t)||!(e in t[n]))return to(Kt.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const MT=ze("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),PT=ze("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${MT}`]:{paddingLeft:0}}),kD=ze(PT,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),AD=ze("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),RD=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],MD=["onUpdate"];function o1(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=Ot(n,RD);const{id:d,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=sr(),_=a||d,y=S.useRef(null),w=c>0,b=w?"textarea":"input",C=S.useCallback(A=>k=>{const R=k.currentTarget.value;A(R)},[]);j.useEffect(()=>{const A=y.current,k=C(R=>{r(R),m()});return A==null||A.addEventListener("blur",k),()=>A==null?void 0:A.removeEventListener("blur",k)},[C,r,m]);const O=S.useCallback(A=>{A.key==="Enter"&&C(r)(A)},[C,r]),T=Object.assign({as:b},w?{rows:c}:{},u);return j.createElement(AD,{textArea:w},e&&typeof e=="string"?j.createElement(PT,null,e):e,j.createElement(MT,ln({levaType:o,ref:y,id:_,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:C(i),onFocus:()=>p(),onKeyPress:O,onKeyDown:s,disabled:v},T)))}function PD(n){let{onUpdate:e}=n,t=Ot(n,MD);const r=S.useCallback(s=>e(oD(s)),[e]),i=S.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return j.createElement(o1,ln({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const sp=ze("div",{}),U0=ze("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),DD=ze("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${U0}::after`]:{opacity:.6},[`${sp}:hover > & + ${U0}::after`]:{opacity:.6},[`${sp}:hover > & > svg`]:{opacity:1}}),DT=ze("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${sp}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),IT=ze("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${DT} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),NT=ze(IT,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),ID=ze("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),ND=ze("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),z0=ze("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),LD=ze("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${z0}`]:{pointerEvents:"auto"}}}}}),LT=ze("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),FD=ze("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),UD=ze(K9,{fill:"$toolTipBackground"});function a1({children:n}){const{className:e}=S.useContext(s1);return j.createElement(mP,{className:e},n)}const zD=["align"];function BD(){const{id:n,disable:e,disabled:t}=sr();return j.createElement(j.Fragment,null,j.createElement(ND,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),j.createElement("label",{htmlFor:n+"__disable"}))}function jD(n){const{id:e,optional:t,hint:r}=sr(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return j.createElement(j.Fragment,null,t&&j.createElement(BD,null),r!==void 0?j.createElement(Y9,null,j.createElement(Z9,{asChild:!0},j.createElement(z0,ln({},i,n))),j.createElement(X9,{side:"top",sideOffset:2},j.createElement(FD,null,r,j.createElement(UD,null)))):j.createElement(z0,ln({},i,s,n)))}function es(n){let{align:e}=n,t=Ot(n,zD);const{value:r,label:i,key:s,disabled:o}=sr(),{hideCopyButton:a}=SD(),l=!a&&s!==void 0,[c,u]=S.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{to(Kt.CLIPBOARD_ERROR,{[s]:r})}};return j.createElement(ID,{align:e,onPointerLeave:()=>u(!1)},j.createElement(jD,t),l&&!o&&j.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},j.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),j.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):j.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},j.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),j.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const $D=["toggled"],VD=ze("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function l1(n){let{toggled:e}=n,t=Ot(n,$D);return j.createElement(VD,ln({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),j.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const HD=["input"];function Ii(n){let{input:e}=n,t=Ot(n,HD);return e?j.createElement(NT,t):j.createElement(IT,t)}function FT({value:n,type:e,settings:t,setValue:r}){const[i,s]=S.useState(kx(e,n,t)),o=S.useRef(n),a=S.useRef(t);a.current=t;const l=S.useCallback(u=>s(kx(e,u,a.current)),[e]),c=S.useCallback(u=>{try{r(u)}catch(d){const{type:p,previousValue:m}=d;if(p!=="LEVA_ERROR")throw d;l(m)}},[l,r]);return S.useEffect(()=>{hf(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function eh(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=sr();return sA(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function WD(n){const e=S.useRef(null),t=S.useRef(null),r=S.useRef(!1);return S.useEffect(()=>{const i=wT(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),S.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function UT(){const n=S.useRef(null),e=S.useRef({x:0,y:0}),t=S.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const GD=["__refCount"],qg=(n,e)=>{if(!n[e])return null;const t=n[e];return Ot(t,GD)};function qD(n){const e=Jf(),[t,r]=S.useState(qg(e.getData(),n)),i=S.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=S.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=S.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=S.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=S.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return S.useEffect(()=>{r(qg(e.getData(),n));const c=e.useStore.subscribe(u=>qg(u.data,n),r,{equalityFn:Qf});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const YD=ze("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),zT=ze("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),B0=ze("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),BT=ze("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),jT=ze("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ZD({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=S.useRef(null),a=S.useRef(null),l=S.useRef(0),c=ro("sizes","scrubberWidth"),u=eh(({event:p,first:m,xy:[v],movement:[_],memo:y})=>{if(m){const{width:b,left:C}=o.current.getBoundingClientRect();l.current=b-parseFloat(c),y=(p==null?void 0:p.target)===a.current?n:ip((v-C)/b,e,t)}const w=y+ip(_/l.current,0,t-e);return r(ET(w,{step:i,initialValue:s})),y}),d=rp(n,e,t);return j.createElement(BT,ln({ref:o},u()),j.createElement(zT,null,j.createElement(jT,{style:{left:0,right:`${(1-d)*100}%`}})),j.createElement(B0,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const XD=j.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=S.useState(!1),o=eh(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(d=>parseFloat(d)+Math.floor(u)*t*bT(c)),u=0),u));return j.createElement(kD,ln({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function $T({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&j.createElement(XD,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return j.createElement(PD,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function KD(){const n=sr(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return j.createElement(Ii,{input:!0},j.createElement(es,null,e),j.createElement(YD,{hasRange:l},l&&j.createElement(ZD,ln({value:parseFloat(t),onDrag:r},i)),j.createElement($T,ln({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:QD}=CT,JD=Ot(CT,["sanitizeStep"]);var eI=Ve({component:KD},JD);const tI=(n,e)=>Ir().schema({options:Ir().passesAnyOf(Ir().object(),Ir().array())}).test(e),nI=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},rI=(n,{values:e})=>e.indexOf(n),iI=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var sI=Object.freeze({__proto__:null,schema:tI,sanitize:nI,format:rI,normalize:iI});const oI=ze("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),j0=ze("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),aI=ze("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${j0}:focus + &`]:{$focusStyle:""},[`${j0}:hover + &`]:{$hoverStyle:""}});function lI({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=S.useRef();return e===a[n]&&(l.current=o[n]),j.createElement(oI,null,j.createElement(j0,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>j.createElement("option",{key:c,value:u},c))),j.createElement(aI,null,l.current),j.createElement(l1,{toggled:!0}))}function cI(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(lI,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var uI=Ve({component:cI},sI);const fI=n=>Ir().string().test(n),hI=n=>{if(typeof n!="string")throw Error("Invalid string");return n},dI=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var pI=Object.freeze({__proto__:null,schema:fI,sanitize:hI,normalize:dI});const mI=["displayValue","onUpdate","onChange","editable"],gI=ze("div",{whiteSpace:"pre-wrap"});function vI(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Ot(n,mI);return i?j.createElement(o1,ln({value:e,onUpdate:t,onChange:r},s)):j.createElement(gI,null,e)}function _I(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(vI,ln({displayValue:t,onUpdate:r,onChange:i},e)))}var yI=Ve({component:_I},pI);const xI=n=>Ir().boolean().test(n),wI=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var bI=Object.freeze({__proto__:null,schema:xI,sanitize:wI});const SI=ze("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function TI({value:n,onUpdate:e,id:t,disabled:r}){return j.createElement(SI,null,j.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),j.createElement("label",{htmlFor:t},j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function EI(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(TI,{value:e,onUpdate:t,id:i,disabled:r}))}var CI=Ve({component:EI},bI);const OI=["locked"];function kI({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=S.useRef(n[t]);o.current=n[t];const a=S.useCallback(c=>i({[t]:xT({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=FT({type:"NUMBER",value:n[t],settings:r,setValue:a});return j.createElement($T,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const AI=ze("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function RI(n){let{locked:e}=n,t=Ot(n,OI);return j.createElement("svg",ln({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?j.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):j.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function c1({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=sr(),{lock:o,locked:a}=t;return j.createElement(AI,{withLock:o},o&&j.createElement(RI,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>j.createElement(kI,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const VT=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=TT(Ve({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},MI=["lock"],PI=["value"];function DI(n){const e=Ir().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function II(n){return Array.isArray(n)?"array":"object"}function tf(n,e,t){return II(n)===e?n:e==="array"?Object.values(n):fD(n,t)}const NI=(n,e,t)=>{const r=tf(n,"object",e.keys);for(let o in r)r[o]=ST(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=tf(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let d in o)d===a?s[a]=l:s[d]=o[d]*u}else s=Ve(Ve({},o),r)}return tf(s,e.format,e.keys)},LI=(n,e)=>tf(n,"object",e.keys),FI=n=>!!n&&("step"in n||"min"in n||"max"in n);function UI(n,e,t=[]){const{lock:r=!1}=e,i=Ot(e,MI),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=tf(n,"object",o),l=FI(i)?o.reduce((u,d)=>Object.assign(u,{[d]:i}),{}):i,c=VT(a,l);return{value:s==="array"?n:a,settings:Ve(Ve({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function HT(n){return{schema:DI(n.length),normalize:e=>{let{value:t}=e,r=Ot(e,PI);return UI(t,r,n)},format:(e,t)=>LI(e,t),sanitize:(e,t,r)=>NI(e,t,r)}}var zI={grad:.9,turn:360,rad:360/(2*Math.PI)},Ys=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},In=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ci=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},WT=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Ux=function(n){return{r:Ci(n.r,0,255),g:Ci(n.g,0,255),b:Ci(n.b,0,255),a:Ci(n.a)}},Yg=function(n){return{r:In(n.r),g:In(n.g),b:In(n.b),a:In(n.a,3)}},BI=/^#([0-9a-f]{3,8})$/i,Od=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},GT=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},qT=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},zx=function(n){return{h:WT(n.h),s:Ci(n.s,0,100),l:Ci(n.l,0,100),a:Ci(n.a)}},Bx=function(n){return{h:In(n.h),s:In(n.s),l:In(n.l),a:In(n.a,3)}},jx=function(n){return qT((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},nf=function(n){return{h:(e=GT(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},jI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$I=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$0={string:[[function(n){var e=BI.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?In(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?In(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=VI.exec(n)||HI.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ux({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=jI.exec(n)||$I.exec(n);if(!e)return null;var t,r,i=zx({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(zI[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return jx(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Ys(e)&&Ys(t)&&Ys(r)?Ux({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Ys(e)||!Ys(t)||!Ys(r))return null;var o=zx({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return jx(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Ys(e)||!Ys(t)||!Ys(r))return null;var o=function(a){return{h:WT(a.h),s:Ci(a.s,0,100),v:Ci(a.v,0,100),a:Ci(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return qT(o)},"hsv"]]},$x=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},YT=function(n){return typeof n=="string"?$x(n.trim(),$0.string):typeof n=="object"&&n!==null?$x(n,$0.object):[null,void 0]},WI=function(n){return YT(n)[1]},Zg=function(n,e){var t=nf(n);return{h:t.h,s:Ci(t.s+100*e,0,100),l:t.l,a:t.a}},Xg=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Vx=function(n,e){var t=nf(n);return{h:t.h,s:t.s,l:Ci(t.l+100*e,0,100),a:t.a}},V0=function(){function n(e){this.parsed=YT(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return In(Xg(this.rgba),2)},n.prototype.isDark=function(){return Xg(this.rgba)<.5},n.prototype.isLight=function(){return Xg(this.rgba)>=.5},n.prototype.toHex=function(){return e=Yg(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Od(In(255*s)):"","#"+Od(t)+Od(r)+Od(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return Yg(this.rgba)},n.prototype.toRgbString=function(){return e=Yg(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return Bx(nf(this.rgba))},n.prototype.toHslString=function(){return e=Bx(nf(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=GT(this.rgba),{h:In(e.h),s:In(e.s),v:In(e.v),a:In(e.a,3)};var e},n.prototype.invert=function(){return vr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),vr(Zg(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),vr(Zg(this.rgba,-e))},n.prototype.grayscale=function(){return vr(Zg(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),vr(Vx(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),vr(Vx(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?vr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):In(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=nf(this.rgba);return typeof e=="number"?vr({h:e,s:t.s,l:t.l,a:t.a}):In(t.h)},n.prototype.isEqual=function(e){return this.toHex()===vr(e).toHex()},n}(),vr=function(n){return n instanceof V0?n:new V0(n)},Hx=[],GI=function(n){n.forEach(function(e){Hx.indexOf(e)<0&&(e(V0,$0),Hx.push(e))})};function qI(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var _=(a=u,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<d&&(d=_,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function $c(){return($c=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function u1(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function H0(n){var e=S.useRef(n),t=S.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var bc=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},rf=function(n){return"touches"in n},W0=function(n){return n&&n.ownerDocument.defaultView||self},Wx=function(n,e,t){var r=n.getBoundingClientRect(),i=rf(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:bc((i.pageX-(r.left+W0(n).pageXOffset))/r.width),top:bc((i.pageY-(r.top+W0(n).pageYOffset))/r.height)}},Gx=function(n){!rf(n)&&n.preventDefault()},f1=j.memo(function(n){var e=n.onMove,t=n.onKey,r=u1(n,["onMove","onKey"]),i=S.useRef(null),s=H0(e),o=H0(t),a=S.useRef(null),l=S.useRef(!1),c=S.useMemo(function(){var m=function(y){Gx(y),(rf(y)?y.touches.length>0:y.buttons>0)&&i.current?s(Wx(i.current,y,a.current)):_(!1)},v=function(){return _(!1)};function _(y){var w=l.current,b=W0(i.current),C=y?b.addEventListener:b.removeEventListener;C(w?"touchmove":"mousemove",m),C(w?"touchend":"mouseup",v)}return[function(y){var w=y.nativeEvent,b=i.current;if(b&&(Gx(w),!function(O,T){return T&&!rf(O)}(w,l.current)&&b)){if(rf(w)){l.current=!0;var C=w.changedTouches||[];C.length&&(a.current=C[0].identifier)}b.focus(),s(Wx(b,w,a.current)),_(!0)}},function(y){var w=y.which||y.keyCode;w<37||w>40||(y.preventDefault(),o({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},_]},[o,s]),u=c[0],d=c[1],p=c[2];return S.useEffect(function(){return p},[p]),j.createElement("div",$c({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),th=function(n){return n.filter(Boolean).join(" ")},h1=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=th(["react-colorful__pointer",n.className]);return j.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},j.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},wr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},ZT=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:wr(n.h),s:wr(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:wr(i/2),a:wr(r,2)}},G0=function(n){var e=ZT(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Kg=function(n){var e=ZT(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},XT=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:wr(255*[r,a,o,o,l,r][c]),g:wr(255*[l,r,r,a,o,o][c]),b:wr(255*[o,o,l,r,r,a][c]),a:wr(i,2)}},KT=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:wr(60*(a<0?a+6:a)),s:wr(s?o/s*100:0),v:wr(s/255*100),a:i}},QT=j.memo(function(n){var e=n.hue,t=n.onChange,r=th(["react-colorful__hue",n.className]);return j.createElement("div",{className:r},j.createElement(f1,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:bc(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":wr(e),"aria-valuemax":"360","aria-valuemin":"0"},j.createElement(h1,{className:"react-colorful__hue-pointer",left:e/360,color:G0({h:e,s:100,v:100,a:1})})))}),JT=j.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:G0({h:e.h,s:100,v:100,a:1})};return j.createElement("div",{className:"react-colorful__saturation",style:r},j.createElement(f1,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:bc(e.s+100*i.left,0,100),v:bc(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+wr(e.s)+"%, Brightness "+wr(e.v)+"%"},j.createElement(h1,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:G0(e)})))}),d1=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function eE(n,e,t){var r=H0(t),i=S.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=S.useRef({color:e,hsva:s});S.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),S.useEffect(function(){var c;d1(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=S.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var YI=typeof window<"u"?S.useLayoutEffect:S.useEffect,ZI=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},qx=new Map,tE=function(n){YI(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!qx.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,qx.set(e,t);var r=ZI();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},XI=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=u1(n,["className","colorModel","color","onChange"]),a=S.useRef(null);tE(a);var l=eE(t,i,s),c=l[0],u=l[1],d=th(["react-colorful",e]);return j.createElement("div",$c({},o,{ref:a,className:d}),j.createElement(JT,{hsva:c,onChange:u}),j.createElement(QT,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},KI=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+Kg(Object.assign({},t,{a:0}))+", "+Kg(Object.assign({},t,{a:1}))+")"},s=th(["react-colorful__alpha",e]),o=wr(100*t.a);return j.createElement("div",{className:s},j.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),j.createElement(f1,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:bc(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},j.createElement(h1,{className:"react-colorful__alpha-pointer",left:t.a,color:Kg(t)})))},QI=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=u1(n,["className","colorModel","color","onChange"]),a=S.useRef(null);tE(a);var l=eE(t,i,s),c=l[0],u=l[1],d=th(["react-colorful",e]);return j.createElement("div",$c({},o,{ref:a,className:d}),j.createElement(JT,{hsva:c,onChange:u}),j.createElement(QT,{hue:c.h,onChange:u}),j.createElement(KI,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},JI={defaultColor:{r:0,g:0,b:0,a:1},toHsva:KT,fromHsva:XT,equal:d1},e7=function(n){return j.createElement(QI,$c({},n,{colorModel:JI}))},t7={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return KT({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=XT(n)).r,g:e.g,b:e.b};var e},equal:d1},n7=function(n){return j.createElement(XI,$c({},n,{colorModel:t7}))};function ts(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Pt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Vc(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function r7(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function i7(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(r7(arguments[e]));return n}var s7=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function nh(n,e){var t=o7(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function o7(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=s7.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var a7=[".DS_Store","Thumbs.db"];function l7(n){return Pt(this,void 0,void 0,function(){return Vc(this,function(e){return op(n)&&c7(n)?[2,d7(n.dataTransfer,n.type)]:u7(n)?[2,f7(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,h7(n)]:[2,[]]})})}function c7(n){return op(n.dataTransfer)}function u7(n){return op(n)&&op(n.target)}function op(n){return typeof n=="object"&&n!==null}function f7(n){return q0(n.target.files).map(function(e){return nh(e)})}function h7(n){return Pt(this,void 0,void 0,function(){var e;return Vc(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return nh(r)})]}})})}function d7(n,e){return Pt(this,void 0,void 0,function(){var t,r;return Vc(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=q0(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(p7))]):[3,2];case 1:return r=i.sent(),[2,Yx(nE(r))];case 2:return[2,Yx(q0(n.files).map(function(s){return nh(s)}))]}})})}function Yx(n){return n.filter(function(e){return a7.indexOf(e.name)===-1})}function q0(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function p7(n){if(typeof n.webkitGetAsEntry!="function")return Zx(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?rE(e):Zx(n)}function nE(n){return n.reduce(function(e,t){return i7(e,Array.isArray(t)?nE(t):[t])},[])}function Zx(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=nh(e);return Promise.resolve(t)}function m7(n){return Pt(this,void 0,void 0,function(){return Vc(this,function(e){return[2,n.isDirectory?rE(n):g7(n)]})})}function rE(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Pt(o,void 0,void 0,function(){var l,c,u;return Vc(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),t(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(m7)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function g7(n){return Pt(this,void 0,void 0,function(){return Vc(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=nh(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var v7=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function Xx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xx(Object(t),!0).forEach(function(r){iE(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qx(n,e){return w7(n)||x7(n,e)||y7(n,e)||_7()}function _7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y7(n,e){if(n){if(typeof n=="string")return Jx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Jx(n,e)}}function Jx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function x7(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function w7(n){if(Array.isArray(n))return n}var b7="file-invalid-type",S7="file-too-large",T7="file-too-small",E7="too-many-files",C7=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:b7,message:"File type must be ".concat(t)}},ew=function(e){return{code:S7,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},tw=function(e){return{code:T7,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},O7={code:E7,message:"Too many files"};function sE(n,e){var t=n.type==="application/x-moz-file"||v7(n,e);return[t,t?null:C7(e)]}function oE(n,e,t){if($u(n.size))if($u(e)&&$u(t)){if(n.size>t)return[!1,ew(t)];if(n.size<e)return[!1,tw(e)]}else{if($u(e)&&n.size<e)return[!1,tw(e)];if($u(t)&&n.size>t)return[!1,ew(t)]}return[!0,null]}function $u(n){return n!=null}function k7(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=sE(a,t),c=Qx(l,1),u=c[0],d=oE(a,r,i),p=Qx(d,1),m=p[0];return u&&m})}function ap(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function kd(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function nw(n){n.preventDefault()}function A7(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function R7(n){return n.indexOf("Edge/")!==-1}function M7(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return A7(n)||R7(n)}function ys(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!ap(r)&&a&&a.apply(void 0,[r].concat(s)),ap(r)})}}function P7(){return"showOpenFilePicker"in window}function D7(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Kx(Kx({},e),{},iE({},t,[]))},{}):{}}]}function I7(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function N7(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var L7=["children"],F7=["open"],U7=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],z7=["refKey","onChange","onClick"];function B7(n){return V7(n)||$7(n)||aE(n)||j7()}function j7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function V7(n){if(Array.isArray(n))return Y0(n)}function Qg(n,e){return G7(n)||W7(n,e)||aE(n,e)||H7()}function H7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aE(n,e){if(n){if(typeof n=="string")return Y0(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y0(n,e)}}function Y0(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function W7(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function G7(n){if(Array.isArray(n))return n}function rw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rw(Object(t),!0).forEach(function(r){Z0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Z0(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lp(n,e){if(n==null)return{};var t=q7(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function q7(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var p1=S.forwardRef(function(n,e){var t=n.children,r=lp(n,L7),i=cE(r),s=i.open,o=lp(i,F7);return S.useImperativeHandle(e,function(){return{open:s}},[s]),j.createElement(S.Fragment,null,t(Xt(Xt({},o),{},{open:s})))});p1.displayName="Dropzone";var lE={disabled:!1,getFilesFromEvent:l7,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};p1.defaultProps=lE;p1.propTypes={children:gt.func,accept:gt.oneOfType([gt.string,gt.arrayOf(gt.string)]),multiple:gt.bool,preventDropOnDocument:gt.bool,noClick:gt.bool,noKeyboard:gt.bool,noDrag:gt.bool,noDragEventsBubbling:gt.bool,minSize:gt.number,maxSize:gt.number,maxFiles:gt.number,disabled:gt.bool,getFilesFromEvent:gt.func,onFileDialogCancel:gt.func,onFileDialogOpen:gt.func,useFsAccessApi:gt.bool,onDragEnter:gt.func,onDragLeave:gt.func,onDragOver:gt.func,onDrop:gt.func,onDropAccepted:gt.func,onDropRejected:gt.func,validator:gt.func};var X0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function cE(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Xt(Xt({},lE),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,y=e.onFileDialogOpen,w=e.useFsAccessApi,b=e.preventDropOnDocument,C=e.noClick,O=e.noKeyboard,T=e.noDrag,A=e.noDragEventsBubbling,k=e.validator,R=S.useMemo(function(){return typeof y=="function"?y:iw},[y]),P=S.useMemo(function(){return typeof _=="function"?_:iw},[_]),L=S.useRef(null),I=S.useRef(null),D=S.useReducer(Y7,X0),B=Qg(D,2),z=B[0],V=B[1],$=z.isFocused,K=z.isFileDialogActive,G=z.draggedFiles,H=S.useRef(typeof window<"u"&&window.isSecureContext&&w&&P7()),q=function(){!H.current&&K&&setTimeout(function(){if(I.current){var pe=I.current.files;pe.length||(V({type:"closeDialog"}),P())}},300)};S.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[I,K,P,H]);var F=S.useRef([]),W=function(pe){L.current&&L.current.contains(pe.target)||(pe.preventDefault(),F.current=[])};S.useEffect(function(){return b&&(document.addEventListener("dragover",nw,!1),document.addEventListener("drop",W,!1)),function(){b&&(document.removeEventListener("dragover",nw),document.removeEventListener("drop",W))}},[L,b]);var ee=S.useCallback(function(ie){ie.preventDefault(),ie.persist(),de(ie),F.current=[].concat(B7(F.current),[ie.target]),kd(ie)&&Promise.resolve(i(ie)).then(function(pe){ap(ie)&&!A||(V({draggedFiles:pe,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ie))})},[i,c,A]),ne=S.useCallback(function(ie){ie.preventDefault(),ie.persist(),de(ie);var pe=kd(ie);if(pe&&ie.dataTransfer)try{ie.dataTransfer.dropEffect="copy"}catch{}return pe&&d&&d(ie),!1},[d,A]),Z=S.useCallback(function(ie){ie.preventDefault(),ie.persist(),de(ie);var pe=F.current.filter(function(Be){return L.current&&L.current.contains(Be)}),we=pe.indexOf(ie.target);we!==-1&&pe.splice(we,1),F.current=pe,!(pe.length>0)&&(V({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),kd(ie)&&u&&u(ie))},[L,u,A]),oe=S.useCallback(function(ie,pe){var we=[],Be=[];ie.forEach(function(Ne){var Re=sE(Ne,t),He=Qg(Re,2),it=He[0],It=He[1],Ge=oE(Ne,o,s),ut=Qg(Ge,2),Ze=ut[0],Fe=ut[1],ot=k?k(Ne):null;if(it&&Ze&&!ot)we.push(Ne);else{var ct=[It,Fe];ot&&(ct=ct.concat(ot)),Be.push({file:Ne,errors:ct.filter(function(Vt){return Vt})})}}),(!a&&we.length>1||a&&l>=1&&we.length>l)&&(we.forEach(function(Ne){Be.push({file:Ne,errors:[O7]})}),we.splice(0)),V({acceptedFiles:we,fileRejections:Be,type:"setFiles"}),p&&p(we,Be,pe),Be.length>0&&v&&v(Be,pe),we.length>0&&m&&m(we,pe)},[V,a,t,o,s,l,p,m,v,k]),re=S.useCallback(function(ie){ie.preventDefault(),ie.persist(),de(ie),F.current=[],kd(ie)&&Promise.resolve(i(ie)).then(function(pe){ap(ie)&&!A||oe(pe,ie)}),V({type:"reset"})},[i,oe,A]),Q=S.useCallback(function(){if(H.current){V({type:"openDialog"}),R();var ie={multiple:a,types:D7(t)};window.showOpenFilePicker(ie).then(function(pe){return i(pe)}).then(function(pe){oe(pe,null),V({type:"closeDialog"})}).catch(function(pe){I7(pe)?(P(pe),V({type:"closeDialog"})):N7(pe)&&(H.current=!1,I.current&&(I.current.value=null,I.current.click()))});return}I.current&&(V({type:"openDialog"}),R(),I.current.value=null,I.current.click())},[V,R,P,w,oe,t,a]),_e=S.useCallback(function(ie){!L.current||!L.current.isEqualNode(ie.target)||(ie.key===" "||ie.key==="Enter"||ie.keyCode===32||ie.keyCode===13)&&(ie.preventDefault(),Q())},[L,Q]),xe=S.useCallback(function(){V({type:"focus"})},[]),ce=S.useCallback(function(){V({type:"blur"})},[]),ue=S.useCallback(function(){C||(M7()?setTimeout(Q,0):Q())},[C,Q]),Ee=function(pe){return r?null:pe},Ie=function(pe){return O?null:Ee(pe)},J=function(pe){return T?null:Ee(pe)},de=function(pe){A&&pe.stopPropagation()},be=S.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ie.refKey,we=pe===void 0?"ref":pe,Be=ie.role,Ne=ie.onKeyDown,Re=ie.onFocus,He=ie.onBlur,it=ie.onClick,It=ie.onDragEnter,Ge=ie.onDragOver,ut=ie.onDragLeave,Ze=ie.onDrop,Fe=lp(ie,U7);return Xt(Xt(Z0({onKeyDown:Ie(ys(Ne,_e)),onFocus:Ie(ys(Re,xe)),onBlur:Ie(ys(He,ce)),onClick:Ee(ys(it,ue)),onDragEnter:J(ys(It,ee)),onDragOver:J(ys(Ge,ne)),onDragLeave:J(ys(ut,Z)),onDrop:J(ys(Ze,re)),role:typeof Be=="string"&&Be!==""?Be:"button"},we,L),!r&&!O?{tabIndex:0}:{}),Fe)}},[L,_e,xe,ce,ue,ee,ne,Z,re,O,T,r]),fe=S.useCallback(function(ie){ie.stopPropagation()},[]),ge=S.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ie.refKey,we=pe===void 0?"ref":pe,Be=ie.onChange,Ne=ie.onClick,Re=lp(ie,z7),He=Z0({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Ee(ys(Be,re)),onClick:Ee(ys(Ne,fe)),tabIndex:-1},we,I);return Xt(Xt({},He),Re)}},[I,t,a,re,r]),me=G.length,he=me>0&&k7({files:G,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Ae=me>0&&!he;return Xt(Xt({},z),{},{isDragAccept:he,isDragReject:Ae,isFocused:$&&!r,getRootProps:be,getInputProps:ge,rootRef:L,inputRef:I,open:Ee(Q)})}function Y7(n,e){switch(e.type){case"focus":return Xt(Xt({},n),{},{isFocused:!0});case"blur":return Xt(Xt({},n),{},{isFocused:!1});case"openDialog":return Xt(Xt({},X0),{},{isFileDialogActive:!0});case"closeDialog":return Xt(Xt({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Xt(Xt({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Xt(Xt({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Xt({},X0);default:return n}}function iw(){}function Z7(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const X7=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sw=X7?S.useEffect:S.useLayoutEffect;function K7(n){const e=typeof n=="function"?Z7(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=S.useReducer(y=>y+1,0),o=e.getState(),a=S.useRef(o),l=S.useRef(r),c=S.useRef(i),u=S.useRef(!1),d=S.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),sw(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=S.useRef(o);sw(()=>{const y=()=>{try{const b=e.getState(),C=l.current(b);c.current(d.current,C)||(a.current=b,d.current=C,s())}catch{u.current=!0,s()}},w=e.subscribe(y);return e.getState()!==v.current&&y(),w},[]);const _=m?p:d.current;return S.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const Q7=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=p=>{const m=o(p);if(!u(d,m)){const v=d;a(d=m,v)}},l!=null&&l.fireImmediately&&a(d,d)}return i(c)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var J7=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var e6=J7;function ow(n){return e6(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var uE=function(e){var t,r;return!(ow(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,ow(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t6=uE,m1=function(e){return t6(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n6=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},r6=m1,i6=n6;function fE(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];K0(i)&&i6(i,s6,n)}return n}function s6(n,e){if(o6(e)){var t=this[e];K0(n)&&K0(t)?fE(t,n):this[e]=n}}function K0(n){return r6(n)&&!Array.isArray(n)}function o6(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var a6=fE;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var l6=function(n,e,t,r,i){if(!c6(n)||!e)return n;if(e=Ad(e),t&&(e+="."+Ad(t)),r&&(e+="."+Ad(r)),i&&(e+="."+Ad(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function c6(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Ad(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var u6=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r},f6=m1,h6=u6,d6=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");aw(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];m6(t)&&(t=g6(t)),aw(t)&&(p6(n,t),h6(n,t))}return n};function p6(n,e){for(var t in e)v6(e,t)&&(n[t]=e[t])}function m6(n){return n&&typeof n=="string"}function g6(n){var e={};for(var t in n)e[t]=n[t];return e}function aw(n){return n&&typeof n=="object"||f6(n)}function v6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var _6=d6,y6=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=_6({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,u=n.length,d=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++d<u;){var v=n[d],_=n[d+1],y={val:v,idx:d,arr:l,str:n};if(o.push(y),v==="\\"){y.val=w6(r,n,d)===!0?v+_:_,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,d++;continue}if(s&&s[v]){a.push(v);var w=m(),b=d+1;if(n.indexOf(w,b+1)!==-1)for(;a.length&&b<u;){var C=n[++b];if(C==="\\"){C++;continue}if(i.indexOf(C)!==-1){b=Q0(n,C,b+1);continue}if(w=m(),a.length&&n.indexOf(w,b+1)===-1)break;if(s[C]){a.push(C);continue}w===C&&a.pop()}if(p=b,p===-1){l[l.length-1]+=v;continue}v=n.slice(d,p+1),y.val=v,y.idx=d=p}if(i.indexOf(v)!==-1){if(p=Q0(n,v,d+1),p===-1){l[l.length-1]+=v;continue}x6(v,r)===!0?v=n.slice(d,p+1):v=n.slice(d+1,p),y.val=v,y.idx=d=p}if(typeof t=="function"&&(t(y,o),v=y.val,d=y.idx),y.val===c&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function Q0(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?Q0(n,e,i+1):i}function x6(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function w6(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var b6=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},lw=b6,S6=function(e){lw(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];lw(i)&&T6(e,i)}return e};function T6(n,e){for(var t in e)E6(e,t)&&(n[t]=e[t])}function E6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var C6=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var O6=y6,k6=S6,cw=uE,uw=C6,A6=function(n,e,t){if(!uw(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=O6(e,{sep:".",brackets:!0}).filter(R6),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){uw(o[a])||(o[a]={}),o=o[a];continue}cw(o[a])&&cw(t)?o[a]=k6({},o[a],t):o[a]=t}return n};function R6(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Jg=m1,fw=a6,M6=l6,hw=A6,P6=function(e,t,r){if(!Jg(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return fw.apply(null,arguments);if(typeof r=="string")return hw(e,t,r),e;var i=M6(e,t);return Jg(r)&&Jg(i)&&(r=fw({},i,r)),hw(e,t,r),e};const D6=jp(P6),g1=(...n)=>n.filter(Boolean).join(".");function I6(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function N6(n,e){return Object.entries(cD(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function L6(n,e){const t=S.useRef();return(e?hf:Qf)(n,t.current)||(t.current=n),t.current}function hE(n,e){return S.useMemo(n,L6(e,!0))}function F6(n){const e=S.useRef(null),t=S.useRef(null),r=S.useRef(!0);return S.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),S.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const U6=n=>{const[e,t]=S.useState(n.getVisiblePaths());return S.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:Qf});return()=>r()},[n]),e};function z6(n,e,t){return n.useStore(i=>{const s=Ve(Ve({},t),i.data);return N6(s,e)},Qf)}function dE(n=3){const e=S.useRef(null),t=S.useRef(null),[r,i]=S.useState(!1),s=S.useCallback(()=>i(!0),[]),o=S.useCallback(()=>i(!1),[]);return S.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),d=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",d==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}GI([qI]);const B6={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Ir.extend({color:()=>n=>vr(n).isValid()});const j6=n=>Ir().color().test(n);function pE(n,{format:e,hasAlpha:t,isString:r}){const i=B6[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?uD(s,["a"]):s}const mE=(n,e)=>{const t=vr(n);if(!t.isValid())throw Error("Invalid color");return pE(t,e)},$6=(n,e)=>pE(vr(n),Ve(Ve({},e),{},{isString:!0,format:"hex"})),V6=({value:n})=>{const e=WI(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:mE(n,i),settings:i}};var H6=Object.freeze({__proto__:null,schema:j6,sanitize:mE,format:$6,normalize:V6});const W6=ze("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),G6=ze("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),q6=ze("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function dw(n,e){return e!=="rgb"?vr(n).toRgb():n}function Y6({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=sr(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:p}=dE(),m=S.useRef(0),[v,_]=S.useState(()=>dw(n,o)),y=a?e7:n7,w=()=>{_(dw(n,o)),d(),i()},b=()=>{p(),s(),window.clearTimeout(m.current)},C=()=>{m.current=window.setTimeout(b,500)};return S.useEffect(()=>()=>window.clearTimeout(m.current),[]),j.createElement(j.Fragment,null,j.createElement(W6,{ref:l,active:u,onClick:()=>w(),style:{color:e}}),u&&j.createElement(a1,null,j.createElement(LT,{onPointerUp:b}),j.createElement(q6,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:O=>O.buttons===0&&C()},j.createElement(y,{color:v,onChange:r}))))}function Z6(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,t),j.createElement(G6,null,j.createElement(Y6,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),j.createElement(o1,{value:e,onChange:r,onUpdate:i})))}var X6=Ve({component:Z6},H6);function K6(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(c1,{value:e,settings:r,onUpdate:t}))}var Q6=Ve({component:K6},HT(["x","y","z"]));const J6=ze("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),e8=ze("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function t8({value:n,settings:e,onUpdate:t}){const r=S.useRef(),i=S.useRef(0),s=S.useRef(0),o=S.useRef(1),[a,l]=S.useState(!1),[c,u]=S.useState(!1),[d,p]=UT(),m=S.useRef(null),v=S.useRef(null);S.useLayoutEffect(()=>{if(a){const{top:D,left:B,width:z,height:V}=m.current.getBoundingClientRect();v.current.style.left=B+z/2+"px",v.current.style.top=D+V/2+"px"}},[a]);const{keys:[_,y],joystick:w}=e,b=w==="invertY"?1:-1,{[_]:{step:C},[y]:{step:O}}=e,T=ro("sizes","joystickWidth"),A=ro("sizes","joystickHeight"),k=parseFloat(T)*.8/2,R=parseFloat(A)*.8/2,P=S.useCallback(()=>{r.current||(u(!0),i.current&&p({x:i.current*k}),s.current&&p({y:s.current*-R}),r.current=window.setInterval(()=>{t(D=>{const B=C*i.current*o.current,z=b*O*s.current*o.current;return Array.isArray(D)?{[_]:D[0]+B,[y]:D[1]+z}:{[_]:D[_]+B,[y]:D[y]+z}})},16))},[k,R,t,p,C,O,_,y,b]),L=S.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);S.useEffect(()=>{function D(B){o.current=bT(B)}return window.addEventListener("keydown",D),window.addEventListener("keyup",D),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",D),window.removeEventListener("keyup",D)}},[]);const I=eh(({first:D,active:B,delta:[z,V],movement:[$,K]})=>{D&&l(!0);const G=Jo($,-k,k),H=Jo(K,-R,R);i.current=Math.abs($)>Math.abs(G)?Math.sign($-G):0,s.current=Math.abs(K)>Math.abs(H)?Math.sign(H-K):0;let q=n[_],F=n[y];B?(i.current||(q+=z*C*o.current,p({x:G})),s.current||(F-=b*V*O*o.current,p({y:H})),i.current||s.current?P():L(),t({[_]:q,[y]:F})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),L())});return j.createElement(J6,ln({ref:m},I()),a&&j.createElement(a1,null,j.createElement(e8,{ref:v,isOutOfBounds:c},j.createElement("div",null),j.createElement("span",{ref:d}))))}const n8=ze("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function r8(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sr();return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(n8,{withJoystick:!!r.joystick},r.joystick&&j.createElement(t8,{value:e,settings:r,onUpdate:t}),j.createElement(c1,{value:e,settings:r,onUpdate:t})))}const i8=["joystick"],gE=HT(["x","y"]),s8=n=>{let{joystick:e=!0}=n,t=Ot(n,i8);const{value:r,settings:i}=gE.normalize(t);return{value:r,settings:Ve(Ve({},i),{},{joystick:e})}};var o8=Ve(Ve({component:r8},gE),{},{normalize:s8});const a8=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},l8=(n,e)=>typeof e=="object"&&"image"in e,c8=({image:n})=>({value:n});var u8=Object.freeze({__proto__:null,sanitize:a8,schema:l8,normalize:c8});const f8=ze("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),h8=ze("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),d8=ze("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),p8=ze("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),m8=ze("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),g8=ze("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function v8(){const{label:n,value:e,onUpdate:t,disabled:r}=sr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=dE(),c=S.useCallback(v=>{v.length&&t(v[0])},[t]),u=S.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:d,getInputProps:p,isDragAccept:m}=cE({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(f8,null,j.createElement(d8,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&j.createElement(a1,null,j.createElement(LT,{onPointerUp:l,style:{cursor:"pointer"}}),j.createElement(p8,{ref:s,style:{backgroundImage:`url(${e})`}})),j.createElement(h8,d({isDragAccept:m}),j.createElement("input",p()),j.createElement(m8,null,m?"drop image":"click or drop")),j.createElement(g8,{onClick:u,disabled:!e})))}var _8=Ve({component:v8},u8);const pw=Ir().number(),y8=(n,e)=>Ir().array().length(2).every.number().test(n)&&Ir().schema({min:pw,max:pw}).test(e),cp=n=>({min:n[0],max:n[1]}),vE=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?cp(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=Ve(Ve({},s),i);return[Jo(Number(o),e,Math.max(e,a)),Jo(Number(a),Math.min(t,o),t)]},x8=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=VT(cp(n),{min:r,max:r}),s=[e,t],o=Ve(Ve({},i),{},{bounds:s});return{value:vE(cp(n),o,n),settings:o}};var w8=Object.freeze({__proto__:null,schema:y8,format:cp,sanitize:vE,normalize:x8});const b8=["value","bounds","onDrag"],S8=["bounds"],T8=ze("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function E8(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Ot(n,b8);const o=S.useRef(null),a=S.useRef(null),l=S.useRef(null),c=S.useRef(0),u=ro("sizes","scrubberWidth"),d=eh(({event:v,first:_,xy:[y],movement:[w],memo:b={}})=>{if(_){const{width:O,left:T}=o.current.getBoundingClientRect();c.current=O-parseFloat(u);const A=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;b.pos=ip((y-T)/O,t,r);const k=Math.abs(b.pos-e.min)-Math.abs(b.pos-e.max);b.key=k<0||k===0&&b.pos<=e.min?"min":"max",A&&(b.pos=e[b.key])}const C=b.pos+ip(w/c.current,0,r-t);return i({[b.key]:QD(C,s[b.key])}),b}),p=`calc(${rp(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-rp(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return j.createElement(BT,ln({ref:o},d()),j.createElement(zT,null,j.createElement(jT,{style:{left:p,right:m}})),j.createElement(B0,{position:"left",ref:a,style:{left:p}}),j.createElement(B0,{position:"right",ref:l,style:{right:m}}))}function C8(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sr(),i=Ot(r,S8);return j.createElement(j.Fragment,null,j.createElement(Ii,{input:!0},j.createElement(es,null,n),j.createElement(T8,null,j.createElement(E8,ln({value:e},r,{onDrag:t})),j.createElement(c1,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var O8=Ve({component:C8},w8);const k8=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},A8=["type","value"],R8=["onChange","transient","onEditStart","onEditEnd"],M8=function(){const e=K7(Q7(()=>({data:{}}))),t=k8();this.storeId=lD(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,d])=>{d.render&&a.some(p=>p.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Gi&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{let p=c[u];if(p){const{type:m,value:v}=d,_=Ot(d,A8);m!==p.type?to(Kt.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,_),p.__refCount++)}else c[u]=Ve(Ve({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return Fx(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Ve(Ve({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{try{Fx(c[u],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{to(Kt.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Ve(Ve({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Ve(Ve({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,d])=>{if(u==="")return to(Kt.EMPTY_KEY);let p=g1(a,u);if(d.type===Gi.FOLDER){const m=s(d.schema,p,l);Object.assign(c,m),p in r||(r[p]=d.settings)}else if(u in l)to(Kt.DUPLICATE_KEYS,u,p,l[u].path);else{const m=gD(d,u,p,c);if(m){const{type:v,options:_,input:y}=m,{onChange:w,transient:b,onEditStart:C,onEditEnd:O}=_,T=Ot(_,R8);c[p]=Ve(Ve(Ve({type:v},T),y),{},{fromPanel:!0}),l[u]={path:p,onChange:w,transient:b,onEditStart:C,onEditEnd:O}}else to(Kt.UNKNOWN_INPUT,p,d)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},_E=new M8,P8={collapsed:!1};function D8(n,e){return{type:Gi.FOLDER,schema:n,settings:Ve(Ve({},P8),e)}}const mw=n=>"__levaInput"in n,I8=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=I6(i);(!r||s.toLowerCase().indexOf(r)>-1)&&D6(t,o,{[s]:{__levaInput:!0,path:i}})}),t},N8=["type","label","path","valueKey","value","settings","setValue","disabled"];function L8(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=Ot(n,N8);const{displayValue:u,onChange:d,onUpdate:p}=FT({type:e,value:s,settings:o,setValue:a}),m=Qa[e].component;return m?j.createElement(OT.Provider,{value:Ve({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:d,onUpdate:p,settings:o,setValue:a,disabled:l},c)},j.createElement(LD,{disabled:l},j.createElement(m,null))):(to(Kt.NO_COMPONENT_FOR_TYPE,e,r),null)}const F8=ze("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function U8({onClick:n,settings:e,label:t}){const r=Jf();return j.createElement(Ii,null,j.createElement(F8,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const z8=ze("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),B8=ze("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),j8=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function $8(n){const{label:e,opts:t}=j8(n),r=Jf();return j.createElement(Ii,{input:!!e},e&&j.createElement(es,null,e),j.createElement(z8,null,Object.entries(t).map(([i,s])=>j.createElement(B8,{key:i,onClick:()=>s(r.get)},i))))}const V8=ze("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),yE=100;function H8(n,e){n.push(e),n.length>yE&&n.shift()}const W8=S.forwardRef(function({initialValue:n},e){const t=ro("colors","highlight3"),r=ro("colors","elevation2"),i=ro("colors","highlight1"),[s,o]=S.useMemo(()=>[vr(i).alpha(.4).toRgbString(),vr(i).alpha(.1).toRgbString()],[i]),a=S.useRef([n]),l=S.useRef(n),c=S.useRef(n),u=S.useRef(),d=S.useCallback((v,_)=>{if(!v)return;const{width:y,height:w}=v,b=new Path2D,C=y/yE,O=w*.05;for(let k=0;k<a.current.length;k++){const R=rp(a.current[k],l.current,c.current),P=C*k,L=w-R*(w-O*2)-O;b.lineTo(P,L)}_.clearRect(0,0,y,w);const T=new Path2D(b);T.lineTo(C*(a.current.length+1),w),T.lineTo(0,w),T.lineTo(0,0);const A=_.createLinearGradient(0,0,0,w);A.addColorStop(0,s),A.addColorStop(1,o),_.fillStyle=A,_.fill(T),_.strokeStyle=r,_.lineJoin="round",_.lineWidth=14,_.stroke(b),_.strokeStyle=t,_.lineWidth=2,_.stroke(b)},[t,r,s,o]),[p,m]=WD(d);return S.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),H8(a.current,v),u.current=requestAnimationFrame(()=>d(p.current,m.current))}}),[p,m,d]),S.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),j.createElement(V8,{ref:p})}),gw=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),G8=S.forwardRef(function({initialValue:n},e){const[t,r]=S.useState(gw(n));return S.useImperativeHandle(e,()=>({frame:i=>r(gw(i))}),[]),j.createElement("div",null,t)});function vw(n){return typeof n=="function"?n():n.current}function q8({label:n,objectOrFn:e,settings:t}){const r=S.useRef(),i=S.useRef(vw(e));return S.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(vw(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),j.createElement(Ii,{input:!0},j.createElement(es,{align:"top"},n),t.graph?j.createElement(W8,{ref:r,initialValue:i.current}):j.createElement(G8,{ref:r,initialValue:i.current}))}const Y8=["type","label","key"],Z8={[Gi.BUTTON]:U8,[Gi.BUTTON_GROUP]:$8,[Gi.MONITOR]:q8},X8=j.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=qD(n);if(!e)return null;const{type:l,label:c,key:u}=e,d=Ot(e,Y8);if(l in Gi){const p=Z8[l];return j.createElement(p,ln({label:c,path:n},d))}return l in Qa?j.createElement(L8,ln({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},d)):(eD(Kt.UNSUPPORTED_INPUT,l,n),null)});function K8({toggle:n,toggled:e,name:t}){return j.createElement(DD,{onClick:()=>n()},j.createElement(l1,{toggled:e}),j.createElement("div",null,t))}const Q8=({name:n,path:e,tree:t})=>{const r=Jf(),i=g1(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=S.useState(!s),c=S.useRef(null),u=ro("colors","folderWidgetColor"),d=ro("colors","folderTextColor");return S.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||d)},[o,u,d]),j.createElement(sp,{ref:c},j.createElement(K8,{name:n,toggled:a,toggle:()=>l(p=>!p)}),j.createElement(xE,{parent:i,tree:t,toggled:a}))},xE=j.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=F6(s),l=Jf(),c=([d,p])=>{var m;return(mw(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(g1(r,d)).order)||0},u=Object.entries(i).sort((d,p)=>c(d)-c(p));return j.createElement(U0,{ref:o,isRoot:n,fill:e,flat:t},j.createElement(DT,{ref:a,isRoot:n,toggled:s},u.map(([d,p])=>mw(p)?j.createElement(X8,{key:p.path,valueKey:p.valueKey,path:p.path}):j.createElement(Q8,{key:d,name:d,path:r,tree:p}))))}),J8=ze("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${NT}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),wE=40,up=ze("i",{$flexCenter:"",width:wE,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),eN=ze("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),tN=ze("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${up}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),nN=ze("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),rN=ze("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:wE}}}}),iN=j.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=S.useState(""),s=S.useMemo(()=>wT(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return S.useEffect(()=>{s(r)},[r,s]),j.createElement(j.Fragment,null,j.createElement(nN,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),j.createElement(up,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function sN({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,d]=S.useState(!1),p=S.useRef(null);S.useEffect(()=>{var v,_;u?(v=p.current)===null||v===void 0||v.focus():(_=p.current)===null||_===void 0||_.blur()},[u]);const m=eh(({offset:[v,_],first:y,last:w})=>{e({x:v,y:_}),y&&t({x:v,y:_}),w&&r({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||_]});return S.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&d(y=>!y)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),j.createElement(j.Fragment,null,j.createElement(eN,{mode:a?"drag":void 0},j.createElement(up,{active:!s,onClick:()=>i()},j.createElement(l1,{toggled:s,width:12,height:8})),j.createElement(rN,ln({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?j.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},j.createElement("circle",{cx:"2",cy:"2",r:"2"}),j.createElement("circle",{cx:"14",cy:"2",r:"2"}),j.createElement("circle",{cx:"26",cy:"2",r:"2"}),j.createElement("circle",{cx:"2",cy:"12",r:"2"}),j.createElement("circle",{cx:"14",cy:"12",r:"2"}),j.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&j.createElement(up,{active:u,onClick:()=>d(v=>!v)},j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},j.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),j.createElement(tN,{toggled:u},j.createElement(iN,{ref:p,setFilter:n,toggle:i})))}const oN=["store","hidden","theme","collapsed"];function aN(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Ot(n,oN);const o=hE(()=>OD(r),[r]),[a,l]=S.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=S.useMemo(()=>typeof i=="object"?d=>{typeof d=="function"?i.onChange(!d(!i.collapsed)):i.onChange(!d)}:l,[i]);return!e||t?null:j.createElement(s1.Provider,{value:o},j.createElement(lN,ln({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const lN=j.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,d;const p=U6(n),[m,v]=S.useState(""),_=S.useMemo(()=>I8(p,m),[p,m]),[y,w]=UT(),b=i||p.length>0,C=typeof o=="object"&&o.title||void 0,O=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,T=typeof o=="object"&&(d=o.filter)!==null&&d!==void 0?d:!0,A=typeof o=="object"&&o.position||void 0,k=typeof o=="object"&&o.onDrag||void 0,R=typeof o=="object"&&o.onDragStart||void 0,P=typeof o=="object"&&o.onDragEnd||void 0;return j.useEffect(()=>{w({x:A==null?void 0:A.x,y:A==null?void 0:A.y})},[A,w]),CD(),j.createElement(AT.Provider,{value:{hideCopyButton:a}},j.createElement(J8,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:b?"block":"none"}},o&&j.createElement(sN,{onDrag:L=>{w(L),k==null||k(L)},onDragStart:L=>R==null?void 0:R(L),onDragEnd:L=>P==null?void 0:P(L),setFilter:v,toggle:L=>c(I=>L??!I),toggled:l,title:C,drag:O,filterEnabled:T,from:A}),b&&j.createElement(kT.Provider,{value:n},j.createElement(xE,{isRoot:!0,fill:t,flat:r,tree:_,toggled:l}))))}),cN=["isRoot"];let fp=!1,Fa=null;function uN(n){let{isRoot:e=!1}=n,t=Ot(n,cN);return S.useEffect(()=>(fp=!0,!e&&Fa&&(Fa.remove(),Fa=null),()=>{e||(fp=!1)}),[e]),j.createElement(aN,ln({store:_E},t))}function fN(n){S.useEffect(()=>{n&&!fp&&(Fa||(Fa=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Fa),_D(j.createElement(uN,{isRoot:!0}),Fa))),fp=!0)},[n])}function hN(n,e,t,r,i){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=r):(a=t,Array.isArray(r)?c=r:(l=r,c=i)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function bE(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=hN(n,e,t,r,i),u=typeof o=="function",d=S.useRef(!1),p=S.useRef(!0),m=hE(()=>{d.current=!0;const I=typeof o=="function"?o():o;return s?{[s]:D8(I,a)}:I},c),v=!(l!=null&&l.store);fN(v);const[_]=S.useState(()=>(l==null?void 0:l.store)||_E),[y,w]=S.useMemo(()=>_.getDataFromSchema(m),[_,m]),[b,C,O,T,A]=S.useMemo(()=>{const I=[],D=[],B={},z={},V={};return Object.values(w).forEach(({path:$,onChange:K,onEditStart:G,onEditEnd:H,transient:q})=>{I.push($),K?(B[$]=K,q||D.push($)):D.push($),G&&(z[$]=G),H&&(V[$]=H)}),[I,D,B,z,V]},[w]),k=S.useMemo(()=>_.orderPaths(b),[b,_]),R=z6(_,C,y),P=S.useCallback(I=>{const D=Object.entries(I).reduce((B,[z,V])=>Object.assign(B,{[w[z].path]:V}),{});_.set(D,!1)},[_,w]),L=S.useCallback(I=>_.get(w[I].path),[_,w]);return S.useEffect(()=>{const I=!p.current&&d.current;return _.addData(y,I),p.current=!1,d.current=!1,()=>_.disposePaths(k)},[_,k,y]),S.useEffect(()=>{const I=[];return Object.entries(O).forEach(([D,B])=>{B(_.get(D),D,Ve({initial:!0,get:_.get},_.getInput(D)));const z=_.useStore.subscribe(V=>{const $=V.data[D];return[$.disabled?void 0:$.value,$]},([V,$])=>B(V,D,Ve({initial:!1,get:_.get},$)),{equalityFn:Qf});I.push(z)}),()=>I.forEach(D=>D())},[_,O]),S.useEffect(()=>{const I=[];return Object.entries(T).forEach(([D,B])=>I.push(_.subscribeToEditStart(D,B))),Object.entries(A).forEach(([D,B])=>I.push(_.subscribeToEditEnd(D,B))),()=>I.forEach(D=>D())},[T,A,_]),u?[R,P,L]:R}_o(Yi.SELECT,uI);_o(Yi.IMAGE,_8);_o(Yi.NUMBER,eI);_o(Yi.COLOR,X6);_o(Yi.STRING,yI);_o(Yi.BOOLEAN,CI);_o(Yi.INTERVAL,O8);_o(Yi.VECTOR3D,Q6);_o(Yi.VECTOR2D,o8);function gn(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var dN=["color"],SE=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,dN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),pN=["color"],mN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,pN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gN=["color"],vN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,gN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_N=["color"],yN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,_N);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xN=["color"],wN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,xN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bN=["color"],SN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,bN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),TN=["color"],EN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,TN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),CN=["color"],ON=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,CN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kN=["color"],J0=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,kN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),AN=["color"],RN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,AN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),MN=["color"],PN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,MN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DN=["color"],IN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,DN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),NN=["color"],LN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,NN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),FN=["color"],UN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,FN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zN=["color"],BN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,zN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),jN=["color"],$N=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,jN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),VN=["color"],HN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,VN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),WN=["color"],GN=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,WN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),qN=["color"],TE=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,qN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:r}))}),YN=["color"],EE=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,YN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:r}))}),ZN=["color"],CE=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=gn(n,ZN);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function XN(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KN(n){var e=XN(n,"string");return typeof e=="symbol"?e:String(e)}function QN(n,e,t){return e=KN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ev(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_w(Object(t),!0).forEach(function(r){QN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_w(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const bi={value:0,fpsLimit:60,isOverLimit:0},Vu=n=>(n==null?void 0:n.reduce((e,t)=>e+t,0))/n.length;class JN{constructor(e={}){this.names=[""],this.finished=[],this.gl=void 0,this.extension=void 0,this.query=void 0,this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,e),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=Nv.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let e=0;const t=r=>{++e<20?this.rafId=window.requestAnimationFrame(t):(this.detected=Math.ceil(1e3*e/(r-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=r)};this.rafId=window.requestAnimationFrame(t)}addUI(e){this.names.indexOf(e)===-1&&(this.names.push(e),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(e){const t=16.666666666666668,r=t-e.timeRemaining(),i=t*bi.fpsLimit/10/r;i<0||(bi.value=i,bi.isOverLimit<25?bi.isOverLimit++:at.setState({overclockingFps:!0}))}nextFrame(e){this.frameId++;const t=e||this.now();let r=t-this.paramTime,i=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else if(t>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const s=this.frameId-this.paramFrame,o=s*1e3/r,a=at.getState().overclockingFps?bi.value:o;if(i=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/r,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const l=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=l.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(o),this.logsAccums.fps.push(a),this.logsAccums.gpu.push(i),this.overClock&&typeof window.requestIdleCallback<"u"&&(bi.isOverLimit>0&&a>o?bi.isOverLimit--:at.getState().overclockingFps&&at.setState({overclockingFps:!1})),t>=this.paramTime+180&&(this.paramLogger({cpu:Vu(this.logsAccums.cpu),gpu:Vu(this.logsAccums.gpu),mem:Vu(this.logsAccums.mem),fps:Vu(this.logsAccums.fps),duration:Math.round(r),maxMemory:this.maxMemory,frameCount:s}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=t),this.overClock&&t-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=e,bi.fpsLimit=Math.round(Vu(this.logsAccums.fpsFixed)/10)*100,at.setState({fpsLimit:bi.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=t)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0;else{const s=t-this.chartTime;let o=this.chartHz*s/1e3;for(;--o>0&&this.detected;){const l=(this.frameId-this.chartFrame)/s*1e3,c=at.getState().overclockingFps?bi.value:l;this.fpsChart[this.circularId%this.chartLen]=c;const u=1e3/this.currentMem,d=this.currentCpu,p=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/r*100))+4;p>0&&(this.gpuChart[this.circularId%this.chartLen]=p),d>0&&(this.cpuChart[this.circularId%this.chartLen]=d),u>0&&(this.memChart[this.circularId%this.chartLen]=u);for(let m=0;m<this.names.length;m++)this.chartLogger({i:m,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}}startGpu(){const e=this.gl,t=this.extension;if(!(!e||!t)&&this.isWebGL2){let r=!1,i,s;if(this.query){this.queryHasResult=!1;let o=this.query;if(r=e.getQueryParameter(o,e.QUERY_RESULT_AVAILABLE),i=e.getParameter(t.GPU_DISJOINT_EXT),r&&!i){s=e.getQueryParameter(this.query,e.QUERY_RESULT);const a=s*1e-6;r&&a>0&&(i||this.activeAccums.forEach((l,c)=>{this.gpuAccums[c]=a}))}}(r||!this.query)&&(this.queryCreated=!0,this.query=e.createQuery(),e.beginQuery(t.TIME_ELAPSED_EXT,this.query))}}endGpu(){const e=this.extension,t=this.gl;this.isWebGL2&&this.queryCreated&&t.getQuery(e.TIME_ELAPSED_EXT,t.CURRENT_QUERY)&&t.endQuery(e.TIME_ELAPSED_EXT)}begin(e){this.startGpu(),this.updateAccums(e)}end(e){this.endGpu(),this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);t===-1&&(t=this.names.length,this.addUI(e));const r=this.now();this.activeAccums[t]=!this.activeAccums[t],this.t0=r}}const eL=n=>{n.forEach((e,t)=>{const{meshes:r}=e;if(!r)return;let i={total:0,type:"Triangle",data:[]};Object.keys(r).forEach(s=>{const o=r[s],{geometry:a,material:l}=o;let c=a.index;const u=a.attributes.position;if(!u)return;let d=1;l.wireframe===!0&&(d=0);const p=c!==null?c.count:u.count,m=a.drawRange.start*d,v=a.drawRange.count*d,_=m,y=Math.min(p,m+v)-1;let w=1;const b=o.count||1;let C="Triangle",O=0;o.isMesh?l.wireframe===!0?(C="Line",w=w/2):(C="Triangle",w=w/3):o.isLine?(C="Line",o.isLineSegments?w=w/2:o.isLineLoop?w=w:w=w-1):o.isPoints?(C="Point",w=w):o.isSprite&&(C="Triangle",w=w/3);const T=Math.round(Math.max(0,y-_+1)*(w*b));T>O&&(O=T,i.type=C),i.total+=T,i.data.push({drawCount:T,type:C}),o.userData.drawCount={type:C,count:T}}),e.drawCounts=i})},tL=Na.prototype.updateMatrixWorld,nL=Na.prototype.updateWorldMatrix,yw=Na.prototype.updateMatrix;let nc={value:0},bs={value:0};const rL=n=>{let e=""+n;return e=e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),e!==null},xw=(n,e)=>{n.defines||(n.defines={}),n.defines&&!n.defines.muiPerf&&(n.defines=Object.assign(n.defines||{},{muiPerf:n.uuid}));const t=n.uuid;return e[t]||(e[t]={meshes:{},material:n},n.needsUpdate=!0),n.needsUpdate=!1,t},iL=n=>n==="muiPerf",at=Mv(n=>({log:null,paused:!1,triggerProgramsUpdate:0,customData:0,fpsLimit:60,overclockingFps:!1,chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos"})),OE=({trackCPU:n,overClock:e,chart:t,deepAnalyze:r,matrixUpdate:i})=>{const{gl:s,scene:o}=mt();at.setState({gl:s,scene:o});const a=S.useMemo(()=>{const l=new JN({trackGPU:!0,overClock:e,chartLen:t?t.length:120,chartHz:t?t.hz:60,gl:s.getContext(),chartLogger:d=>{at.setState({chart:d})},paramLogger:d=>{at.setState({log:{maxMemory:d.maxMemory,gpu:d.gpu,cpu:d.cpu,mem:d.mem,fps:d.fps,totalTime:d.duration,frameCount:d.frameCount}})}}),c=new Map,u=new Map;return Object.defineProperty(mc.prototype,"onBeforeRender",{get(){return(...d)=>{var p;l&&l.begin("profiler"),(p=c.get(this))===null||p===void 0||p(...d)}},set(d){c.set(this,d)},configurable:!0}),Object.defineProperty(mc.prototype,"onAfterRender",{get(){return(...d)=>{var p;l&&l.end("profiler"),(p=u.get(this))===null||p===void 0||p(...d)}},set(d){u.set(this,d)},configurable:!0}),l},[]);return S.useEffect(()=>{a&&(a.overClock=e||!1,e===!1&&(at.setState({overclockingFps:!1}),bi.value=0,bi.isOverLimit=0),a.chartHz=(t==null?void 0:t.hz)||60,a.chartLen=(t==null?void 0:t.length)||120)},[e,a,t==null?void 0:t.length,t==null?void 0:t.hz]),S.useEffect(()=>{i&&(Na.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&nc.value++,tL.apply(this,arguments)},Na.prototype.updateWorldMatrix=function(){nc.value++,nL.apply(this,arguments)},Na.prototype.updateMatrix=function(){bs.value++,yw.apply(this,arguments)}),s.info.autoReset=!1;let l=null,c=null;if(s.info)return l=CO(function(){at.getState().paused&&at.setState({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),a.startCpuProfiling=!0),bs.value-=1,nc.value=0,bs.value=0,s.info&&s.info.reset()}),c=OO(function(){if(a&&!a.paused&&(a.nextFrame(window.performance.now()),e&&typeof window.requestIdleCallback<"u"&&(a.idleCbId=requestIdleCallback(a.nextFps))),r){var d,p;const m={},v=new Map;o.traverse(function(y){if((y instanceof al||y instanceof s4)&&y.material){let w=y.material.uuid;Array.isArray(y.material)&&y.material.length>1?w=xw(y.material[1],m):w=xw(y.material,m),m[w].meshes[y.uuid]=y}}),s==null||(d=s.info)===null||d===void 0||(p=d.programs)===null||p===void 0||p.forEach(_=>{const y=_.cacheKey.split(","),w=y[y.findIndex(iL)+1];if(rL(w)&&m[w]){const{material:b,meshes:C}=m[w];v.set(w,{program:_,material:b,meshes:C,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),v.size!==at.getState().programs.size&&(eL(v),at.setState({programs:v,triggerProgramsUpdate:at.getState().triggerProgramsUpdate++}))}}),()=>{a&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(a.idleCbId),window.cancelAnimationFrame(a.rafId),window.cancelAnimationFrame(a.checkQueryId)),i&&(Na.prototype.updateMatrixWorld=yw),l(),c()}},[a,s,n,t,i]),S.useEffect(()=>{const l=kO(function(){return a&&(a.paused=!0,bs.value=0,nc.value=0,at.setState({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{l()}},[]),null},sL=On("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),e0=On("small",{position:"absolute",right:0,fontSize:"10px"}),Kn=On("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),Pr=On("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),oL=On("div",{display:"flex"}),aL=On("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),lL=On("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),cL=On("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),v1=On("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),uL=On("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),fL=On("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),hL=On("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),dL=On("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),pL=On("div",{marginTop:"0"}),ww=On("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),kE=On("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),AE=On("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),mL=On("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),gL=On("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}}),xi=S.memo(({isPerf:n,color:e,colorBlind:t,customData:r,isMemory:i,isShadersInfo:s,metric:o,fontSize:a,offsetY:l=0,offsetX:c,round:u,hasInstance:d})=>{const{width:p,height:m}=mt(y=>y.viewport),v=S.useRef(null),_=S.useRef(null);return Cn(function(){const w=at.getState().gl,b=at.getState().log;if(!b||!v.current||(r&&(v.current.text=at.getState().customData),!o))return;let C=b[o];if(s){var O;C=(O=w.info.programs)===null||O===void 0?void 0:O.length}else o==="matriceCount"?C=bs.value:!n&&w.info.render&&(C=(i?w.info.memory:w.info.render)[o]);if(o==="fps"&&(v.current.color=at.getState().overclockingFps?Jn(t).overClock.toString():`rgb(${Jn(t).fps.toString()})`),v.current.text=(Math.round(C*Math.pow(10,u))/Math.pow(10,u)).toFixed(u),d){const T=w.info.instance;if(typeof T>"u"&&o!=="matriceCount")return;let A;o==="matriceCount"?A=nc.value:A=T[o],A>0?(v.current.fontSize=a/1.15,_.current.fontSize=C>0?a/1.4:a,v.current.position.y=m/2-l-a/1.9,_.current.text=" ±	"+(Math.round(A*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)):(v.current.position.y=m/2-l-a,v.current.fontSize=a)}bs.value-=1,v.current.updateMatrix(),v.current.matrixWorld.copy(v.current.matrix)}),N.jsxs(S.Suspense,{fallback:null,children:[N.jsxs(R0,{textAlign:"justify",matrixAutoUpdate:!1,ref:v,fontSize:a,position:[-p/2+c+a,m/2-l-a,0],color:e,characters:"0123456789",onUpdate:y=>{y.updateMatrix(),bs.value-=1,y.matrixWorld.copy(y.matrix)},children:[N.jsx("meshBasicMaterial",{blending:Vy}),"0"]}),d&&N.jsx(R0,{textAlign:"justify",matrixAutoUpdate:!1,ref:_,fontSize:8,position:[-p/2+c+a,m/2-l-a*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:y=>{y.updateMatrix(),bs.value-=1,y.matrixWorld.copy(y.matrix)},children:N.jsx("meshBasicMaterial",{blending:Vy})})]})}),vL=({colorBlind:n,customData:e,minimal:t,matrixUpdate:r})=>N.jsxs(N.Fragment,{children:[N.jsx(xi,{colorBlind:n,color:`rgb(${Jn(n).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),N.jsx(xi,{color:`rgb(${Jn(n).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),N.jsx(xi,{color:`rgb(${Jn(n).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),t?null:N.jsxs(N.Fragment,{children:[N.jsx(xi,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),N.jsx(xi,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),N.jsx(xi,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),N.jsx(xi,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),N.jsx(xi,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),N.jsx(xi,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),N.jsx(xi,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),r&&N.jsx(xi,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),e&&N.jsx(xi,{color:`rgb(${Jn(n).custom.toString()})`,customData:e,fontSize:14,offsetY:0,offsetX:t?200:320,round:0})]}),_L=({colorBlind:n,minimal:e,chart:t={length:30,hz:15}})=>{const r=S.useMemo(()=>({fps:new Float32Array(t.length*3),cpu:new Float32Array(t.length*3),gpu:new Float32Array(t.length*3)}),[t]),i=S.useRef(null),s=S.useRef(null),o=S.useRef(null),a=S.useRef(null),l=S.useMemo(()=>new Te(0,0,0),[]),c=(u,d=1,p,m)=>{let v=0;const{width:_,height:y}=m,w=at.getState().chart.data[u];if(!w||w.length===0)return;const b=e?2:6,C=e?12:50;let O=w.length;for(let T=0;T<O;T++){let A=(at.getState().chart.circularId+T+1)%O;w[A]!==void 0&&(w[A]>v&&(v=w[A]*d),l.set(b+T/(O-1)*(_-b*2)-_/2,Math.min(100,w[A])*d/100*(y-b*2-C)-y/2,0),l.toArray(p.attributes.position.array,T*3))}p.attributes.position.needsUpdate=!0};return Cn(function({viewport:d}){c("fps",1,i.current,d),s.current&&s.current.color.set(at.getState().overclockingFps?Jn(n).overClock.toString():`rgb(${Jn(n).fps.toString()})`),c("gpu",5,o.current,d),c("cpu",5,a.current,d)}),N.jsxs(N.Fragment,{children:[N.jsxs("line",{children:[N.jsx("bufferGeometry",{ref:i,children:N.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.fps,itemSize:3,usage:Qu,needsUpdate:!0})}),N.jsx("lineBasicMaterial",{ref:s,color:`rgb(${Jn(n).fps.toString()})`,transparent:!0,opacity:.5})]}),N.jsxs("line",{children:[N.jsx("bufferGeometry",{ref:o,children:N.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.gpu,itemSize:3,usage:Qu,needsUpdate:!0})}),N.jsx("lineBasicMaterial",{color:`rgb(${Jn(n).gpu.toString()})`,transparent:!0,opacity:.5})]}),N.jsxs("line",{children:[N.jsx("bufferGeometry",{ref:a,children:N.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.cpu,itemSize:3,usage:Qu,needsUpdate:!0})}),N.jsx("lineBasicMaterial",{color:`rgb(${Jn(n).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},yL=({colorBlind:n,chart:e,customData:t,matrixUpdate:r,showGraph:i=!0,antialias:s=!0,minimal:o})=>{const a=S.useRef(void 0),l=at(c=>c.paused);return N.jsxs(lL,{style:{display:"flex",position:"absolute",height:`${o?37:i?100:60}px`,minWidth:`${o?"100px":t?"370px":"310px"}`},children:[N.jsx(hS,{ref:a,orthographic:!0,dpr:s?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:c})=>{c.traverse(u=>{u.matrixWorldAutoUpdate=!1,u.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${o?37:i?100:60}px`},children:l?null:N.jsxs(N.Fragment,{children:[N.jsx(xL,{}),N.jsx(vL,{customData:t,minimal:o,matrixUpdate:r}),i&&N.jsx(_L,{colorBlind:n,minimal:o,chart:e})]})}),l&&N.jsxs(cL,{children:[N.jsx(BN,{})," PAUSED"]})]})},xL=()=>(Cn(function({gl:e,scene:t,camera:r}){r.updateMatrix(),bs.value-=1,r.matrixWorld.copy(r.matrix),r.matrixWorldInverse.copy(r.matrixWorld).invert(),e.render(t,r),nc.value=0,bs.value=0},1/0),null);function wL(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function bL(n,e){if(n==null)return{};var t=wL(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const SL=["portal","className","children"],TL=S.forwardRef((n,e)=>{let{portal:t,className:r,children:i}=n,s=bL(n,SL);const o=mt(u=>u.gl),a=S.useRef(null),l=S.useRef(null),c=(t==null?void 0:t.current)!=null?t.current:o.domElement.parentNode;return S.useLayoutEffect(()=>{if(!a.current||!c)return;const u=document.createElement("div"),d=l.current=vb(u);return c.appendChild(u),()=>{d.unmount(),l.current=null,c.removeChild(u)}},[c]),S.useLayoutEffect(()=>{const u=l.current;u&&u.render(N.jsx("div",{ref:e,className:r,children:i}))}),N.jsx("group",ev(ev({},s),{},{ref:a}))}),bw=(n,e)=>{const t=i=>{switch(i){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},r=i=>{switch(i){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:n,url:e.image.currentSrc,encoding:r(e.encoding),wrapT:t(e.image.wrapT),flipY:e.flipY.toString()}},EL=({program:n,material:e,setTexNumber:t})=>{const r=at(o=>o.gl),[i,s]=S.useState(null);return S.useEffect(()=>{if(r){const o=n==null?void 0:n.getUniforms();let a=0;const l=new Map;o.seq.forEach(c=>{if(!c.id.includes("uTroika")&&c.id!=="isOrthographic"&&c.id!=="uvTransform"&&c.id!=="lightProbe"&&c.id!=="projectionMatrix"&&c.id!=="viewMatrix"&&c.id!=="normalMatrix"&&c.id!=="modelMatrix"&&c.id!=="modelViewMatrix"){let u=[],d={name:c.id};c.cache&&(c.cache.forEach(p=>{typeof p<"u"&&u.push(p.toString().substring(0,4))}),d.value=u.join(),e[c.id]&&e[c.id].image&&e[c.id].image&&(a++,d.value=bw(c.id,e[c.id])),d.value||(d.value="empty"),l.set(c.id,d))}}),e.uniforms&&Object.keys(e.uniforms).forEach(c=>{const u=e.uniforms[c];if(u.value){const{value:d}=u;let p={name:c};if(c.includes("uTroika"))return;if(d instanceof jf)a++,p.value=bw(c,d);else{let m=JSON.stringify(d);try{m=JSON.stringify(d)}catch{m=d.toString()}p.value=m}l.set(c,p)}}),a>0&&t(a),s(l)}},[]),N.jsx(kE,{children:i&&Array.from(i.values()).map(o=>N.jsx("span",{children:typeof o.value=="string"?N.jsx("li",{children:N.jsxs("span",{children:[o.name," :"," ",N.jsxs("b",{children:[o.value.substring(0,30),o.value.length>30?"...":""]})]})}):N.jsxs(N.Fragment,{children:[N.jsx("li",{children:N.jsxs("b",{children:[o.value.name,":"]})}),N.jsxs("div",{children:[Object.keys(o.value).map(a=>a!=="name"?N.jsx("div",{children:a==="url"?N.jsx("a",{href:o.value[a],target:"_blank",children:N.jsx("img",{src:o.value[a]})}):N.jsxs("li",{children:[a,": ",N.jsx("b",{children:o.value[a]})]})},a):null),N.jsxs(AE,{onClick:()=>{var a;console.info(e[o.value.name]||(e==null||(a=e.uniforms[o.value.name])===null||a===void 0?void 0:a.value))},children:["console.info(",o.value.name,");"]})]})]})},o.name))})},CL=({el:n})=>{at(r=>r.log);const e=at(r=>r.gl),t=r=>{if(!e)return 0;const i=Math.round(r.drawCounts.total/(e.info.render.triangles+e.info.render.lines+e.info.render.points)*100*10)/10;return isFinite(i)&&i||0};return N.jsx(N.Fragment,{children:n.drawCounts.total>0&&N.jsxs(Kn,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[n.drawCounts.type==="Triangle"?N.jsx(CE,{style:{top:"-1px"}}):N.jsx(SE,{style:{top:"-1px"}}),n.drawCounts.total,N.jsxs("small",{children:[n.drawCounts.type,"s"]}),e&&N.jsxs(Pr,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[n.visible&&!n.material.wireframe?t(n):0,"%"]})]})})},OL=({el:n})=>{const[e,t]=S.useState(n.visible),[r,i]=S.useState(n.expand),[s,o]=S.useState(0),{meshes:a,program:l,material:c}=n;return N.jsxs(fL,{children:[N.jsxs(aL,{onClick:()=>{n.expand=!r,Object.keys(a).forEach(u=>{const d=a[u];d.material.wireframe=!1}),i(!r)},children:[N.jsx(v1,{style:{marginRight:"6px"},children:r?N.jsx("span",{children:N.jsx(TE,{})}):N.jsx("span",{children:N.jsx(EE,{})})}),l&&N.jsxs("span",{children:[N.jsx(hL,{children:l.name}),N.jsxs(Kn,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[N.jsx(PN,{style:{top:"-1px"}}),Object.keys(a).length,N.jsx("small",{children:Object.keys(a).length>1?"users":"user"})]}),s>0&&N.jsxs(Kn,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s>1?N.jsx(J0,{style:{top:"-1px"}}):N.jsx(J0,{style:{top:"-1px"}}),s,N.jsx("small",{children:"tex"})]}),N.jsx(CL,{el:n}),c.glslVersion==="300 es"&&N.jsxs(Kn,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[N.jsx($N,{style:{top:"-1px"}}),"300",N.jsx("small",{children:"es"}),N.jsx(Pr,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),N.jsx(uL,{onPointerEnter:()=>{Object.keys(a).forEach(u=>{const d=a[u];d.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(a).forEach(u=>{const d=a[u];d.material.wireframe=!1})},onClick:u=>{u.stopPropagation(),Object.keys(a).forEach(d=>{const p=a[d],m=!e;p.visible=m,n.visible=m,t(m)})},children:e?N.jsx(ON,{}):N.jsx(EN,{})})]}),N.jsxs("div",{style:{maxHeight:r?"9999px":0,overflow:"hidden"},children:[N.jsxs(ww,{children:[N.jsx(vN,{})," Uniforms:"]}),N.jsx(EL,{program:l,material:c,setTexNumber:o}),N.jsxs(ww,{children:[N.jsx(yN,{})," Geometries:"]}),N.jsx(kE,{children:a&&Object.keys(a).map(u=>a[u]&&a[u].geometry&&N.jsxs(gL,{children:[N.jsxs("span",{children:[a[u].geometry.type,": "]}),a[u].userData&&a[u].userData.drawCount&&N.jsxs("b",{children:[N.jsxs("div",{children:[a[u].userData.drawCount.count,N.jsxs("small",{children:[" ",a[u].userData.drawCount.type,"s"]})]}),N.jsx("br",{}),N.jsxs("div",{children:[Math.round(aA(a[u].geometry)/1024*1e3)/1e3,"Kb",N.jsx("small",{children:" memory used"})]})]})]},u))}),N.jsxs(AE,{onClick:()=>{console.info(c)},children:["console.info(",c.type,")"]})]})]})},kL=()=>{at(e=>e.triggerProgramsUpdate);const n=at(e=>e.programs);return N.jsx(pL,{children:n&&Array.from(n.values()).map(e=>e&&e?N.jsx(OL,{el:e},e.material.uuid):null)})},Jn=n=>({overClock:"#ff6eff",fps:n?"100, 143, 255":"238,38,110",cpu:n?"254, 254, 98":"66,226,46",gpu:n?"254,254,254":"253,151,31",custom:n?"86,180,233":"40,255,255"}),AL=({showGraph:n,colorBlind:e})=>{const t=at(i=>i.overclockingFps),r=at(i=>i.fpsLimit);return N.jsxs(Pr,{style:n?{color:t?Jn(e).overClock.toString():`rgb(${Jn(e).fps})`}:{},children:["FPS ",t?`${r}🚀`:""]})},RL=({showGraph:n,colorBlind:e,customData:t,minimal:r})=>{const i=at(s=>s.gl);return i?N.jsxs(oL,{children:[N.jsxs(Kn,{children:[N.jsx(IN,{}),N.jsx(Pr,{style:n?{color:`rgb(${Jn(e).gpu.toString()})`}:{},children:"GPU"}),N.jsx(e0,{children:"ms"})]}),N.jsxs(Kn,{children:[N.jsx(HN,{}),N.jsx(Pr,{style:n?{color:`rgb(${Jn(e).cpu.toString()})`}:{},children:"CPU"}),N.jsx(e0,{children:"ms"})]}),N.jsxs(Kn,{children:[N.jsx(RN,{}),N.jsx(AL,{showGraph:n,colorBlind:e})]}),!r&&i&&N.jsxs(Kn,{children:[N.jsx(GN,{}),N.jsx(Pr,{children:i.info.render.calls===1?"call":"calls"})]}),!r&&i&&N.jsxs(Kn,{children:[N.jsx(CE,{}),N.jsx(Pr,{children:"Triangles"})]}),t&&N.jsxs(Kn,{children:[N.jsx(mN,{}),N.jsx(Pr,{style:n?{color:`rgb(${Jn(e).custom})`}:{},children:t.name}),t.info&&N.jsx(e0,{children:t.info})]})]}):null},ML=({showGraph:n,colorBlind:e,deepAnalyze:t,customData:r,matrixUpdate:i,openByDefault:s,minimal:o})=>N.jsxs(N.Fragment,{children:[N.jsx(RL,{showGraph:n,colorBlind:e,customData:r,minimal:o}),!o&&N.jsx(DL,{matrixUpdate:i,openByDefault:s,deepAnalyze:t,showGraph:n})]}),PL=({matrixUpdate:n})=>N.jsxs("div",{children:[N.jsxs(Kn,{children:[N.jsx(LN,{}),N.jsx(Pr,{children:"Geometries"})]}),N.jsxs(Kn,{children:[N.jsx(J0,{}),N.jsx(Pr,{children:"Textures"})]}),N.jsxs(Kn,{children:[N.jsx(SE,{}),N.jsx(Pr,{children:"shaders"})]}),N.jsxs(Kn,{children:[N.jsx(UN,{}),N.jsx(Pr,{children:"Lines"})]}),N.jsxs(Kn,{children:[N.jsx(wN,{}),N.jsx(Pr,{children:"Points"})]}),n&&N.jsxs(Kn,{children:[N.jsx(SN,{}),N.jsx(Pr,{children:"Matrices"})]})]}),Sw=({tab:n,title:e,set:t})=>{const r=at(i=>i.tab);return N.jsx(v1,{className:`${r===n?" __perf_toggle_tab_active":""}`,onClick:()=>{t(!0),at.setState({tab:n})},children:N.jsx("span",{children:e})})},DL=({openByDefault:n,showGraph:e,deepAnalyze:t,matrixUpdate:r})=>{const[i,s]=j.useState(n);return N.jsxs("span",{children:[N.jsx(IL,{show:i,showGraph:e,matrixUpdate:r}),n&&!t?null:N.jsxs(mL,{className:"__perf_toggle",children:[t&&N.jsx(Sw,{tab:"programs",title:"Programs",set:s}),t&&N.jsx(Sw,{tab:"infos",title:"Infos",set:s}),N.jsx(v1,{onClick:()=>{s(!i)},children:i?N.jsxs("span",{children:[N.jsx(TE,{})," Minimize"]}):N.jsxs("span",{children:[N.jsx(EE,{})," More"]})})]})]})},IL=({show:n,showGraph:e,matrixUpdate:t})=>{const r=at(i=>i.tab);return N.jsxs(N.Fragment,{children:[N.jsx(PL,{matrixUpdate:t}),n&&N.jsx("div",{children:N.jsx(dL,{style:{marginTop:e?"38px":0},children:r==="programs"&&N.jsx(kL,{})})})]})},NL=({showGraph:n,colorBlind:e,openByDefault:t,className:r,overClock:i,style:s,position:o,chart:a,deepAnalyze:l,antialias:c,customData:u,matrixUpdate:d,minimal:p})=>{const m=S.useRef(null);return N.jsxs(N.Fragment,{children:[N.jsx(OE,{chart:a,overClock:i,deepAnalyze:l,matrixUpdate:d}),N.jsx(TL,{transform:!1,children:N.jsxs(sL,{className:(r?" ".concat(r):" ")+` ${o||""} ${p?"minimal":""}`,style:ev({minHeight:p?"37px":n?"100px":"60px"},s),ref:m,children:[N.jsx(yL,{perfContainerRef:m,colorBlind:e,chart:a,showGraph:n,antialias:c,customData:u,minimal:p,matrixUpdate:d}),N.jsx(ML,{colorBlind:e,showGraph:n,deepAnalyze:l,openByDefault:t,customData:u,matrixUpdate:d,minimal:p})]})})]})},LL=({headless:n=!1,colorBlind:e=!1,overClock:t=!1,showGraph:r=!0,trackCPU:i=!1,deepAnalyze:s=!1,antialias:o=!0,openByDefault:a=!0,customData:l,matrixUpdate:c=!1,position:u="top-right",chart:d={length:30,hz:15},className:p,style:m,minimal:v=!1})=>n?N.jsx(OE,{chart:d,deepAnalyze:s,matrixUpdate:c,overClock:t}):N.jsx(NL,{colorBlind:e,showGraph:r,trackCPU:i,openByDefault:a,className:p,style:m,overClock:t,position:u,antialias:o,chart:d,deepAnalyze:s,minimal:v,customData:l,matrixUpdate:c}),$d=5e3,RE={show:"#FF723C",clip:"#FFFF00",episode:"#FF7F50",guest:"#E066FF",topic:"#F8F8FF"},_1=(n,e)=>{const t=RE[n]||"#F8F8FF";return e?t:parseInt(t.replace("#","0x"),16)},FL={isUserDragging:!1,isUserScrolling:!1,userMovedCamera:!1,isUserScrollingOnHtmlPanel:!1},Wo=Mv(n=>({...FL,setIsUserDragging:e=>n({isUserDragging:e}),setIsUserScrolling:e=>n({isUserScrolling:e}),setUserMovedCamera:e=>n({userMovedCamera:e}),setIsUserScrollingOnHtmlPanel:e=>n({isUserScrollingOnHtmlPanel:e})}));function Ks(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ME(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var oi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Sc={duration:.5,overwrite:!1,delay:0},y1,nr,sn,Oi=1e8,Mt=1/Oi,tv=Math.PI*2,UL=tv/4,zL=0,PE=Math.sqrt,BL=Math.cos,jL=Math.sin,Un=function(e){return typeof e=="string"},an=function(e){return typeof e=="function"},uo=function(e){return typeof e=="number"},x1=function(e){return typeof e>"u"},ks=function(e){return typeof e=="object"},Nr=function(e){return e!==!1},w1=function(){return typeof window<"u"},Rd=function(e){return an(e)||Un(e)},DE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},rr=Array.isArray,nv=/(?:-?\.?\d|\.)+/gi,IE=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,rc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,t0=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,NE=/[+-]=-?[.\d]+/,LE=/[^,'"\[\]\s]+/gi,$L=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Qt,Ti,rv,b1,ci={},hp={},FE,UE=function(e){return(hp=Ja(e,ci))&&Br},S1=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},mf=function(e,t){return!t&&console.warn(e)},zE=function(e,t){return e&&(ci[e]=t)&&hp&&(hp[e]=t)||ci},gf=function(){return 0},VL={suppressEvents:!0,isStart:!0,kill:!1},Vd={suppressEvents:!0,kill:!1},HL={suppressEvents:!0},T1={},Go=[],iv={},BE,ti={},n0={},Tw=30,Hd=[],E1="",C1=function(e){var t=e[0],r,i;if(ks(t)||an(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Hd.length;i--&&!Hd[i].targetTest(t););r=Hd[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new uC(e[i],r)))||e.splice(i,1);return e},Wa=function(e){return e._gsap||C1(ki(e))[0]._gsap},jE=function(e,t,r){return(r=e[t])&&an(r)?e[t]():x1(r)&&e.getAttribute&&e.getAttribute(t)||r},Lr=function(e,t){return(e=e.split(",")).forEach(t)||e},pn=function(e){return Math.round(e*1e5)/1e5||0},Nn=function(e){return Math.round(e*1e7)/1e7||0},uc=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},WL=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},dp=function(){var e=Go.length,t=Go.slice(0),r,i;for(iv={},Go.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},$E=function(e,t,r,i){Go.length&&!nr&&dp(),e.render(t,r,i||nr&&t<0&&(e._initted||e._startAt)),Go.length&&!nr&&dp()},VE=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(LE).length<2?t:Un(e)?e.trim():e},HE=function(e){return e},Pi=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},GL=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Ja=function(e,t){for(var r in t)e[r]=t[r];return e},Ew=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=ks(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},pp=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},sf=function(e){var t=e.parent||Qt,r=e.keyframes?GL(rr(e.keyframes)):Pi;if(Nr(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},qL=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},WE=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},sm=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},ea=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ga=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},YL=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},sv=function(e,t,r,i){return e._startAt&&(nr?e._startAt.revert(Vd):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},ZL=function n(e){return!e||e._ts&&n(e.parent)},Cw=function(e){return e._repeat?Tc(e._tTime,e=e.duration()+e._rDelay)*e:0},Tc=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},mp=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},om=function(e){return e._end=Nn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Mt)||0))},am=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Nn(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),om(e),r._dirty||Ga(r,e)),e},GE=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=mp(e.rawTime(),t),(!t._dur||rh(0,t.totalDuration(),r)-t._tTime>Mt)&&t.render(r,!0)),Ga(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Mt}},ws=function(e,t,r,i){return t.parent&&ea(t),t._start=Nn((uo(r)?r:r||e!==Qt?Si(e,r,t):e._time)+t._delay),t._end=Nn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),WE(e,t,"_first","_last",e._sort?"_start":0),ov(t)||(e._recent=t),i||GE(e,t),e._ts<0&&am(e,e._tTime),e},qE=function(e,t){return(ci.ScrollTrigger||S1("scrollTrigger",t))&&ci.ScrollTrigger.create(t,e)},YE=function(e,t,r,i,s){if(k1(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!nr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&BE!==ri.frame)return Go.push(e),e._lazy=[s,i],1},XL=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},ov=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},KL=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&XL(e)&&!(!e._initted&&ov(e))||(e._ts<0||e._dp._ts<0)&&!ov(e))?0:1,a=e._rDelay,l=0,c,u,d;if(a&&e._repeat&&(l=rh(0,e._tDur,t),u=Tc(l,a),e._yoyo&&u&1&&(o=1-o),u!==Tc(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||nr||i||e._zTime===Mt||!t&&e._zTime){if(!e._initted&&YE(e,t,i,r,l))return;for(d=e._zTime,e._zTime=t||(r?Mt:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&sv(e,t,r,!0),e._onUpdate&&!r&&ii(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&ii(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&ea(e,1),!r&&!nr&&(ii(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},QL=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Ec=function(e,t,r,i){var s=e._repeat,o=Nn(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Nn(o*(s+1)+e._rDelay*s):o,a>0&&!i&&am(e,e._tTime=e._tDur*a),e.parent&&om(e),r||Ga(e.parent,e),e},Ow=function(e){return e instanceof yr?Ga(e):Ec(e,e._dur)},JL={_start:0,endTime:gf,totalDuration:gf},Si=function n(e,t,r){var i=e.labels,s=e._recent||JL,o=e.duration()>=Oi?s.endTime(!1):e._dur,a,l,c;return Un(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(rr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},of=function(e,t,r){var i=uo(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Nr(l.vars.inherit)&&l.parent;o.immediateRender=Nr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new bn(t[0],o,t[s+1])},aa=function(e,t){return e||e===0?t(e):t},rh=function(e,t,r){return r<e?e:r>t?t:r},er=function(e,t){return!Un(e)||!(t=$L.exec(e))?"":t[1]},eF=function(e,t,r){return aa(r,function(i){return rh(e,t,i)})},av=[].slice,ZE=function(e,t){return e&&ks(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ks(e[0]))&&!e.nodeType&&e!==Ti},tF=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Un(i)&&!t||ZE(i,1)?(s=r).push.apply(s,ki(i)):r.push(i)})||r},ki=function(e,t,r){return sn&&!t&&sn.selector?sn.selector(e):Un(e)&&!r&&(rv||!Cc())?av.call((t||b1).querySelectorAll(e),0):rr(e)?tF(e,r):ZE(e)?av.call(e,0):e?[e]:[]},lv=function(e){return e=ki(e)[0]||mf("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return ki(t,r.querySelectorAll?r:r===e?mf("Invalid scope")||b1.createElement("div"):e)}},XE=function(e){return e.sort(function(){return .5-Math.random()})},KE=function(e){if(an(e))return e;var t=ks(e)?e:{each:e},r=qa(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,d=i;return Un(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],d=i[1]),function(p,m,v){var _=(v||t).length,y=o[_],w,b,C,O,T,A,k,R,P;if(!y){if(P=t.grid==="auto"?0:(t.grid||[1,Oi])[1],!P){for(k=-Oi;k<(k=v[P++].getBoundingClientRect().left)&&P<_;);P<_&&P--}for(y=o[_]=[],w=l?Math.min(P,_)*u-.5:i%P,b=P===Oi?0:l?_*d/P-.5:i/P|0,k=0,R=Oi,A=0;A<_;A++)C=A%P-w,O=b-(A/P|0),y[A]=T=c?Math.abs(c==="y"?O:C):PE(C*C+O*O),T>k&&(k=T),T<R&&(R=T);i==="random"&&XE(y),y.max=k-R,y.min=R,y.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(P>_?_-1:c?c==="y"?_/P:P:Math.max(P,_/P))||0)*(i==="edges"?-1:1),y.b=_<0?s-_:s,y.u=er(t.amount||t.each)||0,r=r&&_<0?aC(r):r}return _=(y[p]-y.min)/y.max||0,Nn(y.b+(r?r(_):_)*y.v)+y.u}},cv=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Nn(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(uo(r)?0:er(r))}},QE=function(e,t){var r=rr(e),i,s;return!r&&ks(e)&&(i=r=e.radius||Oi,e.values?(e=ki(e.values),(s=!uo(e[0]))&&(i*=i)):e=cv(e.increment)),aa(t,r?an(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Oi,u=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<c&&(c=p,u=d);return u=!i||c<=i?e[u]:o,s||u===o||uo(o)?u:u+er(o)}:cv(e))},JE=function(e,t,r,i){return aa(rr(e)?!t:r===!0?!!(r=0):!i,function(){return rr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},nF=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},rF=function(e,t){return function(r){return e(parseFloat(r))+(t||er(r))}},iF=function(e,t,r){return tC(e,t,0,1,r)},eC=function(e,t,r){return aa(r,function(i){return e[~~t(i)]})},sF=function n(e,t,r){var i=t-e;return rr(e)?eC(e,n(0,e.length),t):aa(r,function(s){return(i+(s-e)%i)%i+e})},oF=function n(e,t,r){var i=t-e,s=i*2;return rr(e)?eC(e,n(0,e.length-1),t):aa(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},vf=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?LE:nv),r+=e.substr(t,i-t)+JE(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},tC=function(e,t,r,i,s){var o=t-e,a=i-r;return aa(s,function(l){return r+((l-e)/o*a||0)})},aF=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Un(e),a={},l,c,u,d,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(rr(e)&&!rr(t)){for(u=[],d=e.length,p=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(v){v*=d;var _=Math.min(p,~~v);return u[_](v-_)},r=t}else i||(e=Ja(rr(e)?[]:{},e));if(!u){for(l in t)O1.call(a,e,l,"get",t[l]);s=function(v){return M1(v,a)||(o?e.p:e)}}}return aa(r,s)},kw=function(e,t,r){var i=e.labels,s=Oi,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},ii=function(e,t,r){var i=e.vars,s=i[t],o=sn,a=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&Go.length&&dp(),a&&(sn=a),u=l?s.apply(c,l):s.call(c),sn=o,u},Xu=function(e){return ea(e),e.scrollTrigger&&e.scrollTrigger.kill(!!nr),e.progress()<1&&ii(e,"onInterrupt"),e},ic,nC=[],rC=function(e){if(w1()&&e){e=!e.name&&e.default||e;var t=e.name,r=an(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:gf,render:M1,add:O1,kill:SF,modifier:bF,rawVars:0},o={targetTest:0,get:0,getSetter:R1,aliases:{},register:0};if(Cc(),e!==i){if(ti[t])return;Pi(i,Pi(pp(e,s),o)),Ja(i.prototype,Ja(s,pp(e,o))),ti[i.prop=t]=i,e.targetTest&&(Hd.push(i),T1[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}zE(t,i),e.register&&e.register(Br,i,Fr)}else e&&nC.push(e)},Rt=255,Ku={aqua:[0,Rt,Rt],lime:[0,Rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rt],navy:[0,0,128],white:[Rt,Rt,Rt],olive:[128,128,0],yellow:[Rt,Rt,0],orange:[Rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rt,0,0],pink:[Rt,192,203],cyan:[0,Rt,Rt],transparent:[Rt,Rt,Rt,0]},r0=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Rt+.5|0},iC=function(e,t,r){var i=e?uo(e)?[e>>16,e>>8&Rt,e&Rt]:0:Ku.black,s,o,a,l,c,u,d,p,m,v;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ku[e])i=Ku[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Rt,i&Rt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Rt,e&Rt]}else if(e.substr(0,3)==="hsl"){if(i=v=e.match(nv),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,i.length>3&&(i[3]*=1),i[0]=r0(l+1/3,s,o),i[1]=r0(l,s,o),i[2]=r0(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(IE),r&&i.length<4&&(i[3]=1),i}else i=e.match(nv)||Ku.transparent;i=i.map(Number)}return t&&!v&&(s=i[0]/Rt,o=i[1]/Rt,a=i[2]/Rt,d=Math.max(s,o,a),p=Math.min(s,o,a),u=(d+p)/2,d===p?l=c=0:(m=d-p,c=u>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},sC=function(e){var t=[],r=[],i=-1;return e.split(qo).forEach(function(s){var o=s.match(rc)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},Aw=function(e,t,r){var i="",s=(e+i).match(qo),o=t?"hsla(":"rgba(",a=0,l,c,u,d;if(!s)return e;if(s=s.map(function(p){return(p=iC(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(u=sC(e),l=r.c,l.join(i)!==u.c.join(i)))for(c=e.replace(qo,"1").split(rc),d=c.length-1;a<d;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(c=e.split(qo),d=c.length-1;a<d;a++)i+=c[a]+s[a];return i+c[d]},qo=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ku)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),lF=/hsl[a]?\(/,oC=function(e){var t=e.join(" "),r;if(qo.lastIndex=0,qo.test(t))return r=lF.test(t),e[1]=Aw(e[1],r),e[0]=Aw(e[0],r,sC(e[1])),!0},_f,ri=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,c,u,d,p,m,v=function _(y){var w=n()-i,b=y===!0,C,O,T,A;if(w>e&&(r+=w-t),i+=w,T=i-r,C=T-o,(C>0||b)&&(A=++d.frame,p=T-d.time*1e3,d.time=T=T/1e3,o+=C+(C>=s?4:s-C),O=1),b||(l=c(_)),O)for(m=0;m<a.length;m++)a[m](T,p,A,y)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){FE&&(!rv&&w1()&&(Ti=rv=window,b1=Ti.document||{},ci.gsap=Br,(Ti.gsapVersions||(Ti.gsapVersions=[])).push(Br.version),UE(hp||Ti.GreenSockGlobals||!Ti.gsap&&Ti||{}),u=Ti.requestAnimationFrame,nC.forEach(rC)),l&&d.sleep(),c=u||function(y){return setTimeout(y,o-d.time*1e3+1|0)},_f=1,v(2))},sleep:function(){(u?Ti.cancelAnimationFrame:clearTimeout)(l),_f=0,c=gf},lagSmoothing:function(y,w){e=y||1/0,t=Math.min(w||33,e)},fps:function(y){s=1e3/(y||240),o=d.time*1e3+s},add:function(y,w,b){var C=w?function(O,T,A,k){y(O,T,A,k),d.remove(C)}:y;return d.remove(y),a[b?"unshift":"push"](C),Cc(),C},remove:function(y,w){~(w=a.indexOf(y))&&a.splice(w,1)&&m>=w&&m--},_listeners:a},d}(),Cc=function(){return!_f&&ri.wake()},lt={},cF=/^[\d.\-M][\d.\-,\s]/,uF=/["']/g,fF=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(uF,"").trim():+c,i=l.substr(a+1).trim();return t},hF=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},dF=function(e){var t=(e+"").split("("),r=lt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[fF(t[1])]:hF(e).split(",").map(VE)):lt._CE&&cF.test(e)?lt._CE("",e):r},aC=function(e){return function(t){return 1-e(1-t)}},lC=function n(e,t){for(var r=e._first,i;r;)r instanceof yr?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},qa=function(e,t){return e&&(an(e)?e:lt[e]||dF(e))||t},ul=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Lr(e,function(a){lt[a]=ci[a]=s,lt[o=a.toLowerCase()]=r;for(var l in s)lt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=lt[a+"."+l]=s[l]}),s},cC=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},i0=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/tv*(Math.asin(1/i)||0),a=function(u){return u===1?1:i*Math.pow(2,-10*u)*jL((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:cC(a);return s=tv/s,l.config=function(c,u){return n(e,c,u)},l},s0=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:cC(r);return i.config=function(s){return n(e,s)},i};Lr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;ul(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});lt.Linear.easeNone=lt.none=lt.Linear.easeIn;ul("Elastic",i0("in"),i0("out"),i0());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};ul("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);ul("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});ul("Circ",function(n){return-(PE(1-n*n)-1)});ul("Sine",function(n){return n===1?1:-BL(n*UL)+1});ul("Back",s0("in"),s0("out"),s0());lt.SteppedEase=lt.steps=ci.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Mt;return function(a){return((i*rh(0,o,a)|0)+s)*r}}};Sc.ease=lt["quad.out"];Lr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return E1+=n+","+n+"Params,"});var uC=function(e,t){this.id=zL++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:jE,this.set=t?t.getSetter:R1},yf=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ec(this,+t.duration,1,1),this.data=t.data,sn&&(this._ctx=sn,sn.data.push(this)),_f||ri.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Ec(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Cc(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(am(this,r),!s._dp||s.parent||GE(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&ws(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Mt||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),$E(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Cw(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Cw(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Tc(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Mt?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?mp(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Mt?0:this._rts,this.totalTime(rh(-Math.abs(this._delay),this._tDur,s),i!==!1),om(this),YL(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Cc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Mt&&(this._tTime-=Mt)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ws(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Nr(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?mp(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=HL);var i=nr;return nr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),nr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Ow(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Ow(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Si(this,r),Nr(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Nr(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Mt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Mt,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Mt)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=an(r)?r:HE,a=function(){var c=i.then;i.then=null,an(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Xu(this)},n}();Pi(yf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Mt,_prom:0,_ps:!1,_rts:1});var yr=function(n){ME(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Nr(r.sortChildren),Qt&&ws(r.parent||Qt,Ks(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&qE(Ks(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return of(0,arguments,this),this},t.from=function(i,s,o){return of(1,arguments,this),this},t.fromTo=function(i,s,o,a){return of(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,sf(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new bn(i,s,Si(this,o),1),this},t.call=function(i,s,o){return ws(this,bn.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new bn(i,o,Si(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,sf(o).immediateRender=Nr(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,d){return a.startAt=o,sf(a).immediateRender=Nr(a.immediateRender),this.staggerTo(i,s,a,l,c,u,d)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:Nn(i),d=this._zTime<0!=i<0&&(this._initted||!c),p,m,v,_,y,w,b,C,O,T,A,k;if(this!==Qt&&u>l&&i>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),p=u,O=this._start,C=this._ts,w=!C,d&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(A=this._yoyo,y=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,s,o);if(p=Nn(u%y),u===l?(_=this._repeat,p=c):(_=~~(u/y),_&&_===u/y&&(p=c,_--),p>c&&(p=c)),T=Tc(this._tTime,y),!a&&this._tTime&&T!==_&&this._tTime-T*y-this._dur<=0&&(T=_),A&&_&1&&(p=c-p,k=1),_!==T&&!this._lock){var R=A&&T&1,P=R===(A&&_&1);if(_<T&&(R=!R),a=R?0:u%c?c:u,this._lock=1,this.render(a||(k?0:Nn(_*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&ii(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),a&&a!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,P&&(this._lock=2,a=R?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;lC(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=QL(this,Nn(a),Nn(p)),b&&(u-=p-(p=b._start))),this._tTime=u,this._time=p,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&p&&!s&&!_&&(ii(this,"onStart"),this._tTime!==u))return this;if(p>=a&&i>=0)for(m=this._first;m;){if(v=m._next,(m._act||p>=m._start)&&m._ts&&b!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!w){b=0,v&&(u+=this._zTime=-Mt);break}}m=v}else{m=this._last;for(var L=i<0?i:p;m;){if(v=m._prev,(m._act||L<=m._end)&&m._ts&&b!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(L-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(L-m._start)*m._ts,s,o||nr&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!w){b=0,v&&(u+=this._zTime=L?-Mt:Mt);break}}m=v}}if(b&&!s&&(this.pause(),b.render(p>=a?0:-Mt)._zTime=p>=a?1:-1,this._ts))return this._start=O,om(this),this.render(i,s,o);this._onUpdate&&!s&&ii(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(O===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&ea(this,1),!s&&!(i<0&&!a)&&(u||a||!l)&&(ii(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(uo(s)||(s=Si(this,s,i)),!(i instanceof yf)){if(rr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Un(i))return this.addLabel(i,s);if(an(i))i=bn.delayedCall(0,i);else return this}return this!==i?ws(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Oi);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof bn?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Un(i)?this.removeLabel(i):an(i)?this.killTweensOf(i):(sm(this,i),i===this._recent&&(this._recent=this._last),Ga(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Nn(ri.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Si(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=bn.delayedCall(0,s||gf,o);return a.data="isPause",this._hasPause=1,ws(this,a,Si(this,i))},t.removePause=function(i){var s=this._first;for(i=Si(this,i);s;)s._start===i&&s.data==="isPause"&&ea(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)jo!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=ki(i),l=this._first,c=uo(s),u;l;)l instanceof bn?WL(l._targets,a)&&(c?(!jo||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Si(o,i),l=s,c=l.startAt,u=l.onStart,d=l.onStartParams,p=l.immediateRender,m,v=bn.to(o,Pi({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Mt,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==y&&Ec(v,y,0,1).render(v._time,!0,!0),m=1}u&&u.apply(v,d||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Pi({startAt:{time:Si(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),kw(this,Si(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),kw(this,Si(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Mt)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return Ga(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Ga(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Oi,c,u,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ws(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Ec(o,o===Qt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Qt._ts&&($E(Qt,mp(i,Qt)),BE=ri.frame),ri.frame>=Tw){Tw+=oi.autoSleep||120;var s=Qt._first;if((!s||!s._ts)&&oi.autoSleep&&ri._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ri.sleep()}}},e}(yf);Pi(yr.prototype,{_lock:0,_hasPause:0,_forcing:0});var pF=function(e,t,r,i,s,o,a){var l=new Fr(this._pt,e,t,0,1,gC,null,s),c=0,u=0,d,p,m,v,_,y,w,b;for(l.b=r,l.e=i,r+="",i+="",(w=~i.indexOf("random("))&&(i=vf(i)),o&&(b=[r,i],o(b,e,t),r=b[0],i=b[1]),p=r.match(t0)||[];d=t0.exec(i);)v=d[0],_=i.substring(c,d.index),m?m=(m+1)%5:_.substr(-5)==="rgba("&&(m=1),v!==p[u++]&&(y=parseFloat(p[u-1])||0,l._pt={_next:l._pt,p:_||u===1?_:",",s:y,c:v.charAt(1)==="="?uc(y,v)-y:parseFloat(v)-y,m:m&&m<4?Math.round:0},c=t0.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(NE.test(i)||w)&&(l.e=0),this._pt=l,l},O1=function(e,t,r,i,s,o,a,l,c,u){an(i)&&(i=i(s||0,e,o));var d=e[t],p=r!=="get"?r:an(d)?c?e[t.indexOf("set")||!an(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,m=an(d)?c?yF:pC:A1,v;if(Un(i)&&(~i.indexOf("random(")&&(i=vf(i)),i.charAt(1)==="="&&(v=uc(p,i)+(er(p)||0),(v||v===0)&&(i=v))),!u||p!==i||uv)return!isNaN(p*i)&&i!==""?(v=new Fr(this._pt,e,t,+p||0,i-(p||0),typeof d=="boolean"?wF:mC,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&S1(t,i),pF.call(this,e,t,p,i,m,l||oi.stringFilter,c))},mF=function(e,t,r,i,s){if(an(e)&&(e=af(e,s,t,r,i)),!ks(e)||e.style&&e.nodeType||rr(e)||DE(e))return Un(e)?af(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=af(e[a],s,t,r,i);return o},fC=function(e,t,r,i,s,o){var a,l,c,u;if(ti[e]&&(a=new ti[e]).init(s,a.rawVars?t[e]:mF(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Fr(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==ic))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},jo,uv,k1=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,p=i.keyframes,m=i.autoRevert,v=e._dur,_=e._startAt,y=e._targets,w=e.parent,b=w&&w.data==="nested"?w.vars.targets:y,C=e._overwrite==="auto"&&!y1,O=e.timeline,T,A,k,R,P,L,I,D,B,z,V,$,K;if(O&&(!p||!s)&&(s="none"),e._ease=qa(s,Sc.ease),e._yEase=d?aC(qa(d===!0?s:d,Sc.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!O&&!!i.runBackwards,!O||p&&!i.stagger){if(D=y[0]?Wa(y[0]).harness:0,$=D&&i[D.prop],T=pp(i,T1),_&&(_._zTime<0&&_.progress(1),t<0&&u&&a&&!m?_.render(-1,!0):_.revert(u&&v?Vd:VL),_._lazy=0),o){if(ea(e._startAt=bn.set(y,Pi({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!_&&Nr(l),startAt:null,delay:0,onUpdate:c&&function(){return ii(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(nr||!a&&!m)&&e._startAt.revert(Vd),a&&v&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(u&&v&&!_){if(t&&(a=!1),k=Pi({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Nr(l),immediateRender:a,stagger:0,parent:w},T),$&&(k[D.prop]=$),ea(e._startAt=bn.set(y,k)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(nr?e._startAt.revert(Vd):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Mt,Mt);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&Nr(l)||l&&!v,A=0;A<y.length;A++){if(P=y[A],I=P._gsap||C1(y)[A]._gsap,e._ptLookup[A]=z={},iv[I.id]&&Go.length&&dp(),V=b===y?A:b.indexOf(P),D&&(B=new D).init(P,$||T,e,V,b)!==!1&&(e._pt=R=new Fr(e._pt,P,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(G){z[G]=R}),B.priority&&(L=1)),!D||$)for(k in T)ti[k]&&(B=fC(k,T,e,V,P,b))?B.priority&&(L=1):z[k]=R=O1.call(e,P,k,"get",T[k],V,b,0,i.stringFilter);e._op&&e._op[A]&&e.kill(P,e._op[A]),C&&e._pt&&(jo=e,Qt.killTweensOf(P,z,e.globalTime(t)),K=!e.parent,jo=0),e._pt&&l&&(iv[I.id]=1)}L&&vC(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!K,p&&t<=0&&O.render(Oi,!0,!0)},gF=function(e,t,r,i,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(u=p[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return uv=1,e.vars[t]="+=0",k1(e,a),uv=0,l?mf(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)d=c[m],u=d._pt||d,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,d.e&&(d.e=pn(r)+er(d.e)),d.b&&(d.b=u.s+er(d.b))},vF=function(e,t){var r=e[0]?Wa(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Ja({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},_F=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(rr(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},af=function(e,t,r,i,s){return an(e)?e.call(t,r,i,s):Un(e)&&~e.indexOf("random(")?vf(e):e},hC=E1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",dC={};Lr(hC+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return dC[n]=1});var bn=function(n){ME(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:sf(i))||this;var l=a.vars,c=l.duration,u=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,v=l.keyframes,_=l.defaults,y=l.scrollTrigger,w=l.yoyoEase,b=i.parent||Qt,C=(rr(r)||DE(r)?uo(r[0]):"length"in i)?[r]:ki(r),O,T,A,k,R,P,L,I;if(a._targets=C.length?C1(C):mf("GSAP target "+r+" not found. https://gsap.com",!oi.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||p||Rd(c)||Rd(u)){if(i=a.vars,O=a.timeline=new yr({data:"nested",defaults:_||{},targets:b&&b.data==="nested"?b.vars.targets:C}),O.kill(),O.parent=O._dp=Ks(a),O._start=0,p||Rd(c)||Rd(u)){if(k=C.length,L=p&&KE(p),ks(p))for(R in p)~hC.indexOf(R)&&(I||(I={}),I[R]=p[R]);for(T=0;T<k;T++)A=pp(i,dC),A.stagger=0,w&&(A.yoyoEase=w),I&&Ja(A,I),P=C[T],A.duration=+af(c,Ks(a),T,P,C),A.delay=(+af(u,Ks(a),T,P,C)||0)-a._delay,!p&&k===1&&A.delay&&(a._delay=u=A.delay,a._start+=u,A.delay=0),O.to(P,A,L?L(T,P,C):0),O._ease=lt.none;O.duration()?c=u=0:a.timeline=0}else if(v){sf(Pi(O.vars.defaults,{ease:"none"})),O._ease=qa(v.ease||i.ease||"none");var D=0,B,z,V;if(rr(v))v.forEach(function($){return O.to(C,$,">")}),O.duration();else{A={};for(R in v)R==="ease"||R==="easeEach"||_F(R,v[R],A,v.easeEach);for(R in A)for(B=A[R].sort(function($,K){return $.t-K.t}),D=0,T=0;T<B.length;T++)z=B[T],V={ease:z.e,duration:(z.t-(T?B[T-1].t:0))/100*c},V[R]=z.v,O.to(C,V,D),D+=V.duration;O.duration()<c&&O.to({},{duration:c-O.duration()})}}c||a.duration(c=O.duration())}else a.timeline=0;return m===!0&&!y1&&(jo=Ks(a),Qt.killTweensOf(C),jo=0),ws(b,Ks(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(d||!c&&!v&&a._start===Nn(b._time)&&Nr(d)&&ZL(Ks(a))&&b.data!=="nested")&&(a._tTime=-Mt,a.render(Math.max(0,-u)||0)),y&&qE(Ks(a),y),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,u=i<0,d=i>l-Mt&&!u?l:i<Mt?0:i,p,m,v,_,y,w,b,C,O;if(!c)KL(this,i,s,o);else if(d!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=d,C=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(_*100+i,s,o);if(p=Nn(d%_),d===l?(v=this._repeat,p=c):(v=~~(d/_),v&&v===Nn(d/_)&&(p=c,v--),p>c&&(p=c)),w=this._yoyo&&v&1,w&&(O=this._yEase,p=c-p),y=Tc(this._tTime,_),p===a&&!o&&this._initted&&v===y)return this._tTime=d,this;v!==y&&(C&&this._yEase&&lC(C,w),this.vars.repeatRefresh&&!w&&!this._lock&&this._time!==c&&this._initted&&(this._lock=o=1,this.render(Nn(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(YE(this,u?i:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==y))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(O||this._ease)(p/c),this._from&&(this.ratio=b=1-b),p&&!a&&!s&&!v&&(ii(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(b,m.d),m=m._next;C&&C.render(i<0?i:!p&&w?-Mt:C._dur*C._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&sv(this,i,s,o),ii(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!s&&this.parent&&ii(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&sv(this,i,!0,!0),(i||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&ea(this,1),!s&&!(u&&!a)&&(d||a||w)&&(ii(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){_f||ri.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||k1(this,c),u=this._ease(c/this._dur),gF(this,i,s,o,a,u,c,l)?this.resetTo(i,s,o,a,1):(am(this,0),this.parent||WE(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Xu(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,jo&&jo.vars.overwrite!==!0)._first||Xu(this),this.parent&&o!==this.timeline.totalDuration()&&Ec(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?ki(i):a,c=this._ptLookup,u=this._pt,d,p,m,v,_,y,w;if((!s||s==="all")&&qL(a,l))return s==="all"&&(this._pt=0),Xu(this);for(d=this._op=this._op||[],s!=="all"&&(Un(s)&&(_={},Lr(s,function(b){return _[b]=1}),s=_),s=vF(a,s)),w=a.length;w--;)if(~l.indexOf(a[w])){p=c[w],s==="all"?(d[w]=s,v=p,m={}):(m=d[w]=d[w]||{},v=s);for(_ in v)y=p&&p[_],y&&((!("kill"in y.d)||y.d.kill(_)===!0)&&sm(this,y,"_pt"),delete p[_]),m!=="all"&&(m[_]=1)}return this._initted&&!this._pt&&u&&Xu(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return of(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return of(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Qt.killTweensOf(i,s,o)},e}(yf);Pi(bn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Lr("staggerTo,staggerFrom,staggerFromTo",function(n){bn[n]=function(){var e=new yr,t=av.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var A1=function(e,t,r){return e[t]=r},pC=function(e,t,r){return e[t](r)},yF=function(e,t,r,i){return e[t](i.fp,r)},xF=function(e,t,r){return e.setAttribute(t,r)},R1=function(e,t){return an(e[t])?pC:x1(e[t])&&e.setAttribute?xF:A1},mC=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},wF=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},gC=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},M1=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},bF=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},SF=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?sm(this,t,"_pt"):t.dep||(r=1),t=i;return!r},TF=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},vC=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Fr=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||mC,this.d=l||this,this.set=c||A1,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=TF,this.m=r,this.mt=s,this.tween=i},n}();Lr(E1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return T1[n]=1});ci.TweenMax=ci.TweenLite=bn;ci.TimelineLite=ci.TimelineMax=yr;Qt=new yr({sortChildren:!1,defaults:Sc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});oi.stringFilter=oC;var Ya=[],Wd={},EF=[],Rw=0,CF=0,o0=function(e){return(Wd[e]||EF).map(function(t){return t()})},fv=function(){var e=Date.now(),t=[];e-Rw>2&&(o0("matchMediaInit"),Ya.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=Ti.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),o0("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),Rw=e,o0("matchMedia"))},_C=function(){function n(t,r){this.selector=r&&lv(r),this.data=[],this._r=[],this.isReverted=!1,this.id=CF++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){an(r)&&(s=i,i=r,r=an);var o=this,a=function(){var c=sn,u=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=lv(s)),sn=o,d=i.apply(o,arguments),an(d)&&o._r.push(d),sn=c,o.selector=u,o.isReverted=!1,d};return o.last=a,r===an?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=sn;sn=null,r(this),sn=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof bn&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof yr?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof bn)&&c.revert&&c.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Ya.length;o--;)Ya[o].id===this.id&&Ya.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),OF=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){ks(r)||(r={matches:r});var o=new _C(0,s||this.scope),a=o.conditions={},l,c,u;sn&&!o.selector&&(o.selector=sn.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?u=1:(l=Ti.matchMedia(r[c]),l&&(Ya.indexOf(o)<0&&Ya.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(fv):l.addEventListener("change",fv)));return u&&i(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),gp={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return rC(i)})},timeline:function(e){return new yr(e)},getTweensOf:function(e,t){return Qt.getTweensOf(e,t)},getProperty:function(e,t,r,i){Un(e)&&(e=ki(e)[0]);var s=Wa(e||{}).get,o=r?HE:VE;return r==="native"&&(r=""),e&&(t?o((ti[t]&&ti[t].get||s)(e,t,r,i)):function(a,l,c){return o((ti[a]&&ti[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if(e=ki(e),e.length>1){var i=e.map(function(u){return Br.quickSetter(u,t,r)}),s=i.length;return function(u){for(var d=s;d--;)i[d](u)}}e=e[0]||{};var o=ti[t],a=Wa(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;ic._pt=0,d.init(e,r?u+r:u,ic,0,[e]),d.render(1,d),ic._pt&&M1(1,ic)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Br.to(e,Ja((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Qt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=qa(e.ease,Sc.ease)),Ew(Sc,e||{})},config:function(e){return Ew(oi,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!ti[a]&&!ci[a]&&mf(t+" effect requires "+a+" plugin.")}),n0[t]=function(a,l,c){return r(ki(a),Pi(l||{},s),c)},o&&(yr.prototype[t]=function(a,l,c){return this.add(n0[t](a,ks(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){lt[e]=qa(t)},parseEase:function(e,t){return arguments.length?qa(e,t):lt},getById:function(e){return Qt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new yr(e),i,s;for(r.smoothChildTiming=Nr(e.smoothChildTiming),Qt.remove(r),r._dp=0,r._time=r._tTime=Qt._time,i=Qt._first;i;)s=i._next,(t||!(!i._dur&&i instanceof bn&&i.vars.onComplete===i._targets[0]))&&ws(r,i,i._start-i._delay),i=s;return ws(Qt,r,0),r},context:function(e,t){return e?new _C(e,t):sn},matchMedia:function(e){return new OF(e)},matchMediaRefresh:function(){return Ya.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||fv()},addEventListener:function(e,t){var r=Wd[e]||(Wd[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Wd[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:sF,wrapYoyo:oF,distribute:KE,random:JE,snap:QE,normalize:iF,getUnit:er,clamp:eF,splitColor:iC,toArray:ki,selector:lv,mapRange:tC,pipe:nF,unitize:rF,interpolate:aF,shuffle:XE},install:UE,effects:n0,ticker:ri,updateRoot:yr.updateRoot,plugins:ti,globalTimeline:Qt,core:{PropTween:Fr,globals:zE,Tween:bn,Timeline:yr,Animation:yf,getCache:Wa,_removeLinkedListItem:sm,reverting:function(){return nr},context:function(e){return e&&sn&&(sn.data.push(e),e._ctx=sn),sn},suppressOverwrites:function(e){return y1=e}}};Lr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return gp[n]=bn[n]});ri.add(yr.updateRoot);ic=gp.to({},{duration:0});var kF=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},AF=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=kF(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},a0=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(Un(s)&&(l={},Lr(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}AF(a,s)}}}},Br=gp.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)nr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},a0("roundProps",cv),a0("modifiers"),a0("snap",QE))||gp;bn.version=yr.version=Br.version="3.12.4";FE=1;w1()&&Cc();lt.Power0;lt.Power1;lt.Power2;lt.Power3;lt.Power4;lt.Linear;lt.Quad;lt.Cubic;lt.Quart;lt.Quint;lt.Strong;lt.Elastic;lt.Back;lt.SteppedEase;lt.Bounce;lt.Sine;lt.Expo;lt.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Mw,$o,fc,P1,Ua,Pw,D1,RF=function(){return typeof window<"u"},fo={},Pa=180/Math.PI,hc=Math.PI/180,Wl=Math.atan2,Dw=1e8,I1=/([A-Z])/g,MF=/(left|right|width|margin|padding|x)/i,PF=/[\s,\(]\S/,Ss={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},hv=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},DF=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},IF=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},NF=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},yC=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},xC=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},LF=function(e,t,r){return e.style[t]=r},FF=function(e,t,r){return e.style.setProperty(t,r)},UF=function(e,t,r){return e._gsap[t]=r},zF=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},BF=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},jF=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Jt="transform",Ur=Jt+"Origin",$F=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in fo&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ss[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=eo(i,a)}):this.tfm[e]=o.x?o[e]:eo(i,e),e===Ur&&(this.tfm.zOrigin=o.zOrigin);else return Ss.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(Jt)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ur,t,"")),e=Jt}(s||t)&&this.props.push(e,t,s[e])},wC=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},VF=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(I1,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=D1(),(!s||!s.isStart)&&!r[Jt]&&(wC(r),i.zOrigin&&r[Ur]&&(r[Ur]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},bC=function(e,t){var r={target:e,props:[],revert:VF,save:$F};return e._gsap||Br.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},SC,dv=function(e,t){var r=$o.createElementNS?$o.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$o.createElement(e);return r&&r.style?r:$o.createElement(e)},Ts=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(I1,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Oc(t)||t,1)||""},Iw="O,Moz,ms,Ms,Webkit".split(","),Oc=function(e,t,r){var i=t||Ua,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Iw[o]+e in s););return o<0?null:(o===3?"ms":o>=0?Iw[o]:"")+e},pv=function(){RF()&&window.document&&(Mw=window,$o=Mw.document,fc=$o.documentElement,Ua=dv("div")||{style:{}},dv("div"),Jt=Oc(Jt),Ur=Jt+"Origin",Ua.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",SC=!!Oc("perspective"),D1=Br.core.reverting,P1=1)},l0=function n(e){var t=dv("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(fc.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),fc.removeChild(t),this.style.cssText=s,o},Nw=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},TC=function(e){var t;try{t=e.getBBox()}catch{t=l0.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===l0||(t=l0.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Nw(e,["x","cx","x1"])||0,y:+Nw(e,["y","cy","y1"])||0,width:0,height:0}:t},EC=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&TC(e))},el=function(e,t){if(t){var r=e.style,i;t in fo&&t!==Ur&&(t=Jt),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(I1,"-$1").toLowerCase())):r.removeAttribute(t)}},Vo=function(e,t,r,i,s,o){var a=new Fr(e._pt,t,r,0,1,o?xC:yC);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},Lw={deg:1,rad:1,turn:1},HF={grid:1,flex:1},ta=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Ua.style,l=MF.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,p=i==="px",m=i==="%",v,_,y,w;if(i===o||!s||Lw[i]||Lw[o])return s;if(o!=="px"&&!p&&(s=n(e,t,r,"px")),w=e.getCTM&&EC(e),(m||o==="%")&&(fo[t]||~t.indexOf("adius")))return v=w?e.getBBox()[l?"width":"height"]:e[u],pn(m?s/v*d:s/100*v);if(a[l?"width":"height"]=d+(p?o:i),_=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,w&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===$o||!_.appendChild)&&(_=$o.body),y=_._gsap,y&&m&&y.width&&l&&y.time===ri.time&&!y.uncache)return pn(s/y.width*d);if(m&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=d+i,v=e[u],b?e.style[t]=b:el(e,t)}else(m||o==="%")&&!HF[Ts(_,"display")]&&(a.position=Ts(e,"position")),_===e&&(a.position="static"),_.appendChild(Ua),v=Ua[u],_.removeChild(Ua),a.position="absolute";return l&&m&&(y=Wa(_),y.time=ri.time,y.width=_[u]),pn(p?v*s/d:v&&s?d/v*s:0)},eo=function(e,t,r,i){var s;return P1||pv(),t in Ss&&t!=="transform"&&(t=Ss[t],~t.indexOf(",")&&(t=t.split(",")[0])),fo[t]&&t!=="transform"?(s=wf(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:_p(Ts(e,Ur))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=vp[t]&&vp[t](e,t,r)||Ts(e,t)||jE(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?ta(e,t,s,r)+r:s},WF=function(e,t,r,i){if(!r||r==="none"){var s=Oc(t,e,1),o=s&&Ts(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=Ts(e,"borderTopColor"))}var a=new Fr(this._pt,e.style,t,0,1,gC),l=0,c=0,u,d,p,m,v,_,y,w,b,C,O,T;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(_=e.style[t],e.style[t]=i,i=Ts(e,t)||i,_?e.style[t]=_:el(e,t)),u=[r,i],oC(u),r=u[0],i=u[1],p=r.match(rc)||[],T=i.match(rc)||[],T.length){for(;d=rc.exec(i);)y=d[0],b=i.substring(l,d.index),v?v=(v+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(v=1),y!==(_=p[c++]||"")&&(m=parseFloat(_)||0,O=_.substr((m+"").length),y.charAt(1)==="="&&(y=uc(m,y)+O),w=parseFloat(y),C=y.substr((w+"").length),l=rc.lastIndex-C.length,C||(C=C||oi.units[t]||O,l===i.length&&(i+=C,a.e+=C)),O!==C&&(m=ta(e,t,_,C)||0),a._pt={_next:a._pt,p:b||c===1?b:",",s:m,c:w-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?xC:yC;return NE.test(i)&&(a.e=0),this._pt=a,a},Fw={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},GF=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Fw[r]||r,t[1]=Fw[i]||i,t.join(" ")},qF=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],fo[a]&&(l=1,a=a==="transformOrigin"?Ur:Jt),el(r,a);l&&(el(r,Jt),o&&(o.svg&&r.removeAttribute("transform"),wf(r,1),o.uncache=1,wC(i)))}},vp={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Fr(e._pt,t,r,0,0,qF);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},xf=[1,0,0,1,0,0],CC={},OC=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Uw=function(e){var t=Ts(e,Jt);return OC(t)?xf:t.substr(7).match(IE).map(pn)},N1=function(e,t){var r=e._gsap||Wa(e),i=e.style,s=Uw(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?xf:s):(s===xf&&!e.offsetParent&&e!==fc&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,fc.appendChild(e)),s=Uw(e),l?i.display=l:el(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):fc.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},mv=function(e,t,r,i,s,o){var a=e._gsap,l=s||N1(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],v=l[1],_=l[2],y=l[3],w=l[4],b=l[5],C=t.split(" "),O=parseFloat(C[0])||0,T=parseFloat(C[1])||0,A,k,R,P;r?l!==xf&&(k=m*y-v*_)&&(R=O*(y/k)+T*(-_/k)+(_*b-y*w)/k,P=O*(-v/k)+T*(m/k)-(m*b-v*w)/k,O=R,T=P):(A=TC(e),O=A.x+(~C[0].indexOf("%")?O/100*A.width:O),T=A.y+(~(C[1]||C[0]).indexOf("%")?T/100*A.height:T)),i||i!==!1&&a.smooth?(w=O-c,b=T-u,a.xOffset=d+(w*m+b*_)-w,a.yOffset=p+(w*v+b*y)-b):a.xOffset=a.yOffset=0,a.xOrigin=O,a.yOrigin=T,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[Ur]="0px 0px",o&&(Vo(o,a,"xOrigin",c,O),Vo(o,a,"yOrigin",u,T),Vo(o,a,"xOffset",d,a.xOffset),Vo(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",O+" "+T)},wf=function(e,t){var r=e._gsap||new uC(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Ts(e,Ur)||"0",u,d,p,m,v,_,y,w,b,C,O,T,A,k,R,P,L,I,D,B,z,V,$,K,G,H,q,F,W,ee,ne,Z;return u=d=p=_=y=w=b=C=O=0,m=v=1,r.svg=!!(e.getCTM&&EC(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Jt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Jt]!=="none"?l[Jt]:"")),i.scale=i.rotate=i.translate="none"),k=N1(e,r.svg),r.svg&&(r.uncache?(G=e.getBBox(),c=r.xOrigin-G.x+"px "+(r.yOrigin-G.y)+"px",K=""):K=!t&&e.getAttribute("data-svg-origin"),mv(e,K||c,!!K||r.originIsAbsolute,r.smooth!==!1,k)),T=r.xOrigin||0,A=r.yOrigin||0,k!==xf&&(I=k[0],D=k[1],B=k[2],z=k[3],u=V=k[4],d=$=k[5],k.length===6?(m=Math.sqrt(I*I+D*D),v=Math.sqrt(z*z+B*B),_=I||D?Wl(D,I)*Pa:0,b=B||z?Wl(B,z)*Pa+_:0,b&&(v*=Math.abs(Math.cos(b*hc))),r.svg&&(u-=T-(T*I+A*B),d-=A-(T*D+A*z))):(Z=k[6],ee=k[7],q=k[8],F=k[9],W=k[10],ne=k[11],u=k[12],d=k[13],p=k[14],R=Wl(Z,W),y=R*Pa,R&&(P=Math.cos(-R),L=Math.sin(-R),K=V*P+q*L,G=$*P+F*L,H=Z*P+W*L,q=V*-L+q*P,F=$*-L+F*P,W=Z*-L+W*P,ne=ee*-L+ne*P,V=K,$=G,Z=H),R=Wl(-B,W),w=R*Pa,R&&(P=Math.cos(-R),L=Math.sin(-R),K=I*P-q*L,G=D*P-F*L,H=B*P-W*L,ne=z*L+ne*P,I=K,D=G,B=H),R=Wl(D,I),_=R*Pa,R&&(P=Math.cos(R),L=Math.sin(R),K=I*P+D*L,G=V*P+$*L,D=D*P-I*L,$=$*P-V*L,I=K,V=G),y&&Math.abs(y)+Math.abs(_)>359.9&&(y=_=0,w=180-w),m=pn(Math.sqrt(I*I+D*D+B*B)),v=pn(Math.sqrt($*$+Z*Z)),R=Wl(V,$),b=Math.abs(R)>2e-4?R*Pa:0,O=ne?1/(ne<0?-ne:ne):0),r.svg&&(K=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!OC(Ts(e,Jt)),K&&e.setAttribute("transform",K))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(m*=-1,b+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,b+=b<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=pn(m),r.scaleY=pn(v),r.rotation=pn(_)+a,r.rotationX=pn(y)+a,r.rotationY=pn(w)+a,r.skewX=b+a,r.skewY=C+a,r.transformPerspective=O+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(i[Ur]=_p(c)),r.xOffset=r.yOffset=0,r.force3D=oi.force3D,r.renderTransform=r.svg?ZF:SC?kC:YF,r.uncache=0,r},_p=function(e){return(e=e.split(" "))[0]+" "+e[1]},c0=function(e,t,r){var i=er(t);return pn(parseFloat(t)+parseFloat(ta(e,"x",r+"px",i)))+i},YF=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,kC(e,t)},Ra="0deg",Hu="0px",Ma=") ",kC=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,d=r.rotationX,p=r.skewX,m=r.skewY,v=r.scaleX,_=r.scaleY,y=r.transformPerspective,w=r.force3D,b=r.target,C=r.zOrigin,O="",T=w==="auto"&&e&&e!==1||w===!0;if(C&&(d!==Ra||u!==Ra)){var A=parseFloat(u)*hc,k=Math.sin(A),R=Math.cos(A),P;A=parseFloat(d)*hc,P=Math.cos(A),o=c0(b,o,k*P*-C),a=c0(b,a,-Math.sin(A)*-C),l=c0(b,l,R*P*-C+C)}y!==Hu&&(O+="perspective("+y+Ma),(i||s)&&(O+="translate("+i+"%, "+s+"%) "),(T||o!==Hu||a!==Hu||l!==Hu)&&(O+=l!==Hu||T?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ma),c!==Ra&&(O+="rotate("+c+Ma),u!==Ra&&(O+="rotateY("+u+Ma),d!==Ra&&(O+="rotateX("+d+Ma),(p!==Ra||m!==Ra)&&(O+="skew("+p+", "+m+Ma),(v!==1||_!==1)&&(O+="scale("+v+", "+_+Ma),b.style[Jt]=O||"translate(0, 0)"},ZF=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,d=r.scaleX,p=r.scaleY,m=r.target,v=r.xOrigin,_=r.yOrigin,y=r.xOffset,w=r.yOffset,b=r.forceCSS,C=parseFloat(o),O=parseFloat(a),T,A,k,R,P;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=hc,c*=hc,T=Math.cos(l)*d,A=Math.sin(l)*d,k=Math.sin(l-c)*-p,R=Math.cos(l-c)*p,c&&(u*=hc,P=Math.tan(c-u),P=Math.sqrt(1+P*P),k*=P,R*=P,u&&(P=Math.tan(u),P=Math.sqrt(1+P*P),T*=P,A*=P)),T=pn(T),A=pn(A),k=pn(k),R=pn(R)):(T=d,R=p,A=k=0),(C&&!~(o+"").indexOf("px")||O&&!~(a+"").indexOf("px"))&&(C=ta(m,"x",o,"px"),O=ta(m,"y",a,"px")),(v||_||y||w)&&(C=pn(C+v-(v*T+_*k)+y),O=pn(O+_-(v*A+_*R)+w)),(i||s)&&(P=m.getBBox(),C=pn(C+i/100*P.width),O=pn(O+s/100*P.height)),P="matrix("+T+","+A+","+k+","+R+","+C+","+O+")",m.setAttribute("transform",P),b&&(m.style[Jt]=P)},XF=function(e,t,r,i,s){var o=360,a=Un(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Pa:1),c=l-i,u=i+c+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*Dw)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*Dw)%o-~~(c/o)*o)),e._pt=p=new Fr(e._pt,t,r,i,c,DF),p.e=u,p.u="deg",e._props.push(r),p},zw=function(e,t){for(var r in t)e[r]=t[r];return e},KF=function(e,t,r){var i=zw({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,u,d,p,m,v;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[Jt]=t,a=wf(r,1),el(r,Jt),r.setAttribute("transform",c)):(c=getComputedStyle(r)[Jt],o[Jt]=t,a=wf(r,1),o[Jt]=c);for(l in fo)c=i[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=er(c),v=er(u),d=m!==v?ta(r,l,c,v):parseFloat(c),p=parseFloat(u),e._pt=new Fr(e._pt,a,l,d,p-d,hv),e._pt.u=v||0,e._props.push(l));zw(a,i)};Lr("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});vp[e>1?"border"+n:n]=function(a,l,c,u,d){var p,m;if(arguments.length<4)return p=o.map(function(v){return eo(a,v,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(u+"").split(" "),m={},o.forEach(function(v,_){return m[v]=p[_]=p[_]||p[(_-1)/2|0]}),a.init(l,m,d)}});var AC={name:"css",register:pv,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,u,d,p,m,v,_,y,w,b,C,O,T,A,k,R;P1||pv(),this.styles=this.styles||bC(e),R=this.styles.props,this.tween=r;for(_ in t)if(_!=="autoRound"&&(u=t[_],!(ti[_]&&fC(_,t,r,i,e,s)))){if(m=typeof u,v=vp[_],m==="function"&&(u=u.call(r,i,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=vf(u)),v)v(this,e,_,u,r)&&(k=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),u+="",qo.lastIndex=0,qo.test(c)||(y=er(c),w=er(u)),w?y!==w&&(c=ta(e,_,c,w)+w):y&&(u+=y),this.add(a,"setProperty",c,u,i,s,0,0,_),o.push(_),R.push(_,0,a[_]);else if(m!=="undefined"){if(l&&_ in l?(c=typeof l[_]=="function"?l[_].call(r,i,e,s):l[_],Un(c)&&~c.indexOf("random(")&&(c=vf(c)),er(c+"")||c==="auto"||(c+=oi.units[_]||er(eo(e,_))||""),(c+"").charAt(1)==="="&&(c=eo(e,_))):c=eo(e,_),p=parseFloat(c),b=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),b&&(u=u.substr(2)),d=parseFloat(u),_ in Ss&&(_==="autoAlpha"&&(p===1&&eo(e,"visibility")==="hidden"&&d&&(p=0),R.push("visibility",0,a.visibility),Vo(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),_!=="scale"&&_!=="transform"&&(_=Ss[_],~_.indexOf(",")&&(_=_.split(",")[0]))),C=_ in fo,C){if(this.styles.save(_),O||(T=e._gsap,T.renderTransform&&!t.parseTransform||wf(e,t.parseTransform),A=t.smoothOrigin!==!1&&T.smooth,O=this._pt=new Fr(this._pt,a,Jt,0,1,T.renderTransform,T,0,-1),O.dep=1),_==="scale")this._pt=new Fr(this._pt,T,"scaleY",T.scaleY,(b?uc(T.scaleY,b+d):d)-T.scaleY||0,hv),this._pt.u=0,o.push("scaleY",_),_+="X";else if(_==="transformOrigin"){R.push(Ur,0,a[Ur]),u=GF(u),T.svg?mv(e,u,0,A,0,this):(w=parseFloat(u.split(" ")[2])||0,w!==T.zOrigin&&Vo(this,T,"zOrigin",T.zOrigin,w),Vo(this,a,_,_p(c),_p(u)));continue}else if(_==="svgOrigin"){mv(e,u,1,A,0,this);continue}else if(_ in CC){XF(this,T,_,p,b?uc(p,b+u):u);continue}else if(_==="smoothOrigin"){Vo(this,T,"smooth",T.smooth,u);continue}else if(_==="force3D"){T[_]=u;continue}else if(_==="transform"){KF(this,u,e);continue}}else _ in a||(_=Oc(_)||_);if(C||(d||d===0)&&(p||p===0)&&!PF.test(u)&&_ in a)y=(c+"").substr((p+"").length),d||(d=0),w=er(u)||(_ in oi.units?oi.units[_]:y),y!==w&&(p=ta(e,_,c,w)),this._pt=new Fr(this._pt,C?T:a,_,p,(b?uc(p,b+d):d)-p,!C&&(w==="px"||_==="zIndex")&&t.autoRound!==!1?NF:hv),this._pt.u=w||0,y!==w&&w!=="%"&&(this._pt.b=c,this._pt.r=IF);else if(_ in a)WF.call(this,e,_,c,b?b+u:u);else if(_ in e)this.add(e,_,c||e[_],b?b+u:u,i,s);else if(_!=="parseTransform"){S1(_,u);continue}C||(_ in a?R.push(_,0,a[_]):R.push(_,1,c||e[_])),o.push(_)}}k&&vC(this)},render:function(e,t){if(t.tween._time||!D1())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:eo,aliases:Ss,getSetter:function(e,t,r){var i=Ss[t];return i&&i.indexOf(",")<0&&(t=i),t in fo&&t!==Ur&&(e._gsap.x||eo(e,"x"))?r&&Pw===r?t==="scale"?zF:UF:(Pw=r||{})&&(t==="scale"?BF:jF):e.style&&!x1(e.style[t])?LF:~t.indexOf("-")?FF:R1(e,t)},core:{_removeProperty:el,_getMatrix:N1}};Br.utils.checkPrefix=Oc;Br.core.getStyleSaver=bC;(function(n,e,t,r){var i=Lr(n+","+e+","+t,function(s){fo[s]=1});Lr(e,function(s){oi.units[s]="deg",CC[s]=1}),Ss[i[13]]=n+","+e,Lr(r,function(s){var o=s.split(":");Ss[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Lr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){oi.units[n]="px"});Br.registerPlugin(AC);var RC=Br.registerPlugin(AC)||Br;RC.core.Tween;const QF=(n,e,t,r,i)=>{const s=new a4,o=1e-5;s.absarc(o,o,o,-Math.PI/2,-Math.PI,!0),s.absarc(o,e-r*2,o,Math.PI,Math.PI/2,!0),s.absarc(n-r*2,e-r*2,o,Math.PI/2,0,!0),s.absarc(n-r*2,o,o,0,-Math.PI/2,!0);const a=new l4(s,{depth:t-r*2,bevelEnabled:!0,bevelSegments:i,steps:2,bevelSize:r,bevelThickness:r,curveSegments:i});a.center();const l=[],c=a.getAttribute("normal"),u=a.getAttribute("position");for(let d=0;d<u.count;d+=1){const p=new Te(c.getX(d),c.getY(d),c.getZ(d)),m=new Te(u.getX(d),u.getY(d),u.getZ(d));let v=0,_=0;Math.abs(p.y)>.9?(v=m.x/n+.5,_=1-(m.z/t+.5)):Math.abs(p.x)>.9?(v=-m.z/t+.5,_=1-(-m.y/e+.5)):Math.abs(p.z)>.9&&(v=m.x/n+.5,_=1-(-m.y/e+.5)),l.push(v,_)}return a.setAttribute("uv",new Yd(l,2)),a};QF(10,10,10,2,10);const gv=new o4(10,10,10),MC=n=>n.node_type==="topic"&&(n.scale||1)>5,JF=500,eU=800;let Wu=null;const tU=500,L1=(n,e)=>{if(Wu)return null;Wu=setTimeout(()=>{Wu&&(clearTimeout(Wu),Wu=null)},tU);const t=[];return n.forEach(i=>{const s=e.position.distanceTo(c4.set(i.x,i.y,i.z));s<eU&&t.push({id:i.ref_id||"",distance:s})}),t.sort((i,s)=>i.distance-s.distance).slice(0,JF).map(i=>i.id)},io=new Te(5e3,600,1600),Bw=100,nU=600,rU=2e3,u0={x:172.7392402058252,y:-239.04675366094037,z:-2e3},PC="14.8.49",jw=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),$w=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),vv=(n,e)=>({startTime:e,type:"setValue",value:n}),DC=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),IC=(n,e,{startTime:t,target:r,timeConstant:i})=>r+(e-r)*Math.exp((t-n)/i),sc=n=>n.type==="exponentialRampToValue",yp=n=>n.type==="linearRampToValue",zo=n=>sc(n)||yp(n),F1=n=>n.type==="setValue",Qs=n=>n.type==="setValueCurve",xp=(n,e,t,r)=>{const i=n[e];return i===void 0?r:zo(i)||F1(i)?i.value:Qs(i)?i.values[i.values.length-1]:IC(t,xp(n,e-1,i.startTime,r),i)},Vw=(n,e,t,r,i)=>t===void 0?[r.insertTime,i]:zo(t)?[t.endTime,t.value]:F1(t)?[t.startTime,t.value]:Qs(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,xp(n,e-1,t.startTime,i)],_v=n=>n.type==="cancelAndHold",yv=n=>n.type==="cancelScheduledValues",Lo=n=>_v(n)||yv(n)?n.cancelTime:sc(n)||yp(n)?n.endTime:n.startTime,Hw=(n,e,t,{endTime:r,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((n-e)/(r-e)):0,Ww=(n,e,t,{endTime:r,value:i})=>t+(n-e)/(r-e)*(i-t),iU=(n,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?n[t]:(1-(e-t))*n[t]+(1-(r-e))*n[r]},sU=(n,{duration:e,startTime:t,values:r})=>{const i=(n-t)/e*(r.length-1);return iU(r,i)},Md=n=>n.type==="setTarget";class oU{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Lo(e);if(_v(e)||yv(e)){const r=this._automationEvents.findIndex(s=>yv(e)&&Qs(s)?s.startTime+s.duration>=t:Lo(s)>=t),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),_v(e)){const s=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&zo(i)){if(s!==void 0&&Md(s))throw new Error("The internal list is malformed.");const o=s===void 0?i.insertTime:Qs(s)?s.startTime+s.duration:Lo(s),a=s===void 0?this._defaultValue:Qs(s)?s.values[s.values.length-1]:s.value,l=sc(i)?Hw(t,o,a,i):Ww(t,o,a,i),c=sc(i)?jw(l,t,this._currenTime):$w(l,t,this._currenTime);this._automationEvents.push(c)}if(s!==void 0&&Md(s)&&this._automationEvents.push(vv(this.getValue(t),t)),s!==void 0&&Qs(s)&&s.startTime+s.duration>t){const o=t-s.startTime,a=(s.values.length-1)/s.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,u=s.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const p=c*d%1;u[d]=s.values[d-1]*(1-p)+s.values[d]*p}this._automationEvents[this._automationEvents.length-1]=DC(u,s.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Lo(o)>t),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Qs(i)&&Lo(i)+i.duration>t)return!1;const s=sc(e)?jw(e.value,e.endTime,this._currenTime):yp(e)?$w(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(s);else{if(Qs(e)&&t+e.duration>Lo(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>Lo(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),i=r[0];Md(i)&&r.unshift(vv(xp(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Lo(o)>e),r=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,s=this._automationEvents[i];if(s!==void 0&&Md(s)&&(r===void 0||!zo(r)||r.insertTime>e))return IC(e,xp(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(s!==void 0&&F1(s)&&(r===void 0||!zo(r)))return s.value;if(s!==void 0&&Qs(s)&&(r===void 0||!zo(r)||s.startTime+s.duration>e))return e<s.startTime+s.duration?sU(e,s):s.values[s.values.length-1];if(s!==void 0&&zo(s)&&(r===void 0||!zo(r)))return s.value;if(r!==void 0&&sc(r)){const[o,a]=Vw(this._automationEvents,i,s,r,this._defaultValue);return Hw(e,o,a,r)}if(r!==void 0&&yp(r)){const[o,a]=Vw(this._automationEvents,i,s,r,this._defaultValue);return Ww(e,o,a,r)}return this._defaultValue}}const aU=n=>({cancelTime:n,type:"cancelAndHold"}),lU=n=>({cancelTime:n,type:"cancelScheduledValues"}),cU=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),uU=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),fU=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),hU=()=>new DOMException("","AbortError"),dU=n=>(e,t,[r,i,s],o)=>{n(e[i],[t,r,s],a=>a[0]===t&&a[1]===r,o)},pU=n=>(e,t,r)=>{const i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);n.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},mU=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},kc=new WeakSet,NC=new WeakMap,U1=new WeakMap,LC=new WeakMap,z1=new WeakMap,lm=new WeakMap,FC=new WeakMap,xv=new WeakMap,wv=new WeakMap,bv=new WeakMap,UC={construct(){return UC}},gU=n=>{try{const e=new Proxy(n,UC);new e}catch{return!1}return!0},Gw=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,qw=(n,e)=>{const t=[];let r=n.replace(/^[\s]+/,""),i=r.match(Gw);for(;i!==null;){const s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());t.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(Gw)}return[t.join(";"),r]},Yw=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Zw=n=>{if(!gU(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},vU=(n,e,t,r,i,s,o,a,l,c,u,d,p)=>{let m=0;return(v,_,y={credentials:"omit"})=>{const w=u.get(v);if(w!==void 0&&w.has(_))return Promise.resolve();const b=c.get(v);if(b!==void 0){const T=b.get(_);if(T!==void 0)return T}const C=s(v),O=C.audioWorklet===void 0?i(_).then(([T,A])=>{const[k,R]=qw(T,A),P=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${R}
})})(window,'_AWGS')`;return t(P)}).then(()=>{const T=p._AWGS.pop();if(T===void 0)throw new SyntaxError;r(C.currentTime,C.sampleRate,()=>T(class{},void 0,(A,k)=>{if(A.trim()==="")throw e();const R=wv.get(C);if(R!==void 0){if(R.has(A))throw e();Zw(k),Yw(k.parameterDescriptors),R.set(A,k)}else Zw(k),Yw(k.parameterDescriptors),wv.set(C,new Map([[A,k]]))},C.sampleRate,void 0,void 0))}):Promise.all([i(_),Promise.resolve(n(d,d))]).then(([[T,A],k])=>{const R=m+1;m=R;const[P,L]=qw(T,A),z=`${P};((AudioWorkletProcessor,registerProcessor)=>{${L}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${R}',class extends AudioWorkletProcessor{process(){return !1}})`,V=new Blob([z],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(V);return C.audioWorklet.addModule($,y).then(()=>{if(a(C))return C;const K=o(C);return K.audioWorklet.addModule($,y).then(()=>K)}).then(K=>{if(l===null)throw new SyntaxError;try{new l(K,`__sac${R}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return b===void 0?c.set(v,new Map([[_,O]])):b.set(_,O),O.then(()=>{const T=u.get(v);T===void 0?u.set(v,new Set([_])):T.add(_)}).finally(()=>{const T=c.get(v);T!==void 0&&T.delete(_)}),O}},Zi=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},cm=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return n.delete(r),r},zC=(n,e,t,r)=>{const i=Zi(n,e),s=cm(i,o=>o[0]===t&&o[1]===r);return i.size===0&&n.delete(e),s},ih=n=>Zi(FC,n),Ac=n=>{if(kc.has(n))throw new Error("The AudioNode is already stored.");kc.add(n),ih(n).forEach(e=>e(!0))},BC=n=>"port"in n,sh=n=>{if(!kc.has(n))throw new Error("The AudioNode is not stored.");kc.delete(n),ih(n).forEach(e=>e(!1))},Sv=(n,e)=>{!BC(n)&&e.every(t=>t.size===0)&&sh(n)},_U=(n,e,t,r,i,s,o,a,l,c,u,d,p)=>{const m=new WeakMap;return(v,_,y,w,b)=>{const{activeInputs:C,passiveInputs:O}=s(_),{outputs:T}=s(v),A=a(v),k=R=>{const P=l(_),L=l(v);if(R){const I=zC(O,v,y,w);n(C,v,I,!1),!b&&!d(v)&&t(L,P,y,w),p(_)&&Ac(_)}else{const I=r(C,v,y,w);e(O,w,I,!1),!b&&!d(v)&&i(L,P,y,w);const D=o(_);if(D===0)u(_)&&Sv(_,C);else{const B=m.get(_);B!==void 0&&clearTimeout(B),m.set(_,setTimeout(()=>{u(_)&&Sv(_,C)},D*1e3))}}};return c(T,[_,y,w],R=>R[0]===_&&R[1]===y&&R[2]===w,!0)?(A.add(k),u(v)?n(C,v,[y,w,k],!0):e(O,w,[v,y,k],!0),!0):!1}},yU=n=>(e,t,[r,i,s],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,t,s]])):n(a,[i,t,s],l=>l[0]===i&&l[1]===t,o)},xU=n=>(e,t)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(r),r.disconnect()};t.addEventListener("ended",i)},wU=n=>(e,t)=>{n(e).add(t)},bU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},SU=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...bU,...l},d=r(c,u),p=s(c)?e():null;super(a,!1,d,p),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},or=(n,e)=>n.context===e,TU=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!or(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},wp=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Rs=()=>new DOMException("","IndexSizeError"),B1=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?Rs():r}})(n.getChannelData)},EU={numberOfChannels:1},CU=(n,e,t,r,i,s,o,a)=>{let l=null;return class jC{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:p,sampleRate:m}={...EU,...u};l===null&&(l=new i(1,1,44100));const v=r!==null&&e(s,s)?new r({length:d,numberOfChannels:p,sampleRate:m}):l.createBuffer(p,d,m);if(v.numberOfChannels===0)throw t();return typeof v.copyFromChannel!="function"?(o(v),B1(v)):e(wp,()=>wp(v))||a(v),n.add(v),v}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===jC.prototype||n.has(u)}}},Dr=-34028234663852886e22,_r=-Dr,so=n=>kc.has(n),OU={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},kU=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),p={...OU,...u},m=i(d,p),v=o(d),_=v?e():null;super(c,!1,m,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=m,this._onended=null,this._playbackRate=t(this,v,m.playbackRate,_r,Dr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){Ac(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),so(this)&&sh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},AU=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=t(c);const p=or(d,u);if(!p){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,m),o!==null&&d.start(...o),a!==null&&d.stop(a)}return s.set(u,d),p?await n(u,c.playbackRate,d.playbackRate):await r(u,c.playbackRate,d.playbackRate),await i(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},RU=n=>"playbackRate"in n,MU=n=>"frequency"in n&&"gain"in n,PU=n=>"offset"in n,DU=n=>!("frequency"in n)&&"gain"in n,IU=n=>"detune"in n&&"frequency"in n,NU=n=>"pan"in n,br=n=>Zi(NC,n),oh=n=>Zi(LC,n),Tv=(n,e)=>{const{activeInputs:t}=br(n);t.forEach(i=>i.forEach(([s])=>{e.includes(n)||Tv(s,[...e,n])}));const r=RU(n)?[n.playbackRate]:BC(n)?Array.from(n.parameters.values()):MU(n)?[n.Q,n.detune,n.frequency,n.gain]:PU(n)?[n.offset]:DU(n)?[n.gain]:IU(n)?[n.detune,n.frequency]:NU(n)?[n.pan]:[];for(const i of r){const s=oh(i);s!==void 0&&s.activeInputs.forEach(([o])=>Tv(o,e))}so(n)&&sh(n)},$C=n=>{Tv(n.destination,[])},LU=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),FU=(n,e,t,r,i,s,o,a,l)=>class extends n{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(v){throw v.code===12&&v.message==="sampleRate is not in range"?t():v}if(d===null)throw r();if(!LU(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw t();super(d,2);const{latencyHint:p}=u,{sampleRate:m}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:p==="balanced"?512/m:p==="interactive"||p===void 0?256/m:p==="playback"?1024/m:Math.max(2,Math.min(128,Math.round(p*m/128)))*128/m,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const v=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",v)};d.addEventListener("statechange",v)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),$C(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const p=()=>{this._nativeAudioContext.removeEventListener("statechange",p),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",p)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},UU=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),p=o(d),m=i(d,u,p),v=p?e(a):null;super(c,!1,m,v),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=m}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},zU=n=>{const e=new WeakMap,t=async(r,i)=>{const s=i.destination;return e.set(i,s),await n(r,i,s),s};return{render(r,i){const s=e.get(i);return s!==void 0?Promise.resolve(s):t(r,i)}}},BU=(n,e,t,r,i,s,o,a)=>(l,c)=>{const u=c.listener,d=()=>{const T=new Float32Array(1),A=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(c);let R=!1,P=[0,0,-1,0,1,0],L=[0,0,0];const I=()=>{if(R)return;R=!0;const V=r(c,256,9,0);V.onaudioprocess=({inputBuffer:$})=>{const K=[s($,T,0),s($,T,1),s($,T,2),s($,T,3),s($,T,4),s($,T,5)];K.some((H,q)=>H!==P[q])&&(u.setOrientation(...K),P=K);const G=[s($,T,6),s($,T,7),s($,T,8)];G.some((H,q)=>H!==L[q])&&(u.setPosition(...G),L=G)},A.connect(V)},D=V=>$=>{$!==P[V]&&(P[V]=$,u.setOrientation(...P))},B=V=>$=>{$!==L[V]&&(L[V]=$,u.setPosition(...L))},z=(V,$,K)=>{const G=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$});G.connect(A,0,V),G.start(),Object.defineProperty(G.offset,"defaultValue",{get(){return $}});const H=n({context:l},k,G.offset,_r,Dr);return a(H,"value",q=>()=>q.call(H),q=>F=>{try{q.call(H,F)}catch(W){if(W.code!==9)throw W}I(),k&&K(F)}),H.cancelAndHoldAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.cancelAndHoldAtTime),H.cancelScheduledValues=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.cancelScheduledValues),H.exponentialRampToValueAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.exponentialRampToValueAtTime),H.linearRampToValueAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.linearRampToValueAtTime),H.setTargetAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.setTargetAtTime),H.setValueAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.setValueAtTime),H.setValueCurveAtTime=(q=>k?()=>{throw i()}:(...F)=>{const W=q.apply(H,F);return I(),W})(H.setValueCurveAtTime),H};return{forwardX:z(0,0,D(0)),forwardY:z(1,0,D(1)),forwardZ:z(2,-1,D(2)),positionX:z(6,0,B(0)),positionY:z(7,0,B(1)),positionZ:z(8,0,B(2)),upX:z(3,0,D(3)),upY:z(4,1,D(4)),upZ:z(5,0,D(5))}},{forwardX:p,forwardY:m,forwardZ:v,positionX:_,positionY:y,positionZ:w,upX:b,upY:C,upZ:O}=u.forwardX===void 0?d():u;return{get forwardX(){return p},get forwardY(){return m},get forwardZ(){return v},get positionX(){return _},get positionY(){return y},get positionZ(){return w},get upX(){return b},get upY(){return C},get upZ(){return O}}},bp=n=>"context"in n,ah=n=>bp(n[0]),fl=(n,e,t,r)=>{for(const i of n)if(t(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Xw=(n,e,[t,r],i)=>{fl(n,[e,t,r],s=>s[0]===e&&s[1]===t,i)},Kw=(n,[e,t,r],i)=>{const s=n.get(e);s===void 0?n.set(e,new Set([[t,r]])):fl(s,[t,r],o=>o[0]===t,i)},Hc=n=>"inputs"in n,Sp=(n,e,t,r)=>{if(Hc(e)){const i=e.inputs[r];return n.connect(i,t,0),[i,t,0]}return n.connect(e,t,r),[e,t,r]},VC=(n,e,t)=>{for(const r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null},jU=(n,e,t)=>cm(n,r=>r[0]===e&&r[1]===t),HC=(n,e)=>{if(!ih(n).delete(e))throw new Error("Missing the expected event listener.")},WC=(n,e,t)=>{const r=Zi(n,e),i=cm(r,s=>s[0]===t);return r.size===0&&n.delete(e),i},Tp=(n,e,t,r)=>{Hc(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)},$t=n=>Zi(U1,n),bf=n=>Zi(z1,n),tl=n=>xv.has(n),Gd=n=>!kc.has(n),Qw=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=n.createScriptProcessor(256,1,1),i=n.createGain(),s=n.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(n.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?t(!0):t(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}}),f0=(n,e)=>{const t=new Map;for(const r of n)for(const i of r){const s=t.get(i);t.set(i,s===void 0?1:s+1)}t.forEach((r,i)=>e(i,r))},Ep=n=>"context"in n,$U=n=>{const e=new Map;n.connect=(t=>(r,i=0,s=0)=>{const o=Ep(r)?t(r,i,s):t(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:s,output:i}]):a.every(l=>l.input!==s||l.output!==i)&&a.push({input:s,output:i}),o})(n.connect.bind(n)),n.disconnect=(t=>(r,i,s)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(i===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==i&&(l.input!==s||s===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{Ep(o)?n.connect(o,l.output,l.input):n.connect(o,l.output)})})(n.disconnect)},VU=(n,e,t,r)=>{const{activeInputs:i,passiveInputs:s}=oh(e),{outputs:o}=br(n),a=ih(n),l=c=>{const u=$t(n),d=bf(e);if(c){const p=WC(s,n,t);Xw(i,n,p,!1),!r&&!tl(n)&&u.connect(d,t)}else{const p=jU(i,n,t);Kw(s,p,!1),!r&&!tl(n)&&u.disconnect(d,t)}};return fl(o,[e,t],c=>c[0]===e&&c[1]===t,!0)?(a.add(l),so(n)?Xw(i,n,[t,l],!0):Kw(s,[n,t,l],!0),!0):!1},HU=(n,e,t,r)=>{const{activeInputs:i,passiveInputs:s}=br(e),o=VC(i[r],n,t);return o===null?[zC(s,n,t,r)[2],!1]:[o[2],!0]},WU=(n,e,t)=>{const{activeInputs:r,passiveInputs:i}=oh(e),s=VC(r,n,t);return s===null?[WC(i,n,t)[1],!1]:[s[2],!0]},j1=(n,e,t,r,i)=>{const[s,o]=HU(n,t,r,i);if(s!==null&&(HC(n,s),o&&!e&&!tl(n)&&Tp($t(n),$t(t),r,i)),so(t)){const{activeInputs:a}=br(t);Sv(t,a)}},$1=(n,e,t,r)=>{const[i,s]=WU(n,t,r);i!==null&&(HC(n,i),s&&!e&&!tl(n)&&$t(n).disconnect(bf(t),r))},GU=(n,e)=>{const t=br(n),r=[];for(const i of t.outputs)ah(i)?j1(n,e,...i):$1(n,e,...i),r.push(i[0]);return t.outputs.clear(),r},qU=(n,e,t)=>{const r=br(n),i=[];for(const s of r.outputs)s[1]===t&&(ah(s)?j1(n,e,...s):$1(n,e,...s),i.push(s[0]),r.outputs.delete(s));return i},YU=(n,e,t,r,i)=>{const s=br(n);return Array.from(s.outputs).filter(o=>o[0]===t&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(ah(o)?j1(n,e,...o):$1(n,e,...o),s.outputs.delete(o),o[0]))},ZU=(n,e,t,r,i,s,o,a,l,c,u,d,p,m,v,_)=>class extends c{constructor(w,b,C,O){super(C),this._context=w,this._nativeAudioNode=C;const T=u(w);d(T)&&t(Qw,()=>Qw(T,_))!==!0&&$U(C),U1.set(this,C),FC.set(this,new Set),w.state!=="closed"&&b&&Ac(this),n(this,O,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(w){this._nativeAudioNode.channelCount=w}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(w){this._nativeAudioNode.channelCountMode=w}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(w){this._nativeAudioNode.channelInterpretation=w}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(w,b=0,C=0){if(b<0||b>=this._nativeAudioNode.numberOfOutputs)throw i();const O=u(this._context),T=v(O);if(p(w)||m(w))throw s();if(bp(w)){const R=$t(w);try{const L=Sp(this._nativeAudioNode,R,b,C),I=Gd(this);(T||I)&&this._nativeAudioNode.disconnect(...L),this.context.state!=="closed"&&!I&&Gd(w)&&Ac(w)}catch(L){throw L.code===12?s():L}if(e(this,w,b,C,T)){const L=l([this],w);f0(L,r(T))}return w}const A=bf(w);if(A.name==="playbackRate"&&A.maxValue===1024)throw o();try{this._nativeAudioNode.connect(A,b),(T||Gd(this))&&this._nativeAudioNode.disconnect(A,b)}catch(R){throw R.code===12?s():R}if(VU(this,w,b,T)){const R=l([this],w);f0(R,r(T))}}disconnect(w,b,C){let O;const T=u(this._context),A=v(T);if(w===void 0)O=GU(this,A);else if(typeof w=="number"){if(w<0||w>=this.numberOfOutputs)throw i();O=qU(this,A,w)}else{if(b!==void 0&&(b<0||b>=this.numberOfOutputs)||bp(w)&&C!==void 0&&(C<0||C>=w.numberOfInputs))throw i();if(O=YU(this,A,w,b,C),O.length===0)throw s()}for(const k of O){const R=l([this],k);f0(R,a)}}},XU=(n,e,t,r,i,s,o,a,l,c,u,d,p)=>(m,v,_,y=null,w=null)=>{const b=_.value,C=new oU(b),O=v?r(C):null,T={get defaultValue(){return b},get maxValue(){return y===null?_.maxValue:y},get minValue(){return w===null?_.minValue:w},get value(){return _.value},set value(A){_.value=A,T.setValueAtTime(A,m.context.currentTime)},cancelAndHoldAtTime(A){if(typeof _.cancelAndHoldAtTime=="function")O===null&&C.flush(m.context.currentTime),C.add(i(A)),_.cancelAndHoldAtTime(A);else{const k=Array.from(C).pop();O===null&&C.flush(m.context.currentTime),C.add(i(A));const R=Array.from(C).pop();_.cancelScheduledValues(A),k!==R&&R!==void 0&&(R.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(R.value,R.endTime):R.type==="linearRampToValue"?_.linearRampToValueAtTime(R.value,R.endTime):R.type==="setValue"?_.setValueAtTime(R.value,R.startTime):R.type==="setValueCurve"&&_.setValueCurveAtTime(R.values,R.startTime,R.duration))}return T},cancelScheduledValues(A){return O===null&&C.flush(m.context.currentTime),C.add(s(A)),_.cancelScheduledValues(A),T},exponentialRampToValueAtTime(A,k){if(A===0)throw new RangeError;if(!Number.isFinite(k)||k<0)throw new RangeError;const R=m.context.currentTime;return O===null&&C.flush(R),Array.from(C).length===0&&(C.add(c(b,R)),_.setValueAtTime(b,R)),C.add(o(A,k)),_.exponentialRampToValueAtTime(A,k),T},linearRampToValueAtTime(A,k){const R=m.context.currentTime;return O===null&&C.flush(R),Array.from(C).length===0&&(C.add(c(b,R)),_.setValueAtTime(b,R)),C.add(a(A,k)),_.linearRampToValueAtTime(A,k),T},setTargetAtTime(A,k,R){return O===null&&C.flush(m.context.currentTime),C.add(l(A,k,R)),_.setTargetAtTime(A,k,R),T},setValueAtTime(A,k){return O===null&&C.flush(m.context.currentTime),C.add(c(A,k)),_.setValueAtTime(A,k),T},setValueCurveAtTime(A,k,R){const P=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const L=k+R,I=m.context.sampleRate,D=Math.ceil(k*I),B=Math.floor(L*I),z=B-D,V=new Float32Array(z);for(let K=0;K<z;K+=1){const G=(P.length-1)/R*((D+K)/I-k),H=Math.floor(G),q=Math.ceil(G);V[K]=H===q?P[H]:(1-(G-H))*P[H]+(1-(q-G))*P[q]}O===null&&C.flush(m.context.currentTime),C.add(u(V,k,R)),_.setValueCurveAtTime(V,k,R);const $=B/I;$<L&&p(T,V[V.length-1],$),p(T,P[P.length-1],L)}else O===null&&C.flush(m.context.currentTime),C.add(u(P,k,R)),_.setValueCurveAtTime(P,k,R);return T}};return t.set(T,_),e.set(T,m),n(T,O),T},KU=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:r,value:i}=t;e.exponentialRampToValueAtTime(i,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:i}=t;e.linearRampToValueAtTime(i,r)}else if(t.type==="setTarget"){const{startTime:r,target:i,timeConstant:s}=t;e.setTargetAtTime(i,r,s)}else if(t.type==="setValue"){const{startTime:r,value:i}=t;e.setValueAtTime(i,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:i,values:s}=t;e.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}});class GC{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,i)=>e.call(t,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const QU={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},JU=(n,e,t,r,i,s,o,a,l,c,u,d,p,m)=>class extends e{constructor(_,y,w){var b;const C=a(_),O=l(C),T=u({...QU,...w});p(T);const A=wv.get(C),k=A==null?void 0:A.get(y),R=O||C.state!=="closed"?C:(b=o(C))!==null&&b!==void 0?b:C,P=i(R,O?null:_.baseLatency,c,y,k,T),L=O?r(y,T,k):null;super(_,!0,P,L);const I=[];P.parameters.forEach((B,z)=>{const V=t(this,O,B);I.push([z,V])}),this._nativeAudioWorkletNode=P,this._onprocessorerror=null,this._parameters=new GC(I),O&&n(C,this);const{activeInputs:D}=s(this);d(P,D)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const y=typeof _=="function"?m(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=y;const w=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=w!==null&&w===y?_:w}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Cp(n,e,t,r,i){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],r,i);else{const s=n.getChannelData(r);if(e[t].byteLength===0)e[t]=s.slice(i,i+128);else{const o=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const qC=(n,e,t,r,i)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],r,i):e[t].byteLength!==0&&n.getChannelData(r).set(e[t],i)},Op=(n,e)=>{const t=[];for(let r=0;r<n;r+=1){const i=[],s=typeof e=="number"?e:e[r];for(let o=0;o<s;o+=1)i.push(new Float32Array(128));t.push(i)}return t},ez=(n,e)=>{const t=Zi(bv,n),r=$t(e);return Zi(t,r)},tz=async(n,e,t,r,i,s,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=i.reduce((y,w)=>y+w,0),u=c===0?null:t.createBuffer(c,a,t.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const d=br(n),p=await ez(t,n),m=Op(r.numberOfInputs,r.channelCount),v=Op(r.numberOfOutputs,i),_=Array.from(n.parameters.keys()).reduce((y,w)=>({...y,[w]:new Float32Array(128)}),{});for(let y=0;y<a;y+=128){if(r.numberOfInputs>0&&e!==null)for(let w=0;w<r.numberOfInputs;w+=1)for(let b=0;b<r.channelCount;b+=1)Cp(e,m[w],b,b,y);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:w},b)=>{Cp(e,_,w,l+b,y)});for(let w=0;w<r.numberOfInputs;w+=1)for(let b=0;b<i[w];b+=1)v[w][b].byteLength===0&&(v[w][b]=new Float32Array(128));try{const w=m.map((C,O)=>d.activeInputs[O].size===0?[]:C),b=o(y/t.sampleRate,t.sampleRate,()=>p.process(w,v,_));if(u!==null)for(let C=0,O=0;C<r.numberOfOutputs;C+=1){for(let T=0;T<i[C];T+=1)qC(u,v[C],T,O+T,y);O+=i[C]}if(!b)break}catch(w){n.dispatchEvent(new ErrorEvent("processorerror",{colno:w.colno,filename:w.filename,lineno:w.lineno,message:w.message}));break}}return u},nz=(n,e,t,r,i,s,o,a,l,c,u,d,p,m,v,_)=>(y,w,b)=>{const C=new WeakMap;let O=null;const T=async(A,k)=>{let R=u(A),P=null;const L=or(R,k),I=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(d===null){const D=I.reduce(($,K)=>$+K,0),B=i(k,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),z=[];for(let $=0;$<A.numberOfOutputs;$+=1)z.push(r(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[$]}));const V=o(k,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1});V.connect=e.bind(null,z),V.disconnect=l.bind(null,z),P=[B,z,V]}else L||(R=new d(k,y));if(C.set(k,P===null?R:P[2]),P!==null){if(O===null){if(b===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const K=A.channelCount*A.numberOfInputs,G=b.parameterDescriptors===void 0?0:b.parameterDescriptors.length,H=K+G;O=tz(A,H===0?null:await(async()=>{const F=new p(H,Math.ceil(A.context.length/128)*128,k.sampleRate),W=[],ee=[];for(let oe=0;oe<w.numberOfInputs;oe+=1)W.push(o(F,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),ee.push(i(F,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const ne=await Promise.all(Array.from(A.parameters.values()).map(async oe=>{const re=s(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await m(F,oe,re.offset),re})),Z=r(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,K+G)});for(let oe=0;oe<w.numberOfInputs;oe+=1){W[oe].connect(ee[oe]);for(let re=0;re<w.channelCount;re+=1)ee[oe].connect(Z,re,oe*w.channelCount+re)}for(const[oe,re]of ne.entries())re.connect(Z,0,K+oe),re.start(0);return Z.connect(F.destination),await Promise.all(W.map(oe=>v(A,F,oe))),_(F)})(),k,w,I,b,c)}const D=await O,B=t(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[z,V,$]=P;D!==null&&(B.buffer=D,B.start(0)),B.connect(z);for(let K=0,G=0;K<A.numberOfOutputs;K+=1){const H=V[K];for(let q=0;q<I[K];q+=1)z.connect(H,G+q,q);G+=I[K]}return $}if(L)for(const[D,B]of A.parameters.entries())await n(k,B,R.parameters.get(D));else for(const[D,B]of A.parameters.entries())await m(k,B,R.parameters.get(D));return await v(A,k,R),R};return{render(A,k){a(k,A);const R=C.get(k);return R!==void 0?Promise.resolve(R):T(A,k)}}},rz=(n,e,t,r,i,s,o,a,l,c,u,d,p,m,v,_,y,w,b,C)=>class extends v{constructor(T,A){super(T,A),this._nativeContext=T,this._audioWorklet=n===void 0?void 0:{addModule:(k,R)=>n(this,k,R)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(T,A,k){return new t({length:A,numberOfChannels:T,sampleRate:k})}createBufferSource(){return new r(this)}createChannelMerger(T=6){return new s(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(T=1){return new u(this,{maxDelayTime:T})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(T,A){return new m(this,{feedback:A,feedforward:T})}createOscillator(){return new _(this)}createPanner(){return new y(this)}createPeriodicWave(T,A,k={disableNormalization:!1}){return new w(this,{...k,imag:A,real:T})}createStereoPanner(){return new b(this)}createWaveShaper(){return new C(this)}decodeAudioData(T,A,k){return c(this._nativeContext,T).then(R=>(typeof A=="function"&&A(R),R),R=>{throw typeof k=="function"&&k(R),R})}},iz={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},sz=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),p={...iz,...u},m=i(d,p),v=o(d),_=v?t():null;super(c,!1,m,_),this._Q=e(this,v,m.Q,_r,Dr),this._detune=e(this,v,m.detune,1200*Math.log2(_r),-1200*Math.log2(_r)),this._frequency=e(this,v,m.frequency,c.sampleRate/2,0),this._gain=e(this,v,m.gain,40*Math.log10(_r),Dr),this._nativeBiquadFilterNode=m,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(p){throw p.code===11?r():p}if(c.length!==u.length||u.length!==d.length)throw r()}},oz=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=or(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return s.set(l,c),u?(await n(l,a.Q,c.Q),await n(l,a.detune,c.detune),await n(l,a.frequency,c.frequency),await n(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},az=(n,e)=>(t,r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n.get(t);if(s!==void 0)return s;try{const o=r();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},lz={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},cz=(n,e,t,r,i)=>class extends n{constructor(o,a){const l=r(o),c={...lz,...a},u=t(l,c),d=i(l)?e():null;super(o,!1,u,d)}},uz=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!or(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},fz={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},hz=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u=s({...fz,...l}),d=t(c,u),p=i(c)?e():null;super(a,!1,d,p)}},dz=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!or(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,c)}return r.set(o,a),await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},pz=n=>(e,t,r)=>n(t,e,r),mz=n=>(e,t,r=0,i=0)=>{const s=e[r];if(s===void 0)throw n();return Ep(t)?s.connect(t,0,i):s.connect(t,0)},gz=n=>(e,t)=>{const r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},vz={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},_z=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...vz,...c},p=r(u,d),m=s(u),v=m?t():null;super(l,!1,p,v),this._constantSourceNodeRenderer=v,this._nativeConstantSourceNode=p,this._offset=e(this,m,p.offset,_r,Dr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Ac(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),so(this)&&sh(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},yz=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=t(c);const p=or(d,u);if(!p){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,m),o!==null&&d.start(o),a!==null&&d.stop(a)}return s.set(u,d),p?await n(u,c.offset,d.offset):await r(u,c.offset,d.offset),await i(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},xz=n=>e=>(n[0]=e,n[0]),wz={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},bz=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u={...wz,...l},d=t(c,u),m=i(c)?e():null;super(a,!1,d,m),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},Sz=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!or(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,c)}return r.set(o,a),Hc(a)?await t(s,o,a.inputs[0]):await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},Tz=(n,e)=>(t,r,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,i)}catch(s){throw s.name==="SyntaxError"?n():s}},Ez=()=>new DOMException("","DataCloneError"),Jw=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const i=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>i();try{e.postMessage(n,[n])}catch{}finally{i()}})},Cz=(n,e,t,r,i,s,o,a,l,c,u)=>(d,p)=>{const m=o(d)?d:s(d);if(i.has(p)){const v=t();return Promise.reject(v)}try{i.add(p)}catch{}return e(l,()=>l(m))?m.decodeAudioData(p).then(v=>(Jw(p).catch(()=>{}),e(a,()=>a(v))||u(v),n.add(v),v)):new Promise((v,_)=>{const y=async()=>{try{await Jw(p)}catch{}},w=b=>{_(b),y()};try{m.decodeAudioData(p,b=>{typeof b.copyFromChannel!="function"&&(c(b),B1(b)),n.add(b),y().then(()=>v(b))},b=>{w(b===null?r():b)})}catch(b){w(b)}})},Oz=(n,e,t,r,i,s,o,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=s(l.context),p=a(d);if(u===c){if(e.delete(l),!p&&o(l)){const m=r(l),{outputs:v}=t(l);for(const _ of v)if(ah(_)){const y=r(_[0]);n(m,y,_[1],_[2])}else{const y=i(_[0]);m.connect(y,_[1])}}}else e.set(l,u-c)},kz={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Az=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...kz,...c},p=r(u,d),m=s(u),v=m?t(d.maxDelayTime):null;super(l,!1,p,v),this._delayTime=e(this,m,p.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},Rz=(n,e,t,r,i)=>s=>{const o=new WeakMap,a=async(l,c)=>{let u=t(l);const d=or(u,c);if(!d){const p={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(c,p)}return o.set(c,u),d?await n(c,l.delayTime,u.delayTime):await r(c,l.delayTime,u.delayTime),await i(l,c,u),u};return{render(l,c){const u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},Mz=n=>(e,t,r,i)=>n(e[i],s=>s[0]===t&&s[1]===r),Pz=n=>(e,t)=>{n(e).delete(t)},Dz=n=>"delayTime"in n,Iz=(n,e,t)=>function r(i,s){const o=bp(s)?s:t(n,s);if(Dz(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...i,o],l[0])).reduce((l,c)=>l.concat(c),[])},Pd=(n,e,t)=>{const r=e[t];if(r===void 0)throw n();return r},Nz=n=>(e,t=void 0,r=void 0,i=0)=>t===void 0?e.forEach(s=>s.disconnect()):typeof t=="number"?Pd(n,e,t).disconnect():Ep(t)?r===void 0?e.forEach(s=>s.disconnect(t)):i===void 0?Pd(n,e,r).disconnect(t,0):Pd(n,e,r).disconnect(t,0,i):r===void 0?e.forEach(s=>s.disconnect(t)):Pd(n,e,r).disconnect(t,0),Lz={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Fz=(n,e,t,r,i,s,o,a)=>class extends n{constructor(c,u){const d=s(c),p={...Lz,...u},m=r(d,p),v=o(d),_=v?t():null;super(c,!1,m,_),this._attack=e(this,v,m.attack),this._knee=e(this,v,m.knee),this._nativeDynamicsCompressorNode=m,this._ratio=e(this,v,m.ratio),this._release=e(this,v,m.release),this._threshold=e(this,v,m.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Uz=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=or(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return s.set(l,c),u?(await n(l,a.attack,c.attack),await n(l,a.knee,c.knee),await n(l,a.ratio,c.ratio),await n(l,a.release,c.release),await n(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},zz=()=>new DOMException("","EncodingError"),Bz=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}const i=n.document.head;if(i===null)r(new SyntaxError);else{const s=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=n.onerror,c=()=>{n.onerror=l,URL.revokeObjectURL(a)};n.onerror=(u,d,p,m,v)=>{if(d===a||d===n.location.href&&p===1&&m===1)return c(),r(v),!1;if(l!==null)return l(u,d,p,m,v)},s.onerror=()=>{c(),r(new SyntaxError)},s.onload=()=>{c(),t()},s.src=a,s.type="module",i.appendChild(s)}}),jz=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,i){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=n(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(t,s,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,i){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,s===void 0?null:s,i)}},$z=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Vz=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},Hz={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Wz=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...Hz,...l},d=r(c,u),p=s(c),m=p?t():null;super(a,!1,d,m),this._gain=e(this,p,d.gain,_r,Dr)}get gain(){return this._gain}},Gz=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=or(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return s.set(l,c),u?await n(l,a.gain,c.gain):await r(l,a.gain,c.gain),await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},qz=(n,e)=>t=>e(n,t),Yz=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Zz=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},Xz=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Kz=n=>e=>n.get(e),Fn=()=>new DOMException("","InvalidStateError"),Qz=n=>e=>{const t=n.get(e);if(t===void 0)throw Fn();return t},Jz=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r},eB=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},um=()=>new DOMException("","InvalidAccessError"),tB=n=>{n.getFrequencyResponse=(e=>(t,r,i)=>{if(t.length!==r.length||r.length!==i.length)throw um();return e.call(n,t,r,i)})(n.getFrequencyResponse)},nB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},rB=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=r(a),u=i(c),d={...nB,...l},p=e(c,u?null:a.baseLatency,d),m=u?t(d.feedback,d.feedforward):null;super(a,!1,p,m),tB(p),this._nativeIIRFilterNode=p,s(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},YC=(n,e,t,r,i,s,o,a,l,c,u)=>{const d=c.length;let p=a;for(let m=0;m<d;m+=1){let v=t[0]*c[m];for(let _=1;_<i;_+=1){const y=p-_&l-1;v+=t[_]*s[y],v-=n[_]*o[y]}for(let _=i;_<r;_+=1)v+=t[_]*s[p-_&l-1];for(let _=i;_<e;_+=1)v-=n[_]*o[p-_&l-1];s[p]=c[m],o[p]=v,p=p+1&l-1,u[m]=v}return p},iB=(n,e,t,r)=>{const i=t instanceof Float64Array?t:new Float64Array(t),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,l=Math.min(o,a);if(i[0]!==1){for(let v=0;v<o;v+=1)s[v]/=i[0];for(let v=1;v<a;v+=1)i[v]/=i[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),p=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),m=n.numberOfChannels;for(let v=0;v<m;v+=1){const _=n.getChannelData(v),y=p.getChannelData(v);u.fill(0),d.fill(0),YC(i,o,s,a,l,u,d,0,c,_,y)}return p},sB=(n,e,t,r,i)=>(s,o)=>{const a=new WeakMap;let l=null;const c=async(u,d)=>{let p=null,m=e(u);const v=or(m,d);if(d.createIIRFilter===void 0?p=n(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):v||(m=d.createIIRFilter(o,s)),a.set(d,p===null?m:p),p!==null){if(l===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const y=new t(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await r(u,y,y.destination);const w=await i(y);return iB(w,d,s,o)})()}const _=await l;return p.buffer=_,p.start(0),p}return await r(u,d,m),m};return{render(u,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):c(u,d)}}},oB=(n,e,t,r,i,s)=>o=>(a,l)=>{const c=n.get(a);if(c===void 0){if(!o&&s(a)){const u=r(a),{outputs:d}=t(a);for(const p of d)if(ah(p)){const m=r(p[0]);e(u,m,p[1],p[2])}else{const m=i(p[0]);u.disconnect(m,p[1])}}n.set(a,l)}else n.set(a,c+l)},aB=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},lB=(n,e)=>t=>n.has(t)||e(t),cB=(n,e)=>t=>n.has(t)||e(t),uB=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},fB=n=>e=>n!==null&&e instanceof n,hB=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,dB=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,pB=(n,e)=>t=>n(t)||e(t),mB=n=>e=>n!==null&&e instanceof n,gB=n=>n!==null&&n.isSecureContext,vB=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s),l=e(a,o);if(r(a))throw TypeError();super(s,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},_B={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},yB=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s);if(r(a))throw new TypeError;const l={..._B,...o},c=e(a,l);super(s,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},xB=(n,e,t,r)=>class extends n{constructor(s,o){const a=t(s),l=e(a,o);if(r(a))throw new TypeError;super(s,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},wB=(n,e,t)=>class extends n{constructor(i,s){const o=t(i),a=e(o,s);super(i,!0,a,null)}},bB=(n,e,t,r,i,s)=>class extends t{constructor(a,l){super(a),this._nativeContext=a,lm.set(this,a),r(a)&&i.set(a,new Set),this._destination=new n(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Sf=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},SB=(n,e)=>(t,r,i)=>{const s=new Set;return t.connect=(o=>(a,l=0,c=0)=>{const u=s.size===0;if(e(a))return o.call(t,a,l,c),n(s,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),u&&r(),a;o.call(t,a,l),n(s,[a,l],d=>d[0]===a&&d[1]===l,!0),u&&r()})(t.connect),t.disconnect=(o=>(a,l,c)=>{const u=s.size>0;if(a===void 0)o.apply(t),s.clear();else if(typeof a=="number"){o.call(t,a);for(const p of s)p[1]===a&&s.delete(p)}else{e(a)?o.call(t,a,l,c):o.call(t,a,l);for(const p of s)p[0]===a&&(l===void 0||p[1]===l)&&(c===void 0||p[2]===c)&&s.delete(p)}const d=s.size===0;u&&d&&i()})(t.disconnect),t},qt=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)},En=(n,e)=>{qt(n,e,"channelCount"),qt(n,e,"channelCountMode"),qt(n,e,"channelInterpretation")},eb=n=>typeof n.getFloatTimeDomainData=="function",TB=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const r=Math.max(t.length,n.fftSize);for(let i=0;i<r;i+=1)e[i]=(t[i]-128)*.0078125;return e}},EB=(n,e)=>(t,r)=>{const i=t.createAnalyser();if(En(i,r),!(r.maxDecibels>r.minDecibels))throw e();return qt(i,r,"fftSize"),qt(i,r,"maxDecibels"),qt(i,r,"minDecibels"),qt(i,r,"smoothingTimeConstant"),n(eb,()=>eb(i))||TB(i),i},CB=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,on=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)},OB=n=>{n.start=(e=>{let t=!1;return(r=0,i=0,s)=>{if(t)throw Fn();e.call(n,r,i,s),t=!0}})(n.start)},V1=n=>{n.start=(e=>(t=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,i)})(n.start)},H1=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},kB=(n,e,t,r,i,s,o,a,l,c,u)=>(d,p)=>{const m=d.createBufferSource();return En(m,p),on(m,p,"playbackRate"),qt(m,p,"buffer"),qt(m,p,"loop"),qt(m,p,"loopEnd"),qt(m,p,"loopStart"),e(t,()=>t(d))||OB(m),e(r,()=>r(d))||l(m),e(i,()=>i(d))||c(m,d),e(s,()=>s(d))||V1(m),e(o,()=>o(d))||u(m,d),e(a,()=>a(d))||H1(m),n(d,m),m},AB=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,RB=(n,e)=>(t,r,i)=>{const s=t.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=n(t,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{s.channelCount=l}catch(c){if(l>s.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),s.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o},MB=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,PB=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},DB=(n,e,t,r,i)=>(s,o,a,l,c,u)=>{if(a!==null)try{const d=new a(s,l,u),p=new Map;let m=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>m,set:v=>{typeof m=="function"&&d.removeEventListener("processorerror",m),m=typeof v=="function"?v:null,typeof m=="function"&&d.addEventListener("processorerror",m)}}}),d.addEventListener=(v=>(..._)=>{if(_[0]==="processorerror"){const y=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(y!==null){const w=p.get(_[1]);w!==void 0?_[1]=w:(_[1]=b=>{b.type==="error"?(Object.defineProperties(b,{type:{value:"processorerror"}}),y(b)):y(new ErrorEvent(_[0],{...b}))},p.set(y,_[1]))}}return v.call(d,"error",_[1],_[2]),v.call(d,..._)})(d.addEventListener),d.removeEventListener=(v=>(..._)=>{if(_[0]==="processorerror"){const y=p.get(_[1]);y!==void 0&&(p.delete(_[1]),_[1]=y)}return v.call(d,"error",_[1],_[2]),v.call(d,_[0],_[1],_[2])})(d.removeEventListener),u.numberOfOutputs!==0){const v=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(v).connect(s.destination),i(d,()=>v.disconnect(),()=>v.connect(s.destination))}return d}catch(d){throw d.code===11?r():d}if(c===void 0)throw r();return PB(u),e(s,o,c,u)},ZC=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),IB=n=>new Promise((e,t)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),i.close(),e(s)},r.onmessageerror=({data:s})=>{r.close(),i.close(),t(s)},i.postMessage(n)}),NB=async(n,e)=>{const t=await IB(e);return new n(t)},LB=(n,e,t,r)=>{let i=bv.get(n);i===void 0&&(i=new WeakMap,bv.set(n,i));const s=NB(t,r);return i.set(e,s),s},FB=(n,e,t,r,i,s,o,a,l,c,u,d,p)=>(m,v,_,y)=>{if(y.numberOfInputs===0&&y.numberOfOutputs===0)throw l();const w=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(w.some(J=>J<1))throw l();if(w.length!==y.numberOfOutputs)throw e();if(y.channelCountMode!=="explicit")throw l();const b=y.channelCount*y.numberOfInputs,C=w.reduce((J,de)=>J+de,0),O=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(b+O>6||C>6)throw l();const T=new MessageChannel,A=[],k=[];for(let J=0;J<y.numberOfInputs;J+=1)A.push(o(m,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),k.push(i(m,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const R=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:J,maxValue:de,minValue:be,name:fe}of _.parameterDescriptors){const ge=s(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:y.parameterData[fe]!==void 0?y.parameterData[fe]:J===void 0?0:J});Object.defineProperties(ge.offset,{defaultValue:{get:()=>J===void 0?0:J},maxValue:{get:()=>de===void 0?_r:de},minValue:{get:()=>be===void 0?Dr:be}}),R.push(ge)}const P=r(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,b+O)}),L=ZC(v,m.sampleRate),I=a(m,L,b+O,Math.max(1,C)),D=i(m,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),B=[];for(let J=0;J<y.numberOfOutputs;J+=1)B.push(r(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:w[J]}));for(let J=0;J<y.numberOfInputs;J+=1){A[J].connect(k[J]);for(let de=0;de<y.channelCount;de+=1)k[J].connect(P,de,J*y.channelCount+de)}const z=new GC(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:J},de)=>{const be=R[de];return be.connect(P,0,b+de),be.start(0),[J,be.offset]}));P.connect(I);let V=y.channelInterpretation,$=null;const K=y.numberOfOutputs===0?[I]:B,G={get bufferSize(){return L},get channelCount(){return y.channelCount},set channelCount(J){throw t()},get channelCountMode(){return y.channelCountMode},set channelCountMode(J){throw t()},get channelInterpretation(){return V},set channelInterpretation(J){for(const de of A)de.channelInterpretation=J;V=J},get context(){return I.context},get inputs(){return A},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return $},set onprocessorerror(J){typeof $=="function"&&G.removeEventListener("processorerror",$),$=typeof J=="function"?J:null,typeof $=="function"&&G.addEventListener("processorerror",$)},get parameters(){return z},get port(){return T.port2},addEventListener(...J){return I.addEventListener(J[0],J[1],J[2])},connect:n.bind(null,K),disconnect:c.bind(null,K),dispatchEvent(...J){return I.dispatchEvent(J[0])},removeEventListener(...J){return I.removeEventListener(J[0],J[1],J[2])}},H=new Map;T.port1.addEventListener=(J=>(...de)=>{if(de[0]==="message"){const be=typeof de[1]=="function"?de[1]:typeof de[1]=="object"&&de[1]!==null&&typeof de[1].handleEvent=="function"?de[1].handleEvent:null;if(be!==null){const fe=H.get(de[1]);fe!==void 0?de[1]=fe:(de[1]=ge=>{u(m.currentTime,m.sampleRate,()=>be(ge))},H.set(be,de[1]))}}return J.call(T.port1,de[0],de[1],de[2])})(T.port1.addEventListener),T.port1.removeEventListener=(J=>(...de)=>{if(de[0]==="message"){const be=H.get(de[1]);be!==void 0&&(H.delete(de[1]),de[1]=be)}return J.call(T.port1,de[0],de[1],de[2])})(T.port1.removeEventListener);let q=null;Object.defineProperty(T.port1,"onmessage",{get:()=>q,set:J=>{typeof q=="function"&&T.port1.removeEventListener("message",q),q=typeof J=="function"?J:null,typeof q=="function"&&(T.port1.addEventListener("message",q),T.port1.start())}}),_.prototype.port=T.port1;let F=null;LB(m,G,_,y).then(J=>F=J);const ee=Op(y.numberOfInputs,y.channelCount),ne=Op(y.numberOfOutputs,w),Z=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((J,{name:de})=>({...J,[de]:new Float32Array(128)}),{});let oe=!0;const re=()=>{y.numberOfOutputs>0&&I.disconnect(D);for(let J=0,de=0;J<y.numberOfOutputs;J+=1){const be=B[J];for(let fe=0;fe<w[J];fe+=1)D.disconnect(be,de+fe,fe);de+=w[J]}},Q=new Map;I.onaudioprocess=({inputBuffer:J,outputBuffer:de})=>{if(F!==null){const be=d(G);for(let fe=0;fe<L;fe+=128){for(let ge=0;ge<y.numberOfInputs;ge+=1)for(let me=0;me<y.channelCount;me+=1)Cp(J,ee[ge],me,me,fe);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:ge},me)=>{Cp(J,Z,ge,b+me,fe)});for(let ge=0;ge<y.numberOfInputs;ge+=1)for(let me=0;me<w[ge];me+=1)ne[ge][me].byteLength===0&&(ne[ge][me]=new Float32Array(128));try{const ge=ee.map((he,Ae)=>{if(be[Ae].size>0)return Q.set(Ae,L/128),he;const pe=Q.get(Ae);return pe===void 0?[]:(he.every(we=>we.every(Be=>Be===0))&&(pe===1?Q.delete(Ae):Q.set(Ae,pe-1)),he)});oe=u(m.currentTime+fe/m.sampleRate,m.sampleRate,()=>F.process(ge,ne,Z));for(let he=0,Ae=0;he<y.numberOfOutputs;he+=1){for(let ie=0;ie<w[he];ie+=1)qC(de,ne[he],ie,Ae+ie,fe);Ae+=w[he]}}catch(ge){oe=!1,G.dispatchEvent(new ErrorEvent("processorerror",{colno:ge.colno,filename:ge.filename,lineno:ge.lineno,message:ge.message}))}if(!oe){for(let ge=0;ge<y.numberOfInputs;ge+=1){A[ge].disconnect(k[ge]);for(let me=0;me<y.channelCount;me+=1)k[fe].disconnect(P,me,ge*y.channelCount+me)}if(_.parameterDescriptors!==void 0){const ge=_.parameterDescriptors.length;for(let me=0;me<ge;me+=1){const he=R[me];he.disconnect(P,0,b+me),he.stop()}}P.disconnect(I),I.onaudioprocess=null,_e?re():ue();break}}}};let _e=!1;const xe=o(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ce=()=>I.connect(xe).connect(m.destination),ue=()=>{I.disconnect(xe),xe.disconnect()},Ee=()=>{if(oe){ue(),y.numberOfOutputs>0&&I.connect(D);for(let J=0,de=0;J<y.numberOfOutputs;J+=1){const be=B[J];for(let fe=0;fe<w[J];fe+=1)D.connect(be,de+fe,fe);de+=w[J]}}_e=!0},Ie=()=>{oe&&(ce(),re()),_e=!1};return ce(),p(G,Ee,Ie)},XC=(n,e)=>{const t=n.createBiquadFilter();return En(t,e),on(t,e,"Q"),on(t,e,"detune"),on(t,e,"frequency"),on(t,e,"gain"),qt(t,e,"type"),t},UB=(n,e)=>(t,r)=>{const i=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,i),En(i,r),i},zB=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Fn()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Fn()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Fn()}})},lh=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return En(t,e),zB(t),t},BB=(n,e,t,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return t(s,o);const a=s.createConstantSource();return En(a,o),on(a,o,"offset"),e(r,()=>r(s))||V1(a),e(i,()=>i(s))||H1(a),n(s,a),a},Wc=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),jB=(n,e,t,r)=>(i,{offset:s,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=t(i,{...o,gain:s}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(v){c.channelCount=v},get channelCountMode(){return c.channelCountMode},set channelCountMode(v){c.channelCountMode=v},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(v){c.channelInterpretation=v},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(v){l.onended=v},addEventListener(...v){return l.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return l.dispatchEvent(v[0])},removeEventListener(...v){return l.removeEventListener(v[0],v[1],v[2])},start(v=0){l.start.call(l,v)},stop(v=0){l.stop.call(l,v)}},p=()=>l.connect(c),m=()=>l.disconnect(c);return n(i,l),r(Wc(d,c),p,m)},$B=(n,e)=>(t,r)=>{const i=t.createConvolver();if(En(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),qt(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw n();return s.call(i,o)}),r.channelCountMode==="max"))throw n();return e(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw n();return s.call(i,o)}),i},KC=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return En(t,e),on(t,e,"delayTime"),t},VB=n=>(e,t)=>{const r=e.createDynamicsCompressor();if(En(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return on(r,t,"attack"),on(r,t,"knee"),on(r,t,"ratio"),on(r,t,"release"),on(r,t,"threshold"),r},jr=(n,e)=>{const t=n.createGain();return En(t,e),on(t,e,"gain"),t},HB=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return En(i,r),i};function WB(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function GB(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function tb(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=GB(t,e),t[0]+=n[r];return t}const qB=(n,e,t,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=ZC(s,i.sampleRate),p=c instanceof Float64Array?c:new Float64Array(c),m=u instanceof Float64Array?u:new Float64Array(u),v=p.length,_=m.length,y=Math.min(v,_);if(v===0||v>20)throw r();if(p[0]===0)throw e();if(_===0||_>20)throw r();if(m[0]===0)throw e();if(p[0]!==1){for(let R=0;R<_;R+=1)m[R]/=p[0];for(let R=1;R<v;R+=1)p[R]/=p[0]}const w=t(i,d,o,o);w.channelCount=o,w.channelCountMode=a,w.channelInterpretation=l;const b=32,C=[],O=[],T=[];for(let R=0;R<o;R+=1){C.push(0);const P=new Float32Array(b),L=new Float32Array(b);P.fill(0),L.fill(0),O.push(P),T.push(L)}w.onaudioprocess=R=>{const P=R.inputBuffer,L=R.outputBuffer,I=P.numberOfChannels;for(let D=0;D<I;D+=1){const B=P.getChannelData(D),z=L.getChannelData(D);C[D]=YC(p,v,m,_,y,O[D],T[D],C[D],b,B,z)}};const A=i.sampleRate/2;return Wc({get bufferSize(){return d},get channelCount(){return w.channelCount},set channelCount(R){w.channelCount=R},get channelCountMode(){return w.channelCountMode},set channelCountMode(R){w.channelCountMode=R},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(R){w.channelInterpretation=R},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},addEventListener(...R){return w.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return w.dispatchEvent(R[0])},getFrequencyResponse(R,P,L){if(R.length!==P.length||P.length!==L.length)throw n();const I=R.length;for(let D=0;D<I;D+=1){const B=-Math.PI*(R[D]/A),z=[Math.cos(B),Math.sin(B)],V=tb(m,z),$=tb(p,z),K=WB(V,$);P[D]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),L[D]=Math.atan2(K[1],K[0])}},removeEventListener(...R){return w.removeEventListener(R[0],R[1],R[2])}},w)},YB=(n,e)=>n.createMediaElementSource(e.mediaElement),ZB=(n,e)=>{const t=n.createMediaStreamDestination();return En(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},XB=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);const r=t.slice(0,1),i=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},KB=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const i=new MediaStream([r]),s=t.createMediaStreamSource(i);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return s},QB=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,JB=(n,e,t,r,i,s)=>(o,a)=>{const l=o.createOscillator();return En(l,a),on(l,a,"detune"),on(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):qt(l,a,"type"),e(t,()=>t(o))||V1(l),e(r,()=>r(o))||s(l,o),e(i,()=>i(o))||H1(l),n(o,l),l},ej=n=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?n(e,t):(En(r,t),on(r,t,"orientationX"),on(r,t,"orientationY"),on(r,t,"orientationZ"),on(r,t,"positionX"),on(r,t,"positionY"),on(r,t,"positionZ"),qt(r,t,"coneInnerAngle"),qt(r,t,"coneOuterAngle"),qt(r,t,"coneOuterGain"),qt(r,t,"distanceModel"),qt(r,t,"maxDistance"),qt(r,t,"panningModel"),qt(r,t,"refDistance"),qt(r,t,"rolloffFactor"),r)},tj=(n,e,t,r,i,s,o,a,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:p,coneOuterGain:m,distanceModel:v,maxDistance:_,orientationX:y,orientationY:w,orientationZ:b,panningModel:C,positionX:O,positionY:T,positionZ:A,refDistance:k,rolloffFactor:R,...P})=>{const L=u.createPanner();if(P.channelCount>2||P.channelCountMode==="max")throw o();En(L,P);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=t(u,{...I,channelInterpretation:"speakers",numberOfInputs:6}),B=r(u,{...P,gain:1}),z=r(u,{...I,gain:1}),V=r(u,{...I,gain:0}),$=r(u,{...I,gain:0}),K=r(u,{...I,gain:0}),G=r(u,{...I,gain:0}),H=r(u,{...I,gain:0}),q=i(u,256,6,1),F=s(u,{...I,curve:new Float32Array([1,1]),oversample:"none"});let W=[y,w,b],ee=[O,T,A];const ne=new Float32Array(1);q.onaudioprocess=({inputBuffer:Q})=>{const _e=[l(Q,ne,0),l(Q,ne,1),l(Q,ne,2)];_e.some((ce,ue)=>ce!==W[ue])&&(L.setOrientation(..._e),W=_e);const xe=[l(Q,ne,3),l(Q,ne,4),l(Q,ne,5)];xe.some((ce,ue)=>ce!==ee[ue])&&(L.setPosition(...xe),ee=xe)},Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0});const Z={get bufferSize(){},get channelCount(){return L.channelCount},set channelCount(Q){if(Q>2)throw o();B.channelCount=Q,L.channelCount=Q},get channelCountMode(){return L.channelCountMode},set channelCountMode(Q){if(Q==="max")throw o();B.channelCountMode=Q,L.channelCountMode=Q},get channelInterpretation(){return L.channelInterpretation},set channelInterpretation(Q){B.channelInterpretation=Q,L.channelInterpretation=Q},get coneInnerAngle(){return L.coneInnerAngle},set coneInnerAngle(Q){L.coneInnerAngle=Q},get coneOuterAngle(){return L.coneOuterAngle},set coneOuterAngle(Q){L.coneOuterAngle=Q},get coneOuterGain(){return L.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();L.coneOuterGain=Q},get context(){return L.context},get distanceModel(){return L.distanceModel},set distanceModel(Q){L.distanceModel=Q},get inputs(){return[B]},get maxDistance(){return L.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;L.maxDistance=Q},get numberOfInputs(){return L.numberOfInputs},get numberOfOutputs(){return L.numberOfOutputs},get orientationX(){return z.gain},get orientationY(){return V.gain},get orientationZ(){return $.gain},get panningModel(){return L.panningModel},set panningModel(Q){L.panningModel=Q},get positionX(){return K.gain},get positionY(){return G.gain},get positionZ(){return H.gain},get refDistance(){return L.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;L.refDistance=Q},get rolloffFactor(){return L.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;L.rolloffFactor=Q},addEventListener(...Q){return B.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return B.dispatchEvent(Q[0])},removeEventListener(...Q){return B.removeEventListener(Q[0],Q[1],Q[2])}};d!==Z.coneInnerAngle&&(Z.coneInnerAngle=d),p!==Z.coneOuterAngle&&(Z.coneOuterAngle=p),m!==Z.coneOuterGain&&(Z.coneOuterGain=m),v!==Z.distanceModel&&(Z.distanceModel=v),_!==Z.maxDistance&&(Z.maxDistance=_),y!==Z.orientationX.value&&(Z.orientationX.value=y),w!==Z.orientationY.value&&(Z.orientationY.value=w),b!==Z.orientationZ.value&&(Z.orientationZ.value=b),C!==Z.panningModel&&(Z.panningModel=C),O!==Z.positionX.value&&(Z.positionX.value=O),T!==Z.positionY.value&&(Z.positionY.value=T),A!==Z.positionZ.value&&(Z.positionZ.value=A),k!==Z.refDistance&&(Z.refDistance=k),R!==Z.rolloffFactor&&(Z.rolloffFactor=R),(W[0]!==1||W[1]!==0||W[2]!==0)&&L.setOrientation(...W),(ee[0]!==0||ee[1]!==0||ee[2]!==0)&&L.setPosition(...ee);const oe=()=>{B.connect(L),n(B,F,0,0),F.connect(z).connect(D,0,0),F.connect(V).connect(D,0,1),F.connect($).connect(D,0,2),F.connect(K).connect(D,0,3),F.connect(G).connect(D,0,4),F.connect(H).connect(D,0,5),D.connect(q).connect(u.destination)},re=()=>{B.disconnect(L),a(B,F,0,0),F.disconnect(z),z.disconnect(D),F.disconnect(V),V.disconnect(D),F.disconnect($),$.disconnect(D),F.disconnect(K),K.disconnect(D),F.disconnect(G),G.disconnect(D),F.disconnect(H),H.disconnect(D),D.disconnect(q),q.disconnect(u.destination)};return c(Wc(Z,L),oe,re)},nj=n=>(e,{disableNormalization:t,imag:r,real:i})=>{const s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,s,{disableNormalization:t});if(Array.from(r).length<2)throw n();return a},ch=(n,e,t,r)=>n.createScriptProcessor(e,t,r),rj=(n,e)=>(t,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);const s=t.createStereoPanner();return En(s,r),on(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw e()}}),s},ij=(n,e,t,r,i,s)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(v,_,y,w)=>{const b=new Float32Array(16385),C=new Float32Array(16385);for(let P=0;P<16385;P+=1){const L=P/16384*l;b[P]=Math.cos(L),C[P]=Math.sin(L)}const O=t(v,{...c,gain:0}),T=r(v,{...u,curve:b}),A=r(v,{...u,curve:a}),k=t(v,{...c,gain:0}),R=r(v,{...u,curve:C});return{connectGraph(){_.connect(O),_.connect(A.inputs===void 0?A:A.inputs[0]),_.connect(k),A.connect(y),y.connect(T.inputs===void 0?T:T.inputs[0]),y.connect(R.inputs===void 0?R:R.inputs[0]),T.connect(O.gain),R.connect(k.gain),O.connect(w,0,0),k.connect(w,0,1)},disconnectGraph(){_.disconnect(O),_.disconnect(A.inputs===void 0?A:A.inputs[0]),_.disconnect(k),A.disconnect(y),y.disconnect(T.inputs===void 0?T:T.inputs[0]),y.disconnect(R.inputs===void 0?R:R.inputs[0]),T.disconnect(O.gain),R.disconnect(k.gain),O.disconnect(w,0,0),k.disconnect(w,0,1)}}},p=(v,_,y,w)=>{const b=new Float32Array(16385),C=new Float32Array(16385),O=new Float32Array(16385),T=new Float32Array(16385),A=Math.floor(16385/2);for(let K=0;K<16385;K+=1)if(K>A){const G=(K-A)/(16384-A)*l;b[K]=Math.cos(G),C[K]=Math.sin(G),O[K]=0,T[K]=1}else{const G=K/(16384-A)*l;b[K]=1,C[K]=0,O[K]=Math.cos(G),T[K]=Math.sin(G)}const k=e(v,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),R=t(v,{...c,gain:0}),P=r(v,{...u,curve:b}),L=t(v,{...c,gain:0}),I=r(v,{...u,curve:C}),D=r(v,{...u,curve:a}),B=t(v,{...c,gain:0}),z=r(v,{...u,curve:O}),V=t(v,{...c,gain:0}),$=r(v,{...u,curve:T});return{connectGraph(){_.connect(k),_.connect(D.inputs===void 0?D:D.inputs[0]),k.connect(R,0),k.connect(L,0),k.connect(B,1),k.connect(V,1),D.connect(y),y.connect(P.inputs===void 0?P:P.inputs[0]),y.connect(I.inputs===void 0?I:I.inputs[0]),y.connect(z.inputs===void 0?z:z.inputs[0]),y.connect($.inputs===void 0?$:$.inputs[0]),P.connect(R.gain),I.connect(L.gain),z.connect(B.gain),$.connect(V.gain),R.connect(w,0,0),B.connect(w,0,0),L.connect(w,0,1),V.connect(w,0,1)},disconnectGraph(){_.disconnect(k),_.disconnect(D.inputs===void 0?D:D.inputs[0]),k.disconnect(R,0),k.disconnect(L,0),k.disconnect(B,1),k.disconnect(V,1),D.disconnect(y),y.disconnect(P.inputs===void 0?P:P.inputs[0]),y.disconnect(I.inputs===void 0?I:I.inputs[0]),y.disconnect(z.inputs===void 0?z:z.inputs[0]),y.disconnect($.inputs===void 0?$:$.inputs[0]),P.disconnect(R.gain),I.disconnect(L.gain),z.disconnect(B.gain),$.disconnect(V.gain),R.disconnect(w,0,0),B.disconnect(w,0,0),L.disconnect(w,0,1),V.disconnect(w,0,1)}}},m=(v,_,y,w,b)=>{if(_===1)return d(v,y,w,b);if(_===2)return p(v,y,w,b);throw i()};return(v,{channelCount:_,channelCountMode:y,pan:w,...b})=>{if(y==="max")throw i();const C=n(v,{...b,channelCount:1,channelCountMode:y,numberOfInputs:2}),O=t(v,{...b,channelCount:_,channelCountMode:y,gain:1}),T=t(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:w});let{connectGraph:A,disconnectGraph:k}=m(v,_,O,T,C);Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"maxValue",{get:()=>1}),Object.defineProperty(T.gain,"minValue",{get:()=>-1});const R={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(D){O.channelCount!==D&&(P&&k(),{connectGraph:A,disconnectGraph:k}=m(v,D,O,T,C),P&&A()),O.channelCount=D},get channelCountMode(){return O.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw i();O.channelCountMode=D},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(D){O.channelInterpretation=D},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get pan(){return T.gain},addEventListener(...D){return O.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return O.dispatchEvent(D[0])},removeEventListener(...D){return O.removeEventListener(D[0],D[1],D[2])}};let P=!1;const L=()=>{A(),P=!0},I=()=>{k(),P=!1};return s(Wc(R,C),L,I)}},sj=(n,e,t,r,i,s,o)=>(a,l)=>{const c=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,l);En(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();qt(c,{curve:u},"curve"),qt(c,l,"oversample");let d=null,p=!1;return o(c,"curve",_=>()=>_.call(c),_=>y=>(_.call(c,y),p&&(r(y)&&d===null?d=n(a,c):!r(y)&&d!==null&&(d(),d=null)),y)),i(c,()=>{p=!0,r(c.curve)&&(d=n(a,c))},()=>{p=!1,d!==null&&(d(),d=null)})},oj=(n,e,t,r,i)=>(s,{curve:o,oversample:a,...l})=>{const c=s.createWaveShaper(),u=s.createWaveShaper();En(c,l),En(u,l);const d=t(s,{...l,gain:1}),p=t(s,{...l,gain:-1}),m=t(s,{...l,gain:1}),v=t(s,{...l,gain:-1});let _=null,y=!1,w=null;const b={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(T){d.channelCount=T,p.channelCount=T,c.channelCount=T,m.channelCount=T,u.channelCount=T,v.channelCount=T},get channelCountMode(){return c.channelCountMode},set channelCountMode(T){d.channelCountMode=T,p.channelCountMode=T,c.channelCountMode=T,m.channelCountMode=T,u.channelCountMode=T,v.channelCountMode=T},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(T){d.channelInterpretation=T,p.channelInterpretation=T,c.channelInterpretation=T,m.channelInterpretation=T,u.channelInterpretation=T,v.channelInterpretation=T},get context(){return c.context},get curve(){return w},set curve(T){if(T!==null&&T.length<2)throw e();if(T===null)c.curve=T,u.curve=T;else{const A=T.length,k=new Float32Array(A+2-A%2),R=new Float32Array(A+2-A%2);k[0]=T[0],R[0]=-T[A-1];const P=Math.ceil((A+1)/2),L=(A+1)/2-1;for(let I=1;I<P;I+=1){const D=I/P*L,B=Math.floor(D),z=Math.ceil(D);k[I]=B===z?T[B]:(1-(D-B))*T[B]+(1-(z-D))*T[z],R[I]=B===z?-T[A-1-B]:-((1-(D-B))*T[A-1-B])-(1-(z-D))*T[A-1-z]}k[P]=A%2===1?T[P-1]:(T[P-2]+T[P-1])/2,c.curve=k,u.curve=R}w=T,y&&(r(w)&&_===null?_=n(s,d):_!==null&&(_(),_=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(T){c.oversample=T,u.oversample=T},addEventListener(...T){return d.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return d.dispatchEvent(T[0])},removeEventListener(...T){return d.removeEventListener(T[0],T[1],T[2])}};o!==null&&(b.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==b.oversample&&(b.oversample=a);const C=()=>{d.connect(c).connect(m),d.connect(p).connect(u).connect(v).connect(m),y=!0,r(w)&&(_=n(s,d))},O=()=>{d.disconnect(c),c.disconnect(m),d.disconnect(p),p.disconnect(u),u.disconnect(v),v.disconnect(m),y=!1,_!==null&&(_(),_=null)};return i(Wc(b,m),C,O)},Tr=()=>new DOMException("","NotSupportedError"),aj={numberOfChannels:1},lj=(n,e,t,r,i)=>class extends n{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:p}={...aj,...c},m=r(d,u,p);e(Sf,()=>Sf(m))||m.addEventListener("statechange",(()=>{let v=0;const _=y=>{this._state==="running"&&(v>0?(m.removeEventListener("statechange",_),y.stopImmediatePropagation(),this._waitForThePromiseToSettle(y)):v+=1)};return _})()),super(m,d),this._length=u,this._nativeOfflineAudioContext=m,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,$C(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},cj={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},uj=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...cj,...c},p=t(u,d),m=s(u),v=m?r():null,_=l.sampleRate/2;super(l,!1,p,v),this._detune=e(this,m,p.detune,153600,-153600),this._frequency=e(this,m,p.frequency,_,-_),this._nativeOscillatorNode=p,this._onended=null,this._oscillatorNodeRenderer=v,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Ac(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),so(this)&&sh(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},fj=(n,e,t,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,l=null;const c=async(u,d)=>{let p=t(u);const m=or(p,d);if(!m){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:o===null?void 0:o,type:p.type};p=e(d,v),a!==null&&p.start(a),l!==null&&p.stop(l)}return s.set(d,p),m?(await n(d,u.detune,p.detune),await n(d,u.frequency,p.frequency)):(await r(d,u.detune,p.detune),await r(d,u.frequency,p.frequency)),await i(u,d,p),p};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,d){const p=s.get(d);return p!==void 0?Promise.resolve(p):c(u,d)}}},hj={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},dj=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...hj,...c},p=t(u,d),m=s(u),v=m?r():null;super(l,!1,p,v),this._nativePannerNode=p,this._orientationX=e(this,m,p.orientationX,_r,Dr),this._orientationY=e(this,m,p.orientationY,_r,Dr),this._orientationZ=e(this,m,p.orientationZ,_r,Dr),this._positionX=e(this,m,p.positionX,_r,Dr),this._positionY=e(this,m,p.positionY,_r,Dr),this._positionZ=e(this,m,p.positionZ,_r,Dr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},pj=(n,e,t,r,i,s,o,a,l,c)=>()=>{const u=new WeakMap;let d=null;const p=async(m,v)=>{let _=null,y=s(m);const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},b={...w,coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor},C=or(y,v);if("bufferSize"in y)_=r(v,{...w,gain:1});else if(!C){const O={...b,orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value};y=i(v,O)}if(u.set(v,_===null?y:_),_!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new o(6,m.context.length,v.sampleRate),D=e(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(I.destination),d=(async()=>{const B=await Promise.all([m.orientationX,m.orientationY,m.orientationZ,m.positionX,m.positionY,m.positionZ].map(async(z,V)=>{const $=t(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V===0?1:0});return await a(I,z,$.offset),$}));for(let z=0;z<6;z+=1)B[z].connect(D,0,z),B[z].start(0);return c(I)})()}const O=await d,T=r(v,{...w,gain:1});await l(m,v,T);const A=[];for(let I=0;I<O.numberOfChannels;I+=1)A.push(O.getChannelData(I));let k=[A[0][0],A[1][0],A[2][0]],R=[A[3][0],A[4][0],A[5][0]],P=r(v,{...w,gain:1}),L=i(v,{...b,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:R[0],positionY:R[1],positionZ:R[2]});T.connect(P).connect(L.inputs[0]),L.connect(_);for(let I=128;I<O.length;I+=128){const D=[A[0][I],A[1][I],A[2][I]],B=[A[3][I],A[4][I],A[5][I]];if(D.some((z,V)=>z!==k[V])||B.some((z,V)=>z!==R[V])){k=D,R=B;const z=I/v.sampleRate;P.gain.setValueAtTime(0,z),P=r(v,{...w,gain:0}),L=i(v,{...b,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:R[0],positionY:R[1],positionZ:R[2]}),P.gain.setValueAtTime(1,z),T.connect(P).connect(L.inputs[0]),L.connect(_)}}return _}return C?(await n(v,m.orientationX,y.orientationX),await n(v,m.orientationY,y.orientationY),await n(v,m.orientationZ,y.orientationZ),await n(v,m.positionX,y.positionX),await n(v,m.positionY,y.positionY),await n(v,m.positionZ,y.positionZ)):(await a(v,m.orientationX,y.orientationX),await a(v,m.orientationY,y.orientationY),await a(v,m.orientationZ,y.orientationZ),await a(v,m.positionX,y.positionX),await a(v,m.positionY,y.positionY),await a(v,m.positionZ,y.positionZ)),Hc(y)?await l(m,v,y.inputs[0]):await l(m,v,y),y};return{render(m,v){const _=u.get(v);return _!==void 0?Promise.resolve(_):p(m,v)}}},mj={disableNormalization:!1},gj=(n,e,t,r)=>class QC{constructor(s,o){const a=e(s),l=r({...mj,...o}),c=n(a,l);return t.add(c),c}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===QC.prototype||t.has(s)}},vj=(n,e)=>(t,r,i)=>(n(r).replay(i),e(r,t,i)),_j=(n,e,t)=>async(r,i,s)=>{const o=n(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const p=await e(c).render(c,i),m=r.context.destination;!t(c)&&(r!==m||!t(r))&&p.connect(s,u,l)})).reduce((a,l)=>[...a,...l],[]))},yj=(n,e,t)=>async(r,i,s)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const u=await n(a).render(a,i);t(a)||u.connect(s,l)}))},xj=(n,e,t,r)=>i=>n(Sf,()=>Sf(i))?Promise.resolve(n(r,r)).then(s=>{if(!s){const o=t(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{const o=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()}),wj=n=>(e,t)=>{n.set(e,t)},bj=n=>(e,t)=>n.set(e,t),Sj=(n,e,t,r,i,s,o,a)=>(l,c)=>t(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(u=>t(u).render(u,c)))).then(()=>i(c)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),B1(u)):e(s,()=>s(u))||a(u),n.add(u),u)),Tj={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Ej=(n,e,t,r,i,s)=>class extends n{constructor(a,l){const c=i(a),u={...Tj,...l},d=t(c,u),p=s(c),m=p?r():null;super(a,!1,d,m),this._pan=e(this,p,d.pan)}get pan(){return this._pan}},Cj=(n,e,t,r,i)=>()=>{const s=new WeakMap,o=async(a,l)=>{let c=t(a);const u=or(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return s.set(l,c),u?await n(l,a.pan,c.pan):await r(l,a.pan,c.pan),Hc(c)?await i(a,l,c.inputs[0]):await i(a,l,c),c};return{render(a,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Oj=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},kj=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(t);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const a=new n(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o},Aj=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{r.disconnect(),i(t.currentTime!==0)},t.startRendering()})},Rj=()=>new DOMException("","UnknownError"),Mj={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Pj=(n,e,t,r,i,s,o)=>class extends n{constructor(l,c){const u=i(l),d={...Mj,...c},p=t(u,d),v=s(u)?r():null;super(l,!0,p,v),this._isCurveNullified=!1,this._nativeWaveShaperNode=p,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},Dj=(n,e,t)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!or(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,c)}return r.set(o,a),Hc(a)?await t(s,o,a.inputs[0]):await t(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},Ij=()=>typeof window>"u"?null:window,Nj=(n,e)=>t=>{t.copyFromChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)r[d]=c[d+o]},t.copyToChannel=(r,i,s=0)=>{const o=n(s),a=n(i);if(a>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)c[d+o]=r[d]}},Lj=n=>e=>{e.copyFromChannel=(t=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(r,i,s=0)=>{const o=n(s),a=n(i);if(o<e.length)return t.call(e,r,a,o)})(e.copyToChannel)},Fj=n=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",i=>()=>{const s=i.call(e);return s===r?null:s},i=>s=>i.call(e,s===null?r:s))},Uj=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const i=t.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)i.connect(r,0,l)},()=>i.disconnect(r))},JC=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),e3=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},uh=(n,e,t,r)=>{let i=n;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,{get:t(s),set:r(o)})},zj=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),Bj=n=>({...n,channelCount:n.numberOfOutputs}),jj=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},t3=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;t3(n,e,t+1e-7)}},$j=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Vj=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Hj=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},W1=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},n3=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},G1=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Wj=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Gj=n=>{n.start=(e=>(t=0,r=0,i)=>{const s=n.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,i)})(n.start)},r3=(n,e)=>{const t=e.createGain();n.connect(t);const r=(i=>()=>{i.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),Wc(n,t),n.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else i.call(n,o),s=!0}})(n.stop)},Gc=(n,e)=>t=>{const r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},qj=dU(fl),Yj=yU(fl),Zj=Mz(cm),i3=new WeakMap,Xj=Zz(i3),ns=az(new Map,new WeakMap),As=Ij(),s3=EB(ns,Rs),q1=Yz(br),Wn=_j(br,q1,tl),Kj=TU(s3,$t,Wn),Ft=Qz(lm),yo=QB(As),kt=mB(yo),o3=new WeakMap,a3=jz(Gc),fh=AB(As),Y1=fB(fh),Z1=hB(As),l3=dB(As),Tf=MB(As),vn=ZU(pU(NC),_U(qj,Yj,Sp,Zj,Tp,br,Xj,ih,$t,fl,so,tl,Gd),ns,oB(xv,Tp,br,$t,bf,so),Rs,um,Tr,Oz(Sp,xv,br,$t,bf,Ft,so,kt),Iz(o3,br,Zi),a3,Ft,Y1,Z1,l3,kt,Tf),Qj=SU(vn,Kj,Rs,s3,Ft,kt),X1=new WeakSet,nb=CB(As),c3=xz(new Uint32Array(1)),K1=Nj(c3,Rs),Q1=Lj(c3),u3=CU(X1,ns,Tr,nb,yo,Oj(nb),K1,Q1),fm=xU(jr),f3=yj(q1,oh,tl),Ms=pz(f3),qc=kB(fm,ns,$j,Vj,Hj,W1,n3,G1,Gj,Fj(uh),r3),Ps=vj(Xz(oh),f3),Jj=AU(Ms,qc,$t,Ps,Wn),rs=XU(mU(LC),o3,z1,KU,aU,lU,cU,uU,fU,vv,DC,fh,t3),e$=kU(vn,Jj,rs,Fn,qc,Ft,kt,Gc),t$=UU(vn,zU,Rs,Fn,RB(jr,uh),Ft,kt,Wn),n$=oz(Ms,XC,$t,Ps,Wn),hl=bj(i3),r$=sz(vn,rs,n$,um,XC,Ft,kt,hl),la=SB(fl,Z1),i$=Uj(Fn,la),ca=UB(fh,i$),s$=uz(ca,$t,Wn),o$=cz(vn,s$,ca,Ft,kt),a$=dz(lh,$t,Wn),l$=hz(vn,a$,lh,Ft,kt,Bj),c$=jB(fm,qc,jr,la),Yc=BB(fm,ns,c$,W1,G1),u$=yz(Ms,Yc,$t,Ps,Wn),f$=_z(vn,rs,u$,Yc,Ft,kt,Gc),h3=$B(Tr,uh),h$=Sz(h3,$t,Wn),d$=bz(vn,h$,h3,Ft,kt,hl),p$=Rz(Ms,KC,$t,Ps,Wn),m$=Az(vn,rs,p$,KC,Ft,kt,hl),d3=VB(Tr),g$=Uz(Ms,d3,$t,Ps,Wn),v$=Fz(vn,rs,g$,d3,Tr,Ft,kt,hl),_$=Gz(Ms,jr,$t,Ps,Wn),y$=Wz(vn,rs,_$,jr,Ft,kt),x$=qB(um,Fn,ch,Tr),hm=xj(ns,jr,ch,Aj(jr,yo)),w$=sB(qc,$t,yo,Wn,hm),b$=HB(x$),S$=rB(vn,b$,w$,Ft,kt,hl),T$=BU(rs,ca,Yc,ch,Tr,JC,kt,uh),p3=new WeakMap,E$=bB(t$,T$,a3,kt,p3,Gc),m3=JB(fm,ns,W1,n3,G1,r3),C$=fj(Ms,m3,$t,Ps,Wn),O$=uj(vn,rs,m3,C$,Ft,kt,Gc),g3=gz(qc),k$=oj(g3,Fn,jr,e3,la),dm=sj(g3,Fn,k$,e3,la,fh,uh),A$=tj(Sp,Fn,ca,jr,ch,dm,Tr,Tp,JC,la),v3=ej(A$),R$=pj(Ms,ca,Yc,jr,v3,$t,yo,Ps,Wn,hm),M$=dj(vn,rs,v3,R$,Ft,kt,hl),P$=nj(Rs),D$=gj(P$,Ft,new WeakSet,jj),I$=ij(ca,lh,jr,dm,Tr,la),_3=rj(I$,Tr),N$=Cj(Ms,_3,$t,Ps,Wn),L$=Ej(vn,rs,_3,N$,Ft,kt),F$=Dj(dm,$t,Wn),U$=Pj(vn,Fn,dm,F$,Ft,kt,hl),y3=gB(As),J1=$z(As),x3=new WeakMap,z$=Jz(x3,yo),B$=y3?vU(ns,Tr,Bz(As),J1,Vz(hU),Ft,z$,kt,Tf,new WeakMap,new WeakMap,kj(Tf,yo),As):void 0,j$=pB(Y1,kt),$$=Cz(X1,ns,Ez,zz,new WeakSet,Ft,j$,wp,Sf,K1,Q1),w3=rz(B$,Qj,u3,e$,r$,o$,l$,f$,d$,$$,m$,v$,y$,S$,E$,O$,M$,D$,L$,U$),V$=vB(vn,YB,Ft,kt),H$=yB(vn,ZB,Ft,kt),W$=xB(vn,XB,Ft,kt),G$=KB(Fn,kt),q$=wB(vn,G$,Ft),Y$=FU(w3,Fn,Tr,Rj,V$,H$,W$,q$,fh),e_=eB(p3),Z$=wU(e_),b3=mz(Rs),X$=Pz(e_),S3=Nz(Rs),T3=new WeakMap,K$=qz(T3,Zi),Q$=FB(b3,Rs,Fn,ca,lh,Yc,jr,ch,Tr,S3,J1,K$,la),J$=DB(Fn,Q$,jr,Tr,la),eV=nz(Ms,b3,qc,ca,lh,Yc,jr,X$,S3,J1,$t,Tf,yo,Ps,Wn,hm),tV=Kz(x3),nV=wj(T3),rb=y3?JU(Z$,vn,rs,eV,J$,br,tV,Ft,kt,Tf,zj,nV,Wj,Gc):void 0,rV=Tz(Tr,yo),iV=Sj(X1,ns,q1,e_,hm,wp,K1,Q1),sV=lj(w3,ns,Fn,rV,iV),oV=aB(lm,Y1),aV=lB(U1,Z1),lV=cB(z1,l3),cV=uB(lm,kt);function ai(n){return typeof n>"u"}function st(n){return!ai(n)}function uV(n){return typeof n=="function"}function na(n){return typeof n=="number"}function Za(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function fV(n){return typeof n=="boolean"}function qi(n){return Array.isArray(n)}function ho(n){return typeof n=="string"}function Dd(n){return ho(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Ye(n,e){if(!n)throw new Error(e)}function Xi(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function E3(n){!n.isOffline&&n.state!=="running"&&t_('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let C3=!1,ib=!1;function sb(n){C3=n}function hV(n){ai(n)&&C3&&!ib&&(ib=!0,t_("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let O3=console;function dV(...n){O3.log(...n)}function t_(...n){O3.warn(...n)}function pV(n){return new Y$(n)}function mV(n,e,t){return new sV(n,e,t)}const Xa=typeof self=="object"?self:null,gV=Xa&&(Xa.hasOwnProperty("AudioContext")||Xa.hasOwnProperty("webkitAudioContext"));function vV(n,e,t){return Ye(st(rb),"This node only works in a secure context (https or localhost)"),new rb(n,e,t)}class _V{constructor(e,t,r,i){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function nl(n){return lV(n)}function Yo(n){return aV(n)}function qd(n){return cV(n)}function Kl(n){return oV(n)}function yV(n){return n instanceof u3}function xV(n,e){return n==="value"||nl(e)||Yo(e)||yV(e)}function dc(n,...e){if(!e.length)return n;const t=e.shift();if(Za(n)&&Za(t))for(const r in t)xV(r,t[r])?n[r]=t[r]:Za(t[r])?(n[r]||Object.assign(n,{[r]:{}}),dc(n[r],t[r])):Object.assign(n,{[r]:t[r]});return dc(n,...e)}function wV(n,e){return n.length===e.length&&n.every((t,r)=>e[r]===t)}function ve(n,e,t=[],r){const i={},s=Array.from(e);if(Za(s[0])&&r&&!Reflect.has(s[0],r)&&(Object.keys(s[0]).some(a=>Reflect.has(n,a))||(dc(i,{[r]:s[0]}),t.splice(t.indexOf(r),1),s.shift())),s.length===1&&Za(s[0]))dc(i,s[0]);else for(let o=0;o<t.length;o++)st(s[o])&&(i[t[o]]=s[o]);return dc(n,i)}function bV(n){return n.constructor.getDefaults()}function pc(n,e){return ai(n)?e:n}function oc(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class xo{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Xa&&this.toString()===Xa.TONE_DEBUG_CLASS)&&dV(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}xo.version=PC;const n_=1e-6;function Rc(n,e){return n>e+n_}function Ev(n,e){return Rc(n,e)||Vi(n,e)}function kp(n,e){return n+n_<e}function Vi(n,e){return Math.abs(n-e)<n_}function SV(n,e,t){return Math.max(Math.min(n,t),e)}class Ri extends xo{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ve(Ri.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ye(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ye(Ev(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Vi(this._timeline[t].time,e)){for(let r=t;r>=0&&Vi(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Ev(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const i=this._timeline.length;let s=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;r<s;){let o=Math.floor(r+(s-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if(Vi(a[t],e)){for(let c=o;c<this._timeline.length;c++){const u=this._timeline[c];if(Vi(u[t],e))o=c;else break}return o}else{if(kp(a[t],e)&&Rc(l[t],e))return o;Rc(a[t],e)?s=o:r=o+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let i=this._search(e),s=this._search(t);return i!==-1&&s!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[s].time===t&&(s-=1),this._iterate(r,i,s)):i===-1&&this._iterate(r,0,s),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&Vi(this._timeline[r].time,e)){let i=r;for(let s=r;s>=0&&Vi(this._timeline[s].time,e);s--)i=s;this._iterate(s=>{t(s)},i,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const k3=[];function pm(n){k3.push(n)}function TV(n){k3.forEach(e=>e(n))}const A3=[];function mm(n){A3.push(n)}function EV(n){A3.forEach(e=>e(n))}class hh extends xo{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(i=>{ai(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(t)}),this}once(e,t){const r=(...i)=>{t(...i),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(i=>{if(ai(this._events)&&(this._events={}),this._events.hasOwnProperty(i))if(ai(t))this._events[i]=[];else{const s=this._events[i];for(let o=s.length-1;o>=0;o--)s[o]===t&&s.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let i=0,s=r.length;i<s;i++)r[i].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(hh.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class R3 extends hh{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class dh extends R3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ri,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=ve(dh.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=pV({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new _V(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(TV(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ye(Kl(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ye(Kl(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ye(Kl(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ye(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ye(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ye(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ye(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return vV(this.rawContext,e,t)}addAudioWorkletModule(e){return Pt(this,void 0,void 0,function*(){Ye(st(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Pt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Kl(this._context)?this._context.resume():Promise.resolve()}close(){return Pt(this,void 0,void 0,function*(){Kl(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&EV(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let s=0;s<r.length;s++)r[s]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,i=()=>{const s=this.now();this._timeouts.add({callback:()=>{e(),i()},id:r,time:s+t})};return i(),r}}class CV extends R3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Pt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ut(n,e){qi(e)?e.forEach(t=>Ut(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function r_(n,e){qi(e)?e.forEach(t=>r_(n,t)):Object.defineProperty(n,e,{writable:!0})}const wt=()=>{};class Tt extends xo{constructor(){super(),this.name="ToneAudioBuffer",this.onload=wt;const e=ve(Tt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ho(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:wt,onload:wt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Hi().sampleRate}set(e){return e instanceof Tt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Pt(this,void 0,void 0,function*(){const t=Tt.load(e).then(r=>{this.set(r),this.onload(this)});Tt.downloads.push(t);try{yield t}finally{const r=Tt.downloads.indexOf(t);Tt.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=qi(e)&&e[0].length>0,r=t?e.length:1,i=t?e[0].length:e.length,s=Hi(),o=s.createBuffer(r,i,s.sampleRate),a=!t&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(na(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let i=0;i<r;i++){const s=this.toArray(i);for(let o=0;o<s.length;o++)t[o]+=s[o]}t=t.map(i=>i/r),this.fromArray(t)}return this}toArray(e){if(na(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ye(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),i=Math.floor(t*this.sampleRate);Ye(r<i,"The start time must be less than the end time");const s=i-r,o=Hi().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,i),a);return new Tt(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Tt().fromArray(e)}static fromUrl(e){return Pt(this,void 0,void 0,function*(){return yield new Tt().load(e)})}static load(e){return Pt(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const l=t[1].split("|");let c=l[0];for(const u of l)if(Tt.supportsType(u)){c=u;break}e=e.replace(t[0],c)}const r=Tt.baseUrl===""||Tt.baseUrl.endsWith("/")?Tt.baseUrl:Tt.baseUrl+"/",i=document.createElement("a");i.href=r+e,i.pathname=(i.pathname+i.hash).split("/").map(encodeURIComponent).join("/");const s=yield fetch(i.href);if(!s.ok)throw new Error(`could not load url: ${e}`);const o=yield s.arrayBuffer();return yield Hi().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return Pt(this,void 0,void 0,function*(){for(yield Promise.resolve();Tt.downloads.length;)yield Tt.downloads[0]})}}Tt.baseUrl="";Tt.downloads=[];class gm extends dh{constructor(){super({clockSource:"offline",context:qd(arguments[0])?arguments[0]:mV(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:qd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=qd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Pt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(e=!0){return Pt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Tt(t)})}close(){return Promise.resolve()}}const M3=new CV;let za=M3;function Hi(){return za===M3&&gV&&OV(new dh),za}function OV(n,e=!1){e&&za.dispose(),Kl(n)?za=new dh(n):qd(n)?za=new gm(n):za=n}function kV(){return za.resume()}if(Xa&&!Xa.TONE_SILENCE_LOGGING){const e=` * Tone.js v${PC} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function AV(n){return Math.pow(10,n/20)}function RV(n){return 20*(Math.log(n)/Math.LN10)}function P3(n){return Math.pow(2,n/12)}let vm=440;function MV(){return vm}function PV(n){vm=n}function Cv(n){return Math.round(D3(n))}function D3(n){return 69+12*Math.log2(n/vm)}function DV(n){return vm*Math.pow(2,(n-69)/12)}class i_ extends xo{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),i=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/r)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(i+=this._beatsToUnits(parseFloat(r)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof i_&&this.fromType(this._val),ai(this._val))return this._noArg();if(ho(this._val)&&ai(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Za(this._val)){let e=0;for(const t in this._val)if(st(this._val[t])){const r=this._val[t],i=new this.constructor(this.context,t).valueOf()*r;e+=i}return e}if(st(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return ho(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Wi extends i_{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Wi(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),a=Math.round(i/r)*r-i;return i+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){const o=Math.pow(2,s);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let r=t[0],i=new Wi(this.context,t[0]).toSeconds();return t.forEach(s=>{const o=new Wi(this.context,s).toSeconds();Math.abs(o-e)<Math.abs(i-e)&&(r=s,i=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let i=t%1*4;t=Math.floor(t)%this._getTimeSignature();const s=i.toString();return s.length>3&&(i=parseFloat(parseFloat(s).toFixed(3))),[r,t,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Cv(this.toFrequency())}_now(){return this.context.now()}}class Ai extends Wi{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return MV()}static set A4(e){PV(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Ai.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const i=IV[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?i:Ai.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(i*=this._beatsToUnits(parseFloat(r)/4)),i}}})}transpose(e){return new Ai(this.context,this.valueOf()*P3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Cv(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Ai.A4);let r=Math.round(12*t)+57;const i=Math.floor(r/12);return i<0&&(r+=-12*i),NV[r%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return DV(e)}static ftom(e){return Cv(e)}}const IV={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},NV=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class lf extends Wi{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class zr extends xo{constructor(){super();const e=ve(zr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Hi()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return hV(e),new Wi(this.context,e).toSeconds()}toFrequency(e){return new Ai(this.context,e).toFrequency()}toTicks(e){return new lf(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{ai(e[r])&&delete t[r]}),t}get(){const e=bV(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];st(r)&&st(r.value)&&st(r.setValueAtTime)?e[t]=r.value:r instanceof zr?e[t]=r._getPartialProperties(e[t]):qi(r)||na(r)||ho(r)||fV(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&st(this[t])&&(this[t]&&st(this[t].value)&&st(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof zr?this[t].set(e[t]):this[t]=e[t])}),this}}class s_ extends Ri{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return Xi(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let i=r;i>=0;i--){const s=this._timeline[i];if(s.state===e)return s}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let i=r;i<this._timeline.length;i++){const s=this._timeline[i];if(s.state===e)return s}}}class Et extends zr{constructor(){super(ve(Et.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=ve(Et.getDefaults(),arguments,["param","units","convert"]);for(Ye(st(e.param)&&(nl(e.param)||e.param instanceof Et),"param must be an AudioParam");!nl(e.param);)e.param=e.param._param;this._swappable=st(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ri(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,st(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(zr.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return st(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return st(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return st(this.maxValue)&&st(this.minValue)&&Xi(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?AV(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?RV(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),i=this._fromType(e);return Ye(isFinite(i)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),i=this._events.get(t);let s=this._initialValue;if(i===null)s=this._initialValue;else if(i.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(i.time);let a;o===null?a=this._initialValue:a=o.value,i.type==="setTargetAtTime"&&(s=this._exponentialApproach(i.time,a,i.value,i.constant,t))}else if(r===null)s=i.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=i.value;if(i.type==="setTargetAtTime"){const a=this._events.getBefore(i.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?s=this._linearInterpolate(i.time,o,r.time,r.value,t):s=this._exponentialInterpolate(i.time,o,r.time,r.value,t)}else s=i.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),i=this.toSeconds(t);return Ye(isFinite(r)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:i,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(r,i),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=Vi(r,0)?this._minOutput:r,this._assertRange(r);const i=this.toSeconds(t);return Ye(isFinite(r)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(r,i),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const i=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const i=this._fromType(e);Ye(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(t);return this._assertRange(i),Ye(isFinite(i)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:s,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,s,r),this._param.setTargetAtTime(i,s,r),this}setValueCurveAtTime(e,t,r,i=1){r=this.toSeconds(r),t=this.toSeconds(t);const s=this._fromType(e[0])*i;this.setValueAtTime(this._toType(s),t);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*i;this.linearRampToValueAtTime(this._toType(l),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ye(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));Ye(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const i=this._events.get(t),s=this._events.getAfter(t);return i&&Vi(i.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const i=this._events.getAfter(r.time),s=i?i.time:t+2,o=(s-t)/10;for(let a=t;a<s;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){Ye(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,i,s){return r+(t-r)*Math.exp(-(s-e)/i)}_linearInterpolate(e,t,r,i,s){return t+(i-t)*((s-e)/(r-e))}_exponentialInterpolate(e,t,r,i,s){return t*Math.pow(i/t,(s-e)/(r-e))}}class je extends zr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return st(this.input)?nl(this.input)||this.input instanceof Et?1:this.input.numberOfInputs:0}get numberOfOutputs(){return st(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return st(e)&&(e instanceof je||Yo(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ye(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return ra(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return t_("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return LV(this,e,t,r),this}chain(...e){return Ef(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),st(this.input)&&(this.input instanceof je?this.input.dispose():Yo(this.input)&&this.input.disconnect()),st(this.output)&&(this.output instanceof je?this.output.dispose():Yo(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ef(...n){const e=n.shift();n.reduce((t,r)=>(t instanceof je?t.connect(r):Yo(t)&&ra(t,r),r),e)}function ra(n,e,t=0,r=0){for(Ye(st(n),"Cannot connect from undefined node"),Ye(st(e),"Cannot connect to undefined node"),(e instanceof je||Yo(e))&&Ye(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ye(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof je||e instanceof Et;)st(e.input)&&(e=e.input);for(;n instanceof je;)st(n.output)&&(n=n.output);nl(e)?n.connect(e,t):n.connect(e,t,r)}function LV(n,e,t=0,r=0){if(st(e))for(;e instanceof je;)e=e.input;for(;!Yo(n);)st(n.output)&&(n=n.output);nl(e)?n.disconnect(e,t):Yo(e)?n.disconnect(e,t,r):n.disconnect()}class Dt extends je{constructor(){super(ve(Dt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=ve(Dt.getDefaults(),arguments,["gain","units"]);this.gain=new Et({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ut(this,"gain")}static getDefaults(){return Object.assign(je.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Mc extends je{constructor(e){super(e),this.onended=wt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Dt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(je.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:wt})}_startGain(e,t=1){Ye(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ye(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==wt&&(this.onended(this),this.onended=wt,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ye(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=wt,this}}class Ap extends Mc{constructor(){super(ve(Ap.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=ve(Ap.getDefaults(),arguments,["offset"]);ra(this._source,this._gainNode),this.offset=new Et({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Mc.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Lt extends je{constructor(){super(ve(Lt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=ve(Lt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ap({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(je.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return o_(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,i){return this._param.setValueCurveAtTime(e,t,r,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function o_(n,e,t,r){(e instanceof Et||nl(e)||e instanceof Lt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Lt&&(e.overridden=!0)),ra(n,e,t,r)}class Rp extends Et{constructor(){super(ve(Rp.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ri(1/0),this._multiplier=1;const e=ve(Rp.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Et.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const i=this._fromType(e),s=this._events.get(t),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+t,c=this._exponentialApproach(s.time,s.value,i,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const i=this._events.get(r),s=this._events.previousEvent(i),o=this._getTicksUntilEvent(s,r);return i.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),i=this._events.get(t),s=Math.round(Math.max((t-i.time)*10,1)),o=(t-i.time)/s;for(let a=0;a<=s;a++){const l=o*a+i.time,c=this._exponentialInterpolate(i.time,i.value,t,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ai(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(t));const s=this._events.get(t);return s&&s.time===t&&s.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+i)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const i=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(r.time))-i)/(r.time-t.time),a=Math.sqrt(Math.pow(i,2)-2*o*(t.ticks-e)),l=(-i+a)/o,c=(-i-a)/o;return(l>0?l:c)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),i=this.toSeconds(e),s=this.getTicksAtTime(r);return this.getTicksAtTime(r+i)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Mp extends Lt{constructor(){super(ve(Mp.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=ve(Mp.getDefaults(),arguments,["value"]);this.input=this._param=new Rp({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Lt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Pp extends zr{constructor(){super(ve(Pp.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new s_,this._tickOffset=new Ri,this._ticksAtTime=new Ri,this._secondsAtTime=new Ri;const e=ve(Pp.getDefaults(),arguments,["frequency"]);this.frequency=new Mp({context:this.context,units:e.units,value:e.frequency}),Ut(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},zr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),st(t)&&this.setTicksAtTime(t,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),i=this._ticksAtTime.get(t),s={state:"paused",time:t};this._state.add(s);let o=i||r,a=i?i.ticks:0,l=null;return this._state.forEachBetween(o.time,t+this.sampleTime,c=>{let u=o.time;const d=this._tickOffset.get(c.time);d&&d.time>=o.time&&(a=d.ticks,u=d.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!=s.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(s),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const i=this._secondsAtTime.get(e);let s=i||t,o=i?i.seconds:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,l=>{let c=s.time;const u=this._tickOffset.get(l.time);u&&u.time>=s.time&&(o=u.seconds,c=u.time),s.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!=r.time&&(a={state:l.state,time:l.time,seconds:o})),s=l}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),i=this._state.get(t),s=Math.max(r.time,i.time),o=this.frequency.getTicksAtTime(s)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,r){let i=this._state.get(e);this._state.forEachBetween(e,t,o=>{i&&i.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),o.time-this.sampleTime,r),i=o});let s=null;if(i&&i.state==="started"){const o=Math.max(i.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(i.time),c=a-l;let u=Math.ceil(c)-c;u=Vi(u,1)?0:u;let d=this.frequency.getTimeOfTick(a+u);for(;d<t;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(p){s=p;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Cf extends zr{constructor(){super(ve(Cf.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=wt,this._lastUpdate=0,this._state=new s_("stopped"),this._boundLoop=this._loop.bind(this);const e=ve(Cf.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Pp({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ut(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(zr.getDefaults(),{callback:wt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){E3(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),i=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(i+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const i=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,i);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,i)=>{this.callback(r,i)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}hh.mixin(Cf);class a_ extends xo{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ve(a_.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:wt,onload:wt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ye(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=wt,i=wt){return ho(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Tt(this.baseUrl+t,r,i))):this._buffers.set(e.toString(),new Tt(t,r,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ac extends lf{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class FV extends zr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ri,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}pm(n=>{n.draw=new FV({context:n})});mm(n=>{n.draw.dispose()});class UV extends xo{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ye(st(e.time),"Events must have a time property"),Ye(st(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new zV(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,i=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,i=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,i=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,i=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,i=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),t!==null?r?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),t!==null?r?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let i=1;i<t.length;i++)t[i].low>r.low&&(r=t[i]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(i=>{i.event&&t(i.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(i=>{i.event&&t(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class zV{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ia extends je{constructor(){super(ve(ia.getDefaults(),arguments,["volume"])),this.name="Volume";const e=ve(ia.getDefaults(),arguments,["volume"]);this.input=this.output=new Dt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ut(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let BV=class Ov extends je{constructor(){super(ve(Ov.getDefaults(),arguments)),this.name="Destination",this.input=new ia({context:this.context}),this.output=new Dt({context:this.context}),this.volume=this.input.volume;const e=ve(Ov.getDefaults(),arguments);Ef(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Ef(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};pm(n=>{n.destination=new BV({context:n})});mm(n=>{n.destination.dispose()});class jV extends xo{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ri({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class po extends je{constructor(){super(Object.assign(ve(po.getDefaults(),arguments,["context"])))}connect(e,t=0,r=0){return o_(this,e,t,r),this}}class rl extends po{constructor(){super(Object.assign(ve(rl.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=ve(rl.getDefaults(),arguments,["mapping","length"]);qi(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):uV(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Lt.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let i=0,s=t;i<s;i++){const o=i/(s-1)*2-1;r[i]=e(o,i)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));Ye(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Of extends po{constructor(){super(Object.assign(ve(Of.getDefaults(),arguments,["value"]))),this.name="Pow";const e=ve(Of.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new rl({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(po.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class sa{constructor(e,t){this.id=sa._eventId++,this._remainderTime=0;const r=Object.assign(sa.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:wt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}sa._eventId=0;class l_ extends sa{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(l_.getDefaults(),t);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},sa.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return kp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ac(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){kp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ac(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Rc(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class kf extends zr{constructor(){super(ve(kf.getDefaults(),arguments)),this.name="Transport",this._loop=new jV(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ri,this._repeatedEvents=new UV,this._syncedSignals=[],this._swingAmount=0;const e=ve(kf.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Cf({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ut(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(zr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(r*Math.PI)*this._swingAmount;e+=new ac(this.context,this._swingTicks*2/3).toSeconds()*i}sb(!0),this._timeline.forEachAtTime(t,r=>r.invoke(e)),sb(!1)}schedule(e,t){const r=new sa(this,{callback:e,time:new lf(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,i=1/0){const s=new l_(this,{callback:e,duration:new Wi(this.context,i).toTicks(),interval:new Wi(this.context,t).toTicks(),time:new lf(this.context,r).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){const r=new sa(this,{callback:e,once:!0,time:new lf(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new ac(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let r;return st(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){qi(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Wi(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Wi(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ac(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new ac(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),i=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),s=t+i;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),i=e-r%e;return this._clock.nextTickTime(i,t)}}syncSignal(e,t){const r=this.now();let i=this.bpm,s=1/(60/i.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/s,c=new Dt(l),u=new Of(-1),d=new Dt(l);i.chain(c,u,d),i=d,s=1/s,o=[c,u,d]}t||(e.getValueAtTime(r)!==0?t=e.getValueAtTime(r)/s:t=0);const a=new Dt(t);return i.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.nodes.forEach(i=>i.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),r_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}hh.mixin(kf);pm(n=>{n.transport=new kf({context:n})});mm(n=>{n.transport.dispose()});class ir extends je{constructor(e){super(e),this.input=void 0,this._state=new s_("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=wt,this._syncedStop=wt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ia({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ut(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,onstop:wt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let i=ai(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")Ye(Rc(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,r);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const s=this._state.get(i);s&&(s.offset=this.toSeconds(pc(t,0)),s.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,r)},i);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else E3(this.context),this._start(i,t,r);return this}stop(e){let t=ai(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||st(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Rc(t,0)){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const i=t-this.toSeconds(r.time);let s;r.duration&&(s=this.toSeconds(r.duration)-i),this._start(e,this.toSeconds(r.offset)+i,s)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=wt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Pc extends Mc{constructor(){super(ve(Pc.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=ve(Pc.getDefaults(),arguments,["url","onload"]);ra(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Et({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Tt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Mc.getDefaults(),{url:new Tt,loop:!1,loopEnd:0,loopStart:0,onload:wt,onerror:wt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,i=1){Ye(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(e);this._startGain(s,i),this.loop?t=pc(t,this.loopStart):t=pc(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;Ev(o,a)&&(o=(o-l)%c+l),Vi(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,kp(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,o)),st(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(s+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Af extends ir{constructor(){super(ve(Af.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=ve(Af.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ir.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ye(e in ob,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=ob[this._type];this._source=new Pc({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Gl=44100*5,h0=2,Zs={brown:null,pink:null,white:null},ob={get brown(){if(!Zs.brown){const n=[];for(let e=0;e<h0;e++){const t=new Float32Array(Gl);n[e]=t;let r=0;for(let i=0;i<Gl;i++){const s=Math.random()*2-1;t[i]=(r+.02*s)/1.02,r=t[i],t[i]*=3.5}}Zs.brown=new Tt().fromArray(n)}return Zs.brown},get pink(){if(!Zs.pink){const n=[];for(let e=0;e<h0;e++){const t=new Float32Array(Gl);n[e]=t;let r,i,s,o,a,l,c;r=i=s=o=a=l=c=0;for(let u=0;u<Gl;u++){const d=Math.random()*2-1;r=.99886*r+d*.0555179,i=.99332*i+d*.0750759,s=.969*s+d*.153852,o=.8665*o+d*.3104856,a=.55*a+d*.5329522,l=-.7616*l-d*.016898,t[u]=r+i+s+o+a+l+c+d*.5362,t[u]*=.11,c=d*.115926}}Zs.pink=new Tt().fromArray(n)}return Zs.pink},get white(){if(!Zs.white){const n=[];for(let e=0;e<h0;e++){const t=new Float32Array(Gl);n[e]=t;for(let r=0;r<Gl;r++)t[r]=Math.random()*2-1}Zs.white=new Tt().fromArray(n)}return Zs.white}};function dl(n,e){return Pt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,r=new gm(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Dp extends Mc{constructor(){super(ve(Dp.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=ve(Dp.getDefaults(),arguments,["frequency","type"]);ra(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Et({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Et({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ut(this,["frequency","detune"])}static getDefaults(){return Object.assign(Mc.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class mn extends ir{constructor(){super(ve(mn.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=ve(mn.getDefaults(),arguments,["frequency","type"]);this.frequency=new Lt({context:this.context,units:"frequency",value:e.frequency}),Ut(this,"frequency"),this.detune=new Lt({context:this.context,units:"cents",value:e.detune}),Ut(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ir.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new Dp({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return mn._periodicWaveCache.find(t=>t.phase===this._phase&&wV(t.partials,this._partials));{const e=mn._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(st(r)){const{partials:i,wave:s}=r;this._wave=s,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,s]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(i,s);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),mn._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),mn._periodicWaveCache.length>100&&mn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Xi(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const i=new Float32Array(e);this._partials.forEach((s,o)=>i[o]=s),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(e,t){let i=2048;const s=new Float32Array(i),o=new Float32Array(i);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,i=a,this._partials.length===0)return[s,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),i=a):this._partialCount=0,this._partials=[]}for(let l=1;l<i;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=a?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(s[l]=-u*Math.sin(t*l),o[l]=u*Math.cos(t*l)):(s[l]=0,o[l]=0)}return[s,o]}_inverseFFT(e,t,r){let i=0;const s=e.length;for(let o=0;o<s;o++)i+=e[o]*Math.cos(o*r)+t[o]*Math.sin(o*r);return i}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const i=Math.PI*2,s=32;for(let o=0;o<s;o++)r=Math.max(this._inverseFFT(e,t,o/s*i),r);return SV(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}mn._periodicWaveCache=[];class $V extends po{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new rl({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class oa extends Lt{constructor(){super(Object.assign(ve(oa.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=ve(oa.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Dt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Lt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Rf extends ir{constructor(){super(ve(Rf.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new $V({context:this.context}),this._modulationNode=new Dt({context:this.context});const e=ve(Rf.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new mn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new mn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new oa({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ut(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(mn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Mf extends ir{constructor(){super(ve(Mf.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Dt({context:this.context,gain:0});const e=ve(Mf.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new mn({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Lt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new mn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new oa({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new oa({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ut(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(mn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Dc extends ir{constructor(){super(ve(Dc.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Dt({context:this.context,gain:0}),this._thresh=new rl({context:this.context,mapping:t=>t<=0?-1:1});const e=ve(Dc.getDefaults(),arguments,["frequency","width"]);this.width=new Lt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new mn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ut(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ir.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Pf extends ir{constructor(){super(ve(Pf.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=ve(Pf.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Lt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Lt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ut(this,["frequency","detune"])}static getDefaults(){return Object.assign(mn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((i,s)=>i.detune.value=t+r*s)}}get count(){return this._oscillators.length}set count(e){if(Xi(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new mn({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):wt});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Df extends ir{constructor(){super(ve(Df.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new oa({context:this.context,value:2});const e=ve(Df.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Dc({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new mn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ut(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ir.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ab={am:Rf,fat:Pf,fm:Mf,oscillator:mn,pulse:Dc,pwm:Df};class il extends ir{constructor(){super(ve(il.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=ve(il.getDefaults(),arguments,["frequency","type"]);this.frequency=new Lt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Lt({context:this.context,units:"cents",value:e.detune}),Ut(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(mn.getDefaults(),Mf.getDefaults(),Rf.getDefaults(),Pf.getDefaults(),Dc.getDefaults(),Df.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=ab[e],r=this.now();if(this._oscillator){const i=this._oscillator;i.stop(r),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof ab[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&na(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&na(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ho(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Pt(this,void 0,void 0,function*(){return dl(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class c_ extends Lt{constructor(){super(Object.assign(ve(c_.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Dt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Ef(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Lt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ip extends po{constructor(){super(Object.assign(ve(Ip.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=ve(Ip.getDefaults(),arguments,["min","max"]);this._mult=this.input=new oa({context:this.context,value:e.max-e.min}),this._add=this.output=new c_({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(po.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function I3(n,e=1/0){const t=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){Xi(s,n,e),t.set(this,s)}})}}function wo(n,e=1/0){const t=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){Xi(this.toSeconds(s),n,e),t.set(this,s)}})}}class If extends ir{constructor(){super(ve(If.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=ve(If.getDefaults(),arguments,["url","onload"]);this._buffer=new Tt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ir.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:wt,onerror:wt,playbackRate:1,reverse:!1})}load(e){return Pt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=wt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=pc(t,this._loopStart):t=pc(t,0);const i=this.toSeconds(t),s=r;r=pc(r,Math.max(this._buffer.duration-i,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Pc({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&ai(s)?a.start(e,i):a.start(e,i,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const i=this.toSeconds(e);this._stop(r),this._start(r,i)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Xi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Xi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ts([wo(0)],If.prototype,"fadeIn",void 0);ts([wo(0)],If.prototype,"fadeOut",void 0);class VV extends po{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new rl({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Di extends je{constructor(){super(ve(Di.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Lt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=ve(Di.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(je.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(ho(e))return e;{let r;for(r in Id)if(Id[r][t]===e)return r;return e}}_setCurve(e,t,r){if(ho(r)&&Reflect.has(Id,r)){const i=Id[r];Za(i)?e!=="_decayCurve"&&(this[e]=i[t]):this[e]=i}else if(qi(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let i=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/i;i=(1-o)/a}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,i,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,i,t)}if(s&&this.sustain<1){const a=t*this.sustain,l=e+i;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,s+l):this._sig.exponentialApproachValueAtTime(a,l,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Ye(qi(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return o_(this,e,t,r),this}asArray(e=1024){return Pt(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,r=new gm(1,t,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=i+this.toSeconds(this.release),o=s*.1,a=s+o,l=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(t*(i+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ts([wo(0)],Di.prototype,"attack",void 0);ts([wo(0)],Di.prototype,"decay",void 0);ts([I3(0,1)],Di.prototype,"sustain",void 0);ts([wo(0)],Di.prototype,"release",void 0);const Id=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));const i=[],s=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const p=Math.sin(t*(Math.PI*2)*s-Math.PI/2)+1;i[e]=p/10+t*.83}i[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const l=[];for(e=0;e<128;e++)t=e/(128-1),l[e]=.5*(1-Math.cos(Math.PI*t));const c=[];for(e=0;e<128;e++){t=e/(128-1);const p=Math.pow(t,3)*4+.2,m=Math.cos(p*Math.PI*2*t);c[e]=Math.abs(m*(1-t))}function u(p){const m=new Array(p.length);for(let v=0;v<p.length;v++)m[v]=1-p[v];return m}function d(p){return p.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();class sl extends je{constructor(){super(ve(sl.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=ve(sl.getDefaults(),arguments);this._volume=this.output=new ia({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ut(this,"volume")}static getDefaults(){return Object.assign(je.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...i)=>{const s=i[t],o=this.context.transport.schedule(a=>{i[t]=a,r.apply(this,i)},s);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,r,i){const s=this.toSeconds(r),o=this.toSeconds(t);return this.triggerAttack(e,s,i),this.triggerRelease(s+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class mo extends sl{constructor(){super(ve(mo.getDefaults(),arguments));const e=ve(mo.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(sl.getDefaults(),{detune:0,onsilence:wt,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,r),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),i=e instanceof Ai?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,s,r)}else this.frequency.setValueAtTime(i,r);return this}}ts([wo(0)],mo.prototype,"portamento",void 0);class _m extends Di{constructor(){super(ve(_m.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Dt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Nf extends mo{constructor(){super(ve(Nf.getDefaults(),arguments)),this.name="Synth";const e=ve(Nf.getDefaults(),arguments);this.oscillator=new il(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new _m(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ut(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(mo.getDefaults(),{envelope:Object.assign(oc(Di.getDefaults(),Object.keys(je.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(oc(il.getDefaults(),[...Object.keys(ir.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Lf extends je{constructor(){super(ve(Lf.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=ve(Lf.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Et({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Et({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Et({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Et({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(je.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Ye(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const l=Math.pow(o/e,2)*(2e4-20)+20;t[o]=l}const r=new Float32Array(e),i=new Float32Array(e),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(t,r,i),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ic extends je{constructor(){super(ve(Ic.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Dt({context:this.context}),this.output=new Dt({context:this.context}),this._filters=[];const e=ve(Ic.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Lt({context:this.context,units:"positive",value:e.Q}),this.frequency=new Lt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Lt({context:this.context,units:"cents",value:e.detune}),this.gain=new Lt({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ut(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(je.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Ye(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=na(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let i=r.indexOf(t);Ye(i!==-1,`rolloff can only be ${r.join(", ")}`),i+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(s=>s.disconnect()),this._filters=new Array(i);for(let s=0;s<i;s++){const o=new Lf({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[s]=o}this._internalChannels=this._filters,Ef(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Lf({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((s,o)=>r[o]*=s)}),t.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),r_(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Ff extends Di{constructor(){super(ve(Ff.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=ve(Ff.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Of({context:this.context,value:e.exponent}),this._scale=this.output=new Ip({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Di.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Xi(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Uf extends mo{constructor(){super(ve(Uf.getDefaults(),arguments)),this.name="MonoSynth";const e=ve(Uf.getDefaults(),arguments);this.oscillator=new il(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ic(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Ff(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new _m(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ut(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(mo.getDefaults(),{envelope:Object.assign(oc(Di.getDefaults(),Object.keys(je.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(oc(Ic.getDefaults(),Object.keys(je.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(oc(Ff.getDefaults(),Object.keys(je.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(oc(il.getDefaults(),Object.keys(ir.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class zf extends Nf{constructor(){super(ve(zf.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=ve(zf.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ut(this,["oscillator","envelope"])}static getDefaults(){return dc(mo.getDefaults(),Nf.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),i=this.toFrequency(e instanceof Ai?e.toFrequency():e),s=i*this.octaves;return this.oscillator.frequency.setValueAtTime(s,r),this.oscillator.frequency.exponentialRampToValueAtTime(i,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ts([I3(0)],zf.prototype,"octaves",void 0);ts([wo(0)],zf.prototype,"pitchDecay",void 0);const N3=new Set;function u_(n){N3.add(n)}function L3(n,e){const t=`registerProcessor("${n}", ${e})`;N3.add(t)}const HV=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;u_(HV);const WV=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;u_(WV);const GV=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;u_(GV);const qV="feedback-comb-filter",YV=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;L3(qV,YV);class Bf extends sl{constructor(){super(ve(Bf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=ve(Bf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(r=>{const i=parseInt(r,10);if(Ye(Dd(r)||na(i)&&isFinite(i),`url key is neither a note or midi pitch: ${r}`),Dd(r)){const s=new Ai(this.context,r).toMidi();t[s]=e.urls[r]}else na(i)&&isFinite(i)&&(t[i]=e.urls[i])}),this._buffers=new a_({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(sl.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:wt,onerror:wt,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(i=>{const s=D3(new Ai(this.context,i).toFrequency()),o=Math.round(s),a=s-o,l=this._findClosest(o),c=o-l,u=this._buffers.get(c),d=P3(l+a),p=new Pc({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);p.start(t,0,u.duration/d,r),qi(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(p),p.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const m=this._activeSources.get(o),v=m.indexOf(p);v!==-1&&m.splice(v,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=new Ai(this.context,r).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const s=this._activeSources.get(i);t=this.toSeconds(t),s.forEach(o=>{o.stop(t)}),this._activeSources.set(i,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,i=1){const s=this.toSeconds(r);return this.triggerAttack(e,s,i),qi(t)?(Ye(qi(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=t[Math.min(a,t.length-1)];this.triggerRelease(o,s+this.toSeconds(l))})):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,r){if(Ye(Dd(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Dd(e)){const i=new Ai(this.context,e).toMidi();this._buffers.add(i,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}ts([wo(0)],Bf.prototype,"attack",void 0);ts([wo(0)],Bf.prototype,"release",void 0);class Np extends je{constructor(){super(Object.assign(ve(Np.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new VV({context:this.context}),this.a=new Dt({context:this.context,gain:0}),this.b=new Dt({context:this.context,gain:0}),this.output=new Dt({context:this.context}),this._internalChannels=[this.a,this.b];const e=ve(Np.getDefaults(),arguments,["fade"]);this.fade=new Lt({context:this.context,units:"normalRange",value:e.fade}),Ut(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ra(this._split,this.a.gain,0),ra(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(je.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class lb extends je{constructor(e){super(e),this.name="Effect",this._dryWet=new Np({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Dt({context:this.context}),this.effectReturn=new Dt({context:this.context}),this.input=new Dt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ut(this,"wet")}static getDefaults(){return Object.assign(je.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Lp extends je{constructor(){super(Object.assign(ve(Lp.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=ve(Lp.getDefaults(),arguments,["pan"]);this.pan=new Et({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ut(this,"pan")}static getDefaults(){return Object.assign(je.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const ZV="bit-crusher",XV=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;L3(ZV,XV);class Fp extends je{constructor(){super(ve(Fp.getDefaults(),arguments,["channels"])),this.name="Merge";const e=ve(Fp.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(je.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Up extends lb{constructor(){super(ve(Up.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=ve(Up.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(lb.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Xi(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Xi(e,0),this._preDelay=e,this.generate()}generate(){return Pt(this,void 0,void 0,function*(){const e=this.ready,t=new gm(2,this._decay+this._preDelay,this.context.sampleRate),r=new Af({context:t}),i=new Af({context:t}),s=new Fp({context:t});r.connect(s,0,0),i.connect(s,0,1);const o=new Dt({context:t}).toDestination();s.connect(o),r.start(0),i.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then(wt),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class dn extends je{constructor(){super(ve(dn.getDefaults(),arguments,["solo"])),this.name="Solo";const e=ve(dn.getDefaults(),arguments,["solo"]);this.input=this.output=new Dt({context:this.context}),dn._allSolos.has(this.context)||dn._allSolos.set(this.context,new Set),dn._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(je.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),dn._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){dn._soloed.has(this.context)||dn._soloed.set(this.context,new Set),dn._soloed.get(this.context).add(this)}_removeSolo(){dn._soloed.has(this.context)&&dn._soloed.get(this.context).delete(this)}_isSoloed(){return dn._soloed.has(this.context)&&dn._soloed.get(this.context).has(this)}_noSolos(){return!dn._soloed.has(this.context)||dn._soloed.has(this.context)&&dn._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),dn._allSolos.get(this.context).delete(this),this._removeSolo(),this}}dn._allSolos=new Map;dn._soloed=new Map;class zp extends je{constructor(){super(ve(zp.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=ve(zp.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Lp({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ia({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ut(this,["pan","volume"])}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Da extends je{constructor(){super(ve(Da.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=ve(Da.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new dn({solo:e.solo,context:this.context}),this._panVol=this.output=new zp({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ut(this,["pan","volume"])}static getDefaults(){return Object.assign(je.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Da.buses.has(e)||Da.buses.set(e,new Dt({context:this.context})),Da.buses.get(e)}send(e,t=0){const r=this._getBus(e),i=new Dt({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(r),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Da.buses=new Map;class KV extends je{constructor(){super(...arguments),this.name="Listener",this.positionX=new Et({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Et({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Et({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Et({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Et({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Et({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Et({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Et({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Et({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(je.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}pm(n=>{n.listener=new KV({context:n})});mm(n=>{n.listener.dispose()});Hi().transport;const f_=Hi().destination;Hi().destination;Hi().listener;Hi().draw;Hi();const h_=new Ic(900,"highpass"),F3=new ia(-6);F3.chain(h_,f_);const QV=new Up(3).connect(F3),ym=new Uf({envelope:{attack:0,decay:.9,sustain:.2,release:.1}});ym.oscillator.type="triangle2";ym.volume.value=-6;ym.chain(h_,f_);const xm=new Uf({envelope:{attack:.4,decay:.9,sustain:.7,release:.6}}).connect(QV);xm.oscillator.type="triangle";xm.volume.value=-6;xm.chain(h_,f_);function JV(){return Math.floor((Math.random()-.5)*20)}let cb=!1;const eH=async(n=0)=>{cb||(await kV(),cb=!0);try{if(n>2e3)xm.triggerAttackRelease(60,.3);else if(n>1e3){let e=310;e+=JV(),ym.triggerAttackRelease(e,.001)}}catch(e){console.warn(e)}};let ql,Gu;const tH=4e3,nH=2e3,rH=n=>{const e=Ji(),t=Le(k=>k.cameraFocusTrigger),r=Wo(k=>k.isUserDragging),i=Wo(k=>k.isUserScrolling),s=Wo(k=>k.setUserMovedCamera),o=Le(k=>k.setNearbyNodeIds),a=Le(k=>k.showSelectionGraph),l=Le(k=>k.data),c=Le(k=>k.graphStyle),{camera:u}=mt(),[d,p]=S.useState(!1),[m,v]=S.useState(!1),[_,y]=S.useState(Bw),w=S.useMemo(()=>{if(a)return new Te(0,0,0);const k=l==null?void 0:l.nodes.find(P=>P.ref_id===(e==null?void 0:e.ref_id));let R=new Te(2e3,2e3,3e3);if(k&&l){const P=l==null?void 0:l.nodes.filter(z=>{var V;return(V=k.children)==null?void 0:V.find($=>$===z.id)}),L=new Te(k.x,k.y,k.z);let I=new Te(0,0,0);P.map(z=>(I=I.add(new Te(z.x,z.y,z.z).normalize()),z));const D=k.scale?1-1/(k.scale+10):1,B=L.sub(I).multiplyScalar(.8*D);R=L.add(B)}return R},[a,e,l]),b=S.useMemo(()=>{if(a)return new Te(0,0,0);const k=l==null?void 0:l.nodes.find(R=>R.ref_id===(e==null?void 0:e.ref_id));return new Te((k==null?void 0:k.x)||0,(k==null?void 0:k.y)||0,(k==null?void 0:k.z)||0)},[a,e,l]);S.useEffect(()=>{var k;a&&((k=n.current)==null||k.setLookAt(u0.x,u0.y,u0.z,0,0,0,!1)),C()},[a]),S.useEffect(()=>{a?y(rU):(e==null?void 0:e.node_type)==="topic"?y(nU):y(Bw)},[e,y,a]),S.useEffect(()=>{O()},[t]),S.useEffect(()=>{(r||i)&&(p(!0),v(!0))},[r,i,p,v]),S.useEffect(()=>{if(e)if(!a&&c==="earth"&&(n!=null&&n.current)){const k=n.current.camera.position.distanceTo(new Te),R=u4(b,-k/2);n.current.setLookAt(R.x,R.y,R.z,0,0,0,!0)}else ql&&clearTimeout(ql),ql=setTimeout(()=>{v(!0),clearTimeout(ql)},nH),C();return()=>{ql&&clearTimeout(ql),Gu&&clearTimeout(Gu)}},[e]),Cn(k=>{n.current&&(d||T(w,k.camera),m||A(b,k.camera))});const C=()=>{if(e){const k=u.position.distanceTo(w);eH(k)}O()},O=()=>{p(!1),v(!1),s(!1),Gu&&clearTimeout(Gu),Gu=setTimeout(()=>{p(!0),v(!0)},tH)},T=(k,R)=>{if(R.position.distanceTo(k)<_)p(!0);else{R.position.lerp(k,.5);const L=L1((l==null?void 0:l.nodes)||[],u);L&&o(L)}},A=(k,R)=>{var P;(P=n==null?void 0:n.current)==null||P.setLookAt(R.position.x,R.position.y,R.position.z,k.x,k.y,k.z,!0)};return null},iH=1;let Xs=null;const sH=(n,{enabled:e})=>{const t=Ji();rH(n);const r=Wo(u=>u.isUserDragging),i=Le(u=>u.disableCameraRotation),s=Le(u=>u.data),o=Le(u=>u.graphStyle),a=Le(u=>u.graphRadius),l=Le(u=>u.setNearbyNodeIds);S.useEffect(()=>{e||(Xs==null||Xs.kill(),Xs=null)},[e]);const c=S.useCallback(()=>{Xs==null||Xs.kill();const u={value:-244},d=RC.to(u,{duration:5,keyframes:{"0%":{value:10},"100%":{delay:2,ease:"Power4.easeIn",value:-200}},onComplete:()=>{Xs=null},onInterrupt(){d.kill()},onUpdate:()=>{var m;const{value:p}=u;if(n.current){const v=L1((s==null?void 0:s.nodes)||[],n.current.camera);v&&l(v),(m=n.current)==null||m.dolly(p,!1)}}});d.play(),Xs=d},[]);return S.useEffect(()=>{n.current&&a&&(o==="sphere"?(n.current.maxDistance=8e3,n.current.minDistance=200,n.current.setTarget(0,0,500,!0)):(n.current.maxDistance=n.current.getDistanceToFitSphere(a+200),n.current.minDistance=100))},[a,o,n]),S.useEffect(()=>{c()},[c,o]),S.useEffect(()=>{!t&&n.current&&n.current.setLookAt(io.x,io.y,io.z,0,0,0,!0)},[t]),Cn((u,d)=>{n.current&&(!i&&!r&&(n.current.azimuthAngle+=iH*d*Nv.DEG2RAD),n.current.update(d))}),null},oH=({disableAnimations:n})=>{const e=S.useRef(null),t=Le(p=>p.graphStyle),r=Le(p=>p.data),i=Le(p=>p.setNearbyNodeIds),s=Le(p=>p.setDisableCameraRotation),[o]=S.useState(.8),{camera:a}=mt(),[l,c,u,d]=Wo(p=>[p.isUserDragging,p.setIsUserDragging,p.isUserScrolling,p.isUserScrollingOnHtmlPanel]);return sH(e,{enabled:!n&&!u&&!l}),S.useEffect(()=>{e.current&&e.current.setLookAt(io.x,io.y,io.z,0,0,0,!0)},[t]),S.useEffect(()=>{if(!l){const p=L1((r==null?void 0:r.nodes)||[],a);p&&i(p)}},[a,a.position,a.position.x,a.position.y,a.position.z,r==null?void 0:r.nodes,i,l]),S.useEffect(()=>{l&&s(!0)},[l,s]),N.jsx(mR,{ref:e,boundaryEnclosesCamera:!0,enabled:!d,makeDefault:!0,maxDistance:12e3,minDistance:100,onEnd:()=>c(!1),onStart:()=>c(!0),smoothTime:o})},wm={metalness:.9,roughness:0},aH={...wm},lH=new Vf(aH),cH=({hide:n})=>{const e=Uv(),t=Le(i=>i.graphStyle),r=S.useMemo(()=>e.nodes.map((i,s)=>{if(i.node_type==="topic")return!1;const o=!MC(i),a=_1(i.node_type||"",!0);return N.jsx(zS,{color:a,name:i.id,position:[i.x,i.y,i.z],scale:o?(i.scale||1)*.9:0,userData:i},`${i.ref_id||i.id}-instanced-node-${s}-${t}`)}),[t,e]);return N.jsx(_R,{geometry:gv,material:lH,visible:!n,children:r})},U3=new Wp,Bp=U3.load("noimage.jpeg"),ub=new Vf({...wm,map:Bp}),z3=.4,uH=new Vf({...wm,map:Bp,transparent:!0,opacity:z3}),Nd={},fH=(n,e)=>{const[t,r]=S.useState(Bp),[i,s]=S.useState(ub);return S.useEffect(()=>{const o=`${n}${e&&"-transparent"}`;if(Nd[o]){r(Nd[o].texture),s(Nd[o].material);return}U3.load(n,a=>{const l=new Vf({map:a,transparent:e,opacity:e?z3:1,...wm});Nd[o]={texture:a,material:l},r(a),s(l)},void 0,()=>{r(Bp),s(e?uH:ub)})},[n,e]),S.useEffect(()=>function(){t.dispose(),i.dispose()},[t,i]),i},d_=S.memo(({node:n,hide:e,animated:t})=>{const r=S.useRef(null),[i]=S.useState(gv),s=Ji(),o=Le(u=>u.showSelectionGraph),a=!!s&&n.ref_id===s.ref_id,l=fH(n.image_url||"noimage.jpeg",!1);Cn((u,d)=>{t&&r.current&&(r.current.position.set(n.x,n.y,n.z),a&&(r.current.rotation.y+=d*1,r.current.rotation.x-=d*.6))}),S.useEffect(()=>function(){i.dispose()},[i]);const c=S.useMemo(()=>o&&a?20:a?(n.scale||1)*1.2:n.scale,[n,a,o]);return N.jsx(ER,{enabled:!!a,children:N.jsx("mesh",{ref:r,geometry:gv,material:l,name:n.id,position:[n.x,n.y,n.z],scale:c,userData:n,visible:!e})})});d_.displayName="Cube";const hH=Ki(wn)`
  text-align: center;
  width: ${n=>n.type==="topic"?"auto":`${n.size}px`};
  height: ${n=>n.type==="topic"?"auto":`${n.size}px`};
  outline: 1px solid ${n=>Qn.white};
  outline-offset: 0px;
  background: rgba(0, 0, 0, 0.75);
  color: ${n=>n.fontColor};
  border-radius: ${n=>`${n.type==="guest"?"100%":"6px"}`};
  font-size: ${n=>`${n.fontSize}px`};
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  transform: scale(${n=>n.scale});
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 26px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }

  &.selected {
    .badge-wrapper {
      top: 0;
    }

    font-size: 36px;

    &:hover {
      outline-offset: 0px;
    }
  }

  &.topic {
    outline: none;
    background: none;
    &:hover {
      font-size: 36px;
    }
    white-space: nowrap;
    .badge-wrapper {
      display: none;
    }
  }

  .badge-wrapper {
    position: absolute;
    top: -7px;
    left: -14px;
  }
`;Ki.img`
  background-image: ${({src:n})=>`url(${n})`};
  background-size: contain;
  background-repeat: no-repeat;
  width: ${n=>n.size}px;
  height: ${n=>n.size}px;
  border-radius: ${n=>n.borderRadius};
`;Ki.div`
  display: flex;
  position: absolute;
  bottom: -14px;
  left: -5px;
  width: auto;
  justify-content: center;
  align-items: center;
`;Ki.div`
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${Qn.transparentBlack};
  border: 2px solid ${n=>n.color};
  color: #fff;
  padding: 0 4px;
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;Ki.div`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px solid ${n=>n.color}44;
  background: ${Qn.transparentBlack};
  padding: 0 4px;
  color: ${n=>n.color};
  min-width: 30px;
  height: 26px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  margin-right: 5px;
`;const dH=new Te,pH=({position:n,userData:e,color:t})=>{const r=S.useRef(null),[i,s]=Le(m=>[m.selectedNode,m.setSelectedNode]),o=Le(m=>m.setHoveredNode),a=Le(m=>m.hoveredNode),l=Le(m=>m.showSelectionGraph),c=((e==null?void 0:e.node_type)||"")==="topic",u=((e==null?void 0:e.node_type)||"")==="guest"||((e==null?void 0:e.node_type)||"")==="person";Cn(()=>{if(l&&r.current){const m=dH.set((e==null?void 0:e.x)||0,(e==null?void 0:e.y)||0,(e==null?void 0:e.z)||0);r.current.position.copy(m)}}),S.useEffect(()=>function(){r.current&&r.current.clear()},[r]);const d=S.useMemo(()=>(a==null?void 0:a.ref_id)===(e==null?void 0:e.ref_id),[a==null?void 0:a.ref_id,e==null?void 0:e.ref_id]),p=(i==null?void 0:i.ref_id)===(e==null?void 0:e.ref_id);return c||p&&l||!p?N.jsx("group",{ref:r,position:n,children:N.jsx(Xv,{center:!0,sprite:!0,zIndexRange:[0,0],children:N.jsxs(hH,{className:kb(e==null?void 0:e.node_type,{selected:p}),color:t,fontColor:Qn.white,fontSize:c?64:20,onClick:m=>{m.stopPropagation(),e&&s(e)},onPointerOut:m=>{m.stopPropagation(),o(null)},onPointerOver:m=>{m.stopPropagation(),o(e||null)},scale:d?1.05:1,selected:!1,size:p?100:68,type:(e==null?void 0:e.node_type)||"",children:[!u&&!c?N.jsx("div",{className:"badge-wrapper",children:N.jsx(x4,{type:(e==null?void 0:e.node_type)||""})}):null,c?e==null?void 0:e.label:N.jsx(Ab,{rounded:u,size:p?60:52,src:(e==null?void 0:e.image_url)||"audio_default.svg",type:e==null?void 0:e.node_type})]})})}):null},B3=S.memo(()=>{const n=Le(o=>o.data),e=Ji(),t=Le(o=>o.showSelectionGraph),r=Le(o=>o.selectionGraphData),i=Le(o=>o.selectedNodeRelativeIds),s=S.useMemo(()=>(t?r.nodes:(n==null?void 0:n.nodes)||[]).filter(c=>i.includes((c==null?void 0:c.ref_id)||"")||(e==null?void 0:e.ref_id)===(c==null?void 0:c.ref_id)).slice(0,Ob).map(c=>{const u=_1(c.node_type||"",!0),d=new Te((c==null?void 0:c.x)||0,(c==null?void 0:c.y)||0,(c==null?void 0:c.z)||0),p=((n==null?void 0:n.nodes)||[]).filter(m=>m.ref_id&&f4(m,c)).map(m=>(m==null?void 0:m.ref_id)||"")||[];return N.jsx(pH,{color:u,position:d,relativeIds:p,userData:c},`node-badge-${c.ref_id}`)}),[i,n==null?void 0:n.nodes,t,r,e]);return N.jsx(S.Fragment,{children:s.length?s:null},"node-badges")});B3.displayName="RelevanceBadges";const j3=({link:n,animated:e})=>{const t=S.useRef(null),r=Ji(),[i,s]=S.useState(new Te(0,0,0)),[o,a]=S.useState(new Te(0,0,0)),[l,c]=S.useState(8947848),u=Le(d=>d.selectionGraphData);return S.useEffect(()=>{var m,v,_,y,w,b;const d=(r==null?void 0:r.ref_id)||"",p=r&&(d===n.targetRef||d===n.sourceRef);!n.onlyVisibleOnSelect||p?(s(new Te(((m=n.sourcePosition)==null?void 0:m.x)||0,((v=n.sourcePosition)==null?void 0:v.y)||0,((_=n.sourcePosition)==null?void 0:_.z)||0)),a(new Te(((y=n.targetPosition)==null?void 0:y.x)||0,((w=n.targetPosition)==null?void 0:w.y)||0,((b=n.targetPosition)==null?void 0:b.z)||0))):(s(new Te(0,0,0)),a(new Te(0,0,0))),c(p?n.color||yb.children.segmentColor:r?5592405:8947848)},[r,n]),Cn(()=>{if(e&&t.current){const d=u.nodes.find(m=>m.ref_id===n.sourceRef),p=u.nodes.find(m=>m.ref_id===n.targetRef);t.current.start.set((d==null?void 0:d.x)||0,(d==null?void 0:d.y)||0,(d==null?void 0:d.z)||0),t.current.end.set((p==null?void 0:p.x)||0,(p==null?void 0:p.y)||0,(p==null?void 0:p.z)||0)}}),N.jsx(xR,{ref:t,color:"0xFFFFFF",end:o,start:i})},mH={font:"/fonts/Inter-Bold.woff",characters:"abcdefghijklmnopqrstuvwxyz0123456789!",fontSize:2,letterSpacing:-.05,lineHeight:1,"material-toneMapped":!1},p_=S.memo(({node:n,hide:e})=>{const t=S.useRef(null),r=Ji(),s=Le(u=>u.selectedNodeRelativeIds).includes((n==null?void 0:n.ref_id)||""),o=!!r&&(r==null?void 0:r.id)===n.id,a=Le(u=>u.showSelectionGraph);Cn(({camera:u})=>{t!=null&&t.current&&(t.current.quaternion.copy(u.quaternion),a&&t.current.position.set(n.x,n.y,n.z))});const l=S.useMemo(()=>{let u=(n.scale||1)*4;return a&&o?u=40:!o&&s&&(u=0),u},[n.scale,o,s,a]),c=S.useMemo(()=>r&&r.node_type==="topic"&&!o?.2:1,[o,r]);return N.jsx(R0,{ref:t,anchorX:"center",anchorY:"middle",color:Qn.white,fillOpacity:c,position:[n.x,n.y,n.z],scale:l,userData:n,visible:!e&&!o,...mH,children:n.label})});p_.displayName="TextNode";let d0=null;const $3=S.memo(()=>{const n=Uv(),e=Ji(),t=Le(s=>s.selectedNodeRelativeIds),r=Le(s=>s.selectionGraphData),i=Le(s=>s.setSelectionData);return S.useEffect(()=>{const s=n.nodes.filter(a=>a.ref_id===(e==null?void 0:e.ref_id)||t.includes((a==null?void 0:a.ref_id)||"")).map(a=>{const l=a.ref_id===(e==null?void 0:e.ref_id)&&a.node_type!=="topic"?{fx:0,fy:0,fz:0}:{};return{...a,x:0,y:0,z:0,...l}}),o=h4(s,!1,!1);i({nodes:s,links:o})},[n,e,t,i]),S.useEffect(()=>{d0=d4(r.nodes,r.links,{numDimensions:2,forceLinkStrength:.01,forceCenterStrength:.85,forceChargeStrength:-20,velocityDecay:.9})},[r]),Cn(()=>{d0&&d0.tick()}),N.jsxs(N.Fragment,{children:[r==null?void 0:r.nodes.map(s=>s.node_type==="topic"?N.jsx(p_,{hide:!0,node:s},`${s.ref_id||s.id}-compact`):N.jsx(d_,{animated:!0,hide:!0,node:s},`${s.ref_id||s.id}-compact`)),N.jsx(jS,{fog:!0,lineWidth:.9,children:(r==null?void 0:r.links).map((s,o)=>N.jsx(j3,{animated:!0,link:s},o.toString()))},`selection-links-${r==null?void 0:r.links.length}`)]})});$3.displayName="SelectionDataNodes";const V3=S.memo(()=>{const n=Uv(),e=Ji(),t=Le(p=>p.nearbyNodeIds),r=Le(p=>p.setHoveredNode),i=Le(p=>p.showSelectionGraph),s=Le(p=>p.selectionGraphData),o=zv(p=>p.setTranscriptOpen),a=S.useCallback(p=>!!(i&&!s.nodes.find(m=>m.ref_id===p.ref_id)),[i,s]),l=S.useCallback(p=>{const m=p==null?void 0:p[0];m&&(o(!1),m.userData&&(a(m.userData)||Le.getState().setSelectedNode((m==null?void 0:m.userData)||null)))},[o,a]),c=S.useCallback(p=>{p.stopPropagation(),r(null)},[r]),u=S.useCallback(p=>{var _;const v=p.intersections.map(y=>y.object)[0];if((_=v==null?void 0:v.userData)!=null&&_.ref_id){const y=v.userData;a(y)||(p.stopPropagation(),r(y))}},[r,a]),d=i&&!!e;return N.jsxs(dA,{filter:p=>p.filter(m=>{var v;return!!((v=m.userData)!=null&&v.id)}),onChange:l,onPointerOut:c,onPointerOver:u,children:[N.jsx(cH,{hide:d}),N.jsx(B3,{}),n.nodes.filter(p=>{const m=(p==null?void 0:p.ref_id)===(e==null?void 0:e.ref_id);return t.includes(p.ref_id||"")||MC(p)||m}).map(p=>p.node_type==="topic"?N.jsx(p_,{hide:d,node:p},p.ref_id||p.id):N.jsx(d_,{hide:d,node:p},p.ref_id||p.id)),d&&N.jsx($3,{})]})});V3.displayName="Cubes";const gH={earthRef:null},vH=Mv(n=>({...gH,setEarthRef:e=>n({earthRef:e})})),_H=(n,e)=>{const t=new Fd().setFromUnitVectors(new Te(0,1,0),n.clone().normalize()),r=new Fd().setFromUnitVectors(new Te(0,1,0),e.clone().normalize()),i=new Fd,s=50,o=[];for(let l=0;l<=s;l+=1){const c=l/s;i.slerpQuaternions(t,r,c);const u=new Te(0,1,0).applyQuaternion(i).multiplyScalar(Yu+p4);o.push(u)}return new m4(o).getPoints(s)},yH=({link:n})=>{const e=Ji(),[t,r]=S.useState(8947848);S.useEffect(()=>{const s=(e==null?void 0:e.ref_id)||"",o=e&&(s===n.targetRef||s===n.sourceRef);r(o?n.color||yb.children.segmentColor:e?5592405:8947848)},[e,n]);const i=S.useMemo(()=>{var c,u,d,p,m,v;const s=(e==null?void 0:e.ref_id)||"",o=e&&(s===n.targetRef||s===n.sourceRef);if(!(!n.onlyVisibleOnSelect||o))return[];const a=new Te(((c=n.sourcePosition)==null?void 0:c.x)||0,((u=n.sourcePosition)==null?void 0:u.y)||0,((d=n.sourcePosition)==null?void 0:d.z)||0),l=new Te(((p=n.targetPosition)==null?void 0:p.x)||0,((m=n.targetPosition)==null?void 0:m.y)||0,((v=n.targetPosition)==null?void 0:v.z)||0);return _H(a,l)},[n,e]);return i.length?N.jsx(pA,{color:t,dashed:!1,lineWidth:3,points:i}):null},xH=new Te(0,0,0),wH=()=>{const n=S.useRef(null),e=S.useRef(null),t=Le(l=>l.graphStyle),r=Le(l=>l.showSelectionGraph),i=Le(l=>l.data),s=vH(l=>l.setEarthRef),o=$a("textures/earth/galaxy.png"),a=$a("textures/earth/clouds.png");return Cn(({camera:l})=>{e.current&&e.current.position.copy(l.getWorldPosition(xH))}),S.useLayoutEffect(()=>{n.current&&s(n)},[s]),t!=="earth"||r?null:N.jsxs(N.Fragment,{children:[N.jsxs("mesh",{ref:n,userData:{type:"earth"},children:[N.jsx("sphereGeometry",{args:[Yu,200,200]}),N.jsx(bH,{})]}),N.jsxs("mesh",{children:[N.jsx("sphereGeometry",{args:[Yu+2,200,200]}),N.jsx("meshStandardMaterial",{alphaMap:a,map:a,transparent:!0})]}),N.jsxs("mesh",{children:[N.jsx("sphereGeometry",{args:[Yu*4,200,200]}),N.jsx("meshStandardMaterial",{map:o,opacity:.4,side:Bo,transparent:!0})]}),N.jsx("directionalLight",{ref:e,intensity:.9,position:[0,0,Yu*3]}),i==null?void 0:i.links.map((l,c)=>N.jsx(yH,{link:l},`curved-${c}`))]})},bH=()=>{const n=$a("textures/earth/earth.jpeg"),e=$a("textures/earth/bump.jpeg"),t=$a("textures/earth/water.png"),r=S.useMemo(()=>new Vf({map:n,bumpMap:e,aoMap:e,roughnessMap:e,metalnessMap:t,toneMapped:!0,roughness:35,metalness:0}),[n,e,t]);return N.jsx("meshStandardMaterial",{...r})},Yl=2e3,Ld=$d*4,fb=Object.values(RE).map(n=>n),SH=()=>{const n=S.useRef(null);Cn(()=>{var o,a,l;const i=((o=n.current)==null?void 0:o.geometry.getAttribute("position")).array,s=((a=n.current)==null?void 0:a.geometry.getAttribute("velocity")).array;if(i&&s){for(let c=0;c<i.length;c+=3){const u=i[c],d=i[c+1],p=i[c+2],m=s[c],v=s[c+1],_=s[c+2];i[c]+=m,i[c+1]+=v,i[c+2]+=_;const y=Math.sqrt(u*u+d*d+p*p);if(y*y>Ld*Ld){const b=Math.random()*Math.PI*2,C=Math.random()*Math.PI*2,O=Math.random()*Ld;i[c]=Math.sin(b)*Math.cos(C)*O,i[c+1]=Math.sin(b)*Math.sin(C)*O,i[c+2]=Math.cos(b)*O}}((l=n.current)==null?void 0:l.geometry.getAttribute("position")).needsUpdate=!0}});const e=S.useMemo(()=>new Float32Array(Yl*3),[]),t=S.useMemo(()=>new Float32Array(Yl*3),[]);S.useEffect(()=>{const i=Ld;for(let s=0;s<Yl;s+=1){const o=s*3,a=Math.acos(1-s/Yl*2),l=Math.PI*2*s/Yl;e[o]=Math.sin(a)*Math.cos(l)*i,e[o+1]=Math.sin(a)*Math.sin(l)*i,e[o+2]=Math.cos(a)*i,t[o]=Math.random()-.5,t[o+1]=Math.random()-.5,t[o+2]=Math.random()-.5}},[e,t]);const r=S.useRef(null);return S.useEffect(()=>{r.current&&n.current&&(r.current.setAttribute("position",new Ia(e,3)),r.current.setAttribute("velocity",new Ia(t,3)),n.current.geometry=r.current)},[e,t]),S.useEffect(()=>{if(r.current){const i=[];for(let s=0;s<Yl;s+=1){const o=Math.floor(Math.random()*fb.length),a=fb[o],l=new xr(a);l.multiplyScalar(2),i.push(l.r,l.g,l.b)}r.current.setAttribute("color",new Ia(new Float32Array(i),3))}},[]),N.jsxs("points",{ref:n,frustumCulled:!1,children:[N.jsx("bufferGeometry",{ref:r}),N.jsx("pointsMaterial",{opacity:.8,size:4,transparent:!0,vertexColors:!0})]})},hb=n=>({close:{backgroundColor:"rgba(48, 51, 66, 1)",borderColor:"#fff",fontColor:"rgba(255, 255, 255, 1)"},focus:{backgroundColor:n?"rgba(255, 255, 255, 0.90);":"rgba(255, 255, 255, 0.90)",borderColor:n?"#FFDB58bb":"#fff",fontColor:"rgba(48, 51, 66, 1)"},menu:{backgroundColor:"#00000066",borderColor:n?"#ffffff66":"#5078f2",fontColor:n?"#ffffff66":"#fff"}}),TH=new Te,H3=S.memo(()=>{const n=S.useRef(null),e=zv(u=>u.setSidebarOpen),t=Le(u=>u.showSelectionGraph),r=Le(u=>u.selectionGraphData),i=Le(u=>u.data),s=Ji(),o=Le(u=>u.setSelectedNode),a=Le(u=>u.setShowSelectionGraph);Cn(()=>{l()});const l=S.useCallback(()=>{const u=t?r:i;if(n.current){const d=u==null?void 0:u.nodes.find(p=>p.ref_id===(s==null?void 0:s.ref_id));if(d){const p=TH.set(d==null?void 0:d.x,d==null?void 0:d.y,d==null?void 0:d.z);n.current.position.copy(p)}}},[s,t,r,i]),c=S.useMemo(()=>[{key:"control-key-1",colors:hb(t).focus,icon:N.jsx(g4,{}),left:10,className:"expand",onClick:()=>{const u=!t;a(u),u&&e(!0)}},{key:"control-key-2",colors:hb(!0).close,icon:N.jsx(v4,{}),left:40,className:"exit",onClick:()=>{o(null),a(!1)}}],[a,o,e,t]);return s?N.jsx("group",{ref:n,children:N.jsx(Xv,{center:!0,className:"control-panel",onClick:u=>u.stopPropagation(),onKeyDown:u=>u.stopPropagation(),onPointerDown:u=>u.stopPropagation(),onPointerOut:u=>u.stopPropagation(),onPointerOver:u=>u.stopPropagation(),onPointerUp:u=>u.stopPropagation(),sprite:!0,zIndexRange:[16777271,16777272],children:c.map(u=>N.jsx(EH,{backgroundColor:u.colors.backgroundColor,borderColor:u.colors.borderColor,className:u.className,fontColor:u.colors.fontColor,left:u.left,onClick:d=>{d.stopPropagation(),u.onClick()},children:u.icon},u.key))})}):null});H3.displayName="NodeControls";const EH=Ki.div`
  position: fixed;
  top: -60px;
  left: ${n=>-7+n.left}px;
  width: 24px;
  height: 24px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${n=>n.backgroundColor?n.backgroundColor:"#000000bb"};
  color: ${n=>n.fontColor?n.fontColor:"#ffffff"};
  border-radius: 100%;
  font-size: 16px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,W3=S.memo(()=>N.jsx(N.Fragment,{children:N.jsx(H3,{})}));W3.displayName="NodeDetailsPanel";const CH=()=>{const n=Le(c=>c.data),e=Le(c=>c.isFetching),t=Le(c=>c.graphStyle),r=Le(c=>c.showSelectionGraph),i=Le(c=>c.selectedNodeRelativeIds),s=Le(c=>c.selectionGraphData),o=Le(c=>c.selectedNode),a=S.useMemo(()=>r?0:t==="force"?.2:.4,[r,t]),l=S.useMemo(()=>(r?s.nodes:(n==null?void 0:n.nodes)||[]).filter(p=>i.includes((p==null?void 0:p.ref_id)||"")||(o==null?void 0:o.ref_id)===(p==null?void 0:p.ref_id)).slice(0,Ob).map(p=>{const m=new Te(o==null?void 0:o.x,o==null?void 0:o.y,o==null?void 0:o.z),v=new Te(p.x,p.y,p.z),_={source:o!=null&&o.id?o.id:"",target:p.id?p.id:"",targetRef:p.ref_id,sourceRef:o==null?void 0:o.ref_id,sourcePosition:m,targetPosition:v};return N.jsx(j3,{link:_},p.id)}),[i,n==null?void 0:n.nodes,r,s,o]);return e?null:N.jsxs(N.Fragment,{children:[N.jsx(V3,{}),N.jsx(wH,{}),N.jsx(SH,{}),t!=="earth"&&N.jsx(jS,{fog:!0,limit:l.length,lineWidth:a,children:l},`links-${l.length}-${t}`),N.jsx(W3,{})]})},OH=()=>{const{fogColor:n}=bE("universe",{fogColor:O5}),e=Le(s=>s.graphStyle),t=S.useRef(null),r=S.useRef(null),i=S.useRef(null);return Cn(({camera:s,clock:o})=>{const a=o.getElapsedTime();if(t.current){const c=Math.sin(a/8)*1e3;t.current.position.setZ(c)}if(r.current&&r.current.position.lerp(s.position,.5),i.current){const l=a*.5,c=Math.sin(l)*$d,u=Math.cos(l)*$d;i.current.position.set(c,0,u)}}),N.jsxs(N.Fragment,{children:[N.jsx("hemisphereLight",{args:[Qn.white,E5,C5]}),e!=="earth"&&N.jsx("fog",{args:[n,5,18e3],attach:"fog"}),N.jsx("ambientLight",{color:Qn.white,intensity:1}),N.jsx("pointLight",{ref:r,color:Qn.white,distance:4e3,intensity:5,position:[0,0,0]}),N.jsx("directionalLight",{ref:i,color:Qn.white,intensity:8,position:[$d,0,0]}),N.jsx("pointLight",{ref:t,color:Qn.white,distance:4e3,intensity:8,position:[0,0,0]})]})};var G3={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(k5,function(){var t=function(){},r={},i={},s={};function o(p,m){p=p.push?p:[p];var v=[],_=p.length,y=_,w,b,C,O;for(w=function(T,A){A.length&&v.push(T),y--,y||m(v)};_--;){if(b=p[_],C=i[b],C){w(b,C);continue}O=s[b]=s[b]||[],O.push(w)}}function a(p,m){if(p){var v=s[p];if(i[p]=m,!!v)for(;v.length;)v[0](p,m),v.splice(0,1)}}function l(p,m){p.call&&(p={success:p}),m.length?(p.error||t)(m):(p.success||t)(p)}function c(p,m,v,_){var y=document,w=v.async,b=(v.numRetries||0)+1,C=v.before||t,O=p.replace(/[\?|#].*$/,""),T=p.replace(/^(css|img)!/,""),A,k;_=_||0,/(^css!|\.css$)/.test(O)?(k=y.createElement("link"),k.rel="stylesheet",k.href=T,A="hideFocus"in k,A&&k.relList&&(A=0,k.rel="preload",k.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(O)?(k=y.createElement("img"),k.src=T):(k=y.createElement("script"),k.src=p,k.async=w===void 0?!0:w),k.onload=k.onerror=k.onbeforeload=function(R){var P=R.type[0];if(A)try{k.sheet.cssText.length||(P="e")}catch(L){L.code!=18&&(P="e")}if(P=="e"){if(_+=1,_<b)return c(p,m,v,_)}else if(k.rel=="preload"&&k.as=="style")return k.rel="stylesheet";m(p,P,R.defaultPrevented)},C(p,k)!==!1&&y.head.appendChild(k)}function u(p,m,v){p=p.push?p:[p];var _=p.length,y=_,w=[],b,C;for(b=function(O,T,A){if(T=="e"&&w.push(O),T=="b")if(A)w.push(O);else return;_--,_||m(w)},C=0;C<y;C++)c(p[C],b,v)}function d(p,m,v){var _,y;if(m&&m.trim&&(_=m),y=(_?v:m)||{},_){if(_ in r)throw"LoadJS";r[_]=!0}function w(b,C){u(p,function(O){l(y,O),b&&l({success:b,error:C},O),a(_,O)},y)}if(y.returnPromise)return new Promise(w);w()}return d.ready=function(m,v){return o(m,function(_){l(v,_)}),d},d.done=function(m){a(m,[])},d.reset=function(){r={},i={},s={}},d.isDefined=function(m){return m in r},d})})(G3);var kH=G3.exports;const kv=jp(kH);var AH="https://platform.twitter.com/widgets.js",q3="twttr",Av=q3,RH=!!(typeof window<"u"&&window.document&&window.document.createElement);function MH(){kv.isDefined(Av)||kv(AH,Av)}function PH(){return new Promise(function(n,e){var t=function(){return e(new Error("Could not load remote twitter widgets js"))};MH(),kv.ready(Av,{success:function(){var i=window[q3];(!i||!i.widgets)&&t(),n(i.widgets)},error:t})})}function DH(n,e){n&&n.querySelectorAll("*").forEach(function(t){t.hasAttribute(e)&&t.remove()})}function db(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function IH(n,e){if(db(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!db(n[t[i]],e[t[i]]))return!1;return!0}function pb(n){var e=S.useRef();return IH(n,e.current)||(e.current=n),e.current}function mb(n){return typeof n=="object"?Object.assign({},n):n}var gb="twdiv";function NH(n,e,t,r){var i=S.useState(null),s=i[0],o=i[1],a=S.useRef(null);if(!RH)return{ref:a,error:s};var l=[n,pb(e),pb(t)];return S.useEffect(function(){o(null);var c=!1;if(a.current){if(DH(a.current,gb),!a||!a.current)return;var u=document.createElement("div");u.setAttribute(gb,"yes"),a.current.appendChild(u),PH().then(function(d){return d[n](mb(e),u,mb(t))}).then(function(d){if(!d&&!c)throw new Error("Twitter could not create widget. If it is a Timeline or Tweet, ensure the screenName/tweetId exists.");if(!(!a||!a.current)){if(c){u&&u.remove();return}r&&r()}}).catch(function(d){console.error(d),o(d)})}return function(){c=!0}},l),{ref:a,error:s}}var LH=function(e){var t=e.tweetId,r=e.options,i=e.onLoad,s=e.renderError,o=NH("createTweet",t,r,i),a=o.ref,l=o.error;return j.createElement("div",{ref:a},l&&s&&s(l))};const FH=({twitterHandle:n,tweetId:e})=>{const[t,r]=S.useState(!0);return N.jsxs(N.Fragment,{children:[N.jsx(wn,{direction:"row",children:N.jsx(wn,{align:"flex-start",pb:12,children:N.jsxs(wi,{children:["Tweet by @",n]})})}),N.jsxs(wn,{direction:"column",py:16,children:[t&&N.jsx(wn,{align:"center",direction:"row",justify:"center",p:10,children:N.jsx(Rb,{color:Qn.white})}),e&&N.jsx(LH,{onLoad:()=>r(!1),renderError:()=>N.jsx(UH,{}),tweetId:e})]})]})},UH=()=>N.jsx(wn,{children:"Error occurred"}),zH=Ki(wn)(({theme:n})=>({position:"absolute",top:"65px",right:"55px",width:"300px",pointerEvents:"none",background:Qn.dashboardHeader,boxShadow:"0px 1px 6px rgba(0, 0, 0, 0.1)",color:Qn.primaryText1,zIndex:100,transition:"opacity 0.6s",padding:n.spacing(2,3),[n.breakpoints.down("sm")]:{padding:n.spacing(1,1.5)}})),BH=Ki(wn)`
  width: 22.5%;
`,jH=({node:n})=>{if(!n)return null;const{node_type:e,show_title:t,episode_title:r,description:i,label:s,text:o,type:a,tweet_id:l,twitter_handle:c}=n,u=n.guests;let d=!1,p=!1;u&&(u.length&&u[0]!==null&&(d=!0),typeof u[0]=="object"&&(p=!0));let m=n.image_url;if(a==="twitter_space"&&(m="twitter_placeholder.png"),m==null)switch(e){case"guest":m="person_placeholder2.png";break;default:m="noimage.jpeg"}return e==="topic"?null:N.jsx(zH,{borderRadius:8,px:24,py:16,children:e==="tweet"?N.jsx(FH,{tweetId:l,twitterHandle:c}):N.jsxs(N.Fragment,{children:[N.jsxs(wn,{direction:"row",children:[N.jsx(BH,{}),N.jsx(wn,{align:"flex-start",pb:12,children:N.jsx(wi,{children:e==null?void 0:e.toUpperCase()})})]}),N.jsxs(wn,{direction:"row",children:[N.jsx(wn,{pr:12,children:N.jsx(Ab,{src:m,type:"person"})}),N.jsxs("div",{children:[a==="guest"?N.jsxs(wn,{direction:"column",children:[N.jsx(wi,{children:s}),o&&N.jsx(wn,{pt:4,children:N.jsxs(wi,{color:"primaryText1",kind:"tiny",children:["@",o]})})]}):N.jsx(wi,{color:"primaryText1",kind:"tiny",children:t}),N.jsxs(wn,{pt:4,children:[e==="clip"||e==="episode"&&N.jsx(wi,{color:"primaryText1",children:"Episode"}),e==="clip"?N.jsx(wi,{as:"div",kind:"regularBold",children:Hy(i)}):N.jsx(wi,{color:"primaryText1",kind:"tiny",children:r})]}),N.jsxs(wn,{pt:12,children:[e==="clip"&&N.jsx(wi,{color:"primaryText1",children:"Episode"}),N.jsx(wi,{color:"primaryText1",kind:"tiny",children:e==="clip"?r:Hy(i)})]}),d&&N.jsxs(wn,{pt:12,children:[N.jsx(wi,{color:"primaryText1",children:"People"}),N.jsx(wn,{pt:4,children:N.jsx(wi,{color:"primaryText1",kind:"tiny",children:p?u.map(v=>v.name?v.name:`@${v.twitter_handle}`).join(", "):u==null?void 0:u.join(", ")})})]})]})]})]})})},$H=()=>{const[n]=Le(e=>[e.hoveredNode]);return N.jsxs(VH,{children:[n&&N.jsx("div",{id:"tooltip-portal",children:N.jsx(jH,{node:n})}),N.jsx(_4,{})]})},VH=Ki("div")(({theme:n})=>({position:"absolute",zIndex:1,top:0,left:0,userSelect:"none",pointerEvents:"none",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",height:"100%",width:"100%",padding:"16px",[n.breakpoints.down("sm")]:{top:50}})),HH=({fullSize:n=!0})=>{const e=zv(t=>t.sidebarIsOpen);return N.jsx(WH,{align:"center",className:kb({"sidebar-is-open":e&&!n}),justify:"center",children:N.jsx(Rb,{color:Qn.SECONDARY_BLUE,size:64})})},WH=Ki(wn)`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: ${Qn.black};
  z-index: 1;
`,GH=()=>N.jsx(Xv,{children:N.jsx(hk,{})}),qH=()=>{const{universeColor:n}=bE("universe",{universeColor:Qn.black}),e=Ji(),t=S.useMemo(()=>e!=null&&e.node_type?_1(e.node_type):y4,[e]);return N.jsxs(N.Fragment,{children:[N.jsx("color",{args:[n],attach:"background"}),N.jsx(OH,{}),N.jsx(oH,{}),N.jsxs(TR,{children:[N.jsxs(iP,{autoClear:!1,multisampling:8,children:[N.jsx(lP,{darkness:.7,eskil:!1,offset:.05}),N.jsx(oP,{luminanceThreshold:1,mipmapBlur:!0,resolutionX:tn.AUTO_SIZE,resolutionY:tn.AUTO_SIZE}),N.jsx(aP,{blendFunction:tt.SCREEN,blur:!0,edgeStrength:4,hiddenEdgeColor:t,visibleEdgeColor:t})]}),N.jsx(CH,{})]})]})};let p0=null;const YH={aspect:window.innerWidth/window.innerHeight,far:3e4,near:1,position:[io.x,io.y,io.z]},ZH=()=>{const[n,e,t]=[Wo(o=>o.setIsUserScrollingOnHtmlPanel),Wo(o=>o.setIsUserScrolling),Wo(o=>o.setUserMovedCamera)],r=Le(o=>o.isFetching),i=S.useCallback(o=>{var c;const{target:a}=o,{offsetParent:l}=a;p0&&clearTimeout(p0),(c=l==null?void 0:l.classList)!=null&&c.contains("html-panel")&&l.clientHeight<l.scrollHeight&&n(!0),e(!0),t(!0),p0=setTimeout(()=>{e(!1),n(!1)},200)},[e,n,t]),s=S.useCallback(o=>A5(o,"threeState"),[]);return N.jsxs(XH,{children:[N.jsx(S.Suspense,{fallback:null,children:N.jsxs(hS,{camera:YH,id:"universe-canvas",onCreated:s,onWheel:i,children:[R5&&N.jsx(LL,{position:"top-right"}),N.jsxs(S.Suspense,{fallback:N.jsx(GH,{}),children:[N.jsx(wR,{}),N.jsx(bR,{}),N.jsx(SR,{}),N.jsx(qH,{})]})]})}),r&&N.jsx(HH,{fullSize:!1}),N.jsx($H,{})]})},XH=Ki(wn)`
  flex: 1 1 100%;
  position: relative;
`,FW=S.memo(ZH);export{FW as Universe};
