import{g as ee,a as te,s as E,_ as j,a7 as Ce,r as m,b as ne,j as t,d as se,c as P,e as oe,u as ue,aT as Be,a_ as K,a$ as re,a5 as le,b0 as Te,b1 as ze,f as b,F as g,T as R,i as Re,k as he,K as Fe,C as ae,h as k,b2 as Ne,b3 as X,U as Q,b4 as Pe,G as Ee,b5 as Ae,x as Me,I as Ie}from"./index-8c6e7d86.js";import{B as ge}from"./index-2db2798f.js";import{u as L}from"./index-3a2e60ff.js";import{q as De,j as Ge,e as me,F as xe,C as H,s as Oe,k as We,I as fe,B as Y}from"./react-toastify.esm-fcf4c1e7.js";import{B as be,T as Le,a as Ve}from"./index-d010b8aa.js";import{T as q}from"./index-c3d690f6.js";import{A as ye}from"./index-e4298840.js";import{p as _e,c as Ue}from"./index-30d16895.js";import{O as de,N as qe}from"./constants-cde8ebc3.js";import{D as Ke}from"./DeleteIcon-190da877.js";import{P as we}from"./PlusIcon-b3e2a8bf.js";import{e as He}from"./Stack-a08a5235.js";import{u as Ye,a as Je}from"./Popover-94860109.js";import{u as Ze}from"./Select-b8024a9f.js";import{S as Xe,a as I,b as Qe,E as et}from"./index-a22116be.js";import{E as tt}from"./EditIcon-80229cd3.js";import{M as nt,a as st}from"./ChevronUpIcon-823264dd.js";import"./useSlotProps-723c9ba2.js";import"./index.esm-5e8d1785.js";import"./InfoIcon-27e3afdb.js";import"./Popper-d3638f43.js";import"./generateCategoricalChart-d76b6bfd.js";import"./index-521d6d55.js";import"./CheckIcon-22266ff6.js";import"./ChevronDownIcon-ec5e4f6b.js";function ot(e){return ee("PrivateSwitchBase",e)}te("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rt=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],at=e=>{const{classes:n,checked:s,disabled:o,edge:r}=e,a={root:["root",s&&"checked",o&&"disabled",r&&`edge${P(r)}`],input:["input"]};return oe(a,ot,n)},it=E(De)(({ownerState:e})=>j({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),ct=E("input",{shouldForwardProp:Ce})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),lt=m.forwardRef(function(n,s){const{autoFocus:o,checked:r,checkedIcon:a,className:l,defaultChecked:p,disabled:d,disableFocusRipple:c=!1,edge:i=!1,icon:u,id:h,inputProps:x,inputRef:C,name:f,onBlur:A,onChange:T,onFocus:N,readOnly:G,required:y=!1,tabIndex:S,type:v,value:$}=n,_=ne(n,rt),[U,M]=Ze({controlled:r,default:!!p,name:"SwitchBase",state:"checked"}),z=Ye(),Se=B=>{N&&N(B),z&&z.onFocus&&z.onFocus(B)},ve=B=>{A&&A(B),z&&z.onBlur&&z.onBlur(B)},ke=B=>{if(B.nativeEvent.defaultPrevented)return;const ce=B.target.checked;M(ce),T&&T(B,ce)};let O=d;z&&typeof O>"u"&&(O=z.disabled);const $e=v==="checkbox"||v==="radio",J=j({},n,{checked:U,disabled:O,disableFocusRipple:c,edge:i}),ie=at(J);return t.jsxs(it,j({component:"span",className:se(ie.root,l),centerRipple:!0,focusRipple:!c,disabled:O,tabIndex:null,role:void 0,onFocus:Se,onBlur:ve,ownerState:J,ref:s},_,{children:[t.jsx(ct,j({autoFocus:o,checked:r,defaultChecked:p,className:ie.input,disabled:O,id:$e?h:void 0,name:f,onChange:ke,readOnly:G,ref:C,required:y,ownerState:J,tabIndex:S,type:v},v==="checkbox"&&$===void 0?{}:{value:$},x)),U?a:u]}))}),dt=lt,pt=m.createContext(),pe=pt;function ut(e){return ee("MuiGrid",e)}const ht=[0,1,2,3,4,5,6,7,8,9,10],gt=["column-reverse","column","row-reverse","row"],mt=["nowrap","wrap-reverse","wrap"],W=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],xt=te("MuiGrid",["root","container","item","zeroMinWidth",...ht.map(e=>`spacing-xs-${e}`),...gt.map(e=>`direction-xs-${e}`),...mt.map(e=>`wrap-xs-${e}`),...W.map(e=>`grid-xs-${e}`),...W.map(e=>`grid-sm-${e}`),...W.map(e=>`grid-md-${e}`),...W.map(e=>`grid-lg-${e}`),...W.map(e=>`grid-xl-${e}`)]),V=xt,ft=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function D(e){const n=parseFloat(e);return`${n}${String(e).replace(String(n),"")||"px"}`}function bt({theme:e,ownerState:n}){let s;return e.breakpoints.keys.reduce((o,r)=>{let a={};if(n[r]&&(s=n[r]),!s)return o;if(s===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=K({values:n.columns,breakpoints:e.breakpoints.values}),p=typeof l=="object"?l[r]:l;if(p==null)return o;const d=`${Math.round(s/p*1e8)/1e6}%`;let c={};if(n.container&&n.item&&n.columnSpacing!==0){const i=e.spacing(n.columnSpacing);if(i!=="0px"){const u=`calc(${d} + ${D(i)})`;c={flexBasis:u,maxWidth:u}}}a=j({flexBasis:d,flexGrow:0,maxWidth:d},c)}return e.breakpoints.values[r]===0?Object.assign(o,a):o[e.breakpoints.up(r)]=a,o},{})}function yt({theme:e,ownerState:n}){const s=K({values:n.direction,breakpoints:e.breakpoints.values});return re({theme:e},s,o=>{const r={flexDirection:o};return o.indexOf("column")===0&&(r[`& > .${V.item}`]={maxWidth:"none"}),r})}function je({breakpoints:e,values:n}){let s="";Object.keys(n).forEach(r=>{s===""&&n[r]!==0&&(s=r)});const o=Object.keys(e).sort((r,a)=>e[r]-e[a]);return o.slice(0,o.indexOf(s))}function wt({theme:e,ownerState:n}){const{container:s,rowSpacing:o}=n;let r={};if(s&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=re({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{marginTop:`-${D(i)}`,[`& > .${V.item}`]:{paddingTop:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{marginTop:0,[`& > .${V.item}`]:{paddingTop:0}}})}return r}function jt({theme:e,ownerState:n}){const{container:s,columnSpacing:o}=n;let r={};if(s&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=re({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{width:`calc(100% + ${D(i)})`,marginLeft:`-${D(i)}`,[`& > .${V.item}`]:{paddingLeft:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${V.item}`]:{paddingLeft:0}}})}return r}function St(e,n,s={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[s[`spacing-xs-${String(e)}`]];const o=[];return n.forEach(r=>{const a=e[r];Number(a)>0&&o.push(s[`spacing-${r}-${String(a)}`])}),o}const vt=E("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:s}=e,{container:o,direction:r,item:a,spacing:l,wrap:p,zeroMinWidth:d,breakpoints:c}=s;let i=[];o&&(i=St(l,c,n));const u=[];return c.forEach(h=>{const x=s[h];x&&u.push(n[`grid-${h}-${String(x)}`])}),[n.root,o&&n.container,a&&n.item,d&&n.zeroMinWidth,...i,r!=="row"&&n[`direction-xs-${String(r)}`],p!=="wrap"&&n[`wrap-xs-${String(p)}`],...u]}})(({ownerState:e})=>j({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),yt,wt,jt,bt);function kt(e,n){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const s=[];return n.forEach(o=>{const r=e[o];if(Number(r)>0){const a=`spacing-${o}-${String(r)}`;s.push(a)}}),s}const $t=e=>{const{classes:n,container:s,direction:o,item:r,spacing:a,wrap:l,zeroMinWidth:p,breakpoints:d}=e;let c=[];s&&(c=kt(a,d));const i=[];d.forEach(h=>{const x=e[h];x&&i.push(`grid-${h}-${String(x)}`)});const u={root:["root",s&&"container",r&&"item",p&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...i]};return oe(u,ut,n)},Ct=m.forwardRef(function(n,s){const o=ue({props:n,name:"MuiGrid"}),{breakpoints:r}=Be(),a=He(o),{className:l,columns:p,columnSpacing:d,component:c="div",container:i=!1,direction:u="row",item:h=!1,rowSpacing:x,spacing:C=0,wrap:f="wrap",zeroMinWidth:A=!1}=a,T=ne(a,ft),N=x||C,G=d||C,y=m.useContext(pe),S=i?p||12:y,v={},$=j({},T);r.keys.forEach(M=>{T[M]!=null&&(v[M]=T[M],delete $[M])});const _=j({},a,{columns:S,container:i,direction:u,item:h,rowSpacing:N,columnSpacing:G,wrap:f,zeroMinWidth:A,spacing:C},v,{breakpoints:r.keys}),U=$t(_);return t.jsx(pe.Provider,{value:S,children:t.jsx(vt,j({ownerState:_,className:se(U.root,l),as:c,ref:s},$))})}),F=Ct;function Bt(e){return ee("MuiSwitch",e)}const Tt=te("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),w=Tt,zt=["className","color","edge","size","sx"],Rt=e=>{const{classes:n,edge:s,size:o,color:r,checked:a,disabled:l}=e,p={root:["root",s&&`edge${P(s)}`,`size${P(o)}`],switchBase:["switchBase",`color${P(r)}`,a&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=oe(p,Bt,n);return j({},n,d)},Ft=E("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:s}=e;return[n.root,s.edge&&n[`edge${P(s.edge)}`],n[`size${P(s.size)}`]]}})(({ownerState:e})=>j({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${w.thumb}`]:{width:16,height:16},[`& .${w.switchBase}`]:{padding:4,[`&.${w.checked}`]:{transform:"translateX(16px)"}}})),Nt=E(dt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,n)=>{const{ownerState:s}=e;return[n.switchBase,{[`& .${w.input}`]:n.input},s.color!=="default"&&n[`color${P(s.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${w.checked}`]:{transform:"translateX(20px)"},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${w.checked} + .${w.track}`]:{opacity:.5},[`&.${w.disabled} + .${w.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${w.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:n})=>j({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},n.color!=="default"&&{[`&.${w.checked}`]:{color:(e.vars||e).palette[n.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${n.color}DisabledColor`]:`${e.palette.mode==="light"?Te(e.palette[n.color].main,.62):ze(e.palette[n.color].main,.55)}`}},[`&.${w.checked} + .${w.track}`]:{backgroundColor:(e.vars||e).palette[n.color].main}})),Pt=E("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,n)=>n.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Et=E("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,n)=>n.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),At=m.forwardRef(function(n,s){const o=ue({props:n,name:"MuiSwitch"}),{className:r,color:a="primary",edge:l=!1,size:p="medium",sx:d}=o,c=ne(o,zt),i=j({},o,{color:a,edge:l,size:p}),u=Rt(i),h=t.jsx(Et,{className:u.thumb,ownerState:i});return t.jsxs(Ft,{className:se(u.root,r),sx:d,ownerState:i,children:[t.jsx(Nt,j({type:"checkbox",icon:h,checkedIcon:h,ref:s,ownerState:i},c,{classes:j({},u,{root:u.switchBase})})),t.jsx(Pt,{className:u.track,ownerState:i})]})}),Mt=At,It=({onClose:e})=>{const[n]=Re(o=>[o.graphStyle]),s=()=>{localStorage.setItem("graphStyle",n),e()};return t.jsxs(Dt,{direction:"column",children:[t.jsx(Gt,{children:"Default graph view:"}),t.jsx(Ge,{}),t.jsx(g,{mt:308,children:t.jsx(be,{kind:"big",onClick:s,children:"Save changes"})})]})},Dt=b(g)`
  display: flex;
  gap: 10px;
  padding: 36px;
`,Gt=b(R)`
  font-family: Barlow;
  font-size: 13px;
  font-weight: 400;
`,Ot=({initialValues:e})=>{const n=me({defaultValues:e,mode:"onSubmit"}),{isSubmitting:s}=n.formState,o=he(a=>a.setAppMetaData),r=n.handleSubmit(async a=>{try{(await Fe(a)).status==="success"&&o(a)}catch(l){console.log(l),console.warn(l)}});return t.jsx(xe,{...n,children:t.jsx(Lt,{id:"add-node-form",onSubmit:r,children:t.jsxs(t.Fragment,{children:[t.jsxs(g,{children:[t.jsx(g,{pt:20,children:t.jsx(q,{id:"cy-about-title-id",label:"Graph Title",maxLength:50,name:"title",placeholder:"Type graph title here...",rules:{...ae}})}),t.jsx(g,{pt:20,children:t.jsx(q,{id:"cy-about-id",label:"Graph Description",maxLength:100,name:"description",placeholder:"Type graph description here..."})})]}),t.jsx(g,{mt:210,py:24,children:s?t.jsx(Wt,{children:t.jsx(H,{color:k.white,size:20})}):t.jsx(be,{disabled:s,id:"add-node-submit-cta",kind:"big",type:"submit",children:"Save changes"})})]})})})},Wt=b(g).attrs({align:"center",background:"primaryButton",borderRadius:8,justify:"center"})`
  padding: 16px 24px;
  opacity: 0.5;
`,Lt=b.form`
  padding: 36px;
`,Vt=/^[a-z]+$/,_t=({parentParam:e})=>{const[n,s]=m.useState(!1),[o,r]=m.useState([]),{fields:a,append:l,replace:p,remove:d}=Oe({name:"attributes"}),{setValue:c,watch:i}=We();return m.useEffect(()=>{const u=async()=>{try{let h=[{required:!1,type:"string",key:""}];if(e!==qe.value.toLowerCase()){s(!0);const x=await Ne(e);h=_e(x)}p(h),r(h)}catch(h){console.warn(h)}finally{s(!1)}};o.length===0&&u()},[e,c,p,o.length]),t.jsxs(t.Fragment,{children:[n?t.jsx(g,{align:"center",children:t.jsx(H,{color:k.SECONDARY_BLUE,size:"30"})}):t.jsx(Ut,{py:8,children:t.jsx(F,{container:!0,spacing:2,children:a.map((u,h)=>{const x=i(`attributes[${h}].type`),C=i(`attributes[${h}].required`);return t.jsxs(m.Fragment,{children:[t.jsx(F,{item:!0,xs:5,children:t.jsx(q,{autoComplete:"off",className:"text-input",id:"cy-item-name",maxLength:50,name:`attributes.${h}.key`,placeholder:"Enter value",rules:{...ae,pattern:{message:"Please use lower case and remove spaces",value:Vt}}})}),t.jsx(F,{item:!0,xs:4,children:t.jsx(ye,{onSelect:f=>c(`attributes[${h}].type`,f==null?void 0:f.value),options:de,selectedValue:de.find(f=>f.value===x)})}),t.jsxs(F,{item:!0,xs:3,children:[t.jsx(Mt,{checked:C,disabled:!1,name:`attributes.${h}.required`,onChange:f=>c(`attributes[${h}].required`,f.target.checked),size:"small"}),t.jsx(fe,{onClick:()=>d(h),children:t.jsx(Ke,{})})]})]},u.id)})})}),t.jsx(g,{align:"flex-start",py:12,children:t.jsx(Y,{onClick:()=>l({key:"",type:"string",required:!0}),size:"medium",startIcon:t.jsx(we,{}),variant:"contained",children:"Add Attribute"})})]})},Ut=b(g)`
  max-height: 260px;
  overflow: auto;
`,qt=({parent:e})=>{const n=e;return t.jsxs(g,{children:[t.jsx(g,{direction:"row",mb:10,children:t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:5,children:t.jsx(Z,{style:{marginRight:180},children:"Attributes"})}),t.jsx(F,{item:!0,xs:4,children:t.jsx(Z,{style:{marginRight:130},children:"Type"})}),t.jsx(F,{item:!0,xs:3,children:t.jsx(Z,{children:"Required"})})]})}),n&&t.jsx(_t,{parentParam:n},n)]})},Z=b(R)`
  font-size: 15px;
  color: gray;
`,Kt={type:"",parent:""},Ht=async(e,n=!1)=>{try{const{attributes:s,...o}=e,r={...o,...Ue(s)};let a;if(n?a=await Q.put("/schema",JSON.stringify(r),{}):a=await Q.post("/schema",JSON.stringify(r),{}),a.error){const{message:l}=a.error;throw new Error(l)}}catch(s){let o=X;if(s.status===400){const r=await s.json();o=r.errorCode||(r==null?void 0:r.status)||X}else s instanceof Error&&(o=s.message);throw new Error(o)}},Yt=({onSchemaCreate:e,selectedSchema:n,onDelete:s})=>{const{close:o,visible:r}=L("addType"),a=me({mode:"onChange",defaultValues:n?{type:n.type,parent:n.parent}:Kt}),{watch:l,setValue:p,reset:d}=a,[c,i]=m.useState(!1),[u,h]=m.useState(!1),[x,C]=m.useState(null);m.useEffect(()=>()=>{d()},[r,d]),m.useEffect(()=>{n||(async()=>{h(!0);try{const v=(await Pe()).schemas.map($=>($==null?void 0:$.type)==="thing"?{label:"No Parent",value:$.type}:{label:$.type,value:$.type});C(v)}catch(S){console.warn(S)}finally{h(!1)}})()},[n]);const f=l("parent"),A=()=>{o()},T=async()=>{if(n!=null&&n.type)try{await Q.delete(`/schema/${n.type}`),s(n.type),o()}catch(y){console.warn(y)}},N=a.handleSubmit(async y=>{i(!1);try{await Ht(y,!!n),e({type:y.type,parent:f||""}),A()}catch(S){if((S==null?void 0:S.status)===400){const v=await S.json();v.errorCode||v!=null&&v.status||X}else S instanceof Error&&S.message}finally{i(!1)}}),G=()=>x==null?void 0:x.find(y=>y.value===f);return t.jsx(xe,{...a,children:t.jsxs("form",{id:"add-type-form",onSubmit:N,children:[t.jsxs(g,{children:[t.jsx(g,{align:"center",direction:"row",justify:"space-between",mb:18,children:t.jsx(g,{align:"center",direction:"row",children:t.jsx(R,{children:"Enter details"})})}),n?t.jsx(g,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Parent: ",n.parent]})}):t.jsxs(t.Fragment,{children:[t.jsx(g,{mb:20,children:t.jsx(R,{children:"Select Parent"})}),t.jsx(g,{direction:"row",mb:20,children:t.jsx(ye,{autoFocus:!n,disabled:u,isLoading:u,onSelect:y=>p("parent",(y==null?void 0:y.value)||""),options:x,selectedValue:G()},f)})]}),n?t.jsx(g,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Type: ",n.type]})}):t.jsxs(t.Fragment,{children:[t.jsx(g,{mb:4,children:t.jsx(R,{children:"Type name"})}),t.jsx(g,{mb:12,children:t.jsx(q,{id:"cy-item-name",maxLength:250,name:"type",placeholder:"Enter type name",rules:{...ae},value:f})})]})]}),t.jsx(qt,{parent:f}),t.jsxs(g,{direction:"row",justify:"space-between",mt:20,children:[n?t.jsx(Jt,{color:"secondary",onClick:T,size:"large",style:{marginRight:20},variant:"contained",children:"Delete"}):null,t.jsx(Y,{color:"secondary",disabled:c,onClick:N,size:"large",startIcon:c?t.jsx(H,{color:k.white,size:24}):null,variant:"contained",children:"Save"})]})]})})},Jt=b(Y)`
  && {
    color: ${k.primaryRed};
    background-color: rgba(237, 116, 116, 0.1);

    &:hover,
    &:active,
    &:focus {
      color: ${k.primaryRed};
      background-color: rgba(237, 116, 116, 0.2);
    }
  }
`,Zt=({onSchemaCreate:e,selectedSchema:n,onDelete:s,onClose:o})=>{const{close:r}=L("addType"),a=()=>{r(),o()};return t.jsx(ge,{id:"addType",kind:"regular",onClose:a,preventOutsideClose:!0,children:t.jsx(Yt,{onDelete:s,onSchemaCreate:e,selectedSchema:n})})};function Xt(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}const Qt=({schema:e,onOpenActions:n})=>t.jsxs(Xe,{children:[t.jsx(I,{className:"empty"}),t.jsx(I,{children:Xt(e.type??"")}),t.jsx(I,{children:t.jsx(fe,{disabled:(e==null?void 0:e.type)==="thing",onClick:()=>n(e),children:t.jsx(tt,{"data-testid":"EditIcon"})})})]}),en=m.memo(Qt),tn=({schemas:e,setSelectedSchema:n})=>{const{open:s}=L("addType"),[o,r]=Ee.useState(null),a=async()=>{s()},l=m.useCallback(i=>{s(),n(i)},[s,n]),p=()=>{r(null)},d=()=>{r(null),a()},c=!!o;return t.jsxs(t.Fragment,{children:[t.jsxs(nt,{component:"table",children:[t.jsx(Qe,{children:t.jsxs(st,{component:"tr",children:[t.jsx(I,{className:"empty"}),t.jsx(I,{children:"Type"}),t.jsx(I,{className:"empty"})]})}),t.jsx("tbody",{children:e==null?void 0:e.map(i=>t.jsx(en,{onOpenActions:l,schema:i},i==null?void 0:i.type))})]}),t.jsx(on,{anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"schema-editor",onClose:p,open:c,transformOrigin:{vertical:"top",horizontal:"right"},children:t.jsxs(sn,{onClick:d,children:[t.jsx(et,{"data-testid":"EditTopicIcon"})," Edit"]})}),t.jsx(nn,{children:t.jsx(Y,{color:"secondary",endIcon:t.jsx(we,{}),onClick:a,size:"medium",type:"submit",variant:"contained",children:"Create New Type"})})]})},nn=b(g)`
  display: flex;
  margin: 20px 0px 0px 30px;
  width: 28%;
`,sn=b(g).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${k.BUTTON1};
  color: ${k.white};

  &:hover {
    background: ${k.BUTTON1_HOVER};
    color: ${k.GRAY3};
  }
`,on=b(Je)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${k.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
  }
`,rn=()=>{const[e,n]=m.useState(!0),[s,o]=m.useState([]),[r,a]=m.useState(null);m.useEffect(()=>{(async()=>{try{const c=await Ae();o(c.schemas.filter(i=>!i.is_deleted)),n(!1)}catch(c){console.error("Error fetching data:",c),n(!1)}})()},[]);const l=d=>{o([...s,d])},p=d=>{o(s.filter(c=>c.type!==d))};return t.jsxs(t.Fragment,{children:[t.jsx(an,{align:e?"center":"flex-start",justify:e?"center":"flex-start",py:16,children:e?t.jsx(H,{color:k.white}):t.jsx(t.Fragment,{children:t.jsx(tn,{schemas:s,setSelectedSchema:a})})}),t.jsx(Zt,{onClose:()=>a(null),onDelete:p,onSchemaCreate:l,selectedSchema:r})]})},an=b(g)`
  min-height: 0;
  overflow: auto;
  flex: 1;
  width: 100%;
`,cn=e=>{const{children:n,value:s,index:o,...r}=e;return s===o?t.jsx(gn,{"aria-labelledby":`simple-tab-${o}`,hidden:s!==o,id:`simple-tabpanel-${o}`,role:"tabpanel",...r,children:n}):null};function ln(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const dn=({onClose:e})=>{const[n,s]=m.useState(0),[o]=Me(i=>[i.isAdmin,i.setPubKey]),r=Ie(i=>i.customSchemaFlag),a=he(i=>i.appMetaData),l=()=>o?"Admin Settings":"Settings",p=({children:i})=>t.jsxs(un,{children:[t.jsx(g,{direction:"row",pt:3,children:t.jsx(xn,{"data-testid":"setting-label",children:l()})}),i]}),d=(i,u)=>{s(u)},c=[...o?[{label:"General",component:Ot}]:[],{label:"Appearance",component:It},...o&&r?[{label:"Graph Blueprint",component:rn}]:[]];return t.jsxs(mn,{direction:"column",children:[t.jsx(p,{children:t.jsx(pn,{"aria-label":"settings tabs",onChange:d,value:n,children:c.map((i,u)=>t.jsx(hn,{disableRipple:!0,label:i.label,...ln(u)},i.label))})}),c.map((i,u)=>t.jsx(cn,{index:u,value:n,children:t.jsx(i.component,{initialValues:a,onClose:e})},i.label))]})},pn=b(Le)`
  && {
    .MuiTabs-indicator {
      background: ${k.primaryBlue};
    }
    width: 90%;
  }
`,un=b(g)`
  background: rgb(22, 24, 30);
  padding: 40px 36px 0 0;
`,hn=b(Ve)`
  && {
    padding: 30px 0 24px;
    color: ${k.GRAY6};
    margin-left: 10px;
    font-family: Barlow;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    text-align: center;

    &.Mui-selected {
      color: ${k.white};
    }
    flex-grow: 1;
  }
`,gn=b(g)`
  display: flex;
  flex: 1;
  min-height: 495px;
  max-height: 495px;
  height: fit-content;
  min-width: 480px;
`,mn=b(g)`
  min-height: 0;
  flex: 1;
`,xn=b(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: Barlow;
  padding: 0 0 0 36px;
`,Ln=()=>{const{close:e}=L("settings"),{visible:n}=L("addItem");return n?null:t.jsx(ge,{background:"BG1",id:"settings",noWrap:!0,onClose:e,children:t.jsx(dn,{onClose:e})})};export{Ln as SettingsModal};
