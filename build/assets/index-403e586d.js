import{r as b,a1 as cu,x as Ae,j as F,R as tp,a8 as S_,J as M,a9 as O_,c as np,s as $e,a as Te,F as Nt,B as sp,u as Os,b as rp,k as go,n as A_,T as ip,d as _o,aa as op,l as D_,e as $o,D as ap,ab as R_,ac as P_,i as M_,A as I_,ad as N_,ae as Ah}from"./index-35a701a0.js";import{u as qe,a as dn,m as lu,b as nc,e as cp,q as $_,c as F_,L as lp,T as uu,f as hu,P as L_,t as up,d as j_,H as sc,g as hp,h as V_,i as fp,C as Dh,j as Rh,k as z_}from"./index-196d7356.js";import{P as ke}from"./index-7aa1536e.js";import{m as Ph,H as U_,E as B_,n as As,h as ut,o as dp,I as pp,p as W_,q as Mh,D as q_,r as H_,R as Y_,g as G_,s as X_,N as fl,P as Z_,t as mp,v as K_,O as Q_}from"./index-01e71115.js";import{T as J_}from"./TextareaAutosize-a7447def.js";import{a as Fo,b as ey,V as _e,c as ty,d as ny,M as hr,e as we,f as sy,B as ry,S as gp,P as Nc,g as iy,h as oa,i as Ms,T as rc,j as da,k as oy,l as Ih,m as yo,Q as ay,G as cy,C as fu,n as ly,o as _p,p as uy,q as hy,r as fy,E as dy,s as py,t as my,u as ic,v as Nh,w as yp,x as vp}from"./three.module-10ab52a5.js";import{T as gy}from"./index-99b9ff7a.js";import{u as _y}from"./index-cdd3560a.js";import{C as yy}from"./ClipLoader-e08b4007.js";const vy=["top","right","bottom","left"],_s=Math.min,Lt=Math.max,pa=Math.round,Lo=Math.floor,ys=s=>({x:s,y:s}),by={left:"right",right:"left",bottom:"top",top:"bottom"},xy={start:"end",end:"start"};function dl(s,e,t){return Lt(s,_s(e,t))}function qn(s,e){return typeof s=="function"?s(e):s}function Hn(s){return s.split("-")[0]}function Kr(s){return s.split("-")[1]}function du(s){return s==="x"?"y":"x"}function pu(s){return s==="y"?"height":"width"}function Qr(s){return["top","bottom"].includes(Hn(s))?"y":"x"}function mu(s){return du(Qr(s))}function wy(s,e,t){t===void 0&&(t=!1);const n=Kr(s),r=mu(s),i=pu(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ma(o)),[o,ma(o)]}function ky(s){const e=ma(s);return[pl(s),e,pl(e)]}function pl(s){return s.replace(/start|end/g,e=>xy[e])}function Ty(s,e,t){const n=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(s){case"top":case"bottom":return t?e?r:n:e?n:r;case"left":case"right":return e?i:o;default:return[]}}function Ey(s,e,t,n){const r=Kr(s);let i=Ty(Hn(s),t==="start",n);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(pl)))),i}function ma(s){return s.replace(/left|right|bottom|top/g,e=>by[e])}function Cy(s){return{top:0,right:0,bottom:0,left:0,...s}}function bp(s){return typeof s!="number"?Cy(s):{top:s,right:s,bottom:s,left:s}}function ga(s){return{...s,top:s.y,left:s.x,right:s.x+s.width,bottom:s.y+s.height}}function $h(s,e,t){let{reference:n,floating:r}=s;const i=Qr(e),o=mu(e),a=pu(o),c=Hn(e),l=i==="y",u=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,f=n[a]/2-r[a]/2;let p;switch(c){case"top":p={x:u,y:n.y-r.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-r.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Kr(e)){case"start":p[o]-=f*(t&&l?-1:1);break;case"end":p[o]+=f*(t&&l?-1:1);break}return p}const Sy=async(s,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:s,floating:e,strategy:r}),{x:u,y:h}=$h(l,n,c),f=n,p={},m=0;for(let d=0;d<a.length;d++){const{name:g,fn:_}=a[d],{x:k,y:x,data:v,reset:y}=await _({x:u,y:h,initialPlacement:n,placement:f,strategy:r,middlewareData:p,rects:l,platform:o,elements:{reference:s,floating:e}});if(u=k??u,h=x??h,p={...p,[g]:{...p[g],...v}},y&&m<=50){m++,typeof y=="object"&&(y.placement&&(f=y.placement),y.rects&&(l=y.rects===!0?await o.getElementRects({reference:s,floating:e,strategy:r}):y.rects),{x:u,y:h}=$h(l,f,c)),d=-1;continue}}return{x:u,y:h,placement:f,strategy:r,middlewareData:p}};async function Li(s,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:o,elements:a,strategy:c}=s,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=qn(e,s),m=bp(p),g=a[f?h==="floating"?"reference":"floating":h],_=ga(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(g)))==null||t?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),k=h==="floating"?{...o.floating,x:n,y:r}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),v=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},y=ga(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:k,offsetParent:x,strategy:c}):k);return{top:(_.top-y.top+m.top)/v.y,bottom:(y.bottom-_.bottom+m.bottom)/v.y,left:(_.left-y.left+m.left)/v.x,right:(y.right-_.right+m.right)/v.x}}const Fh=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:r,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=qn(s,e)||{};if(l==null)return{};const h=bp(u),f={x:t,y:n},p=mu(r),m=pu(p),d=await o.getDimensions(l),g=p==="y",_=g?"top":"left",k=g?"bottom":"right",x=g?"clientHeight":"clientWidth",v=i.reference[m]+i.reference[p]-f[p]-i.floating[m],y=f[p]-i.reference[p],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=T?T[x]:0;(!E||!await(o.isElement==null?void 0:o.isElement(T)))&&(E=a.floating[x]||i.floating[m]);const w=v/2-y/2,C=E/2-d[m]/2-1,S=_s(h[_],C),D=_s(h[k],C),O=S,j=E-d[m]-D,V=E/2-d[m]/2+w,W=dl(O,V,j),B=!c.arrow&&Kr(r)!=null&&V!=W&&i.reference[m]/2-(V<O?S:D)-d[m]/2<0,z=B?V<O?V-O:V-j:0;return{[p]:f[p]+z,data:{[p]:W,centerOffset:V-W-z,...B&&{alignmentOffset:z}},reset:B}}}),Oy=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:d=!0,...g}=qn(s,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const _=Hn(r),k=Hn(a)===a,x=await(c.isRTL==null?void 0:c.isRTL(l.floating)),v=f||(k||!d?[ma(a)]:ky(a));!f&&m!=="none"&&v.push(...Ey(a,d,m,x));const y=[a,...v],T=await Li(e,g),E=[];let w=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&E.push(T[_]),h){const O=wy(r,o,x);E.push(T[O[0]],T[O[1]])}if(w=[...w,{placement:r,overflows:E}],!E.every(O=>O<=0)){var C,S;const O=(((C=i.flip)==null?void 0:C.index)||0)+1,j=y[O];if(j)return{data:{index:O,overflows:w},reset:{placement:j}};let V=(S=w.filter(W=>W.overflows[0]<=0).sort((W,B)=>W.overflows[1]-B.overflows[1])[0])==null?void 0:S.placement;if(!V)switch(p){case"bestFit":{var D;const W=(D=w.map(B=>[B.placement,B.overflows.filter(z=>z>0).reduce((z,U)=>z+U,0)]).sort((B,z)=>B[1]-z[1])[0])==null?void 0:D[0];W&&(V=W);break}case"initialPlacement":V=a;break}if(r!==V)return{reset:{placement:V}}}return{}}}};function Lh(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function jh(s){return vy.some(e=>s[e]>=0)}const Ay=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=qn(s,e);switch(n){case"referenceHidden":{const i=await Li(e,{...r,elementContext:"reference"}),o=Lh(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jh(o)}}}case"escaped":{const i=await Li(e,{...r,altBoundary:!0}),o=Lh(i,t.floating);return{data:{escapedOffsets:o,escaped:jh(o)}}}default:return{}}}}};async function Dy(s,e){const{placement:t,platform:n,elements:r}=s,i=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=Hn(t),a=Kr(t),c=Qr(t)==="y",l=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=qn(e,s);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const Ry=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:r,y:i,placement:o,middlewareData:a}=e,c=await Dy(e,s);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},Py=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:_,y:k}=g;return{x:_,y:k}}},...c}=qn(s,e),l={x:t,y:n},u=await Li(e,c),h=Qr(Hn(r)),f=du(h);let p=l[f],m=l[h];if(i){const g=f==="y"?"top":"left",_=f==="y"?"bottom":"right",k=p+u[g],x=p-u[_];p=dl(k,p,x)}if(o){const g=h==="y"?"top":"left",_=h==="y"?"bottom":"right",k=m+u[g],x=m-u[_];m=dl(k,m,x)}const d=a.fn({...e,[f]:p,[h]:m});return{...d,data:{x:d.x-t,y:d.y-n}}}}},My=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=qn(s,e),u={x:t,y:n},h=Qr(r),f=du(h);let p=u[f],m=u[h];const d=qn(a,e),g=typeof d=="number"?{mainAxis:d,crossAxis:0}:{mainAxis:0,crossAxis:0,...d};if(c){const x=f==="y"?"height":"width",v=i.reference[f]-i.floating[x]+g.mainAxis,y=i.reference[f]+i.reference[x]-g.mainAxis;p<v?p=v:p>y&&(p=y)}if(l){var _,k;const x=f==="y"?"width":"height",v=["top","left"].includes(Hn(r)),y=i.reference[h]-i.floating[x]+(v&&((_=o.offset)==null?void 0:_[h])||0)+(v?0:g.crossAxis),T=i.reference[h]+i.reference[x]+(v?0:((k=o.offset)==null?void 0:k[h])||0)-(v?g.crossAxis:0);m<y?m=y:m>T&&(m=T)}return{[f]:p,[h]:m}}}},Iy=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){const{placement:t,rects:n,platform:r,elements:i}=e,{apply:o=()=>{},...a}=qn(s,e),c=await Li(e,a),l=Hn(t),u=Kr(t),h=Qr(t)==="y",{width:f,height:p}=n.floating;let m,d;l==="top"||l==="bottom"?(m=l,d=u===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(d=l,m=u==="end"?"top":"bottom");const g=p-c[m],_=f-c[d],k=!e.middlewareData.shift;let x=g,v=_;if(h){const T=f-c.left-c.right;v=u||k?_s(_,T):T}else{const T=p-c.top-c.bottom;x=u||k?_s(g,T):T}if(k&&!u){const T=Lt(c.left,0),E=Lt(c.right,0),w=Lt(c.top,0),C=Lt(c.bottom,0);h?v=f-2*(T!==0||E!==0?T+E:Lt(c.left,c.right)):x=p-2*(w!==0||C!==0?w+C:Lt(c.top,c.bottom))}await o({...e,availableWidth:v,availableHeight:x});const y=await r.getDimensions(i.floating);return f!==y.width||p!==y.height?{reset:{rects:!0}}:{}}}};function vs(s){return xp(s)?(s.nodeName||"").toLowerCase():"#document"}function zt(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function Jn(s){var e;return(e=(xp(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function xp(s){return s instanceof Node||s instanceof zt(s).Node}function Yn(s){return s instanceof Element||s instanceof zt(s).Element}function Cn(s){return s instanceof HTMLElement||s instanceof zt(s).HTMLElement}function Vh(s){return typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof zt(s).ShadowRoot}function vo(s){const{overflow:e,overflowX:t,overflowY:n,display:r}=Qt(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(r)}function Ny(s){return["table","td","th"].includes(vs(s))}function gu(s){const e=_u(),t=Qt(s);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function $y(s){let e=$r(s);for(;Cn(e)&&!oc(e);){if(gu(e))return e;e=$r(e)}return null}function _u(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(s){return["html","body","#document"].includes(vs(s))}function Qt(s){return zt(s).getComputedStyle(s)}function ac(s){return Yn(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.pageXOffset,scrollTop:s.pageYOffset}}function $r(s){if(vs(s)==="html")return s;const e=s.assignedSlot||s.parentNode||Vh(s)&&s.host||Jn(s);return Vh(e)?e.host:e}function wp(s){const e=$r(s);return oc(e)?s.ownerDocument?s.ownerDocument.body:s.body:Cn(e)&&vo(e)?e:wp(e)}function ji(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=wp(s),i=r===((n=s.ownerDocument)==null?void 0:n.body),o=zt(r);return i?e.concat(o,o.visualViewport||[],vo(r)?r:[],o.frameElement&&t?ji(o.frameElement):[]):e.concat(r,ji(r,[],t))}function kp(s){const e=Qt(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Cn(s),i=r?s.offsetWidth:t,o=r?s.offsetHeight:n,a=pa(t)!==i||pa(n)!==o;return a&&(t=i,n=o),{width:t,height:n,$:a}}function yu(s){return Yn(s)?s:s.contextElement}function Or(s){const e=yu(s);if(!Cn(e))return ys(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:i}=kp(e);let o=(i?pa(t.width):t.width)/n,a=(i?pa(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Fy=ys(0);function Tp(s){const e=zt(s);return!_u()||!e.visualViewport?Fy:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ly(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==zt(s)?!1:e}function Zs(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=s.getBoundingClientRect(),i=yu(s);let o=ys(1);e&&(n?Yn(n)&&(o=Or(n)):o=Or(s));const a=Ly(i,t,n)?Tp(i):ys(0);let c=(r.left+a.x)/o.x,l=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(i){const f=zt(i),p=n&&Yn(n)?zt(n):n;let m=f.frameElement;for(;m&&n&&p!==f;){const d=Or(m),g=m.getBoundingClientRect(),_=Qt(m),k=g.left+(m.clientLeft+parseFloat(_.paddingLeft))*d.x,x=g.top+(m.clientTop+parseFloat(_.paddingTop))*d.y;c*=d.x,l*=d.y,u*=d.x,h*=d.y,c+=k,l+=x,m=zt(m).frameElement}}return ga({width:u,height:h,x:c,y:l})}function jy(s){let{rect:e,offsetParent:t,strategy:n}=s;const r=Cn(t),i=Jn(t);if(t===i)return e;let o={scrollLeft:0,scrollTop:0},a=ys(1);const c=ys(0);if((r||!r&&n!=="fixed")&&((vs(t)!=="body"||vo(i))&&(o=ac(t)),Cn(t))){const l=Zs(t);a=Or(t),c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+c.x,y:e.y*a.y-o.scrollTop*a.y+c.y}}function Vy(s){return Array.from(s.getClientRects())}function Ep(s){return Zs(Jn(s)).left+ac(s).scrollLeft}function zy(s){const e=Jn(s),t=ac(s),n=s.ownerDocument.body,r=Lt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Lt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Ep(s);const a=-t.scrollTop;return Qt(n).direction==="rtl"&&(o+=Lt(e.clientWidth,n.clientWidth)-r),{width:r,height:i,x:o,y:a}}function Uy(s,e){const t=zt(s),n=Jn(s),r=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,c=0;if(r){i=r.width,o=r.height;const l=_u();(!l||l&&e==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:a,y:c}}function By(s,e){const t=Zs(s,!0,e==="fixed"),n=t.top+s.clientTop,r=t.left+s.clientLeft,i=Cn(s)?Or(s):ys(1),o=s.clientWidth*i.x,a=s.clientHeight*i.y,c=r*i.x,l=n*i.y;return{width:o,height:a,x:c,y:l}}function zh(s,e,t){let n;if(e==="viewport")n=Uy(s,t);else if(e==="document")n=zy(Jn(s));else if(Yn(e))n=By(e,t);else{const r=Tp(s);n={...e,x:e.x-r.x,y:e.y-r.y}}return ga(n)}function Cp(s,e){const t=$r(s);return t===e||!Yn(t)||oc(t)?!1:Qt(t).position==="fixed"||Cp(t,e)}function Wy(s,e){const t=e.get(s);if(t)return t;let n=ji(s,[],!1).filter(a=>Yn(a)&&vs(a)!=="body"),r=null;const i=Qt(s).position==="fixed";let o=i?$r(s):s;for(;Yn(o)&&!oc(o);){const a=Qt(o),c=gu(o);!c&&a.position==="fixed"&&(r=null),(i?!c&&!r:!c&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||vo(o)&&!c&&Cp(s,o))?n=n.filter(u=>u!==o):r=a,o=$r(o)}return e.set(s,n),n}function qy(s){let{element:e,boundary:t,rootBoundary:n,strategy:r}=s;const o=[...t==="clippingAncestors"?Wy(e,this._c):[].concat(t),n],a=o[0],c=o.reduce((l,u)=>{const h=zh(e,u,r);return l.top=Lt(h.top,l.top),l.right=_s(h.right,l.right),l.bottom=_s(h.bottom,l.bottom),l.left=Lt(h.left,l.left),l},zh(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Hy(s){return kp(s)}function Yy(s,e,t){const n=Cn(e),r=Jn(e),i=t==="fixed",o=Zs(s,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=ys(0);if(n||!n&&!i)if((vs(e)!=="body"||vo(r))&&(a=ac(e)),n){const l=Zs(e,!0,i,e);c.x=l.x+e.clientLeft,c.y=l.y+e.clientTop}else r&&(c.x=Ep(r));return{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Uh(s,e){return!Cn(s)||Qt(s).position==="fixed"?null:e?e(s):s.offsetParent}function Sp(s,e){const t=zt(s);if(!Cn(s))return t;let n=Uh(s,e);for(;n&&Ny(n)&&Qt(n).position==="static";)n=Uh(n,e);return n&&(vs(n)==="html"||vs(n)==="body"&&Qt(n).position==="static"&&!gu(n))?t:n||$y(s)||t}const Gy=async function(s){let{reference:e,floating:t,strategy:n}=s;const r=this.getOffsetParent||Sp,i=this.getDimensions;return{reference:Yy(e,await r(t),n),floating:{x:0,y:0,...await i(t)}}};function Xy(s){return Qt(s).direction==="rtl"}const Zy={convertOffsetParentRelativeRectToViewportRelativeRect:jy,getDocumentElement:Jn,getClippingRect:qy,getOffsetParent:Sp,getElementRects:Gy,getClientRects:Vy,getDimensions:Hy,getScale:Or,isElement:Yn,isRTL:Xy};function Ky(s,e){let t=null,n;const r=Jn(s);function i(){clearTimeout(n),t&&t.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const{left:l,top:u,width:h,height:f}=s.getBoundingClientRect();if(a||e(),!h||!f)return;const p=Lo(u),m=Lo(r.clientWidth-(l+h)),d=Lo(r.clientHeight-(u+f)),g=Lo(l),k={rootMargin:-p+"px "+-m+"px "+-d+"px "+-g+"px",threshold:Lt(0,_s(1,c))||1};let x=!0;function v(y){const T=y[0].intersectionRatio;if(T!==c){if(!x)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{t=new IntersectionObserver(v,{...k,root:r.ownerDocument})}catch{t=new IntersectionObserver(v,k)}t.observe(s)}return o(!0),i}function Qy(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=yu(s),u=r||i?[...l?ji(l):[],...ji(e)]:[];u.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),i&&_.addEventListener("resize",t)});const h=l&&a?Ky(l,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(_=>{let[k]=_;k&&k.target===l&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),t()}),l&&!c&&p.observe(l),p.observe(e));let m,d=c?Zs(s):null;c&&g();function g(){const _=Zs(s);d&&(_.x!==d.x||_.y!==d.y||_.width!==d.width||_.height!==d.height)&&t(),d=_,m=requestAnimationFrame(g)}return t(),()=>{u.forEach(_=>{r&&_.removeEventListener("scroll",t),i&&_.removeEventListener("resize",t)}),h&&h(),p&&p.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const Jy=(s,e,t)=>{const n=new Map,r={platform:Zy,...t},i={...r.platform,_c:n};return Sy(s,e,{...r,platform:i})},e1=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:r}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?Fh({element:n.current,padding:r}).fn(t):{}:n?Fh({element:n,padding:r}).fn(t):{}}}};var aa=typeof document<"u"?b.useLayoutEffect:b.useEffect;function _a(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,r;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!_a(s[n],e[n]))return!1;return!0}if(r=Object.keys(s),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const i=r[n];if(!(i==="_owner"&&s.$$typeof)&&!_a(s[i],e[i]))return!1}return!0}return s!==s&&e!==e}function Op(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Bh(s,e){const t=Op(s);return Math.round(e*t)/t}function Wh(s){const e=b.useRef(s);return aa(()=>{e.current=s}),e}function t1(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=s,[u,h]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(n);_a(f,n)||p(n);const[m,d]=b.useState(null),[g,_]=b.useState(null),k=b.useCallback(B=>{B!=T.current&&(T.current=B,d(B))},[d]),x=b.useCallback(B=>{B!==E.current&&(E.current=B,_(B))},[_]),v=i||m,y=o||g,T=b.useRef(null),E=b.useRef(null),w=b.useRef(u),C=Wh(c),S=Wh(r),D=b.useCallback(()=>{if(!T.current||!E.current)return;const B={placement:e,strategy:t,middleware:f};S.current&&(B.platform=S.current),Jy(T.current,E.current,B).then(z=>{const U={...z,isPositioned:!0};O.current&&!_a(w.current,U)&&(w.current=U,cu.flushSync(()=>{h(U)}))})},[f,e,t,S]);aa(()=>{l===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[l]);const O=b.useRef(!1);aa(()=>(O.current=!0,()=>{O.current=!1}),[]),aa(()=>{if(v&&(T.current=v),y&&(E.current=y),v&&y){if(C.current)return C.current(v,y,D);D()}},[v,y,D,C]);const j=b.useMemo(()=>({reference:T,floating:E,setReference:k,setFloating:x}),[k,x]),V=b.useMemo(()=>({reference:v,floating:y}),[v,y]),W=b.useMemo(()=>{const B={position:t,left:0,top:0};if(!V.floating)return B;const z=Bh(V.floating,u.x),U=Bh(V.floating,u.y);return a?{...B,transform:"translate("+z+"px, "+U+"px)",...Op(V.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:U}},[t,a,V.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:D,refs:j,elements:V,floatingStyles:W}),[u,D,j,V,W])}function n1(s){let e;const t=new Set,n=(l,u)=>{const h=typeof l=="function"?l(e):l;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),t.forEach(p=>p(e,f))}},r=()=>e,i=(l,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function p(){const m=u(e);if(!h(f,m)){const d=f;l(f=m,d)}}return t.add(p),()=>t.delete(p)},c={setState:n,getState:r,subscribe:(l,u,h)=>u||h?i(l,u,h):(t.add(l),()=>t.delete(l)),destroy:()=>t.clear()};return e=s(n,r,c),c}const s1=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),qh=s1?b.useEffect:b.useLayoutEffect;function r1(s){const e=typeof s=="function"?n1(s):s,t=(n=e.getState,r=Object.is)=>{const[,i]=b.useReducer(g=>g+1,0),o=e.getState(),a=b.useRef(o),c=b.useRef(n),l=b.useRef(r),u=b.useRef(!1),h=b.useRef();h.current===void 0&&(h.current=n(o));let f,p=!1;(a.current!==o||c.current!==n||l.current!==r||u.current)&&(f=n(o),p=!r(h.current,f)),qh(()=>{p&&(h.current=f),a.current=o,c.current=n,l.current=r,u.current=!1});const m=b.useRef(o);qh(()=>{const g=()=>{try{const k=e.getState(),x=c.current(k);l.current(h.current,x)||(a.current=k,h.current=x,i())}catch{u.current=!0,i()}},_=e.subscribe(g);return e.getState()!==m.current&&g(),_},[]);const d=p?f:h.current;return b.useDebugValue(d),d};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}let ci=0;const i1=r1(s=>(Fo.onStart=(e,t,n)=>{s({active:!0,item:e,loaded:t,total:n,progress:(t-ci)/(n-ci)*100})},Fo.onLoad=()=>{s({active:!1})},Fo.onError=e=>s(t=>({errors:[...t.errors,e]})),Fo.onProgress=(e,t,n)=>{t===n&&(ci=n),s({active:!0,item:e,loaded:t,total:n,progress:(t-ci)/(n-ci)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),o1=s=>`Loading ${s.toFixed(2)}%`;function a1({containerStyles:s,innerStyles:e,barStyles:t,dataStyles:n,dataInterpolation:r=o1,initialState:i=o=>o}){const{active:o,progress:a}=i1(),c=b.useRef(0),l=b.useRef(0),u=b.useRef(null),[h,f]=b.useState(i(o));b.useEffect(()=>{let m;return o!==h&&(m=setTimeout(()=>f(o),300)),()=>clearTimeout(m)},[h,o]);const p=b.useCallback(()=>{u.current&&(c.current+=(a-c.current)/2,(c.current>.95*a||a===100)&&(c.current=a),u.current.innerText=r(c.current),c.current<a&&(l.current=requestAnimationFrame(p)))},[r,a]);return b.useEffect(()=>(p(),()=>cancelAnimationFrame(l.current)),[p]),h?b.createElement("div",{style:{...jo.container,opacity:o?1:0,...s}},b.createElement("div",null,b.createElement("div",{style:{...jo.inner,...e}},b.createElement("div",{style:{...jo.bar,transform:`scaleX(${a/100})`,...t}}),b.createElement("span",{ref:u,style:{...jo.data,...n}})))):null}const jo={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},$c=new ey,Fc=new _e,fr=new _e,nn=new _e,Mn=new _e,yn=new _e,In=new _e,Nn=new _e,li=new _e,ui=new _e,hi=new _e,Vo=new _e,fi=new _e,di=new _e,pi=new _e;class c1{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new _e,this.endPoint=new _e,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum($c,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){fr.copy(e),fr.x=Math.min(e.x,t.x),fr.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),nn.setFromMatrixPosition(this.camera.matrixWorld),Mn.copy(fr),yn.set(t.x,fr.y,0),In.copy(t),Nn.set(fr.x,t.y,0),Mn.unproject(this.camera),yn.unproject(this.camera),In.unproject(this.camera),Nn.unproject(this.camera),fi.copy(Mn).sub(nn),di.copy(yn).sub(nn),pi.copy(In).sub(nn),fi.normalize(),di.normalize(),pi.normalize(),fi.multiplyScalar(this.deep),di.multiplyScalar(this.deep),pi.multiplyScalar(this.deep),fi.add(nn),di.add(nn),pi.add(nn);var n=$c.planes;n[0].setFromCoplanarPoints(nn,Mn,yn),n[1].setFromCoplanarPoints(nn,yn,In),n[2].setFromCoplanarPoints(In,Nn,nn),n[3].setFromCoplanarPoints(Nn,Mn,nn),n[4].setFromCoplanarPoints(yn,In,Nn),n[5].setFromCoplanarPoints(pi,di,fi),n[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);Mn.set(r,i,-1),yn.set(o,i,-1),In.set(o,a,-1),Nn.set(r,a,-1),li.set(r,i,1),ui.set(o,i,1),hi.set(o,a,1),Vo.set(r,a,1),Mn.unproject(this.camera),yn.unproject(this.camera),In.unproject(this.camera),Nn.unproject(this.camera),li.unproject(this.camera),ui.unproject(this.camera),hi.unproject(this.camera),Vo.unproject(this.camera);var n=$c.planes;n[0].setFromCoplanarPoints(Mn,li,ui),n[1].setFromCoplanarPoints(yn,ui,hi),n[2].setFromCoplanarPoints(hi,Vo,Nn),n[3].setFromCoplanarPoints(Vo,li,Mn),n[4].setFromCoplanarPoints(yn,In,Nn),n[5].setFromCoplanarPoints(hi,ui,li),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),Fc.copy(t.geometry.boundingSphere.center),Fc.applyMatrix4(t.matrixWorld),e.containsPoint(Fc)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}class Ai extends ty{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,n,r){const i=this,o=new ny(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(a){try{t(i.parse(a))}catch(c){r?r(c):console.error(c),i.manager.itemError(e)}},n,r)}parse(e){const t=this;function n(N,L){if(N.nodeType!==1)return;const A=v(N);let I=!0,Y=null;switch(N.nodeName){case"svg":break;case"style":i(N);break;case"g":L=m(N,L);break;case"path":L=m(N,L),N.hasAttribute("d")&&(Y=r(N));break;case"rect":L=m(N,L),Y=c(N);break;case"polygon":L=m(N,L),Y=l(N);break;case"polyline":L=m(N,L),Y=u(N);break;case"circle":L=m(N,L),Y=h(N);break;case"ellipse":L=m(N,L),Y=f(N);break;case"line":L=m(N,L),Y=p(N);break;case"defs":I=!1;break;case"mask":I=!1;break;case"use":L=m(N,L);const $=N.href.baseVal.substring(1),q=N.viewportElement.getElementById($);q?n(q,L):console.warn("SVGLoader: 'use node' references non-existent node id: "+$);break}if(Y&&(L.fill!==void 0&&L.fill!=="none"&&Y.color.setStyle(L.fill),T(Y,X),S.push(Y),Y.userData={node:N,style:L}),I){const $=N.childNodes;for(let q=0;q<$.length;q++)n($[q],L)}A&&(O.pop(),O.length>0?X.copy(O[O.length-1]):X.identity())}function r(N){const L=new Ms,A=new we,I=new we,Y=new we;let $=!0,q=!1;const re=N.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let ie=0,ne=re.length;ie<ne;ie++){const me=re[ie],te=me.charAt(0),H=me.substr(1).trim();$===!0&&(q=!0,$=!1);let P;switch(te){case"M":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2)A.x=P[R+0],A.y=P[R+1],I.x=A.x,I.y=A.y,R===0?L.moveTo(A.x,A.y):L.lineTo(A.x,A.y),R===0&&Y.copy(A);break;case"H":P=g(H);for(let R=0,Q=P.length;R<Q;R++)A.x=P[R],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"V":P=g(H);for(let R=0,Q=P.length;R<Q;R++)A.y=P[R],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"L":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2)A.x=P[R+0],A.y=P[R+1],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"C":P=g(H);for(let R=0,Q=P.length;R<Q;R+=6)L.bezierCurveTo(P[R+0],P[R+1],P[R+2],P[R+3],P[R+4],P[R+5]),I.x=P[R+2],I.y=P[R+3],A.x=P[R+4],A.y=P[R+5],R===0&&q===!0&&Y.copy(A);break;case"S":P=g(H);for(let R=0,Q=P.length;R<Q;R+=4)L.bezierCurveTo(d(A.x,I.x),d(A.y,I.y),P[R+0],P[R+1],P[R+2],P[R+3]),I.x=P[R+0],I.y=P[R+1],A.x=P[R+2],A.y=P[R+3],R===0&&q===!0&&Y.copy(A);break;case"Q":P=g(H);for(let R=0,Q=P.length;R<Q;R+=4)L.quadraticCurveTo(P[R+0],P[R+1],P[R+2],P[R+3]),I.x=P[R+0],I.y=P[R+1],A.x=P[R+2],A.y=P[R+3],R===0&&q===!0&&Y.copy(A);break;case"T":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2){const se=d(A.x,I.x),ce=d(A.y,I.y);L.quadraticCurveTo(se,ce,P[R+0],P[R+1]),I.x=se,I.y=ce,A.x=P[R+0],A.y=P[R+1],R===0&&q===!0&&Y.copy(A)}break;case"A":P=g(H,[3,4],7);for(let R=0,Q=P.length;R<Q;R+=7){if(P[R+5]==A.x&&P[R+6]==A.y)continue;const se=A.clone();A.x=P[R+5],A.y=P[R+6],I.x=A.x,I.y=A.y,o(L,P[R],P[R+1],P[R+2],P[R+3],P[R+4],se,A),R===0&&q===!0&&Y.copy(A)}break;case"m":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2)A.x+=P[R+0],A.y+=P[R+1],I.x=A.x,I.y=A.y,R===0?L.moveTo(A.x,A.y):L.lineTo(A.x,A.y),R===0&&Y.copy(A);break;case"h":P=g(H);for(let R=0,Q=P.length;R<Q;R++)A.x+=P[R],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"v":P=g(H);for(let R=0,Q=P.length;R<Q;R++)A.y+=P[R],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"l":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2)A.x+=P[R+0],A.y+=P[R+1],I.x=A.x,I.y=A.y,L.lineTo(A.x,A.y),R===0&&q===!0&&Y.copy(A);break;case"c":P=g(H);for(let R=0,Q=P.length;R<Q;R+=6)L.bezierCurveTo(A.x+P[R+0],A.y+P[R+1],A.x+P[R+2],A.y+P[R+3],A.x+P[R+4],A.y+P[R+5]),I.x=A.x+P[R+2],I.y=A.y+P[R+3],A.x+=P[R+4],A.y+=P[R+5],R===0&&q===!0&&Y.copy(A);break;case"s":P=g(H);for(let R=0,Q=P.length;R<Q;R+=4)L.bezierCurveTo(d(A.x,I.x),d(A.y,I.y),A.x+P[R+0],A.y+P[R+1],A.x+P[R+2],A.y+P[R+3]),I.x=A.x+P[R+0],I.y=A.y+P[R+1],A.x+=P[R+2],A.y+=P[R+3],R===0&&q===!0&&Y.copy(A);break;case"q":P=g(H);for(let R=0,Q=P.length;R<Q;R+=4)L.quadraticCurveTo(A.x+P[R+0],A.y+P[R+1],A.x+P[R+2],A.y+P[R+3]),I.x=A.x+P[R+0],I.y=A.y+P[R+1],A.x+=P[R+2],A.y+=P[R+3],R===0&&q===!0&&Y.copy(A);break;case"t":P=g(H);for(let R=0,Q=P.length;R<Q;R+=2){const se=d(A.x,I.x),ce=d(A.y,I.y);L.quadraticCurveTo(se,ce,A.x+P[R+0],A.y+P[R+1]),I.x=se,I.y=ce,A.x=A.x+P[R+0],A.y=A.y+P[R+1],R===0&&q===!0&&Y.copy(A)}break;case"a":P=g(H,[3,4],7);for(let R=0,Q=P.length;R<Q;R+=7){if(P[R+5]==0&&P[R+6]==0)continue;const se=A.clone();A.x+=P[R+5],A.y+=P[R+6],I.x=A.x,I.y=A.y,o(L,P[R],P[R+1],P[R+2],P[R+3],P[R+4],se,A),R===0&&q===!0&&Y.copy(A)}break;case"Z":case"z":L.currentPath.autoClose=!0,L.currentPath.curves.length>0&&(A.copy(Y),L.currentPath.currentPoint.copy(A),$=!0);break;default:console.warn(me)}q=!1}return L}function i(N){if(!(!N.sheet||!N.sheet.cssRules||!N.sheet.cssRules.length))for(let L=0;L<N.sheet.cssRules.length;L++){const A=N.sheet.cssRules[L];if(A.type!==1)continue;const I=A.selectorText.split(/,/gm).filter(Boolean).map(Y=>Y.trim());for(let Y=0;Y<I.length;Y++)D[I[Y]]=Object.assign(D[I[Y]]||{},A.style)}}function o(N,L,A,I,Y,$,q,oe){if(L==0||A==0){N.lineTo(oe.x,oe.y);return}I=I*Math.PI/180,L=Math.abs(L),A=Math.abs(A);const re=(q.x-oe.x)/2,ie=(q.y-oe.y)/2,ne=Math.cos(I)*re+Math.sin(I)*ie,me=-Math.sin(I)*re+Math.cos(I)*ie;let te=L*L,H=A*A;const P=ne*ne,R=me*me,Q=P/te+R/H;if(Q>1){const rs=Math.sqrt(Q);L=rs*L,A=rs*A,te=L*L,H=A*A}const se=te*R+H*P,ce=(te*H-se)/se;let ye=Math.sqrt(Math.max(0,ce));Y===$&&(ye=-ye);const Qe=ye*L*me/A,J=-ye*A*ne/L,fe=Math.cos(I)*Qe-Math.sin(I)*J+(q.x+oe.x)/2,Je=Math.sin(I)*Qe+Math.cos(I)*J+(q.y+oe.y)/2,it=a(1,0,(ne-Qe)/L,(me-J)/A),$t=a((ne-Qe)/L,(me-J)/A,(-ne-Qe)/L,(-me-J)/A)%(Math.PI*2);N.currentPath.absellipse(fe,Je,L,A,it,it+$t,$===0,I)}function a(N,L,A,I){const Y=N*A+L*I,$=Math.sqrt(N*N+L*L)*Math.sqrt(A*A+I*I);let q=Math.acos(Math.max(-1,Math.min(1,Y/$)));return N*I-L*A<0&&(q=-q),q}function c(N){const L=x(N.getAttribute("x")||0),A=x(N.getAttribute("y")||0),I=x(N.getAttribute("rx")||N.getAttribute("ry")||0),Y=x(N.getAttribute("ry")||N.getAttribute("rx")||0),$=x(N.getAttribute("width")),q=x(N.getAttribute("height")),oe=1-.551915024494,re=new Ms;return re.moveTo(L+I,A),re.lineTo(L+$-I,A),(I!==0||Y!==0)&&re.bezierCurveTo(L+$-I*oe,A,L+$,A+Y*oe,L+$,A+Y),re.lineTo(L+$,A+q-Y),(I!==0||Y!==0)&&re.bezierCurveTo(L+$,A+q-Y*oe,L+$-I*oe,A+q,L+$-I,A+q),re.lineTo(L+I,A+q),(I!==0||Y!==0)&&re.bezierCurveTo(L+I*oe,A+q,L,A+q-Y*oe,L,A+q-Y),re.lineTo(L,A+Y),(I!==0||Y!==0)&&re.bezierCurveTo(L,A+Y*oe,L+I*oe,A,L+I,A),re}function l(N){function L($,q,oe){const re=x(q),ie=x(oe);Y===0?I.moveTo(re,ie):I.lineTo(re,ie),Y++}const A=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,I=new Ms;let Y=0;return N.getAttribute("points").replace(A,L),I.currentPath.autoClose=!0,I}function u(N){function L($,q,oe){const re=x(q),ie=x(oe);Y===0?I.moveTo(re,ie):I.lineTo(re,ie),Y++}const A=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,I=new Ms;let Y=0;return N.getAttribute("points").replace(A,L),I.currentPath.autoClose=!1,I}function h(N){const L=x(N.getAttribute("cx")||0),A=x(N.getAttribute("cy")||0),I=x(N.getAttribute("r")||0),Y=new Nc;Y.absarc(L,A,I,0,Math.PI*2);const $=new Ms;return $.subPaths.push(Y),$}function f(N){const L=x(N.getAttribute("cx")||0),A=x(N.getAttribute("cy")||0),I=x(N.getAttribute("rx")||0),Y=x(N.getAttribute("ry")||0),$=new Nc;$.absellipse(L,A,I,Y,0,Math.PI*2);const q=new Ms;return q.subPaths.push($),q}function p(N){const L=x(N.getAttribute("x1")||0),A=x(N.getAttribute("y1")||0),I=x(N.getAttribute("x2")||0),Y=x(N.getAttribute("y2")||0),$=new Ms;return $.moveTo(L,A),$.lineTo(I,Y),$.currentPath.autoClose=!1,$}function m(N,L){L=Object.assign({},L);let A={};if(N.hasAttribute("class")){const q=N.getAttribute("class").split(/\s/).filter(Boolean).map(oe=>oe.trim());for(let oe=0;oe<q.length;oe++)A=Object.assign(A,D["."+q[oe]])}N.hasAttribute("id")&&(A=Object.assign(A,D["#"+N.getAttribute("id")]));function I(q,oe,re){re===void 0&&(re=function(ne){return ne.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ne}),N.hasAttribute(q)&&(L[oe]=re(N.getAttribute(q))),A[q]&&(L[oe]=re(A[q])),N.style&&N.style[q]!==""&&(L[oe]=re(N.style[q]))}function Y(q){return Math.max(0,Math.min(1,x(q)))}function $(q){return Math.max(0,x(q))}return I("fill","fill"),I("fill-opacity","fillOpacity",Y),I("fill-rule","fillRule"),I("opacity","opacity",Y),I("stroke","stroke"),I("stroke-opacity","strokeOpacity",Y),I("stroke-width","strokeWidth",$),I("stroke-linejoin","strokeLineJoin"),I("stroke-linecap","strokeLineCap"),I("stroke-miterlimit","strokeMiterLimit",$),I("visibility","visibility"),L}function d(N,L){return N-(L-N)}function g(N,L,A){if(typeof N!="string")throw new TypeError("Invalid input: "+typeof N);const I={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Y=0,$=1,q=2,oe=3;let re=Y,ie=!0,ne="",me="";const te=[];function H(se,ce,ye){const Qe=new SyntaxError('Unexpected character "'+se+'" at index '+ce+".");throw Qe.partial=ye,Qe}function P(){ne!==""&&(me===""?te.push(Number(ne)):te.push(Number(ne)*Math.pow(10,Number(me)))),ne="",me=""}let R;const Q=N.length;for(let se=0;se<Q;se++){if(R=N[se],Array.isArray(L)&&L.includes(te.length%A)&&I.FLAGS.test(R)){re=$,ne=R,P();continue}if(re===Y){if(I.WHITESPACE.test(R))continue;if(I.DIGIT.test(R)||I.SIGN.test(R)){re=$,ne=R;continue}if(I.POINT.test(R)){re=q,ne=R;continue}I.COMMA.test(R)&&(ie&&H(R,se,te),ie=!0)}if(re===$){if(I.DIGIT.test(R)){ne+=R;continue}if(I.POINT.test(R)){ne+=R,re=q;continue}if(I.EXP.test(R)){re=oe;continue}I.SIGN.test(R)&&ne.length===1&&I.SIGN.test(ne[0])&&H(R,se,te)}if(re===q){if(I.DIGIT.test(R)){ne+=R;continue}if(I.EXP.test(R)){re=oe;continue}I.POINT.test(R)&&ne[ne.length-1]==="."&&H(R,se,te)}if(re===oe){if(I.DIGIT.test(R)){me+=R;continue}if(I.SIGN.test(R)){if(me===""){me+=R;continue}me.length===1&&I.SIGN.test(me)&&H(R,se,te)}}I.WHITESPACE.test(R)?(P(),re=Y,ie=!1):I.COMMA.test(R)?(P(),re=Y,ie=!0):I.SIGN.test(R)?(P(),re=$,ne=R):I.POINT.test(R)?(P(),re=q,ne=R):H(R,se,te)}return P(),te}const _=["mm","cm","in","pt","pc","px"],k={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function x(N){let L="px";if(typeof N=="string"||N instanceof String)for(let I=0,Y=_.length;I<Y;I++){const $=_[I];if(N.endsWith($)){L=$,N=N.substring(0,N.length-$.length);break}}let A;return L==="px"&&t.defaultUnit!=="px"?A=k.in[t.defaultUnit]/t.defaultDPI:(A=k[L][t.defaultUnit],A<0&&(A=k[L].in*t.defaultDPI)),A*parseFloat(N)}function v(N){if(!(N.hasAttribute("transform")||N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))))return null;const L=y(N);return O.length>0&&L.premultiply(O[O.length-1]),X.copy(L),O.push(L),L}function y(N){const L=new hr,A=j;if(N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))){const I=x(N.getAttribute("x")),Y=x(N.getAttribute("y"));L.translate(I,Y)}if(N.hasAttribute("transform")){const I=N.getAttribute("transform").split(")");for(let Y=I.length-1;Y>=0;Y--){const $=I[Y].trim();if($==="")continue;const q=$.indexOf("("),oe=$.length;if(q>0&&q<oe){const re=$.substr(0,q),ie=g($.substr(q+1,oe-q-1));switch(A.identity(),re){case"translate":if(ie.length>=1){const ne=ie[0];let me=ne;ie.length>=2&&(me=ie[1]),A.translate(ne,me)}break;case"rotate":if(ie.length>=1){let ne=0,me=0,te=0;ne=-ie[0]*Math.PI/180,ie.length>=3&&(me=ie[1],te=ie[2]),V.identity().translate(-me,-te),W.identity().rotate(ne),B.multiplyMatrices(W,V),V.identity().translate(me,te),A.multiplyMatrices(V,B)}break;case"scale":if(ie.length>=1){const ne=ie[0];let me=ne;ie.length>=2&&(me=ie[1]),A.scale(ne,me)}break;case"skewX":ie.length===1&&A.set(1,Math.tan(ie[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":ie.length===1&&A.set(1,0,0,Math.tan(ie[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":ie.length===6&&A.set(ie[0],ie[2],ie[4],ie[1],ie[3],ie[5],0,0,1);break}}L.premultiply(A)}}return L}function T(N,L){function A($){U.set($.x,$.y,1).applyMatrix3(L),$.set(U.x,U.y)}const I=E(L),Y=N.subPaths;for(let $=0,q=Y.length;$<q;$++){const re=Y[$].curves;for(let ie=0;ie<re.length;ie++){const ne=re[ie];ne.isLineCurve?(A(ne.v1),A(ne.v2)):ne.isCubicBezierCurve?(A(ne.v0),A(ne.v1),A(ne.v2),A(ne.v3)):ne.isQuadraticBezierCurve?(A(ne.v0),A(ne.v1),A(ne.v2)):ne.isEllipseCurve&&(I&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),z.set(ne.aX,ne.aY),A(z),ne.aX=z.x,ne.aY=z.y,ne.xRadius*=w(L),ne.yRadius*=C(L))}}}function E(N){return N.elements[1]!==0||N.elements[3]!==0}function w(N){const L=N.elements;return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function C(N){const L=N.elements;return Math.sqrt(L[3]*L[3]+L[4]*L[4])}const S=[],D={},O=[],j=new hr,V=new hr,W=new hr,B=new hr,z=new we,U=new _e,X=new hr,K=new DOMParser().parseFromString(e,"image/svg+xml");return n(K.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:S,xml:K.documentElement}}static createShapes(e){const n={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:n.ORIGIN,t:0};function i(g,_,k,x){const v=g.x,y=_.x,T=k.x,E=x.x,w=g.y,C=_.y,S=k.y,D=x.y,O=(E-T)*(w-S)-(D-S)*(v-T),j=(y-v)*(w-S)-(C-w)*(v-T),V=(D-S)*(y-v)-(E-T)*(C-w),W=O/V,B=j/V;if(V===0&&O!==0||W<=0||W>=1||B<0||B>1)return null;if(O===0&&V===0){for(let z=0;z<2;z++)if(o(z===0?k:x,g,_),r.loc==n.ORIGIN){const U=z===0?k:x;return{x:U.x,y:U.y,t:r.t}}else if(r.loc==n.BETWEEN){const U=+(v+r.t*(y-v)).toPrecision(10),X=+(w+r.t*(C-w)).toPrecision(10);return{x:U,y:X,t:r.t}}return null}else{for(let X=0;X<2;X++)if(o(X===0?k:x,g,_),r.loc==n.ORIGIN){const K=X===0?k:x;return{x:K.x,y:K.y,t:r.t}}const z=+(v+W*(y-v)).toPrecision(10),U=+(w+W*(C-w)).toPrecision(10);return{x:z,y:U,t:W}}}function o(g,_,k){const x=k.x-_.x,v=k.y-_.y,y=g.x-_.x,T=g.y-_.y,E=x*T-y*v;if(g.x===_.x&&g.y===_.y){r.loc=n.ORIGIN,r.t=0;return}if(g.x===k.x&&g.y===k.y){r.loc=n.DESTINATION,r.t=1;return}if(E<-Number.EPSILON){r.loc=n.LEFT;return}if(E>Number.EPSILON){r.loc=n.RIGHT;return}if(x*y<0||v*T<0){r.loc=n.BEHIND;return}if(Math.sqrt(x*x+v*v)<Math.sqrt(y*y+T*T)){r.loc=n.BEYOND;return}let w;x!==0?w=y/x:w=T/v,r.loc=n.BETWEEN,r.t=w}function a(g,_){const k=[],x=[];for(let v=1;v<g.length;v++){const y=g[v-1],T=g[v];for(let E=1;E<_.length;E++){const w=_[E-1],C=_[E],S=i(y,T,w,C);S!==null&&k.find(D=>D.t<=S.t+Number.EPSILON&&D.t>=S.t-Number.EPSILON)===void 0&&(k.push(S),x.push(new we(S.x,S.y)))}}return x}function c(g,_,k){const x=new we;_.getCenter(x);const v=[];return k.forEach(y=>{y.boundingBox.containsPoint(x)&&a(g,y.points).forEach(E=>{v.push({identifier:y.identifier,isCW:y.isCW,point:E})})}),v.sort((y,T)=>y.point.x-T.point.x),v}function l(g,_,k,x,v){(v==null||v==="")&&(v="nonzero");const y=new we;g.boundingBox.getCenter(y);const T=[new we(k,y.y),new we(x,y.y)],E=c(T,g.boundingBox,_);E.sort((j,V)=>j.point.x-V.point.x);const w=[],C=[];E.forEach(j=>{j.identifier===g.identifier?w.push(j):C.push(j)});const S=w[0].point.x,D=[];let O=0;for(;O<C.length&&C[O].point.x<S;)D.length>0&&D[D.length-1]===C[O].identifier?D.pop():D.push(C[O].identifier),O++;if(D.push(g.identifier),v==="evenodd"){const j=D.length%2===0,V=D[D.length-2];return{identifier:g.identifier,isHole:j,for:V}}else if(v==="nonzero"){let j=!0,V=null,W=null;for(let B=0;B<D.length;B++){const z=D[B];j?(W=_[z].isCW,j=!1,V=z):W!==_[z].isCW&&(W=_[z].isCW,j=!0)}return{identifier:g.identifier,isHole:j,for:V}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let u=0,h=999999999,f=-999999999,p=e.subPaths.map(g=>{const _=g.getPoints();let k=-999999999,x=999999999,v=-999999999,y=999999999;for(let T=0;T<_.length;T++){const E=_[T];E.y>k&&(k=E.y),E.y<x&&(x=E.y),E.x>v&&(v=E.x),E.x<y&&(y=E.x)}return f<=v&&(f=v+1),h>=y&&(h=y-1),{curves:g.curves,points:_,isCW:sy.isClockWise(_),identifier:u++,boundingBox:new ry(new we(y,x),new we(v,k))}});p=p.filter(g=>g.points.length>1);const m=p.map(g=>l(g,p,h,f,e.userData.style.fillRule)),d=[];return p.forEach(g=>{if(!m[g.identifier].isHole){const k=new gp;k.curves=g.curves,m.filter(v=>v.isHole&&v.for===g.identifier).forEach(v=>{const y=p[v.identifier],T=new Nc;T.curves=y.curves,k.holes.push(T)}),d.push(k)}}),d}static getStrokeStyle(e,t,n,r,i){return e=e!==void 0?e:1,t=t!==void 0?t:"#000",n=n!==void 0?n:"miter",r=r!==void 0?r:"butt",i=i!==void 0?i:4,{strokeColor:t,strokeWidth:e,strokeLineJoin:n,strokeLineCap:r,strokeMiterLimit:i}}static pointsToStroke(e,t,n,r){const i=[],o=[],a=[];if(Ai.pointsToStrokeWithBuffers(e,t,n,r,i,o,a)===0)return null;const c=new iy;return c.setAttribute("position",new oa(i,3)),c.setAttribute("normal",new oa(o,3)),c.setAttribute("uv",new oa(a,2)),c}static pointsToStrokeWithBuffers(e,t,n,r,i,o,a,c){const l=new we,u=new we,h=new we,f=new we,p=new we,m=new we,d=new we,g=new we,_=new we,k=new we,x=new we,v=new we,y=new we,T=new we,E=new we,w=new we,C=new we;n=n!==void 0?n:12,r=r!==void 0?r:.001,c=c!==void 0?c:0,e=me(e);const S=e.length;if(S<2)return 0;const D=e[0].equals(e[S-1]);let O,j=e[0],V;const W=t.strokeWidth/2,B=1/(S-1);let z=0,U,X,K,ee,N=!1,L=0,A=c*3,I=c*2;Y(e[0],e[1],l).multiplyScalar(W),g.copy(e[0]).sub(l),_.copy(e[0]).add(l),k.copy(g),x.copy(_);for(let te=1;te<S;te++){O=e[te],te===S-1?D?V=e[1]:V=void 0:V=e[te+1];const H=l;if(Y(j,O,H),h.copy(H).multiplyScalar(W),v.copy(O).sub(h),y.copy(O).add(h),U=z+B,X=!1,V!==void 0){Y(O,V,u),h.copy(u).multiplyScalar(W),T.copy(O).sub(h),E.copy(O).add(h),K=!0,h.subVectors(V,j),H.dot(h)<0&&(K=!1),te===1&&(N=K),h.subVectors(V,O),h.normalize();const P=Math.abs(H.dot(h));if(P!==0){const R=W/P;h.multiplyScalar(-R),f.subVectors(O,j),p.copy(f).setLength(R).add(h),w.copy(p).negate();const Q=p.length(),se=f.length();f.divideScalar(se),m.subVectors(V,O);const ce=m.length();switch(m.divideScalar(ce),f.dot(w)<se&&m.dot(w)<ce&&(X=!0),C.copy(p).add(O),w.add(O),ee=!1,X?K?(E.copy(w),y.copy(w)):(T.copy(w),v.copy(w)):oe(),t.strokeLineJoin){case"bevel":re(K,X,U);break;case"round":ie(K,X),K?q(O,v,T,U,0):q(O,E,y,U,1);break;case"miter":case"miter-clip":default:const ye=W*t.strokeMiterLimit/Q;if(ye<1)if(t.strokeLineJoin!=="miter-clip"){re(K,X,U);break}else ie(K,X),K?(m.subVectors(C,v).multiplyScalar(ye).add(v),d.subVectors(C,T).multiplyScalar(ye).add(T),$(v,U,0),$(m,U,0),$(O,U,.5),$(O,U,.5),$(m,U,0),$(d,U,0),$(O,U,.5),$(d,U,0),$(T,U,0)):(m.subVectors(C,y).multiplyScalar(ye).add(y),d.subVectors(C,E).multiplyScalar(ye).add(E),$(y,U,1),$(m,U,1),$(O,U,.5),$(O,U,.5),$(m,U,1),$(d,U,1),$(O,U,.5),$(d,U,1),$(E,U,1));else X?(K?($(_,z,1),$(g,z,0),$(C,U,0),$(_,z,1),$(C,U,0),$(w,U,1)):($(_,z,1),$(g,z,0),$(C,U,1),$(g,z,0),$(w,U,0),$(C,U,1)),K?T.copy(C):E.copy(C)):K?($(v,U,0),$(C,U,0),$(O,U,.5),$(O,U,.5),$(C,U,0),$(T,U,0)):($(y,U,1),$(C,U,1),$(O,U,.5),$(O,U,.5),$(C,U,1),$(E,U,1)),ee=!0;break}}else oe()}else oe();!D&&te===S-1&&ne(e[0],k,x,K,!0,z),z=U,j=O,g.copy(T),_.copy(E)}if(!D)ne(O,v,y,K,!1,U);else if(X&&i){let te=C,H=w;N!==K&&(te=w,H=C),K?(ee||N)&&(H.toArray(i,0*3),H.toArray(i,3*3),ee&&te.toArray(i,1*3)):(ee||!N)&&(H.toArray(i,1*3),H.toArray(i,3*3),ee&&te.toArray(i,0*3))}return L;function Y(te,H,P){return P.subVectors(H,te),P.set(-P.y,P.x).normalize()}function $(te,H,P){i&&(i[A]=te.x,i[A+1]=te.y,i[A+2]=0,o&&(o[A]=0,o[A+1]=0,o[A+2]=1),A+=3,a&&(a[I]=H,a[I+1]=P,I+=2)),L+=3}function q(te,H,P,R,Q){l.copy(H).sub(te).normalize(),u.copy(P).sub(te).normalize();let se=Math.PI;const ce=l.dot(u);Math.abs(ce)<1&&(se=Math.abs(Math.acos(ce))),se/=n,h.copy(H);for(let ye=0,Qe=n-1;ye<Qe;ye++)f.copy(h).rotateAround(te,se),$(h,R,Q),$(f,R,Q),$(te,R,.5),h.copy(f);$(f,R,Q),$(P,R,Q),$(te,R,.5)}function oe(){$(_,z,1),$(g,z,0),$(v,U,0),$(_,z,1),$(v,U,1),$(y,U,0)}function re(te,H,P){H?te?($(_,z,1),$(g,z,0),$(v,U,0),$(_,z,1),$(v,U,0),$(w,U,1),$(v,P,0),$(T,P,0),$(w,P,.5)):($(_,z,1),$(g,z,0),$(y,U,1),$(g,z,0),$(w,U,0),$(y,U,1),$(y,P,1),$(E,P,0),$(w,P,.5)):te?($(v,P,0),$(T,P,0),$(O,P,.5)):($(y,P,1),$(E,P,0),$(O,P,.5))}function ie(te,H){H&&(te?($(_,z,1),$(g,z,0),$(v,U,0),$(_,z,1),$(v,U,0),$(w,U,1),$(v,z,0),$(O,U,.5),$(w,U,1),$(O,U,.5),$(T,z,0),$(w,U,1)):($(_,z,1),$(g,z,0),$(y,U,1),$(g,z,0),$(w,U,0),$(y,U,1),$(y,z,1),$(w,U,0),$(O,U,.5),$(O,U,.5),$(w,U,0),$(E,z,1)))}function ne(te,H,P,R,Q,se){switch(t.strokeLineCap){case"round":Q?q(te,P,H,se,.5):q(te,H,P,se,.5);break;case"square":if(Q)l.subVectors(H,te),u.set(l.y,-l.x),h.addVectors(l,u).add(te),f.subVectors(u,l).add(te),R?(h.toArray(i,1*3),f.toArray(i,0*3),f.toArray(i,3*3)):(h.toArray(i,1*3),h.toArray(i,3*3),f.toArray(i,0*3));else{l.subVectors(P,te),u.set(l.y,-l.x),h.addVectors(l,u).add(te),f.subVectors(u,l).add(te);const ce=i.length;R?(h.toArray(i,ce-1*3),f.toArray(i,ce-2*3),f.toArray(i,ce-4*3)):(h.toArray(i,ce-2*3),f.toArray(i,ce-1*3),f.toArray(i,ce-4*3))}break}}function me(te){let H=!1;for(let R=1,Q=te.length-1;R<Q;R++)if(te[R].distanceTo(te[R+1])<r){H=!0;break}if(!H)return te;const P=[];P.push(te[0]);for(let R=1,Q=te.length-1;R<Q;R++)te[R].distanceTo(te[R+1])>=r&&P.push(te[R]);return P.push(te[te.length-1]),P}}}function l1(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(s[t[n]],e[t[n]]))return!1;return!0}const u1=b.createContext([]);function h1({box:s,multiple:e,children:t,onChange:n,border:r="1px solid #55aaff",backgroundColor:i="rgba(75, 160, 255, 0.1)",filter:o=c=>c,...a}){const{setEvents:c,camera:l,raycaster:u,gl:h,controls:f,size:p,get:m}=qe(),[d,g]=b.useState(!1),[_,k]=b.useReducer((T,{object:E,shift:w})=>E===void 0?[]:Array.isArray(E)?E:w?T.includes(E)?T.filter(C=>C!==E):[E,...T]:T[0]===E?[]:[E],[]);b.useEffect(()=>void(n==null?void 0:n(_)),[_]);const x=b.useCallback(T=>{T.stopPropagation(),k({object:o([T.object])[0],shift:e&&T.shiftKey})},[]),v=b.useCallback(T=>!d&&k({}),[d]),y=b.useRef(null);return b.useEffect(()=>{if(!s||!e)return;const T=new c1(l,y.current),E=document.createElement("div");E.style.pointerEvents="none",E.style.border=r,E.style.backgroundColor=i,E.style.position="fixed";const w=new we,C=new we,S=new we,D=m().events.enabled,O=f==null?void 0:f.enabled;let j=!1;function V(N,L){const{offsetX:A,offsetY:I}=N,{width:Y,height:$}=p;L.set(A/Y*2-1,-(I/$)*2+1)}function W(N){var L;f&&(f.enabled=!1),c({enabled:!1}),j=!0,(L=h.domElement.parentElement)==null||L.appendChild(E),E.style.left=`${N.clientX}px`,E.style.top=`${N.clientY}px`,E.style.width="0px",E.style.height="0px",w.x=N.clientX,w.y=N.clientY}function B(N){S.x=Math.max(w.x,N.clientX),S.y=Math.max(w.y,N.clientY),C.x=Math.min(w.x,N.clientX),C.y=Math.min(w.y,N.clientY),E.style.left=`${C.x}px`,E.style.top=`${C.y}px`,E.style.width=`${S.x-C.x}px`,E.style.height=`${S.y-C.y}px`}function z(){if(j){var N;f&&(f.enabled=O),c({enabled:D}),j=!1,(N=E.parentElement)==null||N.removeChild(E)}}function U(N){N.shiftKey&&(W(N),V(N,T.startPoint))}let X=[];function K(N){if(j){B(N),V(N,T.endPoint);const L=T.select().sort(A=>A.uuid).filter(A=>A.isMesh);l1(L,X)||(X=L,k({object:o(L)}))}}function ee(N){j&&z()}return document.addEventListener("pointerdown",U,{passive:!0}),document.addEventListener("pointermove",K,{passive:!0,capture:!0}),document.addEventListener("pointerup",ee,{passive:!0}),()=>{document.removeEventListener("pointerdown",U),document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",ee)}},[p.width,p.height,u,l,f,h]),b.createElement("group",Ae({ref:y,onClick:x,onPointerOver:()=>g(!0),onPointerOut:()=>g(!1),onPointerMissed:v},a),b.createElement(u1.Provider,{value:_},t))}const vu=b.forwardRef(function({follow:e=!0,lockX:t=!1,lockY:n=!1,lockZ:r=!1,...i},o){const a=b.useRef();return dn(({camera:c})=>{if(!e||!a.current)return;const l=a.current.rotation.clone();c.getWorldQuaternion(a.current.quaternion),t&&(a.current.rotation.x=l.x),n&&(a.current.rotation.y=l.y),r&&(a.current.rotation.z=l.z)}),b.createElement("group",Ae({ref:lu([a,o])},i))}),Hh=s=>s===Object(s)&&!Array.isArray(s)&&typeof s!="function";function Bs(s,e){const t=qe(r=>r.gl),n=nc(rc,Hh(s)?Object.values(s):s);if(b.useLayoutEffect(()=>{e==null||e(n)},[e]),b.useEffect(()=>{(Array.isArray(n)?n:[n]).forEach(t.initTexture)},[t,n]),Hh(s)){const r=Object.keys(s),i={};return r.forEach(o=>Object.assign(i,{[o]:n[r.indexOf(o)]})),i}else return n}Bs.preload=s=>nc.preload(rc,s);Bs.clear=s=>nc.clear(rc,s);const f1=b.forwardRef(function({src:e,skipFill:t,skipStrokes:n,fillMaterial:r,strokeMaterial:i,fillMeshProps:o,strokeMeshProps:a,...c},l){const u=nc(Ai,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),h=b.useMemo(()=>n?[]:u.paths.map(f=>{var p;return((p=f.userData)==null?void 0:p.style.stroke)===void 0||f.userData.style.stroke==="none"?null:f.subPaths.map(m=>Ai.pointsToStroke(m.getPoints(),f.userData.style))}),[u,n]);return b.useEffect(()=>()=>h.forEach(f=>f&&f.map(p=>p.dispose())),[h]),b.createElement("object3D",Ae({ref:l},c),b.createElement("object3D",{scale:[1,-1,1]},u.paths.map((f,p)=>{var m,d;return b.createElement(b.Fragment,{key:p},!t&&((m=f.userData)==null?void 0:m.style.fill)!==void 0&&f.userData.style.fill!=="none"&&Ai.createShapes(f).map((g,_)=>b.createElement("mesh",Ae({key:_},o),b.createElement("shapeGeometry",{args:[g]}),b.createElement("meshBasicMaterial",Ae({color:f.userData.style.fill,opacity:f.userData.style.fillOpacity,transparent:!0,side:da,depthWrite:!1},r)))),!n&&((d=f.userData)==null?void 0:d.style.stroke)!==void 0&&f.userData.style.stroke!=="none"&&f.subPaths.map((g,_)=>b.createElement("mesh",Ae({key:_,geometry:h[p][_]},a),b.createElement("meshBasicMaterial",Ae({color:f.userData.style.stroke,opacity:f.userData.style.strokeOpacity,transparent:!0,side:da,depthWrite:!1},i)))))})))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const de={LEFT:1,RIGHT:2,MIDDLE:4},G=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),dr={NONE:0,IN:1,OUT:-1};function Is(s){return s.isPerspectiveCamera}function os(s){return s.isOrthographicCamera}const pr=Math.PI*2,Yh=Math.PI/2,Ap=1e-5,mi=Math.PI/180;function sn(s,e,t){return Math.max(e,Math.min(t,s))}function Fe(s,e=Ap){return Math.abs(s)<e}function Ee(s,e,t=Ap){return Fe(s-e,t)}function Gh(s,e){return Math.round(s/e)*e}function gi(s){return isFinite(s)?s:s<0?-Number.MAX_VALUE:Number.MAX_VALUE}function _i(s){return Math.abs(s)<Number.MAX_VALUE?s:s*(1/0)}function zo(s,e,t,n,r=1/0,i){n=Math.max(1e-4,n);const o=2/n,a=o*i,c=1/(1+a+.48*a*a+.235*a*a*a);let l=s-e;const u=e,h=r*n;l=sn(l,-h,h),e=s-l;const f=(t.value+o*l)*i;t.value=(t.value-o*f)*c;let p=e+(l+f)*c;return u-s>0==p>u&&(p=u,t.value=(p-u)/i),p}function Xh(s,e,t,n,r=1/0,i,o){n=Math.max(1e-4,n);const a=2/n,c=a*i,l=1/(1+c+.48*c*c+.235*c*c*c);let u=e.x,h=e.y,f=e.z,p=s.x-u,m=s.y-h,d=s.z-f;const g=u,_=h,k=f,x=r*n,v=x*x,y=p*p+m*m+d*d;if(y>v){const W=Math.sqrt(y);p=p/W*x,m=m/W*x,d=d/W*x}u=s.x-p,h=s.y-m,f=s.z-d;const T=(t.x+a*p)*i,E=(t.y+a*m)*i,w=(t.z+a*d)*i;t.x=(t.x-a*T)*l,t.y=(t.y-a*E)*l,t.z=(t.z-a*w)*l,o.x=u+(p+T)*l,o.y=h+(m+E)*l,o.z=f+(d+w)*l;const C=g-s.x,S=_-s.y,D=k-s.z,O=o.x-g,j=o.y-_,V=o.z-k;return C*O+S*j+D*V>0&&(o.x=g,o.y=_,o.z=k,t.x=(o.x-g)/i,t.y=(o.y-_)/i,t.z=(o.z-k)/i),o}function Lc(s,e){e.set(0,0),s.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=s.length,e.y/=s.length}function jc(s,e){return os(s)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class d1{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}const p1="2.7.3",Uo=1/8,Dp=typeof window<"u",m1=Dp&&/Mac/.test(navigator.platform),g1=!(Dp&&"PointerEvent"in window);let ue,Zh,Bo,Vc,Et,ge,xe,mr,yi,vn,bn,Ns,Kh,Qh,qt,vi,gr,Jh,zc,ef,Uc,Bc,Wo,Wc=class ml extends d1{static install(e){ue=e.THREE,Zh=Object.freeze(new ue.Vector3(0,0,0)),Bo=Object.freeze(new ue.Vector3(0,1,0)),Vc=Object.freeze(new ue.Vector3(0,0,1)),Et=new ue.Vector2,ge=new ue.Vector3,xe=new ue.Vector3,mr=new ue.Vector3,yi=new ue.Vector3,vn=new ue.Vector3,bn=new ue.Vector3,Ns=new ue.Vector3,Kh=new ue.Vector3,Qh=new ue.Vector3,qt=new ue.Spherical,vi=new ue.Spherical,gr=new ue.Box3,Jh=new ue.Box3,zc=new ue.Sphere,ef=new ue.Quaternion,Uc=new ue.Quaternion,Bc=new ue.Matrix4,Wo=new ue.Raycaster}static get ACTION(){return G}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=G.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=dr.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ue.Vector3,this._focalOffsetVelocity=new ue.Vector3,this._zoomVelocity={value:0},this._truckInternal=(v,y,T)=>{let E,w;if(Is(this._camera)){const C=ge.copy(this._camera.position).sub(this._target),S=this._camera.getEffectiveFOV()*mi,D=C.length()*Math.tan(S*.5);E=this.truckSpeed*v*D/this._elementRect.height,w=this.truckSpeed*y*D/this._elementRect.height}else if(os(this._camera)){const C=this._camera;E=v*(C.right-C.left)/C.zoom/this._elementRect.width,w=y*(C.top-C.bottom)/C.zoom/this._elementRect.height}else return;this.verticalDragToForward?(T?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(E,0,!0),this.forward(-w,!0)):T?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y+w,this._focalOffsetEnd.z,!0):this.truck(E,w,!0)},this._rotateInternal=(v,y)=>{const T=pr*this.azimuthRotateSpeed*v/this._elementRect.height,E=pr*this.polarRotateSpeed*y/this._elementRect.height;this.rotate(T,E,!0)},this._dollyInternal=(v,y,T)=>{const E=Math.pow(.95,-v*this.dollySpeed),w=this._sphericalEnd.radius,C=this._sphericalEnd.radius*E,S=sn(C,this.minDistance,this.maxDistance),D=S-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(D,!0),this._dollyToNoClamp(S,!0)):this._dollyToNoClamp(S,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:S)-w,this._dollyControlCoord.set(y,T)),this._lastDollyDirection=Math.sign(-v)},this._zoomInternal=(v,y,T)=>{const E=Math.pow(.95,v*this.dollySpeed),w=this._zoom,C=this._zoom*E;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-w,this._dollyControlCoord.set(y,T))},typeof ue>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new ue.Quaternion().setFromUnitVectors(this._camera.up,Bo),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=G.NONE,this._target=new ue.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ue.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ue.Spherical().setFromVector3(ge.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ue.Vector3,new ue.Vector3,new ue.Vector3,new ue.Vector3],this._updateNearPlaneCorners(),this._boundary=new ue.Box3(new ue.Vector3(-1/0,-1/0,-1/0),new ue.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ue.Vector2,this.mouseButtons={left:G.ROTATE,middle:G.DOLLY,right:G.TRUCK,wheel:Is(this._camera)?G.DOLLY:os(this._camera)?G.ZOOM:G.NONE},this.touches={one:G.TOUCH_ROTATE,two:Is(this._camera)?G.TOUCH_DOLLY_TRUCK:os(this._camera)?G.TOUCH_ZOOM_TRUCK:G.NONE,three:G.TOUCH_TRUCK};const n=new ue.Vector2,r=new ue.Vector2,i=new ue.Vector2,o=v=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),w=v.clientX/E.width,C=v.clientY/E.height;if(w<this._interactiveArea.left||w>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const y=v.pointerType!=="mouse"?null:(v.buttons&de.LEFT)===de.LEFT?de.LEFT:(v.buttons&de.MIDDLE)===de.MIDDLE?de.MIDDLE:(v.buttons&de.RIGHT)===de.RIGHT?de.RIGHT:null;if(y!==null){const E=this._findPointerByMouseButton(y);E&&this._disposePointer(E)}if((v.buttons&de.LEFT)===de.LEFT&&this._lockedPointer)return;const T={pointerId:v.pointerId,clientX:v.clientX,clientY:v.clientY,deltaX:0,deltaY:0,mouseButton:y};this._activePointers.push(T),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,d(v)},a=v=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),w=v.clientX/E.width,C=v.clientY/E.height;if(w<this._interactiveArea.left||w>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const y=(v.buttons&de.LEFT)===de.LEFT?de.LEFT:(v.buttons&de.MIDDLE)===de.MIDDLE?de.MIDDLE:(v.buttons&de.RIGHT)===de.RIGHT?de.RIGHT:null;if(y!==null){const E=this._findPointerByMouseButton(y);E&&this._disposePointer(E)}const T={pointerId:1,clientX:v.clientX,clientY:v.clientY,deltaX:0,deltaY:0,mouseButton:(v.buttons&de.LEFT)===de.LEFT?de.LEFT:(v.buttons&de.MIDDLE)===de.LEFT?de.MIDDLE:(v.buttons&de.RIGHT)===de.LEFT?de.RIGHT:null};this._activePointers.push(T),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",l),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,d(v)},c=v=>{v.cancelable&&v.preventDefault();const y=v.pointerId,T=this._lockedPointer||this._findPointerById(y);if(T){if(T.clientX=v.clientX,T.clientY=v.clientY,T.deltaX=v.movementX,T.deltaY=v.movementY,this._state=0,v.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(v.buttons&de.LEFT)===de.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(v.buttons&de.MIDDLE)===de.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(v.buttons&de.RIGHT)===de.RIGHT&&(this._state=this._state|this.mouseButtons.right);g()}},l=v=>{const y=this._lockedPointer||this._findPointerById(1);y&&(y.clientX=v.clientX,y.clientY=v.clientY,y.deltaX=v.movementX,y.deltaY=v.movementY,this._state=0,(this._lockedPointer||(v.buttons&de.LEFT)===de.LEFT)&&(this._state=this._state|this.mouseButtons.left),(v.buttons&de.MIDDLE)===de.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(v.buttons&de.RIGHT)===de.RIGHT&&(this._state=this._state|this.mouseButtons.right),g())},u=v=>{const y=this._findPointerById(v.pointerId);if(!(y&&y===this._lockedPointer)){if(y&&this._disposePointer(y),v.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=G.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=G.NONE;_()}},h=()=>{const v=this._findPointerById(1);v&&v===this._lockedPointer||(v&&this._disposePointer(v),this._state=G.NONE,_())};let f=-1;const p=v=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===G.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),S=v.clientX/C.width,D=v.clientY/C.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}if(v.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===G.ROTATE||this.mouseButtons.wheel===G.TRUCK){const C=performance.now();f-C<1e3&&this._getClientRect(this._elementRect),f=C}const y=m1?-1:-3,T=v.deltaMode===1?v.deltaY/y:v.deltaY/(y*10),E=this.dollyToCursor?(v.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,w=this.dollyToCursor?(v.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case G.ROTATE:{this._rotateInternal(v.deltaX,v.deltaY),this._isUserControllingRotate=!0;break}case G.TRUCK:{this._truckInternal(v.deltaX,v.deltaY,!1),this._isUserControllingTruck=!0;break}case G.OFFSET:{this._truckInternal(v.deltaX,v.deltaY,!0),this._isUserControllingOffset=!0;break}case G.DOLLY:{this._dollyInternal(-T,E,w),this._isUserControllingDolly=!0;break}case G.ZOOM:{this._zoomInternal(-T,E,w),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},m=v=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===ml.ACTION.NONE){const y=v instanceof PointerEvent?v.pointerId:(v instanceof MouseEvent,0),T=this._findPointerById(y);T&&this._disposePointer(T),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}v.preventDefault()}},d=v=>{if(!this._enabled)return;if(Lc(this._activePointers,Et),this._getClientRect(this._elementRect),n.copy(Et),r.copy(Et),this._activePointers.length>=2){const T=Et.x-this._activePointers[1].clientX,E=Et.y-this._activePointers[1].clientY,w=Math.sqrt(T*T+E*E);i.set(0,w);const C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,S=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(C,S)}if(this._state=0,!v)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in v&&v.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(v.buttons&de.LEFT)===de.LEFT&&(this._state=this._state|this.mouseButtons.left),(v.buttons&de.MIDDLE)===de.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(v.buttons&de.RIGHT)===de.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&G.ROTATE)===G.ROTATE||(this._state&G.TOUCH_ROTATE)===G.TOUCH_ROTATE||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&G.TRUCK)===G.TRUCK||(this._state&G.TOUCH_TRUCK)===G.TOUCH_TRUCK||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&G.DOLLY)===G.DOLLY||(this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&G.ZOOM)===G.ZOOM||(this._state&G.TOUCH_ZOOM)===G.TOUCH_ZOOM||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&G.OFFSET)===G.OFFSET||(this._state&G.TOUCH_OFFSET)===G.TOUCH_OFFSET||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},g=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Lc(this._activePointers,Et);const y=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,T=y?-y.deltaX:r.x-Et.x,E=y?-y.deltaY:r.y-Et.y;if(r.copy(Et),((this._state&G.ROTATE)===G.ROTATE||(this._state&G.TOUCH_ROTATE)===G.TOUCH_ROTATE||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(T,E),this._isUserControllingRotate=!0),(this._state&G.DOLLY)===G.DOLLY||(this._state&G.ZOOM)===G.ZOOM){const w=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,S=this.dollyDragInverted?-1:1;(this._state&G.DOLLY)===G.DOLLY?(this._dollyInternal(S*E*Uo,w,C),this._isUserControllingDolly=!0):(this._zoomInternal(S*E*Uo,w,C),this._isUserControllingZoom=!0)}if((this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_ZOOM)===G.TOUCH_ZOOM||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_ZOOM_ROTATE)===G.TOUCH_ZOOM_ROTATE){const w=Et.x-this._activePointers[1].clientX,C=Et.y-this._activePointers[1].clientY,S=Math.sqrt(w*w+C*C),D=i.y-S;i.set(0,S);const O=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,j=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&G.TOUCH_DOLLY)===G.TOUCH_DOLLY||(this._state&G.TOUCH_DOLLY_ROTATE)===G.TOUCH_DOLLY_ROTATE||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET?(this._dollyInternal(D*Uo,O,j),this._isUserControllingDolly=!0):(this._zoomInternal(D*Uo,O,j),this._isUserControllingZoom=!0)}((this._state&G.TRUCK)===G.TRUCK||(this._state&G.TOUCH_TRUCK)===G.TOUCH_TRUCK||(this._state&G.TOUCH_DOLLY_TRUCK)===G.TOUCH_DOLLY_TRUCK||(this._state&G.TOUCH_ZOOM_TRUCK)===G.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(T,E,!1),this._isUserControllingTruck=!0),((this._state&G.OFFSET)===G.OFFSET||(this._state&G.TOUCH_OFFSET)===G.TOUCH_OFFSET||(this._state&G.TOUCH_DOLLY_OFFSET)===G.TOUCH_DOLLY_OFFSET||(this._state&G.TOUCH_ZOOM_OFFSET)===G.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(T,E,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{Lc(this._activePointers,Et),r.copy(Et),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",k),this._domElement.ownerDocument.addEventListener("pointerlockerror",x),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),d())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",k),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))};const k=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},x=()=>{this.unlockPointer()};this._addAllEventListeners=v=>{this._domElement=v,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),g1&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",p,{passive:!1}),this._domElement.addEventListener("contextmenu",m)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",p,{passive:!1}),this._domElement.removeEventListener("contextmenu",m),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",k),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))},this.cancel=()=>{this._state!==G.NONE&&(this._state=G.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=sn(e.width,0,1),this._interactiveArea.height=sn(e.height,0,1),this._interactiveArea.x=sn(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=sn(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=sn(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=sn(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||Ee(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ee(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=dr.NONE,this._changedDolly=0,this._dollyToNoClamp(sn(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Ee(o,this._spherical.radius);if(!(n>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const i=!t||Ee(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(yi).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||Ee(this._target.x,this._targetEnd.x,this.restThreshold)&&Ee(this._target.y,this._targetEnd.y,this.restThreshold)&&Ee(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=sn(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||Ee(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),vn.setFromMatrixColumn(this._camera.matrix,0),bn.setFromMatrixColumn(this._camera.matrix,1),vn.multiplyScalar(e),bn.multiplyScalar(-t);const r=ge.copy(vn).add(bn),i=xe.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){ge.setFromMatrixColumn(this._camera.matrix,0),ge.crossVectors(this._camera.up,ge),ge.multiplyScalar(e);const n=xe.copy(this._targetEnd).add(ge);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return ge.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+ge.x,this._targetEnd.y+ge.y,this._targetEnd.z+ge.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const i=ge.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||Ee(this._target.x,this._targetEnd.x,this.restThreshold)&&Ee(this._target.y,this._targetEnd.y,this.restThreshold)&&Ee(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,r=!1){const a=ge.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}={}){const c=[],l=e.isBox3?gr.copy(e):gr.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=Gh(this._sphericalEnd.theta,Yh),h=Gh(this._sphericalEnd.phi,Yh);c.push(this.rotateTo(u,h,t));const f=ge.setFromSpherical(this._sphericalEnd).normalize(),p=ef.setFromUnitVectors(f,Vc),m=Ee(Math.abs(f.y),1);m&&p.multiply(Uc.setFromAxisAngle(Bo,u)),p.multiply(this._yAxisUpSpaceInverse);const d=Jh.makeEmpty();xe.copy(l.min).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.min).setX(l.max.x).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.min).setY(l.max.y).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.max).setZ(l.min.z).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.min).setZ(l.max.z).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.max).setY(l.min.y).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.max).setX(l.min.x).applyQuaternion(p),d.expandByPoint(xe),xe.copy(l.max).applyQuaternion(p),d.expandByPoint(xe),d.min.x-=r,d.min.y-=o,d.max.x+=i,d.max.y+=a,p.setFromUnitVectors(Vc,f),m&&p.premultiply(Uc.invert()),p.premultiply(this._yAxisUpSpace);const g=d.getSize(ge),_=d.getCenter(xe).applyQuaternion(p);if(Is(this._camera)){const k=this.getDistanceToFitBox(g.x,g.y,g.z,n);c.push(this.moveTo(_.x,_.y,_.z,t)),c.push(this.dollyTo(k,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(os(this._camera)){const k=this._camera,x=k.right-k.left,v=k.top-k.bottom,y=n?Math.max(x/g.x,v/g.y):Math.min(x/g.x,v/g.y);c.push(this.moveTo(_.x,_.y,_.z,t)),c.push(this.zoomTo(y,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const n=[],i=e instanceof ue.Sphere?zc.copy(e):ml.createBoundingSphere(e,zc);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,t)),Is(this._camera)){const o=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(o,t))}else if(os(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,c=2*i.radius,l=Math.min(o/c,a/c);n.push(this.zoomTo(l,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dr.NONE,this._changedDolly=0;const c=xe.set(r,i,o),l=ge.set(e,t,n);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(l.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Ee(this._target.x,this._targetEnd.x,this.restThreshold)&&Ee(this._target.y,this._targetEnd.y,this.restThreshold)&&Ee(this._target.z,this._targetEnd.z,this.restThreshold)&&Ee(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ee(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ee(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,r,i,o,a,c,l,u,h,f,p,m=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dr.NONE,this._changedDolly=0;const d=ge.set(r,i,o),g=xe.set(e,t,n);qt.setFromVector3(g.sub(d).applyQuaternion(this._yAxisUpSpace));const _=mr.set(u,h,f),k=xe.set(a,c,l);vi.setFromVector3(k.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(d.lerp(_,p));const x=vi.theta-qt.theta,v=vi.phi-qt.phi,y=vi.radius-qt.radius;this._sphericalEnd.set(qt.radius+y*p,qt.phi+v*p,qt.theta+x*p),this.normalizeRotations(),this._needsUpdate=!0,m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const T=!m||Ee(this._target.x,this._targetEnd.x,this.restThreshold)&&Ee(this._target.y,this._targetEnd.y,this.restThreshold)&&Ee(this._target.z,this._targetEnd.z,this.restThreshold)&&Ee(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ee(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ee(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(T)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const i=this.getPosition(ge),o=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=sn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||Ee(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ee(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ee(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),vn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),bn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Ns.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=ge.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);vn.multiplyScalar(o.x),bn.multiplyScalar(o.y),Ns.multiplyScalar(o.z),ge.copy(vn).add(bn).add(Ns),ge.z=ge.z+i,this.dollyTo(i,!1),this.setFocalOffset(-ge.x,ge.y,-ge.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new ue.Vector4,typeof e=="number"?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(jc(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*mi,a=this._camera.aspect;return((r?i>a:i<a)?t:e/a)*.5/Math.tan(o*.5)+n*.5}getDistanceToFitSphere(e){if(jc(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*mi,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:n;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new ue.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new ue.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof ue.Spherical?e:new ue.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new ue.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%pr,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=pr),this._spherical.theta+=pr*Math.round((this._sphericalEnd.theta-this._spherical.theta)/pr)}reset(e=!1){if(!Ee(this._camera.up.x,this._cameraUp0.x)||!Ee(this._camera.up.y,this._cameraUp0.y)||!Ee(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(ge);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Bo),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=ge.subVectors(this._target,this._camera.position).normalize(),t=xe.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(ge);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=Kh.subVectors(this._targetEnd,this._target),o=Qh.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Fe(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=zo(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Fe(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=zo(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Fe(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=zo(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Fe(i.x)&&Fe(i.y)&&Fe(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Xh(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Fe(o.x)&&Fe(o.y)&&Fe(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Xh(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Fe(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=zo(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(Is(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,f=this._camera,p=this._getCameraDirection(yi),m=ge.copy(p).cross(f.up).normalize();m.lengthSq()===0&&(m.x=1);const d=xe.crossVectors(m,p),g=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*mi*.5),k=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,x=mr.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*g*f.aspect)).add(d.multiplyScalar(this._dollyControlCoord.y*g)),v=ge.copy(this._targetEnd).lerp(x,k),y=this._lastDollyDirection===dr.IN&&this._spherical.radius<=this.minDistance,T=this._lastDollyDirection===dr.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(y||T)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const w=xe.copy(p).multiplyScalar(-h);v.add(w)}this._boundary.clampPoint(v,v);const E=xe.subVectors(v,this._targetEnd);this._targetEnd.copy(v),this._target.add(E),this._changedDolly-=h,Fe(this._changedDolly)&&(this._changedDolly=0)}else if(os(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,f=this._camera,p=ge.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),m=xe.set(0,0,-1).applyQuaternion(f.quaternion),d=mr.copy(p).add(m.multiplyScalar(-p.dot(f.up))),_=-(this._zoom-h-this._zoom)/this._zoom,k=this._getCameraDirection(yi),x=this._targetEnd.dot(k),v=ge.copy(this._targetEnd).lerp(d,_),y=v.dot(k),T=k.multiplyScalar(y-x);v.sub(T),this._boundary.clampPoint(v,v);const E=xe.subVectors(v,this._targetEnd);this._targetEnd.copy(v),this._target.add(E),this._changedZoom-=h,Fe(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Fe(this._focalOffset.x)||!Fe(this._focalOffset.y)||!Fe(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),vn.setFromMatrixColumn(this._camera.matrix,0),bn.setFromMatrixColumn(this._camera.matrix,1),Ns.setFromMatrixColumn(this._camera.matrix,2),vn.multiplyScalar(this._focalOffset.x),bn.multiplyScalar(-this._focalOffset.y),Ns.multiplyScalar(this._focalOffset.z),ge.copy(vn).add(bn).add(Ns),this._camera.position.add(ge)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ge.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Fe(t,this.restThreshold)&&Fe(n,this.restThreshold)&&Fe(r,this.restThreshold)&&Fe(i.x,this.restThreshold)&&Fe(i.y,this.restThreshold)&&Fe(i.z,this.restThreshold)&&Fe(o.x,this.restThreshold)&&Fe(o.y,this.restThreshold)&&Fe(o.z,this.restThreshold)&&Fe(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:gi(this.maxDistance),minZoom:this.minZoom,maxZoom:gi(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:gi(this.maxPolarAngle),minAzimuthAngle:gi(this.minAzimuthAngle),maxAzimuthAngle:gi(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ge.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=_i(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=_i(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=_i(n.maxPolarAngle),this.minAzimuthAngle=_i(n.minAzimuthAngle),this.maxAzimuthAngle=_i(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),qt.setFromVector3(ge.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(qt.theta,qt.phi,t),this.dollyTo(qt.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",p1),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(r===0)return e;const i=xe.copy(t).add(e),a=this._boundary.clampPoint(i,mr).sub(i),c=a.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(n===0)return e.add(t).add(a);{const l=1+n*c/t.dot(a);return e.add(xe.copy(t).multiplyScalar(l)).add(a.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Is(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*mi,r=Math.tan(n*.5)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(os(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||jc(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(yi);Bc.lookAt(Zh,n,this._camera.up);for(let r=0;r<4;r++){const i=xe.copy(this._nearPlaneCorners[r]);i.applyMatrix4(Bc);const o=mr.addVectors(this._target,i);Wo.set(o,n),Wo.far=this._spherical.radius+1;const a=Wo.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new ue.Sphere){const n=t,r=n.center;gr.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&gr.expandByObject(o)}),gr.getCenter(r);let i=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,c=a.geometry.clone();c.applyMatrix4(a.matrixWorld);const u=c.attributes.position;for(let h=0,f=u.count;h<f;h++)ge.fromBufferAttribute(u,h),i=Math.max(i,r.distanceToSquared(ge))}),n.radius=Math.sqrt(i),n}};const Rp=b.forwardRef((s,e)=>{b.useMemo(()=>{Wc.install({THREE:oy}),cp({CameraControlsImpl:Wc})},[]);const{camera:t,domElement:n,makeDefault:r,onStart:i,onEnd:o,onChange:a,regress:c,...l}=s,u=qe(y=>y.camera),h=qe(y=>y.gl),f=qe(y=>y.invalidate),p=qe(y=>y.events),m=qe(y=>y.setEvents),d=qe(y=>y.set),g=qe(y=>y.get),_=qe(y=>y.performance),k=t||u,x=n||p.connected||h.domElement,v=b.useMemo(()=>new Wc(k),[k]);return dn((y,T)=>{v.enabled&&v.update(T)},-1),b.useEffect(()=>(v.connect(x),()=>void v.disconnect()),[x,v]),b.useEffect(()=>{const y=w=>{f(),c&&_.regress(),a&&a(w)},T=w=>{i&&i(w)},E=w=>{o&&o(w)};return v.addEventListener("update",y),v.addEventListener("controlstart",T),v.addEventListener("controlend",E),()=>{v.removeEventListener("update",y),v.removeEventListener("controlstart",T),v.removeEventListener("controlend",E)}},[v,i,o,f,m,c,a]),b.useEffect(()=>{if(r){const y=g().controls;return d({controls:v}),()=>d({controls:y})}},[r,v]),b.createElement("primitive",Ae({ref:e,object:v},l))});ke.func.isRequired,ke.arrayOf(ke.oneOfType([ke.element,ke.func])).isRequired;const tf=new yo,nf=new yo,qo=[],bi=new _p;class _1 extends cy{constructor(){super(),this.color=new fu("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const n=this.instance.current;if(!n||!n.geometry||!n.material)return;bi.geometry=n.geometry;const r=n.matrixWorld,i=n.userData.instances.indexOf(this.instanceKey);if(!(i===-1||i>n.count)){n.getMatrixAt(i,tf),nf.multiplyMatrices(r,tf),bi.matrixWorld=nf,n.material instanceof ly?bi.material.side=n.material.side:bi.material.side=n.material[0].side,bi.raycast(e,qo);for(let o=0,a=qo.length;o<a;o++){const c=qo[o];c.instanceId=i,c.object=this,t.push(c)}qo.length=0}}}const Pp=b.createContext(null),sf=new yo,rf=new yo,y1=new yo,of=new _e,af=new ay,cf=new _e,Mp=b.forwardRef(({context:s,children:e,...t},n)=>{b.useMemo(()=>cp({PositionMesh:_1}),[]);const r=b.useRef(),{subscribe:i,getParent:o}=b.useContext(s||Pp);return b.useLayoutEffect(()=>i(r),[]),b.createElement("positionMesh",Ae({instance:o(),instanceKey:r,ref:lu([n,r])},t),e)}),v1=b.forwardRef(({children:s,range:e,limit:t=1e3,frames:n=1/0,...r},i)=>{const[{context:o,instance:a}]=b.useState(()=>{const g=b.createContext(null);return{context:g,instance:b.forwardRef((_,k)=>b.createElement(Mp,Ae({context:g},_,{ref:k})))}}),c=b.useRef(null),[l,u]=b.useState([]),[[h,f]]=b.useState(()=>{const g=new Float32Array(t*16);for(let _=0;_<t;_++)y1.identity().toArray(g,_*16);return[g,new Float32Array([...new Array(t*3)].map(()=>1))]});b.useEffect(()=>{c.current.instanceMatrix.needsUpdate=!0});let p=0,m=0;dn(()=>{if(n===1/0||p<n){c.current.updateMatrix(),c.current.updateMatrixWorld(),sf.copy(c.current.matrixWorld).invert(),m=Math.min(t,e!==void 0?e:t,l.length),c.current.count=m,c.current.instanceMatrix.updateRange.count=m*16,c.current.instanceColor.updateRange.count=m*3;for(let g=0;g<l.length;g++){const _=l[g].current;_.matrixWorld.decompose(of,af,cf),rf.compose(of,af,cf).premultiply(sf),rf.toArray(h,g*16),c.current.instanceMatrix.needsUpdate=!0,_.color.toArray(f,g*3),c.current.instanceColor.needsUpdate=!0}p++}});const d=b.useMemo(()=>({getParent:()=>c,subscribe:g=>(u(_=>[..._,g]),()=>u(_=>_.filter(k=>k.current!==g.current)))}),[]);return b.createElement("instancedMesh",Ae({userData:{instances:l},matrixAutoUpdate:!1,ref:lu([i,c]),args:[null,null,0],raycast:()=>null},r),b.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:Ih}),b.createElement("instancedBufferAttribute",{attach:"instanceColor",count:f.length/3,array:f,itemSize:3,usage:Ih}),typeof s=="function"?b.createElement(o.Provider,{value:d},s(a)):b.createElement(Pp.Provider,{value:d},s))});function b1({all:s,scene:e,camera:t}){const n=qe(({gl:o})=>o),r=qe(({camera:o})=>o),i=qe(({scene:o})=>o);return b.useLayoutEffect(()=>{const o=[];s&&(e||i).traverse(l=>{l.visible===!1&&(o.push(l),l.visible=!0)}),n.compile(e||i,t||r);const a=new uy(128);new hy(.01,1e5,a).update(n,e||i),a.dispose(),o.forEach(l=>l.visible=!1)},[]),null}function lf({pixelated:s}){const e=qe(o=>o.gl),t=qe(o=>o.internal.active),n=qe(o=>o.performance.current),r=qe(o=>o.viewport.initialDpr),i=qe(o=>o.setDpr);return b.useEffect(()=>{const o=e.domElement;return()=>{t&&i(r),s&&o&&(o.style.imageRendering="auto")}},[]),b.useEffect(()=>{i(n*r),s&&e.domElement&&(e.domElement.style.imageRendering=n===1?"auto":"pixelated")},[n]),null}function uf(){const s=qe(n=>n.get),e=qe(n=>n.setEvents),t=qe(n=>n.performance.current);return b.useEffect(()=>{const n=s().events.enabled;return()=>e({enabled:n})},[]),b.useEffect(()=>e({enabled:t===1}),[t]),null}const x1=b.createContext(null);function w1({children:s,enabled:e=!0}){const[t,n]=b.useState([]),r=b.useMemo(()=>({selected:t,select:n,enabled:e}),[t,n,e]);return F.jsx(x1.Provider,{value:r,children:s})}function k1(s,e){typeof s=="function"?s(e):s!=null&&(s.current=e)}function Ip(...s){return e=>s.forEach(t=>k1(t,e))}function Jr(...s){return b.useCallback(Ip(...s),s)}const Np=b.forwardRef((s,e)=>{const{children:t,...n}=s,r=b.Children.toArray(t),i=r.find(T1);if(i){const o=i.props.children,a=r.map(c=>c===i?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:c);return b.createElement(gl,Ae({},n,{ref:e}),b.isValidElement(o)?b.cloneElement(o,void 0,a):null)}return b.createElement(gl,Ae({},n,{ref:e}),t)});Np.displayName="Slot";const gl=b.forwardRef((s,e)=>{const{children:t,...n}=s;return b.isValidElement(t)?b.cloneElement(t,{...E1(n,t.props),ref:e?Ip(e,t.ref):t.ref}):b.Children.count(t)>1?b.Children.only(null):null});gl.displayName="SlotClone";const $p=({children:s})=>b.createElement(b.Fragment,null,s);function T1(s){return b.isValidElement(s)&&s.type===$p}function E1(s,e){const t={...e};for(const n in e){const r=s[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...a)=>{i(...a),r(...a)}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...s,...t}}const C1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ir=C1.reduce((s,e)=>{const t=b.forwardRef((n,r)=>{const{asChild:i,...o}=n,a=i?Np:e;return b.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),b.createElement(a,Ae({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...s,[e]:t}},{});function S1(s,e){s&&cu.flushSync(()=>s.dispatchEvent(e))}const O1=b.forwardRef((s,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=s;return n?tp.createPortal(b.createElement(ir.div,Ae({},r,{ref:e})),n):null}),A1=O1;var hf=Object.prototype.hasOwnProperty;function Vi(s,e){var t,n;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&Vi(s[n],e[n]););return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(hf.call(s,t)&&++n&&!hf.call(e,t)||!(t in e)||!Vi(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}function bo(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(s[t[n]],e[t[n]]))return!1;return!0}var cc=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};cc.prototype._test=function(e){var t=this.fn;try{Ar(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Ar(this.modifiers.slice(),t,this)(e)}catch{return!1}};cc.prototype._check=function(e){try{Ar(this.modifiers.slice(),this.fn,this)(e)}catch{if(Ar(this.modifiers.slice(),function(n){return n},this)(!1))return}if(!Ar(this.modifiers.slice(),this.fn,this)(e))throw null};cc.prototype._testAsync=function(e){var t=this;return new Promise(function(n,r){Lp(t.modifiers.slice(),t.fn,t)(e).then(function(i){i?n(e):r(null)}).catch(function(i){return r(i)})})};function Fp(s,e){return e===void 0&&(e="simple"),typeof s=="object"?s[e]:s}function Ar(s,e,t){if(s.length){var n=s.shift(),r=Ar(s,e,t);return n.perform(r,t)}else return Fp(e)}function Lp(s,e,t){if(s.length){var n=s.shift(),r=Lp(s,e,t);return n.performAsync(r,t)}else return function(i){return Promise.resolve(Fp(e,"async")(i))}}var D1=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},bu=function(s){function e(t,n,r,i){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];s.call(this,o),s.captureStackTrace&&s.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=r,this.target=i}return s&&(e.__proto__=s),e.prototype=Object.create(s&&s.prototype),e.prototype.constructor=e,e}(Error),Sn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Sn.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return n.chain.push(new cc(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};Sn.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new D1(t,e.simple,e.async)),this};Sn.prototype._clone=function(){return new Sn(this.chain.slice(),this.nextRuleModifiers.slice())};Sn.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Sn.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(r){t.push(new bu(n,e,r))}}),t};Sn.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new bu(t,e,n)}})};Sn.prototype.testAsync=function(e){var t=this;return new Promise(function(n,r){jp(e,t.chain.slice(),n,r)})};function jp(s,e,t,n){if(e.length){var r=e.shift();r._testAsync(s).then(function(){jp(s,e,t,n)},function(i){n(new bu(r,s,i))})}else t(s)}var ff=function(s,e){return e&&typeof s=="string"&&s.trim().length===0?!0:s==null};function R1(s,e){return e===void 0&&(e=!1),{simple:function(t){return ff(t,e)||s.check(t)===void 0},async:function(t){return ff(t,e)||s.testAsync(t)}}}function St(){return typeof Proxy<"u"?Vp(new Sn):_l(new Sn)}var zi={};St.extend=function(s){Object.assign(zi,s)};St.clearCustomRules=function(){zi={}};function Vp(s){return new Proxy(s,{get:function(t,n){if(n in t)return t[n];var r=Vp(s._clone());if(n in ya)return r._applyModifier(ya[n],n);if(n in zi)return r._applyRule(zi[n],n);if(n in yl)return r._applyRule(yl[n],n)}})}function _l(s){var e=function(r,i){return Object.keys(r).forEach(function(o){i[o]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=_l(i._clone()),u=l._applyRule(r[o],o).apply(void 0,a);return u}}),i},t=e(yl,s),n=e(zi,t);return Object.keys(ya).forEach(function(r){Object.defineProperty(n,r,{get:function(){var i=_l(n._clone());return i._applyModifier(ya[r],r)}})}),n}var ya={not:{simple:function(s){return function(e){return!s(e)}},async:function(s){return function(e){return Promise.resolve(s(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(s){return function(e){return Ho(e).some(function(t){try{return s(t)}catch{return!1}})}},async:function(s){return function(e){return Promise.all(Ho(e).map(function(t){try{return s(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(s){return function(e){return e!==!1&&Ho(e).every(s)}},async:function(s){return function(e){return Promise.all(Ho(e).map(s)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(s,e){return function(t){return df(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&s(t):s(t)}},async:function(s,e){return function(t){return Promise.resolve(s(t)).then(function(n){return df(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function df(s){return s&&s.name==="schema"&&s.args.length>0&&typeof s.args[0]=="object"}function Ho(s){return typeof s=="string"?s.split(""):s}var yl={equal:function(s){return function(e){return e==s}},exact:function(s){return function(e){return e===s}},number:function(s){return s===void 0&&(s=!0),function(e){return typeof e=="number"&&(s||isFinite(e))}},integer:function(){return function(s){var e=Number.isInteger||P1;return e(s)}},numeric:function(){return function(s){return!isNaN(parseFloat(s))&&isFinite(s)}},string:function(){return _r("string")},boolean:function(){return _r("boolean")},undefined:function(){return _r("undefined")},null:function(){return _r("null")},array:function(){return _r("array")},object:function(){return _r("object")},instanceOf:function(s){return function(e){return e instanceof s}},pattern:function(s){return function(e){return s.test(e)}},lowercase:function(){return function(s){return typeof s=="boolean"||s===s.toLowerCase()&&s.trim()!==""}},uppercase:function(){return function(s){return s===s.toUpperCase()&&s.trim()!==""}},vowel:function(){return function(s){return/^[aeiou]+$/i.test(s)}},consonant:function(){return function(s){return/^(?=[^aeiou])([a-z]+)$/i.test(s)}},first:function(s){return function(e){return e[0]==s}},last:function(s){return function(e){return e[e.length-1]==s}},empty:function(){return function(s){return s.length===0}},length:function(s,e){return function(t){return t.length>=s&&t.length<=(e||s)}},minLength:function(s){return function(e){return e.length>=s}},maxLength:function(s){return function(e){return e.length<=s}},negative:function(){return function(s){return s<0}},positive:function(){return function(s){return s>=0}},between:function(s,e){return function(t){return t>=s&&t<=e}},range:function(s,e){return function(t){return t>=s&&t<=e}},lessThan:function(s){return function(e){return e<s}},lessThanOrEqual:function(s){return function(e){return e<=s}},greaterThan:function(s){return function(e){return e>s}},greaterThanOrEqual:function(s){return function(e){return e>=s}},even:function(){return function(s){return s%2===0}},odd:function(){return function(s){return s%2!==0}},includes:function(s){return function(e){return~e.indexOf(s)}},schema:function(s){return M1(s)},passesAnyOf:function(){for(var s=[],e=arguments.length;e--;)s[e]=arguments[e];return function(t){return s.some(function(n){return n.test(t)})}},optional:R1};function _r(s){return function(e){return Array.isArray(e)&&s==="array"||e===null&&s==="null"||typeof e===s}}function P1(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}function M1(s){return{simple:function(e){var t=[];if(Object.keys(s).forEach(function(n){var r=s[n];try{r.check((e||{})[n])}catch(i){i.target=n,t.push(i)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(s).map(function(r){var i=s[r];return i.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}function Vn(s,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(s==null||s(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function zp(s,e=[]){let t=[];function n(i,o){const a=b.createContext(o),c=t.length;t=[...t,o];function l(h){const{scope:f,children:p,...m}=h,d=(f==null?void 0:f[s][c])||a,g=b.useMemo(()=>m,Object.values(m));return b.createElement(d.Provider,{value:g},p)}function u(h,f){const p=(f==null?void 0:f[s][c])||a,m=b.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,u]}const r=()=>{const i=t.map(o=>b.createContext(o));return function(a){const c=(a==null?void 0:a[s])||i;return b.useMemo(()=>({[`__scope${s}`]:{...a,[s]:c}}),[a,c])}};return r.scopeName=s,[n,I1(r,...e)]}function I1(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=n.reduce((a,{useScope:c,scopeName:l})=>{const h=c(i)[`__scope${l}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ei(s){const e=b.useRef(s);return b.useEffect(()=>{e.current=s}),b.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function N1(s,e=globalThis==null?void 0:globalThis.document){const t=ei(s);b.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const vl="dismissableLayer.update",$1="dismissableLayer.pointerDownOutside",F1="dismissableLayer.focusOutside";let pf;const L1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),j1=b.forwardRef((s,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:c,...l}=s,u=b.useContext(L1),[h,f]=b.useState(null),p=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,m]=b.useState({}),d=Jr(e,w=>f(w)),g=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),k=g.indexOf(_),x=h?g.indexOf(h):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,y=x>=k,T=V1(w=>{const C=w.target,S=[...u.branches].some(D=>D.contains(C));!y||S||(i==null||i(w),a==null||a(w),w.defaultPrevented||c==null||c())},p),E=z1(w=>{const C=w.target;[...u.branches].some(D=>D.contains(C))||(o==null||o(w),a==null||a(w),w.defaultPrevented||c==null||c())},p);return N1(w=>{x===u.layers.size-1&&(r==null||r(w),!w.defaultPrevented&&c&&(w.preventDefault(),c()))},p),b.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pf=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),mf(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=pf)}},[h,p,n,u]),b.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),mf())},[h,u]),b.useEffect(()=>{const w=()=>m({});return document.addEventListener(vl,w),()=>document.removeEventListener(vl,w)},[]),b.createElement(ir.div,Ae({},l,{ref:d,style:{pointerEvents:v?y?"auto":"none":void 0,...s.style},onFocusCapture:Vn(s.onFocusCapture,E.onFocusCapture),onBlurCapture:Vn(s.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Vn(s.onPointerDownCapture,T.onPointerDownCapture)}))});function V1(s,e=globalThis==null?void 0:globalThis.document){const t=ei(s),n=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Up($1,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function z1(s,e=globalThis==null?void 0:globalThis.document){const t=ei(s),n=b.useRef(!1);return b.useEffect(()=>{const r=i=>{i.target&&!n.current&&Up(F1,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function mf(){const s=new CustomEvent(vl);document.dispatchEvent(s)}function Up(s,e,t,{discrete:n}){const r=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?S1(r,i):r.dispatchEvent(i)}const Fr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},U1=S_["useId".toString()]||(()=>{});let B1=0;function W1(s){const[e,t]=b.useState(U1());return Fr(()=>{s||t(n=>n??String(B1++))},[s]),s||(e?`radix-${e}`:"")}const q1=b.forwardRef((s,e)=>{const{children:t,width:n=10,height:r=5,...i}=s;return b.createElement(ir.svg,Ae({},i,{ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),s.asChild?t:b.createElement("polygon",{points:"0,0 30,0 15,10"}))}),H1=q1;function Y1(s){const[e,t]=b.useState(void 0);return Fr(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=s.offsetWidth,a=s.offsetHeight;t({width:o,height:a})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}const Bp="Popper",[Wp,qp]=zp(Bp),[G1,Hp]=Wp(Bp),X1=s=>{const{__scopePopper:e,children:t}=s,[n,r]=b.useState(null);return b.createElement(G1,{scope:e,anchor:n,onAnchorChange:r},t)},Z1="PopperAnchor",K1=b.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...r}=s,i=Hp(Z1,t),o=b.useRef(null),a=Jr(e,o);return b.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:b.createElement(ir.div,Ae({},r,{ref:a}))}),Yp="PopperContent",[Q1,J1]=Wp(Yp),ev=b.forwardRef((s,e)=>{var t,n,r,i,o,a,c,l;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:m=0,arrowPadding:d=0,avoidCollisions:g=!0,collisionBoundary:_=[],collisionPadding:k=0,sticky:x="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:T,...E}=s,w=Hp(Yp,u),[C,S]=b.useState(null),D=Jr(e,H=>S(H)),[O,j]=b.useState(null),V=Y1(O),W=(t=V==null?void 0:V.width)!==null&&t!==void 0?t:0,B=(n=V==null?void 0:V.height)!==null&&n!==void 0?n:0,z=h+(p!=="center"?"-"+p:""),U=typeof k=="number"?k:{top:0,right:0,bottom:0,left:0,...k},X=Array.isArray(_)?_:[_],K=X.length>0,ee={padding:U,boundary:X.filter(rv),altBoundary:K},{refs:N,floatingStyles:L,placement:A,isPositioned:I,middlewareData:Y}=t1({strategy:"fixed",placement:z,whileElementsMounted:(...H)=>Qy(...H,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[Ry({mainAxis:f+B,alignmentAxis:m}),g&&Py({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?My():void 0,...ee}),g&&Oy({...ee}),Iy({...ee,apply:({elements:H,rects:P,availableWidth:R,availableHeight:Q})=>{const{width:se,height:ce}=P.reference,ye=H.floating.style;ye.setProperty("--radix-popper-available-width",`${R}px`),ye.setProperty("--radix-popper-available-height",`${Q}px`),ye.setProperty("--radix-popper-anchor-width",`${se}px`),ye.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),O&&e1({element:O,padding:d}),iv({arrowWidth:W,arrowHeight:B}),v&&Ay({strategy:"referenceHidden",...ee})]}),[$,q]=Gp(A),oe=ei(T);Fr(()=>{I&&(oe==null||oe())},[I,oe]);const re=(r=Y.arrow)===null||r===void 0?void 0:r.x,ie=(i=Y.arrow)===null||i===void 0?void 0:i.y,ne=((o=Y.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[me,te]=b.useState();return Fr(()=>{C&&te(window.getComputedStyle(C).zIndex)},[C]),b.createElement("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:I?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(a=Y.transformOrigin)===null||a===void 0?void 0:a.x,(c=Y.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:s.dir},b.createElement(Q1,{scope:u,placedSide:$,onArrowChange:j,arrowX:re,arrowY:ie,shouldHideArrow:ne},b.createElement(ir.div,Ae({"data-side":$,"data-align":q},E,{ref:D,style:{...E.style,animation:I?void 0:"none",opacity:(l=Y.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}}))))}),tv="PopperArrow",nv={top:"bottom",right:"left",bottom:"top",left:"right"},sv=b.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=J1(tv,n),o=nv[i.placedSide];return b.createElement("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},b.createElement(H1,Ae({},r,{ref:t,style:{...r.style,display:"block"}})))});function rv(s){return s!==null}const iv=s=>({name:"transformOrigin",options:s,fn(e){var t,n,r,i,o;const{placement:a,rects:c,middlewareData:l}=e,h=((t=l.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=h?0:s.arrowWidth,p=h?0:s.arrowHeight,[m,d]=Gp(a),g={start:"0%",center:"50%",end:"100%"}[d],_=((n=(r=l.arrow)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0)+f/2,k=((i=(o=l.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+p/2;let x="",v="";return m==="bottom"?(x=h?g:`${_}px`,v=`${-p}px`):m==="top"?(x=h?g:`${_}px`,v=`${c.floating.height+p}px`):m==="right"?(x=`${-p}px`,v=h?g:`${k}px`):m==="left"&&(x=`${c.floating.width+p}px`,v=h?g:`${k}px`),{data:{x,y:v}}}});function Gp(s){const[e,t="center"]=s.split("-");return[e,t]}const ov=X1,av=K1,cv=ev,lv=sv;function uv(s,e){return b.useReducer((t,n)=>{const r=e[t][n];return r??t},s)}const Xp=s=>{const{present:e,children:t}=s,n=hv(e),r=typeof t=="function"?t({present:n.isPresent}):b.Children.only(t),i=Jr(n.ref,r.ref);return typeof t=="function"||n.isPresent?b.cloneElement(r,{ref:i}):null};Xp.displayName="Presence";function hv(s){const[e,t]=b.useState(),n=b.useRef({}),r=b.useRef(s),i=b.useRef("none"),o=s?"mounted":"unmounted",[a,c]=uv(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const l=Yo(n.current);i.current=a==="mounted"?l:"none"},[a]),Fr(()=>{const l=n.current,u=r.current;if(u!==s){const f=i.current,p=Yo(l);s?c("MOUNT"):p==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,c]),Fr(()=>{if(e){const l=h=>{const p=Yo(n.current).includes(h.animationName);h.target===e&&p&&cu.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===e&&(i.current=Yo(n.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",l),e.addEventListener("animationend",l),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",l),e.removeEventListener("animationend",l)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(l=>{l&&(n.current=getComputedStyle(l)),t(l)},[])}}function Yo(s){return(s==null?void 0:s.animationName)||"none"}function fv({prop:s,defaultProp:e,onChange:t=()=>{}}){const[n,r]=dv({defaultProp:e,onChange:t}),i=s!==void 0,o=i?s:n,a=ei(t),c=b.useCallback(l=>{if(i){const h=typeof l=="function"?l(s):l;h!==s&&a(h)}else r(l)},[i,s,r,a]);return[o,c]}function dv({defaultProp:s,onChange:e}){const t=b.useState(s),[n]=t,r=b.useRef(n),i=ei(e);return b.useEffect(()=>{r.current!==n&&(i(n),r.current=n)},[n,r,i]),t}const pv=b.forwardRef((s,e)=>b.createElement(ir.span,Ae({},s,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...s.style}}))),mv=pv,[lc,HP]=zp("Tooltip",[qp]),uc=qp(),gv="TooltipProvider",bl="tooltip.open",[YP,xu]=lc(gv),wu="Tooltip",[_v,hc]=lc(wu),yv=s=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=s,c=xu(wu,s.__scopeTooltip),l=uc(e),[u,h]=b.useState(null),f=W1(),p=b.useRef(0),m=o??c.disableHoverableContent,d=a??c.delayDuration,g=b.useRef(!1),[_=!1,k]=fv({prop:n,defaultProp:r,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(bl))):c.onClose(),i==null||i(E)}}),x=b.useMemo(()=>_?g.current?"delayed-open":"instant-open":"closed",[_]),v=b.useCallback(()=>{window.clearTimeout(p.current),g.current=!1,k(!0)},[k]),y=b.useCallback(()=>{window.clearTimeout(p.current),k(!1)},[k]),T=b.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,k(!0)},d)},[d,k]);return b.useEffect(()=>()=>window.clearTimeout(p.current),[]),b.createElement(ov,l,b.createElement(_v,{scope:e,contentId:f,open:_,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayed?T():v()},[c.isOpenDelayed,T,v]),onTriggerLeave:b.useCallback(()=>{m?y():window.clearTimeout(p.current)},[y,m]),onOpen:v,onClose:y,disableHoverableContent:m},t))},gf="TooltipTrigger",vv=b.forwardRef((s,e)=>{const{__scopeTooltip:t,...n}=s,r=hc(gf,t),i=xu(gf,t),o=uc(t),a=b.useRef(null),c=Jr(e,a,r.onTriggerChange),l=b.useRef(!1),u=b.useRef(!1),h=b.useCallback(()=>l.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),b.createElement(av,Ae({asChild:!0},o),b.createElement(ir.button,Ae({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},n,{ref:c,onPointerMove:Vn(s.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:Vn(s.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:Vn(s.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Vn(s.onFocus,()=>{l.current||r.onOpen()}),onBlur:Vn(s.onBlur,r.onClose),onClick:Vn(s.onClick,r.onClose)})))}),bv="TooltipPortal",[GP,xv]=lc(bv,{forceMount:void 0}),Ui="TooltipContent",wv=b.forwardRef((s,e)=>{const t=xv(Ui,s.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...i}=s,o=hc(Ui,s.__scopeTooltip);return b.createElement(Xp,{present:n||o.open},o.disableHoverableContent?b.createElement(Zp,Ae({side:r},i,{ref:e})):b.createElement(kv,Ae({side:r},i,{ref:e})))}),kv=b.forwardRef((s,e)=>{const t=hc(Ui,s.__scopeTooltip),n=xu(Ui,s.__scopeTooltip),r=b.useRef(null),i=Jr(e,r),[o,a]=b.useState(null),{trigger:c,onClose:l}=t,u=r.current,{onPointerInTransitChange:h}=n,f=b.useCallback(()=>{a(null),h(!1)},[h]),p=b.useCallback((m,d)=>{const g=m.currentTarget,_={x:m.clientX,y:m.clientY},k=Ov(_,g.getBoundingClientRect()),x=Av(_,k),v=Dv(d.getBoundingClientRect()),y=Pv([...x,...v]);a(y),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&u){const m=g=>p(g,u),d=g=>p(g,c);return c.addEventListener("pointerleave",m),u.addEventListener("pointerleave",d),()=>{c.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",d)}}},[c,u,p,f]),b.useEffect(()=>{if(o){const m=d=>{const g=d.target,_={x:d.clientX,y:d.clientY},k=(c==null?void 0:c.contains(g))||(u==null?void 0:u.contains(g)),x=!Rv(_,o);k?f():x&&(f(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,u,o,l,f]),b.createElement(Zp,Ae({},s,{ref:i}))}),[Tv,Ev]=lc(wu,{isInside:!1}),Zp=b.forwardRef((s,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=s,c=hc(Ui,t),l=uc(t),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(bl,u),()=>document.removeEventListener(bl,u)),[u]),b.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),b.createElement(j1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u},b.createElement(cv,Ae({"data-state":c.stateAttribute},l,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),b.createElement($p,null,n),b.createElement(Tv,{scope:t,isInside:!0},b.createElement(mv,{id:c.contentId,role:"tooltip"},r||n))))}),Cv="TooltipArrow",Sv=b.forwardRef((s,e)=>{const{__scopeTooltip:t,...n}=s,r=uc(t);return Ev(Cv,t).isInside?null:b.createElement(lv,Ae({},r,n,{ref:e}))});function Ov(s,e){const t=Math.abs(e.top-s.y),n=Math.abs(e.bottom-s.y),r=Math.abs(e.right-s.x),i=Math.abs(e.left-s.x);switch(Math.min(t,n,r,i)){case i:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Av(s,e,t=5){const n=[];switch(e){case"top":n.push({x:s.x-t,y:s.y+t},{x:s.x+t,y:s.y+t});break;case"bottom":n.push({x:s.x-t,y:s.y-t},{x:s.x+t,y:s.y-t});break;case"left":n.push({x:s.x+t,y:s.y-t},{x:s.x+t,y:s.y+t});break;case"right":n.push({x:s.x-t,y:s.y-t},{x:s.x-t,y:s.y+t});break}return n}function Dv(s){const{top:e,right:t,bottom:n,left:r}=s;return[{x:r,y:e},{x:t,y:e},{x:t,y:n},{x:r,y:n}]}function Rv(s,e){const{x:t,y:n}=s;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,l=e[o].x,u=e[o].y;c>n!=u>n&&t<(l-a)*(n-c)/(u-c)+a&&(r=!r)}return r}function Pv(s){const e=s.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Mv(e)}function Mv(s){if(s.length<=1)return s.slice();const e=[];for(let n=0;n<s.length;n++){const r=s[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let n=s.length-1;n>=0;n--){const r=s[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Iv=yv,Nv=vv,$v=wv,Fv=Sv;function Lv(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function De(s,e){if(s==null)return{};var t=Lv(s,e),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(t[n]=s[n])}return t}let We;(function(s){s[s.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",s[s.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",s[s.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",s[s.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",s[s.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",s[s.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",s[s.THEME_ERROR=6]="THEME_ERROR",s[s.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",s[s.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",s[s.EMPTY_KEY=9]="EMPTY_KEY"})(We||(We={}));const jv={[We.UNSUPPORTED_INPUT]:(s,e)=>[`An input with type \`${s}\` input was found at path \`${e}\` but it's not supported yet.`],[We.NO_COMPONENT_FOR_TYPE]:(s,e)=>[`Type \`${s}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[We.UNKNOWN_INPUT]:(s,e)=>[`input at path \`${s}\` is not recognized.`,e],[We.DUPLICATE_KEYS]:(s,e,t)=>[`Key \`${s}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[We.ALREADY_REGISTERED_TYPE]:s=>[`Type ${s} has already been registered. You can't register a component with the same type.`],[We.CLIPBOARD_ERROR]:s=>["Error copying the value",s],[We.THEME_ERROR]:(s,e)=>[`Error accessing the theme \`${s}.${e}\` value.`],[We.PATH_DOESNT_EXIST]:s=>[`Error getting the value at path \`${s}\`. There is probably an error in your \`render\` function.`],[We.PATH_DOESNT_EXIST]:s=>[`Error accessing the value at path \`${s}\``],[We.INPUT_TYPE_OVERRIDE]:(s,e,t)=>[`Input at path \`${s}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[We.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Kp(s,e,...t){const[n,...r]=jv[e](...t);console[s]("LEVA: "+n,...r)}const Un=Kp.bind(null,"warn"),Vv=Kp.bind(null,"log"),zv=["value"],Uv=["schema"],Bv=["value"],Qp=[],Ks={};function _f(s){let{value:e}=s,t=De(s,zv);for(let n of Qp){const r=n(e,t);if(r)return r}}function es(s,e){let{schema:t}=e,n=De(e,Uv);if(s in Ks){Un(We.ALREADY_REGISTERED_TYPE,s);return}Qp.push((r,i)=>t(r,i)&&s),Ks[s]=n}function qc(s,e,t,n){const{normalize:r}=Ks[s];if(r)return r(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:i}=e,o=De(e,Bv);return{value:i,settings:o}}function Wv(s,e,t,n,r,i){const{sanitize:o}=Ks[s];return o?o(e,t,n,r,i):e}function yf(s,e,t){const{format:n}=Ks[s];return n?n(e,t):e}function qv(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function vf(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function he(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vf(Object(t),!0).forEach(function(n){qv(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):vf(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const bs=(s,e,t)=>s>t?t:s<e?e:s,Hv=s=>{if(s===""||typeof s=="number")return s;try{const e=as(s);if(!isNaN(e))return e}catch{}return parseFloat(s)},Yv=Math.log(10);function bf(s){let e=Math.abs(+String(s).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/Yv)+1,n=Math.floor(Math.log10(Math.abs(s))),r=Math.pow(10,n-t);return Math.max(r,.001)}const va=(s,e,t)=>t===e?0:(bs(s,e,t)-e)/(t-e),ba=(s,e,t)=>s*(t-e)+e,Gv=()=>"_"+Math.random().toString(36).substr(2,9),xf=/\(([0-9+\-*/^ .]+)\)/,wf=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,kf=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Tf=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Ef=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Cf=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function as(s){if(isNaN(Number(s)))if(xf.test(s)){const e=s.replace(xf,(t,n)=>String(as(n)));return as(e)}else if(wf.test(s)){const e=s.replace(wf,(t,n,r)=>String(Math.pow(Number(n),Number(r))));return as(e)}else if(kf.test(s)){const e=s.replace(kf,(t,n,r)=>String(Number(n)*Number(r)));return as(e)}else if(Tf.test(s)){const e=s.replace(Tf,(t,n,r)=>{if(r!=0)return String(Number(n)/Number(r));throw new Error("Division by zero")});return as(e)}else if(Ef.test(s)){const e=s.replace(Ef,(t,n,r)=>String(Number(n)+Number(r)));return as(e)}else if(Cf.test(s)){const e=s.replace(Cf,(t,n,r)=>String(Number(n)-Number(r)));return as(e)}else return Number(s);return Number(s)}function Xv(s,e){return e.reduce((t,n)=>(s&&s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}function Zv(s,e){const t=he({},s);return e.forEach(n=>n in s&&delete t[n]),t}function Kv(s,e){return s.reduce((t,n,r)=>Object.assign(t,{[e[r]]:n}),{})}function Jp(s){return Object.prototype.toString.call(s)==="[object Object]"}const Qv=s=>Jp(s)&&Object.keys(s).length===0;let cn;(function(s){s.BUTTON="BUTTON",s.BUTTON_GROUP="BUTTON_GROUP",s.MONITOR="MONITOR",s.FOLDER="FOLDER"})(cn||(cn={}));let un;(function(s){s.SELECT="SELECT",s.IMAGE="IMAGE",s.NUMBER="NUMBER",s.COLOR="COLOR",s.STRING="STRING",s.BOOLEAN="BOOLEAN",s.INTERVAL="INTERVAL",s.VECTOR3D="VECTOR3D",s.VECTOR2D="VECTOR2D"})(un||(un={}));const Jv=["type","__customInput"],eb=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],tb=["type"];function e0(s,e,t={},n){var r,i;if(typeof s!="object"||Array.isArray(s))return{type:n,input:s,options:he({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in s){const{type:y,__customInput:T}=s,E=De(s,Jv);return e0(T,e,E,y)}const{render:o,label:a,optional:c,order:l=0,disabled:u,hint:h,onChange:f,onEditStart:p,onEditEnd:m,transient:d}=s,g=De(s,eb),_=he({render:o,key:e,label:a??e,hint:h,transient:d??!!f,onEditStart:p,onEditEnd:m,disabled:u,optional:c,order:l},t);let{type:k}=g,x=De(g,tb);if(k=n??k,k in cn)return{type:k,input:x,options:_};let v;return n&&Jp(x)&&"value"in x?v=x.value:v=Qv(x)?void 0:x,{type:k,input:v,options:he(he({},_),{},{onChange:f,optional:(r=_.optional)!==null&&r!==void 0?r:!1,disabled:(i=_.disabled)!==null&&i!==void 0?i:!1})}}function nb(s,e,t,n){const r=e0(s,e),{type:i,input:o,options:a}=r;if(i)return i in cn?r:{type:i,input:qc(i,o,t,n),options:a};let c=_f(o);return c?{type:c,input:qc(c,o,t,n),options:a}:(c=_f({value:o}),c?{type:c,input:qc(c,{value:o},t,n),options:a}:!1)}function Sf(s,e,t,n,r){const{value:i,type:o,settings:a}=s;s.value=t0({type:o,value:i,settings:a},e,t,n),s.fromPanel=r}const sb=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function t0({type:s,value:e,settings:t},n,r,i){const o=s!=="SELECT"&&typeof n=="function"?n(e):n;let a;try{a=Wv(s,o,t,e,r,i)}catch(c){throw new sb(`The value \`${n}\` did not result in a correct value.`,e,c)}return Vi(a,e)?e:a}const n0=(s,e,t=!1)=>{let n=0;return function(){const r=arguments,i=t&&!n,o=()=>s.apply(this,r);window.clearTimeout(n),n=window.setTimeout(o,e),i&&o()}},s0=s=>s.shiftKey?5:s.altKey?1/5:1;function rb(s,e){const t=console.error;console.error=()=>{},tp.render(s,e),console.error=t}const ib=["value"],ob=["min","max"],ab=s=>{if(typeof s=="number")return!0;if(typeof s=="string"){const e=parseFloat(s);return isNaN(e)?!1:s.substring((""+e).length).trim().length<4}return!1},r0=(s,{min:e=-1/0,max:t=1/0,suffix:n})=>{const r=parseFloat(s);if(s===""||isNaN(r))throw Error("Invalid number");const i=bs(r,e,t);return n?i+n:i},cb=(s,{pad:e=0,suffix:t})=>{const n=parseFloat(s).toFixed(e);return t?n+t:n},i0=s=>{let{value:e}=s,t=De(s,ib);const{min:n=-1/0,max:r=1/0}=t,i=De(t,ob);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=bs(o,n,r);let c=t.step;c||(Number.isFinite(n)?Number.isFinite(r)?c=+(Math.abs(r-n)/100).toPrecision(1):c=+(Math.abs(o-n)/100).toPrecision(1):Number.isFinite(r)&&(c=+(Math.abs(r-o)/100).toPrecision(1)));const l=c?bf(c)*10:bf(o);c=c||l/10;const u=Math.round(bs(Math.log10(1/l),0,2));return{value:a?o+a:o,settings:he({initialValue:o,step:c,pad:u,min:n,max:r,suffix:a},i)}},o0=(s,{step:e,initialValue:t})=>{const n=Math.round((s-t)/e);return t+n*e};var a0=Object.freeze({__proto__:null,schema:ab,sanitize:r0,format:cb,normalize:i0,sanitizeStep:o0});function Ke(){return Ke=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ke.apply(this,arguments)}const c0=b.createContext({});function _t(){return b.useContext(c0)}const ku=b.createContext(null),l0=b.createContext(null),u0=b.createContext(null);function xo(){return b.useContext(l0)}function lb(){return b.useContext(u0)}const h0=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Go(s,e){const[t,n]=s.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(r.backgroundColor=n),r}const xi={$inputStyle:()=>s=>Go(s,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>s=>Go(s,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>s=>Go(s,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>s=>Go(s,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ae,css:XP,createTheme:ub,globalCss:hb,keyframes:ZP}=$_({prefix:"leva",theme:h0(),utils:he(he({},xi),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:s=>({"&:focus":xi.$focusStyle()(s)}),$focusWithin:s=>({"&:focus-within":xi.$focusStyle()(s)}),$hover:s=>({"&:hover":xi.$hoverStyle()(s)}),$active:s=>({"&:active":xi.$activeStyle()(s)})})}),fb=hb({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function db(s){const e=h0();if(!s)return{theme:e,className:""};Object.keys(s).forEach(n=>{Object.assign(e[n],s[n])});const t=ub(e);return{theme:e,className:t.className}}function Bn(s,e){const{theme:t}=b.useContext(ku);if(!(s in t)||!(e in t[s]))return Un(We.THEME_ERROR,s,e),"";let n=e;for(;;){let r=t[s][n];if(typeof r=="string"&&r.charAt(0)==="$")n=r.substr(1);else return r}}const f0=ae("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),d0=ae("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${f0}`]:{paddingLeft:0}}),pb=ae(d0,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),mb=ae("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),gb=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_b=["onUpdate"];function Tu(s){let{innerLabel:e,value:t,onUpdate:n,onChange:r,onKeyDown:i,type:o,id:a,inputType:c="text",rows:l=0}=s,u=De(s,gb);const{id:h,emitOnEditStart:f,emitOnEditEnd:p,disabled:m}=_t(),d=a||h,g=b.useRef(null),_=l>0,k=_?"textarea":"input",x=b.useCallback(T=>E=>{const w=E.currentTarget.value;T(w)},[]);M.useEffect(()=>{const T=g.current,E=x(w=>{n(w),p()});return T==null||T.addEventListener("blur",E),()=>T==null?void 0:T.removeEventListener("blur",E)},[x,n,p]);const v=b.useCallback(T=>{T.key==="Enter"&&x(n)(T)},[x,n]),y=Object.assign({as:k},_?{rows:l}:{},u);return M.createElement(mb,{textArea:_},e&&typeof e=="string"?M.createElement(d0,null,e):e,M.createElement(f0,Ke({levaType:o,ref:g,id:d,type:c,autoComplete:"off",spellCheck:"false",value:t,onChange:x(r),onFocus:()=>f(),onKeyPress:v,onKeyDown:i,disabled:m},y)))}function yb(s){let{onUpdate:e}=s,t=De(s,_b);const n=b.useCallback(i=>e(Hv(i)),[e]),r=b.useCallback(i=>{const o=i.key==="ArrowUp"?1:i.key==="ArrowDown"?-1:0;if(o){i.preventDefault();const a=i.altKey?.1:i.shiftKey?10:1;e(c=>parseFloat(c)+o*a)}},[e]);return M.createElement(Tu,Ke({},t,{onUpdate:n,onKeyDown:r,type:"number"}))}const xa=ae("div",{}),xl=ae("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),vb=ae("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${xl}::after`]:{opacity:.6},[`${xa}:hover > & + ${xl}::after`]:{opacity:.6},[`${xa}:hover > & > svg`]:{opacity:1}}),p0=ae("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${xa}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),m0=ae("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${p0} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),g0=ae(m0,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),bb=ae("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),xb=ae("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),wl=ae("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),wb=ae("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${wl}`]:{pointerEvents:"auto"}}}}}),_0=ae("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),kb=ae("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Tb=ae(Fv,{fill:"$toolTipBackground"});function Eu({children:s}){const{className:e}=b.useContext(ku);return M.createElement(A1,{className:e},s)}const Eb=["align"];function Cb(){const{id:s,disable:e,disabled:t}=_t();return M.createElement(M.Fragment,null,M.createElement(xb,{id:s+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),M.createElement("label",{htmlFor:s+"__disable"}))}function Sb(s){const{id:e,optional:t,hint:n}=_t(),r=s.htmlFor||(e?{htmlFor:e}:null),i=!n&&typeof s.children=="string"?{title:s.children}:null;return M.createElement(M.Fragment,null,t&&M.createElement(Cb,null),n!==void 0?M.createElement(Iv,null,M.createElement(Nv,{asChild:!0},M.createElement(wl,Ke({},r,s))),M.createElement($v,{side:"top",sideOffset:2},M.createElement(kb,null,n,M.createElement(Tb,null)))):M.createElement(wl,Ke({},r,i,s)))}function pn(s){let{align:e}=s,t=De(s,Eb);const{value:n,label:r,key:i,disabled:o}=_t(),{hideCopyButton:a}=lb(),c=!a&&i!==void 0,[l,u]=b.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[i]:n??""})),u(!0)}catch{Un(We.CLIPBOARD_ERROR,{[i]:n})}};return M.createElement(bb,{align:e,onPointerLeave:()=>u(!1)},M.createElement(Sb,t),c&&!o&&M.createElement("div",{title:`Click to copy ${typeof r=="string"?r:i} value`},l?M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},M.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),M.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):M.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},M.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),M.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Ob=["toggled"],Ab=ae("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Cu(s){let{toggled:e}=s,t=De(s,Ob);return M.createElement(Ab,Ke({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),M.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Db=["input"];function tn(s){let{input:e}=s,t=De(s,Db);return e?M.createElement(g0,t):M.createElement(m0,t)}function y0({value:s,type:e,settings:t,setValue:n}){const[r,i]=b.useState(yf(e,s,t)),o=b.useRef(s),a=b.useRef(t);a.current=t;const c=b.useCallback(u=>i(yf(e,u,a.current)),[e]),l=b.useCallback(u=>{try{n(u)}catch(h){const{type:f,previousValue:p}=h;if(f!=="LEVA_ERROR")throw h;c(p)}},[c,n]);return b.useEffect(()=>{Vi(s,o.current)||c(s),o.current=s},[s,c]),{displayValue:r,onChange:i,onUpdate:l}}function wo(s,e){const{emitOnEditStart:t,emitOnEditEnd:n}=_t();return F_(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const i=s(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),i},e)}function Rb(s){const e=b.useRef(null),t=b.useRef(null),n=b.useRef(!1);return b.useEffect(()=>{const r=n0(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,s(e.current,t.current)},250);return window.addEventListener("resize",r),n.current||(r(),n.current=!0),()=>window.removeEventListener("resize",r)},[s]),b.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function v0(){const s=b.useRef(null),e=b.useRef({x:0,y:0}),t=b.useCallback(n=>{Object.assign(e.current,n),s.current&&(s.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[s,t]}const Pb=["__refCount"],Hc=(s,e)=>{if(!s[e])return null;const t=s[e];return De(t,Pb)};function Mb(s){const e=xo(),[t,n]=b.useState(Hc(e.getData(),s)),r=b.useCallback(l=>e.setValueAtPath(s,l,!0),[s,e]),i=b.useCallback(l=>e.setSettingsAtPath(s,l),[s,e]),o=b.useCallback(l=>e.disableInputAtPath(s,l),[s,e]),a=b.useCallback(()=>e.emitOnEditStart(s),[s,e]),c=b.useCallback(()=>e.emitOnEditEnd(s),[s,e]);return b.useEffect(()=>{n(Hc(e.getData(),s));const l=e.useStore.subscribe(u=>Hc(u.data,s),n,{equalityFn:bo});return()=>l()},[e,s]),[t,{set:r,setSettings:i,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:c}]}const Ib=ae("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),b0=ae("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),kl=ae("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),x0=ae("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),w0=ae("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Nb({value:s,min:e,max:t,onDrag:n,step:r,initialValue:i}){const o=b.useRef(null),a=b.useRef(null),c=b.useRef(0),l=Bn("sizes","scrubberWidth"),u=wo(({event:f,first:p,xy:[m],movement:[d],memo:g})=>{if(p){const{width:k,left:x}=o.current.getBoundingClientRect();c.current=k-parseFloat(l),g=(f==null?void 0:f.target)===a.current?s:ba((m-x)/k,e,t)}const _=g+ba(d/c.current,0,t-e);return n(o0(_,{step:r,initialValue:i})),g}),h=va(s,e,t);return M.createElement(x0,Ke({ref:o},u()),M.createElement(b0,null,M.createElement(w0,{style:{left:0,right:`${(1-h)*100}%`}})),M.createElement(kl,{ref:a,style:{left:`calc(${h} * (100% - ${l}))`}}))}const $b=M.memo(({label:s,onUpdate:e,step:t,innerLabelTrim:n})=>{const[r,i]=b.useState(!1),o=wo(({active:a,delta:[c],event:l,memo:u=0})=>(i(a),u+=c/2,Math.abs(u)>=1&&(e(h=>parseFloat(h)+Math.floor(u)*t*s0(l)),u=0),u));return M.createElement(pb,Ke({dragging:r,title:s.length>1?s:""},o()),s.slice(0,n))});function k0({label:s,id:e,displayValue:t,onUpdate:n,onChange:r,settings:i,innerLabelTrim:o=1}){const a=o>0&&M.createElement($b,{label:s,step:i.step,onUpdate:n,innerLabelTrim:o});return M.createElement(yb,{id:e,value:String(t),onUpdate:n,onChange:r,innerLabel:a})}function Fb(){const s=_t(),{label:e,value:t,onUpdate:n,settings:r,id:i}=s,{min:o,max:a}=r,c=a!==1/0&&o!==-1/0;return M.createElement(tn,{input:!0},M.createElement(pn,null,e),M.createElement(Ib,{hasRange:c},c&&M.createElement(Nb,Ke({value:parseFloat(t),onDrag:n},r)),M.createElement(k0,Ke({},s,{id:i,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:Lb}=a0,jb=De(a0,["sanitizeStep"]);var Vb=he({component:Fb},jb);const zb=(s,e)=>St().schema({options:St().passesAnyOf(St().object(),St().array())}).test(e),Ub=(s,{values:e})=>{if(e.indexOf(s)<0)throw Error("Selected value doesn't match Select options");return s},Bb=(s,{values:e})=>e.indexOf(s),Wb=s=>{let{value:e,options:t}=s,n,r;return Array.isArray(t)?(r=t,n=t.map(i=>String(i))):(r=Object.values(t),n=Object.keys(t)),"value"in s?r.includes(e)||(n.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:r}}};var qb=Object.freeze({__proto__:null,schema:zb,sanitize:Ub,format:Bb,normalize:Wb});const Hb=ae("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Tl=ae("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Yb=ae("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Tl}:focus + &`]:{$focusStyle:""},[`${Tl}:hover + &`]:{$hoverStyle:""}});function Gb({displayValue:s,value:e,onUpdate:t,id:n,settings:r,disabled:i}){const{keys:o,values:a}=r,c=b.useRef();return e===a[s]&&(c.current=o[s]),M.createElement(Hb,null,M.createElement(Tl,{id:n,value:s,onChange:l=>t(a[Number(l.currentTarget.value)]),disabled:i},o.map((l,u)=>M.createElement("option",{key:l,value:u},l))),M.createElement(Yb,null,c.current),M.createElement(Cu,{toggled:!0}))}function Xb(){const{label:s,value:e,displayValue:t,onUpdate:n,id:r,disabled:i,settings:o}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(Gb,{id:r,value:e,displayValue:t,onUpdate:n,settings:o,disabled:i}))}var Zb=he({component:Xb},qb);const Kb=s=>St().string().test(s),Qb=s=>{if(typeof s!="string")throw Error("Invalid string");return s},Jb=({value:s,editable:e=!0,rows:t=!1})=>({value:s,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var ex=Object.freeze({__proto__:null,schema:Kb,sanitize:Qb,normalize:Jb});const tx=["displayValue","onUpdate","onChange","editable"],nx=ae("div",{whiteSpace:"pre-wrap"});function sx(s){let{displayValue:e,onUpdate:t,onChange:n,editable:r=!0}=s,i=De(s,tx);return r?M.createElement(Tu,Ke({value:e,onUpdate:t,onChange:n},i)):M.createElement(nx,null,e)}function rx(){const{label:s,settings:e,displayValue:t,onUpdate:n,onChange:r}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(sx,Ke({displayValue:t,onUpdate:n,onChange:r},e)))}var ix=he({component:rx},ex);const ox=s=>St().boolean().test(s),ax=s=>{if(typeof s!="boolean")throw Error("Invalid boolean");return s};var cx=Object.freeze({__proto__:null,schema:ox,sanitize:ax});const lx=ae("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function ux({value:s,onUpdate:e,id:t,disabled:n}){return M.createElement(lx,null,M.createElement("input",{id:t,type:"checkbox",checked:s,onChange:r=>e(r.currentTarget.checked),disabled:n}),M.createElement("label",{htmlFor:t},M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},M.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function hx(){const{label:s,value:e,onUpdate:t,disabled:n,id:r}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(ux,{value:e,onUpdate:t,id:r,disabled:n}))}var fx=he({component:hx},cx);const dx=["locked"];function px({value:s,id:e,valueKey:t,settings:n,onUpdate:r,innerLabelTrim:i}){const o=b.useRef(s[t]);o.current=s[t];const a=b.useCallback(l=>r({[t]:t0({type:"NUMBER",value:o.current,settings:n},l)}),[r,n,t]),c=y0({type:"NUMBER",value:s[t],settings:n,setValue:a});return M.createElement(k0,{id:e,label:t,value:s[t],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:n,innerLabelTrim:i})}const mx=ae("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function gx(s){let{locked:e}=s,t=De(s,dx);return M.createElement("svg",Ke({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?M.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):M.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Su({value:s,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:r,setSettings:i}=_t(),{lock:o,locked:a}=t;return M.createElement(mx,{withLock:o},o&&M.createElement(gx,{locked:a,onClick:()=>i({locked:!a})}),Object.keys(s).map((c,l)=>M.createElement(px,{id:l===0?r:`${r}.${c}`,key:c,valueKey:c,value:s,settings:t[c],onUpdate:e,innerLabelTrim:n})))}const T0=(s,e)=>{const t={};let n=0,r=1/0;Object.entries(s).forEach(([i,o])=>{t[i]=i0(he({value:o},e[i])).settings,n=Math.max(n,t[i].step),r=Math.min(r,t[i].pad)});for(let i in t){const{step:o,min:a,max:c}=e[i]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(c))&&(t[i].step=n,t[i].pad=r)}return t},_x=["lock"],yx=["value"];function vx(s){const e=St().array().length(s).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const r=Object.values(n);return r.length===s&&r.every(i=>isFinite(i))};return n=>e.test(n)||t(n)}function bx(s){return Array.isArray(s)?"array":"object"}function Di(s,e,t){return bx(s)===e?s:e==="array"?Object.values(s):Kv(s,t)}const xx=(s,e,t)=>{const n=Di(s,"object",e.keys);for(let o in n)n[o]=r0(n[o],e[o]);const r=Object.keys(n);let i={};if(r.length===e.keys.length)i=n;else{const o=Di(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],c=n[a],l=o[a],u=l!==0?c/l:1;for(let h in o)h===a?i[a]=c:i[h]=o[h]*u}else i=he(he({},o),n)}return Di(i,e.format,e.keys)},wx=(s,e)=>Di(s,"object",e.keys),kx=s=>!!s&&("step"in s||"min"in s||"max"in s);function Tx(s,e,t=[]){const{lock:n=!1}=e,r=De(e,_x),i=Array.isArray(s)?"array":"object",o=i==="object"?Object.keys(s):t,a=Di(s,"object",o),c=kx(r)?o.reduce((u,h)=>Object.assign(u,{[h]:r}),{}):r,l=T0(a,c);return{value:i==="array"?s:a,settings:he(he({},l),{},{format:i,keys:o,lock:n,locked:!1})}}function E0(s){return{schema:vx(s.length),normalize:e=>{let{value:t}=e,n=De(e,yx);return Tx(t,n,s)},format:(e,t)=>wx(e,t),sanitize:(e,t,n)=>xx(e,t,n)}}var Ex={grad:.9,turn:360,rad:360/(2*Math.PI)},$n=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},at=function(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*s)/t+0},Gt=function(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),s>t?t:s>e?s:e},C0=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},Of=function(s){return{r:Gt(s.r,0,255),g:Gt(s.g,0,255),b:Gt(s.b,0,255),a:Gt(s.a)}},Yc=function(s){return{r:at(s.r),g:at(s.g),b:at(s.b),a:at(s.a,3)}},Cx=/^#([0-9a-f]{3,8})$/i,Xo=function(s){var e=s.toString(16);return e.length<2?"0"+e:e},S0=function(s){var e=s.r,t=s.g,n=s.b,r=s.a,i=Math.max(e,t,n),o=i-Math.min(e,t,n),a=o?i===e?(t-n)/o:i===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:r}},O0=function(s){var e=s.h,t=s.s,n=s.v,r=s.a;e=e/360*6,t/=100,n/=100;var i=Math.floor(e),o=n*(1-t),a=n*(1-(e-i)*t),c=n*(1-(1-e+i)*t),l=i%6;return{r:255*[n,a,o,o,c,n][l],g:255*[c,n,n,a,o,o][l],b:255*[o,o,c,n,n,a][l],a:r}},Af=function(s){return{h:C0(s.h),s:Gt(s.s,0,100),l:Gt(s.l,0,100),a:Gt(s.a)}},Df=function(s){return{h:at(s.h),s:at(s.s),l:at(s.l),a:at(s.a,3)}},Rf=function(s){return O0((t=(e=s).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},Ri=function(s){return{h:(e=S0(s)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},Sx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ox=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ax=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,El={string:[[function(s){var e=Cx.exec(s);return e?(s=e[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?at(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?at(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var e=Ax.exec(s)||Dx.exec(s);return e?e[2]!==e[4]||e[4]!==e[6]?null:Of({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(s){var e=Sx.exec(s)||Ox.exec(s);if(!e)return null;var t,n,r=Af({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(Ex[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Rf(r)},"hsl"]],object:[[function(s){var e=s.r,t=s.g,n=s.b,r=s.a,i=r===void 0?1:r;return $n(e)&&$n(t)&&$n(n)?Of({r:Number(e),g:Number(t),b:Number(n),a:Number(i)}):null},"rgb"],[function(s){var e=s.h,t=s.s,n=s.l,r=s.a,i=r===void 0?1:r;if(!$n(e)||!$n(t)||!$n(n))return null;var o=Af({h:Number(e),s:Number(t),l:Number(n),a:Number(i)});return Rf(o)},"hsl"],[function(s){var e=s.h,t=s.s,n=s.v,r=s.a,i=r===void 0?1:r;if(!$n(e)||!$n(t)||!$n(n))return null;var o=function(a){return{h:C0(a.h),s:Gt(a.s,0,100),v:Gt(a.v,0,100),a:Gt(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(i)});return O0(o)},"hsv"]]},Pf=function(s,e){for(var t=0;t<e.length;t++){var n=e[t][0](s);if(n)return[n,e[t][1]]}return[null,void 0]},A0=function(s){return typeof s=="string"?Pf(s.trim(),El.string):typeof s=="object"&&s!==null?Pf(s,El.object):[null,void 0]},Rx=function(s){return A0(s)[1]},Gc=function(s,e){var t=Ri(s);return{h:t.h,s:Gt(t.s+100*e,0,100),l:t.l,a:t.a}},Xc=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},Mf=function(s,e){var t=Ri(s);return{h:t.h,s:t.s,l:Gt(t.l+100*e,0,100),a:t.a}},Cl=function(){function s(e){this.parsed=A0(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return at(Xc(this.rgba),2)},s.prototype.isDark=function(){return Xc(this.rgba)<.5},s.prototype.isLight=function(){return Xc(this.rgba)>=.5},s.prototype.toHex=function(){return e=Yc(this.rgba),t=e.r,n=e.g,r=e.b,o=(i=e.a)<1?Xo(at(255*i)):"","#"+Xo(t)+Xo(n)+Xo(r)+o;var e,t,n,r,i,o},s.prototype.toRgb=function(){return Yc(this.rgba)},s.prototype.toRgbString=function(){return e=Yc(this.rgba),t=e.r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},s.prototype.toHsl=function(){return Df(Ri(this.rgba))},s.prototype.toHslString=function(){return e=Df(Ri(this.rgba)),t=e.h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},s.prototype.toHsv=function(){return e=S0(this.rgba),{h:at(e.h),s:at(e.s),v:at(e.v),a:at(e.a,3)};var e},s.prototype.invert=function(){return vt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},s.prototype.saturate=function(e){return e===void 0&&(e=.1),vt(Gc(this.rgba,e))},s.prototype.desaturate=function(e){return e===void 0&&(e=.1),vt(Gc(this.rgba,-e))},s.prototype.grayscale=function(){return vt(Gc(this.rgba,-1))},s.prototype.lighten=function(e){return e===void 0&&(e=.1),vt(Mf(this.rgba,e))},s.prototype.darken=function(e){return e===void 0&&(e=.1),vt(Mf(this.rgba,-e))},s.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},s.prototype.alpha=function(e){return typeof e=="number"?vt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):at(this.rgba.a,3);var t},s.prototype.hue=function(e){var t=Ri(this.rgba);return typeof e=="number"?vt({h:e,s:t.s,l:t.l,a:t.a}):at(t.h)},s.prototype.isEqual=function(e){return this.toHex()===vt(e).toHex()},s}(),vt=function(s){return s instanceof Cl?s:new Cl(s)},If=[],Px=function(s){s.forEach(function(e){If.indexOf(e)<0&&(e(Cl,El),If.push(e))})};function Mx(s,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var i={};s.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=n[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,f="black";if(!i.length)for(var p in t)i[p]=new s(t[p]).toRgb();for(var m in t){var d=(a=u,c=i[m],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));d<h&&(h=d,f=m)}return f}},e.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":t[a];return c?new s(c).toRgb():null},"name"])}function ti(){return(ti=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s}).apply(this,arguments)}function Ou(s,e){if(s==null)return{};var t,n,r={},i=Object.keys(s);for(n=0;n<i.length;n++)e.indexOf(t=i[n])>=0||(r[t]=s[t]);return r}function Sl(s){var e=b.useRef(s),t=b.useRef(function(n){e.current&&e.current(n)});return e.current=s,t.current}var Lr=function(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),s>t?t:s<e?e:s},Pi=function(s){return"touches"in s},Ol=function(s){return s&&s.ownerDocument.defaultView||self},Nf=function(s,e,t){var n=s.getBoundingClientRect(),r=Pi(e)?function(i,o){for(var a=0;a<i.length;a++)if(i[a].identifier===o)return i[a];return i[0]}(e.touches,t):e;return{left:Lr((r.pageX-(n.left+Ol(s).pageXOffset))/n.width),top:Lr((r.pageY-(n.top+Ol(s).pageYOffset))/n.height)}},$f=function(s){!Pi(s)&&s.preventDefault()},Au=M.memo(function(s){var e=s.onMove,t=s.onKey,n=Ou(s,["onMove","onKey"]),r=b.useRef(null),i=Sl(e),o=Sl(t),a=b.useRef(null),c=b.useRef(!1),l=b.useMemo(function(){var p=function(g){$f(g),(Pi(g)?g.touches.length>0:g.buttons>0)&&r.current?i(Nf(r.current,g,a.current)):d(!1)},m=function(){return d(!1)};function d(g){var _=c.current,k=Ol(r.current),x=g?k.addEventListener:k.removeEventListener;x(_?"touchmove":"mousemove",p),x(_?"touchend":"mouseup",m)}return[function(g){var _=g.nativeEvent,k=r.current;if(k&&($f(_),!function(v,y){return y&&!Pi(v)}(_,c.current)&&k)){if(Pi(_)){c.current=!0;var x=_.changedTouches||[];x.length&&(a.current=x[0].identifier)}k.focus(),i(Nf(k,_,a.current)),d(!0)}},function(g){var _=g.which||g.keyCode;_<37||_>40||(g.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},d]},[o,i]),u=l[0],h=l[1],f=l[2];return b.useEffect(function(){return f},[f]),M.createElement("div",ti({},n,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:h,tabIndex:0,role:"slider"}))}),ko=function(s){return s.filter(Boolean).join(" ")},Du=function(s){var e=s.color,t=s.left,n=s.top,r=n===void 0?.5:n,i=ko(["react-colorful__pointer",s.className]);return M.createElement("div",{className:i,style:{top:100*r+"%",left:100*t+"%"}},M.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},wt=function(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*s)/t},D0=function(s){var e=s.s,t=s.v,n=s.a,r=(200-e)*t/100;return{h:wt(s.h),s:wt(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:wt(r/2),a:wt(n,2)}},Al=function(s){var e=D0(s);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Zc=function(s){var e=D0(s);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},R0=function(s){var e=s.h,t=s.s,n=s.v,r=s.a;e=e/360*6,t/=100,n/=100;var i=Math.floor(e),o=n*(1-t),a=n*(1-(e-i)*t),c=n*(1-(1-e+i)*t),l=i%6;return{r:wt(255*[n,a,o,o,c,n][l]),g:wt(255*[c,n,n,a,o,o][l]),b:wt(255*[o,o,c,n,n,a][l]),a:wt(r,2)}},P0=function(s){var e=s.r,t=s.g,n=s.b,r=s.a,i=Math.max(e,t,n),o=i-Math.min(e,t,n),a=o?i===e?(t-n)/o:i===t?2+(n-e)/o:4+(e-t)/o:0;return{h:wt(60*(a<0?a+6:a)),s:wt(i?o/i*100:0),v:wt(i/255*100),a:r}},M0=M.memo(function(s){var e=s.hue,t=s.onChange,n=ko(["react-colorful__hue",s.className]);return M.createElement("div",{className:n},M.createElement(Au,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Lr(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":wt(e),"aria-valuemax":"360","aria-valuemin":"0"},M.createElement(Du,{className:"react-colorful__hue-pointer",left:e/360,color:Al({h:e,s:100,v:100,a:1})})))}),I0=M.memo(function(s){var e=s.hsva,t=s.onChange,n={backgroundColor:Al({h:e.h,s:100,v:100,a:1})};return M.createElement("div",{className:"react-colorful__saturation",style:n},M.createElement(Au,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Lr(e.s+100*r.left,0,100),v:Lr(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+wt(e.s)+"%, Brightness "+wt(e.v)+"%"},M.createElement(Du,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Al(e)})))}),Ru=function(s,e){if(s===e)return!0;for(var t in s)if(s[t]!==e[t])return!1;return!0};function N0(s,e,t){var n=Sl(t),r=b.useState(function(){return s.toHsva(e)}),i=r[0],o=r[1],a=b.useRef({color:e,hsva:i});b.useEffect(function(){if(!s.equal(e,a.current.color)){var l=s.toHsva(e);a.current={hsva:l,color:e},o(l)}},[e,s]),b.useEffect(function(){var l;Ru(i,a.current.hsva)||s.equal(l=s.fromHsva(i),a.current.color)||(a.current={hsva:i,color:l},n(l))},[i,s,n]);var c=b.useCallback(function(l){o(function(u){return Object.assign({},u,l)})},[]);return[i,c]}var Ix=typeof window<"u"?b.useLayoutEffect:b.useEffect,Nx=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Ff=new Map,$0=function(s){Ix(function(){var e=s.current?s.current.ownerDocument:document;if(e!==void 0&&!Ff.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Ff.set(e,t);var n=Nx();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},$x=function(s){var e=s.className,t=s.colorModel,n=s.color,r=n===void 0?t.defaultColor:n,i=s.onChange,o=Ou(s,["className","colorModel","color","onChange"]),a=b.useRef(null);$0(a);var c=N0(t,r,i),l=c[0],u=c[1],h=ko(["react-colorful",e]);return M.createElement("div",ti({},o,{ref:a,className:h}),M.createElement(I0,{hsva:l,onChange:u}),M.createElement(M0,{hue:l.h,onChange:u,className:"react-colorful__last-control"}))},Fx=function(s){var e=s.className,t=s.hsva,n=s.onChange,r={backgroundImage:"linear-gradient(90deg, "+Zc(Object.assign({},t,{a:0}))+", "+Zc(Object.assign({},t,{a:1}))+")"},i=ko(["react-colorful__alpha",e]),o=wt(100*t.a);return M.createElement("div",{className:i},M.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),M.createElement(Au,{onMove:function(a){n({a:a.left})},onKey:function(a){n({a:Lr(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},M.createElement(Du,{className:"react-colorful__alpha-pointer",left:t.a,color:Zc(t)})))},Lx=function(s){var e=s.className,t=s.colorModel,n=s.color,r=n===void 0?t.defaultColor:n,i=s.onChange,o=Ou(s,["className","colorModel","color","onChange"]),a=b.useRef(null);$0(a);var c=N0(t,r,i),l=c[0],u=c[1],h=ko(["react-colorful",e]);return M.createElement("div",ti({},o,{ref:a,className:h}),M.createElement(I0,{hsva:l,onChange:u}),M.createElement(M0,{hue:l.h,onChange:u}),M.createElement(Fx,{hsva:l,onChange:u,className:"react-colorful__last-control"}))},jx={defaultColor:{r:0,g:0,b:0,a:1},toHsva:P0,fromHsva:R0,equal:Ru},Vx=function(s){return M.createElement(Lx,ti({},s,{colorModel:jx}))},zx={defaultColor:{r:0,g:0,b:0},toHsva:function(s){return P0({r:s.r,g:s.g,b:s.b,a:1})},fromHsva:function(s){return{r:(e=R0(s)).r,g:e.g,b:e.b};var e},equal:Ru},Ux=function(s){return M.createElement($x,ti({},s,{colorModel:zx}))};function mn(s,e,t,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function Ie(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((n=n.apply(s,e||[])).next())})}function ni(s,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,r&&(i=l[0]&2?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,r=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){t.label=l[1];break}if(l[0]===6&&t.label<i[1]){t.label=i[1],i=l;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(l);break}i[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(s,t)}catch(u){l=[6,u],r=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Bx(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n=t.call(s),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)i.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i}function Wx(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(Bx(arguments[e]));return s}var qx=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function To(s,e){var t=Hx(s);if(typeof t.path!="string"){var n=s.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:s.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Hx(s){var e=s.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!s.type){var n=e.split(".").pop().toLowerCase(),r=qx.get(n);r&&Object.defineProperty(s,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return s}var Yx=[".DS_Store","Thumbs.db"];function Gx(s){return Ie(this,void 0,void 0,function(){return ni(this,function(e){return wa(s)&&Xx(s)?[2,Jx(s.dataTransfer,s.type)]:Zx(s)?[2,Kx(s)]:Array.isArray(s)&&s.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Qx(s)]:[2,[]]})})}function Xx(s){return wa(s.dataTransfer)}function Zx(s){return wa(s)&&wa(s.target)}function wa(s){return typeof s=="object"&&s!==null}function Kx(s){return Dl(s.target.files).map(function(e){return To(e)})}function Qx(s){return Ie(this,void 0,void 0,function(){var e;return ni(this,function(t){switch(t.label){case 0:return[4,Promise.all(s.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return To(n)})]}})})}function Jx(s,e){return Ie(this,void 0,void 0,function(){var t,n;return ni(this,function(r){switch(r.label){case 0:return s===null?[2,[]]:s.items?(t=Dl(s.items).filter(function(i){return i.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(ew))]):[3,2];case 1:return n=r.sent(),[2,Lf(F0(n))];case 2:return[2,Lf(Dl(s.files).map(function(i){return To(i)}))]}})})}function Lf(s){return s.filter(function(e){return Yx.indexOf(e.name)===-1})}function Dl(s){if(s===null)return[];for(var e=[],t=0;t<s.length;t++){var n=s[t];e.push(n)}return e}function ew(s){if(typeof s.webkitGetAsEntry!="function")return jf(s);var e=s.webkitGetAsEntry();return e&&e.isDirectory?L0(e):jf(s)}function F0(s){return s.reduce(function(e,t){return Wx(e,Array.isArray(t)?F0(t):[t])},[])}function jf(s){var e=s.getAsFile();if(!e)return Promise.reject(s+" is not a File");var t=To(e);return Promise.resolve(t)}function tw(s){return Ie(this,void 0,void 0,function(){return ni(this,function(e){return[2,s.isDirectory?L0(s):nw(s)]})})}function L0(s){var e=s.createReader();return new Promise(function(t,n){var r=[];function i(){var o=this;e.readEntries(function(a){return Ie(o,void 0,void 0,function(){var c,l,u;return ni(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return c=h.sent(),t(c),[3,4];case 3:return l=h.sent(),n(l),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(tw)),r.push(u),i(),h.label=6;case 6:return[2]}})})},function(a){n(a)})}i()})}function nw(s){return Ie(this,void 0,void 0,function(){return ni(this,function(e){return[2,new Promise(function(t,n){s.file(function(r){var i=To(r,s.fullPath);t(i)},function(r){n(r)})})]})})}var sw=function(s,e){if(s&&e){var t=Array.isArray(e)?e:e.split(","),n=s.name||"",r=(s.type||"").toLowerCase(),i=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?i===a.replace(/\/.*$/,""):r===a})}return!0};function Vf(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function zf(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vf(Object(t),!0).forEach(function(n){j0(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Vf(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function j0(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Uf(s,e){return aw(s)||ow(s,e)||iw(s,e)||rw()}function rw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iw(s,e){if(s){if(typeof s=="string")return Bf(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bf(s,e)}}function Bf(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=s[t];return n}function ow(s,e){var t=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(t!=null){var n=[],r=!0,i=!1,o,a;try{for(t=t.call(s);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(i)throw a}}return n}}function aw(s){if(Array.isArray(s))return s}var cw="file-invalid-type",lw="file-too-large",uw="file-too-small",hw="too-many-files",fw=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:cw,message:"File type must be ".concat(t)}},Wf=function(e){return{code:lw,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},qf=function(e){return{code:uw,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},dw={code:hw,message:"Too many files"};function V0(s,e){var t=s.type==="application/x-moz-file"||sw(s,e);return[t,t?null:fw(e)]}function z0(s,e,t){if(wi(s.size))if(wi(e)&&wi(t)){if(s.size>t)return[!1,Wf(t)];if(s.size<e)return[!1,qf(e)]}else{if(wi(e)&&s.size<e)return[!1,qf(e)];if(wi(t)&&s.size>t)return[!1,Wf(t)]}return[!0,null]}function wi(s){return s!=null}function pw(s){var e=s.files,t=s.accept,n=s.minSize,r=s.maxSize,i=s.multiple,o=s.maxFiles;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(a){var c=V0(a,t),l=Uf(c,1),u=l[0],h=z0(a,n,r),f=Uf(h,1),p=f[0];return u&&p})}function ka(s){return typeof s.isPropagationStopped=="function"?s.isPropagationStopped():typeof s.cancelBubble<"u"?s.cancelBubble:!1}function Zo(s){return s.dataTransfer?Array.prototype.some.call(s.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!s.target&&!!s.target.files}function Hf(s){s.preventDefault()}function mw(s){return s.indexOf("MSIE")!==-1||s.indexOf("Trident/")!==-1}function gw(s){return s.indexOf("Edge/")!==-1}function _w(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return mw(s)||gw(s)}function xn(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.some(function(a){return!ka(n)&&a&&a.apply(void 0,[n].concat(i)),ka(n)})}}function yw(){return"showOpenFilePicker"in window}function vw(s){return s=typeof s=="string"?s.split(","):s,[{description:"everything",accept:Array.isArray(s)?s.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return zf(zf({},e),{},j0({},t,[]))},{}):{}}]}function bw(s){return s instanceof DOMException&&(s.name==="AbortError"||s.code===s.ABORT_ERR)}function xw(s){return s instanceof DOMException&&(s.name==="SecurityError"||s.code===s.SECURITY_ERR)}var ww=["children"],kw=["open"],Tw=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Ew=["refKey","onChange","onClick"];function Cw(s){return Aw(s)||Ow(s)||U0(s)||Sw()}function Sw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ow(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Aw(s){if(Array.isArray(s))return Rl(s)}function Kc(s,e){return Pw(s)||Rw(s,e)||U0(s,e)||Dw()}function Dw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0(s,e){if(s){if(typeof s=="string")return Rl(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Rl(s,e)}}function Rl(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=s[t];return n}function Rw(s,e){var t=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(t!=null){var n=[],r=!0,i=!1,o,a;try{for(t=t.call(s);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(i)throw a}}return n}}function Pw(s){if(Array.isArray(s))return s}function Yf(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function Be(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yf(Object(t),!0).forEach(function(n){Pl(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Yf(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function Pl(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Ta(s,e){if(s==null)return{};var t=Mw(s,e),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(t[n]=s[n])}return t}function Mw(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}var Pu=b.forwardRef(function(s,e){var t=s.children,n=Ta(s,ww),r=W0(n),i=r.open,o=Ta(r,kw);return b.useImperativeHandle(e,function(){return{open:i}},[i]),M.createElement(b.Fragment,null,t(Be(Be({},o),{},{open:i})))});Pu.displayName="Dropzone";var B0={disabled:!1,getFilesFromEvent:Gx,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Pu.defaultProps=B0;Pu.propTypes={children:ke.func,accept:ke.oneOfType([ke.string,ke.arrayOf(ke.string)]),multiple:ke.bool,preventDropOnDocument:ke.bool,noClick:ke.bool,noKeyboard:ke.bool,noDrag:ke.bool,noDragEventsBubbling:ke.bool,minSize:ke.number,maxSize:ke.number,maxFiles:ke.number,disabled:ke.bool,getFilesFromEvent:ke.func,onFileDialogCancel:ke.func,onFileDialogOpen:ke.func,useFsAccessApi:ke.bool,onDragEnter:ke.func,onDragLeave:ke.func,onDragOver:ke.func,onDrop:ke.func,onDropAccepted:ke.func,onDropRejected:ke.func,validator:ke.func};var Ml={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function W0(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Be(Be({},B0),s),t=e.accept,n=e.disabled,r=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,a=e.multiple,c=e.maxFiles,l=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,m=e.onDropRejected,d=e.onFileDialogCancel,g=e.onFileDialogOpen,_=e.useFsAccessApi,k=e.preventDropOnDocument,x=e.noClick,v=e.noKeyboard,y=e.noDrag,T=e.noDragEventsBubbling,E=e.validator,w=b.useMemo(function(){return typeof g=="function"?g:Gf},[g]),C=b.useMemo(function(){return typeof d=="function"?d:Gf},[d]),S=b.useRef(null),D=b.useRef(null),O=b.useReducer(Iw,Ml),j=Kc(O,2),V=j[0],W=j[1],B=V.isFocused,z=V.isFileDialogActive,U=V.draggedFiles,X=b.useRef(typeof window<"u"&&window.isSecureContext&&_&&yw()),K=function(){!X.current&&z&&setTimeout(function(){if(D.current){var fe=D.current.files;fe.length||(W({type:"closeDialog"}),C())}},300)};b.useEffect(function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}},[D,z,C,X]);var ee=b.useRef([]),N=function(fe){S.current&&S.current.contains(fe.target)||(fe.preventDefault(),ee.current=[])};b.useEffect(function(){return k&&(document.addEventListener("dragover",Hf,!1),document.addEventListener("drop",N,!1)),function(){k&&(document.removeEventListener("dragover",Hf),document.removeEventListener("drop",N))}},[S,k]);var L=b.useCallback(function(J){J.preventDefault(),J.persist(),P(J),ee.current=[].concat(Cw(ee.current),[J.target]),Zo(J)&&Promise.resolve(r(J)).then(function(fe){ka(J)&&!T||(W({draggedFiles:fe,isDragActive:!0,type:"setDraggedFiles"}),l&&l(J))})},[r,l,T]),A=b.useCallback(function(J){J.preventDefault(),J.persist(),P(J);var fe=Zo(J);if(fe&&J.dataTransfer)try{J.dataTransfer.dropEffect="copy"}catch{}return fe&&h&&h(J),!1},[h,T]),I=b.useCallback(function(J){J.preventDefault(),J.persist(),P(J);var fe=ee.current.filter(function(it){return S.current&&S.current.contains(it)}),Je=fe.indexOf(J.target);Je!==-1&&fe.splice(Je,1),ee.current=fe,!(fe.length>0)&&(W({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Zo(J)&&u&&u(J))},[S,u,T]),Y=b.useCallback(function(J,fe){var Je=[],it=[];J.forEach(function($t){var rs=V0($t,t),ur=Kc(rs,2),Oc=ur[0],Ac=ur[1],Dc=z0($t,o,i),No=Kc(Dc,2),Rc=No[0],Pc=No[1],Mc=E?E($t):null;if(Oc&&Rc&&!Mc)Je.push($t);else{var Ic=[Ac,Pc];Mc&&(Ic=Ic.concat(Mc)),it.push({file:$t,errors:Ic.filter(function(C_){return C_})})}}),(!a&&Je.length>1||a&&c>=1&&Je.length>c)&&(Je.forEach(function($t){it.push({file:$t,errors:[dw]})}),Je.splice(0)),W({acceptedFiles:Je,fileRejections:it,type:"setFiles"}),f&&f(Je,it,fe),it.length>0&&m&&m(it,fe),Je.length>0&&p&&p(Je,fe)},[W,a,t,o,i,c,f,p,m,E]),$=b.useCallback(function(J){J.preventDefault(),J.persist(),P(J),ee.current=[],Zo(J)&&Promise.resolve(r(J)).then(function(fe){ka(J)&&!T||Y(fe,J)}),W({type:"reset"})},[r,Y,T]),q=b.useCallback(function(){if(X.current){W({type:"openDialog"}),w();var J={multiple:a,types:vw(t)};window.showOpenFilePicker(J).then(function(fe){return r(fe)}).then(function(fe){Y(fe,null),W({type:"closeDialog"})}).catch(function(fe){bw(fe)?(C(fe),W({type:"closeDialog"})):xw(fe)&&(X.current=!1,D.current&&(D.current.value=null,D.current.click()))});return}D.current&&(W({type:"openDialog"}),w(),D.current.value=null,D.current.click())},[W,w,C,_,Y,t,a]),oe=b.useCallback(function(J){!S.current||!S.current.isEqualNode(J.target)||(J.key===" "||J.key==="Enter"||J.keyCode===32||J.keyCode===13)&&(J.preventDefault(),q())},[S,q]),re=b.useCallback(function(){W({type:"focus"})},[]),ie=b.useCallback(function(){W({type:"blur"})},[]),ne=b.useCallback(function(){x||(_w()?setTimeout(q,0):q())},[x,q]),me=function(fe){return n?null:fe},te=function(fe){return v?null:me(fe)},H=function(fe){return y?null:me(fe)},P=function(fe){T&&fe.stopPropagation()},R=b.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=J.refKey,Je=fe===void 0?"ref":fe,it=J.role,$t=J.onKeyDown,rs=J.onFocus,ur=J.onBlur,Oc=J.onClick,Ac=J.onDragEnter,Dc=J.onDragOver,No=J.onDragLeave,Rc=J.onDrop,Pc=Ta(J,Tw);return Be(Be(Pl({onKeyDown:te(xn($t,oe)),onFocus:te(xn(rs,re)),onBlur:te(xn(ur,ie)),onClick:me(xn(Oc,ne)),onDragEnter:H(xn(Ac,L)),onDragOver:H(xn(Dc,A)),onDragLeave:H(xn(No,I)),onDrop:H(xn(Rc,$)),role:typeof it=="string"&&it!==""?it:"button"},Je,S),!n&&!v?{tabIndex:0}:{}),Pc)}},[S,oe,re,ie,ne,L,A,I,$,v,y,n]),Q=b.useCallback(function(J){J.stopPropagation()},[]),se=b.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=J.refKey,Je=fe===void 0?"ref":fe,it=J.onChange,$t=J.onClick,rs=Ta(J,Ew),ur=Pl({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:me(xn(it,$)),onClick:me(xn($t,Q)),tabIndex:-1},Je,D);return Be(Be({},ur),rs)}},[D,t,a,$,n]),ce=U.length,ye=ce>0&&pw({files:U,accept:t,minSize:o,maxSize:i,multiple:a,maxFiles:c}),Qe=ce>0&&!ye;return Be(Be({},V),{},{isDragAccept:ye,isDragReject:Qe,isFocused:B&&!n,getRootProps:R,getInputProps:se,rootRef:S,inputRef:D,open:me(q)})}function Iw(s,e){switch(e.type){case"focus":return Be(Be({},s),{},{isFocused:!0});case"blur":return Be(Be({},s),{},{isFocused:!1});case"openDialog":return Be(Be({},Ml),{},{isFileDialogActive:!0});case"closeDialog":return Be(Be({},s),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return Be(Be({},s),{},{draggedFiles:n,isDragActive:t});case"setFiles":return Be(Be({},s),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Be({},Ml);default:return s}}function Gf(){}function Nw(s){let e;const t=new Set,n=(l,u)=>{const h=typeof l=="function"?l(e):l;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),t.forEach(p=>p(e,f))}},r=()=>e,i=(l,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function p(){const m=u(e);if(!h(f,m)){const d=f;l(f=m,d)}}return t.add(p),()=>t.delete(p)},c={setState:n,getState:r,subscribe:(l,u,h)=>u||h?i(l,u,h):(t.add(l),()=>t.delete(l)),destroy:()=>t.clear()};return e=s(n,r,c),c}const $w=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Xf=$w?b.useEffect:b.useLayoutEffect;function Fw(s){const e=typeof s=="function"?Nw(s):s,t=(n=e.getState,r=Object.is)=>{const[,i]=b.useReducer(g=>g+1,0),o=e.getState(),a=b.useRef(o),c=b.useRef(n),l=b.useRef(r),u=b.useRef(!1),h=b.useRef();h.current===void 0&&(h.current=n(o));let f,p=!1;(a.current!==o||c.current!==n||l.current!==r||u.current)&&(f=n(o),p=!r(h.current,f)),Xf(()=>{p&&(h.current=f),a.current=o,c.current=n,l.current=r,u.current=!1});const m=b.useRef(o);Xf(()=>{const g=()=>{try{const k=e.getState(),x=c.current(k);l.current(h.current,x)||(a.current=k,h.current=x,i())}catch{u.current=!0,i()}},_=e.subscribe(g);return e.getState()!==m.current&&g(),_},[]);const d=p?f:h.current;return b.useDebugValue(d),d};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const Lw=s=>(e,t,n)=>{const r=n.subscribe;return n.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let h=o(n.getState());l=f=>{const p=o(f);if(!u(h,p)){const m=h;a(h=p,m)}},c!=null&&c.fireImmediately&&a(h,h)}return r(l)},s(e,t,n)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var jw=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Vw=jw;function Zf(s){return Vw(s)===!0&&Object.prototype.toString.call(s)==="[object Object]"}var q0=function(e){var t,n;return!(Zf(e)===!1||(t=e.constructor,typeof t!="function")||(n=t.prototype,Zf(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var zw=q0,Mu=function(e){return zw(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Uw=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e)===!1)break},Bw=Mu,Ww=Uw;function H0(s,e){for(var t=arguments.length,n=0;++n<t;){var r=arguments[n];Il(r)&&Ww(r,qw,s)}return s}function qw(s,e){if(Hw(e)){var t=this[e];Il(s)&&Il(t)?H0(t,s):this[e]=s}}function Il(s){return Bw(s)&&!Array.isArray(s)}function Hw(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}var Yw=H0;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Gw=function(s,e,t,n,r){if(!Xw(s)||!e)return s;if(e=Ko(e),t&&(e+="."+Ko(t)),n&&(e+="."+Ko(n)),r&&(e+="."+Ko(r)),e in s)return s[e];for(var i=e.split("."),o=i.length,a=-1;s&&++a<o;){for(var c=i[a];c[c.length-1]==="\\";)c=c.slice(0,-1)+"."+i[++a];s=s[c]}return s};function Xw(s){return s!==null&&(typeof s=="object"||typeof s=="function")}function Ko(s){return s?Array.isArray(s)?s.join("."):s:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Zw=function(s,e){if(s===null||typeof s>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return s;for(var t=Object.prototype.propertyIsEnumerable,n=Object(s),r=arguments.length,i=0;++i<r;)for(var o=Object(arguments[i]),a=Object.getOwnPropertySymbols(o),c=0;c<a.length;c++){var l=a[c];t.call(o,l)&&(n[l]=o[l])}return n},Kw=Mu,Qw=Zw,Jw=Object.assign||function(s){if(s===null||typeof s>"u")throw new TypeError("Cannot convert undefined or null to object");Kf(s)||(s={});for(var e=1;e<arguments.length;e++){var t=arguments[e];tk(t)&&(t=nk(t)),Kf(t)&&(ek(s,t),Qw(s,t))}return s};function ek(s,e){for(var t in e)sk(e,t)&&(s[t]=e[t])}function tk(s){return s&&typeof s=="string"}function nk(s){var e={};for(var t in s)e[t]=s[t];return e}function Kf(s){return s&&typeof s=="object"||Kw(s)}function sk(s,e){return Object.prototype.hasOwnProperty.call(s,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var rk=Jw,ik=function(s,e,t){if(typeof s!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var n=rk({sep:"."},e),r=n.quotes||['"',"'","`"],i;n.brackets===!0?i={"<":">","(":")","[":"]","{":"}"}:n.brackets&&(i=n.brackets);var o=[],a=[],c=[""],l=n.sep,u=s.length,h=-1,f;function p(){if(i&&a.length)return i[a[a.length-1]]}for(;++h<u;){var m=s[h],d=s[h+1],g={val:m,idx:h,arr:c,str:s};if(o.push(g),m==="\\"){g.val=ak(n,s,h)===!0?m+d:d,g.escaped=!0,typeof t=="function"&&t(g),c[c.length-1]+=g.val,h++;continue}if(i&&i[m]){a.push(m);var _=p(),k=h+1;if(s.indexOf(_,k+1)!==-1)for(;a.length&&k<u;){var x=s[++k];if(x==="\\"){x++;continue}if(r.indexOf(x)!==-1){k=Nl(s,x,k+1);continue}if(_=p(),a.length&&s.indexOf(_,k+1)===-1)break;if(i[x]){a.push(x);continue}_===x&&a.pop()}if(f=k,f===-1){c[c.length-1]+=m;continue}m=s.slice(h,f+1),g.val=m,g.idx=h=f}if(r.indexOf(m)!==-1){if(f=Nl(s,m,h+1),f===-1){c[c.length-1]+=m;continue}ok(m,n)===!0?m=s.slice(h,f+1):m=s.slice(h+1,f),g.val=m,g.idx=h=f}if(typeof t=="function"&&(t(g,o),m=g.val,h=g.idx),g.val===l&&g.split!==!1){c.push("");continue}c[c.length-1]+=g.val}return c};function Nl(s,e,t,n){var r=s.indexOf(e,t);return s.charAt(r-1)==="\\"?Nl(s,e,r+1):r}function ok(s,e){return e.keepDoubleQuotes===!0&&s==='"'||e.keepSingleQuotes===!0&&s==="'"?!0:e.keepQuotes}function ak(s,e,t){return typeof s.keepEscaping=="function"?s.keepEscaping(e,t):s.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ck=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},Qf=ck,lk=function(e){Qf(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var r=arguments[n];Qf(r)&&uk(e,r)}return e};function uk(s,e){for(var t in e)hk(e,t)&&(s[t]=e[t])}function hk(s,e){return Object.prototype.hasOwnProperty.call(s,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var fk=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var dk=ik,pk=lk,Jf=q0,ed=fk,mk=function(s,e,t){if(!ed(s)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return s;for(var n=dk(e,{sep:".",brackets:!0}).filter(gk),r=n.length,i=-1,o=s;++i<r;){var a=n[i];if(i!==r-1){ed(o[a])||(o[a]={}),o=o[a];continue}Jf(o[a])&&Jf(t)?o[a]=pk({},o[a],t):o[a]=t}return s};function gk(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}var Qc=Mu,td=Yw,_k=Gw,nd=mk,yk=function(e,t,n){if(!Qc(e))throw new TypeError("expected an object");if(typeof t!="string"||n==null)return td.apply(null,arguments);if(typeof n=="string")return nd(e,t,n),e;var r=_k(e,t);return Qc(n)&&Qc(r)&&(n=td({},r,n)),nd(e,t,n),e};const vk=O_(yk),Iu=(...s)=>s.filter(Boolean).join(".");function bk(s){const e=s.split(".");return[e.pop(),e.join(".")||void 0]}function xk(s,e){return Object.entries(Xv(s,e)).reduce((t,[,{value:n,disabled:r,key:i}])=>(t[i]=r?void 0:n,t),{})}function wk(s,e){const t=b.useRef();return(e?Vi:bo)(s,t.current)||(t.current=s),t.current}function Y0(s,e){return b.useMemo(s,wk(e,!0))}function kk(s){const e=b.useRef(null),t=b.useRef(null),n=b.useRef(!0);return b.useLayoutEffect(()=>{s||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),b.useEffect(()=>{if(n.current){n.current=!1;return}let r;const i=e.current,o=()=>{s&&(i.style.removeProperty("height"),i.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};i.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return i.style.height=a+"px",s||(i.style.overflow="hidden",r=window.setTimeout(()=>i.style.height="0px",50)),()=>{i.removeEventListener("transitionend",o),clearTimeout(r)}},[s]),{wrapperRef:e,contentRef:t}}const Tk=s=>{const[e,t]=b.useState(s.getVisiblePaths());return b.useEffect(()=>{t(s.getVisiblePaths());const n=s.useStore.subscribe(s.getVisiblePaths,t,{equalityFn:bo});return()=>n()},[s]),e};function Ek(s,e,t){return s.useStore(r=>{const i=he(he({},t),r.data);return xk(i,e)},bo)}function G0(s=3){const e=b.useRef(null),t=b.useRef(null),[n,r]=b.useState(!1),i=b.useCallback(()=>r(!0),[]),o=b.useCallback(()=>r(!1),[]);return b.useLayoutEffect(()=>{if(n){const{bottom:a,top:c,left:l}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),h=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=l+"px",h==="down"?t.current.style.top=a+s+"px":t.current.style.bottom=window.innerHeight-c+s+"px"}},[s,n]),{popinRef:e,wrapperRef:t,shown:n,show:i,hide:o}}Px([Mx]);const Ck={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};St.extend({color:()=>s=>vt(s).isValid()});const Sk=s=>St().color().test(s);function X0(s,{format:e,hasAlpha:t,isString:n}){const r=Ck[e]+(n&&e!=="hex"?"String":""),i=s[r]();return typeof i=="object"&&!t?Zv(i,["a"]):i}const Z0=(s,e)=>{const t=vt(s);if(!t.isValid())throw Error("Invalid color");return X0(t,e)},Ok=(s,e)=>X0(vt(s),he(he({},e),{},{isString:!0,format:"hex"})),Ak=({value:s})=>{const e=Rx(s),t=e==="name"?"hex":e,n=typeof s=="object"?"a"in s:e==="hex"&&s.length===8||/^(rgba)|(hsla)|(hsva)/.test(s),r={format:t,hasAlpha:n,isString:typeof s=="string"};return{value:Z0(s,r),settings:r}};var Dk=Object.freeze({__proto__:null,schema:Sk,sanitize:Z0,format:Ok,normalize:Ak});const Rk=ae("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Pk=ae("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Mk=ae("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function sd(s,e){return e!=="rgb"?vt(s).toRgb():s}function Ik({value:s,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:r,emitOnEditEnd:i}=_t(),{format:o,hasAlpha:a}=t,{popinRef:c,wrapperRef:l,shown:u,show:h,hide:f}=G0(),p=b.useRef(0),[m,d]=b.useState(()=>sd(s,o)),g=a?Vx:Ux,_=()=>{d(sd(s,o)),h(),r()},k=()=>{f(),i(),window.clearTimeout(p.current)},x=()=>{p.current=window.setTimeout(k,500)};return b.useEffect(()=>()=>window.clearTimeout(p.current),[]),M.createElement(M.Fragment,null,M.createElement(Rk,{ref:c,active:u,onClick:()=>_(),style:{color:e}}),u&&M.createElement(Eu,null,M.createElement(_0,{onPointerUp:k}),M.createElement(Mk,{ref:l,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:v=>v.buttons===0&&x()},M.createElement(g,{color:m,onChange:n}))))}function Nk(){const{value:s,displayValue:e,label:t,onChange:n,onUpdate:r,settings:i}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,t),M.createElement(Pk,null,M.createElement(Ik,{value:s,displayValue:e,onChange:n,onUpdate:r,settings:i}),M.createElement(Tu,{value:e,onChange:n,onUpdate:r})))}var $k=he({component:Nk},Dk);function Fk(){const{label:s,displayValue:e,onUpdate:t,settings:n}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(Su,{value:e,settings:n,onUpdate:t}))}var Lk=he({component:Fk},E0(["x","y","z"]));const jk=ae("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Vk=ae("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function zk({value:s,settings:e,onUpdate:t}){const n=b.useRef(),r=b.useRef(0),i=b.useRef(0),o=b.useRef(1),[a,c]=b.useState(!1),[l,u]=b.useState(!1),[h,f]=v0(),p=b.useRef(null),m=b.useRef(null);b.useLayoutEffect(()=>{if(a){const{top:O,left:j,width:V,height:W}=p.current.getBoundingClientRect();m.current.style.left=j+V/2+"px",m.current.style.top=O+W/2+"px"}},[a]);const{keys:[d,g],joystick:_}=e,k=_==="invertY"?1:-1,{[d]:{step:x},[g]:{step:v}}=e,y=Bn("sizes","joystickWidth"),T=Bn("sizes","joystickHeight"),E=parseFloat(y)*.8/2,w=parseFloat(T)*.8/2,C=b.useCallback(()=>{n.current||(u(!0),r.current&&f({x:r.current*E}),i.current&&f({y:i.current*-w}),n.current=window.setInterval(()=>{t(O=>{const j=x*r.current*o.current,V=k*v*i.current*o.current;return Array.isArray(O)?{[d]:O[0]+j,[g]:O[1]+V}:{[d]:O[d]+j,[g]:O[g]+V}})},16))},[E,w,t,f,x,v,d,g,k]),S=b.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,u(!1)},[]);b.useEffect(()=>{function O(j){o.current=s0(j)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const D=wo(({first:O,active:j,delta:[V,W],movement:[B,z]})=>{O&&c(!0);const U=bs(B,-E,E),X=bs(z,-w,w);r.current=Math.abs(B)>Math.abs(U)?Math.sign(B-U):0,i.current=Math.abs(z)>Math.abs(X)?Math.sign(X-z):0;let K=s[d],ee=s[g];j?(r.current||(K+=V*x*o.current,f({x:U})),i.current||(ee-=k*W*v*o.current,f({y:X})),r.current||i.current?C():S(),t({[d]:K,[g]:ee})):(c(!1),r.current=0,i.current=0,f({x:0,y:0}),S())});return M.createElement(jk,Ke({ref:p},D()),a&&M.createElement(Eu,null,M.createElement(Vk,{ref:m,isOutOfBounds:l},M.createElement("div",null),M.createElement("span",{ref:h}))))}const Uk=ae("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Bk(){const{label:s,displayValue:e,onUpdate:t,settings:n}=_t();return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(Uk,{withJoystick:!!n.joystick},n.joystick&&M.createElement(zk,{value:e,settings:n,onUpdate:t}),M.createElement(Su,{value:e,settings:n,onUpdate:t})))}const Wk=["joystick"],K0=E0(["x","y"]),qk=s=>{let{joystick:e=!0}=s,t=De(s,Wk);const{value:n,settings:r}=K0.normalize(t);return{value:n,settings:he(he({},r),{},{joystick:e})}};var Hk=he(he({component:Bk},K0),{},{normalize:qk});const Yk=s=>{if(s!==void 0){if(s instanceof File)try{return URL.createObjectURL(s)}catch{return}if(typeof s=="string"&&s.indexOf("blob:")===0)return s;throw Error("Invalid image format [undefined | blob |File].")}},Gk=(s,e)=>typeof e=="object"&&"image"in e,Xk=({image:s})=>({value:s});var Zk=Object.freeze({__proto__:null,sanitize:Yk,schema:Gk,normalize:Xk});const Kk=ae("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Qk=ae("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Jk=ae("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),eT=ae("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),tT=ae("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),nT=ae("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function sT(){const{label:s,value:e,onUpdate:t,disabled:n}=_t(),{popinRef:r,wrapperRef:i,shown:o,show:a,hide:c}=G0(),l=b.useCallback(m=>{m.length&&t(m[0])},[t]),u=b.useCallback(m=>{m.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:f,isDragAccept:p}=W0({maxFiles:1,accept:"image/*",onDrop:l,disabled:n});return M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(Kk,null,M.createElement(Jk,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:c,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&M.createElement(Eu,null,M.createElement(_0,{onPointerUp:c,style:{cursor:"pointer"}}),M.createElement(eT,{ref:i,style:{backgroundImage:`url(${e})`}})),M.createElement(Qk,h({isDragAccept:p}),M.createElement("input",f()),M.createElement(tT,null,p?"drop image":"click or drop")),M.createElement(nT,{onClick:u,disabled:!e})))}var rT=he({component:sT},Zk);const rd=St().number(),iT=(s,e)=>St().array().length(2).every.number().test(s)&&St().schema({min:rd,max:rd}).test(e),Ea=s=>({min:s[0],max:s[1]}),Q0=(s,{bounds:[e,t]},n)=>{const r=Array.isArray(s)?Ea(s):s,i={min:n[0],max:n[1]},{min:o,max:a}=he(he({},i),r);return[bs(Number(o),e,Math.max(e,a)),bs(Number(a),Math.min(t,o),t)]},oT=({value:s,min:e,max:t})=>{const n={min:e,max:t},r=T0(Ea(s),{min:n,max:n}),i=[e,t],o=he(he({},r),{},{bounds:i});return{value:Q0(Ea(s),o,s),settings:o}};var aT=Object.freeze({__proto__:null,schema:iT,format:Ea,sanitize:Q0,normalize:oT});const cT=["value","bounds","onDrag"],lT=["bounds"],uT=ae("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function hT(s){let{value:e,bounds:[t,n],onDrag:r}=s,i=De(s,cT);const o=b.useRef(null),a=b.useRef(null),c=b.useRef(null),l=b.useRef(0),u=Bn("sizes","scrubberWidth"),h=wo(({event:m,first:d,xy:[g],movement:[_],memo:k={}})=>{if(d){const{width:v,left:y}=o.current.getBoundingClientRect();l.current=v-parseFloat(u);const T=(m==null?void 0:m.target)===a.current||(m==null?void 0:m.target)===c.current;k.pos=ba((g-y)/v,t,n);const E=Math.abs(k.pos-e.min)-Math.abs(k.pos-e.max);k.key=E<0||E===0&&k.pos<=e.min?"min":"max",T&&(k.pos=e[k.key])}const x=k.pos+ba(_/l.current,0,n-t);return r({[k.key]:Lb(x,i[k.key])}),k}),f=`calc(${va(e.min,t,n)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-va(e.max,t,n)} * (100% - ${u} - 8px) + 4px)`;return M.createElement(x0,Ke({ref:o},h()),M.createElement(b0,null,M.createElement(w0,{style:{left:f,right:p}})),M.createElement(kl,{position:"left",ref:a,style:{left:f}}),M.createElement(kl,{position:"right",ref:c,style:{right:p}}))}function fT(){const{label:s,displayValue:e,onUpdate:t,settings:n}=_t(),r=De(n,lT);return M.createElement(M.Fragment,null,M.createElement(tn,{input:!0},M.createElement(pn,null,s),M.createElement(uT,null,M.createElement(hT,Ke({value:e},n,{onDrag:t})),M.createElement(Su,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var dT=he({component:fT},aT);const pT=()=>{const s=new Map;return{on:(e,t)=>{let n=s.get(e);n===void 0&&(n=new Set,s.set(e,n)),n.add(t)},off:(e,t)=>{const n=s.get(e);n!==void 0&&(n.delete(t),n.size===0&&s.delete(e))},emit:(e,...t)=>{const n=s.get(e);if(n!==void 0)for(const r of n)r(...t)}}},mT=["type","value"],gT=["onChange","transient","onEditStart","onEditEnd"],_T=function(){const e=Fw(Lw(()=>({data:{}}))),t=pT();this.storeId=Gv(),this.useStore=e;const n={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),c=[];Object.entries(n).forEach(([u,h])=>{h.render&&a.some(f=>f.indexOf(u)===0)&&!h.render(this.get)&&c.push(u+".")});const l=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&c.every(h=>u.indexOf(h)===-1)&&(!o[u].render||o[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const c=a.data;return o.forEach(l=>{if(l in c){const u=c[l];u.__refCount--,u.__refCount===0&&u.type in cn&&delete c[l]}}),{data:c}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>n[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,h])=>{let f=l[u];if(f){const{type:p,value:m}=h,d=De(h,mT);p!==f.type?Un(We.INPUT_TYPE_OVERRIDE,p):((f.__refCount===0||a)&&Object.assign(f,d),f.__refCount++)}else l[u]=he(he({},h),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(o,a,c)=>{e.setState(l=>{const u=l.data;return Sf(u[o],a,o,this,c),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(c=>{const l=c.data;return l[o].settings=he(he({},l[o].settings),a),{data:l}})},this.disableInputAtPath=(o,a)=>{e.setState(c=>{const l=c.data;return l[o].disabled=a,{data:l}})},this.set=(o,a)=>{e.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,h])=>{try{Sf(l[u],h,void 0,void 0,a)}catch{}}),{data:l}})},this.getInput=o=>{try{return this.getData()[o]}catch{Un(We.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,he(he({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,he(he({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const c=`onEditStart:${o}`;return t.on(c,a),()=>t.off(c,a)},this.subscribeToEditEnd=(o,a)=>{const c=`onEditEnd:${o}`;return t.on(c,a),()=>t.off(c,a)};const i=(o,a,c)=>{const l={};return Object.entries(o).forEach(([u,h])=>{if(u==="")return Un(We.EMPTY_KEY);let f=Iu(a,u);if(h.type===cn.FOLDER){const p=i(h.schema,f,c);Object.assign(l,p),f in n||(n[f]=h.settings)}else if(u in c)Un(We.DUPLICATE_KEYS,u,f,c[u].path);else{const p=nb(h,u,f,l);if(p){const{type:m,options:d,input:g}=p,{onChange:_,transient:k,onEditStart:x,onEditEnd:v}=d,y=De(d,gT);l[f]=he(he(he({type:m},y),g),{},{fromPanel:!0}),c[u]={path:f,onChange:_,transient:k,onEditStart:x,onEditEnd:v}}else Un(We.UNKNOWN_INPUT,f,h)}}),l};this.getDataFromSchema=o=>{const a={};return[i(o,"",a),a]}},J0=new _T,yT={collapsed:!1};function vT(s,e){return{type:cn.FOLDER,schema:s,settings:he(he({},yT),e)}}const id=s=>"__levaInput"in s,bT=(s,e)=>{const t={},n=e?e.toLowerCase():null;return s.forEach(r=>{const[i,o]=bk(r);(!n||i.toLowerCase().indexOf(n)>-1)&&vk(t,o,{[i]:{__levaInput:!0,path:r}})}),t},xT=["type","label","path","valueKey","value","settings","setValue","disabled"];function wT(s){let{type:e,label:t,path:n,valueKey:r,value:i,settings:o,setValue:a,disabled:c}=s,l=De(s,xT);const{displayValue:u,onChange:h,onUpdate:f}=y0({type:e,value:i,settings:o,setValue:a}),p=Ks[e].component;return p?M.createElement(c0.Provider,{value:he({key:r,path:n,id:""+n,label:t,displayValue:u,value:i,onChange:h,onUpdate:f,settings:o,setValue:a,disabled:c},l)},M.createElement(wb,{disabled:c},M.createElement(p,null))):(Un(We.NO_COMPONENT_FOR_TYPE,e,n),null)}const kT=ae("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function TT({onClick:s,settings:e,label:t}){const n=xo();return M.createElement(tn,null,M.createElement(kT,{disabled:e.disabled,onClick:()=>s(n.get)},t))}const ET=ae("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),CT=ae("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),ST=({label:s,opts:e})=>{let t=typeof s=="string"&&s.trim()===""?null:s,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function OT(s){const{label:e,opts:t}=ST(s),n=xo();return M.createElement(tn,{input:!!e},e&&M.createElement(pn,null,e),M.createElement(ET,null,Object.entries(t).map(([r,i])=>M.createElement(CT,{key:r,onClick:()=>i(n.get)},r))))}const AT=ae("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),em=100;function DT(s,e){s.push(e),s.length>em&&s.shift()}const RT=b.forwardRef(function({initialValue:s},e){const t=Bn("colors","highlight3"),n=Bn("colors","elevation2"),r=Bn("colors","highlight1"),[i,o]=b.useMemo(()=>[vt(r).alpha(.4).toRgbString(),vt(r).alpha(.1).toRgbString()],[r]),a=b.useRef([s]),c=b.useRef(s),l=b.useRef(s),u=b.useRef(),h=b.useCallback((m,d)=>{if(!m)return;const{width:g,height:_}=m,k=new Path2D,x=g/em,v=_*.05;for(let E=0;E<a.current.length;E++){const w=va(a.current[E],c.current,l.current),C=x*E,S=_-w*(_-v*2)-v;k.lineTo(C,S)}d.clearRect(0,0,g,_);const y=new Path2D(k);y.lineTo(x*(a.current.length+1),_),y.lineTo(0,_),y.lineTo(0,0);const T=d.createLinearGradient(0,0,0,_);T.addColorStop(0,i),T.addColorStop(1,o),d.fillStyle=T,d.fill(y),d.strokeStyle=n,d.lineJoin="round",d.lineWidth=14,d.stroke(k),d.strokeStyle=t,d.lineWidth=2,d.stroke(k)},[t,n,i,o]),[f,p]=Rb(h);return b.useImperativeHandle(e,()=>({frame:m=>{(c.current===void 0||m<c.current)&&(c.current=m),(l.current===void 0||m>l.current)&&(l.current=m),DT(a.current,m),u.current=requestAnimationFrame(()=>h(f.current,p.current))}}),[f,p,h]),b.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),M.createElement(AT,{ref:f})}),od=s=>Number.isFinite(s)?s.toPrecision(2):s.toString(),PT=b.forwardRef(function({initialValue:s},e){const[t,n]=b.useState(od(s));return b.useImperativeHandle(e,()=>({frame:r=>n(od(r))}),[]),M.createElement("div",null,t)});function ad(s){return typeof s=="function"?s():s.current}function MT({label:s,objectOrFn:e,settings:t}){const n=b.useRef(),r=b.useRef(ad(e));return b.useEffect(()=>{const i=window.setInterval(()=>{var o;document.hidden||(o=n.current)===null||o===void 0||o.frame(ad(e))},t.interval);return()=>window.clearInterval(i)},[e,t.interval]),M.createElement(tn,{input:!0},M.createElement(pn,{align:"top"},s),t.graph?M.createElement(RT,{ref:n,initialValue:r.current}):M.createElement(PT,{ref:n,initialValue:r.current}))}const IT=["type","label","key"],NT={[cn.BUTTON]:TT,[cn.BUTTON_GROUP]:OT,[cn.MONITOR]:MT},$T=M.memo(({path:s})=>{const[e,{set:t,setSettings:n,disable:r,storeId:i,emitOnEditStart:o,emitOnEditEnd:a}]=Mb(s);if(!e)return null;const{type:c,label:l,key:u}=e,h=De(e,IT);if(c in cn){const f=NT[c];return M.createElement(f,Ke({label:l,path:s},h))}return c in Ks?M.createElement(wT,Ke({key:i+s,type:c,label:l,storeId:i,path:s,valueKey:u,setValue:t,setSettings:n,disable:r,emitOnEditStart:o,emitOnEditEnd:a},h)):(Vv(We.UNSUPPORTED_INPUT,c,s),null)});function FT({toggle:s,toggled:e,name:t}){return M.createElement(vb,{onClick:()=>s()},M.createElement(Cu,{toggled:e}),M.createElement("div",null,t))}const LT=({name:s,path:e,tree:t})=>{const n=xo(),r=Iu(e,s),{collapsed:i,color:o}=n.getFolderSettings(r),[a,c]=b.useState(!i),l=b.useRef(null),u=Bn("colors","folderWidgetColor"),h=Bn("colors","folderTextColor");return b.useLayoutEffect(()=>{l.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),l.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,u,h]),M.createElement(xa,{ref:l},M.createElement(FT,{name:s,toggled:a,toggle:()=>c(f=>!f)}),M.createElement(tm,{parent:r,tree:t,toggled:a}))},tm=M.memo(({isRoot:s=!1,fill:e=!1,flat:t=!1,parent:n,tree:r,toggled:i})=>{const{wrapperRef:o,contentRef:a}=kk(i),c=xo(),l=([h,f])=>{var p;return(id(f)?(p=c.getInput(f.path))===null||p===void 0?void 0:p.order:c.getFolderSettings(Iu(n,h)).order)||0},u=Object.entries(r).sort((h,f)=>l(h)-l(f));return M.createElement(xl,{ref:o,isRoot:s,fill:e,flat:t},M.createElement(p0,{ref:a,isRoot:s,toggled:i},u.map(([h,f])=>id(f)?M.createElement($T,{key:f.path,valueKey:f.valueKey,path:f.path}):M.createElement(LT,{key:h,name:h,path:n,tree:f}))))}),jT=ae("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${g0}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),nm=40,Ca=ae("i",{$flexCenter:"",width:nm,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),VT=ae("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),zT=ae("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Ca}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),UT=ae("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),BT=ae("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:nm}}}}),WT=M.forwardRef(({setFilter:s,toggle:e},t)=>{const[n,r]=b.useState(""),i=b.useMemo(()=>n0(s,250),[s]),o=()=>{s(""),r("")},a=c=>{const l=c.currentTarget.value;e(!0),r(l)};return b.useEffect(()=>{i(n)},[n,i]),M.createElement(M.Fragment,null,M.createElement(UT,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:a}),M.createElement(Ca,{onClick:()=>o(),style:{visibility:n?"visible":"hidden"}},M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},M.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function qT({setFilter:s,onDrag:e,onDragStart:t,onDragEnd:n,toggle:r,toggled:i,title:o,drag:a,filterEnabled:c,from:l}){const[u,h]=b.useState(!1),f=b.useRef(null);b.useEffect(()=>{var m,d;u?(m=f.current)===null||m===void 0||m.focus():(d=f.current)===null||d===void 0||d.blur()},[u]);const p=wo(({offset:[m,d],first:g,last:_})=>{e({x:m,y:d}),g&&t({x:m,y:d}),_&&n({x:m,y:d})},{filterTaps:!0,from:({offset:[m,d]})=>[(l==null?void 0:l.x)||m,(l==null?void 0:l.y)||d]});return b.useEffect(()=>{const m=d=>{d.key==="L"&&d.shiftKey&&d.metaKey&&h(g=>!g)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),M.createElement(M.Fragment,null,M.createElement(VT,{mode:a?"drag":void 0},M.createElement(Ca,{active:!i,onClick:()=>r()},M.createElement(Cu,{toggled:i,width:12,height:8})),M.createElement(BT,Ke({},a?p():{},{drag:a,filterEnabled:c}),o===void 0&&a?M.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},M.createElement("circle",{cx:"2",cy:"2",r:"2"}),M.createElement("circle",{cx:"14",cy:"2",r:"2"}),M.createElement("circle",{cx:"26",cy:"2",r:"2"}),M.createElement("circle",{cx:"2",cy:"12",r:"2"}),M.createElement("circle",{cx:"14",cy:"12",r:"2"}),M.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),c&&M.createElement(Ca,{active:u,onClick:()=>h(m=>!m)},M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},M.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),M.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),M.createElement(zT,{toggled:u},M.createElement(WT,{ref:f,setFilter:s,toggle:r})))}const HT=["store","hidden","theme","collapsed"];function YT(s){let{store:e,hidden:t=!1,theme:n,collapsed:r=!1}=s,i=De(s,HT);const o=Y0(()=>db(n),[n]),[a,c]=b.useState(!r),l=typeof r=="object"?!r.collapsed:a,u=b.useMemo(()=>typeof r=="object"?h=>{typeof h=="function"?r.onChange(!h(!r.collapsed)):r.onChange(!h)}:c,[r]);return!e||t?null:M.createElement(ku.Provider,{value:o},M.createElement(GT,Ke({store:e},i,{toggled:l,setToggle:u,rootClass:o.className})))}const GT=M.memo(({store:s,rootClass:e,fill:t=!1,flat:n=!1,neverHide:r=!1,oneLineLabels:i=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:c,setToggle:l})=>{var u,h;const f=Tk(s),[p,m]=b.useState(""),d=b.useMemo(()=>bT(f,p),[f,p]),[g,_]=v0(),k=r||f.length>0,x=typeof o=="object"&&o.title||void 0,v=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,y=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,T=typeof o=="object"&&o.position||void 0,E=typeof o=="object"&&o.onDrag||void 0,w=typeof o=="object"&&o.onDragStart||void 0,C=typeof o=="object"&&o.onDragEnd||void 0;return M.useEffect(()=>{_({x:T==null?void 0:T.x,y:T==null?void 0:T.y})},[T,_]),fb(),M.createElement(u0.Provider,{value:{hideCopyButton:a}},M.createElement(jT,{ref:g,className:e,fill:t,flat:n,oneLineLabels:i,hideTitleBar:!o,style:{display:k?"block":"none"}},o&&M.createElement(qT,{onDrag:S=>{_(S),E==null||E(S)},onDragStart:S=>w==null?void 0:w(S),onDragEnd:S=>C==null?void 0:C(S),setFilter:m,toggle:S=>l(D=>S??!D),toggled:c,title:x,drag:v,filterEnabled:y,from:T}),k&&M.createElement(l0.Provider,{value:s},M.createElement(tm,{isRoot:!0,fill:t,flat:n,tree:d,toggled:c}))))}),XT=["isRoot"];let Sa=!1,Vs=null;function sm(s){let{isRoot:e=!1}=s,t=De(s,XT);return b.useEffect(()=>(Sa=!0,!e&&Vs&&(Vs.remove(),Vs=null),()=>{e||(Sa=!1)}),[e]),M.createElement(YT,Ke({store:J0},t))}function ZT(s){b.useEffect(()=>{s&&!Sa&&(Vs||(Vs=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Vs),rb(M.createElement(sm,{isRoot:!0}),Vs))),Sa=!0)},[s])}function KT(s,e,t,n,r){let i,o,a,c,l;return typeof s=="string"?(o=s,i=e,Array.isArray(t)?l=t:t&&("store"in t?(c=t,l=n):(a=t,Array.isArray(n)?l=n:(c=n,l=r)))):(i=s,Array.isArray(e)?l=e:(c=e,l=t)),{schema:i,folderName:o,folderSettings:a,hookSettings:c,deps:l||[]}}function QT(s,e,t,n,r){const{folderName:i,schema:o,folderSettings:a,hookSettings:c,deps:l}=KT(s,e,t,n,r),u=typeof o=="function",h=b.useRef(!1),f=b.useRef(!0),p=Y0(()=>{h.current=!0;const D=typeof o=="function"?o():o;return i?{[i]:vT(D,a)}:D},l),m=!(c!=null&&c.store);ZT(m);const[d]=b.useState(()=>(c==null?void 0:c.store)||J0),[g,_]=b.useMemo(()=>d.getDataFromSchema(p),[d,p]),[k,x,v,y,T]=b.useMemo(()=>{const D=[],O=[],j={},V={},W={};return Object.values(_).forEach(({path:B,onChange:z,onEditStart:U,onEditEnd:X,transient:K})=>{D.push(B),z?(j[B]=z,K||O.push(B)):O.push(B),U&&(V[B]=U),X&&(W[B]=X)}),[D,O,j,V,W]},[_]),E=b.useMemo(()=>d.orderPaths(k),[k,d]),w=Ek(d,x,g),C=b.useCallback(D=>{const O=Object.entries(D).reduce((j,[V,W])=>Object.assign(j,{[_[V].path]:W}),{});d.set(O,!1)},[d,_]),S=b.useCallback(D=>d.get(_[D].path),[d,_]);return b.useEffect(()=>{const D=!f.current&&h.current;return d.addData(g,D),f.current=!1,h.current=!1,()=>d.disposePaths(E)},[d,E,g]),b.useEffect(()=>{const D=[];return Object.entries(v).forEach(([O,j])=>{j(d.get(O),O,he({initial:!0,get:d.get},d.getInput(O)));const V=d.useStore.subscribe(W=>{const B=W.data[O];return[B.disabled?void 0:B.value,B]},([W,B])=>j(W,O,he({initial:!1,get:d.get},B)),{equalityFn:bo});D.push(V)}),()=>D.forEach(O=>O())},[d,v]),b.useEffect(()=>{const D=[];return Object.entries(y).forEach(([O,j])=>D.push(d.subscribeToEditStart(O,j))),Object.entries(T).forEach(([O,j])=>D.push(d.subscribeToEditEnd(O,j))),()=>D.forEach(O=>O())},[y,T,d]),u?[w,C,S]:w}es(un.SELECT,Zb);es(un.IMAGE,rT);es(un.NUMBER,Vb);es(un.COLOR,$k);es(un.STRING,ix);es(un.BOOLEAN,fx);es(un.INTERVAL,dT);es(un.VECTOR3D,Lk);es(un.VECTOR2D,Hk);const JT={isUserDragging:!1,isUserScrolling:!1,userMovedCamera:!1,isUserScrollingOnHtmlPanel:!1},fs=np(s=>({...JT,setIsUserDragging:e=>s({isUserDragging:e}),setIsUserScrolling:e=>s({isUserScrolling:e}),setUserMovedCamera:e=>s({userMovedCamera:e}),setIsUserScrollingOnHtmlPanel:e=>s({isUserScrollingOnHtmlPanel:e})})),eE=()=>{const[s,e]=b.useState(""),t=b.useRef(null),{fetchData:n,setAbortRequests:r,seedQuestions:i}=Os(v=>v),[o]=rp(v=>[v.setBudget]),{setUniverseQuestionIsOpen:a,setSidebarOpen:c,setShowCollapseButton:l}=go(v=>({setUniverseQuestionIsOpen:v.setUniverseQuestionIsOpen,setSidebarOpen:v.setSidebarOpen,setShowCollapseButton:v.setShowCollapseButton})),u=A_(v=>v.resetAiSummaryAnswer),[h,f]=b.useState([]);b.useEffect(()=>{i&&f(k(i).slice(0,4))},[i]),b.useEffect(()=>{t.current&&t.current.focus()},[]);const p=async v=>{v&&(u(),a(),c(!0),l(!0)),await n(o,r,v)},m=!!s.trim().length,d=async v=>{v.keyCode===13&&v.shiftKey===!1&&m&&(v.preventDefault(),p(s))},g=async v=>{e(v),await p(v)},_=()=>{a(),c(!0),l(!0)},k=v=>{const y=[...v];let T=y.length-1;for(;T>0;){const E=Math.floor(Math.random()*(T+1));[y[T],y[E]]=[y[E],y[T]],T-=1}return y},x=!!s&&s.trim().length>0;return F.jsxs(sE,{children:["Ideas have shapes",F.jsxs(nE,{onKeyDown:d,py:12,tabIndex:-1,children:[F.jsx(tE,{ref:t,onChange:v=>e(v.target.value),placeholder:"What do you want to know?",value:s}),F.jsx(rE,{color:"secondary",disabled:!x,onClick:()=>p(s),variant:"contained",children:x?F.jsxs(F.Fragment,{children:["Search ",F.jsx(Ph,{})]}):F.jsx(Ph,{})})]}),h.length>0&&F.jsx(oE,{children:h.map(v=>F.jsxs(aE,{onClick:()=>g(v),children:[F.jsx(U_,{}),v]},v))}),F.jsx(iE,{"data-testid":"explore-graph-btn",onClick:_,startIcon:F.jsx(B_,{}),children:"Explore Graph"})]})},tE=$e(J_).attrs({maxRows:3})`
  background: ${Te.BG1};
  max-width: 700px;
  width: 700px;
  color: ${Te.white};
  padding: 0 16px 0 16px;
  overflow-y: auto !important;
  border: none;
  resize: none;
  outline: none;
  border-radius: 12px;
  font-family: 'Barlow';
  display: flex;
  align-items: center;
  text-align: justify;
  font-size: 16px;
  font-weight: 400;

  &:-moz-placeholder, /* Firefox 18- */
  &::-moz-placeholder, /* Firefox 19+ */
  &:-ms-input-placeholder, /* IE 10+ */
  &::-webkit-input-placeholder, /* Webkit based */
  &::placeholder {
    color: #0bf;
  }

  &::-webkit-scrollbar {
    width: 3px;
  }

  &::-webkit-scrollbar-track {
    border-radius: 12px;
    margin: 13px;
    overflow-y: hidden;
  }
`,nE=$e(Nt)`
  position: relative;
  margin-top: 30px;
  background: ${Te.BG1};
  max-width: 702px;
  width: 702px;
  color: ${Te.white};
  min-height: 150px;
  border: 1px solid ${Te.modalShield};
  resize: none;
  outline: none;
  border-radius: 12px;
  box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.5);
`,sE=$e(Nt)`
  background: #16161de3;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  color: #fff;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-style: normal;
  font-weight: 700;
  line-height: 16px;
  font-family: 'Barlow';
`,rE=$e(sp)`
  && {
    position: absolute;
    bottom: 16px;
    right: 16px;
    height: 32px;
    border-radius: 16px;
    min-width: 32px;
  }

  &&.MuiButton-root {
    padding: 0 10px 0 12px;
  }

  svg {
    margin-top: 1px;
    width: 11px;
    height: 11px;
  }
`,iE=$e(sp)`
  && {
    position: absolute;
    bottom: 20px;
    right: 20px;
    border-radius: 16px;
  }
`,oE=$e.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-top: 20px;
  max-width: 702px;
  width: 100%;
`,aE=$e.div`
  background: ${Te.BG1};
  color: ${Te.white};
  padding: 15px 12px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  text-align: left;
  font-family: Barlow;
  font-size: 14px;
  font-weight: 400;
  gap: 10px;
  &:hover {
    background: ${Te.SEEDQUESTION_HOVER};
  }

  &:active {
    background: ${Te.SEEDQUESTION};
  }
  svg {
    width: 20px;
    height: 20px;
  }

  path {
    fill: ${Te.modalWhiteOverlayBg};
  }
`,cE=new _e(0,0,0),cd=1,lE=16777215,Mi=new _e(0,0,0),ld=100,uE=600,hE=2e3,ds={x:0,y:0,z:200},rm="14.8.49",ud=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),hd=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),$l=(s,e)=>({startTime:e,type:"setValue",value:s}),im=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),om=(s,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-s)/r),kr=s=>s.type==="exponentialRampToValue",Oa=s=>s.type==="linearRampToValue",cs=s=>kr(s)||Oa(s),Nu=s=>s.type==="setValue",Ln=s=>s.type==="setValueCurve",Aa=(s,e,t,n)=>{const r=s[e];return r===void 0?n:cs(r)||Nu(r)?r.value:Ln(r)?r.values[r.values.length-1]:om(t,Aa(s,e-1,r.startTime,n),r)},fd=(s,e,t,n,r)=>t===void 0?[n.insertTime,r]:cs(t)?[t.endTime,t.value]:Nu(t)?[t.startTime,t.value]:Ln(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Aa(s,e-1,t.startTime,r)],Fl=s=>s.type==="cancelAndHold",Ll=s=>s.type==="cancelScheduledValues",is=s=>Fl(s)||Ll(s)?s.cancelTime:kr(s)||Oa(s)?s.endTime:s.startTime,dd=(s,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((s-e)/(n-e)):0,pd=(s,e,t,{endTime:n,value:r})=>t+(s-e)/(n-e)*(r-t),fE=(s,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?s[t]:(1-(e-t))*s[t]+(1-(n-e))*s[n]},dE=(s,{duration:e,startTime:t,values:n})=>{const r=(s-t)/e*(n.length-1);return fE(n,r)},Qo=s=>s.type==="setTarget";class pE{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=is(e);if(Fl(e)||Ll(e)){const n=this._automationEvents.findIndex(i=>Ll(e)&&Ln(i)?i.startTime+i.duration>=t:is(i)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Fl(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&cs(r)){if(i!==void 0&&Qo(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Ln(i)?i.startTime+i.duration:is(i),a=i===void 0?this._defaultValue:Ln(i)?i.values[i.values.length-1]:i.value,c=kr(r)?dd(t,o,a,r):pd(t,o,a,r),l=kr(r)?ud(c,t,this._currenTime):hd(c,t,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&Qo(i)&&this._automationEvents.push($l(this.getValue(t),t)),i!==void 0&&Ln(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const f=l*h%1;u[h]=i.values[h-1]*(1-f)+i.values[h]*f}this._automationEvents[this._automationEvents.length-1]=im(u,i.startTime,o)}}}else{const n=this._automationEvents.findIndex(o=>is(o)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&Ln(r)&&is(r)+r.duration>t)return!1;const i=kr(e)?ud(e.value,e.endTime,this._currenTime):Oa(e)?hd(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(i);else{if(Ln(e)&&t+e.duration>is(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>is(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];Qo(r)&&n.unshift($l(Aa(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>is(o)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Qo(i)&&(n===void 0||!cs(n)||n.insertTime>e))return om(e,Aa(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Nu(i)&&(n===void 0||!cs(n)))return i.value;if(i!==void 0&&Ln(i)&&(n===void 0||!cs(n)||i.startTime+i.duration>e))return e<i.startTime+i.duration?dE(e,i):i.values[i.values.length-1];if(i!==void 0&&cs(i)&&(n===void 0||!cs(n)))return i.value;if(n!==void 0&&kr(n)){const[o,a]=fd(this._automationEvents,r,i,n,this._defaultValue);return dd(e,o,a,n)}if(n!==void 0&&Oa(n)){const[o,a]=fd(this._automationEvents,r,i,n,this._defaultValue);return pd(e,o,a,n)}return this._defaultValue}}const mE=s=>({cancelTime:s,type:"cancelAndHold"}),gE=s=>({cancelTime:s,type:"cancelScheduledValues"}),_E=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),yE=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),vE=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),bE=()=>new DOMException("","AbortError"),xE=s=>(e,t,[n,r,i],o)=>{s(e[r],[t,n,i],a=>a[0]===t&&a[1]===n,o)},wE=s=>(e,t,n)=>{const r=[];for(let i=0;i<n.numberOfInputs;i+=1)r.push(new Set);s.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},kE=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},jr=new WeakSet,am=new WeakMap,$u=new WeakMap,cm=new WeakMap,Fu=new WeakMap,fc=new WeakMap,lm=new WeakMap,jl=new WeakMap,Vl=new WeakMap,zl=new WeakMap,um={construct(){return um}},TE=s=>{try{const e=new Proxy(s,um);new e}catch{return!1}return!0},md=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,gd=(s,e)=>{const t=[];let n=s.replace(/^[\s]+/,""),r=n.match(md);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(md)}return[t.join(";"),n]},_d=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},yd=s=>{if(!TE(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},EE=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>{let p=0;return(m,d,g={credentials:"omit"})=>{const _=u.get(m);if(_!==void 0&&_.has(d))return Promise.resolve();const k=l.get(m);if(k!==void 0){const y=k.get(d);if(y!==void 0)return y}const x=i(m),v=x.audioWorklet===void 0?r(d).then(([y,T])=>{const[E,w]=gd(y,T),C=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${w}
})})(window,'_AWGS')`;return t(C)}).then(()=>{const y=f._AWGS.pop();if(y===void 0)throw new SyntaxError;n(x.currentTime,x.sampleRate,()=>y(class{},void 0,(T,E)=>{if(T.trim()==="")throw e();const w=Vl.get(x);if(w!==void 0){if(w.has(T))throw e();yd(E),_d(E.parameterDescriptors),w.set(T,E)}else yd(E),_d(E.parameterDescriptors),Vl.set(x,new Map([[T,E]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(d),Promise.resolve(s(h,h))]).then(([[y,T],E])=>{const w=p+1;p=w;const[C,S]=gd(y,T),V=`${C};((AudioWorkletProcessor,registerProcessor)=>{${S}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${w}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([V],{type:"application/javascript; charset=utf-8"}),B=URL.createObjectURL(W);return x.audioWorklet.addModule(B,g).then(()=>{if(a(x))return x;const z=o(x);return z.audioWorklet.addModule(B,g).then(()=>z)}).then(z=>{if(c===null)throw new SyntaxError;try{new c(z,`__sac${w}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(B))});return k===void 0?l.set(m,new Map([[d,v]])):k.set(d,v),v.then(()=>{const y=u.get(m);y===void 0?u.set(m,new Set([d])):y.add(d)}).finally(()=>{const y=l.get(m);y!==void 0&&y.delete(d)}),v}},hn=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},dc=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return s.delete(n),n},hm=(s,e,t,n)=>{const r=hn(s,e),i=dc(r,o=>o[0]===t&&o[1]===n);return r.size===0&&s.delete(e),i},Eo=s=>hn(lm,s),Vr=s=>{if(jr.has(s))throw new Error("The AudioNode is already stored.");jr.add(s),Eo(s).forEach(e=>e(!0))},fm=s=>"port"in s,Co=s=>{if(!jr.has(s))throw new Error("The AudioNode is not stored.");jr.delete(s),Eo(s).forEach(e=>e(!1))},Ul=(s,e)=>{!fm(s)&&e.every(t=>t.size===0)&&Co(s)},CE=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>{const p=new WeakMap;return(m,d,g,_,k)=>{const{activeInputs:x,passiveInputs:v}=i(d),{outputs:y}=i(m),T=a(m),E=w=>{const C=c(d),S=c(m);if(w){const D=hm(v,m,g,_);s(x,m,D,!1),!k&&!h(m)&&t(S,C,g,_),f(d)&&Vr(d)}else{const D=n(x,m,g,_);e(v,_,D,!1),!k&&!h(m)&&r(S,C,g,_);const O=o(d);if(O===0)u(d)&&Ul(d,x);else{const j=p.get(d);j!==void 0&&clearTimeout(j),p.set(d,setTimeout(()=>{u(d)&&Ul(d,x)},O*1e3))}}};return l(y,[d,g,_],w=>w[0]===d&&w[1]===g&&w[2]===_,!0)?(T.add(E),u(m)?s(x,m,[g,_,E],!0):e(v,_,[m,g,E],!0),!0):!1}},SE=s=>(e,t,[n,r,i],o)=>{const a=e.get(n);a===void 0?e.set(n,new Set([[r,t,i]])):s(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},OE=s=>(e,t)=>{const n=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},AE=s=>(e,t)=>{s(e).add(t)},DE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},RE=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...DE,...c},h=n(l,u),f=i(l)?e():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},yt=(s,e)=>s.context===e,PE=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!yt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Da=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Dn=()=>new DOMException("","IndexSizeError"),Lu=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(n){throw n.code===12?Dn():n}})(s.getChannelData)},ME={numberOfChannels:1},IE=(s,e,t,n,r,i,o,a)=>{let c=null;return class dm{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:p}={...ME,...u};c===null&&(c=new r(1,1,44100));const m=n!==null&&e(i,i)?new n({length:h,numberOfChannels:f,sampleRate:p}):c.createBuffer(f,h,p);if(m.numberOfChannels===0)throw t();return typeof m.copyFromChannel!="function"?(o(m),Lu(m)):e(Da,()=>Da(m))||a(m),s.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===dm.prototype||s.has(u)}}},Ct=-34028234663852886e22,bt=-Ct,Wn=s=>jr.has(s),NE={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},$E=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...NE,...u},p=r(h,f),m=o(h),d=m?e():null;super(l,!1,p,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=t(this,m,p.playbackRate,bt,Ct)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Vr(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Wn(this)&&Co(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},FE=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const f=yt(h,u);if(!f){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await s(u,l.playbackRate,h.playbackRate):await n(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},LE=s=>"playbackRate"in s,jE=s=>"frequency"in s&&"gain"in s,VE=s=>"offset"in s,zE=s=>!("frequency"in s)&&"gain"in s,UE=s=>"detune"in s&&"frequency"in s,BE=s=>"pan"in s,kt=s=>hn(am,s),So=s=>hn(cm,s),Bl=(s,e)=>{const{activeInputs:t}=kt(s);t.forEach(r=>r.forEach(([i])=>{e.includes(s)||Bl(i,[...e,s])}));const n=LE(s)?[s.playbackRate]:fm(s)?Array.from(s.parameters.values()):jE(s)?[s.Q,s.detune,s.frequency,s.gain]:VE(s)?[s.offset]:zE(s)?[s.gain]:UE(s)?[s.detune,s.frequency]:BE(s)?[s.pan]:[];for(const r of n){const i=So(r);i!==void 0&&i.activeInputs.forEach(([o])=>Bl(o,e))}Wn(s)&&Co(s)},pm=s=>{Bl(s.destination,[])},WE=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),qE=(s,e,t,n,r,i,o,a,c)=>class extends s{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?t():m}if(h===null)throw n();if(!WE(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:f}=u,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/p:f==="interactive"||f===void 0?256/p:f==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(f*p/128)))*128/p,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",m)};h.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pm(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},HE=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f=o(h),p=r(h,u,f),m=f?e(a):null;super(l,!1,p,m),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},YE=s=>{const e=new WeakMap,t=async(n,r)=>{const i=r.destination;return e.set(r,i),await s(n,r,i),i};return{render(n,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(n,r)}}},GE=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const y=new Float32Array(1),T=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(l);let w=!1,C=[0,0,-1,0,1,0],S=[0,0,0];const D=()=>{if(w)return;w=!0;const W=n(l,256,9,0);W.onaudioprocess=({inputBuffer:B})=>{const z=[i(B,y,0),i(B,y,1),i(B,y,2),i(B,y,3),i(B,y,4),i(B,y,5)];z.some((X,K)=>X!==C[K])&&(u.setOrientation(...z),C=z);const U=[i(B,y,6),i(B,y,7),i(B,y,8)];U.some((X,K)=>X!==S[K])&&(u.setPosition(...U),S=U)},T.connect(W)},O=W=>B=>{B!==C[W]&&(C[W]=B,u.setOrientation(...C))},j=W=>B=>{B!==S[W]&&(S[W]=B,u.setPosition(...S))},V=(W,B,z)=>{const U=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:B});U.connect(T,0,W),U.start(),Object.defineProperty(U.offset,"defaultValue",{get(){return B}});const X=s({context:c},E,U.offset,bt,Ct);return a(X,"value",K=>()=>K.call(X),K=>ee=>{try{K.call(X,ee)}catch(N){if(N.code!==9)throw N}D(),E&&z(ee)}),X.cancelAndHoldAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.cancelAndHoldAtTime),X.cancelScheduledValues=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.cancelScheduledValues),X.exponentialRampToValueAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.exponentialRampToValueAtTime),X.linearRampToValueAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.linearRampToValueAtTime),X.setTargetAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.setTargetAtTime),X.setValueAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.setValueAtTime),X.setValueCurveAtTime=(K=>E?()=>{throw r()}:(...ee)=>{const N=K.apply(X,ee);return D(),N})(X.setValueCurveAtTime),X};return{forwardX:V(0,0,O(0)),forwardY:V(1,0,O(1)),forwardZ:V(2,-1,O(2)),positionX:V(6,0,j(0)),positionY:V(7,0,j(1)),positionZ:V(8,0,j(2)),upX:V(3,0,O(3)),upY:V(4,1,O(4)),upZ:V(5,0,O(5))}},{forwardX:f,forwardY:p,forwardZ:m,positionX:d,positionY:g,positionZ:_,upX:k,upY:x,upZ:v}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return p},get forwardZ(){return m},get positionX(){return d},get positionY(){return g},get positionZ(){return _},get upX(){return k},get upY(){return x},get upZ(){return v}}},Ra=s=>"context"in s,Oo=s=>Ra(s[0]),or=(s,e,t,n)=>{for(const r of s)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},vd=(s,e,[t,n],r)=>{or(s,[e,t,n],i=>i[0]===e&&i[1]===t,r)},bd=(s,[e,t,n],r)=>{const i=s.get(e);i===void 0?s.set(e,new Set([[t,n]])):or(i,[t,n],o=>o[0]===t,r)},si=s=>"inputs"in s,Pa=(s,e,t,n)=>{if(si(e)){const r=e.inputs[n];return s.connect(r,t,0),[r,t,0]}return s.connect(e,t,n),[e,t,n]},mm=(s,e,t)=>{for(const n of s)if(n[0]===e&&n[1]===t)return s.delete(n),n;return null},XE=(s,e,t)=>dc(s,n=>n[0]===e&&n[1]===t),gm=(s,e)=>{if(!Eo(s).delete(e))throw new Error("Missing the expected event listener.")},_m=(s,e,t)=>{const n=hn(s,e),r=dc(n,i=>i[0]===t);return n.size===0&&s.delete(e),r},Ma=(s,e,t,n)=>{si(e)?s.disconnect(e.inputs[n],t,0):s.disconnect(e,t,n)},ze=s=>hn($u,s),Bi=s=>hn(Fu,s),Qs=s=>jl.has(s),ca=s=>!jr.has(s),xd=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=s.createScriptProcessor(256,1,1),r=s.createGain(),i=s.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=s.createBufferSource();a.buffer=i,a.loop=!0,a.connect(n).connect(s.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(s.destination)},a.start()}}),Jc=(s,e)=>{const t=new Map;for(const n of s)for(const r of n){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((n,r)=>e(r,n))},Ia=s=>"context"in s,ZE=s=>{const e=new Map;s.connect=(t=>(n,r=0,i=0)=>{const o=Ia(n)?t(n,r,i):t(n,r),a=e.get(n);return a===void 0?e.set(n,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(s.connect.bind(s)),s.disconnect=(t=>(n,r,i)=>{if(t.apply(s),n===void 0)e.clear();else if(typeof n=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==n);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(n))if(r===void 0)e.delete(n);else{const o=e.get(n);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(n):e.set(n,a)}}for(const[o,a]of e)a.forEach(c=>{Ia(o)?s.connect(o,c.output,c.input):s.connect(o,c.output)})})(s.disconnect)},KE=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=So(e),{outputs:o}=kt(s),a=Eo(s),c=l=>{const u=ze(s),h=Bi(e);if(l){const f=_m(i,s,t);vd(r,s,f,!1),!n&&!Qs(s)&&u.connect(h,t)}else{const f=XE(r,s,t);bd(i,f,!1),!n&&!Qs(s)&&u.disconnect(h,t)}};return or(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),Wn(s)?vd(r,s,[t,c],!0):bd(i,[s,t,c],!0),!0):!1},QE=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=kt(e),o=mm(r[n],s,t);return o===null?[hm(i,s,t,n)[2],!1]:[o[2],!0]},JE=(s,e,t)=>{const{activeInputs:n,passiveInputs:r}=So(e),i=mm(n,s,t);return i===null?[_m(r,s,t)[1],!1]:[i[2],!0]},ju=(s,e,t,n,r)=>{const[i,o]=QE(s,t,n,r);if(i!==null&&(gm(s,i),o&&!e&&!Qs(s)&&Ma(ze(s),ze(t),n,r)),Wn(t)){const{activeInputs:a}=kt(t);Ul(t,a)}},Vu=(s,e,t,n)=>{const[r,i]=JE(s,t,n);r!==null&&(gm(s,r),i&&!e&&!Qs(s)&&ze(s).disconnect(Bi(t),n))},eC=(s,e)=>{const t=kt(s),n=[];for(const r of t.outputs)Oo(r)?ju(s,e,...r):Vu(s,e,...r),n.push(r[0]);return t.outputs.clear(),n},tC=(s,e,t)=>{const n=kt(s),r=[];for(const i of n.outputs)i[1]===t&&(Oo(i)?ju(s,e,...i):Vu(s,e,...i),r.push(i[0]),n.outputs.delete(i));return r},nC=(s,e,t,n,r)=>{const i=kt(s);return Array.from(i.outputs).filter(o=>o[0]===t&&(n===void 0||o[1]===n)&&(r===void 0||o[2]===r)).map(o=>(Oo(o)?ju(s,e,...o):Vu(s,e,...o),i.outputs.delete(o),o[0]))},sC=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,m,d)=>class extends l{constructor(_,k,x,v){super(x),this._context=_,this._nativeAudioNode=x;const y=u(_);h(y)&&t(xd,()=>xd(y,d))!==!0&&ZE(x),$u.set(this,x),lm.set(this,new Set),_.state!=="closed"&&k&&Vr(this),s(this,v,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,k=0,x=0){if(k<0||k>=this._nativeAudioNode.numberOfOutputs)throw r();const v=u(this._context),y=m(v);if(f(_)||p(_))throw i();if(Ra(_)){const w=ze(_);try{const S=Pa(this._nativeAudioNode,w,k,x),D=ca(this);(y||D)&&this._nativeAudioNode.disconnect(...S),this.context.state!=="closed"&&!D&&ca(_)&&Vr(_)}catch(S){throw S.code===12?i():S}if(e(this,_,k,x,y)){const S=c([this],_);Jc(S,n(y))}return _}const T=Bi(_);if(T.name==="playbackRate"&&T.maxValue===1024)throw o();try{this._nativeAudioNode.connect(T,k),(y||ca(this))&&this._nativeAudioNode.disconnect(T,k)}catch(w){throw w.code===12?i():w}if(KE(this,_,k,y)){const w=c([this],_);Jc(w,n(y))}}disconnect(_,k,x){let v;const y=u(this._context),T=m(y);if(_===void 0)v=eC(this,T);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();v=tC(this,T,_)}else{if(k!==void 0&&(k<0||k>=this.numberOfOutputs)||Ra(_)&&x!==void 0&&(x<0||x>=_.numberOfInputs))throw r();if(v=nC(this,T,_,k,x),v.length===0)throw i()}for(const E of v){const w=c([this],E);Jc(w,a)}}},rC=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>(p,m,d,g=null,_=null)=>{const k=d.value,x=new pE(k),v=m?n(x):null,y={get defaultValue(){return k},get maxValue(){return g===null?d.maxValue:g},get minValue(){return _===null?d.minValue:_},get value(){return d.value},set value(T){d.value=T,y.setValueAtTime(T,p.context.currentTime)},cancelAndHoldAtTime(T){if(typeof d.cancelAndHoldAtTime=="function")v===null&&x.flush(p.context.currentTime),x.add(r(T)),d.cancelAndHoldAtTime(T);else{const E=Array.from(x).pop();v===null&&x.flush(p.context.currentTime),x.add(r(T));const w=Array.from(x).pop();d.cancelScheduledValues(T),E!==w&&w!==void 0&&(w.type==="exponentialRampToValue"?d.exponentialRampToValueAtTime(w.value,w.endTime):w.type==="linearRampToValue"?d.linearRampToValueAtTime(w.value,w.endTime):w.type==="setValue"?d.setValueAtTime(w.value,w.startTime):w.type==="setValueCurve"&&d.setValueCurveAtTime(w.values,w.startTime,w.duration))}return y},cancelScheduledValues(T){return v===null&&x.flush(p.context.currentTime),x.add(i(T)),d.cancelScheduledValues(T),y},exponentialRampToValueAtTime(T,E){if(T===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const w=p.context.currentTime;return v===null&&x.flush(w),Array.from(x).length===0&&(x.add(l(k,w)),d.setValueAtTime(k,w)),x.add(o(T,E)),d.exponentialRampToValueAtTime(T,E),y},linearRampToValueAtTime(T,E){const w=p.context.currentTime;return v===null&&x.flush(w),Array.from(x).length===0&&(x.add(l(k,w)),d.setValueAtTime(k,w)),x.add(a(T,E)),d.linearRampToValueAtTime(T,E),y},setTargetAtTime(T,E,w){return v===null&&x.flush(p.context.currentTime),x.add(c(T,E,w)),d.setTargetAtTime(T,E,w),y},setValueAtTime(T,E){return v===null&&x.flush(p.context.currentTime),x.add(l(T,E)),d.setValueAtTime(T,E),y},setValueCurveAtTime(T,E,w){const C=T instanceof Float32Array?T:new Float32Array(T);if(h!==null&&h.name==="webkitAudioContext"){const S=E+w,D=p.context.sampleRate,O=Math.ceil(E*D),j=Math.floor(S*D),V=j-O,W=new Float32Array(V);for(let z=0;z<V;z+=1){const U=(C.length-1)/w*((O+z)/D-E),X=Math.floor(U),K=Math.ceil(U);W[z]=X===K?C[X]:(1-(U-X))*C[X]+(1-(K-U))*C[K]}v===null&&x.flush(p.context.currentTime),x.add(u(W,E,w)),d.setValueCurveAtTime(W,E,w);const B=j/D;B<S&&f(y,W[W.length-1],B),f(y,C[C.length-1],S)}else v===null&&x.flush(p.context.currentTime),x.add(u(C,E,w)),d.setValueCurveAtTime(C,E,w);return y}};return t.set(y,d),e.set(y,p),s(y,v),y},iC=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:i}=t;e.setTargetAtTime(r,n,i)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,n)}else throw new Error("Can't apply an unknown automation.")}});class ym{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const oC={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},aC=(s,e,t,n,r,i,o,a,c,l,u,h,f,p)=>class extends e{constructor(d,g,_){var k;const x=a(d),v=c(x),y=u({...oC,..._});f(y);const T=Vl.get(x),E=T==null?void 0:T.get(g),w=v||x.state!=="closed"?x:(k=o(x))!==null&&k!==void 0?k:x,C=r(w,v?null:d.baseLatency,l,g,E,y),S=v?n(g,y,E):null;super(d,!0,C,S);const D=[];C.parameters.forEach((j,V)=>{const W=t(this,v,j);D.push([V,W])}),this._nativeAudioWorkletNode=C,this._onprocessorerror=null,this._parameters=new ym(D),v&&s(x,this);const{activeInputs:O}=i(this);h(C,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(d){const g=typeof d=="function"?p(this,d):null;this._nativeAudioWorkletNode.onprocessorerror=g;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===g?d:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Na(s,e,t,n,r){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],n,r);else{const i=s.getChannelData(n);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const vm=(s,e,t,n,r)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],n,r):e[t].byteLength!==0&&s.getChannelData(n).set(e[t],r)},$a=(s,e)=>{const t=[];for(let n=0;n<s;n+=1){const r=[],i=typeof e=="number"?e:e[n];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},cC=(s,e)=>{const t=hn(zl,s),n=ze(e);return hn(t,n)},lC=async(s,e,t,n,r,i,o)=>{const a=e===null?Math.ceil(s.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,l=r.reduce((g,_)=>g+_,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=kt(s),f=await cC(t,s),p=$a(n.numberOfInputs,n.channelCount),m=$a(n.numberOfOutputs,r),d=Array.from(s.parameters.keys()).reduce((g,_)=>({...g,[_]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(n.numberOfInputs>0&&e!==null)for(let _=0;_<n.numberOfInputs;_+=1)for(let k=0;k<n.channelCount;k+=1)Na(e,p[_],k,k,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:_},k)=>{Na(e,d,_,c+k,g)});for(let _=0;_<n.numberOfInputs;_+=1)for(let k=0;k<r[_];k+=1)m[_][k].byteLength===0&&(m[_][k]=new Float32Array(128));try{const _=p.map((x,v)=>h.activeInputs[v].size===0?[]:x),k=o(g/t.sampleRate,t.sampleRate,()=>f.process(_,m,d));if(u!==null)for(let x=0,v=0;x<n.numberOfOutputs;x+=1){for(let y=0;y<r[x];y+=1)vm(u,m[x],y,v+y,g);v+=r[x]}if(!k)break}catch(_){s.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u},uC=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,m,d)=>(g,_,k)=>{const x=new WeakMap;let v=null;const y=async(T,E)=>{let w=u(T),C=null;const S=yt(w,E),D=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const O=D.reduce((B,z)=>B+z,0),j=r(E,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),V=[];for(let B=0;B<T.numberOfOutputs;B+=1)V.push(n(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[B]}));const W=o(E,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});W.connect=e.bind(null,V),W.disconnect=c.bind(null,V),C=[j,V,W]}else S||(w=new h(E,g));if(x.set(E,C===null?w:C[2]),C!==null){if(v===null){if(k===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const z=T.channelCount*T.numberOfInputs,U=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length,X=z+U;v=lC(T,X===0?null:await(async()=>{const ee=new f(X,Math.ceil(T.context.length/128)*128,E.sampleRate),N=[],L=[];for(let Y=0;Y<_.numberOfInputs;Y+=1)N.push(o(ee,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),L.push(r(ee,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const A=await Promise.all(Array.from(T.parameters.values()).map(async Y=>{const $=i(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y.value});return await p(ee,Y,$.offset),$})),I=n(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,z+U)});for(let Y=0;Y<_.numberOfInputs;Y+=1){N[Y].connect(L[Y]);for(let $=0;$<_.channelCount;$+=1)L[Y].connect(I,$,Y*_.channelCount+$)}for(const[Y,$]of A.entries())$.connect(I,0,z+Y),$.start(0);return I.connect(ee.destination),await Promise.all(N.map(Y=>m(T,ee,Y))),d(ee)})(),E,_,D,k,l)}const O=await v,j=t(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[V,W,B]=C;O!==null&&(j.buffer=O,j.start(0)),j.connect(V);for(let z=0,U=0;z<T.numberOfOutputs;z+=1){const X=W[z];for(let K=0;K<D[z];K+=1)V.connect(X,U+K,K);U+=D[z]}return B}if(S)for(const[O,j]of T.parameters.entries())await s(E,j,w.parameters.get(O));else for(const[O,j]of T.parameters.entries())await p(E,j,w.parameters.get(O));return await m(T,E,w),w};return{render(T,E){a(E,T);const w=x.get(E);return w!==void 0?Promise.resolve(w):y(T,E)}}},hC=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,m,d,g,_,k,x)=>class extends m{constructor(y,T){super(y,T),this._nativeContext=y,this._audioWorklet=s===void 0?void 0:{addModule:(E,w)=>s(this,E,w)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(y,T,E){return new t({length:T,numberOfChannels:y,sampleRate:E})}createBufferSource(){return new n(this)}createChannelMerger(y=6){return new i(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new o(this,{numberOfOutputs:y})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(y=1){return new u(this,{maxDelayTime:y})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(y,T){return new p(this,{feedback:T,feedforward:y})}createOscillator(){return new d(this)}createPanner(){return new g(this)}createPeriodicWave(y,T,E={disableNormalization:!1}){return new _(this,{...E,imag:T,real:y})}createStereoPanner(){return new k(this)}createWaveShaper(){return new x(this)}decodeAudioData(y,T,E){return l(this._nativeContext,y).then(w=>(typeof T=="function"&&T(w),w),w=>{throw typeof E=="function"&&E(w),w})}},fC={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},dC=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...fC,...u},p=r(h,f),m=o(h),d=m?t():null;super(l,!1,p,d),this._Q=e(this,m,p.Q,bt,Ct),this._detune=e(this,m,p.detune,1200*Math.log2(bt),-1200*Math.log2(bt)),this._frequency=e(this,m,p.frequency,l.sampleRate/2,0),this._gain=e(this,m,p.gain,40*Math.log10(bt),Ct),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?n():f}if(l.length!==u.length||u.length!==h.length)throw n()}},pC=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=yt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)):(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},mC=(s,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const i=s.get(t);if(i!==void 0)return i;try{const o=n();return o instanceof Promise?(s.set(t,o),o.catch(()=>!1).then(a=>(s.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},gC={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_C=(s,e,t,n,r)=>class extends s{constructor(o,a){const c=n(o),l={...gC,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},yC=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!yt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},vC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},bC=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=i({...vC,...c}),h=t(l,u),f=r(l)?e():null;super(a,!1,h,f)}},xC=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!yt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},wC=s=>(e,t,n)=>s(t,e,n),kC=s=>(e,t,n=0,r=0)=>{const i=e[n];if(i===void 0)throw s();return Ia(t)?i.connect(t,0,r):i.connect(t,0)},TC=s=>(e,t)=>{const n=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},EC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},CC=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...EC,...l},f=n(u,h),p=i(u),m=p?t():null;super(c,!1,f,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=f,this._offset=e(this,p,f.offset,bt,Ct),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Vr(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Wn(this)&&Co(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},SC=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const f=yt(h,u);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await s(u,l.offset,h.offset):await n(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},OC=s=>e=>(s[0]=e,s[0]),AC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},DC=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u={...AC,...c},h=t(l,u),p=r(l)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},RC=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!yt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=s(o,l)}return n.set(o,a),si(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},PC=(s,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(i){throw i.name==="SyntaxError"?s():i}},MC=()=>new DOMException("","DataCloneError"),wd=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(s,[s])}catch{}finally{r()}})},IC=(s,e,t,n,r,i,o,a,c,l,u)=>(h,f)=>{const p=o(h)?h:i(h);if(r.has(f)){const m=t();return Promise.reject(m)}try{r.add(f)}catch{}return e(c,()=>c(p))?p.decodeAudioData(f).then(m=>(wd(f).catch(()=>{}),e(a,()=>a(m))||u(m),s.add(m),m)):new Promise((m,d)=>{const g=async()=>{try{await wd(f)}catch{}},_=k=>{d(k),g()};try{p.decodeAudioData(f,k=>{typeof k.copyFromChannel!="function"&&(l(k),Lu(k)),s.add(k),g().then(()=>m(k))},k=>{_(k===null?n():k)})}catch(k){_(k)}})},NC=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(e.delete(c),!f&&o(c)){const p=n(c),{outputs:m}=t(c);for(const d of m)if(Oo(d)){const g=n(d[0]);s(p,g,d[1],d[2])}else{const g=r(d[0]);p.connect(g,d[1])}}}else e.set(c,u-l)},$C={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},FC=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...$C,...l},f=n(u,h),p=i(u),m=p?t(h.maxDelayTime):null;super(c,!1,f,m),this._delayTime=e(this,p,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},LC=(s,e,t,n,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=yt(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return o.set(l,u),h?await s(l,c.delayTime,u.delayTime):await n(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},jC=s=>(e,t,n,r)=>s(e[r],i=>i[0]===t&&i[1]===n),VC=s=>(e,t)=>{s(e).delete(t)},zC=s=>"delayTime"in s,UC=(s,e,t)=>function n(r,i){const o=Ra(i)?i:t(s,i);if(zC(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>n([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Jo=(s,e,t)=>{const n=e[t];if(n===void 0)throw s();return n},BC=s=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Jo(s,e,t).disconnect():Ia(t)?n===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Jo(s,e,n).disconnect(t,0):Jo(s,e,n).disconnect(t,0,r):n===void 0?e.forEach(i=>i.disconnect(t)):Jo(s,e,n).disconnect(t,0),WC={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},qC=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...WC,...u},p=n(h,f),m=o(h),d=m?t():null;super(l,!1,p,d),this._attack=e(this,m,p.attack),this._knee=e(this,m,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,m,p.ratio),this._release=e(this,m,p.release),this._threshold=e(this,m,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},HC=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=yt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)):(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},YC=()=>new DOMException("","EncodingError"),GC=s=>e=>new Promise((t,n)=>{if(s===null){n(new SyntaxError);return}const r=s.document.head;if(r===null)n(new SyntaxError);else{const i=s.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=s.onerror,l=()=>{s.onerror=c,URL.revokeObjectURL(a)};s.onerror=(u,h,f,p,m)=>{if(h===a||h===s.location.href&&f===1&&p===1)return l(),n(m),!1;if(c!==null)return c(u,h,f,p,m)},i.onerror=()=>{l(),n(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),XC=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let i=this._listeners.get(n);i===void 0&&(i=s(this,n),typeof n=="function"&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const i=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},ZC=s=>(e,t,n)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},KC=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},QC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},JC=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...QC,...c},h=n(l,u),f=i(l),p=f?t():null;super(a,!1,h,p),this._gain=e(this,f,h.gain,bt,Ct)}get gain(){return this._gain}},eS=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=yt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.gain,l.gain):await n(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},tS=(s,e)=>t=>e(s,t),nS=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},sS=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},rS=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},iS=s=>e=>s.get(e),lt=()=>new DOMException("","InvalidStateError"),oS=s=>e=>{const t=s.get(e);if(t===void 0)throw lt();return t},aS=(s,e)=>t=>{let n=s.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),s.set(t,n),n},cS=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},pc=()=>new DOMException("","InvalidAccessError"),lS=s=>{s.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw pc();return e.call(s,t,n,r)})(s.getFrequencyResponse)},uS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},hS=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=r(l),h={...uS,...c},f=e(l,u?null:a.baseLatency,h),p=u?t(h.feedback,h.feedforward):null;super(a,!1,f,p),lS(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},bm=(s,e,t,n,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let p=0;p<h;p+=1){let m=t[0]*l[p];for(let d=1;d<r;d+=1){const g=f-d&c-1;m+=t[d]*i[g],m-=s[d]*o[g]}for(let d=r;d<n;d+=1)m+=t[d]*i[f-d&c-1];for(let d=r;d<e;d+=1)m-=s[d]*o[f-d&c-1];i[f]=l[p],o[f]=m,f=f+1&c-1,u[p]=m}return f},fS=(s,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=n instanceof Float64Array?n:new Float64Array(n),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let m=0;m<o;m+=1)i[m]/=r[0];for(let m=1;m<a;m+=1)r[m]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),p=s.numberOfChannels;for(let m=0;m<p;m+=1){const d=s.getChannelData(m),g=f.getChannelData(m);u.fill(0),h.fill(0),bm(r,o,i,a,c,u,h,0,l,d,g)}return f},dS=(s,e,t,n,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,p=e(u);const m=yt(p,h);if(h.createIIRFilter===void 0?f=s(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=h.createIIRFilter(o,i)),a.set(h,f===null?p:f),f!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await n(u,g,g.destination);const _=await r(g);return fS(_,h,i,o)})()}const d=await c;return f.buffer=d,f.start(0),f}return await n(u,h,p),p};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},pS=(s,e,t,n,r,i)=>o=>(a,c)=>{const l=s.get(a);if(l===void 0){if(!o&&i(a)){const u=n(a),{outputs:h}=t(a);for(const f of h)if(Oo(f)){const p=n(f[0]);e(u,p,f[1],f[2])}else{const p=r(f[0]);u.disconnect(p,f[1])}}s.set(a,c)}else s.set(a,l+c)},mS=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},gS=(s,e)=>t=>s.has(t)||e(t),_S=(s,e)=>t=>s.has(t)||e(t),yS=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},vS=s=>e=>s!==null&&e instanceof s,bS=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,xS=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,wS=(s,e)=>t=>s(t)||e(t),kS=s=>e=>s!==null&&e instanceof s,TS=s=>s!==null&&s.isSecureContext,ES=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},CS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},SS=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i);if(n(a))throw new TypeError;const c={...CS,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},OS=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},AS=(s,e,t)=>class extends s{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},DS=(s,e,t,n,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,fc.set(this,a),n(a)&&r.set(a,new Set),this._destination=new s(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Wi=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},RS=(s,e)=>(t,n,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),s(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&n(),a;o.call(t,a,c),s(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&n()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Ue=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t]&&(s[t]=n)},ot=(s,e)=>{Ue(s,e,"channelCount"),Ue(s,e,"channelCountMode"),Ue(s,e,"channelInterpretation")},kd=s=>typeof s.getFloatTimeDomainData=="function",PS=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const n=Math.max(t.length,s.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},MS=(s,e)=>(t,n)=>{const r=t.createAnalyser();if(ot(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Ue(r,n,"fftSize"),Ue(r,n,"maxDecibels"),Ue(r,n,"minDecibels"),Ue(r,n,"smoothingTimeConstant"),s(kd,()=>kd(r))||PS(r),r},IS=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,Ge=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t].value&&(s[t].value=n)},NS=s=>{s.start=(e=>{let t=!1;return(n=0,r=0,i)=>{if(t)throw lt();e.call(s,n,r,i),t=!0}})(s.start)},zu=s=>{s.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,n,r)})(s.start)},Uu=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},$S=(s,e,t,n,r,i,o,a,c,l,u)=>(h,f)=>{const p=h.createBufferSource();return ot(p,f),Ge(p,f,"playbackRate"),Ue(p,f,"buffer"),Ue(p,f,"loop"),Ue(p,f,"loopEnd"),Ue(p,f,"loopStart"),e(t,()=>t(h))||NS(p),e(n,()=>n(h))||c(p),e(r,()=>r(h))||l(p,h),e(i,()=>i(h))||zu(p),e(o,()=>o(h))||u(p,h),e(a,()=>a(h))||Uu(p),s(h,p),p},FS=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,LS=(s,e)=>(t,n,r)=>{const i=t.destination;if(i.channelCount!==n)try{i.channelCount=n}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:n});const o=s(t,{channelCount:n,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},jS=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,VS=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},zS=(s,e,t,n,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>p,set:m=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof m=="function"?m:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(m=>(...d)=>{if(d[0]==="processorerror"){const g=typeof d[1]=="function"?d[1]:typeof d[1]=="object"&&d[1]!==null&&typeof d[1].handleEvent=="function"?d[1].handleEvent:null;if(g!==null){const _=f.get(d[1]);_!==void 0?d[1]=_:(d[1]=k=>{k.type==="error"?(Object.defineProperties(k,{type:{value:"processorerror"}}),g(k)):g(new ErrorEvent(d[0],{...k}))},f.set(g,d[1]))}}return m.call(h,"error",d[1],d[2]),m.call(h,...d)})(h.addEventListener),h.removeEventListener=(m=>(...d)=>{if(d[0]==="processorerror"){const g=f.get(d[1]);g!==void 0&&(f.delete(d[1]),d[1]=g)}return m.call(h,"error",d[1],d[2]),m.call(h,d[0],d[1],d[2])})(h.removeEventListener),u.numberOfOutputs!==0){const m=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(m).connect(i.destination),r(h,()=>m.disconnect(),()=>m.connect(i.destination))}return h}catch(h){throw h.code===11?n():h}if(l===void 0)throw n();return VS(u),e(i,o,l,u)},xm=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),US=s=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:i})=>{n.close(),r.close(),e(i)},n.onmessageerror=({data:i})=>{n.close(),r.close(),t(i)},r.postMessage(s)}),BS=async(s,e)=>{const t=await US(e);return new s(t)},WS=(s,e,t,n)=>{let r=zl.get(s);r===void 0&&(r=new WeakMap,zl.set(s,r));const i=BS(t,n);return r.set(e,i),i},qS=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>(p,m,d,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some(H=>H<1))throw c();if(_.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const k=g.channelCount*g.numberOfInputs,x=_.reduce((H,P)=>H+P,0),v=d.parameterDescriptors===void 0?0:d.parameterDescriptors.length;if(k+v>6||x>6)throw c();const y=new MessageChannel,T=[],E=[];for(let H=0;H<g.numberOfInputs;H+=1)T.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),E.push(r(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const w=[];if(d.parameterDescriptors!==void 0)for(const{defaultValue:H,maxValue:P,minValue:R,name:Q}of d.parameterDescriptors){const se=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[Q]!==void 0?g.parameterData[Q]:H===void 0?0:H});Object.defineProperties(se.offset,{defaultValue:{get:()=>H===void 0?0:H},maxValue:{get:()=>P===void 0?bt:P},minValue:{get:()=>R===void 0?Ct:R}}),w.push(se)}const C=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,k+v)}),S=xm(m,p.sampleRate),D=a(p,S,k+v,Math.max(1,x)),O=r(p,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),j=[];for(let H=0;H<g.numberOfOutputs;H+=1)j.push(n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[H]}));for(let H=0;H<g.numberOfInputs;H+=1){T[H].connect(E[H]);for(let P=0;P<g.channelCount;P+=1)E[H].connect(C,P,H*g.channelCount+P)}const V=new ym(d.parameterDescriptors===void 0?[]:d.parameterDescriptors.map(({name:H},P)=>{const R=w[P];return R.connect(C,0,k+P),R.start(0),[H,R.offset]}));C.connect(D);let W=g.channelInterpretation,B=null;const z=g.numberOfOutputs===0?[D]:j,U={get bufferSize(){return S},get channelCount(){return g.channelCount},set channelCount(H){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(H){throw t()},get channelInterpretation(){return W},set channelInterpretation(H){for(const P of T)P.channelInterpretation=H;W=H},get context(){return D.context},get inputs(){return T},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(H){typeof B=="function"&&U.removeEventListener("processorerror",B),B=typeof H=="function"?H:null,typeof B=="function"&&U.addEventListener("processorerror",B)},get parameters(){return V},get port(){return y.port2},addEventListener(...H){return D.addEventListener(H[0],H[1],H[2])},connect:s.bind(null,z),disconnect:l.bind(null,z),dispatchEvent(...H){return D.dispatchEvent(H[0])},removeEventListener(...H){return D.removeEventListener(H[0],H[1],H[2])}},X=new Map;y.port1.addEventListener=(H=>(...P)=>{if(P[0]==="message"){const R=typeof P[1]=="function"?P[1]:typeof P[1]=="object"&&P[1]!==null&&typeof P[1].handleEvent=="function"?P[1].handleEvent:null;if(R!==null){const Q=X.get(P[1]);Q!==void 0?P[1]=Q:(P[1]=se=>{u(p.currentTime,p.sampleRate,()=>R(se))},X.set(R,P[1]))}}return H.call(y.port1,P[0],P[1],P[2])})(y.port1.addEventListener),y.port1.removeEventListener=(H=>(...P)=>{if(P[0]==="message"){const R=X.get(P[1]);R!==void 0&&(X.delete(P[1]),P[1]=R)}return H.call(y.port1,P[0],P[1],P[2])})(y.port1.removeEventListener);let K=null;Object.defineProperty(y.port1,"onmessage",{get:()=>K,set:H=>{typeof K=="function"&&y.port1.removeEventListener("message",K),K=typeof H=="function"?H:null,typeof K=="function"&&(y.port1.addEventListener("message",K),y.port1.start())}}),d.prototype.port=y.port1;let ee=null;WS(p,U,d,g).then(H=>ee=H);const L=$a(g.numberOfInputs,g.channelCount),A=$a(g.numberOfOutputs,_),I=d.parameterDescriptors===void 0?[]:d.parameterDescriptors.reduce((H,{name:P})=>({...H,[P]:new Float32Array(128)}),{});let Y=!0;const $=()=>{g.numberOfOutputs>0&&D.disconnect(O);for(let H=0,P=0;H<g.numberOfOutputs;H+=1){const R=j[H];for(let Q=0;Q<_[H];Q+=1)O.disconnect(R,P+Q,Q);P+=_[H]}},q=new Map;D.onaudioprocess=({inputBuffer:H,outputBuffer:P})=>{if(ee!==null){const R=h(U);for(let Q=0;Q<S;Q+=128){for(let se=0;se<g.numberOfInputs;se+=1)for(let ce=0;ce<g.channelCount;ce+=1)Na(H,L[se],ce,ce,Q);d.parameterDescriptors!==void 0&&d.parameterDescriptors.forEach(({name:se},ce)=>{Na(H,I,se,k+ce,Q)});for(let se=0;se<g.numberOfInputs;se+=1)for(let ce=0;ce<_[se];ce+=1)A[se][ce].byteLength===0&&(A[se][ce]=new Float32Array(128));try{const se=L.map((ye,Qe)=>{if(R[Qe].size>0)return q.set(Qe,S/128),ye;const fe=q.get(Qe);return fe===void 0?[]:(ye.every(Je=>Je.every(it=>it===0))&&(fe===1?q.delete(Qe):q.set(Qe,fe-1)),ye)});Y=u(p.currentTime+Q/p.sampleRate,p.sampleRate,()=>ee.process(se,A,I));for(let ye=0,Qe=0;ye<g.numberOfOutputs;ye+=1){for(let J=0;J<_[ye];J+=1)vm(P,A[ye],J,Qe+J,Q);Qe+=_[ye]}}catch(se){Y=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:se.colno,filename:se.filename,lineno:se.lineno,message:se.message}))}if(!Y){for(let se=0;se<g.numberOfInputs;se+=1){T[se].disconnect(E[se]);for(let ce=0;ce<g.channelCount;ce+=1)E[Q].disconnect(C,ce,se*g.channelCount+ce)}if(d.parameterDescriptors!==void 0){const se=d.parameterDescriptors.length;for(let ce=0;ce<se;ce+=1){const ye=w[ce];ye.disconnect(C,0,k+ce),ye.stop()}}C.disconnect(D),D.onaudioprocess=null,oe?$():ne();break}}}};let oe=!1;const re=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ie=()=>D.connect(re).connect(p.destination),ne=()=>{D.disconnect(re),re.disconnect()},me=()=>{if(Y){ne(),g.numberOfOutputs>0&&D.connect(O);for(let H=0,P=0;H<g.numberOfOutputs;H+=1){const R=j[H];for(let Q=0;Q<_[H];Q+=1)O.connect(R,P+Q,Q);P+=_[H]}}oe=!0},te=()=>{Y&&(ie(),$()),oe=!1};return ie(),f(U,me,te)},wm=(s,e)=>{const t=s.createBiquadFilter();return ot(t,e),Ge(t,e,"Q"),Ge(t,e,"detune"),Ge(t,e,"frequency"),Ge(t,e,"gain"),Ue(t,e,"type"),t},HS=(s,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,r),ot(r,n),r},YS=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw lt()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw lt()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw lt()}})},Ao=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return ot(t,e),YS(t),t},GS=(s,e,t,n,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return ot(a,o),Ge(a,o,"offset"),e(n,()=>n(i))||zu(a),e(r,()=>r(i))||Uu(a),s(i,a),a},ri=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),XS=(s,e,t,n)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(m){l.channelCount=m},get channelCountMode(){return l.channelCountMode},set channelCountMode(m){l.channelCountMode=m},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(m){l.channelInterpretation=m},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(m){c.onended=m},addEventListener(...m){return c.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return c.dispatchEvent(m[0])},removeEventListener(...m){return c.removeEventListener(m[0],m[1],m[2])},start(m=0){c.start.call(c,m)},stop(m=0){c.stop.call(c,m)}},f=()=>c.connect(l),p=()=>c.disconnect(l);return s(r,c),n(ri(h,l),f,p)},ZS=(s,e)=>(t,n)=>{const r=t.createConvolver();if(ot(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Ue(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw s();return i.call(r,o)}),n.channelCountMode==="max"))throw s();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw s();return i.call(r,o)}),r},km=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return ot(t,e),Ge(t,e,"delayTime"),t},KS=s=>(e,t)=>{const n=e.createDynamicsCompressor();if(ot(n,t),t.channelCount>2||t.channelCountMode==="max")throw s();return Ge(n,t,"attack"),Ge(n,t,"knee"),Ge(n,t,"ratio"),Ge(n,t,"release"),Ge(n,t,"threshold"),n},Mt=(s,e)=>{const t=s.createGain();return ot(t,e),Ge(t,e,"gain"),t},QS=s=>(e,t,n)=>{if(e.createIIRFilter===void 0)return s(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return ot(r,n),r};function JS(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function eO(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Td(s,e){let t=[0,0];for(let n=s.length-1;n>=0;n-=1)t=eO(t,e),t[0]+=s[n];return t}const tO=(s,e,t,n)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=xm(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),m=f.length,d=p.length,g=Math.min(m,d);if(m===0||m>20)throw n();if(f[0]===0)throw e();if(d===0||d>20)throw n();if(p[0]===0)throw e();if(f[0]!==1){for(let w=0;w<d;w+=1)p[w]/=f[0];for(let w=1;w<m;w+=1)f[w]/=f[0]}const _=t(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const k=32,x=[],v=[],y=[];for(let w=0;w<o;w+=1){x.push(0);const C=new Float32Array(k),S=new Float32Array(k);C.fill(0),S.fill(0),v.push(C),y.push(S)}_.onaudioprocess=w=>{const C=w.inputBuffer,S=w.outputBuffer,D=C.numberOfChannels;for(let O=0;O<D;O+=1){const j=C.getChannelData(O),V=S.getChannelData(O);x[O]=bm(f,m,p,d,g,v[O],y[O],x[O],k,j,V)}};const T=r.sampleRate/2;return ri({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(w){_.channelCount=w},get channelCountMode(){return _.channelCountMode},set channelCountMode(w){_.channelCountMode=w},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(w){_.channelInterpretation=w},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...w){return _.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return _.dispatchEvent(w[0])},getFrequencyResponse(w,C,S){if(w.length!==C.length||C.length!==S.length)throw s();const D=w.length;for(let O=0;O<D;O+=1){const j=-Math.PI*(w[O]/T),V=[Math.cos(j),Math.sin(j)],W=Td(p,V),B=Td(f,V),z=JS(W,B);C[O]=Math.sqrt(z[0]*z[0]+z[1]*z[1]),S[O]=Math.atan2(z[1],z[0])}},removeEventListener(...w){return _.removeEventListener(w[0],w[1],w[2])}},_)},nO=(s,e)=>s.createMediaElementSource(e.mediaElement),sO=(s,e)=>{const t=s.createMediaStreamDestination();return ot(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},rO=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const n=t.slice(0,1),r=s.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},iO=(s,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),i=t.createMediaStreamSource(r);if(n.kind!=="audio")throw s();if(e(t))throw new TypeError;return i},oO=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,aO=(s,e,t,n,r,i)=>(o,a)=>{const c=o.createOscillator();return ot(c,a),Ge(c,a,"detune"),Ge(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ue(c,a,"type"),e(t,()=>t(o))||zu(c),e(n,()=>n(o))||i(c,o),e(r,()=>r(o))||Uu(c),s(o,c),c},cO=s=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?s(e,t):(ot(n,t),Ge(n,t,"orientationX"),Ge(n,t,"orientationY"),Ge(n,t,"orientationZ"),Ge(n,t,"positionX"),Ge(n,t,"positionY"),Ge(n,t,"positionZ"),Ue(n,t,"coneInnerAngle"),Ue(n,t,"coneOuterAngle"),Ue(n,t,"coneOuterGain"),Ue(n,t,"distanceModel"),Ue(n,t,"maxDistance"),Ue(n,t,"panningModel"),Ue(n,t,"refDistance"),Ue(n,t,"rolloffFactor"),n)},lO=(s,e,t,n,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:p,distanceModel:m,maxDistance:d,orientationX:g,orientationY:_,orientationZ:k,panningModel:x,positionX:v,positionY:y,positionZ:T,refDistance:E,rolloffFactor:w,...C})=>{const S=u.createPanner();if(C.channelCount>2||C.channelCountMode==="max")throw o();ot(S,C);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=t(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),j=n(u,{...C,gain:1}),V=n(u,{...D,gain:1}),W=n(u,{...D,gain:0}),B=n(u,{...D,gain:0}),z=n(u,{...D,gain:0}),U=n(u,{...D,gain:0}),X=n(u,{...D,gain:0}),K=r(u,256,6,1),ee=i(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let N=[g,_,k],L=[v,y,T];const A=new Float32Array(1);K.onaudioprocess=({inputBuffer:q})=>{const oe=[c(q,A,0),c(q,A,1),c(q,A,2)];oe.some((ie,ne)=>ie!==N[ne])&&(S.setOrientation(...oe),N=oe);const re=[c(q,A,3),c(q,A,4),c(q,A,5)];re.some((ie,ne)=>ie!==L[ne])&&(S.setPosition(...re),L=re)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0});const I={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(q){if(q>2)throw o();j.channelCount=q,S.channelCount=q},get channelCountMode(){return S.channelCountMode},set channelCountMode(q){if(q==="max")throw o();j.channelCountMode=q,S.channelCountMode=q},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(q){j.channelInterpretation=q,S.channelInterpretation=q},get coneInnerAngle(){return S.coneInnerAngle},set coneInnerAngle(q){S.coneInnerAngle=q},get coneOuterAngle(){return S.coneOuterAngle},set coneOuterAngle(q){S.coneOuterAngle=q},get coneOuterGain(){return S.coneOuterGain},set coneOuterGain(q){if(q<0||q>1)throw e();S.coneOuterGain=q},get context(){return S.context},get distanceModel(){return S.distanceModel},set distanceModel(q){S.distanceModel=q},get inputs(){return[j]},get maxDistance(){return S.maxDistance},set maxDistance(q){if(q<0)throw new RangeError;S.maxDistance=q},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get orientationX(){return V.gain},get orientationY(){return W.gain},get orientationZ(){return B.gain},get panningModel(){return S.panningModel},set panningModel(q){S.panningModel=q},get positionX(){return z.gain},get positionY(){return U.gain},get positionZ(){return X.gain},get refDistance(){return S.refDistance},set refDistance(q){if(q<0)throw new RangeError;S.refDistance=q},get rolloffFactor(){return S.rolloffFactor},set rolloffFactor(q){if(q<0)throw new RangeError;S.rolloffFactor=q},addEventListener(...q){return j.addEventListener(q[0],q[1],q[2])},dispatchEvent(...q){return j.dispatchEvent(q[0])},removeEventListener(...q){return j.removeEventListener(q[0],q[1],q[2])}};h!==I.coneInnerAngle&&(I.coneInnerAngle=h),f!==I.coneOuterAngle&&(I.coneOuterAngle=f),p!==I.coneOuterGain&&(I.coneOuterGain=p),m!==I.distanceModel&&(I.distanceModel=m),d!==I.maxDistance&&(I.maxDistance=d),g!==I.orientationX.value&&(I.orientationX.value=g),_!==I.orientationY.value&&(I.orientationY.value=_),k!==I.orientationZ.value&&(I.orientationZ.value=k),x!==I.panningModel&&(I.panningModel=x),v!==I.positionX.value&&(I.positionX.value=v),y!==I.positionY.value&&(I.positionY.value=y),T!==I.positionZ.value&&(I.positionZ.value=T),E!==I.refDistance&&(I.refDistance=E),w!==I.rolloffFactor&&(I.rolloffFactor=w),(N[0]!==1||N[1]!==0||N[2]!==0)&&S.setOrientation(...N),(L[0]!==0||L[1]!==0||L[2]!==0)&&S.setPosition(...L);const Y=()=>{j.connect(S),s(j,ee,0,0),ee.connect(V).connect(O,0,0),ee.connect(W).connect(O,0,1),ee.connect(B).connect(O,0,2),ee.connect(z).connect(O,0,3),ee.connect(U).connect(O,0,4),ee.connect(X).connect(O,0,5),O.connect(K).connect(u.destination)},$=()=>{j.disconnect(S),a(j,ee,0,0),ee.disconnect(V),V.disconnect(O),ee.disconnect(W),W.disconnect(O),ee.disconnect(B),B.disconnect(O),ee.disconnect(z),z.disconnect(O),ee.disconnect(U),U.disconnect(O),ee.disconnect(X),X.disconnect(O),O.disconnect(K),K.disconnect(u.destination)};return l(ri(I,S),Y,$)},uO=s=>(e,{disableNormalization:t,imag:n,real:r})=>{const i=n instanceof Float32Array?n:new Float32Array(n),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(n).length<2)throw s();return a},Do=(s,e,t,n)=>s.createScriptProcessor(e,t,n),hO=(s,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,n);const i=t.createStereoPanner();return ot(i,n),Ge(i,n,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},fO=(s,e,t,n,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(m,d,g,_)=>{const k=new Float32Array(16385),x=new Float32Array(16385);for(let C=0;C<16385;C+=1){const S=C/16384*c;k[C]=Math.cos(S),x[C]=Math.sin(S)}const v=t(m,{...l,gain:0}),y=n(m,{...u,curve:k}),T=n(m,{...u,curve:a}),E=t(m,{...l,gain:0}),w=n(m,{...u,curve:x});return{connectGraph(){d.connect(v),d.connect(T.inputs===void 0?T:T.inputs[0]),d.connect(E),T.connect(g),g.connect(y.inputs===void 0?y:y.inputs[0]),g.connect(w.inputs===void 0?w:w.inputs[0]),y.connect(v.gain),w.connect(E.gain),v.connect(_,0,0),E.connect(_,0,1)},disconnectGraph(){d.disconnect(v),d.disconnect(T.inputs===void 0?T:T.inputs[0]),d.disconnect(E),T.disconnect(g),g.disconnect(y.inputs===void 0?y:y.inputs[0]),g.disconnect(w.inputs===void 0?w:w.inputs[0]),y.disconnect(v.gain),w.disconnect(E.gain),v.disconnect(_,0,0),E.disconnect(_,0,1)}}},f=(m,d,g,_)=>{const k=new Float32Array(16385),x=new Float32Array(16385),v=new Float32Array(16385),y=new Float32Array(16385),T=Math.floor(16385/2);for(let z=0;z<16385;z+=1)if(z>T){const U=(z-T)/(16384-T)*c;k[z]=Math.cos(U),x[z]=Math.sin(U),v[z]=0,y[z]=1}else{const U=z/(16384-T)*c;k[z]=1,x[z]=0,v[z]=Math.cos(U),y[z]=Math.sin(U)}const E=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=t(m,{...l,gain:0}),C=n(m,{...u,curve:k}),S=t(m,{...l,gain:0}),D=n(m,{...u,curve:x}),O=n(m,{...u,curve:a}),j=t(m,{...l,gain:0}),V=n(m,{...u,curve:v}),W=t(m,{...l,gain:0}),B=n(m,{...u,curve:y});return{connectGraph(){d.connect(E),d.connect(O.inputs===void 0?O:O.inputs[0]),E.connect(w,0),E.connect(S,0),E.connect(j,1),E.connect(W,1),O.connect(g),g.connect(C.inputs===void 0?C:C.inputs[0]),g.connect(D.inputs===void 0?D:D.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),g.connect(B.inputs===void 0?B:B.inputs[0]),C.connect(w.gain),D.connect(S.gain),V.connect(j.gain),B.connect(W.gain),w.connect(_,0,0),j.connect(_,0,0),S.connect(_,0,1),W.connect(_,0,1)},disconnectGraph(){d.disconnect(E),d.disconnect(O.inputs===void 0?O:O.inputs[0]),E.disconnect(w,0),E.disconnect(S,0),E.disconnect(j,1),E.disconnect(W,1),O.disconnect(g),g.disconnect(C.inputs===void 0?C:C.inputs[0]),g.disconnect(D.inputs===void 0?D:D.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),g.disconnect(B.inputs===void 0?B:B.inputs[0]),C.disconnect(w.gain),D.disconnect(S.gain),V.disconnect(j.gain),B.disconnect(W.gain),w.disconnect(_,0,0),j.disconnect(_,0,0),S.disconnect(_,0,1),W.disconnect(_,0,1)}}},p=(m,d,g,_,k)=>{if(d===1)return h(m,g,_,k);if(d===2)return f(m,g,_,k);throw r()};return(m,{channelCount:d,channelCountMode:g,pan:_,...k})=>{if(g==="max")throw r();const x=s(m,{...k,channelCount:1,channelCountMode:g,numberOfInputs:2}),v=t(m,{...k,channelCount:d,channelCountMode:g,gain:1}),y=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:T,disconnectGraph:E}=p(m,d,v,y,x);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const w={get bufferSize(){},get channelCount(){return v.channelCount},set channelCount(O){v.channelCount!==O&&(C&&E(),{connectGraph:T,disconnectGraph:E}=p(m,O,v,y,x),C&&T()),v.channelCount=O},get channelCountMode(){return v.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw r();v.channelCountMode=O},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(O){v.channelInterpretation=O},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get pan(){return y.gain},addEventListener(...O){return v.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return v.dispatchEvent(O[0])},removeEventListener(...O){return v.removeEventListener(O[0],O[1],O[2])}};let C=!1;const S=()=>{T(),C=!0},D=()=>{E(),C=!1};return i(ri(w,x),S,D)}},dO=(s,e,t,n,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);ot(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Ue(l,{curve:u},"curve"),Ue(l,c,"oversample");let h=null,f=!1;return o(l,"curve",d=>()=>d.call(l),d=>g=>(d.call(l,g),f&&(n(g)&&h===null?h=s(a,l):!n(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{f=!0,n(l.curve)&&(h=s(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},pO=(s,e,t,n,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();ot(l,c),ot(u,c);const h=t(i,{...c,gain:1}),f=t(i,{...c,gain:-1}),p=t(i,{...c,gain:1}),m=t(i,{...c,gain:-1});let d=null,g=!1,_=null;const k={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(y){h.channelCount=y,f.channelCount=y,l.channelCount=y,p.channelCount=y,u.channelCount=y,m.channelCount=y},get channelCountMode(){return l.channelCountMode},set channelCountMode(y){h.channelCountMode=y,f.channelCountMode=y,l.channelCountMode=y,p.channelCountMode=y,u.channelCountMode=y,m.channelCountMode=y},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(y){h.channelInterpretation=y,f.channelInterpretation=y,l.channelInterpretation=y,p.channelInterpretation=y,u.channelInterpretation=y,m.channelInterpretation=y},get context(){return l.context},get curve(){return _},set curve(y){if(y!==null&&y.length<2)throw e();if(y===null)l.curve=y,u.curve=y;else{const T=y.length,E=new Float32Array(T+2-T%2),w=new Float32Array(T+2-T%2);E[0]=y[0],w[0]=-y[T-1];const C=Math.ceil((T+1)/2),S=(T+1)/2-1;for(let D=1;D<C;D+=1){const O=D/C*S,j=Math.floor(O),V=Math.ceil(O);E[D]=j===V?y[j]:(1-(O-j))*y[j]+(1-(V-O))*y[V],w[D]=j===V?-y[T-1-j]:-((1-(O-j))*y[T-1-j])-(1-(V-O))*y[T-1-V]}E[C]=T%2===1?y[C-1]:(y[C-2]+y[C-1])/2,l.curve=E,u.curve=w}_=y,g&&(n(_)&&d===null?d=s(i,h):d!==null&&(d(),d=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(y){l.oversample=y,u.oversample=y},addEventListener(...y){return h.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return h.dispatchEvent(y[0])},removeEventListener(...y){return h.removeEventListener(y[0],y[1],y[2])}};o!==null&&(k.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==k.oversample&&(k.oversample=a);const x=()=>{h.connect(l).connect(p),h.connect(f).connect(u).connect(m).connect(p),g=!0,n(_)&&(d=s(i,h))},v=()=>{h.disconnect(l),l.disconnect(p),h.disconnect(f),f.disconnect(u),u.disconnect(m),m.disconnect(p),g=!1,d!==null&&(d(),d=null)};return r(ri(k,p),x,v)},Tt=()=>new DOMException("","NotSupportedError"),mO={numberOfChannels:1},gO=(s,e,t,n,r)=>class extends s{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...mO,...l},p=n(h,u,f);e(Wi,()=>Wi(p))||p.addEventListener("statechange",(()=>{let m=0;const d=g=>{this._state==="running"&&(m>0?(p.removeEventListener("statechange",d),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):m+=1)};return d})()),super(p,h),this._length=u,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,pm(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},_O={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},yO=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={..._O,...l},f=t(u,h),p=i(u),m=p?n():null,d=c.sampleRate/2;super(c,!1,f,m),this._detune=e(this,p,f.detune,153600,-153600),this._frequency=e(this,p,f.frequency,d,-d),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Vr(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Wn(this)&&Co(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},vO=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=t(u);const p=yt(f,h);if(!p){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(h,m),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),p?(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)):(await n(h,u.detune,f.detune),await n(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},bO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},xO=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...bO,...l},f=t(u,h),p=i(u),m=p?n():null;super(c,!1,f,m),this._nativePannerNode=f,this._orientationX=e(this,p,f.orientationX,bt,Ct),this._orientationY=e(this,p,f.orientationY,bt,Ct),this._orientationZ=e(this,p,f.orientationZ,bt,Ct),this._positionX=e(this,p,f.positionX,bt,Ct),this._positionY=e(this,p,f.positionY,bt,Ct),this._positionZ=e(this,p,f.positionZ,bt,Ct),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},wO=(s,e,t,n,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(p,m)=>{let d=null,g=i(p);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},k={..._,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},x=yt(g,m);if("bufferSize"in g)d=n(m,{..._,gain:1});else if(!x){const v={...k,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(m,v)}if(u.set(m,d===null?g:d),d!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new o(6,p.context.length,m.sampleRate),O=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(D.destination),h=(async()=>{const j=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(V,W)=>{const B=t(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await a(D,V,B.offset),B}));for(let V=0;V<6;V+=1)j[V].connect(O,0,V),j[V].start(0);return l(D)})()}const v=await h,y=n(m,{..._,gain:1});await c(p,m,y);const T=[];for(let D=0;D<v.numberOfChannels;D+=1)T.push(v.getChannelData(D));let E=[T[0][0],T[1][0],T[2][0]],w=[T[3][0],T[4][0],T[5][0]],C=n(m,{..._,gain:1}),S=r(m,{...k,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:w[0],positionY:w[1],positionZ:w[2]});y.connect(C).connect(S.inputs[0]),S.connect(d);for(let D=128;D<v.length;D+=128){const O=[T[0][D],T[1][D],T[2][D]],j=[T[3][D],T[4][D],T[5][D]];if(O.some((V,W)=>V!==E[W])||j.some((V,W)=>V!==w[W])){E=O,w=j;const V=D/m.sampleRate;C.gain.setValueAtTime(0,V),C=n(m,{..._,gain:0}),S=r(m,{...k,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:w[0],positionY:w[1],positionZ:w[2]}),C.gain.setValueAtTime(1,V),y.connect(C).connect(S.inputs[0]),S.connect(d)}}return d}return x?(await s(m,p.orientationX,g.orientationX),await s(m,p.orientationY,g.orientationY),await s(m,p.orientationZ,g.orientationZ),await s(m,p.positionX,g.positionX),await s(m,p.positionY,g.positionY),await s(m,p.positionZ,g.positionZ)):(await a(m,p.orientationX,g.orientationX),await a(m,p.orientationY,g.orientationY),await a(m,p.orientationZ,g.orientationZ),await a(m,p.positionX,g.positionX),await a(m,p.positionY,g.positionY),await a(m,p.positionZ,g.positionZ)),si(g)?await c(p,m,g.inputs[0]):await c(p,m,g),g};return{render(p,m){const d=u.get(m);return d!==void 0?Promise.resolve(d):f(p,m)}}},kO={disableNormalization:!1},TO=(s,e,t,n)=>class Tm{constructor(i,o){const a=e(i),c=n({...kO,...o}),l=s(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Tm.prototype||t.has(i)}},EO=(s,e)=>(t,n,r)=>(s(n).replay(r),e(n,t,r)),CO=(s,e,t)=>async(n,r,i)=>{const o=s(n);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,r),p=n.context.destination;!t(l)&&(n!==p||!t(n))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},SO=(s,e,t)=>async(n,r,i)=>{const o=e(n);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await s(a).render(a,r);t(a)||u.connect(i,c)}))},OO=(s,e,t,n)=>r=>s(Wi,()=>Wi(r))?Promise.resolve(s(n,n)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),AO=s=>(e,t)=>{s.set(e,t)},DO=s=>(e,t)=>s.set(e,t),RO=(s,e,t,n,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(n(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Lu(u)):e(i,()=>i(u))||a(u),s.add(u),u)),PO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},MO=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...PO,...c},h=t(l,u),f=i(l),p=f?n():null;super(a,!1,h,p),this._pan=e(this,f,h.pan)}get pan(){return this._pan}},IO=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=yt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.pan,l.pan):await n(c,a.pan,l.pan),si(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},NO=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},$O=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await n.audioWorklet.addModule(r);const a=new s(n,"a",{numberOfOutputs:0}),c=n.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await n.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},FO=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},LO=()=>new DOMException("","UnknownError"),jO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},VO=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...jO,...l},f=t(u,h),m=i(u)?n():null;super(c,!0,f,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},zO=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!yt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=s(o,l)}return n.set(o,a),si(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},UO=()=>typeof window>"u"?null:window,BO=(s,e)=>t=>{t.copyFromChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)n[h]=l[h+o]},t.copyToChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=n[h]}},WO=s=>e=>{e.copyFromChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyToChannel)},qO=s=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),s(e,"buffer",r=>()=>{const i=r.call(e);return i===n?null:i},r=>i=>r.call(e,i===null?n:i))},HO=(s,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const r=t.createBufferSource();e(n,()=>{const a=n.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(n,0,c)},()=>r.disconnect(n))},Em=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),Cm=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},Ro=(s,e,t,n)=>{let r=s;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(s,e,{get:t(i),set:n(o)})},YO=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),GO=s=>({...s,channelCount:s.numberOfOutputs}),XO=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},Sm=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Sm(s,e,t+1e-7)}},ZO=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},KO=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},QO=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Bu=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Om=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Wu=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},JO=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},e2=s=>{s.start=(e=>(t=0,n=0,r)=>{const i=s.buffer,o=i===null?n:Math.min(i.duration,n);i!==null&&o>i.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,o,r)})(s.start)},Am=(s,e)=>{const t=e.createGain();s.connect(t);const n=(r=>()=>{r.call(s,t),s.removeEventListener("ended",n)})(s.disconnect);s.addEventListener("ended",n),ri(s,t),s.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(s,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(s,o),i=!0}})(s.stop)},ii=(s,e)=>t=>{const n={value:s};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},t2=xE(or),n2=SE(or),s2=jC(dc),Dm=new WeakMap,r2=sS(Dm),gn=mC(new Map,new WeakMap),On=UO(),Rm=MS(gn,Dn),qu=nS(kt),ft=CO(kt,qu,Qs),i2=PE(Rm,ze,ft),je=oS(fc),ts=oO(On),Re=kS(ts),Pm=new WeakMap,Mm=XC(ii),Po=FS(On),Hu=vS(Po),Yu=bS(On),Im=xS(On),qi=jS(On),st=sC(wE(am),CE(t2,n2,Pa,s2,Ma,kt,r2,Eo,ze,or,Wn,Qs,ca),gn,pS(jl,Ma,kt,ze,Bi,Wn),Dn,pc,Tt,NC(Pa,jl,kt,ze,Bi,je,Wn,Re),UC(Pm,kt,hn),Mm,je,Hu,Yu,Im,Re,qi),o2=RE(st,i2,Dn,Rm,je,Re),Gu=new WeakSet,Ed=IS(On),Nm=OC(new Uint32Array(1)),Xu=BO(Nm,Dn),Zu=WO(Nm),$m=IE(Gu,gn,Tt,Ed,ts,NO(Ed),Xu,Zu),mc=OE(Mt),Fm=SO(qu,So,Qs),Rn=wC(Fm),oi=$S(mc,gn,ZO,KO,QO,Bu,Om,Wu,e2,qO(Ro),Am),Pn=EO(rS(So),Fm),a2=FE(Rn,oi,ze,Pn,ft),_n=rC(kE(cm),Pm,Fu,iC,mE,gE,_E,yE,vE,$l,im,Po,Sm),c2=$E(st,a2,_n,lt,oi,je,Re,ii),l2=HE(st,YE,Dn,lt,LS(Mt,Ro),je,Re,ft),u2=pC(Rn,wm,ze,Pn,ft),ar=DO(Dm),h2=dC(st,_n,u2,pc,wm,je,Re,ar),Ds=RS(or,Yu),f2=HO(lt,Ds),Rs=HS(Po,f2),d2=yC(Rs,ze,ft),p2=_C(st,d2,Rs,je,Re),m2=xC(Ao,ze,ft),g2=bC(st,m2,Ao,je,Re,GO),_2=XS(mc,oi,Mt,Ds),ai=GS(mc,gn,_2,Bu,Wu),y2=SC(Rn,ai,ze,Pn,ft),v2=CC(st,_n,y2,ai,je,Re,ii),Lm=ZS(Tt,Ro),b2=RC(Lm,ze,ft),x2=DC(st,b2,Lm,je,Re,ar),w2=LC(Rn,km,ze,Pn,ft),k2=FC(st,_n,w2,km,je,Re,ar),jm=KS(Tt),T2=HC(Rn,jm,ze,Pn,ft),E2=qC(st,_n,T2,jm,Tt,je,Re,ar),C2=eS(Rn,Mt,ze,Pn,ft),S2=JC(st,_n,C2,Mt,je,Re),O2=tO(pc,lt,Do,Tt),gc=OO(gn,Mt,Do,FO(Mt,ts)),A2=dS(oi,ze,ts,ft,gc),D2=QS(O2),R2=hS(st,D2,A2,je,Re,ar),P2=GE(_n,Rs,ai,Do,Tt,Em,Re,Ro),Vm=new WeakMap,M2=DS(l2,P2,Mm,Re,Vm,ii),zm=aO(mc,gn,Bu,Om,Wu,Am),I2=vO(Rn,zm,ze,Pn,ft),N2=yO(st,_n,zm,I2,je,Re,ii),Um=TC(oi),$2=pO(Um,lt,Mt,Cm,Ds),_c=dO(Um,lt,$2,Cm,Ds,Po,Ro),F2=lO(Pa,lt,Rs,Mt,Do,_c,Tt,Ma,Em,Ds),Bm=cO(F2),L2=wO(Rn,Rs,ai,Mt,Bm,ze,ts,Pn,ft,gc),j2=xO(st,_n,Bm,L2,je,Re,ar),V2=uO(Dn),z2=TO(V2,je,new WeakSet,XO),U2=fO(Rs,Ao,Mt,_c,Tt,Ds),Wm=hO(U2,Tt),B2=IO(Rn,Wm,ze,Pn,ft),W2=MO(st,_n,Wm,B2,je,Re),q2=zO(_c,ze,ft),H2=VO(st,lt,_c,q2,je,Re,ar),qm=TS(On),Ku=ZC(On),Hm=new WeakMap,Y2=aS(Hm,ts),G2=qm?EE(gn,Tt,GC(On),Ku,KC(bE),je,Y2,Re,qi,new WeakMap,new WeakMap,$O(qi,ts),On):void 0,X2=wS(Hu,Re),Z2=IC(Gu,gn,MC,YC,new WeakSet,je,X2,Da,Wi,Xu,Zu),Ym=hC(G2,o2,$m,c2,h2,p2,g2,v2,x2,Z2,k2,E2,S2,R2,M2,N2,j2,z2,W2,H2),K2=ES(st,nO,je,Re),Q2=SS(st,sO,je,Re),J2=OS(st,rO,je,Re),eA=iO(lt,Re),tA=AS(st,eA,je),nA=qE(Ym,lt,Tt,LO,K2,Q2,J2,tA,Po),Qu=cS(Vm),sA=AE(Qu),Gm=kC(Dn),rA=VC(Qu),Xm=BC(Dn),Zm=new WeakMap,iA=tS(Zm,hn),oA=qS(Gm,Dn,lt,Rs,Ao,ai,Mt,Do,Tt,Xm,Ku,iA,Ds),aA=zS(lt,oA,Mt,Tt,Ds),cA=uC(Rn,Gm,oi,Rs,Ao,ai,Mt,rA,Xm,Ku,ze,qi,ts,Pn,ft,gc),lA=iS(Hm),uA=AO(Zm),Cd=qm?aC(sA,st,_n,cA,aA,kt,lA,je,Re,qi,YO,uA,JO,ii):void 0,hA=PC(Tt,ts),fA=RO(Gu,gn,qu,Qu,gc,Da,Xu,Zu),dA=gO(Ym,gn,lt,hA,fA),pA=mS(fc,Hu),mA=gS($u,Yu),gA=_S(Fu,Im),_A=yS(fc,Re);function Ut(s){return typeof s>"u"}function ve(s){return!Ut(s)}function yA(s){return typeof s=="function"}function xs(s){return typeof s=="number"}function Ws(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function vA(s){return typeof s=="boolean"}function ln(s){return Array.isArray(s)}function Gn(s){return typeof s=="string"}function ea(s){return Gn(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function pe(s,e){if(!s)throw new Error(e)}function fn(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function Km(s){!s.isOffline&&s.state!=="running"&&Ju('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Qm=!1,Sd=!1;function Od(s){Qm=s}function bA(s){Ut(s)&&Qm&&!Sd&&(Sd=!0,Ju("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Jm=console;function xA(...s){Jm.log(...s)}function Ju(...s){Jm.warn(...s)}function wA(s){return new nA(s)}function kA(s,e,t){return new dA(s,e,t)}const qs=typeof self=="object"?self:null,TA=qs&&(qs.hasOwnProperty("AudioContext")||qs.hasOwnProperty("webkitAudioContext"));function EA(s,e,t){return pe(ve(Cd),"This node only works in a secure context (https or localhost)"),new Cd(s,e,t)}class CA{constructor(e,t,n,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Js(s){return gA(s)}function ps(s){return mA(s)}function la(s){return _A(s)}function wr(s){return pA(s)}function SA(s){return s instanceof $m}function OA(s,e){return s==="value"||Js(e)||ps(e)||SA(e)}function Dr(s,...e){if(!e.length)return s;const t=e.shift();if(Ws(s)&&Ws(t))for(const n in t)OA(n,t[n])?s[n]=t[n]:Ws(t[n])?(s[n]||Object.assign(s,{[n]:{}}),Dr(s[n],t[n])):Object.assign(s,{[n]:t[n]});return Dr(s,...e)}function AA(s,e){return s.length===e.length&&s.every((t,n)=>e[n]===t)}function Z(s,e,t=[],n){const r={},i=Array.from(e);if(Ws(i[0])&&n&&!Reflect.has(i[0],n)&&(Object.keys(i[0]).some(a=>Reflect.has(s,a))||(Dr(r,{[n]:i[0]}),t.splice(t.indexOf(n),1),i.shift())),i.length===1&&Ws(i[0]))Dr(r,i[0]);else for(let o=0;o<t.length;o++)ve(i[o])&&(r[t[o]]=i[o]);return Dr(s,r)}function DA(s){return s.constructor.getDefaults()}function Rr(s,e){return Ut(s)?e:s}function Tr(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class ns{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||qs&&this.toString()===qs.TONE_DEBUG_CLASS)&&xA(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ns.version=rm;const eh=1e-6;function zr(s,e){return s>e+eh}function Wl(s,e){return zr(s,e)||rn(s,e)}function Fa(s,e){return s+eh<e}function rn(s,e){return Math.abs(s-e)<eh}function RA(s,e,t){return Math.max(Math.min(s,t),e)}let Tn=class eg extends ns{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Z(eg.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(pe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];pe(Wl(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(rn(this._timeline[t].time,e)){for(let n=t;n>=0&&rn(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Wl(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<i;){let o=Math.floor(n+(i-n)/2);const a=this._timeline[o],c=this._timeline[o+1];if(rn(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(rn(u[t],e))o=l;else break}return o}else{if(Fa(a[t],e)&&zr(c[t],e))return o;zr(a[t],e)?i=o:n=o+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,r,i)):r===-1&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&rn(this._timeline[n].time,e)){let r=n;for(let i=n;i>=0&&rn(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}};const tg=[];function yc(s){tg.push(s)}function PA(s){tg.forEach(e=>e(s))}const ng=[];function vc(s){ng.push(s)}function MA(s){ng.forEach(e=>e(s))}class Mo extends ns{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Ut(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Ut(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Ut(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,i=n.length;r<i;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Mo.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class sg extends Mo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let th=class rg extends sg{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Tn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=Z(rg.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=wA({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new CA(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(PA(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return pe(wr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return pe(wr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return pe(wr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){pe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){pe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){pe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){pe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return EA(this.rawContext,e,t)}addAudioWorkletModule(e){return Ie(this,void 0,void 0,function*(){pe(ve(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Ie(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return wr(this._context)?this._context.resume():Promise.resolve()}close(){return Ie(this,void 0,void 0,function*(){wr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&MA(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:i+t})};return r(),n}};class IA extends sg{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Ie(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ve(s,e){ln(e)?e.forEach(t=>Ve(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function nh(s,e){ln(e)?e.forEach(t=>nh(s,t)):Object.defineProperty(s,e,{writable:!0})}const Ce=()=>{};class Se extends ns{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ce;const e=Z(Se.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Gn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ce,onload:Ce,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:on().sampleRate}set(e){return e instanceof Se?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ie(this,void 0,void 0,function*(){const t=Se.load(e).then(n=>{this.set(n),this.onload(this)});Se.downloads.push(t);try{yield t}finally{const n=Se.downloads.indexOf(t);Se.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ln(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,i=on(),o=i.createBuffer(n,r,i.sampleRate),a=!t&&n===1?[e]:e;for(let c=0;c<n;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(xs(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(xs(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){pe(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);pe(n<r,"The start time must be less than the end time");const i=r-n,o=on().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(n,r),a);return new Se(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Se().fromArray(e)}static fromUrl(e){return Ie(this,void 0,void 0,function*(){return yield new Se().load(e)})}static load(e){return Ie(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let l=c[0];for(const u of c)if(Se.supportsType(u)){l=u;break}e=e.replace(t[0],l)}const n=Se.baseUrl===""||Se.baseUrl.endsWith("/")?Se.baseUrl:Se.baseUrl+"/",r=document.createElement("a");r.href=n+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield on().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return Ie(this,void 0,void 0,function*(){for(yield Promise.resolve();Se.downloads.length;)yield Se.downloads[0]})}}Se.baseUrl="";Se.downloads=[];class bc extends th{constructor(){super({clockSource:"offline",context:la(arguments[0])?arguments[0]:kA(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:la(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=la(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ie(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Ie(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Se(t)})}close(){return Promise.resolve()}}const ig=new IA;let zs=ig;function on(){return zs===ig&&TA&&NA(new th),zs}function NA(s,e=!1){e&&zs.dispose(),wr(s)?zs=new th(s):la(s)?zs=new bc(s):zs=s}function $A(){return zs.resume()}if(qs&&!qs.TONE_SILENCE_LOGGING){const e=` * Tone.js v${rm} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function FA(s){return Math.pow(10,s/20)}function LA(s){return 20*(Math.log(s)/Math.LN10)}function og(s){return Math.pow(2,s/12)}let xc=440;function jA(){return xc}function VA(s){xc=s}function ql(s){return Math.round(ag(s))}function ag(s){return 69+12*Math.log2(s/xc)}function zA(s){return xc*Math.pow(2,(s-69)/12)}class sh extends ns{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof sh&&this.fromType(this._val),Ut(this._val))return this._noArg();if(Gn(this._val)&&Ut(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Ws(this._val)){let e=0;for(const t in this._val)if(ve(this._val[t])){const n=this._val[t],r=new this.constructor(this.context,t).valueOf()*n;e+=r}return e}if(ve(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Gn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class an extends sh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new an(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/n)*n-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let n=t[0],r=new an(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new an(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(n=i,r=o)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ql(this.toFrequency())}_now(){return this.context.now()}}class Xt extends an{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return jA()}static set A4(e){VA(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Xt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=UA[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:Xt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new Xt(this.context,this.valueOf()*og(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return ql(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Xt.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),BA[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return zA(e)}static ftom(e){return ql(e)}}const UA={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},BA=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ii extends an{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ot extends ns{constructor(){super();const e=Z(Ot.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:on()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return bA(e),new an(this.context,e).toSeconds()}toFrequency(e){return new Xt(this.context,e).toFrequency()}toTicks(e){return new Ii(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{Ut(e[n])&&delete t[n]}),t}get(){const e=DA(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];ve(n)&&ve(n.value)&&ve(n.setValueAtTime)?e[t]=n.value:n instanceof Ot?e[t]=n._getPartialProperties(e[t]):ln(n)||xs(n)||Gn(n)||vA(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ve(this[t])&&(this[t]&&ve(this[t].value)&&ve(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ot?this[t].set(e[t]):this[t]=e[t])}),this}}class rh extends Tn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return fn(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Oe extends Ot{constructor(){super(Z(Oe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=Z(Oe.getDefaults(),arguments,["param","units","convert"]);for(pe(ve(e.param)&&(Js(e.param)||e.param instanceof Oe),"param must be an AudioParam");!Js(e.param);)e.param=e.param._param;this._swappable=ve(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Tn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ve(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ot.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ve(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ve(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ve(this.maxValue)&&ve(this.minValue)&&fn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?FA(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?LA(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return pe(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(n===null)i=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}n.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,n.time,n.value,t):i=this._exponentialInterpolate(r.time,o,n.time,n.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return pe(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=rn(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return pe(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);pe(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),pe(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=n/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return pe(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));pe(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),i=this._events.getAfter(t);return r&&rn(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){pe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,i){return n+(t-n)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,n,r,i){return t+(r-t)*((i-e)/(n-e))}_exponentialInterpolate(e,t,n,r,i){return t*Math.pow(r/t,(i-e)/(n-e))}}class le extends Ot{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ve(this.input)?Js(this.input)||this.input instanceof Oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ve(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ve(e)&&(e instanceof le||ps(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();pe(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return ws(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ju("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return WA(this,e,t,n),this}chain(...e){return Hi(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ve(this.input)&&(this.input instanceof le?this.input.dispose():ps(this.input)&&this.input.disconnect()),ve(this.output)&&(this.output instanceof le?this.output.dispose():ps(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Hi(...s){const e=s.shift();s.reduce((t,n)=>(t instanceof le?t.connect(n):ps(t)&&ws(t,n),n),e)}function ws(s,e,t=0,n=0){for(pe(ve(s),"Cannot connect from undefined node"),pe(ve(e),"Cannot connect to undefined node"),(e instanceof le||ps(e))&&pe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),pe(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof le||e instanceof Oe;)ve(e.input)&&(e=e.input);for(;s instanceof le;)ve(s.output)&&(s=s.output);Js(e)?s.connect(e,t):s.connect(e,t,n)}function WA(s,e,t=0,n=0){if(ve(e))for(;e instanceof le;)e=e.input;for(;!ps(s);)ve(s.output)&&(s=s.output);Js(e)?s.disconnect(e,t):ps(e)?s.disconnect(e,t,n):s.disconnect()}class Ne extends le{constructor(){super(Z(Ne.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=Z(Ne.getDefaults(),arguments,["gain","units"]);this.gain=new Oe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ve(this,"gain")}static getDefaults(){return Object.assign(le.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ur extends le{constructor(e){super(e),this.onended=Ce,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ne({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(le.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ce})}_startGain(e,t=1){pe(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){pe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ce&&(this.onended(this),this.onended=Ce,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),pe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ce,this}}class La extends Ur{constructor(){super(Z(La.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=Z(La.getDefaults(),arguments,["offset"]);ws(this._source,this._gainNode),this.offset=new Oe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ur.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Le extends le{constructor(){super(Z(Le.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=Z(Le.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new La({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(le.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return ih(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ih(s,e,t,n){(e instanceof Oe||Js(e)||e instanceof Le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Le&&(e.overridden=!0)),ws(s,e,t,n)}class ja extends Oe{constructor(){super(Z(ja.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Tn(1/0),this._multiplier=1;const e=Z(ja.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/n,1));for(let a=0;a<=o;a++){const c=n*a+t,l=this._exponentialApproach(i.time,i.value,r,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ut(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Va extends Le{constructor(){super(Z(Va.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=Z(Va.getDefaults(),arguments,["value"]);this.input=this._param=new ja({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class za extends Ot{constructor(){super(Z(za.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new rh,this._tickOffset=new Tn,this._ticksAtTime=new Tn,this._secondsAtTime=new Tn;const e=Z(za.getDefaults(),arguments,["frequency"]);this.frequency=new Va({context:this.context,units:e.units,value:e.frequency}),Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ot.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),ve(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||n,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!=n.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(n),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(n.time,r.time),o=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,n),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=rn(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Yi extends Ot{constructor(){super(Z(Yi.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ce,this._lastUpdate=0,this._state=new rh("stopped"),this._boundLoop=this._loop.bind(this);const e=Z(Yi.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new za({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ot.getDefaults(),{callback:Ce,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Km(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Mo.mixin(Yi);class oh extends ns{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Z(oh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ce,onload:Ce,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return pe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=Ce,r=Ce){return Gn(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Se(this.baseUrl+t,n,r))):this._buffers.set(e.toString(),new Se(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Er extends Ii{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class qA extends Ot{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Tn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}yc(s=>{s.draw=new qA({context:s})});vc(s=>{s.draw.dispose()});class HA extends ns{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){pe(ve(e.time),"Events must have a time property"),pe(ve(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new YA(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class YA{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ks extends le{constructor(){super(Z(ks.getDefaults(),arguments,["volume"])),this.name="Volume";const e=Z(ks.getDefaults(),arguments,["volume"]);this.input=this.output=new Ne({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ve(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(le.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let GA=class Hl extends le{constructor(){super(Z(Hl.getDefaults(),arguments)),this.name="Destination",this.input=new ks({context:this.context}),this.output=new Ne({context:this.context}),this.volume=this.input.volume;const e=Z(Hl.getDefaults(),arguments);Hi(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(le.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Hi(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};yc(s=>{s.destination=new GA({context:s})});vc(s=>{s.destination.dispose()});class XA extends ns{constructor(e){super(),this.name="TimelineValue",this._timeline=new Tn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Xn extends le{constructor(){super(Object.assign(Z(Xn.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return ih(this,e,t,n),this}}class er extends Xn{constructor(){super(Object.assign(Z(er.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=Z(er.getDefaults(),arguments,["mapping","length"]);ln(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):yA(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Le.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;n[r]=e(o,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));pe(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Gi extends Xn{constructor(){super(Object.assign(Z(Gi.getDefaults(),arguments,["value"]))),this.name="Pow";const e=Z(Gi.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new er({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Xn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ts{constructor(e,t){this.id=Ts._eventId++,this._remainderTime=0;const n=Object.assign(Ts.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Ce,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ts._eventId=0;class ah extends Ts{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(ah.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ts.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Fa(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Er(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Fa(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Er(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);zr(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Xi extends Ot{constructor(){super(Z(Xi.getDefaults(),arguments)),this.name="Transport",this._loop=new XA(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Tn,this._repeatedEvents=new HA,this._syncedSignals=[],this._swingAmount=0;const e=Z(Xi.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Yi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ve(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ot.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Er(this.context,this._swingTicks*2/3).toSeconds()*r}Od(!0),this._timeline.forEachAtTime(t,n=>n.invoke(e)),Od(!1)}schedule(e,t){const n=new Ts(this,{callback:e,time:new Ii(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const i=new ah(this,{callback:e,duration:new an(this.context,r).toTicks(),interval:new an(this.context,t).toTicks(),time:new Ii(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new Ts(this,{callback:e,once:!0,time:new Ii(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Er(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let n;return ve(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ln(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new an(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new an(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Er(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Er(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const n=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(n)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,l=new Ne(c),u=new Gi(-1),h=new Ne(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}t||(e.getValueAtTime(n)!==0?t=e.getValueAtTime(n)/i:t=0);const a=new Ne(t);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(r=>r.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),nh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Mo.mixin(Xi);yc(s=>{s.transport=new Xi({context:s})});vc(s=>{s.transport.dispose()});class gt extends le{constructor(e){super(e),this.input=void 0,this._state=new rh("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ce,this._syncedStop=Ce,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ks({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(le.getDefaults(),{mute:!1,onstop:Ce,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=Ut(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")pe(zr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Rr(t,0)),i.duration=n?this.toSeconds(n):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,n)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Km(this.context),this._start(r,t,n);return this}stop(e){let t=Ut(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ve(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(zr(t,0)){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ce,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Br extends Ur{constructor(){super(Z(Br.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=Z(Br.getDefaults(),arguments,["url","onload"]);ws(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Oe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Se(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ur.getDefaults(),{url:new Se,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){pe(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Rr(t,this.loopStart):t=Rr(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Wl(o,a)&&(o=(o-c)%l+c),rn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Fa(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ve(n)){let a=this.toSeconds(n);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Zi extends gt{constructor(){super(Z(Zi.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=Z(Zi.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(pe(e in Ad,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=Ad[this._type];this._source=new Br({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const yr=44100*5,el=2,Fn={brown:null,pink:null,white:null},Ad={get brown(){if(!Fn.brown){const s=[];for(let e=0;e<el;e++){const t=new Float32Array(yr);s[e]=t;let n=0;for(let r=0;r<yr;r++){const i=Math.random()*2-1;t[r]=(n+.02*i)/1.02,n=t[r],t[r]*=3.5}}Fn.brown=new Se().fromArray(s)}return Fn.brown},get pink(){if(!Fn.pink){const s=[];for(let e=0;e<el;e++){const t=new Float32Array(yr);s[e]=t;let n,r,i,o,a,c,l;n=r=i=o=a=c=l=0;for(let u=0;u<yr;u++){const h=Math.random()*2-1;n=.99886*n+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,c=-.7616*c-h*.016898,t[u]=n+r+i+o+a+c+l+h*.5362,t[u]*=.11,l=h*.115926}}Fn.pink=new Se().fromArray(s)}return Fn.pink},get white(){if(!Fn.white){const s=[];for(let e=0;e<el;e++){const t=new Float32Array(yr);s[e]=t;for(let n=0;n<yr;n++)t[n]=Math.random()*2-1}Fn.white=new Se().fromArray(s)}return Fn.white}};function cr(s,e){return Ie(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,n=new bc(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Ua extends Ur{constructor(){super(Z(Ua.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=Z(Ua.getDefaults(),arguments,["frequency","type"]);ws(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Oe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ur.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class nt extends gt{constructor(){super(Z(nt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Z(nt.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),Ve(this,"frequency"),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Ve(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(gt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Ua({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return nt._periodicWaveCache.find(t=>t.phase===this._phase&&AA(t.partials,this._partials));{const e=nt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(ve(n)){const{partials:r,wave:i}=n;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),nt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),nt._periodicWaveCache.length>100&&nt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){fn(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,n){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*n)+t[o]*Math.sin(o*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)n=Math.max(this._inverseFFT(e,t,o/i*r),n);return RA(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}nt._periodicWaveCache=[];class ZA extends Xn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new er({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Es extends Le{constructor(){super(Object.assign(Z(Es.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=Z(Es.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ne({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ki extends gt{constructor(){super(Z(Ki.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new ZA({context:this.context}),this._modulationNode=new Ne({context:this.context});const e=Z(Ki.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new nt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ve(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(nt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Qi extends gt{constructor(){super(Z(Qi.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ne({context:this.context,gain:0});const e=Z(Qi.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new nt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new nt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Es({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ve(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(nt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Wr extends gt{constructor(){super(Z(Wr.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ne({context:this.context,gain:0}),this._thresh=new er({context:this.context,mapping:t=>t<=0?-1:1});const e=Z(Wr.getDefaults(),arguments,["frequency","width"]);this.width=new Le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ve(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(gt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ji extends gt{constructor(){super(Z(Ji.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=Z(Ji.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(nt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+n*i)}}get count(){return this._oscillators.length}set count(e){if(fn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new nt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Ce});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class eo extends gt{constructor(){super(Z(eo.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Es({context:this.context,value:2});const e=Z(eo.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Wr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ve(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(gt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Dd={am:Ki,fat:Ji,fm:Qi,oscillator:nt,pulse:Wr,pwm:eo};class tr extends gt{constructor(){super(Z(tr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=Z(tr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Ve(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(nt.getDefaults(),Qi.getDefaults(),Ki.getDefaults(),Ji.getDefaults(),Wr.getDefaults(),eo.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Dd[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Dd[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&xs(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&xs(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Gn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Ie(this,void 0,void 0,function*(){return cr(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class ch extends Le{constructor(){super(Object.assign(Z(ch.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Ne({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Hi(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ba extends Xn{constructor(){super(Object.assign(Z(Ba.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=Z(Ba.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Es({context:this.context,value:e.max-e.min}),this._add=this.output=new ch({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Xn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function cg(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){fn(i,s,e),t.set(this,i)}})}}function ss(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){fn(this.toSeconds(i),s,e),t.set(this,i)}})}}class to extends gt{constructor(){super(Z(to.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=Z(to.getDefaults(),arguments,["url","onload"]);this._buffer=new Se({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1,reverse:!1})}load(e){return Ie(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ce){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=Rr(t,this._loopStart):t=Rr(t,0);const r=this.toSeconds(t),i=n;n=Rr(n,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(n);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Br({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Ut(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&fn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&fn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}mn([ss(0)],to.prototype,"fadeIn",void 0);mn([ss(0)],to.prototype,"fadeOut",void 0);class KA extends Xn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new er({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Jt extends le{constructor(){super(Z(Jt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=Z(Jt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(le.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Gn(e))return e;{let n;for(n in ta)if(ta[n][t]===e)return n;return e}}_setCurve(e,t,n){if(Gn(n)&&Reflect.has(ta,n)){const r=ta[n];Ws(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(ln(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(pe(ln(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return ih(this,e,t,n),this}asArray(e=1024){return Ie(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new bc(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}mn([ss(0)],Jt.prototype,"attack",void 0);mn([ss(0)],Jt.prototype,"decay",void 0);mn([cg(0,1)],Jt.prototype,"sustain",void 0);mn([ss(0)],Jt.prototype,"release",void 0);const ta=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const f=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=f/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const f=Math.pow(t,3)*4+.2,p=Math.cos(f*Math.PI*2*t);l[e]=Math.abs(p*(1-t))}function u(f){const p=new Array(f.length);for(let m=0;m<f.length;m++)p[m]=1-f[m];return p}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:n,Out:h(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class nr extends le{constructor(){super(Z(nr.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=Z(nr.getDefaults(),arguments);this._volume=this.output=new ks({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume")}static getDefaults(){return Object.assign(le.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,n.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Zn extends nr{constructor(){super(Z(Zn.getDefaults(),arguments));const e=Z(Zn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(nr.getDefaults(),{detune:0,onsilence:Ce,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof Xt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}mn([ss(0)],Zn.prototype,"portamento",void 0);class wc extends Jt{constructor(){super(Z(wc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ne({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class no extends Zn{constructor(){super(Z(no.getDefaults(),arguments)),this.name="Synth";const e=Z(no.getDefaults(),arguments);this.oscillator=new tr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new wc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ve(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Zn.getDefaults(),{envelope:Object.assign(Tr(Jt.getDefaults(),Object.keys(le.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Tr(tr.getDefaults(),[...Object.keys(gt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class so extends le{constructor(){super(Z(so.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=Z(so.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Oe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Oe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Oe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Oe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(le.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){pe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=Math.pow(o/e,2)*(2e4-20)+20;t[o]=c}const n=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class qr extends le{constructor(){super(Z(qr.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Ne({context:this.context}),this.output=new Ne({context:this.context}),this._filters=[];const e=Z(qr.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Le({context:this.context,units:"positive",value:e.Q}),this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),this.gain=new Le({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ve(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(le.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){pe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=xs(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let r=n.indexOf(t);pe(r!==-1,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new so({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,Hi(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new so({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>n[o]*=i)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),nh(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class ro extends Jt{constructor(){super(Z(ro.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=Z(ro.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Gi({context:this.context,value:e.exponent}),this._scale=this.output=new Ba({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Jt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);fn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class io extends Zn{constructor(){super(Z(io.getDefaults(),arguments)),this.name="MonoSynth";const e=Z(io.getDefaults(),arguments);this.oscillator=new tr(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new qr(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new ro(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new wc(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ve(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Zn.getDefaults(),{envelope:Object.assign(Tr(Jt.getDefaults(),Object.keys(le.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Tr(qr.getDefaults(),Object.keys(le.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Tr(ro.getDefaults(),Object.keys(le.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Tr(tr.getDefaults(),Object.keys(gt.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class oo extends no{constructor(){super(Z(oo.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=Z(oo.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ve(this,["oscillator","envelope"])}static getDefaults(){return Dr(Zn.getDefaults(),no.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof Xt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}mn([cg(0)],oo.prototype,"octaves",void 0);mn([ss(0)],oo.prototype,"pitchDecay",void 0);const lg=new Set;function lh(s){lg.add(s)}function ug(s,e){const t=`registerProcessor("${s}", ${e})`;lg.add(t)}const QA=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;lh(QA);const JA=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;lh(JA);const eD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;lh(eD);const tD="feedback-comb-filter",nD=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ug(tD,nD);class ao extends nr{constructor(){super(Z(ao.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=Z(ao.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(pe(ea(n)||xs(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),ea(n)){const i=new Xt(this.context,n).toMidi();t[i]=e.urls[n]}else xs(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new oh({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(nr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ce,onerror:Ce,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=ag(new Xt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=og(c+a),f=new Br({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(t,0,u.duration/h,n),ln(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),m=p.indexOf(f);m!==-1&&p.splice(m,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new Xt(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const i=this.toSeconds(n);return this.triggerAttack(e,i,r),ln(t)?(pe(ln(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(pe(ea(e)||isFinite(e),`note must be a pitch or midi: ${e}`),ea(e)){const r=new Xt(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}mn([ss(0)],ao.prototype,"attack",void 0);mn([ss(0)],ao.prototype,"release",void 0);class Wa extends le{constructor(){super(Object.assign(Z(Wa.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new KA({context:this.context}),this.a=new Ne({context:this.context,gain:0}),this.b=new Ne({context:this.context,gain:0}),this.output=new Ne({context:this.context}),this._internalChannels=[this.a,this.b];const e=Z(Wa.getDefaults(),arguments,["fade"]);this.fade=new Le({context:this.context,units:"normalRange",value:e.fade}),Ve(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ws(this._split,this.a.gain,0),ws(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(le.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Rd extends le{constructor(e){super(e),this.name="Effect",this._dryWet=new Wa({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ne({context:this.context}),this.effectReturn=new Ne({context:this.context}),this.input=new Ne({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ve(this,"wet")}static getDefaults(){return Object.assign(le.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class qa extends le{constructor(){super(Object.assign(Z(qa.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=Z(qa.getDefaults(),arguments,["pan"]);this.pan=new Oe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ve(this,"pan")}static getDefaults(){return Object.assign(le.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const sD="bit-crusher",rD=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ug(sD,rD);class Ha extends le{constructor(){super(Z(Ha.getDefaults(),arguments,["channels"])),this.name="Merge";const e=Z(Ha.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(le.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Ya extends Rd{constructor(){super(Z(Ya.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=Z(Ya.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Rd.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),fn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),fn(e,0),this._preDelay=e,this.generate()}generate(){return Ie(this,void 0,void 0,function*(){const e=this.ready,t=new bc(2,this._decay+this._preDelay,this.context.sampleRate),n=new Zi({context:t}),r=new Zi({context:t}),i=new Ha({context:t});n.connect(i,0,0),r.connect(i,0,1);const o=new Ne({context:t}).toDestination();i.connect(o),n.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=t.render();return this.ready=a.then(Ce),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class et extends le{constructor(){super(Z(et.getDefaults(),arguments,["solo"])),this.name="Solo";const e=Z(et.getDefaults(),arguments,["solo"]);this.input=this.output=new Ne({context:this.context}),et._allSolos.has(this.context)||et._allSolos.set(this.context,new Set),et._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(le.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),et._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){et._soloed.has(this.context)||et._soloed.set(this.context,new Set),et._soloed.get(this.context).add(this)}_removeSolo(){et._soloed.has(this.context)&&et._soloed.get(this.context).delete(this)}_isSoloed(){return et._soloed.has(this.context)&&et._soloed.get(this.context).has(this)}_noSolos(){return!et._soloed.has(this.context)||et._soloed.has(this.context)&&et._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),et._allSolos.get(this.context).delete(this),this._removeSolo(),this}}et._allSolos=new Map;et._soloed=new Map;class Ga extends le{constructor(){super(Z(Ga.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=Z(Ga.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new qa({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ks({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(le.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class js extends le{constructor(){super(Z(js.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=Z(js.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new et({solo:e.solo,context:this.context}),this._panVol=this.output=new Ga({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(le.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return js.buses.has(e)||js.buses.set(e,new Ne({context:this.context})),js.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new Ne({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}js.buses=new Map;class iD extends le{constructor(){super(...arguments),this.name="Listener",this.positionX=new Oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(le.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}yc(s=>{s.listener=new iD({context:s})});vc(s=>{s.listener.dispose()});on().transport;const uh=on().destination;on().destination;on().listener;on().draw;on();const hh=new qr(900,"highpass"),hg=new ks(-6);hg.chain(hh,uh);const oD=new Ya(3).connect(hg),kc=new io({envelope:{attack:0,decay:.9,sustain:.2,release:.1}});kc.oscillator.type="triangle2";kc.volume.value=-6;kc.chain(hh,uh);const Tc=new io({envelope:{attack:.4,decay:.9,sustain:.7,release:.6}}).connect(oD);Tc.oscillator.type="triangle";Tc.volume.value=-6;Tc.chain(hh,uh);function aD(){return Math.floor((Math.random()-.5)*20)}let Pd=!1;const cD=async(s=0)=>{Pd||(await $A(),Pd=!0);try{if(s>2e3)Tc.triggerAttackRelease(60,.3);else if(s>1e3){let e=310;e+=aD(),kc.triggerAttackRelease(e,.001)}}catch(e){console.warn(e)}},na=1800,lD=(s,e)=>s.clone().normalize().clone().negate().normalize().multiplyScalar(e).add(s),uD=(s,e,t,n,r)=>{const i=new gp,o=1e-5;i.absarc(o,o,o,-Math.PI/2,-Math.PI,!0),i.absarc(o,e-n*2,o,Math.PI,Math.PI/2,!0),i.absarc(s-n*2,e-n*2,o,Math.PI/2,0,!0),i.absarc(s-n*2,o,o,0,-Math.PI/2,!0);const a=new dy(i,{depth:t-n*2,bevelEnabled:!0,bevelSegments:r,steps:2,bevelSize:n,bevelThickness:n,curveSegments:r});a.center();const c=[],l=a.getAttribute("normal"),u=a.getAttribute("position");for(let h=0;h<u.count;h+=1){const f=new _e(l.getX(h),l.getY(h),l.getZ(h)),p=new _e(u.getX(h),u.getY(h),u.getZ(h));let m=0,d=0;Math.abs(f.y)>.9?(m=p.x/s+.5,d=1-(p.z/t+.5)):Math.abs(f.x)>.9?(m=-p.z/t+.5,d=1-(-p.y/e+.5)):Math.abs(f.z)>.9&&(m=p.x/s+.5,d=1-(-p.y/e+.5)),c.push(m,d)}return a.setAttribute("uv",new oa(c,2)),a};uD(10,10,10,2,10);new fy(10,10,10);const hD=500,fD=800;let ki=null;const dD=500,fg=(s,e)=>{if(ki)return null;ki=setTimeout(()=>{ki&&(clearTimeout(ki),ki=null)},dD);const t=[];return s.forEach(r=>{const i=e.position.distanceTo(cE.set(r.x,r.y,r.z));i<fD&&t.push({id:r.ref_id||"",distance:i})}),t.sort((r,i)=>r.distance-i.distance).slice(0,hD).map(r=>r.id)};let vr,Ti;const pD=1e3,mD=2e3,gD=s=>{const e=As(),t=fs(w=>w.isUserDragging),n=fs(w=>w.isUserScrolling),r=fs(w=>w.setUserMovedCamera),{data:i,graphStyle:o,showSelectionGraph:a,setNearbyNodeIds:c,cameraFocusTrigger:l,graphRadius:u}=ut(w=>w),{camera:h}=qe(),[f,p]=b.useState(!1),[m,d]=b.useState(!1),[g,_]=b.useState(ld),k=b.useMemo(()=>{if(a)return new _e(0,0,0);const w=i==null?void 0:i.nodes.find(D=>D.ref_id===(e==null?void 0:e.ref_id)),C=u+300;let S=new _e(0,0,C);if(w&&i){const D=i==null?void 0:i.nodes.filter(B=>{var z;return(z=w.children)==null?void 0:z.find(U=>U===B.id)}),O=new _e(w.x,w.y,w.z);let j=new _e(0,0,0);D.map(B=>(j=j.add(new _e(B.x,B.y,B.z).normalize()),B));const V=w.scale?1-1/(w.scale+10):1,W=O.sub(j).multiplyScalar(.8*V);S=O.add(W)}return S},[a,e,i,u]),x=b.useMemo(()=>{if(a)return new _e(0,0,0);const w=i==null?void 0:i.nodes.find(C=>C.ref_id===(e==null?void 0:e.ref_id));return new _e((w==null?void 0:w.x)||0,(w==null?void 0:w.y)||0,(w==null?void 0:w.z)||0)},[a,e,i]);b.useEffect(()=>{var w;a&&((w=s.current)==null||w.setLookAt(ds.x,ds.y,ds.z,0,0,0,!1)),v()},[a]),b.useEffect(()=>{a?_(hE):(e==null?void 0:e.node_type)==="topic"?_(uE):_(ld)},[e,_,a]),b.useEffect(()=>{y()},[l]),b.useEffect(()=>{(t||n)&&(p(!0),d(!0))},[t,n,p,d]),b.useEffect(()=>{if(e)if(!a&&o==="earth"&&(s!=null&&s.current)){const w=s.current.camera.position.distanceTo(new _e),C=lD(x,-w/2);s.current.setLookAt(C.x,C.y,C.z,0,0,0,!0)}else vr&&clearTimeout(vr),vr=setTimeout(()=>{d(!0),clearTimeout(vr)},mD),v();return()=>{vr&&clearTimeout(vr),Ti&&clearTimeout(Ti)}},[e]),dn(w=>{s.current&&(f||T(k,w.camera),m||E(x,w.camera))});const v=()=>{if(e){const w=h.position.distanceTo(k);cD(w)}y()},y=()=>{p(!1),d(!1),r(!1),Ti&&clearTimeout(Ti),Ti=setTimeout(()=>{p(!0),d(!0)},pD)},T=(w,C)=>{if(C.position.distanceTo(w)<g)p(!0);else{C.position.lerp(w,.5);const D=fg((i==null?void 0:i.nodes)||[],h);D&&c(D)}},E=(w,C)=>{var S;(S=s==null?void 0:s.current)==null||S.setLookAt(C.position.x,C.position.y,C.position.z,w.x,w.y,w.z,!0)};return null},_D=1;let sa=null;const yD=(s,{enabled:e})=>{const t=As();gD(s);const{graphRadius:n}=ut(r=>r);return b.useEffect(()=>{e||(sa==null||sa.kill(),sa=null)},[e]),b.useEffect(()=>{!t&&s.current&&s.current.setLookAt(Mi.x,Mi.y,n+200,0,0,0,!0)},[t,n]),dn((r,i)=>{if(s.current){const{disableCameraRotation:o}=ut.getState(),{isUserDragging:a}=fs.getState();!o&&!a&&(s.current.azimuthAngle+=_D*i*py.DEG2RAD),s.current.update(i)}}),null},vD=({disableAnimations:s})=>{const e=b.useRef(null),{data:t,setNearbyNodeIds:n,setDisableCameraRotation:r}=ut(h=>h),[i]=b.useState(.8),{camera:o}=qe(),[a,c,l,u]=fs(h=>[h.isUserDragging,h.setIsUserDragging,h.isUserScrolling,h.isUserScrollingOnHtmlPanel]);return yD(e,{enabled:!s&&!l&&!a}),b.useEffect(()=>{if(!a){const h=fg((t==null?void 0:t.nodes)||[],o);h&&n(h)}},[o,o.position,o.position.x,o.position.y,o.position.z,t==null?void 0:t.nodes,n,a]),b.useEffect(()=>{a&&r(!0)},[a,r]),F.jsx(Rp,{ref:e,boundaryEnclosesCamera:!0,enabled:!u,makeDefault:!0,maxDistance:12e3,minDistance:100,onEnd:()=>c(!1),onStart:()=>c(!0),smoothTime:i})},bD=({node:s})=>{const{getNodeKeysByType:e}=_o(r=>r),t=e(s.node_type)||"",n=s!=null&&s.properties?s==null?void 0:s.properties[t]:"";return F.jsx(xD,{children:F.jsxs(wD,{children:[F.jsx(kD,{children:F.jsx(gy,{type:s.node_type})}),n&&F.jsx(TD,{children:n})]})})},xD=$e(Nt)`
  width: 390px;
  min-height: 100px;
  background: ${Te.HOVER_CARD_BG};
  border-radius: 8px;
  padding: 15px;
  padding-bottom: 3px !important;
  flex-direction: column;
  gap: 4px;
  pointer-events: auto;
  align-items: flex-start;
`,wD=$e(Nt)`
  margin-top: 0;
  flex-direction: column;
  gap: 4px;
  align-items: flex-start;
`,kD=$e(ip)`
  font-family: Barlow;
  font-size: 20px;
  font-weight: 600;
  line-height: 24px;
  color: ${Te.white};
  margin: 0;
`,TD=$e(ip)`
  font-family: Barlow;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  color: ${Te.white};
  margin: 0;
  opacity: 0.8;
  white-space: normal;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  line-clamp: 3;
  -webkit-line-clamp: 3;
`,ED=()=>{const s=b.useRef(null),e=dp();return b.useEffect(()=>{s.current&&(s.current.style.display=e?"block":"none")},[e]),b.useEffect(()=>{let t;const n=r=>{const i=s.current;if(!i)return;if(r.target.tagName!=="CANVAS"){i.style.display="none";return}i.style.display="block";const a=i.offsetWidth,c=i.offsetHeight,l=window.innerWidth-a-10,u=window.innerHeight-c-10,h=Math.min(r.clientX+10,l),f=Math.min(r.clientY+10,u);t=requestAnimationFrame(()=>{i.style.transform=`translate(${h}px, ${f}px)`})};return window.addEventListener("mousemove",n),()=>{window.removeEventListener("mousemove",n),cancelAnimationFrame(t)}},[]),F.jsx(CD,{ref:s,children:e&&F.jsx(bD,{node:e})})},CD=$e(Nt)`
  position: fixed; /* Fixed position for the tooltip */
  left: 0;
  top: 0;
  transform: translate(0, 0); /* Initial transform */
  will-change: transform; /* Optimize for transform changes */
  background: ${Te.BG1};
  color: white;
  padding: 5px;
  border-radius: 3px;
  pointer-events: none; /* Tooltip won't block mouse events */
  z-index: 1000;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: none; /* Initially hidden */
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* Optional shadow for better visibility */
`;function jn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function dg(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Bt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hr={duration:.5,overwrite:!1,delay:0},fh,pt,Xe,Zt=1e8,Me=1/Zt,Yl=Math.PI*2,SD=Yl/4,OD=0,pg=Math.sqrt,AD=Math.cos,DD=Math.sin,ht=function(e){return typeof e=="string"},Ze=function(e){return typeof e=="function"},Kn=function(e){return typeof e=="number"},dh=function(e){return typeof e>"u"},An=function(e){return typeof e=="object"},At=function(e){return e!==!1},ph=function(){return typeof window<"u"},ra=function(e){return Ze(e)||ht(e)},mg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},mt=Array.isArray,Gl=/(?:-?\.?\d|\.)+/gi,gg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_g=/[+-]=-?[.\d]+/,yg=/[^,'"\[\]\s]+/gi,RD=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,He,Yt,Xl,mh,Wt={},Xa={},vg,bg=function(e){return(Xa=sr(e,Wt))&&It},gh=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},co=function(e,t){return!t&&console.warn(e)},xg=function(e,t){return e&&(Wt[e]=t)&&Xa&&(Xa[e]=t)||Wt},lo=function(){return 0},PD={suppressEvents:!0,isStart:!0,kill:!1},ua={suppressEvents:!0,kill:!1},MD={suppressEvents:!0},_h={},ms=[],Zl={},wg,Ft={},nl={},Md=30,ha=[],yh="",vh=function(e){var t=e[0],n,r;if(An(t)||Ze(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=ha.length;r--&&!ha[r].targetTest(t););n=ha[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Hg(e[r],n)))||e.splice(r,1);return e},Hs=function(e){return e._gsap||vh(Kt(e))[0]._gsap},kg=function(e,t,n){return(n=e[t])&&Ze(n)?e[t]():dh(n)&&e.getAttribute&&e.getAttribute(t)||n},Dt=function(e,t){return(e=e.split(",")).forEach(t)||e},tt=function(e){return Math.round(e*1e5)/1e5||0},ct=function(e){return Math.round(e*1e7)/1e7||0},Pr=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},ID=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Za=function(){var e=ms.length,t=ms.slice(0),n,r;for(Zl={},ms.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Tg=function(e,t,n,r){ms.length&&!pt&&Za(),e.render(t,n,r||pt&&t<0&&(e._initted||e._startAt)),ms.length&&!pt&&Za()},Eg=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(yg).length<2?t:ht(e)?e.trim():e},Cg=function(e){return e},en=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ND=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},sr=function(e,t){for(var n in t)e[n]=t[n];return e},Id=function s(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=An(t[n])?s(e[n]||(e[n]={}),t[n]):t[n]);return e},Ka=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},Ni=function(e){var t=e.parent||He,n=e.keyframes?ND(mt(e.keyframes)):en;if(At(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},$D=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},Sg=function(e,t,n,r,i){n===void 0&&(n="_first"),r===void 0&&(r="_last");var o=e[r],a;if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Ec=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Cs=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ys=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},FD=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Kl=function(e,t,n,r){return e._startAt&&(pt?e._startAt.revert(ua):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},LD=function s(e){return!e||e._ts&&s(e.parent)},Nd=function(e){return e._repeat?Yr(e._tTime,e=e.duration()+e._rDelay)*e:0},Yr=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Qa=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Cc=function(e){return e._end=ct(e._start+(e._tDur/Math.abs(e._ts||e._rts||Me)||0))},Sc=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ct(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Cc(e),n._dirty||Ys(n,e)),e},Og=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Qa(e.rawTime(),t),(!t._dur||Io(0,t.totalDuration(),n)-t._tTime>Me)&&t.render(n,!0)),Ys(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Me}},wn=function(e,t,n,r){return t.parent&&Cs(t),t._start=ct((Kn(n)?n:n||e!==He?Ht(e,n,t):e._time)+t._delay),t._end=ct(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Sg(e,t,"_first","_last",e._sort?"_start":0),Ql(t)||(e._recent=t),r||Og(e,t),e._ts<0&&Sc(e,e._tTime),e},Ag=function(e,t){return(Wt.ScrollTrigger||gh("scrollTrigger",t))&&Wt.ScrollTrigger.create(t,e)},Dg=function(e,t,n,r,i){if(xh(e,t,i),!e._initted)return 1;if(!n&&e._pt&&!pt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&wg!==jt.frame)return ms.push(e),e._lazy=[i,r],1},jD=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},Ql=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},VD=function(e,t,n,r){var i=e.ratio,o=t<0||!t&&(!e._start&&jD(e)&&!(!e._initted&&Ql(e))||(e._ts<0||e._dp._ts<0)&&!Ql(e))?0:1,a=e._rDelay,c=0,l,u,h;if(a&&e._repeat&&(c=Io(0,e._tDur,t),u=Yr(c,a),e._yoyo&&u&1&&(o=1-o),u!==Yr(e._tTime,a)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||pt||r||e._zTime===Me||!t&&e._zTime){if(!e._initted&&Dg(e,t,r,n,c))return;for(h=e._zTime,e._zTime=t||(n?Me:0),n||(n=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&Kl(e,t,n,!0),e._onUpdate&&!n&&Vt(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Vt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Cs(e,1),!n&&!pt&&(Vt(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},zD=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Gr=function(e,t,n,r){var i=e._repeat,o=ct(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:ct(o*(i+1)+e._rDelay*i):o,a>0&&!r&&Sc(e,e._tTime=e._tDur*a),e.parent&&Cc(e),n||Ys(e.parent,e),e},$d=function(e){return e instanceof xt?Ys(e):Gr(e,e._dur)},UD={_start:0,endTime:lo,totalDuration:lo},Ht=function s(e,t,n){var r=e.labels,i=e._recent||UD,o=e.duration()>=Zt?i.endTime(!1):e._dur,a,c,l;return ht(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l=t.substr(-1)==="%",a=t.indexOf("="),c==="<"||c===">"?(a>=0&&(t=t.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?i:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&n&&(c=c/100*(mt(n)?n[0]:n).totalDuration()),a>1?s(e,t.substr(0,a-1),n)+c:o+c)):t==null?o:+t},$i=function(e,t,n){var r=Kn(t[1]),i=(r?2:1)+(e<2?0:1),o=t[i],a,c;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,c=n;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=At(c.vars.inherit)&&c.parent;o.immediateRender=At(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new rt(t[0],o,t[i+1])},Ps=function(e,t){return e||e===0?t(e):t},Io=function(e,t,n){return n<e?e:n>t?t:n},dt=function(e,t){return!ht(e)||!(t=RD.exec(e))?"":t[1]},BD=function(e,t,n){return Ps(n,function(r){return Io(e,t,r)})},Jl=[].slice,Rg=function(e,t){return e&&An(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&An(e[0]))&&!e.nodeType&&e!==Yt},WD=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var i;return ht(r)&&!t||Rg(r,1)?(i=n).push.apply(i,Kt(r)):n.push(r)})||n},Kt=function(e,t,n){return Xe&&!t&&Xe.selector?Xe.selector(e):ht(e)&&!n&&(Xl||!Xr())?Jl.call((t||mh).querySelectorAll(e),0):mt(e)?WD(e,n):Rg(e)?Jl.call(e,0):e?[e]:[]},eu=function(e){return e=Kt(e)[0]||co("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Kt(t,n.querySelectorAll?n:n===e?co("Invalid scope")||mh.createElement("div"):e)}},Pg=function(e){return e.sort(function(){return .5-Math.random()})},Mg=function(e){if(Ze(e))return e;var t=An(e)?e:{each:e},n=Gs(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,h=r;return ht(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],h=r[1]),function(f,p,m){var d=(m||t).length,g=o[d],_,k,x,v,y,T,E,w,C;if(!g){if(C=t.grid==="auto"?0:(t.grid||[1,Zt])[1],!C){for(E=-Zt;E<(E=m[C++].getBoundingClientRect().left)&&C<d;);C<d&&C--}for(g=o[d]=[],_=c?Math.min(C,d)*u-.5:r%C,k=C===Zt?0:c?d*h/C-.5:r/C|0,E=0,w=Zt,T=0;T<d;T++)x=T%C-_,v=k-(T/C|0),g[T]=y=l?Math.abs(l==="y"?v:x):pg(x*x+v*v),y>E&&(E=y),y<w&&(w=y);r==="random"&&Pg(g),g.max=E-w,g.min=w,g.v=d=(parseFloat(t.amount)||parseFloat(t.each)*(C>d?d-1:l?l==="y"?d/C:C:Math.max(C,d/C))||0)*(r==="edges"?-1:1),g.b=d<0?i-d:i,g.u=dt(t.amount||t.each)||0,n=n&&d<0?Bg(n):n}return d=(g[f]-g.min)/g.max||0,ct(g.b+(n?n(d):d)*g.v)+g.u}},tu=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=ct(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Kn(n)?0:dt(n))}},Ig=function(e,t){var n=mt(e),r,i;return!n&&An(e)&&(r=n=e.radius||Zt,e.values?(e=Kt(e.values),(i=!Kn(e[0]))&&(r*=r)):e=tu(e.increment)),Ps(t,n?Ze(e)?function(o){return i=e(o),Math.abs(i-o)<=r?i:o}:function(o){for(var a=parseFloat(i?o.x:o),c=parseFloat(i?o.y:0),l=Zt,u=0,h=e.length,f,p;h--;)i?(f=e[h].x-a,p=e[h].y-c,f=f*f+p*p):f=Math.abs(e[h]-a),f<l&&(l=f,u=h);return u=!r||l<=r?e[u]:o,i||u===o||Kn(o)?u:u+dt(o)}:tu(e))},Ng=function(e,t,n,r){return Ps(mt(e)?!t:n===!0?!!(n=0):!r,function(){return mt(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},qD=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(i,o){return o(i)},r)}},HD=function(e,t){return function(n){return e(parseFloat(n))+(t||dt(n))}},YD=function(e,t,n){return Fg(e,t,0,1,n)},$g=function(e,t,n){return Ps(n,function(r){return e[~~t(r)]})},GD=function s(e,t,n){var r=t-e;return mt(e)?$g(e,s(0,e.length),t):Ps(n,function(i){return(r+(i-e)%r)%r+e})},XD=function s(e,t,n){var r=t-e,i=r*2;return mt(e)?$g(e,s(0,e.length-1),t):Ps(n,function(o){return o=(i+(o-e)%i)%i||0,e+(o>r?i-o:o)})},uo=function(e){for(var t=0,n="",r,i,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",i=e.substr(r+7,o-r-7).match(a?yg:Gl),n+=e.substr(t,r-t)+Ng(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Fg=function(e,t,n,r,i){var o=t-e,a=r-n;return Ps(i,function(c){return n+((c-e)/o*a||0)})},ZD=function s(e,t,n,r){var i=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!i){var o=ht(e),a={},c,l,u,h,f;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(mt(e)&&!mt(t)){for(u=[],h=e.length,f=h-2,l=1;l<h;l++)u.push(s(e[l-1],e[l]));h--,i=function(m){m*=h;var d=Math.min(f,~~m);return u[d](m-d)},n=t}else r||(e=sr(mt(e)?[]:{},e));if(!u){for(c in t)bh.call(a,e,c,"get",t[c]);i=function(m){return Th(m,a)||(o?e.p:e)}}}return Ps(n,i)},Fd=function(e,t,n){var r=e.labels,i=Zt,o,a,c;for(o in r)a=r[o]-t,a<0==!!n&&a&&i>(a=Math.abs(a))&&(c=o,i=a);return c},Vt=function(e,t,n){var r=e.vars,i=r[t],o=Xe,a=e._ctx,c,l,u;if(i)return c=r[t+"Params"],l=r.callbackScope||e,n&&ms.length&&Za(),a&&(Xe=a),u=c?i.apply(l,c):i.call(l),Xe=o,u},Si=function(e){return Cs(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pt),e.progress()<1&&Vt(e,"onInterrupt"),e},Sr,Lg=[],jg=function(e){if(ph()&&e){e=!e.name&&e.default||e;var t=e.name,n=Ze(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:lo,render:Th,add:bh,kill:fR,modifier:hR,rawVars:0},o={targetTest:0,get:0,getSetter:kh,aliases:{},register:0};if(Xr(),e!==r){if(Ft[t])return;en(r,en(Ka(e,i),o)),sr(r.prototype,sr(i,Ka(e,o))),Ft[r.prop=t]=r,e.targetTest&&(ha.push(r),_h[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}xg(t,r),e.register&&e.register(It,r,Rt)}else e&&Lg.push(e)},Pe=255,Oi={aqua:[0,Pe,Pe],lime:[0,Pe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Pe],navy:[0,0,128],white:[Pe,Pe,Pe],olive:[128,128,0],yellow:[Pe,Pe,0],orange:[Pe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Pe,0,0],pink:[Pe,192,203],cyan:[0,Pe,Pe],transparent:[Pe,Pe,Pe,0]},sl=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Pe+.5|0},Vg=function(e,t,n){var r=e?Kn(e)?[e>>16,e>>8&Pe,e&Pe]:0:Oi.black,i,o,a,c,l,u,h,f,p,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Oi[e])r=Oi[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+i+i+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Pe,r&Pe,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Pe,e&Pe]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(Gl),!t)c=+r[0]%360/360,l=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(l+1):u+l-u*l,i=u*2-o,r.length>3&&(r[3]*=1),r[0]=sl(c+1/3,i,o),r[1]=sl(c,i,o),r[2]=sl(c-1/3,i,o);else if(~e.indexOf("="))return r=e.match(gg),n&&r.length<4&&(r[3]=1),r}else r=e.match(Gl)||Oi.transparent;r=r.map(Number)}return t&&!m&&(i=r[0]/Pe,o=r[1]/Pe,a=r[2]/Pe,h=Math.max(i,o,a),f=Math.min(i,o,a),u=(h+f)/2,h===f?c=l=0:(p=h-f,l=u>.5?p/(2-h-f):p/(h+f),c=h===i?(o-a)/p+(o<a?6:0):h===o?(a-i)/p+2:(i-o)/p+4,c*=60),r[0]=~~(c+.5),r[1]=~~(l*100+.5),r[2]=~~(u*100+.5)),n&&r.length<4&&(r[3]=1),r},zg=function(e){var t=[],n=[],r=-1;return e.split(gs).forEach(function(i){var o=i.match(Cr)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},Ld=function(e,t,n){var r="",i=(e+r).match(gs),o=t?"hsla(":"rgba(",a=0,c,l,u,h;if(!i)return e;if(i=i.map(function(f){return(f=Vg(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(u=zg(e),c=n.c,c.join(r)!==u.c.join(r)))for(l=e.replace(gs,"1").split(Cr),h=l.length-1;a<h;a++)r+=l[a]+(~c.indexOf(a)?i.shift()||o+"0,0,0,0)":(u.length?u:i.length?i:n).shift());if(!l)for(l=e.split(gs),h=l.length-1;a<h;a++)r+=l[a]+i[a];return r+l[h]},gs=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Oi)s+="|"+e+"\\b";return new RegExp(s+")","gi")}(),KD=/hsl[a]?\(/,Ug=function(e){var t=e.join(" "),n;if(gs.lastIndex=0,gs.test(t))return n=KD.test(t),e[1]=Ld(e[1],n),e[0]=Ld(e[0],n,zg(e[1])),!0},ho,jt=function(){var s=Date.now,e=500,t=33,n=s(),r=n,i=1e3/240,o=i,a=[],c,l,u,h,f,p,m=function d(g){var _=s()-r,k=g===!0,x,v,y,T;if(_>e&&(n+=_-t),r+=_,y=r-n,x=y-o,(x>0||k)&&(T=++h.frame,f=y-h.time*1e3,h.time=y=y/1e3,o+=x+(x>=i?4:i-x),v=1),k||(c=l(d)),v)for(p=0;p<a.length;p++)a[p](y,f,T,g)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){vg&&(!Xl&&ph()&&(Yt=Xl=window,mh=Yt.document||{},Wt.gsap=It,(Yt.gsapVersions||(Yt.gsapVersions=[])).push(It.version),bg(Xa||Yt.GreenSockGlobals||!Yt.gsap&&Yt||{}),u=Yt.requestAnimationFrame,Lg.forEach(jg)),c&&h.sleep(),l=u||function(g){return setTimeout(g,o-h.time*1e3+1|0)},ho=1,m(2))},sleep:function(){(u?Yt.cancelAnimationFrame:clearTimeout)(c),ho=0,l=lo},lagSmoothing:function(g,_){e=g||1/0,t=Math.min(_||33,e)},fps:function(g){i=1e3/(g||240),o=h.time*1e3+i},add:function(g,_,k){var x=_?function(v,y,T,E){g(v,y,T,E),h.remove(x)}:g;return h.remove(g),a[k?"unshift":"push"](x),Xr(),x},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&p>=_&&p--},_listeners:a},h}(),Xr=function(){return!ho&&jt.wake()},be={},QD=/^[\d.\-M][\d.\-,\s]/,JD=/["']/g,eR=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],i=1,o=n.length,a,c,l;i<o;i++)c=n[i],a=i!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(JD,"").trim():+l,r=c.substr(a+1).trim();return t},tR=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},nR=function(e){var t=(e+"").split("("),n=be[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[eR(t[1])]:tR(e).split(",").map(Eg)):be._CE&&QD.test(e)?be._CE("",e):n},Bg=function(e){return function(t){return 1-e(1-t)}},Wg=function s(e,t){for(var n=e._first,r;n;)n instanceof xt?s(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?s(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},Gs=function(e,t){return e&&(Ze(e)?e:be[e]||nR(e))||t},lr=function(e,t,n,r){n===void 0&&(n=function(c){return 1-t(1-c)}),r===void 0&&(r=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var i={easeIn:t,easeOut:n,easeInOut:r},o;return Dt(e,function(a){be[a]=Wt[a]=i,be[o=a.toLowerCase()]=n;for(var c in i)be[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=be[a+"."+c]=i[c]}),i},qg=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},rl=function s(e,t,n){var r=t>=1?t:1,i=(n||(e?.3:.45))/(t<1?t:1),o=i/Yl*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*DD((u-o)*i)+1},c=e==="out"?a:e==="in"?function(l){return 1-a(1-l)}:qg(a);return i=Yl/i,c.config=function(l,u){return s(e,l,u)},c},il=function s(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:qg(n);return r.config=function(i){return s(e,i)},r};Dt("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;lr(s+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});be.Linear.easeNone=be.none=be.Linear.easeIn;lr("Elastic",rl("in"),rl("out"),rl());(function(s,e){var t=1/e,n=2*t,r=2.5*t,i=function(a){return a<t?s*a*a:a<n?s*Math.pow(a-1.5/e,2)+.75:a<r?s*(a-=2.25/e)*a+.9375:s*Math.pow(a-2.625/e,2)+.984375};lr("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);lr("Expo",function(s){return s?Math.pow(2,10*(s-1)):0});lr("Circ",function(s){return-(pg(1-s*s)-1)});lr("Sine",function(s){return s===1?1:-AD(s*SD)+1});lr("Back",il("in"),il("out"),il());be.SteppedEase=be.steps=Wt.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0,o=1-Me;return function(a){return((r*Io(0,o,a)|0)+i)*n}}};Hr.ease=be["quad.out"];Dt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return yh+=s+","+s+"Params,"});var Hg=function(e,t){this.id=OD++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:kg,this.set=t?t.getSetter:kh},fo=function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Gr(this,+t.duration,1,1),this.data=t.data,Xe&&(this._ctx=Xe,Xe.data.push(this)),ho||jt.wake()}var e=s.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Gr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Xr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Sc(this,n),!i._dp||i.parent||Og(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&wn(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Me||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Tg(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Nd(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Nd(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,r):this._repeat?Yr(this._tTime,i)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-Me?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Qa(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Me?0:this._rts,this.totalTime(Io(-Math.abs(this._delay),this._tDur,i),r!==!1),Cc(this),FD(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Xr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Me&&(this._tTime-=Me)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&wn(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(At(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qa(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=MD);var r=pt;return pt=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),pt=r,this},e.globalTime=function(n){for(var r=this,i=arguments.length?n:r.rawTime();r;)i=r._start+i/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,$d(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,$d(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Ht(this,n),At(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,At(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Me:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Me,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=r&&i<this.endTime(!0)-Me)},e.eventCallback=function(n,r,i){var o=this.vars;return arguments.length>1?(r?(o[n]=r,i&&(o[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(i){var o=Ze(n)?n:Cg,a=function(){var l=r.then;r.then=null,Ze(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),i(o),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Si(this)},s}();en(fo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Me,_prom:0,_ps:!1,_rts:1});var xt=function(s){dg(e,s);function e(n,r){var i;return n===void 0&&(n={}),i=s.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=At(n.sortChildren),He&&wn(n.parent||He,jn(i),r),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&Ag(jn(i),n.scrollTrigger),i}var t=e.prototype;return t.to=function(r,i,o){return $i(0,arguments,this),this},t.from=function(r,i,o){return $i(1,arguments,this),this},t.fromTo=function(r,i,o,a){return $i(2,arguments,this),this},t.set=function(r,i,o){return i.duration=0,i.parent=this,Ni(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new rt(r,i,Ht(this,o),1),this},t.call=function(r,i,o){return wn(this,rt.delayedCall(0,r,i),o)},t.staggerTo=function(r,i,o,a,c,l,u){return o.duration=i,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new rt(r,o,Ht(this,c)),this},t.staggerFrom=function(r,i,o,a,c,l,u){return o.runBackwards=1,Ni(o).immediateRender=At(o.immediateRender),this.staggerTo(r,i,o,a,c,l,u)},t.staggerFromTo=function(r,i,o,a,c,l,u,h){return a.startAt=o,Ni(a).immediateRender=At(a.immediateRender),this.staggerTo(r,i,a,c,l,u,h)},t.render=function(r,i,o){var a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:ct(r),h=this._zTime<0!=r<0&&(this._initted||!l),f,p,m,d,g,_,k,x,v,y,T,E;if(this!==He&&u>c&&r>=0&&(u=c),u!==this._tTime||o||h){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),f=u,v=this._start,x=this._ts,_=!x,h&&(l||(a=this._zTime),(r||!i)&&(this._zTime=r)),this._repeat){if(T=this._yoyo,g=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(g*100+r,i,o);if(f=ct(u%g),u===c?(d=this._repeat,f=l):(d=~~(u/g),d&&d===u/g&&(f=l,d--),f>l&&(f=l)),y=Yr(this._tTime,g),!a&&this._tTime&&y!==d&&this._tTime-y*g-this._dur<=0&&(y=d),T&&d&1&&(f=l-f,E=1),d!==y&&!this._lock){var w=T&&y&1,C=w===(T&&d&1);if(d<y&&(w=!w),a=w?0:u%l?l:u,this._lock=1,this.render(a||(E?0:ct(d*g)),i,!l)._lock=0,this._tTime=u,!i&&this.parent&&Vt(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,C&&(this._lock=2,a=w?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Wg(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(k=zD(this,ct(a),ct(f)),k&&(u-=f-(f=k._start))),this._tTime=u,this._time=f,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!i&&!d&&(Vt(this,"onStart"),this._tTime!==u))return this;if(f>=a&&r>=0)for(p=this._first;p;){if(m=p._next,(p._act||f>=p._start)&&p._ts&&k!==p){if(p.parent!==this)return this.render(r,i,o);if(p.render(p._ts>0?(f-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(f-p._start)*p._ts,i,o),f!==this._time||!this._ts&&!_){k=0,m&&(u+=this._zTime=-Me);break}}p=m}else{p=this._last;for(var S=r<0?r:f;p;){if(m=p._prev,(p._act||S<=p._end)&&p._ts&&k!==p){if(p.parent!==this)return this.render(r,i,o);if(p.render(p._ts>0?(S-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(S-p._start)*p._ts,i,o||pt&&(p._initted||p._startAt)),f!==this._time||!this._ts&&!_){k=0,m&&(u+=this._zTime=S?-Me:Me);break}}p=m}}if(k&&!i&&(this.pause(),k.render(f>=a?0:-Me)._zTime=f>=a?1:-1,this._ts))return this._start=v,Cc(this),this.render(r,i,o);this._onUpdate&&!i&&Vt(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(v===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Cs(this,1),!i&&!(r<0&&!a)&&(u||a||!c)&&(Vt(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,i){var o=this;if(Kn(i)||(i=Ht(this,i,r)),!(r instanceof fo)){if(mt(r))return r.forEach(function(a){return o.add(a,i)}),this;if(ht(r))return this.addLabel(r,i);if(Ze(r))r=rt.delayedCall(0,r);else return this}return this!==r?wn(this,r,i):this},t.getChildren=function(r,i,o,a){r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),a===void 0&&(a=-Zt);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof rt?i&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,i,o)))),l=l._next;return c},t.getById=function(r){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===r)return i[o]},t.remove=function(r){return ht(r)?this.removeLabel(r):Ze(r)?this.killTweensOf(r):(Ec(this,r),r===this._recent&&(this._recent=this._last),Ys(this))},t.totalTime=function(r,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ct(jt.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),s.prototype.totalTime.call(this,r,i),this._forcing=0,this):this._tTime},t.addLabel=function(r,i){return this.labels[r]=Ht(this,i),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,i,o){var a=rt.delayedCall(0,i||lo,o);return a.data="isPause",this._hasPause=1,wn(this,a,Ht(this,r))},t.removePause=function(r){var i=this._first;for(r=Ht(this,r);i;)i._start===r&&i.data==="isPause"&&Cs(i),i=i._next},t.killTweensOf=function(r,i,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)ls!==a[c]&&a[c].kill(r,i);return this},t.getTweensOf=function(r,i){for(var o=[],a=Kt(r),c=this._first,l=Kn(i),u;c;)c instanceof rt?ID(c._targets,a)&&(l?(!ls||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&o.push(c):(u=c.getTweensOf(a,i)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,i){i=i||{};var o=this,a=Ht(o,r),c=i,l=c.startAt,u=c.onStart,h=c.onStartParams,f=c.immediateRender,p,m=rt.to(o,en({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||Me,onStart:function(){if(o.pause(),!p){var g=i.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());m._dur!==g&&Gr(m,g,0,1).render(m._time,!0,!0),p=1}u&&u.apply(m,h||[])}},i));return f?m.render(0):m},t.tweenFromTo=function(r,i,o){return this.tweenTo(i,en({startAt:{time:Ht(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Fd(this,Ht(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Fd(this,Ht(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Me)},t.shiftChildren=function(r,i,o){o===void 0&&(o=0);for(var a=this._first,c=this.labels,l;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(i)for(l in c)c[l]>=o&&(c[l]+=r);return Ys(this)},t.invalidate=function(r){var i=this._first;for(this._lock=0;i;)i.invalidate(r),i=i._next;return s.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ys(this)},t.totalDuration=function(r){var i=0,o=this,a=o._last,c=Zt,l,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,wn(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(i-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>i&&a._ts&&(i=a._end),a=l;Gr(o,o===He&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(He._ts&&(Tg(He,Qa(r,He)),wg=jt.frame),jt.frame>=Md){Md+=Bt.autoSleep||120;var i=He._first;if((!i||!i._ts)&&Bt.autoSleep&&jt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||jt.sleep()}}},e}(fo);en(xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var sR=function(e,t,n,r,i,o,a){var c=new Rt(this._pt,e,t,0,1,Qg,null,i),l=0,u=0,h,f,p,m,d,g,_,k;for(c.b=n,c.e=r,n+="",r+="",(_=~r.indexOf("random("))&&(r=uo(r)),o&&(k=[n,r],o(k,e,t),n=k[0],r=k[1]),f=n.match(tl)||[];h=tl.exec(r);)m=h[0],d=r.substring(l,h.index),p?p=(p+1)%5:d.substr(-5)==="rgba("&&(p=1),m!==f[u++]&&(g=parseFloat(f[u-1])||0,c._pt={_next:c._pt,p:d||u===1?d:",",s:g,c:m.charAt(1)==="="?Pr(g,m)-g:parseFloat(m)-g,m:p&&p<4?Math.round:0},l=tl.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(_g.test(r)||_)&&(c.e=0),this._pt=c,c},bh=function(e,t,n,r,i,o,a,c,l,u){Ze(r)&&(r=r(i||0,e,o));var h=e[t],f=n!=="get"?n:Ze(h)?l?e[t.indexOf("set")||!Ze(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,p=Ze(h)?l?cR:Zg:wh,m;if(ht(r)&&(~r.indexOf("random(")&&(r=uo(r)),r.charAt(1)==="="&&(m=Pr(f,r)+(dt(f)||0),(m||m===0)&&(r=m))),!u||f!==r||nu)return!isNaN(f*r)&&r!==""?(m=new Rt(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?uR:Kg,0,p),l&&(m.fp=l),a&&m.modifier(a,this,e),this._pt=m):(!h&&!(t in e)&&gh(t,r),sR.call(this,e,t,f,r,p,c||Bt.stringFilter,l))},rR=function(e,t,n,r,i){if(Ze(e)&&(e=Fi(e,i,t,n,r)),!An(e)||e.style&&e.nodeType||mt(e)||mg(e))return ht(e)?Fi(e,i,t,n,r):e;var o={},a;for(a in e)o[a]=Fi(e[a],i,t,n,r);return o},Yg=function(e,t,n,r,i,o){var a,c,l,u;if(Ft[e]&&(a=new Ft[e]).init(i,a.rawVars?t[e]:rR(t[e],r,i,o,n),n,r,o)!==!1&&(n._pt=c=new Rt(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==Sr))for(l=n._ptLookup[n._targets.indexOf(i)],u=a._props.length;u--;)l[a._props[u]]=c;return a},ls,nu,xh=function s(e,t,n){var r=e.vars,i=r.ease,o=r.startAt,a=r.immediateRender,c=r.lazy,l=r.onUpdate,u=r.runBackwards,h=r.yoyoEase,f=r.keyframes,p=r.autoRevert,m=e._dur,d=e._startAt,g=e._targets,_=e.parent,k=_&&_.data==="nested"?_.vars.targets:g,x=e._overwrite==="auto"&&!fh,v=e.timeline,y,T,E,w,C,S,D,O,j,V,W,B,z;if(v&&(!f||!i)&&(i="none"),e._ease=Gs(i,Hr.ease),e._yEase=h?Bg(Gs(h===!0?i:h,Hr.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!v&&!!r.runBackwards,!v||f&&!r.stagger){if(O=g[0]?Hs(g[0]).harness:0,B=O&&r[O.prop],y=Ka(r,_h),d&&(d._zTime<0&&d.progress(1),t<0&&u&&a&&!p?d.render(-1,!0):d.revert(u&&m?ua:PD),d._lazy=0),o){if(Cs(e._startAt=rt.set(g,en({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!d&&At(c),startAt:null,delay:0,onUpdate:l&&function(){return Vt(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pt||!a&&!p)&&e._startAt.revert(ua),a&&m&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(u&&m&&!d){if(t&&(a=!1),E=en({overwrite:!1,data:"isFromStart",lazy:a&&!d&&At(c),immediateRender:a,stagger:0,parent:_},y),B&&(E[O.prop]=B),Cs(e._startAt=rt.set(g,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pt?e._startAt.revert(ua):e._startAt.render(-1,!0)),e._zTime=t,!a)s(e._startAt,Me,Me);else if(!t)return}for(e._pt=e._ptCache=0,c=m&&At(c)||c&&!m,T=0;T<g.length;T++){if(C=g[T],D=C._gsap||vh(g)[T]._gsap,e._ptLookup[T]=V={},Zl[D.id]&&ms.length&&Za(),W=k===g?T:k.indexOf(C),O&&(j=new O).init(C,B||y,e,W,k)!==!1&&(e._pt=w=new Rt(e._pt,C,j.name,0,1,j.render,j,0,j.priority),j._props.forEach(function(U){V[U]=w}),j.priority&&(S=1)),!O||B)for(E in y)Ft[E]&&(j=Yg(E,y,e,W,C,k))?j.priority&&(S=1):V[E]=w=bh.call(e,C,E,"get",y[E],W,k,0,r.stringFilter);e._op&&e._op[T]&&e.kill(C,e._op[T]),x&&e._pt&&(ls=e,He.killTweensOf(C,V,e.globalTime(t)),z=!e.parent,ls=0),e._pt&&c&&(Zl[D.id]=1)}S&&Jg(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!z,f&&t<=0&&v.render(Zt,!0,!0)},iR=function(e,t,n,r,i,o,a,c){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,f,p;if(!l)for(l=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if(u=f[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return nu=1,e.vars[t]="+=0",xh(e,a),nu=0,c?co(t+" not eligible for reset"):1;l.push(u)}for(p=l.length;p--;)h=l[p],u=h._pt||h,u.s=(r||r===0)&&!i?r:u.s+(r||0)+o*u.c,u.c=n-u.s,h.e&&(h.e=tt(n)+dt(h.e)),h.b&&(h.b=u.s+dt(h.b))},oR=function(e,t){var n=e[0]?Hs(e[0]).harness:0,r=n&&n.aliases,i,o,a,c;if(!r)return t;i=sr({},t);for(o in r)if(o in i)for(c=r[o].split(","),a=c.length;a--;)i[c[a]]=i[o];return i},aR=function(e,t,n,r){var i=t.ease||r||"power1.inOut",o,a;if(mt(t))a=n[e]||(n[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:i})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:i})},Fi=function(e,t,n,r,i){return Ze(e)?e.call(t,n,r,i):ht(e)&&~e.indexOf("random(")?uo(e):e},Gg=yh+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Xg={};Dt(Gg+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return Xg[s]=1});var rt=function(s){dg(e,s);function e(n,r,i,o){var a;typeof r=="number"&&(i.duration=r,r=i,i=null),a=s.call(this,o?r:Ni(r))||this;var c=a.vars,l=c.duration,u=c.delay,h=c.immediateRender,f=c.stagger,p=c.overwrite,m=c.keyframes,d=c.defaults,g=c.scrollTrigger,_=c.yoyoEase,k=r.parent||He,x=(mt(n)||mg(n)?Kn(n[0]):"length"in r)?[n]:Kt(n),v,y,T,E,w,C,S,D;if(a._targets=x.length?vh(x):co("GSAP target "+n+" not found. https://gsap.com",!Bt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||f||ra(l)||ra(u)){if(r=a.vars,v=a.timeline=new xt({data:"nested",defaults:d||{},targets:k&&k.data==="nested"?k.vars.targets:x}),v.kill(),v.parent=v._dp=jn(a),v._start=0,f||ra(l)||ra(u)){if(E=x.length,S=f&&Mg(f),An(f))for(w in f)~Gg.indexOf(w)&&(D||(D={}),D[w]=f[w]);for(y=0;y<E;y++)T=Ka(r,Xg),T.stagger=0,_&&(T.yoyoEase=_),D&&sr(T,D),C=x[y],T.duration=+Fi(l,jn(a),y,C,x),T.delay=(+Fi(u,jn(a),y,C,x)||0)-a._delay,!f&&E===1&&T.delay&&(a._delay=u=T.delay,a._start+=u,T.delay=0),v.to(C,T,S?S(y,C,x):0),v._ease=be.none;v.duration()?l=u=0:a.timeline=0}else if(m){Ni(en(v.vars.defaults,{ease:"none"})),v._ease=Gs(m.ease||r.ease||"none");var O=0,j,V,W;if(mt(m))m.forEach(function(B){return v.to(x,B,">")}),v.duration();else{T={};for(w in m)w==="ease"||w==="easeEach"||aR(w,m[w],T,m.easeEach);for(w in T)for(j=T[w].sort(function(B,z){return B.t-z.t}),O=0,y=0;y<j.length;y++)V=j[y],W={ease:V.e,duration:(V.t-(y?j[y-1].t:0))/100*l},W[w]=V.v,v.to(x,W,O),O+=W.duration;v.duration()<l&&v.to({},{duration:l-v.duration()})}}l||a.duration(l=v.duration())}else a.timeline=0;return p===!0&&!fh&&(ls=jn(a),He.killTweensOf(x),ls=0),wn(k,jn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!l&&!m&&a._start===ct(k._time)&&At(h)&&LD(jn(a))&&k.data!=="nested")&&(a._tTime=-Me,a.render(Math.max(0,-u)||0)),g&&Ag(jn(a),g),a}var t=e.prototype;return t.render=function(r,i,o){var a=this._time,c=this._tDur,l=this._dur,u=r<0,h=r>c-Me&&!u?c:r<Me?0:r,f,p,m,d,g,_,k,x,v;if(!l)VD(this,r,i,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(f=h,x=this.timeline,this._repeat){if(d=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(d*100+r,i,o);if(f=ct(h%d),h===c?(m=this._repeat,f=l):(m=~~(h/d),m&&m===ct(h/d)&&(f=l,m--),f>l&&(f=l)),_=this._yoyo&&m&1,_&&(v=this._yEase,f=l-f),g=Yr(this._tTime,d),f===a&&!o&&this._initted&&m===g)return this._tTime=h,this;m!==g&&(x&&this._yEase&&Wg(x,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==l&&this._initted&&(this._lock=o=1,this.render(ct(d*m),!0).invalidate()._lock=0))}if(!this._initted){if(Dg(this,u?r:f,o,i,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&m!==g))return this;if(l!==this._dur)return this.render(r,i,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=k=(v||this._ease)(f/l),this._from&&(this.ratio=k=1-k),f&&!a&&!i&&!m&&(Vt(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(k,p.d),p=p._next;x&&x.render(r<0?r:!f&&_?-Me:x._dur*x._ease(f/this._dur),i,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!i&&(u&&Kl(this,r,i,o),Vt(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!i&&this.parent&&Vt(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Kl(this,r,!0,!0),(r||!l)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Cs(this,1),!i&&!(u&&!a)&&(h||a||_)&&(Vt(this,h===c?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),s.prototype.invalidate.call(this,r)},t.resetTo=function(r,i,o,a,c){ho||jt.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||xh(this,l),u=this._ease(l/this._dur),iR(this,r,i,o,a,u,l,c)?this.resetTo(r,i,o,a,1):(Sc(this,0),this.parent||Sg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,i){if(i===void 0&&(i="all"),!r&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Si(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,i,ls&&ls.vars.overwrite!==!0)._first||Si(this),this.parent&&o!==this.timeline.totalDuration()&&Gr(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,c=r?Kt(r):a,l=this._ptLookup,u=this._pt,h,f,p,m,d,g,_;if((!i||i==="all")&&$D(a,c))return i==="all"&&(this._pt=0),Si(this);for(h=this._op=this._op||[],i!=="all"&&(ht(i)&&(d={},Dt(i,function(k){return d[k]=1}),i=d),i=oR(a,i)),_=a.length;_--;)if(~c.indexOf(a[_])){f=l[_],i==="all"?(h[_]=i,m=f,p={}):(p=h[_]=h[_]||{},m=i);for(d in m)g=f&&f[d],g&&((!("kill"in g.d)||g.d.kill(d)===!0)&&Ec(this,g,"_pt"),delete f[d]),p!=="all"&&(p[d]=1)}return this._initted&&!this._pt&&u&&Si(this),this},e.to=function(r,i){return new e(r,i,arguments[2])},e.from=function(r,i){return $i(1,arguments)},e.delayedCall=function(r,i,o,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,i,o){return $i(2,arguments)},e.set=function(r,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(r,i)},e.killTweensOf=function(r,i,o){return He.killTweensOf(r,i,o)},e}(fo);en(rt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Dt("staggerTo,staggerFrom,staggerFromTo",function(s){rt[s]=function(){var e=new xt,t=Jl.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var wh=function(e,t,n){return e[t]=n},Zg=function(e,t,n){return e[t](n)},cR=function(e,t,n,r){return e[t](r.fp,n)},lR=function(e,t,n){return e.setAttribute(t,n)},kh=function(e,t){return Ze(e[t])?Zg:dh(e[t])&&e.setAttribute?lR:wh},Kg=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},uR=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Qg=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Th=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},hR=function(e,t,n,r){for(var i=this._pt,o;i;)o=i._next,i.p===r&&i.modifier(e,t,n),i=o},fR=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Ec(this,t,"_pt"):t.dep||(n=1),t=r;return!n},dR=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Jg=function(e){for(var t=e._pt,n,r,i,o;t;){for(n=t._next,r=i;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:i=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=i},Rt=function(){function s(t,n,r,i,o,a,c,l,u){this.t=n,this.s=i,this.c=o,this.p=r,this.r=a||Kg,this.d=c||this,this.set=l||wh,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(n,r,i){this.mSet=this.mSet||this.set,this.set=dR,this.m=n,this.mt=i,this.tween=r},s}();Dt(yh+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return _h[s]=1});Wt.TweenMax=Wt.TweenLite=rt;Wt.TimelineLite=Wt.TimelineMax=xt;He=new xt({sortChildren:!1,defaults:Hr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Bt.stringFilter=Ug;var Xs=[],fa={},pR=[],jd=0,mR=0,ol=function(e){return(fa[e]||pR).map(function(t){return t()})},su=function(){var e=Date.now(),t=[];e-jd>2&&(ol("matchMediaInit"),Xs.forEach(function(n){var r=n.queries,i=n.conditions,o,a,c,l;for(a in r)o=Yt.matchMedia(r[a]).matches,o&&(c=1),o!==i[a]&&(i[a]=o,l=1);l&&(n.revert(),c&&t.push(n))}),ol("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),jd=e,ol("matchMedia"))},e_=function(){function s(t,n){this.selector=n&&eu(n),this.data=[],this._r=[],this.isReverted=!1,this.id=mR++,t&&this.add(t)}var e=s.prototype;return e.add=function(n,r,i){Ze(n)&&(i=r,r=n,n=Ze);var o=this,a=function(){var l=Xe,u=o.selector,h;return l&&l!==o&&l.data.push(o),i&&(o.selector=eu(i)),Xe=o,h=r.apply(o,arguments),Ze(h)&&o._r.push(h),Xe=l,o.selector=u,o.isReverted=!1,h};return o.last=a,n===Ze?a(o,function(c){return o.add(null,c)}):n?o[n]=a:a},e.ignore=function(n){var r=Xe;Xe=null,n(this),Xe=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof s?n.push.apply(n,r.getTweens()):r instanceof rt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var i=this;if(n?function(){for(var a=i.getTweens(),c=i.data.length,l;c--;)l=i.data[c],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),c=i.data.length;c--;)l=i.data[c],l instanceof xt?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof rt)&&l.revert&&l.revert(n);i._r.forEach(function(u){return u(n,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Xs.length;o--;)Xs[o].id===this.id&&Xs.splice(o,1)},e.revert=function(n){this.kill(n||{})},s}(),gR=function(){function s(t){this.contexts=[],this.scope=t}var e=s.prototype;return e.add=function(n,r,i){An(n)||(n={matches:n});var o=new e_(0,i||this.scope),a=o.conditions={},c,l,u;Xe&&!o.selector&&(o.selector=Xe.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(l in n)l==="all"?u=1:(c=Yt.matchMedia(n[l]),c&&(Xs.indexOf(o)<0&&Xs.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(su):c.addEventListener("change",su)));return u&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},s}(),Ja={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return jg(r)})},timeline:function(e){return new xt(e)},getTweensOf:function(e,t){return He.getTweensOf(e,t)},getProperty:function(e,t,n,r){ht(e)&&(e=Kt(e)[0]);var i=Hs(e||{}).get,o=n?Cg:Eg;return n==="native"&&(n=""),e&&(t?o((Ft[t]&&Ft[t].get||i)(e,t,n,r)):function(a,c,l){return o((Ft[a]&&Ft[a].get||i)(e,a,c,l))})},quickSetter:function(e,t,n){if(e=Kt(e),e.length>1){var r=e.map(function(u){return It.quickSetter(u,t,n)}),i=r.length;return function(u){for(var h=i;h--;)r[h](u)}}e=e[0]||{};var o=Ft[t],a=Hs(e),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var h=new o;Sr._pt=0,h.init(e,n?u+n:u,Sr,0,[e]),h.render(1,h),Sr._pt&&Th(1,Sr)}:a.set(e,c);return o?l:function(u){return l(e,c,n?u+n:u,a,1)}},quickTo:function(e,t,n){var r,i=It.to(e,sr((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(c,l,u){return i.resetTo(t,c,l,u)};return o.tween=i,o},isTweening:function(e){return He.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Gs(e.ease,Hr.ease)),Id(Hr,e||{})},config:function(e){return Id(Bt,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Ft[a]&&!Wt[a]&&co(t+" effect requires "+a+" plugin.")}),nl[t]=function(a,c,l){return n(Kt(a),en(c||{},i),l)},o&&(xt.prototype[t]=function(a,c,l){return this.add(nl[t](a,An(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){be[e]=Gs(t)},parseEase:function(e,t){return arguments.length?Gs(e,t):be},getById:function(e){return He.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new xt(e),r,i;for(n.smoothChildTiming=At(e.smoothChildTiming),He.remove(n),n._dp=0,n._time=n._tTime=He._time,r=He._first;r;)i=r._next,(t||!(!r._dur&&r instanceof rt&&r.vars.onComplete===r._targets[0]))&&wn(n,r,r._start-r._delay),r=i;return wn(He,n,0),n},context:function(e,t){return e?new e_(e,t):Xe},matchMedia:function(e){return new gR(e)},matchMediaRefresh:function(){return Xs.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||su()},addEventListener:function(e,t){var n=fa[e]||(fa[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=fa[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:GD,wrapYoyo:XD,distribute:Mg,random:Ng,snap:Ig,normalize:YD,getUnit:dt,clamp:BD,splitColor:Vg,toArray:Kt,selector:eu,mapRange:Fg,pipe:qD,unitize:HD,interpolate:ZD,shuffle:Pg},install:bg,effects:nl,ticker:jt,updateRoot:xt.updateRoot,plugins:Ft,globalTimeline:He,core:{PropTween:Rt,globals:xg,Tween:rt,Timeline:xt,Animation:fo,getCache:Hs,_removeLinkedListItem:Ec,reverting:function(){return pt},context:function(e){return e&&Xe&&(Xe.data.push(e),e._ctx=Xe),Xe},suppressOverwrites:function(e){return fh=e}}};Dt("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Ja[s]=rt[s]});jt.add(xt.updateRoot);Sr=Ja.to({},{duration:0});var _R=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},yR=function(e,t){var n=e._targets,r,i,o;for(r in t)for(i=n.length;i--;)o=e._ptLookup[i][r],o&&(o=o.d)&&(o._pt&&(o=_R(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[i],r))},al=function(e,t){return{name:e,rawVars:1,init:function(r,i,o){o._onInit=function(a){var c,l;if(ht(i)&&(c={},Dt(i,function(u){return c[u]=1}),i=c),t){c={};for(l in i)c[l]=t(i[l]);i=c}yR(a,i)}}}},It=Ja.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a,c;this.tween=n;for(o in t)c=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(c||0)+"",t[o],r,i,0,0,o),a.op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)pt?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},al("roundProps",tu),al("modifiers"),al("snap",Ig))||Ja;rt.version=xt.version=It.version="3.12.4";vg=1;ph()&&Xr();be.Power0;be.Power1;be.Power2;be.Power3;be.Power4;be.Linear;be.Quad;be.Cubic;be.Quart;be.Quint;be.Strong;be.Elastic;be.Back;be.SteppedEase;be.Bounce;be.Sine;be.Expo;be.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Vd,us,Mr,Eh,Us,zd,Ch,vR=function(){return typeof window<"u"},Qn={},Ls=180/Math.PI,Ir=Math.PI/180,br=Math.atan2,Ud=1e8,Sh=/([A-Z])/g,bR=/(left|right|width|margin|padding|x)/i,xR=/[\s,\(]\S/,kn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ru=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},wR=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},kR=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},TR=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},t_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},n_=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},ER=function(e,t,n){return e.style[t]=n},CR=function(e,t,n){return e.style.setProperty(t,n)},SR=function(e,t,n){return e._gsap[t]=n},OR=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},AR=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},DR=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},Ye="transform",Pt=Ye+"Origin",RR=function s(e,t){var n=this,r=this.target,i=r.style,o=r._gsap;if(e in Qn&&i){if(this.tfm=this.tfm||{},e!=="transform")e=kn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=zn(r,a)}):this.tfm[e]=o.x?o[e]:zn(r,e),e===Pt&&(this.tfm.zOrigin=o.zOrigin);else return kn.transform.split(",").forEach(function(a){return s.call(n,a,t)});if(this.props.indexOf(Ye)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Pt,t,"")),e=Ye}(i||t)&&this.props.push(e,t,i[e])},s_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},PR=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?t[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Sh,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=Ch(),(!i||!i.isStart)&&!n[Ye]&&(s_(n),r.zOrigin&&n[Pt]&&(n[Pt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},r_=function(e,t){var n={target:e,props:[],revert:PR,save:RR};return e._gsap||It.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},i_,iu=function(e,t){var n=us.createElementNS?us.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):us.createElement(e);return n&&n.style?n:us.createElement(e)},En=function s(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Sh,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&s(e,Zr(t)||t,1)||""},Bd="O,Moz,ms,Ms,Webkit".split(","),Zr=function(e,t,n){var r=t||Us,i=r.style,o=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Bd[o]+e in i););return o<0?null:(o===3?"ms":o>=0?Bd[o]:"")+e},ou=function(){vR()&&window.document&&(Vd=window,us=Vd.document,Mr=us.documentElement,Us=iu("div")||{style:{}},iu("div"),Ye=Zr(Ye),Pt=Ye+"Origin",Us.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",i_=!!Zr("perspective"),Ch=It.core.reverting,Eh=1)},cl=function s(e){var t=iu("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,i=this.style.cssText,o;if(Mr.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=s}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Mr.removeChild(t),this.style.cssText=i,o},Wd=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},o_=function(e){var t;try{t=e.getBBox()}catch{t=cl.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===cl||(t=cl.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Wd(e,["x","cx","x1"])||0,y:+Wd(e,["y","cy","y1"])||0,width:0,height:0}:t},a_=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&o_(e))},rr=function(e,t){if(t){var n=e.style,r;t in Qn&&t!==Pt&&(t=Ye),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(Sh,"-$1").toLowerCase())):n.removeAttribute(t)}},hs=function(e,t,n,r,i,o){var a=new Rt(e._pt,t,n,0,1,o?n_:t_);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},qd={deg:1,rad:1,turn:1},MR={grid:1,flex:1},Ss=function s(e,t,n,r){var i=parseFloat(n)||0,o=(n+"").trim().substr((i+"").length)||"px",a=Us.style,c=bR.test(t),l=e.tagName.toLowerCase()==="svg",u=(l?"client":"offset")+(c?"Width":"Height"),h=100,f=r==="px",p=r==="%",m,d,g,_;if(r===o||!i||qd[r]||qd[o])return i;if(o!=="px"&&!f&&(i=s(e,t,n,"px")),_=e.getCTM&&a_(e),(p||o==="%")&&(Qn[t]||~t.indexOf("adius")))return m=_?e.getBBox()[c?"width":"height"]:e[u],tt(p?i/m*h:i/100*m);if(a[c?"width":"height"]=h+(f?o:r),d=~t.indexOf("adius")||r==="em"&&e.appendChild&&!l?e:e.parentNode,_&&(d=(e.ownerSVGElement||{}).parentNode),(!d||d===us||!d.appendChild)&&(d=us.body),g=d._gsap,g&&p&&g.width&&c&&g.time===jt.time&&!g.uncache)return tt(i/g.width*h);if(p&&(t==="height"||t==="width")){var k=e.style[t];e.style[t]=h+r,m=e[u],k?e.style[t]=k:rr(e,t)}else(p||o==="%")&&!MR[En(d,"display")]&&(a.position=En(e,"position")),d===e&&(a.position="static"),d.appendChild(Us),m=Us[u],d.removeChild(Us),a.position="absolute";return c&&p&&(g=Hs(d),g.time=jt.time,g.width=d[u]),tt(f?m*i/h:m&&i?h/m*i:0)},zn=function(e,t,n,r){var i;return Eh||ou(),t in kn&&t!=="transform"&&(t=kn[t],~t.indexOf(",")&&(t=t.split(",")[0])),Qn[t]&&t!=="transform"?(i=mo(e,r),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:tc(En(e,Pt))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||r||~(i+"").indexOf("calc("))&&(i=ec[t]&&ec[t](e,t,n)||En(e,t)||kg(e,t)||(t==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Ss(e,t,i,n)+n:i},IR=function(e,t,n,r){if(!n||n==="none"){var i=Zr(t,e,1),o=i&&En(e,i,1);o&&o!==n?(t=i,n=o):t==="borderColor"&&(n=En(e,"borderTopColor"))}var a=new Rt(this._pt,e.style,t,0,1,Qg),c=0,l=0,u,h,f,p,m,d,g,_,k,x,v,y;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(d=e.style[t],e.style[t]=r,r=En(e,t)||r,d?e.style[t]=d:rr(e,t)),u=[n,r],Ug(u),n=u[0],r=u[1],f=n.match(Cr)||[],y=r.match(Cr)||[],y.length){for(;h=Cr.exec(r);)g=h[0],k=r.substring(c,h.index),m?m=(m+1)%5:(k.substr(-5)==="rgba("||k.substr(-5)==="hsla(")&&(m=1),g!==(d=f[l++]||"")&&(p=parseFloat(d)||0,v=d.substr((p+"").length),g.charAt(1)==="="&&(g=Pr(p,g)+v),_=parseFloat(g),x=g.substr((_+"").length),c=Cr.lastIndex-x.length,x||(x=x||Bt.units[t]||v,c===r.length&&(r+=x,a.e+=x)),v!==x&&(p=Ss(e,t,d,x)||0),a._pt={_next:a._pt,p:k||l===1?k:",",s:p,c:_-p,m:m&&m<4||t==="zIndex"?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r=t==="display"&&r==="none"?n_:t_;return _g.test(r)&&(a.e=0),this._pt=a,a},Hd={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},NR=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=Hd[n]||n,t[1]=Hd[r]||r,t.join(" ")},$R=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,i=t.u,o=n._gsap,a,c,l;if(i==="all"||i===!0)r.cssText="",c=1;else for(i=i.split(","),l=i.length;--l>-1;)a=i[l],Qn[a]&&(c=1,a=a==="transformOrigin"?Pt:Ye),rr(n,a);c&&(rr(n,Ye),o&&(o.svg&&n.removeAttribute("transform"),mo(n,1),o.uncache=1,s_(r)))}},ec={clearProps:function(e,t,n,r,i){if(i.data!=="isFromStart"){var o=e._pt=new Rt(e._pt,t,n,0,0,$R);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},po=[1,0,0,1,0,0],c_={},l_=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Yd=function(e){var t=En(e,Ye);return l_(t)?po:t.substr(7).match(gg).map(tt)},Oh=function(e,t){var n=e._gsap||Hs(e),r=e.style,i=Yd(e),o,a,c,l;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?po:i):(i===po&&!e.offsetParent&&e!==Mr&&!n.svg&&(c=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Mr.appendChild(e)),i=Yd(e),c?r.display=c:rr(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Mr.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},au=function(e,t,n,r,i,o){var a=e._gsap,c=i||Oh(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,p=c[0],m=c[1],d=c[2],g=c[3],_=c[4],k=c[5],x=t.split(" "),v=parseFloat(x[0])||0,y=parseFloat(x[1])||0,T,E,w,C;n?c!==po&&(E=p*g-m*d)&&(w=v*(g/E)+y*(-d/E)+(d*k-g*_)/E,C=v*(-m/E)+y*(p/E)-(p*k-m*_)/E,v=w,y=C):(T=o_(e),v=T.x+(~x[0].indexOf("%")?v/100*T.width:v),y=T.y+(~(x[1]||x[0]).indexOf("%")?y/100*T.height:y)),r||r!==!1&&a.smooth?(_=v-l,k=y-u,a.xOffset=h+(_*p+k*d)-_,a.yOffset=f+(_*m+k*g)-k):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=y,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[Pt]="0px 0px",o&&(hs(o,a,"xOrigin",l,v),hs(o,a,"yOrigin",u,y),hs(o,a,"xOffset",h,a.xOffset),hs(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",v+" "+y)},mo=function(e,t){var n=e._gsap||new Hg(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,i=n.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=En(e,Pt)||"0",u,h,f,p,m,d,g,_,k,x,v,y,T,E,w,C,S,D,O,j,V,W,B,z,U,X,K,ee,N,L,A,I;return u=h=f=d=g=_=k=x=v=0,p=m=1,n.svg=!!(e.getCTM&&a_(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[Ye]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Ye]!=="none"?c[Ye]:"")),r.scale=r.rotate=r.translate="none"),E=Oh(e,n.svg),n.svg&&(n.uncache?(U=e.getBBox(),l=n.xOrigin-U.x+"px "+(n.yOrigin-U.y)+"px",z=""):z=!t&&e.getAttribute("data-svg-origin"),au(e,z||l,!!z||n.originIsAbsolute,n.smooth!==!1,E)),y=n.xOrigin||0,T=n.yOrigin||0,E!==po&&(D=E[0],O=E[1],j=E[2],V=E[3],u=W=E[4],h=B=E[5],E.length===6?(p=Math.sqrt(D*D+O*O),m=Math.sqrt(V*V+j*j),d=D||O?br(O,D)*Ls:0,k=j||V?br(j,V)*Ls+d:0,k&&(m*=Math.abs(Math.cos(k*Ir))),n.svg&&(u-=y-(y*D+T*j),h-=T-(y*O+T*V))):(I=E[6],L=E[7],K=E[8],ee=E[9],N=E[10],A=E[11],u=E[12],h=E[13],f=E[14],w=br(I,N),g=w*Ls,w&&(C=Math.cos(-w),S=Math.sin(-w),z=W*C+K*S,U=B*C+ee*S,X=I*C+N*S,K=W*-S+K*C,ee=B*-S+ee*C,N=I*-S+N*C,A=L*-S+A*C,W=z,B=U,I=X),w=br(-j,N),_=w*Ls,w&&(C=Math.cos(-w),S=Math.sin(-w),z=D*C-K*S,U=O*C-ee*S,X=j*C-N*S,A=V*S+A*C,D=z,O=U,j=X),w=br(O,D),d=w*Ls,w&&(C=Math.cos(w),S=Math.sin(w),z=D*C+O*S,U=W*C+B*S,O=O*C-D*S,B=B*C-W*S,D=z,W=U),g&&Math.abs(g)+Math.abs(d)>359.9&&(g=d=0,_=180-_),p=tt(Math.sqrt(D*D+O*O+j*j)),m=tt(Math.sqrt(B*B+I*I)),w=br(W,B),k=Math.abs(w)>2e-4?w*Ls:0,v=A?1/(A<0?-A:A):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!l_(En(e,Ye)),z&&e.setAttribute("transform",z))),Math.abs(k)>90&&Math.abs(k)<270&&(i?(p*=-1,k+=d<=0?180:-180,d+=d<=0?180:-180):(m*=-1,k+=k<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=f+o,n.scaleX=tt(p),n.scaleY=tt(m),n.rotation=tt(d)+a,n.rotationX=tt(g)+a,n.rotationY=tt(_)+a,n.skewX=k+a,n.skewY=x+a,n.transformPerspective=v+o,(n.zOrigin=parseFloat(l.split(" ")[2])||!t&&n.zOrigin||0)&&(r[Pt]=tc(l)),n.xOffset=n.yOffset=0,n.force3D=Bt.force3D,n.renderTransform=n.svg?LR:i_?u_:FR,n.uncache=0,n},tc=function(e){return(e=e.split(" "))[0]+" "+e[1]},ll=function(e,t,n){var r=dt(t);return tt(parseFloat(t)+parseFloat(Ss(e,"x",n+"px",r)))+r},FR=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,u_(e,t)},$s="0deg",Ei="0px",Fs=") ",u_=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,c=n.z,l=n.rotation,u=n.rotationY,h=n.rotationX,f=n.skewX,p=n.skewY,m=n.scaleX,d=n.scaleY,g=n.transformPerspective,_=n.force3D,k=n.target,x=n.zOrigin,v="",y=_==="auto"&&e&&e!==1||_===!0;if(x&&(h!==$s||u!==$s)){var T=parseFloat(u)*Ir,E=Math.sin(T),w=Math.cos(T),C;T=parseFloat(h)*Ir,C=Math.cos(T),o=ll(k,o,E*C*-x),a=ll(k,a,-Math.sin(T)*-x),c=ll(k,c,w*C*-x+x)}g!==Ei&&(v+="perspective("+g+Fs),(r||i)&&(v+="translate("+r+"%, "+i+"%) "),(y||o!==Ei||a!==Ei||c!==Ei)&&(v+=c!==Ei||y?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+Fs),l!==$s&&(v+="rotate("+l+Fs),u!==$s&&(v+="rotateY("+u+Fs),h!==$s&&(v+="rotateX("+h+Fs),(f!==$s||p!==$s)&&(v+="skew("+f+", "+p+Fs),(m!==1||d!==1)&&(v+="scale("+m+", "+d+Fs),k.style[Ye]=v||"translate(0, 0)"},LR=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,c=n.rotation,l=n.skewX,u=n.skewY,h=n.scaleX,f=n.scaleY,p=n.target,m=n.xOrigin,d=n.yOrigin,g=n.xOffset,_=n.yOffset,k=n.forceCSS,x=parseFloat(o),v=parseFloat(a),y,T,E,w,C;c=parseFloat(c),l=parseFloat(l),u=parseFloat(u),u&&(u=parseFloat(u),l+=u,c+=u),c||l?(c*=Ir,l*=Ir,y=Math.cos(c)*h,T=Math.sin(c)*h,E=Math.sin(c-l)*-f,w=Math.cos(c-l)*f,l&&(u*=Ir,C=Math.tan(l-u),C=Math.sqrt(1+C*C),E*=C,w*=C,u&&(C=Math.tan(u),C=Math.sqrt(1+C*C),y*=C,T*=C)),y=tt(y),T=tt(T),E=tt(E),w=tt(w)):(y=h,w=f,T=E=0),(x&&!~(o+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(x=Ss(p,"x",o,"px"),v=Ss(p,"y",a,"px")),(m||d||g||_)&&(x=tt(x+m-(m*y+d*E)+g),v=tt(v+d-(m*T+d*w)+_)),(r||i)&&(C=p.getBBox(),x=tt(x+r/100*C.width),v=tt(v+i/100*C.height)),C="matrix("+y+","+T+","+E+","+w+","+x+","+v+")",p.setAttribute("transform",C),k&&(p.style[Ye]=C)},jR=function(e,t,n,r,i){var o=360,a=ht(i),c=parseFloat(i)*(a&&~i.indexOf("rad")?Ls:1),l=c-r,u=r+l+"deg",h,f;return a&&(h=i.split("_")[1],h==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),h==="cw"&&l<0?l=(l+o*Ud)%o-~~(l/o)*o:h==="ccw"&&l>0&&(l=(l-o*Ud)%o-~~(l/o)*o)),e._pt=f=new Rt(e._pt,t,n,r,l,wR),f.e=u,f.u="deg",e._props.push(n),f},Gd=function(e,t){for(var n in t)e[n]=t[n];return e},VR=function(e,t,n){var r=Gd({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,c,l,u,h,f,p,m;r.svg?(l=n.getAttribute("transform"),n.setAttribute("transform",""),o[Ye]=t,a=mo(n,1),rr(n,Ye),n.setAttribute("transform",l)):(l=getComputedStyle(n)[Ye],o[Ye]=t,a=mo(n,1),o[Ye]=l);for(c in Qn)l=r[c],u=a[c],l!==u&&i.indexOf(c)<0&&(p=dt(l),m=dt(u),h=p!==m?Ss(n,c,l,m):parseFloat(l),f=parseFloat(u),e._pt=new Rt(e._pt,a,c,h,f-h,ru),e._pt.u=m||0,e._props.push(c));Gd(a,r)};Dt("padding,margin,Width,Radius",function(s,e){var t="Top",n="Right",r="Bottom",i="Left",o=(e<3?[t,n,r,i]:[t+i,t+n,r+n,r+i]).map(function(a){return e<2?s+a:"border"+a+s});ec[e>1?"border"+s:s]=function(a,c,l,u,h){var f,p;if(arguments.length<4)return f=o.map(function(m){return zn(a,m,l)}),p=f.join(" "),p.split(f[0]).length===5?f[0]:p;f=(u+"").split(" "),p={},o.forEach(function(m,d){return p[m]=f[d]=f[d]||f[(d-1)/2|0]}),a.init(c,p,h)}});var h_={name:"css",register:ou,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o=this._props,a=e.style,c=n.vars.startAt,l,u,h,f,p,m,d,g,_,k,x,v,y,T,E,w;Eh||ou(),this.styles=this.styles||r_(e),w=this.styles.props,this.tween=n;for(d in t)if(d!=="autoRound"&&(u=t[d],!(Ft[d]&&Yg(d,t,n,r,e,i)))){if(p=typeof u,m=ec[d],p==="function"&&(u=u.call(n,r,e,i),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=uo(u)),m)m(this,e,d,u,n)&&(E=1);else if(d.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(d)+"").trim(),u+="",gs.lastIndex=0,gs.test(l)||(g=dt(l),_=dt(u)),_?g!==_&&(l=Ss(e,d,l,_)+_):g&&(u+=g),this.add(a,"setProperty",l,u,r,i,0,0,d),o.push(d),w.push(d,0,a[d]);else if(p!=="undefined"){if(c&&d in c?(l=typeof c[d]=="function"?c[d].call(n,r,e,i):c[d],ht(l)&&~l.indexOf("random(")&&(l=uo(l)),dt(l+"")||l==="auto"||(l+=Bt.units[d]||dt(zn(e,d))||""),(l+"").charAt(1)==="="&&(l=zn(e,d))):l=zn(e,d),f=parseFloat(l),k=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),k&&(u=u.substr(2)),h=parseFloat(u),d in kn&&(d==="autoAlpha"&&(f===1&&zn(e,"visibility")==="hidden"&&h&&(f=0),w.push("visibility",0,a.visibility),hs(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),d!=="scale"&&d!=="transform"&&(d=kn[d],~d.indexOf(",")&&(d=d.split(",")[0]))),x=d in Qn,x){if(this.styles.save(d),v||(y=e._gsap,y.renderTransform&&!t.parseTransform||mo(e,t.parseTransform),T=t.smoothOrigin!==!1&&y.smooth,v=this._pt=new Rt(this._pt,a,Ye,0,1,y.renderTransform,y,0,-1),v.dep=1),d==="scale")this._pt=new Rt(this._pt,y,"scaleY",y.scaleY,(k?Pr(y.scaleY,k+h):h)-y.scaleY||0,ru),this._pt.u=0,o.push("scaleY",d),d+="X";else if(d==="transformOrigin"){w.push(Pt,0,a[Pt]),u=NR(u),y.svg?au(e,u,0,T,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==y.zOrigin&&hs(this,y,"zOrigin",y.zOrigin,_),hs(this,a,d,tc(l),tc(u)));continue}else if(d==="svgOrigin"){au(e,u,1,T,0,this);continue}else if(d in c_){jR(this,y,d,f,k?Pr(f,k+u):u);continue}else if(d==="smoothOrigin"){hs(this,y,"smooth",y.smooth,u);continue}else if(d==="force3D"){y[d]=u;continue}else if(d==="transform"){VR(this,u,e);continue}}else d in a||(d=Zr(d)||d);if(x||(h||h===0)&&(f||f===0)&&!xR.test(u)&&d in a)g=(l+"").substr((f+"").length),h||(h=0),_=dt(u)||(d in Bt.units?Bt.units[d]:g),g!==_&&(f=Ss(e,d,l,_)),this._pt=new Rt(this._pt,x?y:a,d,f,(k?Pr(f,k+h):h)-f,!x&&(_==="px"||d==="zIndex")&&t.autoRound!==!1?TR:ru),this._pt.u=_||0,g!==_&&_!=="%"&&(this._pt.b=l,this._pt.r=kR);else if(d in a)IR.call(this,e,d,l,k?k+u:u);else if(d in e)this.add(e,d,l||e[d],k?k+u:u,r,i);else if(d!=="parseTransform"){gh(d,u);continue}x||(d in a?w.push(d,0,a[d]):w.push(d,1,l||e[d])),o.push(d)}}E&&Jg(this)},render:function(e,t){if(t.tween._time||!Ch())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:zn,aliases:kn,getSetter:function(e,t,n){var r=kn[t];return r&&r.indexOf(",")<0&&(t=r),t in Qn&&t!==Pt&&(e._gsap.x||zn(e,"x"))?n&&zd===n?t==="scale"?OR:SR:(zd=n||{})&&(t==="scale"?AR:DR):e.style&&!dh(e.style[t])?ER:~t.indexOf("-")?CR:kh(e,t)},core:{_removeProperty:rr,_getMatrix:Oh}};It.utils.checkPrefix=Zr;It.core.getStyleSaver=r_;(function(s,e,t,n){var r=Dt(s+","+e+","+t,function(i){Qn[i]=1});Dt(e,function(i){Bt.units[i]="deg",c_[i]=1}),kn[r[13]]=s+","+e,Dt(n,function(i){var o=i.split(":");kn[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Dt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Bt.units[s]="px"});It.registerPlugin(h_);var Nr=It.registerPlugin(h_)||It;Nr.core.Tween;const f_=s=>{const e=b.useRef(null),{label:t,source:n,target:r,sourceX:i,sourceY:o,sourceZ:a,targetX:c,targetY:l,targetZ:u}=s;return b.useEffect(()=>{if(e.current){const h=e.current;Nr.fromTo(h.material,{linewidth:cd*15},{linewidth:cd,duration:1})}},[e]),dn(()=>{const{selectedNode:h,hoveredNode:f}=ut.getState();if(e.current){const p=e.current,m=h||f;p.visible=!m,(m==null?void 0:m.ref_id)===n||(m==null?void 0:m.ref_id)===r?(p.visible=!0,Nr.to(p.material,{linewidth:6,duration:.5,ease:"power1.out"})):Nr.to(p.material,{linewidth:1,duration:.5,ease:"power1.out"})}}),F.jsxs("group",{children:[F.jsx(lp,{ref:e,isLine2:!0,lineWidth:2,name:"line",points:[i,o,a,c,l,u]}),F.jsx(vu,{children:F.jsx(uu,{anchorX:"center",anchorY:"middle",color:"white",...hu,fontSize:10,children:t})})]})};f_.displayName="LineComponent";const zR=b.memo(f_),d_=b.memo(({linksPosition:s})=>{const e=Os(n=>n.dataInitial),{showSelectionGraph:t}=ut(n=>n);return F.jsx("group",{name:"simulation-3d-group__connections",visible:!t,children:e==null?void 0:e.links.map(n=>{const r=s.get(n.ref_id)||{sx:0,sy:0,sz:0,tx:0,ty:0,tz:0};return F.jsx(zR,{label:n.edge_type,source:n.source,sourceX:r.sx,sourceY:r.sy,sourceZ:r.sz,target:n.target,targetX:r.tx,targetY:r.ty,targetZ:r.tz},n.ref_id)})})});d_.displayName="Connections";const UR=({color:s,scale:e})=>F.jsx(vu,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:F.jsx(Mp,{color:s,scale:e})}),BR=["#fff","#9747FF","#00887A","#0098A6","#0288D1","#33691E","#465A65","#512DA7","#5C6BC0","#5D4038","#662C00","#689F39","#6B1B00","#750000","#78909C","#7E57C2","#8C6E63","#AA47BC","#BF360C","#C2175B","#EC407A","#EF6C00","#F5511E","#FF9696","#FFC064","#FFCD29","#FFEA60"],WR=()=>{const s=As(),e=Os(i=>i.dataInitial),{normalizedSchemasByType:t}=_o(i=>i),n=op(),r=b.useMemo(()=>new my(30,2,16,100),[]);return F.jsx(F.Fragment,{children:F.jsxs(v1,{geometry:r,limit:1e3,range:1e3,visible:!s||!0,children:[F.jsx("meshBasicMaterial",{}),e==null?void 0:e.nodes.map(i=>{var c;const a=((c=t[i.node_type])==null?void 0:c.primary_color)??(BR[n.indexOf(i.node_type)]||Te.white);return F.jsx(UR,{color:a,scale:i.scale||1},i.ref_id)})]})})},qR=b.memo(WR);function HR(s){const e=b.useRef(s);b.useEffect(()=>{const t=Object.entries(s).reduce((n,[r,i])=>(e.current[r]!==i&&(n[r]=[e.current[r],i]),n),{});Object.keys(t).length>0&&console.log("Changed props:",t),e.current=s})}const YR=s=>{const e=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;return s.replace(e,t=>/^[\d*#]$/.test(t)?t:"")},p_={metalness:.9,roughness:0},m_=new rc,g_=m_.load("noimage.jpeg");new ic({...p_,map:g_});const GR=.4;new ic({...p_,map:g_,transparent:!0,opacity:GR});const ia={},XR=s=>{const[e,t]=b.useState(null);return b.useEffect(()=>{var r;if(!s){t(null);return}const n=s;if((r=ia[n])!=null&&r.texture){t(ia[n].texture);return}m_.load(s,i=>{ia[n]={texture:i,material:new ic({map:i})},t(i)},void 0,()=>{t(null)})},[s]),b.useEffect(()=>()=>{e&&(Object.values(ia).some(r=>r.texture===e)||e.dispose())},[e]),{texture:e}};function ZR(s){const e=up(s,30),t=e.split(" ");if(t.length<=5)return e;const n=Math.ceil(t.length/3),r=n*2,i=t.slice(0,n).join(" "),o=t.slice(n,r).join(" "),a=t.slice(r).join(" ");return`${i}
${o}
${a}`}const __=b.memo(s=>{var v,y,T,E;const{node:e,hide:t,ignoreDistance:n,color:r}=s,i=b.useRef(null),o=b.useRef(null),a=b.useRef(null);HR(s);const c=b.useRef(new _e),{texture:l}=XR(((v=e.properties)==null?void 0:v.image_url)||""),{normalizedSchemasByType:u,getNodeKeysByType:h}=_o(w=>w);dn(({camera:w,clock:C})=>{const{selectedNode:S,hoveredNode:D,activeEdge:O}=ut.getState(),j=()=>{const W=c.current.setFromMatrixPosition(o.current.matrixWorld);o.current&&(o.current.visible=n?!0:W.distanceTo(w.position)<1500)};if(e.ref_id===(S==null?void 0:S.ref_id)||e.ref_id===(D==null?void 0:D.ref_id)||(O==null?void 0:O.target)===e.ref_id||(O==null?void 0:O.source)===e.ref_id){o.current&&(o.current.visible=!0);const W=C.getElapsedTime(),B=2,z=W%B/B,U=1+z*2,X=1-z;if(a.current){a.current.visible=!0,a.current.scale.set(U,U,U);const{material:K}=a.current;K instanceof Nh&&(K.opacity=X)}return}a.current&&(a.current.visible=!1),j()});const f=(y=u[e.node_type])==null?void 0:y.primary_color,p=(T=u[e.node_type])==null?void 0:T.icon,m=f??r,g=(p?pp[p]:null)?p:"NodesIcon",_=h(e.node_type)||"",k=_&&(e!=null&&e.properties)?YR(String((e==null?void 0:e.properties[_])||"")):"",x={u_texture:{value:l},u_radius:{value:.5}};return F.jsx(vu,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,name:"billboard",userData:e,children:F.jsxs("mesh",{ref:o,name:e.ref_id,userData:e,visible:!t,children:[F.jsxs("mesh",{ref:a,position:[0,0,-2],children:[F.jsx("ringGeometry",{args:[29,30,32]})," ",F.jsx("meshBasicMaterial",{color:m,opacity:.5,side:da,transparent:!0})]}),(E=e.properties)!=null&&E.image_url&&l?F.jsx(L_,{args:[10*2,10*2],scale:2,children:F.jsx("shaderMaterial",{fragmentShader:`
          uniform sampler2D u_texture;
          uniform float u_radius;
          varying vec2 vUv;

          void main() {
            vec2 center = vec2(0.5, 0.5); // Center of the circle
            float dist = distance(vUv, center);
            if (dist < u_radius) {
              gl_FragColor = texture2D(u_texture, vUv);
            } else {
              discard; // Discard pixels outside the circle
            }
          }
        `,uniforms:x,vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `})}):F.jsx(f1,{ref:i,name:"svg",onUpdate:w=>{w.traverse(C=>{C instanceof _p&&(C.material=new Nh({color:r}))})},position:[-15,15,0],scale:2,src:`svg-icons/${g}.svg`,strokeMaterial:{color:"yellow"},userData:e}),k&&F.jsx(uu,{color:r,fillOpacity:1,name:"text",position:[0,-65,0],scale:1,userData:e,...hu,fontSize:20,children:ZR(k)})]})})},(s,e)=>s.hide===e.hide&&s.ignoreDistance===e.ignoreDistance&&s.node.ref_id===e.node.ref_id);__.displayName="TextNode";const Xd={x:20,y:20},y_=b.memo(s=>{const{node:e,color:t,index:n,stopFrames:r}=s,i=ut(c=>c.simulation),o=b.useRef(!1),a=b.useRef(null);return dn(({camera:c,size:l})=>{if(!r&&a.current&&i){const u=i.nodes()[n];if(!u)return;if(!o.current){const f=new _e(-1+Xd.x*2/l.width,1-Xd.y*2/l.height,0).unproject(c),p=5,m=f.sub(c.position).normalize(),d=c.position.clone().add(m.multiplyScalar(p));a.current.position.copy(d),a.current.scale.set(.1,.1,.1),a.current.visible=!1}u.fx&&!o.current&&(a.current.visible=!0,o.current=!0,Nr.to(a.current.position,{x:u.fx,y:u.fy,z:u.fz,duration:4,ease:"power2.in"}),Nr.to(a.current.scale,{x:1,y:1,z:1,duration:4.5,ease:"power2.in"}))}}),F.jsxs("mesh",{ref:a,name:"wr2",scale:e.scale||1,userData:e,children:[F.jsx("boxGeometry",{args:[40,40,40]}),F.jsx("meshStandardMaterial",{opacity:0,transparent:!0}),F.jsx(__,{color:t,ignoreDistance:!1,node:e,scale:e.scale||1},e.ref_id)]},e.ref_id)},(s,e)=>s.node.ref_id===e.node.ref_id);y_.displayName="NodeWrapper";const KR=200,v_=b.memo(()=>{const s=As(),e=dp(),{selectionGraphData:t,showSelectionGraph:n,setHoveredNode:r,setIsHovering:i}=ut(d=>d),o=op(),a=Os(d=>d.dataInitial),c=go(d=>d.setTranscriptOpen),l=b.useCallback(d=>!!(n&&!t.nodes.find(g=>g.ref_id===d.ref_id)),[n,t]),u=b.useCallback(d=>{const g=d==null?void 0:d[0];g&&(c(!1),g.userData&&(l(g.userData)||ut.getState().setSelectedNode((g==null?void 0:g.userData)||null)))},[c,l]),h=b.useRef(null),f=b.useCallback(d=>{d.stopPropagation(),h.current&&(clearTimeout(h.current),h.current=null),e&&(i(!1),r(null))},[i,r,e]),p=b.useCallback(d=>{var k;const _=d.intersections.map(x=>x.object)[0];if(h.current&&(clearTimeout(h.current),h.current=null),(k=_==null?void 0:_.userData)!=null&&k.ref_id){const x=_.userData;l(x)||(d.stopPropagation(),h.current=setTimeout(()=>{i(!0),r(x)},KR))}},[r,l,i]),m=n&&!!s;return F.jsx(F.Fragment,{children:F.jsxs(h1,{filter:d=>d.filter(g=>{var _;return!!((_=g.userData)!=null&&_.ref_id)}),onChange:u,onPointerOut:f,onPointerOver:p,children:[F.jsx("group",{name:"simulation-3d-group__nodes",visible:!m,children:a==null?void 0:a.nodes.map((d,g)=>{const _=j_[o.indexOf(d.node_type)]||Te.white;return F.jsx(y_,{color:_,index:g,node:d,scale:d.scale||1,stopFrames:!1},d.ref_id)})}),F.jsx("group",{name:"simulation-3d-group__node-points",children:F.jsx(qR,{})})]})})});v_.displayName="Cubes";const QR={earthRef:null},JR=np(s=>({...QR,setEarthRef:e=>s({earthRef:e})})),eP=new _e(0,0,0),tP=()=>{const s=b.useRef(null),e=b.useRef(null),{graphStyle:t,showSelectionGraph:n}=ut(a=>a),r=JR(a=>a.setEarthRef),i=Bs("textures/earth/galaxy.png"),o=Bs("textures/earth/clouds.png");return dn(({camera:a})=>{e.current&&e.current.position.copy(a.getWorldPosition(eP))}),b.useLayoutEffect(()=>{s.current&&r(s)},[r]),t!=="earth"||n?null:F.jsxs(F.Fragment,{children:[F.jsxs("mesh",{ref:s,userData:{type:"earth"},children:[F.jsx("sphereGeometry",{args:[na,200,200]}),F.jsx(nP,{})]}),F.jsxs("mesh",{children:[F.jsx("sphereGeometry",{args:[na+2,200,200]}),F.jsx("meshStandardMaterial",{alphaMap:o,map:o,transparent:!0})]}),F.jsxs("mesh",{children:[F.jsx("sphereGeometry",{args:[na*4,200,200]}),F.jsx("meshStandardMaterial",{map:i,opacity:.4,side:da,transparent:!0})]}),F.jsx("directionalLight",{ref:e,intensity:.9,position:[0,0,na*3]})]})},nP=()=>{const s=Bs("textures/earth/earth.jpeg"),e=Bs("textures/earth/bump.jpeg"),t=Bs("textures/earth/water.png"),n=b.useMemo(()=>new ic({map:s,bumpMap:e,aoMap:e,roughnessMap:e,metalnessMap:t,toneMapped:!0,roughness:35,metalness:0}),[s,e,t]);return F.jsx("meshStandardMaterial",{...n})},sP="C",rP=256,iP=256,oP={g:"LottieFiles AE 0.1.20"},aP=[{ty:0,nm:"I",sr:1,st:0,op:26,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_0",ind:1},{ty:0,nm:"I",sr:1,st:26,op:52,ip:26,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_1",ind:2},{ty:0,nm:"I",sr:1,st:52,op:78,ip:52,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_2",ind:3},{ty:0,nm:"I",sr:1,st:78,op:108,ip:78,hasMask:!1,ao:0,ks:{a:{a:0,k:[128,128,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],w:256,h:256,refId:"comp_3",ind:4}],cP="5.5.7",lP=60,uP=104,hP=0,fP=[{nm:"",id:"comp_0",layers:[{ty:4,nm:"I",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.656,.016],[0,20],[-34.641,0],[.016,-19.984]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,10],[17.321,30],[17.321,-10],[51.962,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,-9.984],[17.32,10],[17.32,-30],[-17.32,-50.016]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,30],[17.32,50],[17.305,10],[-17.32,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.321,10],[-51.962,30],[-51.962,-10],[-17.321,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[0,20],[-34.641,0],[0,-20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:1}]},{nm:"",id:"comp_1",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"S",sr:1,st:-20,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,-10.016],[-17.32,-30],[17.32,-50],[51.961,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[.015,-20],[0,20],[34.641,40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,-10.016],[-17.32,-30],[17.32,-50],[51.961,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:33,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.324,30],[-17.34,-9.984],[17.336,-30.016],[17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:35,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[.015,-20],[0,20],[34.641,40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.324,30],[-17.34,-9.984],[17.336,-30.016],[17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.305,30],[-17.336,-9.984],[17.336,-30.016],[17.32,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.016,-20.016],[-34.643,-40],[-34.641,.016],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:31,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,-10],[17.321,30],[-17.321,10],[-17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.305,50],[-51.961,30],[-17.321,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:10,parent:1},{ty:4,nm:"F",sr:1,st:-20,op:34,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.305,30],[-17.336,-9.984],[17.336,-30.016],[17.32,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:11,parent:1},{ty:4,nm:"S",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,-10],[17.321,30],[-17.321,10],[-17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.305,50],[-51.961,30],[-17.321,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:12,parent:1},{ty:4,nm:"T",sr:1,st:-20,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.016,-20.016],[-34.643,-40],[-34.641,.016],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:13,parent:1}]},{nm:"",id:"comp_2",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"T",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-34.656,.031],[.047,-19.969],[34.652,.031],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[17.32,-9.984],[17.32,-50],[-17.32,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"F",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.321,30],[-51.962,10],[-51.962,-30],[-17.321,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"S",sr:1,st:0,op:30,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,30],[-17.32,10],[-17.32,-30],[17.32,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[17.32,-9.984],[17.32,-50],[-17.32,-30]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"F",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,30],[17.321,10],[17.321,-30],[51.962,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"S",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,50],[17.32,30],[17.336,-10],[-17.336,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"F",sr:1,st:0,op:30,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[51.962,30],[17.321,10],[17.321,-30],[51.962,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"T",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-34.656,0],[.015,-20],[34.656,0],[.012,20.062]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1}]},{nm:"",id:"comp_3",layers:[{ty:4,nm:"R",sr:1,st:0,op:30,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[128,128,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:0}},ef:[],shapes:[],ind:1},{ty:4,nm:"S",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-10],[-17.32,-30.016],[-51.961,-10],[-17.305,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2,parent:1},{ty:4,nm:"T",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[.015,60.016],[-34.642,40],[-34.641,0],[0,20]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,30]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[-17.32,-30],[17.32,-10],[17.32,30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.312,-10],[-17.313,10],[17.332,30],[51.977,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4,parent:1},{ty:4,nm:"F",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,10],[-17.321,30],[-17.321,-10],[17.321,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-29.984],[17.348,10],[-17.305,30],[-17.305,-9.984]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:5,parent:1},{ty:4,nm:"F",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-30],[17.32,10],[-17.32,30],[-17.336,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:6,parent:1},{ty:4,nm:"S",sr:1,st:0,op:13,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.321,30],[-17.321,10],[-17.321,-30],[17.321,-10]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-10],[-17.32,-30.016],[-51.961,-10],[-17.305,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[61.962,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:7,parent:1},{ty:4,nm:"T",sr:1,st:0,op:32,ip:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"T",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,20],[-34.641,0],[0,-20],[34.641,0]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.641,0],[0,-20],[0,-60.016],[34.641,-40]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[44.641,70]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:8,parent:1},{ty:4,nm:"S",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"S",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-17.32,10],[-17.32,-30],[17.32,-10],[17.32,30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.312,-10],[-17.313,10],[17.332,30],[51.977,10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,60]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:9,parent:1},{ty:4,nm:"F",sr:1,st:0,op:32,ip:13,hasMask:!1,ao:0,ks:{a:{a:0,k:[44.641,50,0]},s:{a:0,k:[100,100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},ef:[],shapes:[{ty:"gr",nm:"F",it:[{ty:"sh",nm:"P",d:1,ks:{a:1,k:[{o:{x:.8,y:0},i:{x:.2,y:1},s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.32,10],[-17.32,30],[-17.32,-10],[17.32,-30]]}],t:0},{s:[{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.336,-30],[17.32,10],[-17.32,30],[-17.336,-10]]}],t:26}]}},{ty:"st",nm:"S",lc:1,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:4},c:{a:0,k:[1,1,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[27.32,40]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:10,parent:1}]}],dP={nm:sP,h:rP,w:iP,meta:oP,layers:aP,v:cP,fr:lP,op:uP,ip:hP,assets:fP},pP=({meshId:s})=>{const e=b.useRef(null);return b.useEffect(()=>{const t=document.getElementById(`lottie-animation-${s}`);return t&&(e.current=D_.loadAnimation({container:t,animationData:dP,loop:!0,autoplay:!0})),()=>{e.current&&e.current.destroy()}},[s]),F.jsx("div",{id:`lottie-animation-${s}`,style:{width:"2em",height:"2em"}})},ul=()=>Math.floor(Math.random()*2001)-1e3,mP=()=>F.jsx(F.Fragment,{children:["a","b","c"].map(s=>{const e=ul(),t=ul(),n=ul();return F.jsx("mesh",{position:[e,t,n],children:F.jsx(sc,{center:!0,sprite:!0,children:F.jsx(gP,{children:F.jsx(pP,{meshId:s})})})},s)})}),gP=$e.div`
  border: 2px solid white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 20px;
`,Ci=s=>({close:{backgroundColor:"rgba(48, 51, 66, 1)",borderColor:"#fff",fontColor:"rgba(255, 255, 255, 1)"},focus:{backgroundColor:s?"rgba(255, 255, 255, 0.90);":"rgba(255, 255, 255, 0.90)",borderColor:s?"#FFDB58bb":"#fff",fontColor:"rgba(48, 51, 66, 1)"},menu:{backgroundColor:"#00000066",borderColor:s?"#ffffff66":"#5078f2",fontColor:s?"#ffffff66":"#fff"}}),_P=new _e,b_=b.memo(()=>{var w,C;const s=b.useRef(null),e=go(S=>S.setSidebarOpen),[t,n]=M.useState(null),{open:r}=$o("editNodeName"),{open:i}=$o("addEdgeToNode"),{open:o}=$o("mergeToNode"),{open:a}=$o("createBounty"),[c]=rp(S=>[S.isAdmin]),[l]=Os(S=>[S.addNewNode]),u=As(),{showSelectionGraph:h,selectionGraphData:f,setSelectedNode:p,setShowSelectionGraph:m}=ut(S=>S),d=_y(),g=b.useCallback(async()=>{try{if(u!=null&&u.ref_id){const S=await ap(u==null?void 0:u.ref_id,f.nodes.length||0);S&&l(S)}}catch(S){console.error(S)}},[l,u==null?void 0:u.ref_id,f.nodes.length]);dn(()=>{_()});const _=b.useCallback(()=>{const S=h?f:d;if(s.current){const D=S==null?void 0:S.nodes.find(O=>O.ref_id===(u==null?void 0:u.ref_id));if(D){const O=_P.set(D==null?void 0:D.x,D==null?void 0:D.y,D==null?void 0:D.z);s.current.position.copy(O)}}},[u,h,f,d]),k=b.useMemo(()=>{const S=c?[{key:"control-key-1",colors:Ci(h).focus,icon:F.jsx(G_,{}),left:-80,className:"add",onClick:O=>{n(O.currentTarget)}},{key:"control-key-2",colors:Ci(h).focus,icon:F.jsx(X_,{}),left:-40,className:"edit",onClick:()=>{r()}}]:[],D=[{key:"control-key-4",colors:Ci(h).focus,icon:F.jsx(R_,{}),left:0,className:"expand",onClick:()=>{const O=!h;m(O),O&&e(!0)}},{key:"control-key-5",colors:Ci(!0).close,icon:F.jsx(fl,{}),left:40,className:"exit",onClick:()=>{g()}},{key:"control-key-6",colors:Ci(!0).close,icon:F.jsx(P_,{}),left:40,className:"exit",onClick:()=>{m(!1),p(null)}}];return[...S,...D].map((O,j)=>({...O,left:-80+j*40}))},[c,h,r,m,e,g,p]);if(!u)return null;const x=()=>{n(null)},v=!!t,y=v?"simple-popover":void 0,T=((w=u==null?void 0:u.node_type)==null?void 0:w.toLowerCase())==="repository",E=!!(u&&((C=u==null?void 0:u.node_type)==null?void 0:C.toLowerCase())==="function");return F.jsx("group",{ref:s,children:F.jsxs(sc,{center:!0,className:"control-panel",onClick:S=>S.stopPropagation(),onKeyDown:S=>S.stopPropagation(),onPointerDown:S=>S.stopPropagation(),onPointerOut:S=>S.stopPropagation(),onPointerOver:S=>S.stopPropagation(),onPointerUp:S=>S.stopPropagation(),sprite:!0,zIndexRange:[16777271,16777272],children:[k.map(S=>F.jsx(yP,{backgroundColor:S.colors.backgroundColor,borderColor:S.colors.borderColor,className:S.className,fontColor:S.colors.fontColor,left:S.left,onClick:D=>{D.stopPropagation(),S.onClick(D)},children:S.icon},S.key)),E&&F.jsx(bP,{left:2,onClick:()=>{a()},children:"Create Test"}),F.jsx(vP,{anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:y,onClose:x,open:v,transformOrigin:{vertical:"top",horizontal:"right"},children:T?F.jsxs(F.Fragment,{children:[F.jsxs(xr,{"data-testid":"generate_tests",onClick:()=>{x()},children:[F.jsx(Zd,{children:F.jsx(Mh,{"data-testid":"AddCircleIcon"})}),"Generate Tests"]}),F.jsxs(xr,{"data-testid":"add_comments",onClick:()=>{x()},children:[F.jsxs(Zd,{children:[F.jsx(q_,{"data-testid":"DocumentIcon"})," "]}),"Add Comments"]}),F.jsxs(xr,{"data-testid":"review_bugs",onClick:()=>{x()},children:[F.jsx(H_,{"data-testid":"ConstructionIcon"})," Review Bugs"]}),F.jsxs(xr,{"data-testid":"find_vulnerabilities",onClick:()=>{x()},children:[F.jsx(Y_,{"data-testid":"RobotIcon"})," Find Vulnerabilities"]})]}):F.jsxs(F.Fragment,{children:[F.jsxs(xr,{"data-testid":"merge",onClick:()=>{o(),x()},children:[F.jsx(W_,{"data-testid":"MergeIcon"})," Merge"]}),F.jsxs(xr,{"data-testid":"add_edge",onClick:()=>{i(),x()},children:[F.jsx(Mh,{"data-testid":"AddCircleIcon"}),"Add edge"]})]})})]})})});b_.displayName="NodeControls";const yP=$e.div`
  position: fixed;
  top: -60px;
  left: ${s=>-7+s.left}px;
  width: 24px;
  height: 24px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${s=>s.backgroundColor?s.backgroundColor:"#000000bb"};
  color: ${s=>s.fontColor?s.fontColor:"#ffffff"};
  border-radius: 100%;
  font-size: 16px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,xr=$e(Nt).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${Te.BUTTON1};
  color: ${Te.white};

  &:hover {
    background: ${Te.BUTTON1_HOVER};
    color: ${Te.GRAY3};
  }
`,vP=$e(Z_)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${Te.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
    background-color: transparent !important;
    margin: 2px;
  }
`,Zd=$e.div`
  display: flex;
  align-items: center;
  justify-content: start;

  svg {
    margin-top: 1px;
    width: 12px;
    height: 12px;
  }
`,bP=$e.div`
  position: fixed;
  top: 40px;
  left: ${s=>-53+s.left}px;
  width: 100px;
  padding: 6px;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${Te.createTestButton};
  color: ${Te.black};
  font-size: 14px;
  font-family: Barlow;
  font-weight: 600;
  cursor: pointer;
  &:hover {
    transform: scale(1.05);
  }
`,x_=b.memo(()=>F.jsx(F.Fragment,{children:F.jsx(b_,{})}));x_.displayName="NodeDetailsPanel";const xP=()=>{const{dataInitial:s,isLoadingNew:e,isFetching:t,dataNew:n,resetDataNew:r}=Os(d=>d),i=b.useRef(null),{normalizedSchemasByType:o}=_o(d=>d),a=b.useRef(new Map),{setData:c,simulation:l,simulationCreate:u,simulationHelpers:h,graphStyle:f,setGraphRadius:p}=ut(d=>d),m=ut(d=>d.removeSimulation);return b.useEffect(()=>{if(!n)return;const d=n.nodes||[],g=n.links||[],_=structuredClone(d),k=structuredClone(g);if(l){const x=M_.isEqual(n,s);h.addNodesAndLinks(_,k,x)}l||u(_,k),r()},[c,n,l,u,r,h,s]),b.useEffect(()=>{s||m()},[s,m]),b.useEffect(()=>{l&&h.setForces()},[f,h,l]),b.useEffect(()=>{l&&l.on("end",()=>{const d=l.nodes().map(x=>(x.fx=x.x,x.fy=x.y,x.fz=x.z,new _e(x.x,x.y,x.z)));if(i.current){const x=i.current.getObjectByName("simulation-3d-group__node-points"),v=i.current.getObjectByName("simulation-3d-group__connections");x&&x.children[0].children.forEach((y,T)=>{const E=l.nodes()[T];E&&y.position.set(E.x,E.y,E.z)}),v&&(a.current.clear(),v.children.forEach((y,T)=>{var C;const E=y.children[0],w=y.children[1];if(E instanceof hp){const S=E,D=s==null?void 0:s.links[T];if(D){const O=l.nodes().find(L=>L.ref_id===D.source),j=l.nodes().find(L=>L.ref_id===D.target);if(!O||!j){console.warn(`Missing source or target node for link: ${D==null?void 0:D.ref_id}`);return}const{x:V,y:W,z:B}=O,{x:z,y:U,z:X}=j;a.current.set(D.ref_id,{sx:V,sy:W,sz:B,tx:z,ty:U,tz:X});const K=new _e((V+z)/2,(W+U)/2,(B+X)/2);w.position.set(K.x,K.y,K.z);const ee=((C=o[O.node_type])==null?void 0:C.primary_color)||"white";S.geometry.setPositions([V,W,B,z,U,X]);const{material:N}=S;N.color=new fu(ee),N.transparent=!0,N.opacity=.3}}}))}const g=new yp().setFromPoints(d),_=new vp;g.getBoundingSphere(_);const k=Math.min(5e3,_.radius);console.log(k),p(k)})},[s,l,p,o]),l?F.jsxs("group",{ref:i,children:[F.jsx(v_,{}),f==="earth"&&F.jsx(tP,{}),(e||t)&&F.jsx(mP,{}),f!=="earth"&&F.jsx(d_,{linksPosition:a.current}),F.jsx(x_,{})]}):null},wP=({fullSize:s=!0})=>{const e=go(t=>t.sidebarIsOpen);return F.jsx(kP,{align:"center",className:I_({"sidebar-is-open":e&&!s}),justify:"center",children:F.jsx(yy,{color:Te.SECONDARY_BLUE,size:64})})},kP=$e(Nt)`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: ${Te.black};
  z-index: 1;
`,w_=s=>{const e=b.useRef(null),{label:t,sourceX:n,sourceY:r,sourceZ:i,targetX:o,targetY:a,targetZ:c}=s;return F.jsxs("group",{children:[F.jsx(lp,{ref:e,color:"blue",isLine2:!0,lineWidth:2,name:"line",points:[n,r,i,o,a,c]}),F.jsxs("mesh",{children:[F.jsx("planeGeometry",{args:[t.length*2,2]}),F.jsx("meshBasicMaterial",{color:"black"}),F.jsx(uu,{anchorX:"center",anchorY:"middle",color:"white",...hu,fontSize:2,children:t})]})]})};w_.displayName="Connection";const TP=b.memo(w_),k_=b.memo(({links:s,nodes:e})=>{const t=b.useRef(null),n=b.useRef(new Map),{setSelectionGraphRadius:r}=ut(mp(i=>i));return b.useEffect(()=>{if(!t.current)return;console.log("connection to updated"),t.current.children.forEach((l,u)=>{const h=l.children[0],f=l.children[1];if(h instanceof hp){const p=h,m=s[u];if(m){const d=e.find(w=>w.ref_id===m.source),g=e.find(w=>w.ref_id===m.target);if(!d||!g)return;const{x:_,y:k}=d,{x,y:v}=g;n.current.set(m.ref_id,{sx:_,sy:k,tx:x,ty:v,sz:0,tz:0});const y=new _e((_+x)/2,(k+v)/2,0);f.position.set(y.x,y.y,1);let T=Math.atan2(v-k,x-_);(x<_||Math.abs(x-_)<.01&&v<k)&&(T+=Math.PI),f.rotation.set(0,0,T),p.geometry.setPositions([_,k,0,x,v,0]);const{material:E}=p;E.color=new fu("white")}}}),console.log("connection updated");const o=e.map(l=>new _e(l.x,l.y,l.z)),a=new yp().setFromPoints(o),c=new vp;a.getBoundingSphere(c),r(c.radius)},[s,r,e]),F.jsx("group",{ref:t,name:"simulation-3d-group__connections",children:s==null?void 0:s.map(i=>{var a;const o=((a=n.current)==null?void 0:a.get(i.ref_id))||{sx:0,sy:0,sz:0,tx:0,ty:0,tz:0};return F.jsx(TP,{label:i.edge_type,sourceX:o.sx,sourceY:o.sy,sourceZ:o.sz,targetX:o.tx,targetY:o.ty,targetZ:o.tz},i.ref_id)})})});k_.displayName="Connections";const EP=({onClick:s,node:e,selected:t,rounded:n=!0,x:r,y:i,z:o,id:a})=>{var k,x,v;const c=b.useRef(null),{normalizedSchemasByType:l,getNodeKeysByType:u}=_o(y=>y),h=ut(y=>y.setSelectedNode),f=new _e(r,i,o);dn(()=>{c.current&&c.current.position.lerp(f,.05)});const p=(k=l[e.node_type])==null?void 0:k.icon,m=p?pp[p]:null,d=u(e.node_type)||"",g=e!=null&&e.properties?e==null?void 0:e.properties[d]:"",_=g?up(g,30):"";return F.jsx("mesh",{ref:c,children:F.jsx(sc,{center:!0,sprite:!0,zIndexRange:[0,0],children:F.jsx(CP,{align:"center",direction:"row",justify:"flex-start",children:F.jsx(F.Fragment,{children:t?F.jsxs(SP,{rounded:!1,children:[F.jsx(OP,{onClick:()=>h(null),children:F.jsx(K_,{})}),F.jsx("div",{children:m?F.jsx(m,{}):F.jsx(fl,{})}),F.jsx(Kd,{children:_})]}):F.jsxs(F.Fragment,{children:[F.jsx(T_,{onClick:()=>s(a),rounded:n,children:F.jsx(AP,{align:"center",justify:"center",src:((x=e==null?void 0:e.properties)==null?void 0:x.image_url)||"",children:(v=e==null?void 0:e.properties)!=null&&v.image_url?null:F.jsx("span",{children:m?F.jsx(m,{}):F.jsx(fl,{})})})}),F.jsx(Kd,{children:_})]})})})})})},CP=$e(Nt)`
  background: black;
`,Kd=$e(Nt)`
  color: ${Te.white};
  margin-left: 16px;
  font-weight: 700;
  width: 100px;
  font-size: 16px;
`,T_=$e(Nt)`
  text-align: center;
  width: 48px;
  height: 48px;
  outline: 1px solid ${Te.white};
  outline-offset: 0px;
  background: ${Te.BG1};
  color: ${Te.white};
  border-radius: ${s=>`${s.rounded?"50%":"6px"}`};
  cursor: pointer;
  transition: font-size 0.4s, outline 0.4s;
  align-items: center;
  justify-content: center;
  font-family: Barlow;
  font-size: 24px;
  font-style: normal;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

  &:hover {
    outline-offset: 4px;
  }
`,SP=$e(T_)`
  width: 200px;
  height: 100px;
  flex-direction: row;
  justify-content: center;
  align-items: center;
`,OP=$e(Nt)`
  position: absolute;
  top: -10px;
  right: -10px;
  width: 30px;
  height: 30px;

  border-radius: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
  color: #ffffff;
  border-radius: 100%;
  font-size: 30px;
  cursor: pointer;
  transition: opacity 0.4s;
  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.5);
`,AP=$e(Nt)`
  background-image: ${({src:s})=>`url(${s})`};
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  width: 32px;
  height: 32px;
  border-radius: 50%;
`,Qd=50,DP=7,E_=b.memo(()=>{var m;const[s,e]=b.useState(),{addNewNode:t,nodesNormalized:n}=Os(d=>d),r=As(),i=b.useRef(null),[o,a]=b.useState(null),c=b.useRef(new Map),l=V_(r==null?void 0:r.ref_id),{setSelectedNode:u}=ut(mp(d=>d)),h=b.useMemo(()=>{if(!(s!=null&&s.nodes.length))return{nodes:[],links:[]};const d=(o==null?void 0:o.nodes)||[],g=s.nodes.filter(E=>!d.some(w=>w.ref_id===E.ref_id)),_=d.find(E=>E.x!==0||E.y!==0),k=_?{x:_.x,y:_.y}:{x:0,y:0},x=Math.atan2(k.y,k.x),v=d.length+g.length-1,y=Math.PI*2/v;return{nodes:[...d,...g.map((E,w)=>{const C=x+y*(w+1),S=E.ref_id===(r==null?void 0:r.ref_id)?0:Math.cos(C)*Qd,D=E.ref_id===(r==null?void 0:r.ref_id)?0:Math.sin(C)*Qd,O=(E.ref_id===(r==null?void 0:r.ref_id),0);return{...E,x:S,y:D,z:O}})],links:s.links}},[s,r,o==null?void 0:o.nodes]),f=b.useMemo(()=>{var g;if((g=h==null?void 0:h.nodes)!=null&&g.length)return h;if(o)return{nodes:o.nodes,links:o.links};const d=r!=null&&r.ref_id?n.get((r==null?void 0:r.ref_id)||""):null;return{nodes:d?[{...d,x:0,y:0,z:0}]:[],links:[]}},[h,o,r==null?void 0:r.ref_id,n]);b.useEffect(()=>{r&&(async()=>{if(r!=null&&r.ref_id&&r.ref_id!==l)try{const g=await ap(r.ref_id,0,5,{useSubGraph:!1});if(g){const _=g.nodes.filter((y,T)=>y.ref_id!==r.ref_id&&T<DP),x=[..._.map(y=>({...y,x:0,y:0,z:0})),{...r,x:0,y:0,z:0,fx:0,fy:0,fz:0}],v=g.edges.filter(y=>x.some(T=>T.ref_id===y.target)&&x.some(T=>T.ref_id===y.source));e({nodes:x,links:v}),c.current=new Map,t({nodes:_,edges:v})}}catch(g){console.error(g)}})()},[t,l,r,e]);const p=b.useCallback(d=>{if(r){const g=f.nodes.find(x=>x.ref_id===d),_=[{...g,x:0,y:0,z:0,fx:0,fy:0,fz:0},{...r,...(g==null?void 0:g.x)!==void 0?{fx:-g.x,x:-g.x}:{x:0},...(g==null?void 0:g.y)!==void 0?{fy:-g.y,y:-g.y}:{y:0},...(g==null?void 0:g.z)!==void 0?{fz:g==null?void 0:g.z,z:g.z}:{z:0}}],k=f.links.filter(x=>x.target===(r==null?void 0:r.ref_id)&&x.source===d||x.source===(r==null?void 0:r.ref_id)&&x.target===d);console.log(k,"here"),e(null),a({nodes:_,links:k}),g&&u(g)}},[f.links,f.nodes,r,u]);return F.jsx(F.Fragment,{children:F.jsxs("group",{ref:i,name:"simulation-2d-group",children:[(m=f.nodes)==null?void 0:m.map(d=>F.jsx(EP,{id:d.ref_id,node:d,onClick:p,selected:d.ref_id===(r==null?void 0:r.ref_id),x:d.x,y:d.y,z:d.z},d.ref_id)),F.jsx(k_,{links:f.links,nodes:f.nodes})]})})});E_.displayName="SelectionDataNodes";const RP=()=>{const s=b.useRef(null),e=ut(n=>n.selectionGraphRadius),[t]=b.useState(.8);return b.useEffect(()=>{if(console.log(e,"radius"),s.current){const n=s.current.getDistanceToFitSphere(55);s.current.setLookAt(ds.x,ds.y,n,0,0,0,!0)}},[e]),F.jsx(Rp,{ref:s,azimuthRotateSpeed:0,boundaryEnclosesCamera:!0,makeDefault:!0,maxDistance:12e3,minDistance:1,polarRotateSpeed:0,smoothTime:t})},PP=()=>F.jsxs(F.Fragment,{children:[F.jsx(fp,{}),F.jsx(RP,{}),F.jsx(E_,{})]}),Jd=()=>F.jsx(sc,{children:F.jsx(a1,{})}),MP=()=>{const{universeColor:s}=QT("universe",{universeColor:Te.black}),e=As();return b.useMemo(()=>e!=null&&e.node_type?z_(e.node_type):lE,[e]),F.jsxs(F.Fragment,{children:[F.jsx("color",{args:[Te.BLUE_PRESS_STATE||s],attach:"transparent"}),F.jsx(fp,{}),F.jsx(vD,{}),F.jsxs(w1,{children:[!1,F.jsx(xP,{})]})]})};let hl=null;const ep={aspect:window.innerWidth/window.innerHeight,far:3e4,near:1,position:[Mi.x,Mi.y,Mi.z]},IP=()=>{const[s,e,t]=[fs(c=>c.setIsUserScrollingOnHtmlPanel),fs(c=>c.setIsUserScrolling),fs(c=>c.setUserMovedCamera)],n=Os(c=>c.isFetching),r=go(c=>c.universeQuestionIsOpen),i=As(),o=b.useCallback(c=>{var h;const{target:l}=c,{offsetParent:u}=l;hl&&clearTimeout(hl),(h=u==null?void 0:u.classList)!=null&&h.contains("html-panel")&&u.clientHeight<u.scrollHeight&&s(!0),e(!0),t(!0),hl=setTimeout(()=>{e(!1),s(!1)},200)},[e,s,t]),a=b.useCallback(c=>N_(c,"threeState"),[]);return F.jsxs(NP,{children:[F.jsxs(b.Suspense,{fallback:null,children:[F.jsx(sm,{hidden:!0,isRoot:!0}),F.jsxs(Dh,{camera:ep,frameloop:i?"demand":"always",id:"universe-canvas",onCreated:a,onWheel:o,children:[Ah&&F.jsx(Rh,{position:"top-right",style:{top:"80px"}}),F.jsxs(b.Suspense,{fallback:F.jsx(Jd,{}),children:[F.jsx(b1,{}),F.jsx(lf,{}),F.jsx(uf,{}),F.jsx(MP,{})]})]}),F.jsx(ED,{}),i?F.jsx($P,{children:F.jsxs(Dh,{camera:{...ep,position:[ds.x,ds.y,ds.z]},id:"selection-canvas",onCreated:({gl:c})=>{c.setClearColor("#000000"),c.setClearAlpha(.8)},children:[Ah&&F.jsx(Rh,{position:"top-right",style:{top:"80px"}}),F.jsxs(b.Suspense,{fallback:F.jsx(Jd,{}),children:[F.jsx(lf,{}),F.jsx(uf,{}),F.jsx(PP,{})]})]})}):null]}),r&&F.jsx(eE,{}),n&&F.jsx(wP,{fullSize:!1}),F.jsx(Q_,{})]})},NP=$e(Nt)`
  flex: 1 1 100%;
  position: relative;
`,$P=$e(Nt)`
  position: absolute;
  inset: 0;
`,EM=b.memo(IP);export{EM as Universe};
